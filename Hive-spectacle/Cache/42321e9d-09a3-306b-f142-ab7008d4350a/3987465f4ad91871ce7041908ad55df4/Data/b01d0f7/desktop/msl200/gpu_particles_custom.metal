#pragma clang diagnostic ignored "-Wmissing-prototypes"
#include <metal_stdlib>
#include <simd/simd.h>
using namespace metal;
#define SC_ENABLE_INSTANCED_RENDERING
#ifdef Tweak_N280
#undef Tweak_N280
#endif
#ifdef animated
#undef animated
#endif
#ifdef Tweak_N303
#undef Tweak_N303
#endif
#ifdef Tweak_N308
#undef Tweak_N308
#endif
#ifdef Tweak_N339
#undef Tweak_N339
#endif
#ifdef Tweak_N274
#undef Tweak_N274
#endif
#ifdef IGNOREVEL
#undef IGNOREVEL
#endif
#ifdef NORMALIZESCALETOTRANSFORM
#undef NORMALIZESCALETOTRANSFORM
#endif
#ifdef CENTER_BBOX
#undef CENTER_BBOX
#endif
#ifdef circularMask
#undef circularMask
#endif
#ifdef squareMask
#undef squareMask
#endif
#ifdef texMask
#undef texMask
#endif
#ifdef texMaskInvert
#undef texMaskInvert
#endif
namespace SNAP_VS {
int sc_GetStereoViewIndex()
{
return 0;
}
}
#ifndef sc_TextureRenderingLayout_Regular
#define sc_TextureRenderingLayout_Regular 0
#define sc_TextureRenderingLayout_StereoInstancedClipped 1
#define sc_TextureRenderingLayout_StereoMultiview 2
#endif
// SCC_BACKEND_SHADER_FLAGS_BEGIN__
// SCC_BACKEND_SHADER_FLAG_DISABLE_FRUSTUM_CULLING
// NGS_FLAG_IS_NORMAL_MAP normalTexPBR
// NGS_FLAG_IS_NORMAL_MAP normalTexMatcap
// SCC_BACKEND_SHADER_FLAGS_END__
//SG_REFLECTION_BEGIN(200)
//attribute vec4 boneData 5
//attribute vec3 blendShape0Pos 6
//attribute vec3 blendShape0Normal 12
//attribute vec3 blendShape1Pos 7
//attribute vec3 blendShape1Normal 13
//attribute vec3 blendShape2Pos 8
//attribute vec3 blendShape2Normal 14
//attribute vec3 blendShape3Pos 9
//attribute vec3 blendShape4Pos 10
//attribute vec3 blendShape5Pos 11
//attribute vec4 position 0
//attribute vec3 normal 1
//attribute vec4 tangent 2
//attribute vec2 texture0 3
//attribute vec2 texture1 4
//attribute vec4 color 18
//attribute vec3 positionNext 15
//attribute vec3 positionPrevious 16
//attribute vec4 strandProperties 17
//output vec4 sc_FragData0 0
//output uvec4 sc_RayTracingPositionAndMask 0
//output uvec4 sc_RayTracingNormalAndMore 1
//sampler sampler Tex3dSmpSC 0:34
//sampler sampler colorRampTextureSmpSC 0:35
//sampler sampler depthMapSmpSC 0:36
//sampler sampler displace3dTexSmpSC 0:37
//sampler sampler intensityTextureSmpSC 0:38
//sampler sampler mainTextureSmpSC 0:39
//sampler sampler matcapTexSmpSC 0:40
//sampler sampler normalTexMatcapSmpSC 0:41
//sampler sampler normalTexPBRSmpSC 0:42
//sampler sampler sc_CurveAtlasSmpSC 0:43
//sampler sampler sc_EnvmapDiffuseSmpSC 0:44
//sampler sampler sc_EnvmapSpecularSmpSC 0:45
//sampler sampler sc_RayTracingGlobalIlluminationSmpSC 0:47
//sampler sampler sc_RayTracingReflectionsSmpSC 0:48
//sampler sampler sc_RayTracingShadowsSmpSC 0:49
//sampler sampler sc_SSAOTextureSmpSC 0:50
//sampler sampler sc_ScreenTextureSmpSC 0:51
//sampler sampler sc_ShadowTextureSmpSC 0:52
//sampler sampler segTexSmpSC 0:54
//sampler sampler sizeRampTextureSmpSC 0:55
//sampler sampler trailColorRampTexSmpSC 0:56
//sampler sampler trailSizeRampTexSmpSC 0:57
//sampler sampler trailTexSmpSC 0:58
//sampler sampler velRampTextureSmpSC 0:59
//texture texture3D Tex3d 0:1:0:34
//texture texture2D colorRampTexture 0:2:0:35
//texture texture2D depthMap 0:3:0:36
//texture texture3D displace3dTex 0:4:0:37
//texture texture2D intensityTexture 0:5:0:38
//texture texture2D mainTexture 0:6:0:39
//texture texture2D matcapTex 0:7:0:40
//texture texture2D normalTexMatcap 0:8:0:41
//texture texture2D normalTexPBR 0:9:0:42
//texture texture2D sc_CurveAtlas 0:10:0:43
//texture texture2D sc_EnvmapDiffuse 0:11:0:44
//texture texture2D sc_EnvmapSpecular 0:12:0:45
//texture texture2D sc_RayTracingGlobalIllumination 0:21:0:47
//texture texture2D sc_RayTracingReflections 0:22:0:48
//texture texture2D sc_RayTracingShadows 0:23:0:49
//texture texture2D sc_SSAOTexture 0:24:0:50
//texture texture2D sc_ScreenTexture 0:25:0:51
//texture texture2D sc_ShadowTexture 0:26:0:52
//texture texture2D segTex 0:28:0:54
//texture texture2D sizeRampTexture 0:29:0:55
//texture texture2D trailColorRampTex 0:30:0:56
//texture texture2D trailSizeRampTex 0:31:0:57
//texture texture2D trailTex 0:32:0:58
//texture texture2D velRampTexture 0:33:0:59
//ubo float sc_BonesUBO 0:0:96 {
//sc_Bone_t sc_Bones 0:[1]:96
//float4 sc_Bones.boneMatrix 0:[3]:16
//float4 sc_Bones.normalMatrix 48:[3]:16
//}
//ubo int UserUniforms 0:60:7792 {
//sc_PointLight_t sc_PointLights 0:[3]:80
//bool sc_PointLights.falloffEnabled 0
//float sc_PointLights.falloffEndDistance 4
//float sc_PointLights.negRcpFalloffEndDistance4 8
//float sc_PointLights.angleScale 12
//float sc_PointLights.angleOffset 16
//float3 sc_PointLights.direction 32
//float3 sc_PointLights.position 48
//float4 sc_PointLights.color 64
//sc_DirectionalLight_t sc_DirectionalLights 240:[5]:32
//float3 sc_DirectionalLights.direction 0
//float4 sc_DirectionalLights.color 16
//sc_AmbientLight_t sc_AmbientLights 400:[3]:32
//float3 sc_AmbientLights.color 0
//float sc_AmbientLights.intensity 16
//sc_LightEstimationData_t sc_LightEstimationData 496
//sc_SphericalGaussianLight_t sc_LightEstimationData.sg 0:[12]:48
//float3 sc_LightEstimationData.sg.color 0
//float sc_LightEstimationData.sg.sharpness 16
//float3 sc_LightEstimationData.sg.axis 32
//float3 sc_LightEstimationData.ambientLight 576
//float4 sc_EnvmapDiffuseSize 1088
//float4 sc_EnvmapSpecularSize 1136
//float3 sc_EnvmapRotation 1184
//float sc_EnvmapExposure 1200
//float3 sc_Sh 1216:[9]:16
//float sc_ShIntensity 1360
//float4 sc_Time 1376
//float4 sc_UniformConstants 1392
//float4 sc_GeometryInfo 1408
//float4x4 sc_ModelViewProjectionMatrixArray 1424:[2]:64
//float4x4 sc_ViewProjectionMatrixArray 1680:[2]:64
//float4x4 sc_ModelViewMatrixArray 1936:[2]:64
//float4x4 sc_ProjectionMatrixArray 2384:[2]:64
//float4x4 sc_ProjectionMatrixInverseArray 2512:[2]:64
//float4x4 sc_ViewMatrixArray 2640:[2]:64
//float4x4 sc_ViewMatrixInverseArray 2768:[2]:64
//float4x4 sc_PrevFrameViewProjectionMatrixArray 2896:[2]:64
//float4x4 sc_ModelMatrix 3024
//float4x4 sc_ModelMatrixInverse 3088
//float3x3 sc_NormalMatrix 3152
//float4x4 sc_PrevFrameModelMatrix 3248
//float3 sc_LocalAabbMin 3376
//float3 sc_LocalAabbMax 3392
//float4 sc_CurrentRenderTargetDims 3456
//sc_Camera_t sc_Camera 3472
//float3 sc_Camera.position 0
//float sc_Camera.aspect 16
//float2 sc_Camera.clipPlanes 24
//float sc_ShadowDensity 3504
//float4 sc_ShadowColor 3520
//float4x4 sc_ProjectorMatrix 3536
//float4 weights0 3616
//float4 weights1 3632
//float4 sc_StereoClipPlanes 3664:[2]:16
//float2 sc_TAAJitterOffset 3704
//int sc_RayTracingReceiverEffectsMask 3824
//float3 sc_RayTracingOriginScale 3984
//uint sc_RayTracingReceiverMask 4000
//float3 sc_RayTracingOriginOffset 4032
//uint sc_RayTracingReceiverId 4048
//float4 voxelization_params_0 4064
//float4 voxelization_params_frustum_lrbt 4080
//float4 voxelization_params_frustum_nf 4096
//float3 voxelization_params_camera_pos 4112
//float4x4 sc_ModelMatrixVoxelization 4128
//float correctedIntensity 4192
//float3x3 intensityTextureTransform 4256
//float4 intensityTextureUvMinMax 4304
//float4 intensityTextureBorderColor 4320
//int PreviewEnabled 4484
//float alphaTestThreshold 4492
//float timeGlobal 4496
//float externalTimeInput 4500
//float externalSeed 4504
//float lifeTimeConstant 4508
//float2 lifeTimeMinMax 4512
//float spawnDuration 4520
//float trailLength 4524
//float2 trailTaper 4528
//float trailWidth 4536
//float3x3 trailSizeRampTexTransform 4592
//float4 trailSizeRampTexUvMinMax 4640
//float4 trailSizeRampTexBorderColor 4656
//float Tweak_N255 4672
//float Tweak_N254 4676
//float3 Tweak_N252 4688
//float3 Tweak_N253 4704
//float Tweak_N224 4720
//float3 Tweak_N250 4736
//float3 Tweak_N251 4752
//float volumeFill 4768
//float Tweak_N238 4772
//float Tweak_N16 4776
//float Tweak_N234 4780
//float Tweak_N239 4784
//float2 Tweak_N240 4792
//float3 Tweak_N241 4800
//float3 Tweak_N242 4816
//float Tweak_N226 4832
//float Tweak_N243 4836
//float Tweak_N257 4840
//float Tweak_N258 4844
//float2 Tweak_N259 4848
//float3 Tweak_N260 4864
//float3 Tweak_N261 4880
//float Tweak_N262 4896
//float Tweak_N263 4900
//float3 Tweak_N236 4912
//float3 Tweak_N237 4928
//float3 Tweak_N264 4944
//float Tweak_N232 4960
//float Tweak_N233 4964
//float Tweak_N231 4968
//float Tweak_N304 4972
//float Tweak_N229 4976
//bool Tweak_N280 4980
//float3 Tweak_N157_curveData 4992
//float3x3 sc_CurveAtlasTransform 5056
//float4 sc_CurveAtlasUvMinMax 5104
//float4 sc_CurveAtlasBorderColor 5120
//float Tweak_N285 5136
//float Tweak_N245 5140
//float Tweak_N230 5144
//bool animated 5148
//float Tweak_N279 5152
//bool Tweak_N303 5156
//float2 Tweak_N336 5160
//float3 Tweak_N293_curveData 5168
//float3 Tweak_N305_curveData 5184
//float3 Tweak_N297_curveData 5200
//float Tweak_N298 5216
//float3 Tweak_N330 5232
//bool Tweak_N308 5248
//float Tweak_N294 5252
//bool Tweak_N339 5256
//float2 Tweak_N342 5264
//float Tweak_N301 5272
//bool Tweak_N274 5276
//float3 Tweak_N299_curveData 5280
//float Tweak_N302 5296
//float Tweak_N318 5300
//int Tweak_N271 5304
//float Tweak_N273 5308
//float2 Tweak_N270 5312
//float2 Tweak_N272 5320
//float Tweak_N269 5328
//float Tweak_N275 5332
//int Tweak_N161 5336
//float3 spawnBox 5344
//float3 spawnSphere 5360
//float3 noiseMult 5376
//float3 noiseFrequency 5392
//float3 sNoiseMult 5408
//float3 sNoiseFrequency 5424
//float3 velocityMin 5440
//float3 velocityMax 5456
//float3 velocityDrag 5472
//float3x3 velRampTextureTransform 5536
//float4 velRampTextureUvMinMax 5584
//float4 velRampTextureBorderColor 5600
//float2 sizeStart 5616
//float2 sizeEnd 5624
//float2 sizeStartMax 5632
//float2 sizeEndMax 5640
//float3 sizeStart3D 5648
//float3 sizeEnd3D 5664
//float3 sizeStartMax3D 5680
//float3 sizeEndMax3D 5696
//float sizeSpeed 5712
//float3x3 sizeRampTextureTransform 5776
//float4 sizeRampTextureUvMinMax 5824
//float4 sizeRampTextureBorderColor 5840
//float gravity 5856
//float3 localForce 5872
//float attractRepelForceStrength 5888
//float3 customForceOrigin 5904
//float3 Tex3dScale 5952
//float3 Tex3dScrollSpeed 5968
//float3 Tex3dForceStrength 5984
//float3 Tweak_N314 6000
//float sizeVelScale 6016
//bool IGNOREVEL 6020
//bool NORMALIZESCALETOTRANSFORM 6024
//float2 velScaleMinMax 6032
//float2 rotationRandom 6040
//float2 rotationRate 6048
//float2 rotationRandomX 6056
//float2 rotationRateX 6064
//float2 randomRotationY 6072
//float2 rotationRateY 6080
//float2 randomRotationZ 6088
//float2 rotationRateZ 6096
//float rotationDrag 6104
//bool CENTER_BBOX 6108
//float3 displaceScale 6144
//float3 displaceSpeed 6160
//float3 displaceStrength 6176
//float3 orbitAxis 6192
//float3 orbitCenter 6208
//float2 orbitMinMaxAngle 6224
//float2 orbitMinMaxSpeed 6232
//float fadeDistanceVisible 6240
//float fadeDistanceInvisible 6244
//bool circularMask 6248
//bool squareMask 6252
//float maskTreshold 6256
//float maskFeather 6260
//float3x3 trailTexTransform 6320
//float4 trailTexUvMinMax 6368
//float4 trailTexBorderColor 6384
//float4 trailColorRampTexSize 6400
//float3x3 trailColorRampTexTransform 6448
//float4 trailColorRampTexUvMinMax 6496
//float4 trailColorRampTexBorderColor 6512
//float2 trailFadeStartEnd 6528
//float2 trailFadeInOut 6536
//float3 colorStart 6544
//float3 colorEnd 6560
//float3 colorMinStart 6576
//float3 colorMinEnd 6592
//float3 colorMaxStart 6608
//float3 colorMaxEnd 6624
//float alphaStart 6640
//float alphaEnd 6644
//float alphaMinStart 6648
//float alphaMinEnd 6652
//float alphaMaxStart 6656
//float alphaMaxEnd 6660
//float alphaDissolveMult 6664
//float numValidFrames 6668
//float2 gridSize 6672
//float flipBookSpeedMult 6680
//float flipBookRandomStart 6684
//float4 colorRampTextureSize 6688
//float3x3 colorRampTextureTransform 6736
//float4 colorRampTextureUvMinMax 6784
//float4 colorRampTextureBorderColor 6800
//float4 colorRampMult 6816
//float3x3 mainTextureTransform 6880
//float4 mainTextureUvMinMax 6928
//float4 mainTextureBorderColor 6944
//float3x3 normalTexPBRTransform 7008
//float4 normalTexPBRUvMinMax 7056
//float4 normalTexPBRBorderColor 7072
//float metallic 7088
//float roughness 7092
//float intensityMatcap 7096
//float3x3 matcapTexTransform 7152
//float4 matcapTexUvMinMax 7200
//float4 matcapTexBorderColor 7216
//float3x3 normalTexMatcapTransform 7280
//float4 normalTexMatcapUvMinMax 7328
//float4 normalTexMatcapBorderColor 7344
//float3x3 depthMapTransform 7408
//float4 depthMapUvMinMax 7456
//float4 depthMapBorderColor 7472
//float4 depthMapProjectionMatrixTerms 7488
//float startFade 7504
//float endFade 7508
//float exponentFade 7512
//bool texMask 7516
//bool texMaskInvert 7520
//float3x3 segTexTransform 7584
//float4 segTexUvMinMax 7632
//float4 segTexBorderColor 7648
//float3 Port_Default_N247 7680
//float Port_Input1_N216 7704
//float3 Port_Emissive_N014 7712
//float3 Port_AO_N014 7728
//float3 Port_SpecularAO_N014 7744
//}
//spec_const bool ALIGNPARTICLES 0 0
//spec_const bool ALPHADISSOLVE 1 0
//spec_const bool ALPHAMINMAX 2 0
//spec_const bool BASETEXTURE 3 0
//spec_const bool BLACKASALPHA 4 0
//spec_const bool BLEND_MODE_AVERAGE 5 0
//spec_const bool BLEND_MODE_BRIGHT 6 0
//spec_const bool BLEND_MODE_COLOR_BURN 7 0
//spec_const bool BLEND_MODE_COLOR_DODGE 8 0
//spec_const bool BLEND_MODE_COLOR 9 0
//spec_const bool BLEND_MODE_DARKEN 10 0
//spec_const bool BLEND_MODE_DIFFERENCE 11 0
//spec_const bool BLEND_MODE_DIVIDE 12 0
//spec_const bool BLEND_MODE_DIVISION 13 0
//spec_const bool BLEND_MODE_EXCLUSION 14 0
//spec_const bool BLEND_MODE_FORGRAY 15 0
//spec_const bool BLEND_MODE_HARD_GLOW 16 0
//spec_const bool BLEND_MODE_HARD_LIGHT 17 0
//spec_const bool BLEND_MODE_HARD_MIX 18 0
//spec_const bool BLEND_MODE_HARD_PHOENIX 19 0
//spec_const bool BLEND_MODE_HARD_REFLECT 20 0
//spec_const bool BLEND_MODE_HUE 21 0
//spec_const bool BLEND_MODE_INTENSE 22 0
//spec_const bool BLEND_MODE_LIGHTEN 23 0
//spec_const bool BLEND_MODE_LINEAR_LIGHT 24 0
//spec_const bool BLEND_MODE_LUMINOSITY 25 0
//spec_const bool BLEND_MODE_NEGATION 26 0
//spec_const bool BLEND_MODE_NOTBRIGHT 27 0
//spec_const bool BLEND_MODE_OVERLAY 28 0
//spec_const bool BLEND_MODE_PIN_LIGHT 29 0
//spec_const bool BLEND_MODE_REALISTIC 30 0
//spec_const bool BLEND_MODE_SATURATION 31 0
//spec_const bool BLEND_MODE_SOFT_LIGHT 32 0
//spec_const bool BLEND_MODE_SUBTRACT 33 0
//spec_const bool BLEND_MODE_VIVID_LIGHT 34 0
//spec_const bool BOXSPAWN 35 0
//spec_const bool COLORMINMAX 36 0
//spec_const bool COLORMONOMIN 37 0
//spec_const bool COLORRAMP 38 0
//spec_const bool CONSTANTSPAWN 39 0
//spec_const bool CUSTOMFORCE 40 0
//spec_const bool ENABLE_SIZERAMPSTARTENDASBOUNDS 41 0
//spec_const bool ENABLE_STIPPLE_PATTERN_TEST 42 0
//spec_const bool EXTERNALTIME 43 0
//spec_const bool FLIPBOOKBLEND 44 0
//spec_const bool FLIPBOOKBYLIFE 45 0
//spec_const bool FLIPBOOK 46 0
//spec_const bool FORCE 47 0
//spec_const bool INILOCATION 48 0
//spec_const bool INSTANTSPAWN 49 0
//spec_const bool LIFETIMEMINMAX 50 0
//spec_const bool NOISE 51 0
//spec_const bool NORANDOFFSET 52 0
//spec_const bool PBRNORMALTEX 53 0
//spec_const bool PBR 54 0
//spec_const bool PREMULTIPLIEDCOLOR 55 0
//spec_const bool PREWARMSPAWN 56 0
//spec_const bool QUANTIZE 57 0
//spec_const bool SCREENFADE 58 0
//spec_const bool SC_USE_CLAMP_TO_BORDER_colorRampTexture 59 0
//spec_const bool SC_USE_CLAMP_TO_BORDER_depthMap 60 0
//spec_const bool SC_USE_CLAMP_TO_BORDER_intensityTexture 61 0
//spec_const bool SC_USE_CLAMP_TO_BORDER_mainTexture 62 0
//spec_const bool SC_USE_CLAMP_TO_BORDER_matcapTex 63 0
//spec_const bool SC_USE_CLAMP_TO_BORDER_normalTexMatcap 64 0
//spec_const bool SC_USE_CLAMP_TO_BORDER_normalTexPBR 65 0
//spec_const bool SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas 66 0
//spec_const bool SC_USE_CLAMP_TO_BORDER_segTex 67 0
//spec_const bool SC_USE_CLAMP_TO_BORDER_sizeRampTexture 68 0
//spec_const bool SC_USE_CLAMP_TO_BORDER_trailColorRampTex 69 0
//spec_const bool SC_USE_CLAMP_TO_BORDER_trailSizeRampTex 70 0
//spec_const bool SC_USE_CLAMP_TO_BORDER_trailTex 71 0
//spec_const bool SC_USE_CLAMP_TO_BORDER_velRampTexture 72 0
//spec_const bool SC_USE_UV_MIN_MAX_colorRampTexture 73 0
//spec_const bool SC_USE_UV_MIN_MAX_depthMap 74 0
//spec_const bool SC_USE_UV_MIN_MAX_intensityTexture 75 0
//spec_const bool SC_USE_UV_MIN_MAX_mainTexture 76 0
//spec_const bool SC_USE_UV_MIN_MAX_matcapTex 77 0
//spec_const bool SC_USE_UV_MIN_MAX_normalTexMatcap 78 0
//spec_const bool SC_USE_UV_MIN_MAX_normalTexPBR 79 0
//spec_const bool SC_USE_UV_MIN_MAX_sc_CurveAtlas 80 0
//spec_const bool SC_USE_UV_MIN_MAX_segTex 81 0
//spec_const bool SC_USE_UV_MIN_MAX_sizeRampTexture 82 0
//spec_const bool SC_USE_UV_MIN_MAX_trailColorRampTex 83 0
//spec_const bool SC_USE_UV_MIN_MAX_trailSizeRampTex 84 0
//spec_const bool SC_USE_UV_MIN_MAX_trailTex 85 0
//spec_const bool SC_USE_UV_MIN_MAX_velRampTexture 86 0
//spec_const bool SC_USE_UV_TRANSFORM_colorRampTexture 87 0
//spec_const bool SC_USE_UV_TRANSFORM_depthMap 88 0
//spec_const bool SC_USE_UV_TRANSFORM_intensityTexture 89 0
//spec_const bool SC_USE_UV_TRANSFORM_mainTexture 90 0
//spec_const bool SC_USE_UV_TRANSFORM_matcapTex 91 0
//spec_const bool SC_USE_UV_TRANSFORM_normalTexMatcap 92 0
//spec_const bool SC_USE_UV_TRANSFORM_normalTexPBR 93 0
//spec_const bool SC_USE_UV_TRANSFORM_sc_CurveAtlas 94 0
//spec_const bool SC_USE_UV_TRANSFORM_segTex 95 0
//spec_const bool SC_USE_UV_TRANSFORM_sizeRampTexture 96 0
//spec_const bool SC_USE_UV_TRANSFORM_trailColorRampTex 97 0
//spec_const bool SC_USE_UV_TRANSFORM_trailSizeRampTex 98 0
//spec_const bool SC_USE_UV_TRANSFORM_trailTex 99 0
//spec_const bool SC_USE_UV_TRANSFORM_velRampTexture 100 0
//spec_const bool SIZEMINMAX 101 0
//spec_const bool SIZERAMP 102 0
//spec_const bool SNOISE 103 0
//spec_const bool SPHERESPAWN 104 0
//spec_const bool TRAILCOLORRAMP 105 0
//spec_const bool TRAILSIZERAMPSTARTENDASBOUNDS 106 0
//spec_const bool TRAILSIZERAMP 107 0
//spec_const bool TRAILS 108 0
//spec_const bool TRAILTEXTURE 109 0
//spec_const bool TRAILTWIST 110 0
//spec_const bool Tweak_N131 111 0
//spec_const bool Tweak_N133 112 0
//spec_const bool Tweak_N228 113 0
//spec_const bool Tweak_N282 114 0
//spec_const bool Tweak_N296 115 0
//spec_const bool Tweak_N313 116 0
//spec_const bool Tweak_N323 117 0
//spec_const bool Tweak_N331 118 0
//spec_const bool Tweak_N332 119 0
//spec_const bool UseViewSpaceDepthVariant 120 1
//spec_const bool VELRAMP 121 0
//spec_const bool WORLDPOSSEED 122 0
//spec_const bool colorRampTextureHasSwappedViews 123 0
//spec_const bool depthMapHasSwappedViews 124 0
//spec_const bool intensityTextureHasSwappedViews 125 0
//spec_const bool mainTextureHasSwappedViews 126 0
//spec_const bool matcapTexHasSwappedViews 127 0
//spec_const bool matcap 128 0
//spec_const bool normalTexMatcapHasSwappedViews 129 0
//spec_const bool normalTexPBRHasSwappedViews 130 0
//spec_const bool sc_BlendMode_AddWithAlphaFactor 131 0
//spec_const bool sc_BlendMode_Add 132 0
//spec_const bool sc_BlendMode_AlphaTest 133 0
//spec_const bool sc_BlendMode_AlphaToCoverage 134 0
//spec_const bool sc_BlendMode_ColoredGlass 135 0
//spec_const bool sc_BlendMode_Custom 136 0
//spec_const bool sc_BlendMode_Max 137 0
//spec_const bool sc_BlendMode_Min 138 0
//spec_const bool sc_BlendMode_MultiplyOriginal 139 0
//spec_const bool sc_BlendMode_Multiply 140 0
//spec_const bool sc_BlendMode_Normal 141 0
//spec_const bool sc_BlendMode_PremultipliedAlphaAuto 142 0
//spec_const bool sc_BlendMode_PremultipliedAlphaHardware 143 0
//spec_const bool sc_BlendMode_PremultipliedAlpha 144 0
//spec_const bool sc_BlendMode_Screen 145 0
//spec_const bool sc_CurveAtlasHasSwappedViews 146 0
//spec_const bool sc_DepthOnly 147 0
//spec_const bool sc_EnvmapDiffuseHasSwappedViews 148 0
//spec_const bool sc_EnvmapSpecularHasSwappedViews 149 0
//spec_const bool sc_FramebufferFetch 150 0
//spec_const bool sc_HasDiffuseEnvmap 151 0
//spec_const bool sc_IsEditor 152 0
//spec_const bool sc_LightEstimation 153 0
//spec_const bool sc_MotionVectorsPass 154 0
//spec_const bool sc_OITCompositingPass 155 0
//spec_const bool sc_OITDepthBoundsPass 156 0
//spec_const bool sc_OITDepthGatherPass 157 0
//spec_const bool sc_OutputBounds 158 0
//spec_const bool sc_ProjectiveShadowsCaster 159 0
//spec_const bool sc_ProjectiveShadowsReceiver 160 0
//spec_const bool sc_RayTracingGlobalIlluminationHasSwappedViews 161 0
//spec_const bool sc_RayTracingReflectionsHasSwappedViews 162 0
//spec_const bool sc_RayTracingShadowsHasSwappedViews 163 0
//spec_const bool sc_RenderAlphaToColor 164 0
//spec_const bool sc_SSAOEnabled 165 0
//spec_const bool sc_ScreenTextureHasSwappedViews 166 0
//spec_const bool sc_TAAEnabled 167 0
//spec_const bool sc_VertexBlendingUseNormals 168 0
//spec_const bool sc_VertexBlending 169 0
//spec_const bool sc_Voxelization 170 0
//spec_const bool segTexHasSwappedViews 171 0
//spec_const bool sizeRampTextureHasSwappedViews 172 0
//spec_const bool trailColorRampTexHasSwappedViews 173 0
//spec_const bool trailSizeRampTexHasSwappedViews 174 0
//spec_const bool trailTexHasSwappedViews 175 0
//spec_const bool velRampTextureHasSwappedViews 176 0
//spec_const int ALIGN_PARTICLES_TO_OPTION 177 0
//spec_const int ALIGN_TO_CAMERA 178 0
//spec_const int MESHTYPE 179 0
//spec_const int NODE_248_DROPLIST_ITEM 180 0
//spec_const int SC_DEVICE_CLASS 181 -1
//spec_const int SC_SOFTWARE_WRAP_MODE_U_colorRampTexture 182 -1
//spec_const int SC_SOFTWARE_WRAP_MODE_U_depthMap 183 -1
//spec_const int SC_SOFTWARE_WRAP_MODE_U_intensityTexture 184 -1
//spec_const int SC_SOFTWARE_WRAP_MODE_U_mainTexture 185 -1
//spec_const int SC_SOFTWARE_WRAP_MODE_U_matcapTex 186 -1
//spec_const int SC_SOFTWARE_WRAP_MODE_U_normalTexMatcap 187 -1
//spec_const int SC_SOFTWARE_WRAP_MODE_U_normalTexPBR 188 -1
//spec_const int SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas 189 -1
//spec_const int SC_SOFTWARE_WRAP_MODE_U_segTex 190 -1
//spec_const int SC_SOFTWARE_WRAP_MODE_U_sizeRampTexture 191 -1
//spec_const int SC_SOFTWARE_WRAP_MODE_U_trailColorRampTex 192 -1
//spec_const int SC_SOFTWARE_WRAP_MODE_U_trailSizeRampTex 193 -1
//spec_const int SC_SOFTWARE_WRAP_MODE_U_trailTex 194 -1
//spec_const int SC_SOFTWARE_WRAP_MODE_U_velRampTexture 195 -1
//spec_const int SC_SOFTWARE_WRAP_MODE_V_colorRampTexture 196 -1
//spec_const int SC_SOFTWARE_WRAP_MODE_V_depthMap 197 -1
//spec_const int SC_SOFTWARE_WRAP_MODE_V_intensityTexture 198 -1
//spec_const int SC_SOFTWARE_WRAP_MODE_V_mainTexture 199 -1
//spec_const int SC_SOFTWARE_WRAP_MODE_V_matcapTex 200 -1
//spec_const int SC_SOFTWARE_WRAP_MODE_V_normalTexMatcap 201 -1
//spec_const int SC_SOFTWARE_WRAP_MODE_V_normalTexPBR 202 -1
//spec_const int SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas 203 -1
//spec_const int SC_SOFTWARE_WRAP_MODE_V_segTex 204 -1
//spec_const int SC_SOFTWARE_WRAP_MODE_V_sizeRampTexture 205 -1
//spec_const int SC_SOFTWARE_WRAP_MODE_V_trailColorRampTex 206 -1
//spec_const int SC_SOFTWARE_WRAP_MODE_V_trailSizeRampTex 207 -1
//spec_const int SC_SOFTWARE_WRAP_MODE_V_trailTex 208 -1
//spec_const int SC_SOFTWARE_WRAP_MODE_V_velRampTexture 209 -1
//spec_const int TRAILBEHAVIOR 210 0
//spec_const int colorRampTextureLayout 211 0
//spec_const int depthMapLayout 212 0
//spec_const int intensityTextureLayout 213 0
//spec_const int mainTextureLayout 214 0
//spec_const int matcapTexLayout 215 0
//spec_const int normalTexMatcapLayout 216 0
//spec_const int normalTexPBRLayout 217 0
//spec_const int rotationSpace 218 0
//spec_const int sc_AmbientLightMode0 219 0
//spec_const int sc_AmbientLightMode1 220 0
//spec_const int sc_AmbientLightMode2 221 0
//spec_const int sc_AmbientLightMode_Constant 222 0
//spec_const int sc_AmbientLightMode_EnvironmentMap 223 0
//spec_const int sc_AmbientLightMode_FromCamera 224 0
//spec_const int sc_AmbientLightMode_SphericalHarmonics 225 0
//spec_const int sc_AmbientLightsCount 226 0
//spec_const int sc_CurveAtlasLayout 227 0
//spec_const int sc_DepthBufferMode 228 0
//spec_const int sc_DirectionalLightsCount 229 0
//spec_const int sc_EnvLightMode 230 0
//spec_const int sc_EnvmapDiffuseLayout 231 0
//spec_const int sc_EnvmapSpecularLayout 232 0
//spec_const int sc_LightEstimationSGCount 233 0
//spec_const int sc_PointLightsCount 234 0
//spec_const int sc_RayTracingGlobalIlluminationLayout 235 0
//spec_const int sc_RayTracingReflectionsLayout 236 0
//spec_const int sc_RayTracingShadowsLayout 237 0
//spec_const int sc_RenderingSpace 238 -1
//spec_const int sc_ScreenTextureLayout 239 0
//spec_const int sc_ShaderCacheConstant 240 0
//spec_const int sc_SkinBonesCount 241 0
//spec_const int sc_StereoRenderingMode 242 0
//spec_const int sc_StereoRendering_IsClipDistanceEnabled 243 0
//spec_const int segTexLayout 244 0
//spec_const int sizeRampTextureLayout 245 0
//spec_const int trailColorRampTexLayout 246 0
//spec_const int trailSizeRampTexLayout 247 0
//spec_const int trailTexLayout 248 0
//spec_const int velRampTextureLayout 249 0
//SG_REFLECTION_END
constant bool ALIGNPARTICLES [[function_constant(0)]];
constant bool ALIGNPARTICLES_tmp = is_function_constant_defined(ALIGNPARTICLES) ? ALIGNPARTICLES : false;
constant bool ALPHADISSOLVE [[function_constant(1)]];
constant bool ALPHADISSOLVE_tmp = is_function_constant_defined(ALPHADISSOLVE) ? ALPHADISSOLVE : false;
constant bool ALPHAMINMAX [[function_constant(2)]];
constant bool ALPHAMINMAX_tmp = is_function_constant_defined(ALPHAMINMAX) ? ALPHAMINMAX : false;
constant bool BASETEXTURE [[function_constant(3)]];
constant bool BASETEXTURE_tmp = is_function_constant_defined(BASETEXTURE) ? BASETEXTURE : false;
constant bool BLACKASALPHA [[function_constant(4)]];
constant bool BLACKASALPHA_tmp = is_function_constant_defined(BLACKASALPHA) ? BLACKASALPHA : false;
constant bool BLEND_MODE_AVERAGE [[function_constant(5)]];
constant bool BLEND_MODE_AVERAGE_tmp = is_function_constant_defined(BLEND_MODE_AVERAGE) ? BLEND_MODE_AVERAGE : false;
constant bool BLEND_MODE_BRIGHT [[function_constant(6)]];
constant bool BLEND_MODE_BRIGHT_tmp = is_function_constant_defined(BLEND_MODE_BRIGHT) ? BLEND_MODE_BRIGHT : false;
constant bool BLEND_MODE_COLOR_BURN [[function_constant(7)]];
constant bool BLEND_MODE_COLOR_BURN_tmp = is_function_constant_defined(BLEND_MODE_COLOR_BURN) ? BLEND_MODE_COLOR_BURN : false;
constant bool BLEND_MODE_COLOR_DODGE [[function_constant(8)]];
constant bool BLEND_MODE_COLOR_DODGE_tmp = is_function_constant_defined(BLEND_MODE_COLOR_DODGE) ? BLEND_MODE_COLOR_DODGE : false;
constant bool BLEND_MODE_COLOR [[function_constant(9)]];
constant bool BLEND_MODE_COLOR_tmp = is_function_constant_defined(BLEND_MODE_COLOR) ? BLEND_MODE_COLOR : false;
constant bool BLEND_MODE_DARKEN [[function_constant(10)]];
constant bool BLEND_MODE_DARKEN_tmp = is_function_constant_defined(BLEND_MODE_DARKEN) ? BLEND_MODE_DARKEN : false;
constant bool BLEND_MODE_DIFFERENCE [[function_constant(11)]];
constant bool BLEND_MODE_DIFFERENCE_tmp = is_function_constant_defined(BLEND_MODE_DIFFERENCE) ? BLEND_MODE_DIFFERENCE : false;
constant bool BLEND_MODE_DIVIDE [[function_constant(12)]];
constant bool BLEND_MODE_DIVIDE_tmp = is_function_constant_defined(BLEND_MODE_DIVIDE) ? BLEND_MODE_DIVIDE : false;
constant bool BLEND_MODE_DIVISION [[function_constant(13)]];
constant bool BLEND_MODE_DIVISION_tmp = is_function_constant_defined(BLEND_MODE_DIVISION) ? BLEND_MODE_DIVISION : false;
constant bool BLEND_MODE_EXCLUSION [[function_constant(14)]];
constant bool BLEND_MODE_EXCLUSION_tmp = is_function_constant_defined(BLEND_MODE_EXCLUSION) ? BLEND_MODE_EXCLUSION : false;
constant bool BLEND_MODE_FORGRAY [[function_constant(15)]];
constant bool BLEND_MODE_FORGRAY_tmp = is_function_constant_defined(BLEND_MODE_FORGRAY) ? BLEND_MODE_FORGRAY : false;
constant bool BLEND_MODE_HARD_GLOW [[function_constant(16)]];
constant bool BLEND_MODE_HARD_GLOW_tmp = is_function_constant_defined(BLEND_MODE_HARD_GLOW) ? BLEND_MODE_HARD_GLOW : false;
constant bool BLEND_MODE_HARD_LIGHT [[function_constant(17)]];
constant bool BLEND_MODE_HARD_LIGHT_tmp = is_function_constant_defined(BLEND_MODE_HARD_LIGHT) ? BLEND_MODE_HARD_LIGHT : false;
constant bool BLEND_MODE_HARD_MIX [[function_constant(18)]];
constant bool BLEND_MODE_HARD_MIX_tmp = is_function_constant_defined(BLEND_MODE_HARD_MIX) ? BLEND_MODE_HARD_MIX : false;
constant bool BLEND_MODE_HARD_PHOENIX [[function_constant(19)]];
constant bool BLEND_MODE_HARD_PHOENIX_tmp = is_function_constant_defined(BLEND_MODE_HARD_PHOENIX) ? BLEND_MODE_HARD_PHOENIX : false;
constant bool BLEND_MODE_HARD_REFLECT [[function_constant(20)]];
constant bool BLEND_MODE_HARD_REFLECT_tmp = is_function_constant_defined(BLEND_MODE_HARD_REFLECT) ? BLEND_MODE_HARD_REFLECT : false;
constant bool BLEND_MODE_HUE [[function_constant(21)]];
constant bool BLEND_MODE_HUE_tmp = is_function_constant_defined(BLEND_MODE_HUE) ? BLEND_MODE_HUE : false;
constant bool BLEND_MODE_INTENSE [[function_constant(22)]];
constant bool BLEND_MODE_INTENSE_tmp = is_function_constant_defined(BLEND_MODE_INTENSE) ? BLEND_MODE_INTENSE : false;
constant bool BLEND_MODE_LIGHTEN [[function_constant(23)]];
constant bool BLEND_MODE_LIGHTEN_tmp = is_function_constant_defined(BLEND_MODE_LIGHTEN) ? BLEND_MODE_LIGHTEN : false;
constant bool BLEND_MODE_LINEAR_LIGHT [[function_constant(24)]];
constant bool BLEND_MODE_LINEAR_LIGHT_tmp = is_function_constant_defined(BLEND_MODE_LINEAR_LIGHT) ? BLEND_MODE_LINEAR_LIGHT : false;
constant bool BLEND_MODE_LUMINOSITY [[function_constant(25)]];
constant bool BLEND_MODE_LUMINOSITY_tmp = is_function_constant_defined(BLEND_MODE_LUMINOSITY) ? BLEND_MODE_LUMINOSITY : false;
constant bool BLEND_MODE_NEGATION [[function_constant(26)]];
constant bool BLEND_MODE_NEGATION_tmp = is_function_constant_defined(BLEND_MODE_NEGATION) ? BLEND_MODE_NEGATION : false;
constant bool BLEND_MODE_NOTBRIGHT [[function_constant(27)]];
constant bool BLEND_MODE_NOTBRIGHT_tmp = is_function_constant_defined(BLEND_MODE_NOTBRIGHT) ? BLEND_MODE_NOTBRIGHT : false;
constant bool BLEND_MODE_OVERLAY [[function_constant(28)]];
constant bool BLEND_MODE_OVERLAY_tmp = is_function_constant_defined(BLEND_MODE_OVERLAY) ? BLEND_MODE_OVERLAY : false;
constant bool BLEND_MODE_PIN_LIGHT [[function_constant(29)]];
constant bool BLEND_MODE_PIN_LIGHT_tmp = is_function_constant_defined(BLEND_MODE_PIN_LIGHT) ? BLEND_MODE_PIN_LIGHT : false;
constant bool BLEND_MODE_REALISTIC [[function_constant(30)]];
constant bool BLEND_MODE_REALISTIC_tmp = is_function_constant_defined(BLEND_MODE_REALISTIC) ? BLEND_MODE_REALISTIC : false;
constant bool BLEND_MODE_SATURATION [[function_constant(31)]];
constant bool BLEND_MODE_SATURATION_tmp = is_function_constant_defined(BLEND_MODE_SATURATION) ? BLEND_MODE_SATURATION : false;
constant bool BLEND_MODE_SOFT_LIGHT [[function_constant(32)]];
constant bool BLEND_MODE_SOFT_LIGHT_tmp = is_function_constant_defined(BLEND_MODE_SOFT_LIGHT) ? BLEND_MODE_SOFT_LIGHT : false;
constant bool BLEND_MODE_SUBTRACT [[function_constant(33)]];
constant bool BLEND_MODE_SUBTRACT_tmp = is_function_constant_defined(BLEND_MODE_SUBTRACT) ? BLEND_MODE_SUBTRACT : false;
constant bool BLEND_MODE_VIVID_LIGHT [[function_constant(34)]];
constant bool BLEND_MODE_VIVID_LIGHT_tmp = is_function_constant_defined(BLEND_MODE_VIVID_LIGHT) ? BLEND_MODE_VIVID_LIGHT : false;
constant bool BOXSPAWN [[function_constant(35)]];
constant bool BOXSPAWN_tmp = is_function_constant_defined(BOXSPAWN) ? BOXSPAWN : false;
constant bool COLORMINMAX [[function_constant(36)]];
constant bool COLORMINMAX_tmp = is_function_constant_defined(COLORMINMAX) ? COLORMINMAX : false;
constant bool COLORMONOMIN [[function_constant(37)]];
constant bool COLORMONOMIN_tmp = is_function_constant_defined(COLORMONOMIN) ? COLORMONOMIN : false;
constant bool COLORRAMP [[function_constant(38)]];
constant bool COLORRAMP_tmp = is_function_constant_defined(COLORRAMP) ? COLORRAMP : false;
constant bool CONSTANTSPAWN [[function_constant(39)]];
constant bool CONSTANTSPAWN_tmp = is_function_constant_defined(CONSTANTSPAWN) ? CONSTANTSPAWN : false;
constant bool CUSTOMFORCE [[function_constant(40)]];
constant bool CUSTOMFORCE_tmp = is_function_constant_defined(CUSTOMFORCE) ? CUSTOMFORCE : false;
constant bool ENABLE_SIZERAMPSTARTENDASBOUNDS [[function_constant(41)]];
constant bool ENABLE_SIZERAMPSTARTENDASBOUNDS_tmp = is_function_constant_defined(ENABLE_SIZERAMPSTARTENDASBOUNDS) ? ENABLE_SIZERAMPSTARTENDASBOUNDS : false;
constant bool ENABLE_STIPPLE_PATTERN_TEST [[function_constant(42)]];
constant bool ENABLE_STIPPLE_PATTERN_TEST_tmp = is_function_constant_defined(ENABLE_STIPPLE_PATTERN_TEST) ? ENABLE_STIPPLE_PATTERN_TEST : false;
constant bool EXTERNALTIME [[function_constant(43)]];
constant bool EXTERNALTIME_tmp = is_function_constant_defined(EXTERNALTIME) ? EXTERNALTIME : false;
constant bool FLIPBOOKBLEND [[function_constant(44)]];
constant bool FLIPBOOKBLEND_tmp = is_function_constant_defined(FLIPBOOKBLEND) ? FLIPBOOKBLEND : false;
constant bool FLIPBOOKBYLIFE [[function_constant(45)]];
constant bool FLIPBOOKBYLIFE_tmp = is_function_constant_defined(FLIPBOOKBYLIFE) ? FLIPBOOKBYLIFE : false;
constant bool FLIPBOOK [[function_constant(46)]];
constant bool FLIPBOOK_tmp = is_function_constant_defined(FLIPBOOK) ? FLIPBOOK : false;
constant bool FORCE [[function_constant(47)]];
constant bool FORCE_tmp = is_function_constant_defined(FORCE) ? FORCE : false;
constant bool INILOCATION [[function_constant(48)]];
constant bool INILOCATION_tmp = is_function_constant_defined(INILOCATION) ? INILOCATION : false;
constant bool INSTANTSPAWN [[function_constant(49)]];
constant bool INSTANTSPAWN_tmp = is_function_constant_defined(INSTANTSPAWN) ? INSTANTSPAWN : false;
constant bool LIFETIMEMINMAX [[function_constant(50)]];
constant bool LIFETIMEMINMAX_tmp = is_function_constant_defined(LIFETIMEMINMAX) ? LIFETIMEMINMAX : false;
constant bool NOISE [[function_constant(51)]];
constant bool NOISE_tmp = is_function_constant_defined(NOISE) ? NOISE : false;
constant bool NORANDOFFSET [[function_constant(52)]];
constant bool NORANDOFFSET_tmp = is_function_constant_defined(NORANDOFFSET) ? NORANDOFFSET : false;
constant bool PBRNORMALTEX [[function_constant(53)]];
constant bool PBRNORMALTEX_tmp = is_function_constant_defined(PBRNORMALTEX) ? PBRNORMALTEX : false;
constant bool PBR [[function_constant(54)]];
constant bool PBR_tmp = is_function_constant_defined(PBR) ? PBR : false;
constant bool PREMULTIPLIEDCOLOR [[function_constant(55)]];
constant bool PREMULTIPLIEDCOLOR_tmp = is_function_constant_defined(PREMULTIPLIEDCOLOR) ? PREMULTIPLIEDCOLOR : false;
constant bool PREWARMSPAWN [[function_constant(56)]];
constant bool PREWARMSPAWN_tmp = is_function_constant_defined(PREWARMSPAWN) ? PREWARMSPAWN : false;
constant bool QUANTIZE [[function_constant(57)]];
constant bool QUANTIZE_tmp = is_function_constant_defined(QUANTIZE) ? QUANTIZE : false;
constant bool SCREENFADE [[function_constant(58)]];
constant bool SCREENFADE_tmp = is_function_constant_defined(SCREENFADE) ? SCREENFADE : false;
constant bool SC_USE_CLAMP_TO_BORDER_colorRampTexture [[function_constant(59)]];
constant bool SC_USE_CLAMP_TO_BORDER_colorRampTexture_tmp = is_function_constant_defined(SC_USE_CLAMP_TO_BORDER_colorRampTexture) ? SC_USE_CLAMP_TO_BORDER_colorRampTexture : false;
constant bool SC_USE_CLAMP_TO_BORDER_depthMap [[function_constant(60)]];
constant bool SC_USE_CLAMP_TO_BORDER_depthMap_tmp = is_function_constant_defined(SC_USE_CLAMP_TO_BORDER_depthMap) ? SC_USE_CLAMP_TO_BORDER_depthMap : false;
constant bool SC_USE_CLAMP_TO_BORDER_intensityTexture [[function_constant(61)]];
constant bool SC_USE_CLAMP_TO_BORDER_intensityTexture_tmp = is_function_constant_defined(SC_USE_CLAMP_TO_BORDER_intensityTexture) ? SC_USE_CLAMP_TO_BORDER_intensityTexture : false;
constant bool SC_USE_CLAMP_TO_BORDER_mainTexture [[function_constant(62)]];
constant bool SC_USE_CLAMP_TO_BORDER_mainTexture_tmp = is_function_constant_defined(SC_USE_CLAMP_TO_BORDER_mainTexture) ? SC_USE_CLAMP_TO_BORDER_mainTexture : false;
constant bool SC_USE_CLAMP_TO_BORDER_matcapTex [[function_constant(63)]];
constant bool SC_USE_CLAMP_TO_BORDER_matcapTex_tmp = is_function_constant_defined(SC_USE_CLAMP_TO_BORDER_matcapTex) ? SC_USE_CLAMP_TO_BORDER_matcapTex : false;
constant bool SC_USE_CLAMP_TO_BORDER_normalTexMatcap [[function_constant(64)]];
constant bool SC_USE_CLAMP_TO_BORDER_normalTexMatcap_tmp = is_function_constant_defined(SC_USE_CLAMP_TO_BORDER_normalTexMatcap) ? SC_USE_CLAMP_TO_BORDER_normalTexMatcap : false;
constant bool SC_USE_CLAMP_TO_BORDER_normalTexPBR [[function_constant(65)]];
constant bool SC_USE_CLAMP_TO_BORDER_normalTexPBR_tmp = is_function_constant_defined(SC_USE_CLAMP_TO_BORDER_normalTexPBR) ? SC_USE_CLAMP_TO_BORDER_normalTexPBR : false;
constant bool SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas [[function_constant(66)]];
constant bool SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp = is_function_constant_defined(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas) ? SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas : false;
constant bool SC_USE_CLAMP_TO_BORDER_segTex [[function_constant(67)]];
constant bool SC_USE_CLAMP_TO_BORDER_segTex_tmp = is_function_constant_defined(SC_USE_CLAMP_TO_BORDER_segTex) ? SC_USE_CLAMP_TO_BORDER_segTex : false;
constant bool SC_USE_CLAMP_TO_BORDER_sizeRampTexture [[function_constant(68)]];
constant bool SC_USE_CLAMP_TO_BORDER_sizeRampTexture_tmp = is_function_constant_defined(SC_USE_CLAMP_TO_BORDER_sizeRampTexture) ? SC_USE_CLAMP_TO_BORDER_sizeRampTexture : false;
constant bool SC_USE_CLAMP_TO_BORDER_trailColorRampTex [[function_constant(69)]];
constant bool SC_USE_CLAMP_TO_BORDER_trailColorRampTex_tmp = is_function_constant_defined(SC_USE_CLAMP_TO_BORDER_trailColorRampTex) ? SC_USE_CLAMP_TO_BORDER_trailColorRampTex : false;
constant bool SC_USE_CLAMP_TO_BORDER_trailSizeRampTex [[function_constant(70)]];
constant bool SC_USE_CLAMP_TO_BORDER_trailSizeRampTex_tmp = is_function_constant_defined(SC_USE_CLAMP_TO_BORDER_trailSizeRampTex) ? SC_USE_CLAMP_TO_BORDER_trailSizeRampTex : false;
constant bool SC_USE_CLAMP_TO_BORDER_trailTex [[function_constant(71)]];
constant bool SC_USE_CLAMP_TO_BORDER_trailTex_tmp = is_function_constant_defined(SC_USE_CLAMP_TO_BORDER_trailTex) ? SC_USE_CLAMP_TO_BORDER_trailTex : false;
constant bool SC_USE_CLAMP_TO_BORDER_velRampTexture [[function_constant(72)]];
constant bool SC_USE_CLAMP_TO_BORDER_velRampTexture_tmp = is_function_constant_defined(SC_USE_CLAMP_TO_BORDER_velRampTexture) ? SC_USE_CLAMP_TO_BORDER_velRampTexture : false;
constant bool SC_USE_UV_MIN_MAX_colorRampTexture [[function_constant(73)]];
constant bool SC_USE_UV_MIN_MAX_colorRampTexture_tmp = is_function_constant_defined(SC_USE_UV_MIN_MAX_colorRampTexture) ? SC_USE_UV_MIN_MAX_colorRampTexture : false;
constant bool SC_USE_UV_MIN_MAX_depthMap [[function_constant(74)]];
constant bool SC_USE_UV_MIN_MAX_depthMap_tmp = is_function_constant_defined(SC_USE_UV_MIN_MAX_depthMap) ? SC_USE_UV_MIN_MAX_depthMap : false;
constant bool SC_USE_UV_MIN_MAX_intensityTexture [[function_constant(75)]];
constant bool SC_USE_UV_MIN_MAX_intensityTexture_tmp = is_function_constant_defined(SC_USE_UV_MIN_MAX_intensityTexture) ? SC_USE_UV_MIN_MAX_intensityTexture : false;
constant bool SC_USE_UV_MIN_MAX_mainTexture [[function_constant(76)]];
constant bool SC_USE_UV_MIN_MAX_mainTexture_tmp = is_function_constant_defined(SC_USE_UV_MIN_MAX_mainTexture) ? SC_USE_UV_MIN_MAX_mainTexture : false;
constant bool SC_USE_UV_MIN_MAX_matcapTex [[function_constant(77)]];
constant bool SC_USE_UV_MIN_MAX_matcapTex_tmp = is_function_constant_defined(SC_USE_UV_MIN_MAX_matcapTex) ? SC_USE_UV_MIN_MAX_matcapTex : false;
constant bool SC_USE_UV_MIN_MAX_normalTexMatcap [[function_constant(78)]];
constant bool SC_USE_UV_MIN_MAX_normalTexMatcap_tmp = is_function_constant_defined(SC_USE_UV_MIN_MAX_normalTexMatcap) ? SC_USE_UV_MIN_MAX_normalTexMatcap : false;
constant bool SC_USE_UV_MIN_MAX_normalTexPBR [[function_constant(79)]];
constant bool SC_USE_UV_MIN_MAX_normalTexPBR_tmp = is_function_constant_defined(SC_USE_UV_MIN_MAX_normalTexPBR) ? SC_USE_UV_MIN_MAX_normalTexPBR : false;
constant bool SC_USE_UV_MIN_MAX_sc_CurveAtlas [[function_constant(80)]];
constant bool SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp = is_function_constant_defined(SC_USE_UV_MIN_MAX_sc_CurveAtlas) ? SC_USE_UV_MIN_MAX_sc_CurveAtlas : false;
constant bool SC_USE_UV_MIN_MAX_segTex [[function_constant(81)]];
constant bool SC_USE_UV_MIN_MAX_segTex_tmp = is_function_constant_defined(SC_USE_UV_MIN_MAX_segTex) ? SC_USE_UV_MIN_MAX_segTex : false;
constant bool SC_USE_UV_MIN_MAX_sizeRampTexture [[function_constant(82)]];
constant bool SC_USE_UV_MIN_MAX_sizeRampTexture_tmp = is_function_constant_defined(SC_USE_UV_MIN_MAX_sizeRampTexture) ? SC_USE_UV_MIN_MAX_sizeRampTexture : false;
constant bool SC_USE_UV_MIN_MAX_trailColorRampTex [[function_constant(83)]];
constant bool SC_USE_UV_MIN_MAX_trailColorRampTex_tmp = is_function_constant_defined(SC_USE_UV_MIN_MAX_trailColorRampTex) ? SC_USE_UV_MIN_MAX_trailColorRampTex : false;
constant bool SC_USE_UV_MIN_MAX_trailSizeRampTex [[function_constant(84)]];
constant bool SC_USE_UV_MIN_MAX_trailSizeRampTex_tmp = is_function_constant_defined(SC_USE_UV_MIN_MAX_trailSizeRampTex) ? SC_USE_UV_MIN_MAX_trailSizeRampTex : false;
constant bool SC_USE_UV_MIN_MAX_trailTex [[function_constant(85)]];
constant bool SC_USE_UV_MIN_MAX_trailTex_tmp = is_function_constant_defined(SC_USE_UV_MIN_MAX_trailTex) ? SC_USE_UV_MIN_MAX_trailTex : false;
constant bool SC_USE_UV_MIN_MAX_velRampTexture [[function_constant(86)]];
constant bool SC_USE_UV_MIN_MAX_velRampTexture_tmp = is_function_constant_defined(SC_USE_UV_MIN_MAX_velRampTexture) ? SC_USE_UV_MIN_MAX_velRampTexture : false;
constant bool SC_USE_UV_TRANSFORM_colorRampTexture [[function_constant(87)]];
constant bool SC_USE_UV_TRANSFORM_colorRampTexture_tmp = is_function_constant_defined(SC_USE_UV_TRANSFORM_colorRampTexture) ? SC_USE_UV_TRANSFORM_colorRampTexture : false;
constant bool SC_USE_UV_TRANSFORM_depthMap [[function_constant(88)]];
constant bool SC_USE_UV_TRANSFORM_depthMap_tmp = is_function_constant_defined(SC_USE_UV_TRANSFORM_depthMap) ? SC_USE_UV_TRANSFORM_depthMap : false;
constant bool SC_USE_UV_TRANSFORM_intensityTexture [[function_constant(89)]];
constant bool SC_USE_UV_TRANSFORM_intensityTexture_tmp = is_function_constant_defined(SC_USE_UV_TRANSFORM_intensityTexture) ? SC_USE_UV_TRANSFORM_intensityTexture : false;
constant bool SC_USE_UV_TRANSFORM_mainTexture [[function_constant(90)]];
constant bool SC_USE_UV_TRANSFORM_mainTexture_tmp = is_function_constant_defined(SC_USE_UV_TRANSFORM_mainTexture) ? SC_USE_UV_TRANSFORM_mainTexture : false;
constant bool SC_USE_UV_TRANSFORM_matcapTex [[function_constant(91)]];
constant bool SC_USE_UV_TRANSFORM_matcapTex_tmp = is_function_constant_defined(SC_USE_UV_TRANSFORM_matcapTex) ? SC_USE_UV_TRANSFORM_matcapTex : false;
constant bool SC_USE_UV_TRANSFORM_normalTexMatcap [[function_constant(92)]];
constant bool SC_USE_UV_TRANSFORM_normalTexMatcap_tmp = is_function_constant_defined(SC_USE_UV_TRANSFORM_normalTexMatcap) ? SC_USE_UV_TRANSFORM_normalTexMatcap : false;
constant bool SC_USE_UV_TRANSFORM_normalTexPBR [[function_constant(93)]];
constant bool SC_USE_UV_TRANSFORM_normalTexPBR_tmp = is_function_constant_defined(SC_USE_UV_TRANSFORM_normalTexPBR) ? SC_USE_UV_TRANSFORM_normalTexPBR : false;
constant bool SC_USE_UV_TRANSFORM_sc_CurveAtlas [[function_constant(94)]];
constant bool SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp = is_function_constant_defined(SC_USE_UV_TRANSFORM_sc_CurveAtlas) ? SC_USE_UV_TRANSFORM_sc_CurveAtlas : false;
constant bool SC_USE_UV_TRANSFORM_segTex [[function_constant(95)]];
constant bool SC_USE_UV_TRANSFORM_segTex_tmp = is_function_constant_defined(SC_USE_UV_TRANSFORM_segTex) ? SC_USE_UV_TRANSFORM_segTex : false;
constant bool SC_USE_UV_TRANSFORM_sizeRampTexture [[function_constant(96)]];
constant bool SC_USE_UV_TRANSFORM_sizeRampTexture_tmp = is_function_constant_defined(SC_USE_UV_TRANSFORM_sizeRampTexture) ? SC_USE_UV_TRANSFORM_sizeRampTexture : false;
constant bool SC_USE_UV_TRANSFORM_trailColorRampTex [[function_constant(97)]];
constant bool SC_USE_UV_TRANSFORM_trailColorRampTex_tmp = is_function_constant_defined(SC_USE_UV_TRANSFORM_trailColorRampTex) ? SC_USE_UV_TRANSFORM_trailColorRampTex : false;
constant bool SC_USE_UV_TRANSFORM_trailSizeRampTex [[function_constant(98)]];
constant bool SC_USE_UV_TRANSFORM_trailSizeRampTex_tmp = is_function_constant_defined(SC_USE_UV_TRANSFORM_trailSizeRampTex) ? SC_USE_UV_TRANSFORM_trailSizeRampTex : false;
constant bool SC_USE_UV_TRANSFORM_trailTex [[function_constant(99)]];
constant bool SC_USE_UV_TRANSFORM_trailTex_tmp = is_function_constant_defined(SC_USE_UV_TRANSFORM_trailTex) ? SC_USE_UV_TRANSFORM_trailTex : false;
constant bool SC_USE_UV_TRANSFORM_velRampTexture [[function_constant(100)]];
constant bool SC_USE_UV_TRANSFORM_velRampTexture_tmp = is_function_constant_defined(SC_USE_UV_TRANSFORM_velRampTexture) ? SC_USE_UV_TRANSFORM_velRampTexture : false;
constant bool SIZEMINMAX [[function_constant(101)]];
constant bool SIZEMINMAX_tmp = is_function_constant_defined(SIZEMINMAX) ? SIZEMINMAX : false;
constant bool SIZERAMP [[function_constant(102)]];
constant bool SIZERAMP_tmp = is_function_constant_defined(SIZERAMP) ? SIZERAMP : false;
constant bool SNOISE [[function_constant(103)]];
constant bool SNOISE_tmp = is_function_constant_defined(SNOISE) ? SNOISE : false;
constant bool SPHERESPAWN [[function_constant(104)]];
constant bool SPHERESPAWN_tmp = is_function_constant_defined(SPHERESPAWN) ? SPHERESPAWN : false;
constant bool TRAILCOLORRAMP [[function_constant(105)]];
constant bool TRAILCOLORRAMP_tmp = is_function_constant_defined(TRAILCOLORRAMP) ? TRAILCOLORRAMP : false;
constant bool TRAILSIZERAMPSTARTENDASBOUNDS [[function_constant(106)]];
constant bool TRAILSIZERAMPSTARTENDASBOUNDS_tmp = is_function_constant_defined(TRAILSIZERAMPSTARTENDASBOUNDS) ? TRAILSIZERAMPSTARTENDASBOUNDS : false;
constant bool TRAILSIZERAMP [[function_constant(107)]];
constant bool TRAILSIZERAMP_tmp = is_function_constant_defined(TRAILSIZERAMP) ? TRAILSIZERAMP : false;
constant bool TRAILS [[function_constant(108)]];
constant bool TRAILS_tmp = is_function_constant_defined(TRAILS) ? TRAILS : false;
constant bool TRAILTEXTURE [[function_constant(109)]];
constant bool TRAILTEXTURE_tmp = is_function_constant_defined(TRAILTEXTURE) ? TRAILTEXTURE : false;
constant bool TRAILTWIST [[function_constant(110)]];
constant bool TRAILTWIST_tmp = is_function_constant_defined(TRAILTWIST) ? TRAILTWIST : false;
constant bool Tweak_N131 [[function_constant(111)]];
constant bool Tweak_N131_tmp = is_function_constant_defined(Tweak_N131) ? Tweak_N131 : false;
constant bool Tweak_N133 [[function_constant(112)]];
constant bool Tweak_N133_tmp = is_function_constant_defined(Tweak_N133) ? Tweak_N133 : false;
constant bool Tweak_N228 [[function_constant(113)]];
constant bool Tweak_N228_tmp = is_function_constant_defined(Tweak_N228) ? Tweak_N228 : false;
constant bool Tweak_N282 [[function_constant(114)]];
constant bool Tweak_N282_tmp = is_function_constant_defined(Tweak_N282) ? Tweak_N282 : false;
constant bool Tweak_N296 [[function_constant(115)]];
constant bool Tweak_N296_tmp = is_function_constant_defined(Tweak_N296) ? Tweak_N296 : false;
constant bool Tweak_N313 [[function_constant(116)]];
constant bool Tweak_N313_tmp = is_function_constant_defined(Tweak_N313) ? Tweak_N313 : false;
constant bool Tweak_N323 [[function_constant(117)]];
constant bool Tweak_N323_tmp = is_function_constant_defined(Tweak_N323) ? Tweak_N323 : false;
constant bool Tweak_N331 [[function_constant(118)]];
constant bool Tweak_N331_tmp = is_function_constant_defined(Tweak_N331) ? Tweak_N331 : false;
constant bool Tweak_N332 [[function_constant(119)]];
constant bool Tweak_N332_tmp = is_function_constant_defined(Tweak_N332) ? Tweak_N332 : false;
constant bool UseViewSpaceDepthVariant [[function_constant(120)]];
constant bool UseViewSpaceDepthVariant_tmp = is_function_constant_defined(UseViewSpaceDepthVariant) ? UseViewSpaceDepthVariant : true;
constant bool VELRAMP [[function_constant(121)]];
constant bool VELRAMP_tmp = is_function_constant_defined(VELRAMP) ? VELRAMP : false;
constant bool WORLDPOSSEED [[function_constant(122)]];
constant bool WORLDPOSSEED_tmp = is_function_constant_defined(WORLDPOSSEED) ? WORLDPOSSEED : false;
constant bool colorRampTextureHasSwappedViews [[function_constant(123)]];
constant bool colorRampTextureHasSwappedViews_tmp = is_function_constant_defined(colorRampTextureHasSwappedViews) ? colorRampTextureHasSwappedViews : false;
constant bool depthMapHasSwappedViews [[function_constant(124)]];
constant bool depthMapHasSwappedViews_tmp = is_function_constant_defined(depthMapHasSwappedViews) ? depthMapHasSwappedViews : false;
constant bool intensityTextureHasSwappedViews [[function_constant(125)]];
constant bool intensityTextureHasSwappedViews_tmp = is_function_constant_defined(intensityTextureHasSwappedViews) ? intensityTextureHasSwappedViews : false;
constant bool mainTextureHasSwappedViews [[function_constant(126)]];
constant bool mainTextureHasSwappedViews_tmp = is_function_constant_defined(mainTextureHasSwappedViews) ? mainTextureHasSwappedViews : false;
constant bool matcapTexHasSwappedViews [[function_constant(127)]];
constant bool matcapTexHasSwappedViews_tmp = is_function_constant_defined(matcapTexHasSwappedViews) ? matcapTexHasSwappedViews : false;
constant bool matcap [[function_constant(128)]];
constant bool matcap_tmp = is_function_constant_defined(matcap) ? matcap : false;
constant bool normalTexMatcapHasSwappedViews [[function_constant(129)]];
constant bool normalTexMatcapHasSwappedViews_tmp = is_function_constant_defined(normalTexMatcapHasSwappedViews) ? normalTexMatcapHasSwappedViews : false;
constant bool normalTexPBRHasSwappedViews [[function_constant(130)]];
constant bool normalTexPBRHasSwappedViews_tmp = is_function_constant_defined(normalTexPBRHasSwappedViews) ? normalTexPBRHasSwappedViews : false;
constant bool sc_BlendMode_AddWithAlphaFactor [[function_constant(131)]];
constant bool sc_BlendMode_AddWithAlphaFactor_tmp = is_function_constant_defined(sc_BlendMode_AddWithAlphaFactor) ? sc_BlendMode_AddWithAlphaFactor : false;
constant bool sc_BlendMode_Add [[function_constant(132)]];
constant bool sc_BlendMode_Add_tmp = is_function_constant_defined(sc_BlendMode_Add) ? sc_BlendMode_Add : false;
constant bool sc_BlendMode_AlphaTest [[function_constant(133)]];
constant bool sc_BlendMode_AlphaTest_tmp = is_function_constant_defined(sc_BlendMode_AlphaTest) ? sc_BlendMode_AlphaTest : false;
constant bool sc_BlendMode_AlphaToCoverage [[function_constant(134)]];
constant bool sc_BlendMode_AlphaToCoverage_tmp = is_function_constant_defined(sc_BlendMode_AlphaToCoverage) ? sc_BlendMode_AlphaToCoverage : false;
constant bool sc_BlendMode_ColoredGlass [[function_constant(135)]];
constant bool sc_BlendMode_ColoredGlass_tmp = is_function_constant_defined(sc_BlendMode_ColoredGlass) ? sc_BlendMode_ColoredGlass : false;
constant bool sc_BlendMode_Custom [[function_constant(136)]];
constant bool sc_BlendMode_Custom_tmp = is_function_constant_defined(sc_BlendMode_Custom) ? sc_BlendMode_Custom : false;
constant bool sc_BlendMode_Max [[function_constant(137)]];
constant bool sc_BlendMode_Max_tmp = is_function_constant_defined(sc_BlendMode_Max) ? sc_BlendMode_Max : false;
constant bool sc_BlendMode_Min [[function_constant(138)]];
constant bool sc_BlendMode_Min_tmp = is_function_constant_defined(sc_BlendMode_Min) ? sc_BlendMode_Min : false;
constant bool sc_BlendMode_MultiplyOriginal [[function_constant(139)]];
constant bool sc_BlendMode_MultiplyOriginal_tmp = is_function_constant_defined(sc_BlendMode_MultiplyOriginal) ? sc_BlendMode_MultiplyOriginal : false;
constant bool sc_BlendMode_Multiply [[function_constant(140)]];
constant bool sc_BlendMode_Multiply_tmp = is_function_constant_defined(sc_BlendMode_Multiply) ? sc_BlendMode_Multiply : false;
constant bool sc_BlendMode_Normal [[function_constant(141)]];
constant bool sc_BlendMode_Normal_tmp = is_function_constant_defined(sc_BlendMode_Normal) ? sc_BlendMode_Normal : false;
constant bool sc_BlendMode_PremultipliedAlphaAuto [[function_constant(142)]];
constant bool sc_BlendMode_PremultipliedAlphaAuto_tmp = is_function_constant_defined(sc_BlendMode_PremultipliedAlphaAuto) ? sc_BlendMode_PremultipliedAlphaAuto : false;
constant bool sc_BlendMode_PremultipliedAlphaHardware [[function_constant(143)]];
constant bool sc_BlendMode_PremultipliedAlphaHardware_tmp = is_function_constant_defined(sc_BlendMode_PremultipliedAlphaHardware) ? sc_BlendMode_PremultipliedAlphaHardware : false;
constant bool sc_BlendMode_PremultipliedAlpha [[function_constant(144)]];
constant bool sc_BlendMode_PremultipliedAlpha_tmp = is_function_constant_defined(sc_BlendMode_PremultipliedAlpha) ? sc_BlendMode_PremultipliedAlpha : false;
constant bool sc_BlendMode_Screen [[function_constant(145)]];
constant bool sc_BlendMode_Screen_tmp = is_function_constant_defined(sc_BlendMode_Screen) ? sc_BlendMode_Screen : false;
constant bool sc_CurveAtlasHasSwappedViews [[function_constant(146)]];
constant bool sc_CurveAtlasHasSwappedViews_tmp = is_function_constant_defined(sc_CurveAtlasHasSwappedViews) ? sc_CurveAtlasHasSwappedViews : false;
constant bool sc_DepthOnly [[function_constant(147)]];
constant bool sc_DepthOnly_tmp = is_function_constant_defined(sc_DepthOnly) ? sc_DepthOnly : false;
constant bool sc_EnvmapDiffuseHasSwappedViews [[function_constant(148)]];
constant bool sc_EnvmapDiffuseHasSwappedViews_tmp = is_function_constant_defined(sc_EnvmapDiffuseHasSwappedViews) ? sc_EnvmapDiffuseHasSwappedViews : false;
constant bool sc_EnvmapSpecularHasSwappedViews [[function_constant(149)]];
constant bool sc_EnvmapSpecularHasSwappedViews_tmp = is_function_constant_defined(sc_EnvmapSpecularHasSwappedViews) ? sc_EnvmapSpecularHasSwappedViews : false;
constant bool sc_FramebufferFetch [[function_constant(150)]];
constant bool sc_FramebufferFetch_tmp = is_function_constant_defined(sc_FramebufferFetch) ? sc_FramebufferFetch : false;
constant bool sc_HasDiffuseEnvmap [[function_constant(151)]];
constant bool sc_HasDiffuseEnvmap_tmp = is_function_constant_defined(sc_HasDiffuseEnvmap) ? sc_HasDiffuseEnvmap : false;
constant bool sc_IsEditor [[function_constant(152)]];
constant bool sc_IsEditor_tmp = is_function_constant_defined(sc_IsEditor) ? sc_IsEditor : false;
constant bool sc_LightEstimation [[function_constant(153)]];
constant bool sc_LightEstimation_tmp = is_function_constant_defined(sc_LightEstimation) ? sc_LightEstimation : false;
constant bool sc_MotionVectorsPass [[function_constant(154)]];
constant bool sc_MotionVectorsPass_tmp = is_function_constant_defined(sc_MotionVectorsPass) ? sc_MotionVectorsPass : false;
constant bool sc_OITCompositingPass [[function_constant(155)]];
constant bool sc_OITCompositingPass_tmp = is_function_constant_defined(sc_OITCompositingPass) ? sc_OITCompositingPass : false;
constant bool sc_OITDepthBoundsPass [[function_constant(156)]];
constant bool sc_OITDepthBoundsPass_tmp = is_function_constant_defined(sc_OITDepthBoundsPass) ? sc_OITDepthBoundsPass : false;
constant bool sc_OITDepthGatherPass [[function_constant(157)]];
constant bool sc_OITDepthGatherPass_tmp = is_function_constant_defined(sc_OITDepthGatherPass) ? sc_OITDepthGatherPass : false;
constant bool sc_OutputBounds [[function_constant(158)]];
constant bool sc_OutputBounds_tmp = is_function_constant_defined(sc_OutputBounds) ? sc_OutputBounds : false;
constant bool sc_ProjectiveShadowsCaster [[function_constant(159)]];
constant bool sc_ProjectiveShadowsCaster_tmp = is_function_constant_defined(sc_ProjectiveShadowsCaster) ? sc_ProjectiveShadowsCaster : false;
constant bool sc_ProjectiveShadowsReceiver [[function_constant(160)]];
constant bool sc_ProjectiveShadowsReceiver_tmp = is_function_constant_defined(sc_ProjectiveShadowsReceiver) ? sc_ProjectiveShadowsReceiver : false;
constant bool sc_RayTracingGlobalIlluminationHasSwappedViews [[function_constant(161)]];
constant bool sc_RayTracingGlobalIlluminationHasSwappedViews_tmp = is_function_constant_defined(sc_RayTracingGlobalIlluminationHasSwappedViews) ? sc_RayTracingGlobalIlluminationHasSwappedViews : false;
constant bool sc_RayTracingReflectionsHasSwappedViews [[function_constant(162)]];
constant bool sc_RayTracingReflectionsHasSwappedViews_tmp = is_function_constant_defined(sc_RayTracingReflectionsHasSwappedViews) ? sc_RayTracingReflectionsHasSwappedViews : false;
constant bool sc_RayTracingShadowsHasSwappedViews [[function_constant(163)]];
constant bool sc_RayTracingShadowsHasSwappedViews_tmp = is_function_constant_defined(sc_RayTracingShadowsHasSwappedViews) ? sc_RayTracingShadowsHasSwappedViews : false;
constant bool sc_RenderAlphaToColor [[function_constant(164)]];
constant bool sc_RenderAlphaToColor_tmp = is_function_constant_defined(sc_RenderAlphaToColor) ? sc_RenderAlphaToColor : false;
constant bool sc_SSAOEnabled [[function_constant(165)]];
constant bool sc_SSAOEnabled_tmp = is_function_constant_defined(sc_SSAOEnabled) ? sc_SSAOEnabled : false;
constant bool sc_ScreenTextureHasSwappedViews [[function_constant(166)]];
constant bool sc_ScreenTextureHasSwappedViews_tmp = is_function_constant_defined(sc_ScreenTextureHasSwappedViews) ? sc_ScreenTextureHasSwappedViews : false;
constant bool sc_TAAEnabled [[function_constant(167)]];
constant bool sc_TAAEnabled_tmp = is_function_constant_defined(sc_TAAEnabled) ? sc_TAAEnabled : false;
constant bool sc_VertexBlendingUseNormals [[function_constant(168)]];
constant bool sc_VertexBlendingUseNormals_tmp = is_function_constant_defined(sc_VertexBlendingUseNormals) ? sc_VertexBlendingUseNormals : false;
constant bool sc_VertexBlending [[function_constant(169)]];
constant bool sc_VertexBlending_tmp = is_function_constant_defined(sc_VertexBlending) ? sc_VertexBlending : false;
constant bool sc_Voxelization [[function_constant(170)]];
constant bool sc_Voxelization_tmp = is_function_constant_defined(sc_Voxelization) ? sc_Voxelization : false;
constant bool segTexHasSwappedViews [[function_constant(171)]];
constant bool segTexHasSwappedViews_tmp = is_function_constant_defined(segTexHasSwappedViews) ? segTexHasSwappedViews : false;
constant bool sizeRampTextureHasSwappedViews [[function_constant(172)]];
constant bool sizeRampTextureHasSwappedViews_tmp = is_function_constant_defined(sizeRampTextureHasSwappedViews) ? sizeRampTextureHasSwappedViews : false;
constant bool trailColorRampTexHasSwappedViews [[function_constant(173)]];
constant bool trailColorRampTexHasSwappedViews_tmp = is_function_constant_defined(trailColorRampTexHasSwappedViews) ? trailColorRampTexHasSwappedViews : false;
constant bool trailSizeRampTexHasSwappedViews [[function_constant(174)]];
constant bool trailSizeRampTexHasSwappedViews_tmp = is_function_constant_defined(trailSizeRampTexHasSwappedViews) ? trailSizeRampTexHasSwappedViews : false;
constant bool trailTexHasSwappedViews [[function_constant(175)]];
constant bool trailTexHasSwappedViews_tmp = is_function_constant_defined(trailTexHasSwappedViews) ? trailTexHasSwappedViews : false;
constant bool velRampTextureHasSwappedViews [[function_constant(176)]];
constant bool velRampTextureHasSwappedViews_tmp = is_function_constant_defined(velRampTextureHasSwappedViews) ? velRampTextureHasSwappedViews : false;
constant int ALIGN_PARTICLES_TO_OPTION [[function_constant(177)]];
constant int ALIGN_PARTICLES_TO_OPTION_tmp = is_function_constant_defined(ALIGN_PARTICLES_TO_OPTION) ? ALIGN_PARTICLES_TO_OPTION : 0;
constant int ALIGN_TO_CAMERA [[function_constant(178)]];
constant int ALIGN_TO_CAMERA_tmp = is_function_constant_defined(ALIGN_TO_CAMERA) ? ALIGN_TO_CAMERA : 0;
constant int MESHTYPE [[function_constant(179)]];
constant int MESHTYPE_tmp = is_function_constant_defined(MESHTYPE) ? MESHTYPE : 0;
constant int NODE_248_DROPLIST_ITEM [[function_constant(180)]];
constant int NODE_248_DROPLIST_ITEM_tmp = is_function_constant_defined(NODE_248_DROPLIST_ITEM) ? NODE_248_DROPLIST_ITEM : 0;
constant int SC_DEVICE_CLASS [[function_constant(181)]];
constant int SC_DEVICE_CLASS_tmp = is_function_constant_defined(SC_DEVICE_CLASS) ? SC_DEVICE_CLASS : -1;
constant int SC_SOFTWARE_WRAP_MODE_U_colorRampTexture [[function_constant(182)]];
constant int SC_SOFTWARE_WRAP_MODE_U_colorRampTexture_tmp = is_function_constant_defined(SC_SOFTWARE_WRAP_MODE_U_colorRampTexture) ? SC_SOFTWARE_WRAP_MODE_U_colorRampTexture : -1;
constant int SC_SOFTWARE_WRAP_MODE_U_depthMap [[function_constant(183)]];
constant int SC_SOFTWARE_WRAP_MODE_U_depthMap_tmp = is_function_constant_defined(SC_SOFTWARE_WRAP_MODE_U_depthMap) ? SC_SOFTWARE_WRAP_MODE_U_depthMap : -1;
constant int SC_SOFTWARE_WRAP_MODE_U_intensityTexture [[function_constant(184)]];
constant int SC_SOFTWARE_WRAP_MODE_U_intensityTexture_tmp = is_function_constant_defined(SC_SOFTWARE_WRAP_MODE_U_intensityTexture) ? SC_SOFTWARE_WRAP_MODE_U_intensityTexture : -1;
constant int SC_SOFTWARE_WRAP_MODE_U_mainTexture [[function_constant(185)]];
constant int SC_SOFTWARE_WRAP_MODE_U_mainTexture_tmp = is_function_constant_defined(SC_SOFTWARE_WRAP_MODE_U_mainTexture) ? SC_SOFTWARE_WRAP_MODE_U_mainTexture : -1;
constant int SC_SOFTWARE_WRAP_MODE_U_matcapTex [[function_constant(186)]];
constant int SC_SOFTWARE_WRAP_MODE_U_matcapTex_tmp = is_function_constant_defined(SC_SOFTWARE_WRAP_MODE_U_matcapTex) ? SC_SOFTWARE_WRAP_MODE_U_matcapTex : -1;
constant int SC_SOFTWARE_WRAP_MODE_U_normalTexMatcap [[function_constant(187)]];
constant int SC_SOFTWARE_WRAP_MODE_U_normalTexMatcap_tmp = is_function_constant_defined(SC_SOFTWARE_WRAP_MODE_U_normalTexMatcap) ? SC_SOFTWARE_WRAP_MODE_U_normalTexMatcap : -1;
constant int SC_SOFTWARE_WRAP_MODE_U_normalTexPBR [[function_constant(188)]];
constant int SC_SOFTWARE_WRAP_MODE_U_normalTexPBR_tmp = is_function_constant_defined(SC_SOFTWARE_WRAP_MODE_U_normalTexPBR) ? SC_SOFTWARE_WRAP_MODE_U_normalTexPBR : -1;
constant int SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas [[function_constant(189)]];
constant int SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp = is_function_constant_defined(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas) ? SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas : -1;
constant int SC_SOFTWARE_WRAP_MODE_U_segTex [[function_constant(190)]];
constant int SC_SOFTWARE_WRAP_MODE_U_segTex_tmp = is_function_constant_defined(SC_SOFTWARE_WRAP_MODE_U_segTex) ? SC_SOFTWARE_WRAP_MODE_U_segTex : -1;
constant int SC_SOFTWARE_WRAP_MODE_U_sizeRampTexture [[function_constant(191)]];
constant int SC_SOFTWARE_WRAP_MODE_U_sizeRampTexture_tmp = is_function_constant_defined(SC_SOFTWARE_WRAP_MODE_U_sizeRampTexture) ? SC_SOFTWARE_WRAP_MODE_U_sizeRampTexture : -1;
constant int SC_SOFTWARE_WRAP_MODE_U_trailColorRampTex [[function_constant(192)]];
constant int SC_SOFTWARE_WRAP_MODE_U_trailColorRampTex_tmp = is_function_constant_defined(SC_SOFTWARE_WRAP_MODE_U_trailColorRampTex) ? SC_SOFTWARE_WRAP_MODE_U_trailColorRampTex : -1;
constant int SC_SOFTWARE_WRAP_MODE_U_trailSizeRampTex [[function_constant(193)]];
constant int SC_SOFTWARE_WRAP_MODE_U_trailSizeRampTex_tmp = is_function_constant_defined(SC_SOFTWARE_WRAP_MODE_U_trailSizeRampTex) ? SC_SOFTWARE_WRAP_MODE_U_trailSizeRampTex : -1;
constant int SC_SOFTWARE_WRAP_MODE_U_trailTex [[function_constant(194)]];
constant int SC_SOFTWARE_WRAP_MODE_U_trailTex_tmp = is_function_constant_defined(SC_SOFTWARE_WRAP_MODE_U_trailTex) ? SC_SOFTWARE_WRAP_MODE_U_trailTex : -1;
constant int SC_SOFTWARE_WRAP_MODE_U_velRampTexture [[function_constant(195)]];
constant int SC_SOFTWARE_WRAP_MODE_U_velRampTexture_tmp = is_function_constant_defined(SC_SOFTWARE_WRAP_MODE_U_velRampTexture) ? SC_SOFTWARE_WRAP_MODE_U_velRampTexture : -1;
constant int SC_SOFTWARE_WRAP_MODE_V_colorRampTexture [[function_constant(196)]];
constant int SC_SOFTWARE_WRAP_MODE_V_colorRampTexture_tmp = is_function_constant_defined(SC_SOFTWARE_WRAP_MODE_V_colorRampTexture) ? SC_SOFTWARE_WRAP_MODE_V_colorRampTexture : -1;
constant int SC_SOFTWARE_WRAP_MODE_V_depthMap [[function_constant(197)]];
constant int SC_SOFTWARE_WRAP_MODE_V_depthMap_tmp = is_function_constant_defined(SC_SOFTWARE_WRAP_MODE_V_depthMap) ? SC_SOFTWARE_WRAP_MODE_V_depthMap : -1;
constant int SC_SOFTWARE_WRAP_MODE_V_intensityTexture [[function_constant(198)]];
constant int SC_SOFTWARE_WRAP_MODE_V_intensityTexture_tmp = is_function_constant_defined(SC_SOFTWARE_WRAP_MODE_V_intensityTexture) ? SC_SOFTWARE_WRAP_MODE_V_intensityTexture : -1;
constant int SC_SOFTWARE_WRAP_MODE_V_mainTexture [[function_constant(199)]];
constant int SC_SOFTWARE_WRAP_MODE_V_mainTexture_tmp = is_function_constant_defined(SC_SOFTWARE_WRAP_MODE_V_mainTexture) ? SC_SOFTWARE_WRAP_MODE_V_mainTexture : -1;
constant int SC_SOFTWARE_WRAP_MODE_V_matcapTex [[function_constant(200)]];
constant int SC_SOFTWARE_WRAP_MODE_V_matcapTex_tmp = is_function_constant_defined(SC_SOFTWARE_WRAP_MODE_V_matcapTex) ? SC_SOFTWARE_WRAP_MODE_V_matcapTex : -1;
constant int SC_SOFTWARE_WRAP_MODE_V_normalTexMatcap [[function_constant(201)]];
constant int SC_SOFTWARE_WRAP_MODE_V_normalTexMatcap_tmp = is_function_constant_defined(SC_SOFTWARE_WRAP_MODE_V_normalTexMatcap) ? SC_SOFTWARE_WRAP_MODE_V_normalTexMatcap : -1;
constant int SC_SOFTWARE_WRAP_MODE_V_normalTexPBR [[function_constant(202)]];
constant int SC_SOFTWARE_WRAP_MODE_V_normalTexPBR_tmp = is_function_constant_defined(SC_SOFTWARE_WRAP_MODE_V_normalTexPBR) ? SC_SOFTWARE_WRAP_MODE_V_normalTexPBR : -1;
constant int SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas [[function_constant(203)]];
constant int SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp = is_function_constant_defined(SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas) ? SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas : -1;
constant int SC_SOFTWARE_WRAP_MODE_V_segTex [[function_constant(204)]];
constant int SC_SOFTWARE_WRAP_MODE_V_segTex_tmp = is_function_constant_defined(SC_SOFTWARE_WRAP_MODE_V_segTex) ? SC_SOFTWARE_WRAP_MODE_V_segTex : -1;
constant int SC_SOFTWARE_WRAP_MODE_V_sizeRampTexture [[function_constant(205)]];
constant int SC_SOFTWARE_WRAP_MODE_V_sizeRampTexture_tmp = is_function_constant_defined(SC_SOFTWARE_WRAP_MODE_V_sizeRampTexture) ? SC_SOFTWARE_WRAP_MODE_V_sizeRampTexture : -1;
constant int SC_SOFTWARE_WRAP_MODE_V_trailColorRampTex [[function_constant(206)]];
constant int SC_SOFTWARE_WRAP_MODE_V_trailColorRampTex_tmp = is_function_constant_defined(SC_SOFTWARE_WRAP_MODE_V_trailColorRampTex) ? SC_SOFTWARE_WRAP_MODE_V_trailColorRampTex : -1;
constant int SC_SOFTWARE_WRAP_MODE_V_trailSizeRampTex [[function_constant(207)]];
constant int SC_SOFTWARE_WRAP_MODE_V_trailSizeRampTex_tmp = is_function_constant_defined(SC_SOFTWARE_WRAP_MODE_V_trailSizeRampTex) ? SC_SOFTWARE_WRAP_MODE_V_trailSizeRampTex : -1;
constant int SC_SOFTWARE_WRAP_MODE_V_trailTex [[function_constant(208)]];
constant int SC_SOFTWARE_WRAP_MODE_V_trailTex_tmp = is_function_constant_defined(SC_SOFTWARE_WRAP_MODE_V_trailTex) ? SC_SOFTWARE_WRAP_MODE_V_trailTex : -1;
constant int SC_SOFTWARE_WRAP_MODE_V_velRampTexture [[function_constant(209)]];
constant int SC_SOFTWARE_WRAP_MODE_V_velRampTexture_tmp = is_function_constant_defined(SC_SOFTWARE_WRAP_MODE_V_velRampTexture) ? SC_SOFTWARE_WRAP_MODE_V_velRampTexture : -1;
constant int TRAILBEHAVIOR [[function_constant(210)]];
constant int TRAILBEHAVIOR_tmp = is_function_constant_defined(TRAILBEHAVIOR) ? TRAILBEHAVIOR : 0;
constant int colorRampTextureLayout [[function_constant(211)]];
constant int colorRampTextureLayout_tmp = is_function_constant_defined(colorRampTextureLayout) ? colorRampTextureLayout : 0;
constant int depthMapLayout [[function_constant(212)]];
constant int depthMapLayout_tmp = is_function_constant_defined(depthMapLayout) ? depthMapLayout : 0;
constant int intensityTextureLayout [[function_constant(213)]];
constant int intensityTextureLayout_tmp = is_function_constant_defined(intensityTextureLayout) ? intensityTextureLayout : 0;
constant int mainTextureLayout [[function_constant(214)]];
constant int mainTextureLayout_tmp = is_function_constant_defined(mainTextureLayout) ? mainTextureLayout : 0;
constant int matcapTexLayout [[function_constant(215)]];
constant int matcapTexLayout_tmp = is_function_constant_defined(matcapTexLayout) ? matcapTexLayout : 0;
constant int normalTexMatcapLayout [[function_constant(216)]];
constant int normalTexMatcapLayout_tmp = is_function_constant_defined(normalTexMatcapLayout) ? normalTexMatcapLayout : 0;
constant int normalTexPBRLayout [[function_constant(217)]];
constant int normalTexPBRLayout_tmp = is_function_constant_defined(normalTexPBRLayout) ? normalTexPBRLayout : 0;
constant int rotationSpace [[function_constant(218)]];
constant int rotationSpace_tmp = is_function_constant_defined(rotationSpace) ? rotationSpace : 0;
constant int sc_AmbientLightMode0 [[function_constant(219)]];
constant int sc_AmbientLightMode0_tmp = is_function_constant_defined(sc_AmbientLightMode0) ? sc_AmbientLightMode0 : 0;
constant int sc_AmbientLightMode1 [[function_constant(220)]];
constant int sc_AmbientLightMode1_tmp = is_function_constant_defined(sc_AmbientLightMode1) ? sc_AmbientLightMode1 : 0;
constant int sc_AmbientLightMode2 [[function_constant(221)]];
constant int sc_AmbientLightMode2_tmp = is_function_constant_defined(sc_AmbientLightMode2) ? sc_AmbientLightMode2 : 0;
constant int sc_AmbientLightMode_Constant [[function_constant(222)]];
constant int sc_AmbientLightMode_Constant_tmp = is_function_constant_defined(sc_AmbientLightMode_Constant) ? sc_AmbientLightMode_Constant : 0;
constant int sc_AmbientLightMode_EnvironmentMap [[function_constant(223)]];
constant int sc_AmbientLightMode_EnvironmentMap_tmp = is_function_constant_defined(sc_AmbientLightMode_EnvironmentMap) ? sc_AmbientLightMode_EnvironmentMap : 0;
constant int sc_AmbientLightMode_FromCamera [[function_constant(224)]];
constant int sc_AmbientLightMode_FromCamera_tmp = is_function_constant_defined(sc_AmbientLightMode_FromCamera) ? sc_AmbientLightMode_FromCamera : 0;
constant int sc_AmbientLightMode_SphericalHarmonics [[function_constant(225)]];
constant int sc_AmbientLightMode_SphericalHarmonics_tmp = is_function_constant_defined(sc_AmbientLightMode_SphericalHarmonics) ? sc_AmbientLightMode_SphericalHarmonics : 0;
constant int sc_AmbientLightsCount [[function_constant(226)]];
constant int sc_AmbientLightsCount_tmp = is_function_constant_defined(sc_AmbientLightsCount) ? sc_AmbientLightsCount : 0;
constant int sc_CurveAtlasLayout [[function_constant(227)]];
constant int sc_CurveAtlasLayout_tmp = is_function_constant_defined(sc_CurveAtlasLayout) ? sc_CurveAtlasLayout : 0;
constant int sc_DepthBufferMode [[function_constant(228)]];
constant int sc_DepthBufferMode_tmp = is_function_constant_defined(sc_DepthBufferMode) ? sc_DepthBufferMode : 0;
constant int sc_DirectionalLightsCount [[function_constant(229)]];
constant int sc_DirectionalLightsCount_tmp = is_function_constant_defined(sc_DirectionalLightsCount) ? sc_DirectionalLightsCount : 0;
constant int sc_EnvLightMode [[function_constant(230)]];
constant int sc_EnvLightMode_tmp = is_function_constant_defined(sc_EnvLightMode) ? sc_EnvLightMode : 0;
constant int sc_EnvmapDiffuseLayout [[function_constant(231)]];
constant int sc_EnvmapDiffuseLayout_tmp = is_function_constant_defined(sc_EnvmapDiffuseLayout) ? sc_EnvmapDiffuseLayout : 0;
constant int sc_EnvmapSpecularLayout [[function_constant(232)]];
constant int sc_EnvmapSpecularLayout_tmp = is_function_constant_defined(sc_EnvmapSpecularLayout) ? sc_EnvmapSpecularLayout : 0;
constant int sc_LightEstimationSGCount [[function_constant(233)]];
constant int sc_LightEstimationSGCount_tmp = is_function_constant_defined(sc_LightEstimationSGCount) ? sc_LightEstimationSGCount : 0;
constant int sc_PointLightsCount [[function_constant(234)]];
constant int sc_PointLightsCount_tmp = is_function_constant_defined(sc_PointLightsCount) ? sc_PointLightsCount : 0;
constant int sc_RayTracingGlobalIlluminationLayout [[function_constant(235)]];
constant int sc_RayTracingGlobalIlluminationLayout_tmp = is_function_constant_defined(sc_RayTracingGlobalIlluminationLayout) ? sc_RayTracingGlobalIlluminationLayout : 0;
constant int sc_RayTracingReflectionsLayout [[function_constant(236)]];
constant int sc_RayTracingReflectionsLayout_tmp = is_function_constant_defined(sc_RayTracingReflectionsLayout) ? sc_RayTracingReflectionsLayout : 0;
constant int sc_RayTracingShadowsLayout [[function_constant(237)]];
constant int sc_RayTracingShadowsLayout_tmp = is_function_constant_defined(sc_RayTracingShadowsLayout) ? sc_RayTracingShadowsLayout : 0;
constant int sc_RenderingSpace [[function_constant(238)]];
constant int sc_RenderingSpace_tmp = is_function_constant_defined(sc_RenderingSpace) ? sc_RenderingSpace : -1;
constant int sc_ScreenTextureLayout [[function_constant(239)]];
constant int sc_ScreenTextureLayout_tmp = is_function_constant_defined(sc_ScreenTextureLayout) ? sc_ScreenTextureLayout : 0;
constant int sc_ShaderCacheConstant [[function_constant(240)]];
constant int sc_ShaderCacheConstant_tmp = is_function_constant_defined(sc_ShaderCacheConstant) ? sc_ShaderCacheConstant : 0;
constant int sc_SkinBonesCount [[function_constant(241)]];
constant int sc_SkinBonesCount_tmp = is_function_constant_defined(sc_SkinBonesCount) ? sc_SkinBonesCount : 0;
constant int sc_StereoRenderingMode [[function_constant(242)]];
constant int sc_StereoRenderingMode_tmp = is_function_constant_defined(sc_StereoRenderingMode) ? sc_StereoRenderingMode : 0;
constant int sc_StereoRendering_IsClipDistanceEnabled [[function_constant(243)]];
constant int sc_StereoRendering_IsClipDistanceEnabled_tmp = is_function_constant_defined(sc_StereoRendering_IsClipDistanceEnabled) ? sc_StereoRendering_IsClipDistanceEnabled : 0;
constant int segTexLayout [[function_constant(244)]];
constant int segTexLayout_tmp = is_function_constant_defined(segTexLayout) ? segTexLayout : 0;
constant int sizeRampTextureLayout [[function_constant(245)]];
constant int sizeRampTextureLayout_tmp = is_function_constant_defined(sizeRampTextureLayout) ? sizeRampTextureLayout : 0;
constant int trailColorRampTexLayout [[function_constant(246)]];
constant int trailColorRampTexLayout_tmp = is_function_constant_defined(trailColorRampTexLayout) ? trailColorRampTexLayout : 0;
constant int trailSizeRampTexLayout [[function_constant(247)]];
constant int trailSizeRampTexLayout_tmp = is_function_constant_defined(trailSizeRampTexLayout) ? trailSizeRampTexLayout : 0;
constant int trailTexLayout [[function_constant(248)]];
constant int trailTexLayout_tmp = is_function_constant_defined(trailTexLayout) ? trailTexLayout : 0;
constant int velRampTextureLayout [[function_constant(249)]];
constant int velRampTextureLayout_tmp = is_function_constant_defined(velRampTextureLayout) ? velRampTextureLayout : 0;

namespace SNAP_VS {
struct sc_Vertex_t
{
float4 position;
float3 normal;
float3 tangent;
float2 texture0;
float2 texture1;
};
struct ssGlobals
{
float gTimeElapsed;
float gTimeDelta;
float gTimeElapsedShifted;
float3 N155_helixDirection;
float3 N319_curveDirection;
float3 N111_ParticleSpawnPosition;
float2 Surface_UVCoord0;
float4 VertexColor;
float3 SurfacePosition_ObjectSpace;
float3 VertexNormal_WorldSpace;
float3 VertexNormal_ObjectSpace;
float CameraFOV;
float gInstanceID;
float gInstanceRatio;
};
struct sc_PointLight_t
{
int falloffEnabled;
float falloffEndDistance;
float negRcpFalloffEndDistance4;
float angleScale;
float angleOffset;
float3 direction;
float3 position;
float4 color;
};
struct sc_DirectionalLight_t
{
float3 direction;
float4 color;
};
struct sc_AmbientLight_t
{
float3 color;
float intensity;
};
struct sc_SphericalGaussianLight_t
{
float3 color;
float sharpness;
float3 axis;
};
struct sc_LightEstimationData_t
{
sc_SphericalGaussianLight_t sg[12];
float3 ambientLight;
};
struct sc_Camera_t
{
float3 position;
float aspect;
float2 clipPlanes;
};
struct userUniformsObj
{
sc_PointLight_t sc_PointLights[3];
sc_DirectionalLight_t sc_DirectionalLights[5];
sc_AmbientLight_t sc_AmbientLights[3];
sc_LightEstimationData_t sc_LightEstimationData;
float4 sc_EnvmapDiffuseSize;
float4 sc_EnvmapDiffuseDims;
float4 sc_EnvmapDiffuseView;
float4 sc_EnvmapSpecularSize;
float4 sc_EnvmapSpecularDims;
float4 sc_EnvmapSpecularView;
float3 sc_EnvmapRotation;
float sc_EnvmapExposure;
float3 sc_Sh[9];
float sc_ShIntensity;
float4 sc_Time;
float4 sc_UniformConstants;
float4 sc_GeometryInfo;
float4x4 sc_ModelViewProjectionMatrixArray[2];
float4x4 sc_ModelViewProjectionMatrixInverseArray[2];
float4x4 sc_ViewProjectionMatrixArray[2];
float4x4 sc_ViewProjectionMatrixInverseArray[2];
float4x4 sc_ModelViewMatrixArray[2];
float4x4 sc_ModelViewMatrixInverseArray[2];
float3x3 sc_ViewNormalMatrixArray[2];
float3x3 sc_ViewNormalMatrixInverseArray[2];
float4x4 sc_ProjectionMatrixArray[2];
float4x4 sc_ProjectionMatrixInverseArray[2];
float4x4 sc_ViewMatrixArray[2];
float4x4 sc_ViewMatrixInverseArray[2];
float4x4 sc_PrevFrameViewProjectionMatrixArray[2];
float4x4 sc_ModelMatrix;
float4x4 sc_ModelMatrixInverse;
float3x3 sc_NormalMatrix;
float3x3 sc_NormalMatrixInverse;
float4x4 sc_PrevFrameModelMatrix;
float4x4 sc_PrevFrameModelMatrixInverse;
float3 sc_LocalAabbMin;
float3 sc_LocalAabbMax;
float3 sc_WorldAabbMin;
float3 sc_WorldAabbMax;
float4 sc_WindowToViewportTransform;
float4 sc_CurrentRenderTargetDims;
sc_Camera_t sc_Camera;
float sc_ShadowDensity;
float4 sc_ShadowColor;
float4x4 sc_ProjectorMatrix;
float shaderComplexityValue;
float4 weights0;
float4 weights1;
float4 weights2;
float4 sc_StereoClipPlanes[2];
int sc_FallbackInstanceID;
float2 sc_TAAJitterOffset;
float strandWidth;
float strandTaper;
float4 sc_StrandDataMapTextureSize;
float clumpInstanceCount;
float clumpRadius;
float clumpTipScale;
float hairstyleInstanceCount;
float hairstyleNoise;
float4 sc_ScreenTextureSize;
float4 sc_ScreenTextureDims;
float4 sc_ScreenTextureView;
int sc_RayTracingReceiverEffectsMask;
float4 sc_RayTracingReflectionsSize;
float4 sc_RayTracingReflectionsDims;
float4 sc_RayTracingReflectionsView;
float4 sc_RayTracingGlobalIlluminationSize;
float4 sc_RayTracingGlobalIlluminationDims;
float4 sc_RayTracingGlobalIlluminationView;
float4 sc_RayTracingShadowsSize;
float4 sc_RayTracingShadowsDims;
float4 sc_RayTracingShadowsView;
float3 sc_RayTracingOriginScale;
uint sc_RayTracingReceiverMask;
float3 sc_RayTracingOriginScaleInv;
float3 sc_RayTracingOriginOffset;
uint sc_RayTracingReceiverId;
float4 voxelization_params_0;
float4 voxelization_params_frustum_lrbt;
float4 voxelization_params_frustum_nf;
float3 voxelization_params_camera_pos;
float4x4 sc_ModelMatrixVoxelization;
float correctedIntensity;
float4 intensityTextureSize;
float4 intensityTextureDims;
float4 intensityTextureView;
float3x3 intensityTextureTransform;
float4 intensityTextureUvMinMax;
float4 intensityTextureBorderColor;
float reflBlurWidth;
float reflBlurMinRough;
float reflBlurMaxRough;
int overrideTimeEnabled;
float overrideTimeElapsed[32];
float overrideTimeDelta;
int PreviewEnabled;
int PreviewNodeID;
float alphaTestThreshold;
float timeGlobal;
float externalTimeInput;
float externalSeed;
float lifeTimeConstant;
float2 lifeTimeMinMax;
float spawnDuration;
float trailLength;
float2 trailTaper;
float trailWidth;
float4 trailSizeRampTexSize;
float4 trailSizeRampTexDims;
float4 trailSizeRampTexView;
float3x3 trailSizeRampTexTransform;
float4 trailSizeRampTexUvMinMax;
float4 trailSizeRampTexBorderColor;
float Tweak_N255;
float Tweak_N254;
float3 Tweak_N252;
float3 Tweak_N253;
float Tweak_N224;
float3 Tweak_N250;
float3 Tweak_N251;
float volumeFill;
float Tweak_N238;
float Tweak_N16;
float Tweak_N234;
float Tweak_N239;
float2 Tweak_N240;
float3 Tweak_N241;
float3 Tweak_N242;
float Tweak_N226;
float Tweak_N243;
float Tweak_N257;
float Tweak_N258;
float2 Tweak_N259;
float3 Tweak_N260;
float3 Tweak_N261;
float Tweak_N262;
float Tweak_N263;
float3 Tweak_N236;
float3 Tweak_N237;
float3 Tweak_N264;
float Tweak_N232;
float Tweak_N233;
float Tweak_N231;
float Tweak_N304;
float Tweak_N229;
int Tweak_N280;
float3 Tweak_N157_curveData;
float4 sc_CurveAtlasSize;
float4 sc_CurveAtlasDims;
float4 sc_CurveAtlasView;
float3x3 sc_CurveAtlasTransform;
float4 sc_CurveAtlasUvMinMax;
float4 sc_CurveAtlasBorderColor;
float Tweak_N285;
float Tweak_N245;
float Tweak_N230;
int animated;
float Tweak_N279;
int Tweak_N303;
float2 Tweak_N336;
float3 Tweak_N293_curveData;
float3 Tweak_N305_curveData;
float3 Tweak_N297_curveData;
float Tweak_N298;
float3 Tweak_N330;
int Tweak_N308;
float Tweak_N294;
int Tweak_N339;
float2 Tweak_N342;
float Tweak_N301;
int Tweak_N274;
float3 Tweak_N299_curveData;
float Tweak_N302;
float Tweak_N318;
int Tweak_N271;
float Tweak_N273;
float2 Tweak_N270;
float2 Tweak_N272;
float Tweak_N269;
float Tweak_N275;
int Tweak_N161;
float3 spawnBox;
float3 spawnSphere;
float3 noiseMult;
float3 noiseFrequency;
float3 sNoiseMult;
float3 sNoiseFrequency;
float3 velocityMin;
float3 velocityMax;
float3 velocityDrag;
float4 velRampTextureSize;
float4 velRampTextureDims;
float4 velRampTextureView;
float3x3 velRampTextureTransform;
float4 velRampTextureUvMinMax;
float4 velRampTextureBorderColor;
float2 sizeStart;
float2 sizeEnd;
float2 sizeStartMax;
float2 sizeEndMax;
float3 sizeStart3D;
float3 sizeEnd3D;
float3 sizeStartMax3D;
float3 sizeEndMax3D;
float sizeSpeed;
float4 sizeRampTextureSize;
float4 sizeRampTextureDims;
float4 sizeRampTextureView;
float3x3 sizeRampTextureTransform;
float4 sizeRampTextureUvMinMax;
float4 sizeRampTextureBorderColor;
float gravity;
float3 localForce;
float attractRepelForceStrength;
float3 customForceOrigin;
float4 Tex3dSize;
float2 Tex3dDepth;
float3 Tex3dScale;
float3 Tex3dScrollSpeed;
float3 Tex3dForceStrength;
float3 Tweak_N314;
float sizeVelScale;
int IGNOREVEL;
int NORMALIZESCALETOTRANSFORM;
float2 velScaleMinMax;
float2 rotationRandom;
float2 rotationRate;
float2 rotationRandomX;
float2 rotationRateX;
float2 randomRotationY;
float2 rotationRateY;
float2 randomRotationZ;
float2 rotationRateZ;
float rotationDrag;
int CENTER_BBOX;
float4 displace3dTexSize;
float2 displace3dTexDepth;
float3 displaceScale;
float3 displaceSpeed;
float3 displaceStrength;
float3 orbitAxis;
float3 orbitCenter;
float2 orbitMinMaxAngle;
float2 orbitMinMaxSpeed;
float fadeDistanceVisible;
float fadeDistanceInvisible;
int circularMask;
int squareMask;
float maskTreshold;
float maskFeather;
float4 trailTexSize;
float4 trailTexDims;
float4 trailTexView;
float3x3 trailTexTransform;
float4 trailTexUvMinMax;
float4 trailTexBorderColor;
float4 trailColorRampTexSize;
float4 trailColorRampTexDims;
float4 trailColorRampTexView;
float3x3 trailColorRampTexTransform;
float4 trailColorRampTexUvMinMax;
float4 trailColorRampTexBorderColor;
float2 trailFadeStartEnd;
float2 trailFadeInOut;
float3 colorStart;
float3 colorEnd;
float3 colorMinStart;
float3 colorMinEnd;
float3 colorMaxStart;
float3 colorMaxEnd;
float alphaStart;
float alphaEnd;
float alphaMinStart;
float alphaMinEnd;
float alphaMaxStart;
float alphaMaxEnd;
float alphaDissolveMult;
float numValidFrames;
float2 gridSize;
float flipBookSpeedMult;
float flipBookRandomStart;
float4 colorRampTextureSize;
float4 colorRampTextureDims;
float4 colorRampTextureView;
float3x3 colorRampTextureTransform;
float4 colorRampTextureUvMinMax;
float4 colorRampTextureBorderColor;
float4 colorRampMult;
float4 mainTextureSize;
float4 mainTextureDims;
float4 mainTextureView;
float3x3 mainTextureTransform;
float4 mainTextureUvMinMax;
float4 mainTextureBorderColor;
float4 normalTexPBRSize;
float4 normalTexPBRDims;
float4 normalTexPBRView;
float3x3 normalTexPBRTransform;
float4 normalTexPBRUvMinMax;
float4 normalTexPBRBorderColor;
float metallic;
float roughness;
float intensityMatcap;
float4 matcapTexSize;
float4 matcapTexDims;
float4 matcapTexView;
float3x3 matcapTexTransform;
float4 matcapTexUvMinMax;
float4 matcapTexBorderColor;
float4 normalTexMatcapSize;
float4 normalTexMatcapDims;
float4 normalTexMatcapView;
float3x3 normalTexMatcapTransform;
float4 normalTexMatcapUvMinMax;
float4 normalTexMatcapBorderColor;
float4 depthMapSize;
float4 depthMapDims;
float4 depthMapView;
float3x3 depthMapTransform;
float4 depthMapUvMinMax;
float4 depthMapBorderColor;
float4 depthMapProjectionMatrixTerms;
float startFade;
float endFade;
float exponentFade;
int texMask;
int texMaskInvert;
float4 segTexSize;
float4 segTexDims;
float4 segTexView;
float3x3 segTexTransform;
float4 segTexUvMinMax;
float4 segTexBorderColor;
float Port_Input1_N119;
float3 Port_Default_N247;
float Port_Input1_N069;
float Port_Input1_N068;
float Port_Input1_N216;
float3 Port_Emissive_N014;
float3 Port_AO_N014;
float3 Port_SpecularAO_N014;
float Port_Import_N283;
float3 Port_Import_N286;
};
struct sc_Bone_t
{
float4 boneMatrix[3];
float4 normalMatrix[3];
};
struct sc_Bones_obj
{
sc_Bone_t sc_Bones[1];
};
struct ssPreviewInfo
{
float4 Color;
bool Saved;
};
struct sc_Set0
{
constant sc_Bones_obj* sc_BonesUBO [[id(0)]];
texture3d<float> Tex3d [[id(1)]];
texture2d<float> colorRampTexture [[id(2)]];
texture2d<float> depthMap [[id(3)]];
texture3d<float> displace3dTex [[id(4)]];
texture2d<float> intensityTexture [[id(5)]];
texture2d<float> mainTexture [[id(6)]];
texture2d<float> matcapTex [[id(7)]];
texture2d<float> normalTexMatcap [[id(8)]];
texture2d<float> normalTexPBR [[id(9)]];
texture2d<float> sc_CurveAtlas [[id(10)]];
texture2d<float> sc_EnvmapDiffuse [[id(11)]];
texture2d<float> sc_EnvmapSpecular [[id(12)]];
texture2d<float> sc_RayTracingGlobalIllumination [[id(21)]];
texture2d<float> sc_RayTracingReflections [[id(22)]];
texture2d<float> sc_RayTracingShadows [[id(23)]];
texture2d<float> sc_SSAOTexture [[id(24)]];
texture2d<float> sc_ScreenTexture [[id(25)]];
texture2d<float> sc_ShadowTexture [[id(26)]];
texture2d<float> segTex [[id(28)]];
texture2d<float> sizeRampTexture [[id(29)]];
texture2d<float> trailColorRampTex [[id(30)]];
texture2d<float> trailSizeRampTex [[id(31)]];
texture2d<float> trailTex [[id(32)]];
texture2d<float> velRampTexture [[id(33)]];
sampler Tex3dSmpSC [[id(34)]];
sampler colorRampTextureSmpSC [[id(35)]];
sampler depthMapSmpSC [[id(36)]];
sampler displace3dTexSmpSC [[id(37)]];
sampler intensityTextureSmpSC [[id(38)]];
sampler mainTextureSmpSC [[id(39)]];
sampler matcapTexSmpSC [[id(40)]];
sampler normalTexMatcapSmpSC [[id(41)]];
sampler normalTexPBRSmpSC [[id(42)]];
sampler sc_CurveAtlasSmpSC [[id(43)]];
sampler sc_EnvmapDiffuseSmpSC [[id(44)]];
sampler sc_EnvmapSpecularSmpSC [[id(45)]];
sampler sc_RayTracingGlobalIlluminationSmpSC [[id(47)]];
sampler sc_RayTracingReflectionsSmpSC [[id(48)]];
sampler sc_RayTracingShadowsSmpSC [[id(49)]];
sampler sc_SSAOTextureSmpSC [[id(50)]];
sampler sc_ScreenTextureSmpSC [[id(51)]];
sampler sc_ShadowTextureSmpSC [[id(52)]];
sampler segTexSmpSC [[id(54)]];
sampler sizeRampTextureSmpSC [[id(55)]];
sampler trailColorRampTexSmpSC [[id(56)]];
sampler trailSizeRampTexSmpSC [[id(57)]];
sampler trailTexSmpSC [[id(58)]];
sampler velRampTextureSmpSC [[id(59)]];
constant userUniformsObj* UserUniforms [[id(60)]];
};
struct main_vert_out
{
float4 varPosAndMotion [[user(locn0)]];
float4 varNormalAndMotion [[user(locn1)]];
float4 varTangent [[user(locn2)]];
float4 varTex01 [[user(locn3)]];
float4 varScreenPos [[user(locn4)]];
float2 varScreenTexturePos [[user(locn5)]];
float varViewSpaceDepth [[user(locn6)]];
float2 varShadowTex [[user(locn7)]];
int varStereoViewID [[user(locn8)]];
float varClipDistance [[user(locn9)]];
float4 varColor [[user(locn10)]];
float4 PreviewVertexColor [[user(locn11)]];
float PreviewVertexSaved [[user(locn12)]];
float Interpolator_gInstanceID [[user(locn13)]];
float4 Interpolator0 [[user(locn14)]];
float4 Interpolator1 [[user(locn15)]];
float Interpolator_gInstanceRatio [[user(locn16)]];
float4 gl_Position [[position]];
};
struct main_vert_in
{
float4 position [[attribute(0)]];
float3 normal [[attribute(1)]];
float4 tangent [[attribute(2)]];
float2 texture0 [[attribute(3)]];
float2 texture1 [[attribute(4)]];
float4 boneData [[attribute(5)]];
float3 blendShape0Pos [[attribute(6)]];
float3 blendShape1Pos [[attribute(7)]];
float3 blendShape2Pos [[attribute(8)]];
float3 blendShape3Pos [[attribute(9)]];
float3 blendShape4Pos [[attribute(10)]];
float3 blendShape5Pos [[attribute(11)]];
float3 blendShape0Normal [[attribute(12)]];
float3 blendShape1Normal [[attribute(13)]];
float3 blendShape2Normal [[attribute(14)]];
float3 positionNext [[attribute(15)]];
float3 positionPrevious [[attribute(16)]];
float4 strandProperties [[attribute(17)]];
float4 color [[attribute(18)]];
};
// Implementation of the GLSL mod() function,which is slightly different than Metal fmod()
template<typename Tx,typename Ty>
Tx mod(Tx x,Ty y)
{
return x-y*floor(x/y);
}
// Implementation of the GLSL radians() function
template<typename T>
T radians(T d)
{
return d*T(0.01745329251);
}
float2 N111_pSize(thread const float& random1,thread const float& random2,thread const float& timeIn,thread const float& N111_sizeSpeed,thread bool& N111_isTrail,thread float2& N111_trailHeadTime,thread float& N111_trailSizeMult,thread float2& N111_sizeStart,thread float2& N111_sizeEnd,thread float2& N111_sizeStartMax,thread float2& N111_sizeEndMax,thread float3& N111_sizeStart3D,thread float3& N111_sizeEnd3D,thread float3& N111_sizeStartMax3D,thread float3& N111_sizeEndMax3D,thread uint& gl_InstanceIndex,constant userUniformsObj& UserUniforms,thread ssGlobals& tempGlobals,thread texture2d<float> trailSizeRampTex,thread sampler trailSizeRampTexSmpSC,thread texture2d<float> sizeRampTexture,thread sampler sizeRampTextureSmpSC)
{
float2 psizeStart=float2(0.0);
float2 psizeEnd=float2(0.0);
float normTime=timeIn;
if ((int(TRAILS_tmp)!=0))
{
if (!(TRAILBEHAVIOR_tmp!=0))
{
normTime=N111_trailHeadTime.y;
}
}
float param=normTime;
float param_1=N111_sizeSpeed;
float l9_0;
if (param<=0.0)
{
l9_0=0.0;
}
else
{
l9_0=pow(param,param_1);
}
float l9_1=l9_0;
float sizePow=l9_1;
if ((int(SIZEMINMAX_tmp)!=0))
{
if (MESHTYPE_tmp==0)
{
psizeStart=mix(N111_sizeStart,N111_sizeStartMax,float2(random1));
}
else
{
psizeStart=mix(N111_sizeStart3D.xy,N111_sizeStartMax3D.xy,float2(random1));
}
if ((int(SIZERAMP_tmp)!=0))
{
if ((int(ENABLE_SIZERAMPSTARTENDASBOUNDS_tmp)!=0))
{
if (MESHTYPE_tmp==0)
{
psizeEnd=mix(N111_sizeEnd,N111_sizeEndMax,float2(random2));
}
else
{
psizeEnd=mix(N111_sizeEnd3D.xy,N111_sizeEndMax3D.xy,float2(random1));
}
}
}
else
{
if (MESHTYPE_tmp==0)
{
psizeEnd=mix(N111_sizeEnd,N111_sizeEndMax,float2(random2));
}
else
{
psizeEnd=mix(N111_sizeEnd3D.xy,N111_sizeEndMax3D.xy,float2(random1));
}
}
}
else
{
if (MESHTYPE_tmp==0)
{
psizeStart=N111_sizeStart;
}
else
{
psizeStart=N111_sizeStart3D.xy;
}
if ((int(SIZERAMP_tmp)!=0))
{
if ((int(ENABLE_SIZERAMPSTARTENDASBOUNDS_tmp)!=0))
{
if (MESHTYPE_tmp==0)
{
psizeEnd=N111_sizeEnd;
}
else
{
psizeEnd=N111_sizeEnd3D.xy;
}
}
}
else
{
if (MESHTYPE_tmp==0)
{
psizeEnd=N111_sizeEnd;
}
else
{
psizeEnd=N111_sizeEnd3D.xy;
}
}
}
float2 sizeLife=mix(psizeStart,psizeEnd,float2(sizePow));
if (!(SC_DEVICE_CLASS_tmp>=2))
{
return sizeLife;
}
if ((int(SIZERAMP_tmp)!=0))
{
float sizeRampPanning=ceil(normTime*10000.0)/10000.0;
float2 l9_2=tempGlobals.Surface_UVCoord0;
float2 sizeRampUV=(l9_2/float2(10000.0,1.0))+float2(sizeRampPanning,0.0);
float2 param_2=sizeRampUV;
float4 l9_3=float4(0.0);
int l9_4;
if ((int(sizeRampTextureHasSwappedViews_tmp)!=0))
{
int l9_5=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_5=0;
}
else
{
l9_5=gl_InstanceIndex%2;
}
int l9_6=l9_5;
l9_4=1-l9_6;
}
else
{
int l9_7=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_7=0;
}
else
{
l9_7=gl_InstanceIndex%2;
}
int l9_8=l9_7;
l9_4=l9_8;
}
int l9_9=l9_4;
int l9_10=sizeRampTextureLayout_tmp;
int l9_11=l9_9;
float2 l9_12=param_2;
bool l9_13=(int(SC_USE_UV_TRANSFORM_sizeRampTexture_tmp)!=0);
float3x3 l9_14=UserUniforms.sizeRampTextureTransform;
int2 l9_15=int2(SC_SOFTWARE_WRAP_MODE_U_sizeRampTexture_tmp,SC_SOFTWARE_WRAP_MODE_V_sizeRampTexture_tmp);
bool l9_16=(int(SC_USE_UV_MIN_MAX_sizeRampTexture_tmp)!=0);
float4 l9_17=UserUniforms.sizeRampTextureUvMinMax;
bool l9_18=(int(SC_USE_CLAMP_TO_BORDER_sizeRampTexture_tmp)!=0);
float4 l9_19=UserUniforms.sizeRampTextureBorderColor;
float l9_20=0.0;
bool l9_21=l9_18&&(!l9_16);
float l9_22=1.0;
float l9_23=l9_12.x;
int l9_24=l9_15.x;
if (l9_24==1)
{
l9_23=fract(l9_23);
}
else
{
if (l9_24==2)
{
float l9_25=fract(l9_23);
float l9_26=l9_23-l9_25;
float l9_27=step(0.25,fract(l9_26*0.5));
l9_23=mix(l9_25,1.0-l9_25,fast::clamp(l9_27,0.0,1.0));
}
}
l9_12.x=l9_23;
float l9_28=l9_12.y;
int l9_29=l9_15.y;
if (l9_29==1)
{
l9_28=fract(l9_28);
}
else
{
if (l9_29==2)
{
float l9_30=fract(l9_28);
float l9_31=l9_28-l9_30;
float l9_32=step(0.25,fract(l9_31*0.5));
l9_28=mix(l9_30,1.0-l9_30,fast::clamp(l9_32,0.0,1.0));
}
}
l9_12.y=l9_28;
if (l9_16)
{
bool l9_33=l9_18;
bool l9_34;
if (l9_33)
{
l9_34=l9_15.x==3;
}
else
{
l9_34=l9_33;
}
float l9_35=l9_12.x;
float l9_36=l9_17.x;
float l9_37=l9_17.z;
bool l9_38=l9_34;
float l9_39=l9_22;
float l9_40=fast::clamp(l9_35,l9_36,l9_37);
float l9_41=step(abs(l9_35-l9_40),9.9999997e-06);
l9_39*=(l9_41+((1.0-float(l9_38))*(1.0-l9_41)));
l9_35=l9_40;
l9_12.x=l9_35;
l9_22=l9_39;
bool l9_42=l9_18;
bool l9_43;
if (l9_42)
{
l9_43=l9_15.y==3;
}
else
{
l9_43=l9_42;
}
float l9_44=l9_12.y;
float l9_45=l9_17.y;
float l9_46=l9_17.w;
bool l9_47=l9_43;
float l9_48=l9_22;
float l9_49=fast::clamp(l9_44,l9_45,l9_46);
float l9_50=step(abs(l9_44-l9_49),9.9999997e-06);
l9_48*=(l9_50+((1.0-float(l9_47))*(1.0-l9_50)));
l9_44=l9_49;
l9_12.y=l9_44;
l9_22=l9_48;
}
float2 l9_51=l9_12;
bool l9_52=l9_13;
float3x3 l9_53=l9_14;
if (l9_52)
{
l9_51=float2((l9_53*float3(l9_51,1.0)).xy);
}
float2 l9_54=l9_51;
l9_12=l9_54;
float l9_55=l9_12.x;
int l9_56=l9_15.x;
bool l9_57=l9_21;
float l9_58=l9_22;
if ((l9_56==0)||(l9_56==3))
{
float l9_59=l9_55;
float l9_60=0.0;
float l9_61=1.0;
bool l9_62=l9_57;
float l9_63=l9_58;
float l9_64=fast::clamp(l9_59,l9_60,l9_61);
float l9_65=step(abs(l9_59-l9_64),9.9999997e-06);
l9_63*=(l9_65+((1.0-float(l9_62))*(1.0-l9_65)));
l9_59=l9_64;
l9_55=l9_59;
l9_58=l9_63;
}
l9_12.x=l9_55;
l9_22=l9_58;
float l9_66=l9_12.y;
int l9_67=l9_15.y;
bool l9_68=l9_21;
float l9_69=l9_22;
if ((l9_67==0)||(l9_67==3))
{
float l9_70=l9_66;
float l9_71=0.0;
float l9_72=1.0;
bool l9_73=l9_68;
float l9_74=l9_69;
float l9_75=fast::clamp(l9_70,l9_71,l9_72);
float l9_76=step(abs(l9_70-l9_75),9.9999997e-06);
l9_74*=(l9_76+((1.0-float(l9_73))*(1.0-l9_76)));
l9_70=l9_75;
l9_66=l9_70;
l9_69=l9_74;
}
l9_12.y=l9_66;
l9_22=l9_69;
float2 l9_77=l9_12;
int l9_78=l9_10;
int l9_79=l9_11;
float l9_80=l9_20;
float2 l9_81=l9_77;
int l9_82=l9_78;
int l9_83=l9_79;
float3 l9_84=float3(0.0);
if (l9_82==0)
{
l9_84=float3(l9_81,0.0);
}
else
{
if (l9_82==1)
{
l9_84=float3(l9_81.x,(l9_81.y*0.5)+(0.5-(float(l9_83)*0.5)),0.0);
}
else
{
l9_84=float3(l9_81,float(l9_83));
}
}
float3 l9_85=l9_84;
float3 l9_86=l9_85;
float4 l9_87=sizeRampTexture.sample(sizeRampTextureSmpSC,l9_86.xy,level(l9_80));
float4 l9_88=l9_87;
if (l9_18)
{
l9_88=mix(l9_19,l9_88,float4(l9_22));
}
float4 l9_89=l9_88;
l9_3=l9_89;
float4 l9_90=l9_3;
float2 sizeRampTex=l9_90.xy;
sizeLife=sizeRampTex*psizeStart;
if ((int(ENABLE_SIZERAMPSTARTENDASBOUNDS_tmp)!=0))
{
sizeLife=mix(psizeEnd,psizeStart,sizeRampTex);
}
}
if ((int(TRAILS_tmp)!=0))
{
if (N111_isTrail)
{
if ((int(TRAILSIZERAMP_tmp)!=0))
{
normTime=timeIn;
float sizeRampPanning_1=ceil(normTime*10000.0)/10000.0;
float2 l9_91=tempGlobals.Surface_UVCoord0;
float2 sizeRampUV_1=(l9_91/float2(10000.0,1.0))+float2(sizeRampPanning_1,0.0);
float2 param_3=sizeRampUV_1;
float4 l9_92=float4(0.0);
int l9_93;
if ((int(trailSizeRampTexHasSwappedViews_tmp)!=0))
{
int l9_94=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_94=0;
}
else
{
l9_94=gl_InstanceIndex%2;
}
int l9_95=l9_94;
l9_93=1-l9_95;
}
else
{
int l9_96=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_96=0;
}
else
{
l9_96=gl_InstanceIndex%2;
}
int l9_97=l9_96;
l9_93=l9_97;
}
int l9_98=l9_93;
int l9_99=trailSizeRampTexLayout_tmp;
int l9_100=l9_98;
float2 l9_101=param_3;
bool l9_102=(int(SC_USE_UV_TRANSFORM_trailSizeRampTex_tmp)!=0);
float3x3 l9_103=UserUniforms.trailSizeRampTexTransform;
int2 l9_104=int2(SC_SOFTWARE_WRAP_MODE_U_trailSizeRampTex_tmp,SC_SOFTWARE_WRAP_MODE_V_trailSizeRampTex_tmp);
bool l9_105=(int(SC_USE_UV_MIN_MAX_trailSizeRampTex_tmp)!=0);
float4 l9_106=UserUniforms.trailSizeRampTexUvMinMax;
bool l9_107=(int(SC_USE_CLAMP_TO_BORDER_trailSizeRampTex_tmp)!=0);
float4 l9_108=UserUniforms.trailSizeRampTexBorderColor;
float l9_109=0.0;
bool l9_110=l9_107&&(!l9_105);
float l9_111=1.0;
float l9_112=l9_101.x;
int l9_113=l9_104.x;
if (l9_113==1)
{
l9_112=fract(l9_112);
}
else
{
if (l9_113==2)
{
float l9_114=fract(l9_112);
float l9_115=l9_112-l9_114;
float l9_116=step(0.25,fract(l9_115*0.5));
l9_112=mix(l9_114,1.0-l9_114,fast::clamp(l9_116,0.0,1.0));
}
}
l9_101.x=l9_112;
float l9_117=l9_101.y;
int l9_118=l9_104.y;
if (l9_118==1)
{
l9_117=fract(l9_117);
}
else
{
if (l9_118==2)
{
float l9_119=fract(l9_117);
float l9_120=l9_117-l9_119;
float l9_121=step(0.25,fract(l9_120*0.5));
l9_117=mix(l9_119,1.0-l9_119,fast::clamp(l9_121,0.0,1.0));
}
}
l9_101.y=l9_117;
if (l9_105)
{
bool l9_122=l9_107;
bool l9_123;
if (l9_122)
{
l9_123=l9_104.x==3;
}
else
{
l9_123=l9_122;
}
float l9_124=l9_101.x;
float l9_125=l9_106.x;
float l9_126=l9_106.z;
bool l9_127=l9_123;
float l9_128=l9_111;
float l9_129=fast::clamp(l9_124,l9_125,l9_126);
float l9_130=step(abs(l9_124-l9_129),9.9999997e-06);
l9_128*=(l9_130+((1.0-float(l9_127))*(1.0-l9_130)));
l9_124=l9_129;
l9_101.x=l9_124;
l9_111=l9_128;
bool l9_131=l9_107;
bool l9_132;
if (l9_131)
{
l9_132=l9_104.y==3;
}
else
{
l9_132=l9_131;
}
float l9_133=l9_101.y;
float l9_134=l9_106.y;
float l9_135=l9_106.w;
bool l9_136=l9_132;
float l9_137=l9_111;
float l9_138=fast::clamp(l9_133,l9_134,l9_135);
float l9_139=step(abs(l9_133-l9_138),9.9999997e-06);
l9_137*=(l9_139+((1.0-float(l9_136))*(1.0-l9_139)));
l9_133=l9_138;
l9_101.y=l9_133;
l9_111=l9_137;
}
float2 l9_140=l9_101;
bool l9_141=l9_102;
float3x3 l9_142=l9_103;
if (l9_141)
{
l9_140=float2((l9_142*float3(l9_140,1.0)).xy);
}
float2 l9_143=l9_140;
l9_101=l9_143;
float l9_144=l9_101.x;
int l9_145=l9_104.x;
bool l9_146=l9_110;
float l9_147=l9_111;
if ((l9_145==0)||(l9_145==3))
{
float l9_148=l9_144;
float l9_149=0.0;
float l9_150=1.0;
bool l9_151=l9_146;
float l9_152=l9_147;
float l9_153=fast::clamp(l9_148,l9_149,l9_150);
float l9_154=step(abs(l9_148-l9_153),9.9999997e-06);
l9_152*=(l9_154+((1.0-float(l9_151))*(1.0-l9_154)));
l9_148=l9_153;
l9_144=l9_148;
l9_147=l9_152;
}
l9_101.x=l9_144;
l9_111=l9_147;
float l9_155=l9_101.y;
int l9_156=l9_104.y;
bool l9_157=l9_110;
float l9_158=l9_111;
if ((l9_156==0)||(l9_156==3))
{
float l9_159=l9_155;
float l9_160=0.0;
float l9_161=1.0;
bool l9_162=l9_157;
float l9_163=l9_158;
float l9_164=fast::clamp(l9_159,l9_160,l9_161);
float l9_165=step(abs(l9_159-l9_164),9.9999997e-06);
l9_163*=(l9_165+((1.0-float(l9_162))*(1.0-l9_165)));
l9_159=l9_164;
l9_155=l9_159;
l9_158=l9_163;
}
l9_101.y=l9_155;
l9_111=l9_158;
float2 l9_166=l9_101;
int l9_167=l9_99;
int l9_168=l9_100;
float l9_169=l9_109;
float2 l9_170=l9_166;
int l9_171=l9_167;
int l9_172=l9_168;
float3 l9_173=float3(0.0);
if (l9_171==0)
{
l9_173=float3(l9_170,0.0);
}
else
{
if (l9_171==1)
{
l9_173=float3(l9_170.x,(l9_170.y*0.5)+(0.5-(float(l9_172)*0.5)),0.0);
}
else
{
l9_173=float3(l9_170,float(l9_172));
}
}
float3 l9_174=l9_173;
float3 l9_175=l9_174;
float4 l9_176=trailSizeRampTex.sample(trailSizeRampTexSmpSC,l9_175.xy,level(l9_169));
float4 l9_177=l9_176;
if (l9_107)
{
l9_177=mix(l9_108,l9_177,float4(l9_111));
}
float4 l9_178=l9_177;
l9_92=l9_178;
float4 l9_179=l9_92;
float sizeRampTex_1=l9_179.x;
sizeLife.x=sizeRampTex_1*psizeStart.x;
if ((int(TRAILSIZERAMPSTARTENDASBOUNDS_tmp)!=0))
{
sizeLife.x=mix(psizeEnd.x,psizeStart.x,sizeRampTex_1);
}
}
sizeLife.x*=N111_trailSizeMult;
sizeLife.y=0.0;
}
}
return sizeLife;
}
float3 N111_pSize3D(thread const float& random1,thread const float& random2,thread const float& normTime,thread const float& N111_sizeSpeed,thread float3& N111_sizeStart3D,thread float3& N111_sizeEnd3D,thread float3& N111_sizeStartMax3D,thread float3& N111_sizeEndMax3D,thread uint& gl_InstanceIndex,constant userUniformsObj& UserUniforms,thread ssGlobals& tempGlobals,thread texture2d<float> sizeRampTexture,thread sampler sizeRampTextureSmpSC)
{
float3 psizeStart=float3(0.0);
float3 psizeEnd=float3(0.0);
float param=normTime;
float param_1=N111_sizeSpeed;
float l9_0;
if (param<=0.0)
{
l9_0=0.0;
}
else
{
l9_0=pow(param,param_1);
}
float l9_1=l9_0;
float sizePow=l9_1;
if ((int(SIZEMINMAX_tmp)!=0))
{
psizeStart=mix(N111_sizeStart3D,N111_sizeStartMax3D,float3(random1));
if ((int(SIZERAMP_tmp)!=0))
{
if ((int(ENABLE_SIZERAMPSTARTENDASBOUNDS_tmp)!=0))
{
psizeEnd=mix(N111_sizeEnd3D,N111_sizeEndMax3D,float3(random2));
}
}
else
{
psizeEnd=mix(N111_sizeEnd3D,N111_sizeEndMax3D,float3(random2));
}
}
else
{
psizeStart=N111_sizeStart3D;
if ((int(SIZERAMP_tmp)!=0))
{
if ((int(ENABLE_SIZERAMPSTARTENDASBOUNDS_tmp)!=0))
{
psizeEnd=N111_sizeEnd3D;
}
}
else
{
psizeEnd=N111_sizeEnd3D;
}
}
float3 sizeLife=mix(psizeStart,psizeEnd,float3(sizePow));
if (!(SC_DEVICE_CLASS_tmp>=2))
{
return sizeLife;
}
if ((int(SIZERAMP_tmp)!=0))
{
float sizeRampPanning=ceil(normTime*10000.0)/10000.0;
float2 l9_2=tempGlobals.Surface_UVCoord0;
float2 sizeRampUV=(l9_2/float2(10000.0,1.0))+float2(sizeRampPanning,0.0);
float2 param_2=sizeRampUV;
float4 l9_3=float4(0.0);
int l9_4;
if ((int(sizeRampTextureHasSwappedViews_tmp)!=0))
{
int l9_5=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_5=0;
}
else
{
l9_5=gl_InstanceIndex%2;
}
int l9_6=l9_5;
l9_4=1-l9_6;
}
else
{
int l9_7=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_7=0;
}
else
{
l9_7=gl_InstanceIndex%2;
}
int l9_8=l9_7;
l9_4=l9_8;
}
int l9_9=l9_4;
int l9_10=sizeRampTextureLayout_tmp;
int l9_11=l9_9;
float2 l9_12=param_2;
bool l9_13=(int(SC_USE_UV_TRANSFORM_sizeRampTexture_tmp)!=0);
float3x3 l9_14=UserUniforms.sizeRampTextureTransform;
int2 l9_15=int2(SC_SOFTWARE_WRAP_MODE_U_sizeRampTexture_tmp,SC_SOFTWARE_WRAP_MODE_V_sizeRampTexture_tmp);
bool l9_16=(int(SC_USE_UV_MIN_MAX_sizeRampTexture_tmp)!=0);
float4 l9_17=UserUniforms.sizeRampTextureUvMinMax;
bool l9_18=(int(SC_USE_CLAMP_TO_BORDER_sizeRampTexture_tmp)!=0);
float4 l9_19=UserUniforms.sizeRampTextureBorderColor;
float l9_20=0.0;
bool l9_21=l9_18&&(!l9_16);
float l9_22=1.0;
float l9_23=l9_12.x;
int l9_24=l9_15.x;
if (l9_24==1)
{
l9_23=fract(l9_23);
}
else
{
if (l9_24==2)
{
float l9_25=fract(l9_23);
float l9_26=l9_23-l9_25;
float l9_27=step(0.25,fract(l9_26*0.5));
l9_23=mix(l9_25,1.0-l9_25,fast::clamp(l9_27,0.0,1.0));
}
}
l9_12.x=l9_23;
float l9_28=l9_12.y;
int l9_29=l9_15.y;
if (l9_29==1)
{
l9_28=fract(l9_28);
}
else
{
if (l9_29==2)
{
float l9_30=fract(l9_28);
float l9_31=l9_28-l9_30;
float l9_32=step(0.25,fract(l9_31*0.5));
l9_28=mix(l9_30,1.0-l9_30,fast::clamp(l9_32,0.0,1.0));
}
}
l9_12.y=l9_28;
if (l9_16)
{
bool l9_33=l9_18;
bool l9_34;
if (l9_33)
{
l9_34=l9_15.x==3;
}
else
{
l9_34=l9_33;
}
float l9_35=l9_12.x;
float l9_36=l9_17.x;
float l9_37=l9_17.z;
bool l9_38=l9_34;
float l9_39=l9_22;
float l9_40=fast::clamp(l9_35,l9_36,l9_37);
float l9_41=step(abs(l9_35-l9_40),9.9999997e-06);
l9_39*=(l9_41+((1.0-float(l9_38))*(1.0-l9_41)));
l9_35=l9_40;
l9_12.x=l9_35;
l9_22=l9_39;
bool l9_42=l9_18;
bool l9_43;
if (l9_42)
{
l9_43=l9_15.y==3;
}
else
{
l9_43=l9_42;
}
float l9_44=l9_12.y;
float l9_45=l9_17.y;
float l9_46=l9_17.w;
bool l9_47=l9_43;
float l9_48=l9_22;
float l9_49=fast::clamp(l9_44,l9_45,l9_46);
float l9_50=step(abs(l9_44-l9_49),9.9999997e-06);
l9_48*=(l9_50+((1.0-float(l9_47))*(1.0-l9_50)));
l9_44=l9_49;
l9_12.y=l9_44;
l9_22=l9_48;
}
float2 l9_51=l9_12;
bool l9_52=l9_13;
float3x3 l9_53=l9_14;
if (l9_52)
{
l9_51=float2((l9_53*float3(l9_51,1.0)).xy);
}
float2 l9_54=l9_51;
l9_12=l9_54;
float l9_55=l9_12.x;
int l9_56=l9_15.x;
bool l9_57=l9_21;
float l9_58=l9_22;
if ((l9_56==0)||(l9_56==3))
{
float l9_59=l9_55;
float l9_60=0.0;
float l9_61=1.0;
bool l9_62=l9_57;
float l9_63=l9_58;
float l9_64=fast::clamp(l9_59,l9_60,l9_61);
float l9_65=step(abs(l9_59-l9_64),9.9999997e-06);
l9_63*=(l9_65+((1.0-float(l9_62))*(1.0-l9_65)));
l9_59=l9_64;
l9_55=l9_59;
l9_58=l9_63;
}
l9_12.x=l9_55;
l9_22=l9_58;
float l9_66=l9_12.y;
int l9_67=l9_15.y;
bool l9_68=l9_21;
float l9_69=l9_22;
if ((l9_67==0)||(l9_67==3))
{
float l9_70=l9_66;
float l9_71=0.0;
float l9_72=1.0;
bool l9_73=l9_68;
float l9_74=l9_69;
float l9_75=fast::clamp(l9_70,l9_71,l9_72);
float l9_76=step(abs(l9_70-l9_75),9.9999997e-06);
l9_74*=(l9_76+((1.0-float(l9_73))*(1.0-l9_76)));
l9_70=l9_75;
l9_66=l9_70;
l9_69=l9_74;
}
l9_12.y=l9_66;
l9_22=l9_69;
float2 l9_77=l9_12;
int l9_78=l9_10;
int l9_79=l9_11;
float l9_80=l9_20;
float2 l9_81=l9_77;
int l9_82=l9_78;
int l9_83=l9_79;
float3 l9_84=float3(0.0);
if (l9_82==0)
{
l9_84=float3(l9_81,0.0);
}
else
{
if (l9_82==1)
{
l9_84=float3(l9_81.x,(l9_81.y*0.5)+(0.5-(float(l9_83)*0.5)),0.0);
}
else
{
l9_84=float3(l9_81,float(l9_83));
}
}
float3 l9_85=l9_84;
float3 l9_86=l9_85;
float4 l9_87=sizeRampTexture.sample(sizeRampTextureSmpSC,l9_86.xy,level(l9_80));
float4 l9_88=l9_87;
if (l9_18)
{
l9_88=mix(l9_19,l9_88,float4(l9_22));
}
float4 l9_89=l9_88;
l9_3=l9_89;
float4 l9_90=l9_3;
float3 sizeRampTex=l9_90.xyz;
sizeLife=sizeRampTex*psizeStart;
if ((int(ENABLE_SIZERAMPSTARTENDASBOUNDS_tmp)!=0))
{
sizeLife=mix(psizeEnd,psizeStart,sizeRampTex);
}
}
return sizeLife;
}
vertex main_vert_out main_vert(main_vert_in in [[stage_in]],constant sc_Set0& sc_set0 [[buffer(0)]],uint gl_InstanceIndex [[instance_id]])
{
main_vert_out out={};
int ssInstanceID=0;
float3 N126_PositionIn=float3(0.0);
float N126_Mask=0.0;
float3 N126_PositionOut=float3(0.0);
bool N181_isTrailCondition=false;
float N181_timeGlobal=0.0;
bool N181_ENABLE_EXTERNALTIME=false;
float N181_externalTime=0.0;
bool N181_ENABLE_WORLDPOSSEED=false;
float N181_externalSeed=0.0;
bool N181_ENABLE_LIFETIMEMINMAX=false;
float N181_lifeTimeConstant=0.0;
float2 N181_lifeTimeMinMax=float2(0.0);
bool N181_ENABLE_INSTANTSPAWN=false;
bool N181_ENABLE_CONSTANTSPAWN=false;
bool N181_ENABLE_PREWARM=false;
float N181_spawnDuration=0.0;
bool N181_ENABLE_TRAILS=false;
float N181_trailLength=0.0;
bool N181_ENABLE_INDEPENDENTTRAIL=false;
float3 N181_particleSeed=float3(0.0);
float N181_globalSeed=0.0;
float N181_particleAlive=0.0;
float4 N181_timeValues=float4(0.0);
float N181_isTrail=0.0;
float2 N181_trailHeadTime=float2(0.0);
int N128_SphereType=0;
float N128_Radius=0.0;
float3 N128_Scale=float3(0.0);
float3 N128_Center=float3(0.0);
float N128_VolumeFill=0.0;
float3 N128_Result=float3(0.0);
float3 N137_Scale=float3(0.0);
float3 N137_Center=float3(0.0);
float N137_VolumeFill=0.0;
float3 N137_Result=float3(0.0);
int N144_OrientationAxis=0;
float N144_Radius=0.0;
float N144_startRad=0.0;
float N144_endRad=0.0;
float N144_Height=0.0;
float2 N144_ArcAngles=float2(0.0);
float3 N144_Scale=float3(0.0);
float3 N144_Center=float3(0.0);
float N144_VolumeFill=0.0;
float3 N144_Result=float3(0.0);
int N149_Axis=0;
float N149_InnerRadius=0.0;
float N149_OuterRadius=0.0;
float2 N149_ArcAngles=float2(0.0);
float3 N149_Scale=float3(0.0);
float3 N149_Center=float3(0.0);
float N149_VolumeFill=0.0;
float3 N149_Result=float3(0.0);
float3 N235_gridSize=float3(0.0);
float3 N235_gridDim=float3(0.0);
float3 N235_Offset=float3(0.0);
float3 N235_Result=float3(0.0);
int N155_alignHeight=0;
bool N155_curvThickEnable=false;
int N155_OrientationAxis=0;
bool N155_animPath=false;
bool N155_randSpeed=false;
float N155_startRad=0.0;
float N155_endRad=0.0;
float N155_heightPerTurn=0.0;
float N155_thicknessRad=0.0;
float N155_VolumeFill=0.0;
float N155_nTurns=0.0;
float N155_Speed=0.0;
float2 N155_SpeedMinMax=float2(0.0);
float4 N155_timeValuesIn=float4(0.0);
float3 N155_Result=float3(0.0);
bool N319_animPath=false;
bool N319_randSpeed=false;
bool N319_curvThickEnable=false;
float N319_Scale=0.0;
float3 N319_scaleXYZ=float3(0.0);
float4 N319_timeValuesIn=float4(0.0);
float N319_Speed=0.0;
float2 N319_SpeedMinMax=float2(0.0);
float N319_thicknessRad=0.0;
float N319_VolumeFill=0.0;
float N319_res=0.0;
float3 N319_Result=float3(0.0);
int N267_Seed=0;
int N267_pushMetod=0;
float N267_Depth=0.0;
float2 N267_Expand=float2(0.0);
float2 N267_Offset=float2(0.0);
float N267_Thickness=0.0;
float N267_Push=0.0;
float3 N267_Result=float3(0.0);
bool N223_OnOff=false;
float3 N223_ParticleSpawnPosition=float3(0.0);
float3 N223_ParticleSeed=float3(0.0);
float N223_Strength=0.0;
float3 N223_ForceOrigin=float3(0.0);
float3 N223_CustomForce=float3(0.0);
bool N202_OnOff=false;
float3 N202_ParticleSpawnPosition=float3(0.0);
float3 N202_ScaleTexture=float3(0.0);
float3 N202_ScrollSpeed=float3(0.0);
float3 N202_Strength=float3(0.0);
float3 N202_CustomForce=float3(0.0);
bool N277_isTrail=false;
bool N277_OnOff=false;
float3 N277_helixDir=float3(0.0);
float3 N277_curveDir=float3(0.0);
float3 N277_Strength=float3(0.0);
int N277_Path=0;
float3 N277_DirectionForce=float3(0.0);
float3 N277_Direction=float3(0.0);
bool N111_isTrail=false;
bool N111_ENABLE_IGNOREVEL=false;
bool N111_ENABLE_IGNORETRANSFORMSCALE=false;
bool N111_ENABLE_CENTER_IN_BBOX=false;
float3 N111_particleSeedIn=float3(0.0);
float N111_globalSeedIn=0.0;
float N111_particleAlive=0.0;
float4 N111_timeValuesIn=float4(0.0);
float2 N111_trailHeadTime=float2(0.0);
float2 N111_taper=float2(0.0);
float N111_trailSizeMult=0.0;
float3 N111_positionObjectSpace=float3(0.0);
float3 N111_normalObjectSpace=float3(0.0);
float3 N111_spawnLocation=float3(0.0);
float3 N111_spawnBox=float3(0.0);
float3 N111_spawnSphere=float3(0.0);
float3 N111_noiseMult=float3(0.0);
float3 N111_noiseFrequency=float3(0.0);
float3 N111_sNoiseMult=float3(0.0);
float3 N111_sNoiseFrequency=float3(0.0);
float3 N111_velocityMin=float3(0.0);
float3 N111_velocityMax=float3(0.0);
float3 N111_velocityDrag=float3(0.0);
float2 N111_sizeStart=float2(0.0);
float2 N111_sizeEnd=float2(0.0);
float2 N111_sizeStartMax=float2(0.0);
float2 N111_sizeEndMax=float2(0.0);
float3 N111_sizeStart3D=float3(0.0);
float3 N111_sizeEnd3D=float3(0.0);
float3 N111_sizeStartMax3D=float3(0.0);
float3 N111_sizeEndMax3D=float3(0.0);
float N111_sizeSpeed=0.0;
float N111_gravity=0.0;
float3 N111_localForce=float3(0.0);
float N111_sizeVelScale=0.0;
float2 N111_velScaleMinMax=float2(0.0);
float2 N111_rotationRandom=float2(0.0);
float2 N111_rotationRate=float2(0.0);
float2 N111_rotationRandomX=float2(0.0);
float2 N111_rotationRateX=float2(0.0);
float2 N111_rotationRandomY=float2(0.0);
float2 N111_rotationRateY=float2(0.0);
float2 N111_rotationRandomZ=float2(0.0);
float2 N111_rotationRateZ=float2(0.0);
float N111_rotationDrag=0.0;
float3 N111_ScaleDisplace=float3(0.0);
float3 N111_ScrollSpeedDisplace=float3(0.0);
float3 N111_DisplaceStrength=float3(0.0);
float3 N111_AxisOrbit=float3(0.0);
float3 N111_CenterOrbit=float3(0.0);
float2 N111_MinMaxOrbitAngle=float2(0.0);
float2 N111_MinMaxOrbitSpeed=float2(0.0);
float N111_fadeDistanceVisible=0.0;
float N111_fadeDistanceInvisible=0.0;
float3 N111_tangentIN=float3(0.0);
float3 N111_particleSeed=float3(0.0);
float N111_globalSeed=0.0;
float4 N111_timeValues=float4(0.0);
float4 N111_cameraFade_trailHeadTime_taper=float4(0.0);
float3 N111_position=float3(0.0);
float3 N111_normal=float3(0.0);
float3 N111_particleSpawnPosition=float3(0.0);
bool N150_circularMask=false;
bool N150_squareMask=false;
float2 N150_screenUV=float2(0.0);
float N150_maskThreshold=0.0;
float N150_maskFeather=0.0;
float N150_maskOut=0.0;
float3 N123_particlePosition=float3(0.0);
float2 N123_ScreenUV=float2(0.0);
out.PreviewVertexColor=float4(0.5);
ssPreviewInfo PreviewInfo;
PreviewInfo.Color=float4(0.5);
PreviewInfo.Saved=false;
out.PreviewVertexSaved=0.0;
sc_Vertex_t l9_0;
l9_0.position=in.position;
l9_0.normal=in.normal;
l9_0.tangent=in.tangent.xyz;
l9_0.texture0=in.texture0;
l9_0.texture1=in.texture1;
sc_Vertex_t l9_1=l9_0;
sc_Vertex_t param=l9_1;
ssGlobals tempGlobals;
if ((int(sc_Voxelization_tmp)!=0))
{
sc_Vertex_t l9_2=param;
param=l9_2;
}
int l9_3=gl_InstanceIndex;
ssInstanceID=l9_3;
sc_Vertex_t l9_4=param;
if ((int(sc_VertexBlending_tmp)!=0))
{
if ((int(sc_VertexBlendingUseNormals_tmp)!=0))
{
sc_Vertex_t l9_5=l9_4;
float3 l9_6=in.blendShape0Pos;
float3 l9_7=in.blendShape0Normal;
float l9_8=(*sc_set0.UserUniforms).weights0.x;
sc_Vertex_t l9_9=l9_5;
float3 l9_10=l9_6;
float l9_11=l9_8;
float3 l9_12=l9_9.position.xyz+(l9_10*l9_11);
l9_9.position=float4(l9_12.x,l9_12.y,l9_12.z,l9_9.position.w);
l9_5=l9_9;
l9_5.normal+=(l9_7*l9_8);
l9_4=l9_5;
sc_Vertex_t l9_13=l9_4;
float3 l9_14=in.blendShape1Pos;
float3 l9_15=in.blendShape1Normal;
float l9_16=(*sc_set0.UserUniforms).weights0.y;
sc_Vertex_t l9_17=l9_13;
float3 l9_18=l9_14;
float l9_19=l9_16;
float3 l9_20=l9_17.position.xyz+(l9_18*l9_19);
l9_17.position=float4(l9_20.x,l9_20.y,l9_20.z,l9_17.position.w);
l9_13=l9_17;
l9_13.normal+=(l9_15*l9_16);
l9_4=l9_13;
sc_Vertex_t l9_21=l9_4;
float3 l9_22=in.blendShape2Pos;
float3 l9_23=in.blendShape2Normal;
float l9_24=(*sc_set0.UserUniforms).weights0.z;
sc_Vertex_t l9_25=l9_21;
float3 l9_26=l9_22;
float l9_27=l9_24;
float3 l9_28=l9_25.position.xyz+(l9_26*l9_27);
l9_25.position=float4(l9_28.x,l9_28.y,l9_28.z,l9_25.position.w);
l9_21=l9_25;
l9_21.normal+=(l9_23*l9_24);
l9_4=l9_21;
}
else
{
sc_Vertex_t l9_29=l9_4;
float3 l9_30=in.blendShape0Pos;
float l9_31=(*sc_set0.UserUniforms).weights0.x;
float3 l9_32=l9_29.position.xyz+(l9_30*l9_31);
l9_29.position=float4(l9_32.x,l9_32.y,l9_32.z,l9_29.position.w);
l9_4=l9_29;
sc_Vertex_t l9_33=l9_4;
float3 l9_34=in.blendShape1Pos;
float l9_35=(*sc_set0.UserUniforms).weights0.y;
float3 l9_36=l9_33.position.xyz+(l9_34*l9_35);
l9_33.position=float4(l9_36.x,l9_36.y,l9_36.z,l9_33.position.w);
l9_4=l9_33;
sc_Vertex_t l9_37=l9_4;
float3 l9_38=in.blendShape2Pos;
float l9_39=(*sc_set0.UserUniforms).weights0.z;
float3 l9_40=l9_37.position.xyz+(l9_38*l9_39);
l9_37.position=float4(l9_40.x,l9_40.y,l9_40.z,l9_37.position.w);
l9_4=l9_37;
sc_Vertex_t l9_41=l9_4;
float3 l9_42=in.blendShape3Pos;
float l9_43=(*sc_set0.UserUniforms).weights0.w;
float3 l9_44=l9_41.position.xyz+(l9_42*l9_43);
l9_41.position=float4(l9_44.x,l9_44.y,l9_44.z,l9_41.position.w);
l9_4=l9_41;
sc_Vertex_t l9_45=l9_4;
float3 l9_46=in.blendShape4Pos;
float l9_47=(*sc_set0.UserUniforms).weights1.x;
float3 l9_48=l9_45.position.xyz+(l9_46*l9_47);
l9_45.position=float4(l9_48.x,l9_48.y,l9_48.z,l9_45.position.w);
l9_4=l9_45;
sc_Vertex_t l9_49=l9_4;
float3 l9_50=in.blendShape5Pos;
float l9_51=(*sc_set0.UserUniforms).weights1.y;
float3 l9_52=l9_49.position.xyz+(l9_50*l9_51);
l9_49.position=float4(l9_52.x,l9_52.y,l9_52.z,l9_49.position.w);
l9_4=l9_49;
}
}
param=l9_4;
sc_Vertex_t l9_53=param;
if (sc_SkinBonesCount_tmp>0)
{
float4 l9_54=float4(0.0);
if (sc_SkinBonesCount_tmp>0)
{
l9_54=float4(1.0,fract(in.boneData.yzw));
l9_54.x-=dot(l9_54.yzw,float3(1.0));
}
float4 l9_55=l9_54;
float4 l9_56=l9_55;
int l9_57=int(in.boneData.x);
int l9_58=int(in.boneData.y);
int l9_59=int(in.boneData.z);
int l9_60=int(in.boneData.w);
int l9_61=l9_57;
float4 l9_62=l9_53.position;
float3 l9_63=float3(0.0);
if (sc_SkinBonesCount_tmp>0)
{
int l9_64=l9_61;
float4 l9_65=(*sc_set0.sc_BonesUBO).sc_Bones[l9_64].boneMatrix[0];
float4 l9_66=(*sc_set0.sc_BonesUBO).sc_Bones[l9_64].boneMatrix[1];
float4 l9_67=(*sc_set0.sc_BonesUBO).sc_Bones[l9_64].boneMatrix[2];
float4 l9_68[3];
l9_68[0]=l9_65;
l9_68[1]=l9_66;
l9_68[2]=l9_67;
l9_63=float3(dot(l9_62,l9_68[0]),dot(l9_62,l9_68[1]),dot(l9_62,l9_68[2]));
}
else
{
l9_63=l9_62.xyz;
}
float3 l9_69=l9_63;
float3 l9_70=l9_69;
float l9_71=l9_56.x;
int l9_72=l9_58;
float4 l9_73=l9_53.position;
float3 l9_74=float3(0.0);
if (sc_SkinBonesCount_tmp>0)
{
int l9_75=l9_72;
float4 l9_76=(*sc_set0.sc_BonesUBO).sc_Bones[l9_75].boneMatrix[0];
float4 l9_77=(*sc_set0.sc_BonesUBO).sc_Bones[l9_75].boneMatrix[1];
float4 l9_78=(*sc_set0.sc_BonesUBO).sc_Bones[l9_75].boneMatrix[2];
float4 l9_79[3];
l9_79[0]=l9_76;
l9_79[1]=l9_77;
l9_79[2]=l9_78;
l9_74=float3(dot(l9_73,l9_79[0]),dot(l9_73,l9_79[1]),dot(l9_73,l9_79[2]));
}
else
{
l9_74=l9_73.xyz;
}
float3 l9_80=l9_74;
float3 l9_81=l9_80;
float l9_82=l9_56.y;
int l9_83=l9_59;
float4 l9_84=l9_53.position;
float3 l9_85=float3(0.0);
if (sc_SkinBonesCount_tmp>0)
{
int l9_86=l9_83;
float4 l9_87=(*sc_set0.sc_BonesUBO).sc_Bones[l9_86].boneMatrix[0];
float4 l9_88=(*sc_set0.sc_BonesUBO).sc_Bones[l9_86].boneMatrix[1];
float4 l9_89=(*sc_set0.sc_BonesUBO).sc_Bones[l9_86].boneMatrix[2];
float4 l9_90[3];
l9_90[0]=l9_87;
l9_90[1]=l9_88;
l9_90[2]=l9_89;
l9_85=float3(dot(l9_84,l9_90[0]),dot(l9_84,l9_90[1]),dot(l9_84,l9_90[2]));
}
else
{
l9_85=l9_84.xyz;
}
float3 l9_91=l9_85;
float3 l9_92=l9_91;
float l9_93=l9_56.z;
int l9_94=l9_60;
float4 l9_95=l9_53.position;
float3 l9_96=float3(0.0);
if (sc_SkinBonesCount_tmp>0)
{
int l9_97=l9_94;
float4 l9_98=(*sc_set0.sc_BonesUBO).sc_Bones[l9_97].boneMatrix[0];
float4 l9_99=(*sc_set0.sc_BonesUBO).sc_Bones[l9_97].boneMatrix[1];
float4 l9_100=(*sc_set0.sc_BonesUBO).sc_Bones[l9_97].boneMatrix[2];
float4 l9_101[3];
l9_101[0]=l9_98;
l9_101[1]=l9_99;
l9_101[2]=l9_100;
l9_96=float3(dot(l9_95,l9_101[0]),dot(l9_95,l9_101[1]),dot(l9_95,l9_101[2]));
}
else
{
l9_96=l9_95.xyz;
}
float3 l9_102=l9_96;
float3 l9_103=(((l9_70*l9_71)+(l9_81*l9_82))+(l9_92*l9_93))+(l9_102*l9_56.w);
l9_53.position=float4(l9_103.x,l9_103.y,l9_103.z,l9_53.position.w);
int l9_104=l9_57;
float3x3 l9_105=float3x3(float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_104].normalMatrix[0].xyz),float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_104].normalMatrix[1].xyz),float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_104].normalMatrix[2].xyz));
float3x3 l9_106=l9_105;
float3x3 l9_107=l9_106;
int l9_108=l9_58;
float3x3 l9_109=float3x3(float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_108].normalMatrix[0].xyz),float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_108].normalMatrix[1].xyz),float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_108].normalMatrix[2].xyz));
float3x3 l9_110=l9_109;
float3x3 l9_111=l9_110;
int l9_112=l9_59;
float3x3 l9_113=float3x3(float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_112].normalMatrix[0].xyz),float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_112].normalMatrix[1].xyz),float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_112].normalMatrix[2].xyz));
float3x3 l9_114=l9_113;
float3x3 l9_115=l9_114;
int l9_116=l9_60;
float3x3 l9_117=float3x3(float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_116].normalMatrix[0].xyz),float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_116].normalMatrix[1].xyz),float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_116].normalMatrix[2].xyz));
float3x3 l9_118=l9_117;
float3x3 l9_119=l9_118;
l9_53.normal=((((l9_107*l9_53.normal)*l9_56.x)+((l9_111*l9_53.normal)*l9_56.y))+((l9_115*l9_53.normal)*l9_56.z))+((l9_119*l9_53.normal)*l9_56.w);
l9_53.tangent=((((l9_107*l9_53.tangent)*l9_56.x)+((l9_111*l9_53.tangent)*l9_56.y))+((l9_115*l9_53.tangent)*l9_56.z))+((l9_119*l9_53.tangent)*l9_56.w);
}
param=l9_53;
if (sc_RenderingSpace_tmp==3)
{
out.varPosAndMotion=float4(float3(0.0).x,float3(0.0).y,float3(0.0).z,out.varPosAndMotion.w);
out.varNormalAndMotion=float4(param.normal.x,param.normal.y,param.normal.z,out.varNormalAndMotion.w);
out.varTangent=float4(param.tangent.x,param.tangent.y,param.tangent.z,out.varTangent.w);
}
else
{
if (sc_RenderingSpace_tmp==4)
{
out.varPosAndMotion=float4(float3(0.0).x,float3(0.0).y,float3(0.0).z,out.varPosAndMotion.w);
out.varNormalAndMotion=float4(param.normal.x,param.normal.y,param.normal.z,out.varNormalAndMotion.w);
out.varTangent=float4(param.tangent.x,param.tangent.y,param.tangent.z,out.varTangent.w);
}
else
{
if (sc_RenderingSpace_tmp==2)
{
out.varPosAndMotion=float4(param.position.xyz.x,param.position.xyz.y,param.position.xyz.z,out.varPosAndMotion.w);
out.varNormalAndMotion=float4(param.normal.x,param.normal.y,param.normal.z,out.varNormalAndMotion.w);
out.varTangent=float4(param.tangent.x,param.tangent.y,param.tangent.z,out.varTangent.w);
}
else
{
if (sc_RenderingSpace_tmp==1)
{
float3 l9_120=((*sc_set0.UserUniforms).sc_ModelMatrix*param.position).xyz;
out.varPosAndMotion=float4(l9_120.x,l9_120.y,l9_120.z,out.varPosAndMotion.w);
float3 l9_121=(*sc_set0.UserUniforms).sc_NormalMatrix*param.normal;
out.varNormalAndMotion=float4(l9_121.x,l9_121.y,l9_121.z,out.varNormalAndMotion.w);
float3 l9_122=(*sc_set0.UserUniforms).sc_NormalMatrix*param.tangent;
out.varTangent=float4(l9_122.x,l9_122.y,l9_122.z,out.varTangent.w);
}
}
}
}
if ((*sc_set0.UserUniforms).PreviewEnabled==1)
{
param.texture0.x=1.0-param.texture0.x;
}
out.varColor=in.color;
sc_Vertex_t v=param;
ssGlobals Globals;
Globals.gTimeElapsed=(*sc_set0.UserUniforms).sc_Time.x;
Globals.gTimeDelta=(*sc_set0.UserUniforms).sc_Time.y;
Globals.Surface_UVCoord0=v.texture0;
Globals.VertexColor=out.varColor;
Globals.SurfacePosition_ObjectSpace=((*sc_set0.UserUniforms).sc_ModelMatrixInverse*float4(out.varPosAndMotion.xyz,1.0)).xyz;
Globals.VertexNormal_WorldSpace=out.varNormalAndMotion.xyz;
Globals.VertexNormal_ObjectSpace=normalize(((*sc_set0.UserUniforms).sc_ModelMatrixInverse*float4(Globals.VertexNormal_WorldSpace,0.0)).xyz);
int l9_123=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_123=0;
}
else
{
l9_123=gl_InstanceIndex%2;
}
int l9_124=l9_123;
Globals.CameraFOV=(atan(1.0/(*sc_set0.UserUniforms).sc_ProjectionMatrixArray[l9_124][1].y)*2.0)*57.29578;
Globals.gInstanceID=float(ssInstanceID);
float l9_125;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_125=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_125=0.0;
}
Globals.gInstanceRatio=l9_125;
float3 WorldPosition=out.varPosAndMotion.xyz;
float3 WorldNormal=out.varNormalAndMotion.xyz;
float3 WorldTangent=out.varTangent.xyz;
float3 position_N111=float3(0.0);
float3 particleSpawnPosition_N111=float3(0.0);
ssGlobals param_3=Globals;
tempGlobals=param_3;
float3 param_1=float3(0.0);
float3 param_2=float3(0.0);
float3 l9_126=float3(0.0);
float l9_127=0.0;
float l9_128=(*sc_set0.UserUniforms).timeGlobal;
l9_127=l9_128;
float l9_129=0.0;
float l9_130=(*sc_set0.UserUniforms).externalTimeInput;
l9_129=l9_130;
float l9_131=0.0;
float l9_132=(*sc_set0.UserUniforms).externalSeed;
l9_131=l9_132;
float l9_133=0.0;
float l9_134=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_133=l9_134;
float2 l9_135=float2(0.0);
float2 l9_136=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_135=l9_136;
float l9_137=0.0;
float l9_138=(*sc_set0.UserUniforms).spawnDuration;
l9_137=l9_138;
float l9_139=0.0;
float l9_140;
if ((int(TRAILS_tmp)!=0))
{
l9_140=1.001;
}
else
{
l9_140=0.001;
}
l9_140-=0.001;
l9_139=l9_140;
float l9_141=0.0;
float l9_142=(*sc_set0.UserUniforms).trailLength;
l9_141=l9_142;
float4 l9_143=float4(0.0);
l9_143=tempGlobals.VertexColor;
float l9_144=0.0;
l9_144=l9_143.x;
float l9_145=0.0;
float l9_146=l9_139;
bool l9_147=(l9_146*1.0)!=0.0;
bool l9_148;
if (l9_147)
{
l9_148=(l9_144*1.0)!=0.0;
}
else
{
l9_148=l9_147;
}
l9_145=float(l9_148);
float3 l9_149=float3(0.0);
float l9_150=l9_127;
float l9_151=l9_129;
float l9_152=l9_131;
float l9_153=l9_133;
float2 l9_154=l9_135;
float l9_155=l9_137;
float l9_156=l9_141;
float l9_157=l9_145;
ssGlobals l9_158=tempGlobals;
tempGlobals=l9_158;
float3 l9_159=float3(0.0);
N181_timeGlobal=l9_150;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_151;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_152;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_153;
N181_lifeTimeMinMax=l9_154;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_155;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_156;
N181_isTrailCondition=l9_157!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_160=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_161=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_160=length(float4(1.0)*l9_161);
}
N181_globalSeed=N181_externalSeed+l9_160;
int l9_162=0;
l9_162=ssInstanceID;
int l9_163=l9_162;
float l9_164=float(l9_163);
int l9_165=int(l9_164);
int l9_166=l9_165^(l9_165*15299);
int l9_167=l9_166;
int l9_168=l9_167;
int l9_169=((l9_168*((l9_168*1471343)+101146501))+1559861749)&2147483647;
int l9_170=l9_169;
int l9_171=l9_167*1399;
int l9_172=((l9_171*((l9_171*1471343)+101146501))+1559861749)&2147483647;
int l9_173=l9_172;
int l9_174=l9_167*7177;
int l9_175=((l9_174*((l9_174*1471343)+101146501))+1559861749)&2147483647;
int l9_176=l9_175;
int l9_177=l9_170;
float l9_178=float(l9_177)*4.6566129e-10;
int l9_179=l9_173;
float l9_180=float(l9_179)*4.6566129e-10;
int l9_181=l9_176;
float l9_182=float(l9_181)*4.6566129e-10;
float3 l9_183=float3(l9_178,l9_180,l9_182);
float3 l9_184=l9_183;
N181_particleSeed=l9_184;
float l9_185=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_186;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_186=N181_lifeTimeMinMax;
}
else
{
l9_186=float2(N181_lifeTimeConstant);
}
float2 l9_187=l9_186;
float l9_188=fast::max(l9_187.x,0.0099999998);
float l9_189=fast::max(l9_187.y,0.0099999998);
float l9_190=tempGlobals.gTimeElapsed;
float l9_191=l9_190;
if (N181_ENABLE_EXTERNALTIME)
{
l9_191=N181_externalTime;
}
float l9_192=l9_191;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_192=N181_timeGlobal*l9_191;
}
else
{
float l9_193=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_193=N181_trailLength;
}
}
float l9_194=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_195=0.0;
float l9_196;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_196=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_196=0.0;
}
l9_195=l9_196;
float l9_197=l9_195;
int l9_198=0;
l9_198=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_199=l9_198;
l9_194=fast::max(l9_197*(1.0-(1.0/float(l9_199))),0.0);
}
else
{
l9_194=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_200=fract(((l9_191*N181_timeGlobal)*(1.0/(l9_187.y+l9_193)))+l9_194);
l9_192=l9_200*(l9_187.y+l9_193);
}
float l9_201=mix(l9_192/l9_188,l9_192/l9_189,l9_185);
float l9_202=fast::clamp(l9_201,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_192,l9_202);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_203=tempGlobals.Surface_UVCoord0;
l9_192-=(l9_203.y*N181_trailLength);
l9_201=mix(l9_192/l9_188,l9_192/l9_189,l9_185);
l9_202=fast::clamp(l9_201,0.0,1.0);
}
}
float l9_204=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_191-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_204=1.0;
}
}
}
float l9_205=l9_201+l9_204;
N181_particleAlive=1.0;
if ((l9_205>0.99989998)||(l9_192<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_191*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_187,l9_192,l9_202);
l9_159=N181_particleSeed;
l9_149=l9_159;
l9_126=l9_149;
float3 l9_206=l9_126;
N111_particleSeedIn=l9_206;
float l9_207=0.0;
float l9_208=0.0;
float l9_209=(*sc_set0.UserUniforms).timeGlobal;
l9_208=l9_209;
float l9_210=0.0;
float l9_211=(*sc_set0.UserUniforms).externalTimeInput;
l9_210=l9_211;
float l9_212=0.0;
float l9_213=(*sc_set0.UserUniforms).externalSeed;
l9_212=l9_213;
float l9_214=0.0;
float l9_215=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_214=l9_215;
float2 l9_216=float2(0.0);
float2 l9_217=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_216=l9_217;
float l9_218=0.0;
float l9_219=(*sc_set0.UserUniforms).spawnDuration;
l9_218=l9_219;
float l9_220=0.0;
float l9_221;
if ((int(TRAILS_tmp)!=0))
{
l9_221=1.001;
}
else
{
l9_221=0.001;
}
l9_221-=0.001;
l9_220=l9_221;
float l9_222=0.0;
float l9_223=(*sc_set0.UserUniforms).trailLength;
l9_222=l9_223;
float4 l9_224=float4(0.0);
l9_224=tempGlobals.VertexColor;
float l9_225=0.0;
l9_225=l9_224.x;
float l9_226=0.0;
float l9_227=l9_220;
bool l9_228=(l9_227*1.0)!=0.0;
bool l9_229;
if (l9_228)
{
l9_229=(l9_225*1.0)!=0.0;
}
else
{
l9_229=l9_228;
}
l9_226=float(l9_229);
float l9_230=0.0;
float l9_231=l9_208;
float l9_232=l9_210;
float l9_233=l9_212;
float l9_234=l9_214;
float2 l9_235=l9_216;
float l9_236=l9_218;
float l9_237=l9_222;
float l9_238=l9_226;
ssGlobals l9_239=tempGlobals;
tempGlobals=l9_239;
float l9_240=0.0;
N181_timeGlobal=l9_231;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_232;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_233;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_234;
N181_lifeTimeMinMax=l9_235;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_236;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_237;
N181_isTrailCondition=l9_238!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_241=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_242=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_241=length(float4(1.0)*l9_242);
}
N181_globalSeed=N181_externalSeed+l9_241;
int l9_243=0;
l9_243=ssInstanceID;
int l9_244=l9_243;
float l9_245=float(l9_244);
int l9_246=int(l9_245);
int l9_247=l9_246^(l9_246*15299);
int l9_248=l9_247;
int l9_249=l9_248;
int l9_250=((l9_249*((l9_249*1471343)+101146501))+1559861749)&2147483647;
int l9_251=l9_250;
int l9_252=l9_248*1399;
int l9_253=((l9_252*((l9_252*1471343)+101146501))+1559861749)&2147483647;
int l9_254=l9_253;
int l9_255=l9_248*7177;
int l9_256=((l9_255*((l9_255*1471343)+101146501))+1559861749)&2147483647;
int l9_257=l9_256;
int l9_258=l9_251;
float l9_259=float(l9_258)*4.6566129e-10;
int l9_260=l9_254;
float l9_261=float(l9_260)*4.6566129e-10;
int l9_262=l9_257;
float l9_263=float(l9_262)*4.6566129e-10;
float3 l9_264=float3(l9_259,l9_261,l9_263);
float3 l9_265=l9_264;
N181_particleSeed=l9_265;
float l9_266=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_267;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_267=N181_lifeTimeMinMax;
}
else
{
l9_267=float2(N181_lifeTimeConstant);
}
float2 l9_268=l9_267;
float l9_269=fast::max(l9_268.x,0.0099999998);
float l9_270=fast::max(l9_268.y,0.0099999998);
float l9_271=tempGlobals.gTimeElapsed;
float l9_272=l9_271;
if (N181_ENABLE_EXTERNALTIME)
{
l9_272=N181_externalTime;
}
float l9_273=l9_272;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_273=N181_timeGlobal*l9_272;
}
else
{
float l9_274=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_274=N181_trailLength;
}
}
float l9_275=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_276=0.0;
float l9_277;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_277=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_277=0.0;
}
l9_276=l9_277;
float l9_278=l9_276;
int l9_279=0;
l9_279=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_280=l9_279;
l9_275=fast::max(l9_278*(1.0-(1.0/float(l9_280))),0.0);
}
else
{
l9_275=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_281=fract(((l9_272*N181_timeGlobal)*(1.0/(l9_268.y+l9_274)))+l9_275);
l9_273=l9_281*(l9_268.y+l9_274);
}
float l9_282=mix(l9_273/l9_269,l9_273/l9_270,l9_266);
float l9_283=fast::clamp(l9_282,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_273,l9_283);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_284=tempGlobals.Surface_UVCoord0;
l9_273-=(l9_284.y*N181_trailLength);
l9_282=mix(l9_273/l9_269,l9_273/l9_270,l9_266);
l9_283=fast::clamp(l9_282,0.0,1.0);
}
}
float l9_285=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_272-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_285=1.0;
}
}
}
float l9_286=l9_282+l9_285;
N181_particleAlive=1.0;
if ((l9_286>0.99989998)||(l9_273<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_272*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_268,l9_273,l9_283);
l9_240=N181_globalSeed;
l9_230=l9_240;
l9_207=l9_230;
float l9_287=l9_207;
N111_globalSeedIn=l9_287;
float l9_288=0.0;
float l9_289=0.0;
float l9_290=(*sc_set0.UserUniforms).timeGlobal;
l9_289=l9_290;
float l9_291=0.0;
float l9_292=(*sc_set0.UserUniforms).externalTimeInput;
l9_291=l9_292;
float l9_293=0.0;
float l9_294=(*sc_set0.UserUniforms).externalSeed;
l9_293=l9_294;
float l9_295=0.0;
float l9_296=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_295=l9_296;
float2 l9_297=float2(0.0);
float2 l9_298=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_297=l9_298;
float l9_299=0.0;
float l9_300=(*sc_set0.UserUniforms).spawnDuration;
l9_299=l9_300;
float l9_301=0.0;
float l9_302;
if ((int(TRAILS_tmp)!=0))
{
l9_302=1.001;
}
else
{
l9_302=0.001;
}
l9_302-=0.001;
l9_301=l9_302;
float l9_303=0.0;
float l9_304=(*sc_set0.UserUniforms).trailLength;
l9_303=l9_304;
float4 l9_305=float4(0.0);
l9_305=tempGlobals.VertexColor;
float l9_306=0.0;
l9_306=l9_305.x;
float l9_307=0.0;
float l9_308=l9_301;
bool l9_309=(l9_308*1.0)!=0.0;
bool l9_310;
if (l9_309)
{
l9_310=(l9_306*1.0)!=0.0;
}
else
{
l9_310=l9_309;
}
l9_307=float(l9_310);
float l9_311=0.0;
float l9_312=l9_289;
float l9_313=l9_291;
float l9_314=l9_293;
float l9_315=l9_295;
float2 l9_316=l9_297;
float l9_317=l9_299;
float l9_318=l9_303;
float l9_319=l9_307;
ssGlobals l9_320=tempGlobals;
tempGlobals=l9_320;
float l9_321=0.0;
N181_timeGlobal=l9_312;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_313;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_314;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_315;
N181_lifeTimeMinMax=l9_316;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_317;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_318;
N181_isTrailCondition=l9_319!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_322=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_323=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_322=length(float4(1.0)*l9_323);
}
N181_globalSeed=N181_externalSeed+l9_322;
int l9_324=0;
l9_324=ssInstanceID;
int l9_325=l9_324;
float l9_326=float(l9_325);
int l9_327=int(l9_326);
int l9_328=l9_327^(l9_327*15299);
int l9_329=l9_328;
int l9_330=l9_329;
int l9_331=((l9_330*((l9_330*1471343)+101146501))+1559861749)&2147483647;
int l9_332=l9_331;
int l9_333=l9_329*1399;
int l9_334=((l9_333*((l9_333*1471343)+101146501))+1559861749)&2147483647;
int l9_335=l9_334;
int l9_336=l9_329*7177;
int l9_337=((l9_336*((l9_336*1471343)+101146501))+1559861749)&2147483647;
int l9_338=l9_337;
int l9_339=l9_332;
float l9_340=float(l9_339)*4.6566129e-10;
int l9_341=l9_335;
float l9_342=float(l9_341)*4.6566129e-10;
int l9_343=l9_338;
float l9_344=float(l9_343)*4.6566129e-10;
float3 l9_345=float3(l9_340,l9_342,l9_344);
float3 l9_346=l9_345;
N181_particleSeed=l9_346;
float l9_347=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_348;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_348=N181_lifeTimeMinMax;
}
else
{
l9_348=float2(N181_lifeTimeConstant);
}
float2 l9_349=l9_348;
float l9_350=fast::max(l9_349.x,0.0099999998);
float l9_351=fast::max(l9_349.y,0.0099999998);
float l9_352=tempGlobals.gTimeElapsed;
float l9_353=l9_352;
if (N181_ENABLE_EXTERNALTIME)
{
l9_353=N181_externalTime;
}
float l9_354=l9_353;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_354=N181_timeGlobal*l9_353;
}
else
{
float l9_355=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_355=N181_trailLength;
}
}
float l9_356=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_357=0.0;
float l9_358;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_358=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_358=0.0;
}
l9_357=l9_358;
float l9_359=l9_357;
int l9_360=0;
l9_360=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_361=l9_360;
l9_356=fast::max(l9_359*(1.0-(1.0/float(l9_361))),0.0);
}
else
{
l9_356=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_362=fract(((l9_353*N181_timeGlobal)*(1.0/(l9_349.y+l9_355)))+l9_356);
l9_354=l9_362*(l9_349.y+l9_355);
}
float l9_363=mix(l9_354/l9_350,l9_354/l9_351,l9_347);
float l9_364=fast::clamp(l9_363,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_354,l9_364);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_365=tempGlobals.Surface_UVCoord0;
l9_354-=(l9_365.y*N181_trailLength);
l9_363=mix(l9_354/l9_350,l9_354/l9_351,l9_347);
l9_364=fast::clamp(l9_363,0.0,1.0);
}
}
float l9_366=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_353-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_366=1.0;
}
}
}
float l9_367=l9_363+l9_366;
N181_particleAlive=1.0;
if ((l9_367>0.99989998)||(l9_354<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_353*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_349,l9_354,l9_364);
l9_321=N181_particleAlive;
l9_311=l9_321;
l9_288=l9_311;
float l9_368=l9_288;
N111_particleAlive=l9_368;
float4 l9_369=float4(0.0);
float l9_370=0.0;
float l9_371=(*sc_set0.UserUniforms).timeGlobal;
l9_370=l9_371;
float l9_372=0.0;
float l9_373=(*sc_set0.UserUniforms).externalTimeInput;
l9_372=l9_373;
float l9_374=0.0;
float l9_375=(*sc_set0.UserUniforms).externalSeed;
l9_374=l9_375;
float l9_376=0.0;
float l9_377=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_376=l9_377;
float2 l9_378=float2(0.0);
float2 l9_379=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_378=l9_379;
float l9_380=0.0;
float l9_381=(*sc_set0.UserUniforms).spawnDuration;
l9_380=l9_381;
float l9_382=0.0;
float l9_383;
if ((int(TRAILS_tmp)!=0))
{
l9_383=1.001;
}
else
{
l9_383=0.001;
}
l9_383-=0.001;
l9_382=l9_383;
float l9_384=0.0;
float l9_385=(*sc_set0.UserUniforms).trailLength;
l9_384=l9_385;
float4 l9_386=float4(0.0);
l9_386=tempGlobals.VertexColor;
float l9_387=0.0;
l9_387=l9_386.x;
float l9_388=0.0;
float l9_389=l9_382;
bool l9_390=(l9_389*1.0)!=0.0;
bool l9_391;
if (l9_390)
{
l9_391=(l9_387*1.0)!=0.0;
}
else
{
l9_391=l9_390;
}
l9_388=float(l9_391);
float4 l9_392=float4(0.0);
float l9_393=l9_370;
float l9_394=l9_372;
float l9_395=l9_374;
float l9_396=l9_376;
float2 l9_397=l9_378;
float l9_398=l9_380;
float l9_399=l9_384;
float l9_400=l9_388;
ssGlobals l9_401=tempGlobals;
tempGlobals=l9_401;
float4 l9_402=float4(0.0);
N181_timeGlobal=l9_393;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_394;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_395;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_396;
N181_lifeTimeMinMax=l9_397;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_398;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_399;
N181_isTrailCondition=l9_400!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_403=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_404=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_403=length(float4(1.0)*l9_404);
}
N181_globalSeed=N181_externalSeed+l9_403;
int l9_405=0;
l9_405=ssInstanceID;
int l9_406=l9_405;
float l9_407=float(l9_406);
int l9_408=int(l9_407);
int l9_409=l9_408^(l9_408*15299);
int l9_410=l9_409;
int l9_411=l9_410;
int l9_412=((l9_411*((l9_411*1471343)+101146501))+1559861749)&2147483647;
int l9_413=l9_412;
int l9_414=l9_410*1399;
int l9_415=((l9_414*((l9_414*1471343)+101146501))+1559861749)&2147483647;
int l9_416=l9_415;
int l9_417=l9_410*7177;
int l9_418=((l9_417*((l9_417*1471343)+101146501))+1559861749)&2147483647;
int l9_419=l9_418;
int l9_420=l9_413;
float l9_421=float(l9_420)*4.6566129e-10;
int l9_422=l9_416;
float l9_423=float(l9_422)*4.6566129e-10;
int l9_424=l9_419;
float l9_425=float(l9_424)*4.6566129e-10;
float3 l9_426=float3(l9_421,l9_423,l9_425);
float3 l9_427=l9_426;
N181_particleSeed=l9_427;
float l9_428=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_429;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_429=N181_lifeTimeMinMax;
}
else
{
l9_429=float2(N181_lifeTimeConstant);
}
float2 l9_430=l9_429;
float l9_431=fast::max(l9_430.x,0.0099999998);
float l9_432=fast::max(l9_430.y,0.0099999998);
float l9_433=tempGlobals.gTimeElapsed;
float l9_434=l9_433;
if (N181_ENABLE_EXTERNALTIME)
{
l9_434=N181_externalTime;
}
float l9_435=l9_434;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_435=N181_timeGlobal*l9_434;
}
else
{
float l9_436=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_436=N181_trailLength;
}
}
float l9_437=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_438=0.0;
float l9_439;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_439=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_439=0.0;
}
l9_438=l9_439;
float l9_440=l9_438;
int l9_441=0;
l9_441=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_442=l9_441;
l9_437=fast::max(l9_440*(1.0-(1.0/float(l9_442))),0.0);
}
else
{
l9_437=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_443=fract(((l9_434*N181_timeGlobal)*(1.0/(l9_430.y+l9_436)))+l9_437);
l9_435=l9_443*(l9_430.y+l9_436);
}
float l9_444=mix(l9_435/l9_431,l9_435/l9_432,l9_428);
float l9_445=fast::clamp(l9_444,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_435,l9_445);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_446=tempGlobals.Surface_UVCoord0;
l9_435-=(l9_446.y*N181_trailLength);
l9_444=mix(l9_435/l9_431,l9_435/l9_432,l9_428);
l9_445=fast::clamp(l9_444,0.0,1.0);
}
}
float l9_447=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_434-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_447=1.0;
}
}
}
float l9_448=l9_444+l9_447;
N181_particleAlive=1.0;
if ((l9_448>0.99989998)||(l9_435<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_434*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_430,l9_435,l9_445);
l9_402=N181_timeValues;
l9_392=l9_402;
l9_369=l9_392;
float4 l9_449=l9_369;
N111_timeValuesIn=l9_449;
float l9_450=0.0;
float l9_451=0.0;
float l9_452=(*sc_set0.UserUniforms).timeGlobal;
l9_451=l9_452;
float l9_453=0.0;
float l9_454=(*sc_set0.UserUniforms).externalTimeInput;
l9_453=l9_454;
float l9_455=0.0;
float l9_456=(*sc_set0.UserUniforms).externalSeed;
l9_455=l9_456;
float l9_457=0.0;
float l9_458=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_457=l9_458;
float2 l9_459=float2(0.0);
float2 l9_460=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_459=l9_460;
float l9_461=0.0;
float l9_462=(*sc_set0.UserUniforms).spawnDuration;
l9_461=l9_462;
float l9_463=0.0;
float l9_464;
if ((int(TRAILS_tmp)!=0))
{
l9_464=1.001;
}
else
{
l9_464=0.001;
}
l9_464-=0.001;
l9_463=l9_464;
float l9_465=0.0;
float l9_466=(*sc_set0.UserUniforms).trailLength;
l9_465=l9_466;
float4 l9_467=float4(0.0);
l9_467=tempGlobals.VertexColor;
float l9_468=0.0;
l9_468=l9_467.x;
float l9_469=0.0;
float l9_470=l9_463;
bool l9_471=(l9_470*1.0)!=0.0;
bool l9_472;
if (l9_471)
{
l9_472=(l9_468*1.0)!=0.0;
}
else
{
l9_472=l9_471;
}
l9_469=float(l9_472);
float l9_473=0.0;
float l9_474=l9_451;
float l9_475=l9_453;
float l9_476=l9_455;
float l9_477=l9_457;
float2 l9_478=l9_459;
float l9_479=l9_461;
float l9_480=l9_465;
float l9_481=l9_469;
ssGlobals l9_482=tempGlobals;
tempGlobals=l9_482;
float l9_483=0.0;
N181_timeGlobal=l9_474;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_475;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_476;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_477;
N181_lifeTimeMinMax=l9_478;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_479;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_480;
N181_isTrailCondition=l9_481!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_484=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_485=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_484=length(float4(1.0)*l9_485);
}
N181_globalSeed=N181_externalSeed+l9_484;
int l9_486=0;
l9_486=ssInstanceID;
int l9_487=l9_486;
float l9_488=float(l9_487);
int l9_489=int(l9_488);
int l9_490=l9_489^(l9_489*15299);
int l9_491=l9_490;
int l9_492=l9_491;
int l9_493=((l9_492*((l9_492*1471343)+101146501))+1559861749)&2147483647;
int l9_494=l9_493;
int l9_495=l9_491*1399;
int l9_496=((l9_495*((l9_495*1471343)+101146501))+1559861749)&2147483647;
int l9_497=l9_496;
int l9_498=l9_491*7177;
int l9_499=((l9_498*((l9_498*1471343)+101146501))+1559861749)&2147483647;
int l9_500=l9_499;
int l9_501=l9_494;
float l9_502=float(l9_501)*4.6566129e-10;
int l9_503=l9_497;
float l9_504=float(l9_503)*4.6566129e-10;
int l9_505=l9_500;
float l9_506=float(l9_505)*4.6566129e-10;
float3 l9_507=float3(l9_502,l9_504,l9_506);
float3 l9_508=l9_507;
N181_particleSeed=l9_508;
float l9_509=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_510;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_510=N181_lifeTimeMinMax;
}
else
{
l9_510=float2(N181_lifeTimeConstant);
}
float2 l9_511=l9_510;
float l9_512=fast::max(l9_511.x,0.0099999998);
float l9_513=fast::max(l9_511.y,0.0099999998);
float l9_514=tempGlobals.gTimeElapsed;
float l9_515=l9_514;
if (N181_ENABLE_EXTERNALTIME)
{
l9_515=N181_externalTime;
}
float l9_516=l9_515;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_516=N181_timeGlobal*l9_515;
}
else
{
float l9_517=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_517=N181_trailLength;
}
}
float l9_518=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_519=0.0;
float l9_520;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_520=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_520=0.0;
}
l9_519=l9_520;
float l9_521=l9_519;
int l9_522=0;
l9_522=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_523=l9_522;
l9_518=fast::max(l9_521*(1.0-(1.0/float(l9_523))),0.0);
}
else
{
l9_518=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_524=fract(((l9_515*N181_timeGlobal)*(1.0/(l9_511.y+l9_517)))+l9_518);
l9_516=l9_524*(l9_511.y+l9_517);
}
float l9_525=mix(l9_516/l9_512,l9_516/l9_513,l9_509);
float l9_526=fast::clamp(l9_525,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_516,l9_526);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_527=tempGlobals.Surface_UVCoord0;
l9_516-=(l9_527.y*N181_trailLength);
l9_525=mix(l9_516/l9_512,l9_516/l9_513,l9_509);
l9_526=fast::clamp(l9_525,0.0,1.0);
}
}
float l9_528=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_515-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_528=1.0;
}
}
}
float l9_529=l9_525+l9_528;
N181_particleAlive=1.0;
if ((l9_529>0.99989998)||(l9_516<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_515*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_511,l9_516,l9_526);
l9_483=N181_isTrail;
l9_473=l9_483;
l9_450=l9_473;
bool l9_530=l9_450!=0.0;
N111_isTrail=l9_530;
float2 l9_531=float2(0.0);
float l9_532=0.0;
float l9_533=(*sc_set0.UserUniforms).timeGlobal;
l9_532=l9_533;
float l9_534=0.0;
float l9_535=(*sc_set0.UserUniforms).externalTimeInput;
l9_534=l9_535;
float l9_536=0.0;
float l9_537=(*sc_set0.UserUniforms).externalSeed;
l9_536=l9_537;
float l9_538=0.0;
float l9_539=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_538=l9_539;
float2 l9_540=float2(0.0);
float2 l9_541=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_540=l9_541;
float l9_542=0.0;
float l9_543=(*sc_set0.UserUniforms).spawnDuration;
l9_542=l9_543;
float l9_544=0.0;
float l9_545;
if ((int(TRAILS_tmp)!=0))
{
l9_545=1.001;
}
else
{
l9_545=0.001;
}
l9_545-=0.001;
l9_544=l9_545;
float l9_546=0.0;
float l9_547=(*sc_set0.UserUniforms).trailLength;
l9_546=l9_547;
float4 l9_548=float4(0.0);
l9_548=tempGlobals.VertexColor;
float l9_549=0.0;
l9_549=l9_548.x;
float l9_550=0.0;
float l9_551=l9_544;
bool l9_552=(l9_551*1.0)!=0.0;
bool l9_553;
if (l9_552)
{
l9_553=(l9_549*1.0)!=0.0;
}
else
{
l9_553=l9_552;
}
l9_550=float(l9_553);
float2 l9_554=float2(0.0);
float l9_555=l9_532;
float l9_556=l9_534;
float l9_557=l9_536;
float l9_558=l9_538;
float2 l9_559=l9_540;
float l9_560=l9_542;
float l9_561=l9_546;
float l9_562=l9_550;
ssGlobals l9_563=tempGlobals;
tempGlobals=l9_563;
float2 l9_564=float2(0.0);
N181_timeGlobal=l9_555;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_556;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_557;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_558;
N181_lifeTimeMinMax=l9_559;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_560;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_561;
N181_isTrailCondition=l9_562!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_565=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_566=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_565=length(float4(1.0)*l9_566);
}
N181_globalSeed=N181_externalSeed+l9_565;
int l9_567=0;
l9_567=ssInstanceID;
int l9_568=l9_567;
float l9_569=float(l9_568);
int l9_570=int(l9_569);
int l9_571=l9_570^(l9_570*15299);
int l9_572=l9_571;
int l9_573=l9_572;
int l9_574=((l9_573*((l9_573*1471343)+101146501))+1559861749)&2147483647;
int l9_575=l9_574;
int l9_576=l9_572*1399;
int l9_577=((l9_576*((l9_576*1471343)+101146501))+1559861749)&2147483647;
int l9_578=l9_577;
int l9_579=l9_572*7177;
int l9_580=((l9_579*((l9_579*1471343)+101146501))+1559861749)&2147483647;
int l9_581=l9_580;
int l9_582=l9_575;
float l9_583=float(l9_582)*4.6566129e-10;
int l9_584=l9_578;
float l9_585=float(l9_584)*4.6566129e-10;
int l9_586=l9_581;
float l9_587=float(l9_586)*4.6566129e-10;
float3 l9_588=float3(l9_583,l9_585,l9_587);
float3 l9_589=l9_588;
N181_particleSeed=l9_589;
float l9_590=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_591;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_591=N181_lifeTimeMinMax;
}
else
{
l9_591=float2(N181_lifeTimeConstant);
}
float2 l9_592=l9_591;
float l9_593=fast::max(l9_592.x,0.0099999998);
float l9_594=fast::max(l9_592.y,0.0099999998);
float l9_595=tempGlobals.gTimeElapsed;
float l9_596=l9_595;
if (N181_ENABLE_EXTERNALTIME)
{
l9_596=N181_externalTime;
}
float l9_597=l9_596;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_597=N181_timeGlobal*l9_596;
}
else
{
float l9_598=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_598=N181_trailLength;
}
}
float l9_599=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_600=0.0;
float l9_601;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_601=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_601=0.0;
}
l9_600=l9_601;
float l9_602=l9_600;
int l9_603=0;
l9_603=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_604=l9_603;
l9_599=fast::max(l9_602*(1.0-(1.0/float(l9_604))),0.0);
}
else
{
l9_599=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_605=fract(((l9_596*N181_timeGlobal)*(1.0/(l9_592.y+l9_598)))+l9_599);
l9_597=l9_605*(l9_592.y+l9_598);
}
float l9_606=mix(l9_597/l9_593,l9_597/l9_594,l9_590);
float l9_607=fast::clamp(l9_606,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_597,l9_607);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_608=tempGlobals.Surface_UVCoord0;
l9_597-=(l9_608.y*N181_trailLength);
l9_606=mix(l9_597/l9_593,l9_597/l9_594,l9_590);
l9_607=fast::clamp(l9_606,0.0,1.0);
}
}
float l9_609=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_596-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_609=1.0;
}
}
}
float l9_610=l9_606+l9_609;
N181_particleAlive=1.0;
if ((l9_610>0.99989998)||(l9_597<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_596*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_592,l9_597,l9_607);
l9_564=N181_trailHeadTime;
l9_554=l9_564;
l9_531=l9_554;
float2 l9_611=l9_531;
N111_trailHeadTime=l9_611;
float2 l9_612=float2(0.0);
float2 l9_613=float2(0.0);
float2 l9_614=(*sc_set0.UserUniforms).trailTaper;
l9_613=l9_614;
l9_612=l9_613;
float2 l9_615=l9_612;
N111_taper=l9_615;
float l9_616=0.0;
float l9_617=0.0;
float l9_618=(*sc_set0.UserUniforms).trailWidth;
l9_617=l9_618;
l9_616=l9_617;
float l9_619=l9_616;
N111_trailSizeMult=l9_619;
float3 l9_620=float3(0.0);
float3 l9_621=float3(0.0);
l9_621=tempGlobals.SurfacePosition_ObjectSpace;
l9_620=l9_621;
float3 l9_622=l9_620;
N111_positionObjectSpace=l9_622;
float3 l9_623=float3(0.0);
float3 l9_624=float3(0.0);
l9_624=tempGlobals.VertexNormal_ObjectSpace;
l9_623=l9_624;
float3 l9_625=l9_623;
N111_normalObjectSpace=l9_625;
float3 l9_626=float3(0.0);
float3 l9_627=float3(0.0);
float3 l9_628=float3(0.0);
float3 l9_629=float3(0.0);
float3 l9_630=float3(0.0);
float3 l9_631=float3(0.0);
float3 l9_632=float3(0.0);
float3 l9_633=float3(0.0);
float3 l9_634=float3(0.0);
float3 l9_635=float3(0.0);
float3 l9_636=(*sc_set0.UserUniforms).Port_Default_N247;
ssGlobals l9_637=tempGlobals;
float3 l9_638;
if (NODE_248_DROPLIST_ITEM_tmp==0)
{
float l9_639=0.0;
float l9_640=(*sc_set0.UserUniforms).Tweak_N255;
l9_639=l9_640;
float l9_641=0.0;
float l9_642=(*sc_set0.UserUniforms).Tweak_N254;
l9_641=l9_642;
float3 l9_643=float3(0.0);
float3 l9_644=(*sc_set0.UserUniforms).Tweak_N252;
l9_643=l9_644;
float3 l9_645=float3(0.0);
float3 l9_646=(*sc_set0.UserUniforms).Tweak_N253;
l9_645=l9_646;
float l9_647=0.0;
float l9_648=(*sc_set0.UserUniforms).Tweak_N224;
l9_647=l9_648;
float3 l9_649=float3(0.0);
float l9_650=l9_639;
float l9_651=l9_641;
float3 l9_652=l9_643;
float3 l9_653=l9_645;
float l9_654=l9_647;
ssGlobals l9_655=l9_637;
tempGlobals=l9_655;
float3 l9_656=float3(0.0);
N128_SphereType=int(l9_650);
N128_Radius=l9_651;
N128_Scale=l9_652;
N128_Center=l9_653;
N128_VolumeFill=l9_654;
int l9_657=0;
l9_657=ssInstanceID;
int l9_658=l9_657;
float l9_659=float(l9_658);
int l9_660=int(l9_659);
int l9_661=l9_660^(l9_660*15299);
int l9_662=l9_661;
int l9_663=l9_662;
int l9_664=((l9_663*((l9_663*1471343)+101146501))+1559861749)&2147483647;
int l9_665=l9_664;
int l9_666=l9_662*1399;
int l9_667=((l9_666*((l9_666*1471343)+101146501))+1559861749)&2147483647;
int l9_668=l9_667;
int l9_669=l9_662*7177;
int l9_670=((l9_669*((l9_669*1471343)+101146501))+1559861749)&2147483647;
int l9_671=l9_670;
int l9_672=l9_665;
float l9_673=float(l9_672)*4.6566129e-10;
int l9_674=l9_668;
float l9_675=float(l9_674)*4.6566129e-10;
int l9_676=l9_671;
float l9_677=float(l9_676)*4.6566129e-10;
float3 l9_678=float3(l9_673,l9_675,l9_677);
float3 l9_679=l9_678;
float3 l9_680=l9_679;
int l9_681=0;
l9_681=ssInstanceID;
int l9_682=l9_681;
float l9_683=float(l9_682+1);
int l9_684=int(l9_683);
int l9_685=l9_684^(l9_684*15299);
int l9_686=l9_685;
int l9_687=l9_686;
int l9_688=((l9_687*((l9_687*1471343)+101146501))+1559861749)&2147483647;
int l9_689=l9_688;
int l9_690=l9_686*1399;
int l9_691=((l9_690*((l9_690*1471343)+101146501))+1559861749)&2147483647;
int l9_692=l9_691;
int l9_693=l9_686*7177;
int l9_694=((l9_693*((l9_693*1471343)+101146501))+1559861749)&2147483647;
int l9_695=l9_694;
int l9_696=l9_689;
float l9_697=float(l9_696)*4.6566129e-10;
int l9_698=l9_692;
float l9_699=float(l9_698)*4.6566129e-10;
int l9_700=l9_695;
float l9_701=float(l9_700)*4.6566129e-10;
float3 l9_702=float3(l9_697,l9_699,l9_701);
float3 l9_703=l9_702;
float3 l9_704=l9_703;
float l9_705=1.0-N128_VolumeFill;
float l9_706=3.0;
float l9_707;
if (l9_705<=0.0)
{
l9_707=0.0;
}
else
{
l9_707=pow(l9_705,l9_706);
}
float l9_708=l9_707;
float l9_709=l9_708;
l9_680=mix(float3(l9_709),float3(1.0),l9_680);
float3 l9_710=l9_680;
float l9_711;
if (l9_710.x<=0.0)
{
l9_711=0.0;
}
else
{
l9_711=sqrt(l9_710.x);
}
float l9_712=l9_711;
float l9_713;
if (l9_710.y<=0.0)
{
l9_713=0.0;
}
else
{
l9_713=sqrt(l9_710.y);
}
float l9_714=l9_713;
float l9_715;
if (l9_710.z<=0.0)
{
l9_715=0.0;
}
else
{
l9_715=sqrt(l9_710.z);
}
float3 l9_716=float3(l9_712,l9_714,l9_715);
l9_680=l9_716;
l9_704=mix(float3(-1.0),float3(1.0),l9_704);
l9_704/=float3(length(l9_704+float3(9.9999997e-05)));
float3 l9_717=((l9_680*l9_704)*N128_Scale)*(N128_Radius*0.5);
if (N128_SphereType==1)
{
l9_717.x=abs(l9_717.x);
}
else
{
if (N128_SphereType==2)
{
l9_717.y=abs(l9_717.y);
}
else
{
if (N128_SphereType==3)
{
l9_717.z=abs(l9_717.z);
}
}
}
l9_717+=N128_Center;
N128_Result=l9_717;
l9_656=N128_Result;
l9_649=l9_656;
l9_628=l9_649;
l9_638=l9_628;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==1)
{
float3 l9_718=float3(0.0);
float3 l9_719=(*sc_set0.UserUniforms).Tweak_N250;
l9_718=l9_719;
float3 l9_720=float3(0.0);
float3 l9_721=(*sc_set0.UserUniforms).Tweak_N251;
l9_720=l9_721;
float l9_722=0.0;
float l9_723=(*sc_set0.UserUniforms).volumeFill;
l9_722=l9_723;
float3 l9_724=float3(0.0);
float3 l9_725=l9_718;
float3 l9_726=l9_720;
float l9_727=l9_722;
ssGlobals l9_728=l9_637;
tempGlobals=l9_728;
float3 l9_729=float3(0.0);
N137_Scale=l9_725;
N137_Center=l9_726;
N137_VolumeFill=l9_727;
int l9_730=0;
l9_730=ssInstanceID;
int l9_731=l9_730;
float l9_732=float(l9_731);
float l9_733=mod(l9_732,8.0);
float l9_734=mod(l9_732,3.0);
float l9_735=l9_732;
int l9_736=int(l9_735);
int l9_737=l9_736^(l9_736*15299);
int l9_738=l9_737;
int l9_739=l9_738;
int l9_740=((l9_739*((l9_739*1471343)+101146501))+1559861749)&2147483647;
int l9_741=l9_740;
int l9_742=l9_738*1399;
int l9_743=((l9_742*((l9_742*1471343)+101146501))+1559861749)&2147483647;
int l9_744=l9_743;
int l9_745=l9_738*7177;
int l9_746=((l9_745*((l9_745*1471343)+101146501))+1559861749)&2147483647;
int l9_747=l9_746;
int l9_748=l9_741;
float l9_749=float(l9_748)*4.6566129e-10;
int l9_750=l9_744;
float l9_751=float(l9_750)*4.6566129e-10;
int l9_752=l9_747;
float l9_753=float(l9_752)*4.6566129e-10;
float3 l9_754=float3(l9_749,l9_751,l9_753);
float3 l9_755=l9_754;
float3 l9_756=l9_755;
float l9_757=1.0-N137_VolumeFill;
float l9_758=3.0;
float l9_759;
if (l9_757<=0.0)
{
l9_759=0.0;
}
else
{
l9_759=pow(l9_757,l9_758);
}
float l9_760=l9_759;
float l9_761=l9_760;
float3 l9_762;
if (l9_734==0.0)
{
l9_762=float3(l9_761,0.0,0.0);
}
else
{
float3 l9_763;
if (l9_734==1.0)
{
l9_763=float3(0.0,l9_761,0.0);
}
else
{
l9_763=float3(0.0,0.0,l9_761);
}
l9_762=l9_763;
}
float3 l9_764=l9_762;
float3 l9_765=mix(l9_764,float3(1.0),l9_756);
float3 l9_766;
if (l9_733==0.0)
{
l9_766=l9_765*float3(1.0);
}
else
{
float3 l9_767;
if (l9_733==1.0)
{
l9_767=l9_765*float3(-1.0,1.0,1.0);
}
else
{
float3 l9_768;
if (l9_733==2.0)
{
l9_768=l9_765*float3(-1.0,-1.0,1.0);
}
else
{
float3 l9_769;
if (l9_733==3.0)
{
l9_769=l9_765*float3(-1.0);
}
else
{
float3 l9_770;
if (l9_733==4.0)
{
l9_770=l9_765*float3(1.0,-1.0,-1.0);
}
else
{
float3 l9_771;
if (l9_733==5.0)
{
l9_771=l9_765*float3(1.0,1.0,-1.0);
}
else
{
float3 l9_772;
if (l9_733==6.0)
{
l9_772=l9_765*float3(-1.0,1.0,-1.0);
}
else
{
l9_772=l9_765*float3(1.0,-1.0,1.0);
}
l9_771=l9_772;
}
l9_770=l9_771;
}
l9_769=l9_770;
}
l9_768=l9_769;
}
l9_767=l9_768;
}
l9_766=l9_767;
}
float3 l9_773=l9_766;
float3 l9_774=l9_773;
float3 l9_775=l9_774*(N137_Scale*0.5);
l9_775+=N137_Center;
N137_Result=l9_775;
l9_729=N137_Result;
l9_724=l9_729;
l9_629=l9_724;
l9_638=l9_629;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==2)
{
float l9_776=0.0;
float l9_777=(*sc_set0.UserUniforms).Tweak_N238;
l9_776=l9_777;
float l9_778=0.0;
float l9_779=(*sc_set0.UserUniforms).Tweak_N16;
l9_778=l9_779;
float l9_780=0.0;
float l9_781=(*sc_set0.UserUniforms).Tweak_N234;
l9_780=l9_781;
float l9_782=0.0;
float l9_783=(*sc_set0.UserUniforms).Tweak_N239;
l9_782=l9_783;
float2 l9_784=float2(0.0);
float2 l9_785=(*sc_set0.UserUniforms).Tweak_N240;
l9_784=l9_785;
float3 l9_786=float3(0.0);
float3 l9_787=(*sc_set0.UserUniforms).Tweak_N241;
l9_786=l9_787;
float3 l9_788=float3(0.0);
float3 l9_789=(*sc_set0.UserUniforms).Tweak_N242;
l9_788=l9_789;
float l9_790=0.0;
float l9_791=(*sc_set0.UserUniforms).Tweak_N226;
l9_790=l9_791;
float l9_792=0.0;
float l9_793=(*sc_set0.UserUniforms).Tweak_N243;
l9_792=l9_793;
float3 l9_794=float3(0.0);
float l9_795=l9_776;
float l9_796=l9_778;
float l9_797=l9_780;
float l9_798=l9_782;
float2 l9_799=l9_784;
float3 l9_800=l9_786;
float3 l9_801=l9_788;
float l9_802=l9_790;
float l9_803=l9_792;
ssGlobals l9_804=l9_637;
tempGlobals=l9_804;
float3 l9_805=float3(0.0);
N144_Radius=l9_795;
N144_startRad=l9_796;
N144_endRad=l9_797;
N144_Height=l9_798;
N144_ArcAngles=l9_799;
N144_Scale=l9_800;
N144_Center=l9_801;
N144_VolumeFill=l9_802;
N144_OrientationAxis=int(l9_803);
int l9_806=0;
l9_806=ssInstanceID;
int l9_807=l9_806;
float l9_808=float(l9_807);
int l9_809=int(l9_808);
int l9_810=l9_809^(l9_809*15299);
int l9_811=l9_810;
int l9_812=l9_811;
int l9_813=((l9_812*((l9_812*1471343)+101146501))+1559861749)&2147483647;
int l9_814=l9_813;
int l9_815=l9_811*1399;
int l9_816=((l9_815*((l9_815*1471343)+101146501))+1559861749)&2147483647;
int l9_817=l9_816;
int l9_818=l9_811*7177;
int l9_819=((l9_818*((l9_818*1471343)+101146501))+1559861749)&2147483647;
int l9_820=l9_819;
int l9_821=l9_814;
float l9_822=float(l9_821)*4.6566129e-10;
int l9_823=l9_817;
float l9_824=float(l9_823)*4.6566129e-10;
int l9_825=l9_820;
float l9_826=float(l9_825)*4.6566129e-10;
float3 l9_827=float3(l9_822,l9_824,l9_826);
float3 l9_828=l9_827;
float3 l9_829=l9_828;
float2 l9_830=radians(N144_ArcAngles);
float l9_831=1.0-N144_VolumeFill;
l9_831*=l9_831;
float l9_832=mix(l9_830.x,l9_830.y,l9_829.x);
float l9_833=mix(-1.0,1.0,l9_829.y);
float l9_834=mix(l9_831,1.0,l9_829.z);
float l9_835=l9_834;
float l9_836;
if (l9_835<=0.0)
{
l9_836=0.0;
}
else
{
l9_836=sqrt(l9_835);
}
float l9_837=l9_836;
l9_834=l9_837;
float3 l9_838=float3(sin(l9_832),cos(l9_832),l9_833);
float l9_839=(N144_Radius*0.5)*mix(N144_startRad,N144_endRad,l9_829.y);
l9_838*=((N144_Scale*float3(l9_839,l9_839,N144_Height*0.5))*float3(l9_834,l9_834,1.0));
if (N144_OrientationAxis==0)
{
l9_838=l9_838.zxy;
}
else
{
if (N144_OrientationAxis==1)
{
l9_838=l9_838.xzy;
}
}
l9_838+=N144_Center;
N144_Result=l9_838;
l9_805=N144_Result;
l9_794=l9_805;
l9_630=l9_794;
l9_638=l9_630;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==3)
{
float l9_840=0.0;
float l9_841=(*sc_set0.UserUniforms).Tweak_N257;
l9_840=l9_841;
float l9_842=0.0;
float l9_843=(*sc_set0.UserUniforms).Tweak_N258;
l9_842=l9_843;
float2 l9_844=float2(0.0);
float2 l9_845=(*sc_set0.UserUniforms).Tweak_N259;
l9_844=l9_845;
float3 l9_846=float3(0.0);
float3 l9_847=(*sc_set0.UserUniforms).Tweak_N260;
l9_846=l9_847;
float3 l9_848=float3(0.0);
float3 l9_849=(*sc_set0.UserUniforms).Tweak_N261;
l9_848=l9_849;
float l9_850=0.0;
float l9_851=(*sc_set0.UserUniforms).Tweak_N262;
l9_850=l9_851;
float l9_852=0.0;
float l9_853=(*sc_set0.UserUniforms).Tweak_N263;
l9_852=l9_853;
float3 l9_854=float3(0.0);
float l9_855=l9_840;
float l9_856=l9_842;
float2 l9_857=l9_844;
float3 l9_858=l9_846;
float3 l9_859=l9_848;
float l9_860=l9_850;
float l9_861=l9_852;
ssGlobals l9_862=l9_637;
tempGlobals=l9_862;
float3 l9_863=float3(0.0);
N149_InnerRadius=l9_855;
N149_OuterRadius=l9_856;
N149_ArcAngles=l9_857;
N149_Scale=l9_858;
N149_Center=l9_859;
N149_VolumeFill=l9_860;
N149_Axis=int(l9_861);
int l9_864=0;
l9_864=ssInstanceID;
int l9_865=l9_864;
float l9_866=float(l9_865);
int l9_867=int(l9_866);
int l9_868=l9_867^(l9_867*15299);
int l9_869=l9_868;
int l9_870=l9_869;
int l9_871=((l9_870*((l9_870*1471343)+101146501))+1559861749)&2147483647;
int l9_872=l9_871;
int l9_873=l9_869*1399;
int l9_874=((l9_873*((l9_873*1471343)+101146501))+1559861749)&2147483647;
int l9_875=l9_874;
int l9_876=l9_869*7177;
int l9_877=((l9_876*((l9_876*1471343)+101146501))+1559861749)&2147483647;
int l9_878=l9_877;
int l9_879=l9_872;
float l9_880=float(l9_879)*4.6566129e-10;
int l9_881=l9_875;
float l9_882=float(l9_881)*4.6566129e-10;
int l9_883=l9_878;
float l9_884=float(l9_883)*4.6566129e-10;
float3 l9_885=float3(l9_880,l9_882,l9_884);
float3 l9_886=l9_885;
float3 l9_887=l9_886;
float2 l9_888=radians(N149_ArcAngles);
float l9_889=mix(l9_888.x,l9_888.y,l9_887.z);
float l9_890=3.1415927;
float l9_891=mix(0.0,l9_890*2.0,l9_887.y);
float l9_892=mix(1.0-(N149_VolumeFill*N149_VolumeFill),1.0,l9_887.x);
float l9_893=l9_892;
float l9_894;
if (l9_893<=0.0)
{
l9_894=0.0;
}
else
{
l9_894=sqrt(l9_893);
}
float l9_895=l9_894;
l9_892=l9_895*(N149_InnerRadius*0.5);
float l9_896=(cos(l9_891)*l9_892)+(N149_OuterRadius*0.5);
float3 l9_897=float3(cos(l9_889)*l9_896,sin(l9_889)*l9_896,sin(l9_891)*l9_892);
if (N149_Axis==1)
{
l9_897=l9_897.yzx;
}
else
{
if (N149_Axis==2)
{
l9_897=l9_897.zyx;
}
}
l9_897*=N149_Scale;
l9_897+=N149_Center;
N149_Result=l9_897;
l9_863=N149_Result;
l9_854=l9_863;
l9_631=l9_854;
l9_638=l9_631;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==4)
{
float3 l9_898=float3(0.0);
float3 l9_899=(*sc_set0.UserUniforms).Tweak_N236;
l9_898=l9_899;
float3 l9_900=float3(0.0);
float3 l9_901=(*sc_set0.UserUniforms).Tweak_N237;
l9_900=l9_901;
float3 l9_902=float3(0.0);
float3 l9_903=(*sc_set0.UserUniforms).Tweak_N264;
l9_902=l9_903;
float3 l9_904=float3(0.0);
float3 l9_905=l9_898;
float3 l9_906=l9_900;
float3 l9_907=l9_902;
ssGlobals l9_908=l9_637;
tempGlobals=l9_908;
float3 l9_909=float3(0.0);
N235_gridSize=l9_905;
N235_gridDim=l9_906;
N235_Offset=l9_907;
int l9_910=int((N235_gridDim.x*N235_gridDim.y)*N235_gridDim.z);
int l9_911=0;
l9_911=ssInstanceID;
int l9_912=l9_911;
int l9_913=l9_912;
int l9_914=l9_913%l9_910;
int l9_915=l9_914;
float3 l9_916=N235_gridDim;
float3 l9_917=N235_gridSize;
int3 l9_918=int3(l9_916);
int l9_919=l9_918.x*l9_918.y;
int l9_920=l9_915/l9_919;
int l9_921=l9_915%l9_919;
int l9_922=l9_921/l9_918.x;
int l9_923=l9_921%l9_918.x;
float l9_924;
if (l9_918.x>1)
{
l9_924=l9_917.x/(l9_916.x-1.0);
}
else
{
l9_924=0.0;
}
float l9_925=l9_924;
float l9_926;
if (l9_918.y>1)
{
l9_926=l9_917.y/(l9_916.y-1.0);
}
else
{
l9_926=0.0;
}
float l9_927=l9_926;
float l9_928;
if (l9_918.z>1)
{
l9_928=l9_917.z/(l9_916.z-1.0);
}
else
{
l9_928=0.0;
}
float3 l9_929=float3(l9_925,l9_927,l9_928);
float3 l9_930=(l9_916-float3(1.0))*l9_929;
float3 l9_931=(-l9_930)*0.5;
float3 l9_932=(float3(float(l9_923),float(l9_922),float(l9_920))*l9_929)+l9_931;
N235_Result=l9_932+N235_Offset;
l9_909=N235_Result;
l9_904=l9_909;
l9_632=l9_904;
l9_638=l9_632;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==5)
{
float l9_933=0.0;
float l9_934=(*sc_set0.UserUniforms).Tweak_N232;
l9_933=l9_934;
float l9_935=0.0;
float l9_936=(*sc_set0.UserUniforms).Tweak_N233;
l9_935=l9_936;
float l9_937=0.0;
float l9_938=(*sc_set0.UserUniforms).Tweak_N231;
l9_937=l9_938;
float l9_939=0.0;
float l9_940=(*sc_set0.UserUniforms).Tweak_N304;
l9_939=l9_940;
float l9_941=0.0;
float l9_942=(*sc_set0.UserUniforms).Tweak_N229;
l9_941=l9_942;
float l9_943=0.0;
float l9_944=float((*sc_set0.UserUniforms).Tweak_N280!=0);
l9_943=l9_944;
float l9_945=0.0;
float l9_946=(*sc_set0.UserUniforms).Tweak_N285;
l9_945=l9_946;
float l9_947=0.0;
float l9_948=(*sc_set0.UserUniforms).Tweak_N245;
l9_947=l9_948;
float l9_949=0.0;
float l9_950=(*sc_set0.UserUniforms).Tweak_N230;
l9_949=l9_950;
float l9_951=0.0;
float l9_952=float((*sc_set0.UserUniforms).animated!=0);
l9_951=l9_952;
float l9_953=0.0;
float l9_954=(*sc_set0.UserUniforms).Tweak_N279;
l9_953=l9_954;
float l9_955=0.0;
float l9_956=float((*sc_set0.UserUniforms).Tweak_N303!=0);
l9_955=l9_956;
float2 l9_957=float2(0.0);
float2 l9_958=(*sc_set0.UserUniforms).Tweak_N336;
l9_957=l9_958;
float l9_959=0.0;
float l9_960=(*sc_set0.UserUniforms).timeGlobal;
l9_959=l9_960;
float l9_961=0.0;
float l9_962=(*sc_set0.UserUniforms).externalTimeInput;
l9_961=l9_962;
float l9_963=0.0;
float l9_964=(*sc_set0.UserUniforms).externalSeed;
l9_963=l9_964;
float l9_965=0.0;
float l9_966=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_965=l9_966;
float2 l9_967=float2(0.0);
float2 l9_968=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_967=l9_968;
float l9_969=0.0;
float l9_970=(*sc_set0.UserUniforms).spawnDuration;
l9_969=l9_970;
float l9_971=0.0;
float l9_972;
if ((int(TRAILS_tmp)!=0))
{
l9_972=1.001;
}
else
{
l9_972=0.001;
}
l9_972-=0.001;
l9_971=l9_972;
float l9_973=0.0;
float l9_974=(*sc_set0.UserUniforms).trailLength;
l9_973=l9_974;
float4 l9_975=float4(0.0);
l9_975=l9_637.VertexColor;
float l9_976=0.0;
l9_976=l9_975.x;
float l9_977=0.0;
float l9_978=l9_971;
bool l9_979=(l9_978*1.0)!=0.0;
bool l9_980;
if (l9_979)
{
l9_980=(l9_976*1.0)!=0.0;
}
else
{
l9_980=l9_979;
}
l9_977=float(l9_980);
float4 l9_981=float4(0.0);
float l9_982=l9_959;
float l9_983=l9_961;
float l9_984=l9_963;
float l9_985=l9_965;
float2 l9_986=l9_967;
float l9_987=l9_969;
float l9_988=l9_973;
float l9_989=l9_977;
ssGlobals l9_990=l9_637;
tempGlobals=l9_990;
float4 l9_991=float4(0.0);
N181_timeGlobal=l9_982;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_983;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_984;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_985;
N181_lifeTimeMinMax=l9_986;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_987;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_988;
N181_isTrailCondition=l9_989!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_992=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_993=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_992=length(float4(1.0)*l9_993);
}
N181_globalSeed=N181_externalSeed+l9_992;
int l9_994=0;
l9_994=ssInstanceID;
int l9_995=l9_994;
float l9_996=float(l9_995);
int l9_997=int(l9_996);
int l9_998=l9_997^(l9_997*15299);
int l9_999=l9_998;
int l9_1000=l9_999;
int l9_1001=((l9_1000*((l9_1000*1471343)+101146501))+1559861749)&2147483647;
int l9_1002=l9_1001;
int l9_1003=l9_999*1399;
int l9_1004=((l9_1003*((l9_1003*1471343)+101146501))+1559861749)&2147483647;
int l9_1005=l9_1004;
int l9_1006=l9_999*7177;
int l9_1007=((l9_1006*((l9_1006*1471343)+101146501))+1559861749)&2147483647;
int l9_1008=l9_1007;
int l9_1009=l9_1002;
float l9_1010=float(l9_1009)*4.6566129e-10;
int l9_1011=l9_1005;
float l9_1012=float(l9_1011)*4.6566129e-10;
int l9_1013=l9_1008;
float l9_1014=float(l9_1013)*4.6566129e-10;
float3 l9_1015=float3(l9_1010,l9_1012,l9_1014);
float3 l9_1016=l9_1015;
N181_particleSeed=l9_1016;
float l9_1017=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_1018;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_1018=N181_lifeTimeMinMax;
}
else
{
l9_1018=float2(N181_lifeTimeConstant);
}
float2 l9_1019=l9_1018;
float l9_1020=fast::max(l9_1019.x,0.0099999998);
float l9_1021=fast::max(l9_1019.y,0.0099999998);
float l9_1022=tempGlobals.gTimeElapsed;
float l9_1023=l9_1022;
if (N181_ENABLE_EXTERNALTIME)
{
l9_1023=N181_externalTime;
}
float l9_1024=l9_1023;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_1024=N181_timeGlobal*l9_1023;
}
else
{
float l9_1025=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_1025=N181_trailLength;
}
}
float l9_1026=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_1027=0.0;
float l9_1028;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_1028=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_1028=0.0;
}
l9_1027=l9_1028;
float l9_1029=l9_1027;
int l9_1030=0;
l9_1030=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_1031=l9_1030;
l9_1026=fast::max(l9_1029*(1.0-(1.0/float(l9_1031))),0.0);
}
else
{
l9_1026=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_1032=fract(((l9_1023*N181_timeGlobal)*(1.0/(l9_1019.y+l9_1025)))+l9_1026);
l9_1024=l9_1032*(l9_1019.y+l9_1025);
}
float l9_1033=mix(l9_1024/l9_1020,l9_1024/l9_1021,l9_1017);
float l9_1034=fast::clamp(l9_1033,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_1024,l9_1034);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_1035=tempGlobals.Surface_UVCoord0;
l9_1024-=(l9_1035.y*N181_trailLength);
l9_1033=mix(l9_1024/l9_1020,l9_1024/l9_1021,l9_1017);
l9_1034=fast::clamp(l9_1033,0.0,1.0);
}
}
float l9_1036=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_1023-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_1036=1.0;
}
}
}
float l9_1037=l9_1033+l9_1036;
N181_particleAlive=1.0;
if ((l9_1037>0.99989998)||(l9_1024<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_1023*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_1019,l9_1024,l9_1034);
l9_991=N181_timeValues;
l9_981=l9_991;
float3 l9_1038=float3(0.0);
float l9_1039=l9_933;
float l9_1040=l9_935;
float l9_1041=l9_937;
float l9_1042=l9_939;
float l9_1043=l9_941;
float l9_1044=l9_943;
float l9_1045=l9_945;
float l9_1046=l9_947;
float l9_1047=l9_949;
float l9_1048=l9_951;
float l9_1049=l9_953;
float l9_1050=l9_955;
float2 l9_1051=l9_957;
float4 l9_1052=l9_981;
ssGlobals l9_1053=l9_637;
tempGlobals=l9_1053;
float3 l9_1054=float3(0.0);
N155_startRad=l9_1039;
N155_endRad=l9_1040;
N155_heightPerTurn=l9_1041;
N155_alignHeight=int(l9_1042);
N155_thicknessRad=l9_1043;
N155_curvThickEnable=l9_1044!=0.0;
N155_VolumeFill=l9_1045;
N155_OrientationAxis=int(l9_1046);
N155_nTurns=l9_1047;
N155_animPath=l9_1048!=0.0;
N155_Speed=l9_1049;
N155_randSpeed=l9_1050!=0.0;
N155_SpeedMinMax=l9_1051;
N155_timeValuesIn=l9_1052;
float l9_1055=3.1415927;
float l9_1056=l9_1055*2.0;
float l9_1057=(N155_heightPerTurn/N155_nTurns)/l9_1056;
float l9_1058=N155_startRad*0.5;
float l9_1059=N155_endRad*0.5;
float l9_1060=N155_thicknessRad*0.5;
float l9_1061=0.0;
float l9_1062;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_1062=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_1062=0.0;
}
l9_1061=l9_1062;
float l9_1063=l9_1061;
float l9_1064=l9_1063;
int l9_1065=0;
l9_1065=ssInstanceID;
int l9_1066=l9_1065;
float l9_1067=float(l9_1066);
float l9_1068=l9_1067;
int l9_1069=int(l9_1068);
int l9_1070=l9_1069^(l9_1069*15299);
int l9_1071=l9_1070;
int l9_1072=l9_1071;
int l9_1073=((l9_1072*((l9_1072*1471343)+101146501))+1559861749)&2147483647;
int l9_1074=l9_1073;
float l9_1075=float(l9_1074)*4.6566129e-10;
float l9_1076=l9_1075;
float l9_1077=l9_1076;
float l9_1078=l9_1077;
if (N155_animPath)
{
if (N155_randSpeed)
{
l9_1064=mod(l9_1064+(N155_timeValuesIn.z*mix(N155_SpeedMinMax.x,N155_SpeedMinMax.y,l9_1078)),1.1);
}
else
{
l9_1064=mod(l9_1064+(N155_timeValuesIn.z*N155_Speed),1.1);
}
}
float l9_1079=(l9_1056*N155_nTurns)*l9_1064;
float l9_1080=mix(l9_1058,l9_1059,l9_1064);
float l9_1081=l9_1080*cos(l9_1079);
float l9_1082=l9_1080*sin(l9_1079);
float l9_1083=l9_1057*l9_1079;
if (N155_alignHeight==1)
{
l9_1083-=(((l9_1057*N155_nTurns)*l9_1056)*0.5);
}
else
{
if (N155_alignHeight==2)
{
l9_1083-=((l9_1057*N155_nTurns)*l9_1056);
}
}
float3 l9_1084=normalize(float3(-sin(l9_1079),cos(l9_1079),l9_1057/l9_1056));
float3 l9_1085=normalize(cross(l9_1084,float3(0.0,0.0,1.0)));
float3 l9_1086=cross(l9_1084,l9_1085);
float l9_1087=l9_1064;
float l9_1088=0.0;
float l9_1089=(*sc_set0.UserUniforms).Tweak_N157_curveData.x;
float l9_1090=(*sc_set0.UserUniforms).Tweak_N157_curveData.y;
float l9_1091=(*sc_set0.UserUniforms).Tweak_N157_curveData.z;
float l9_1092=(l9_1087-l9_1090)/(l9_1091-l9_1090);
float2 l9_1093=float2(l9_1092,l9_1089);
l9_1093=fast::clamp(l9_1093,float2(0.0),float2(1.0));
int l9_1094;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_1095=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1095=0;
}
else
{
l9_1095=gl_InstanceIndex%2;
}
int l9_1096=l9_1095;
l9_1094=1-l9_1096;
}
else
{
int l9_1097=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1097=0;
}
else
{
l9_1097=gl_InstanceIndex%2;
}
int l9_1098=l9_1097;
l9_1094=l9_1098;
}
int l9_1099=l9_1094;
int l9_1100=sc_CurveAtlasLayout_tmp;
int l9_1101=l9_1099;
float2 l9_1102=l9_1093;
bool l9_1103=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_1104=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_1105=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_1106=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_1107=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_1108=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_1109=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_1110=0.0;
bool l9_1111=l9_1108&&(!l9_1106);
float l9_1112=1.0;
float l9_1113=l9_1102.x;
int l9_1114=l9_1105.x;
if (l9_1114==1)
{
l9_1113=fract(l9_1113);
}
else
{
if (l9_1114==2)
{
float l9_1115=fract(l9_1113);
float l9_1116=l9_1113-l9_1115;
float l9_1117=step(0.25,fract(l9_1116*0.5));
l9_1113=mix(l9_1115,1.0-l9_1115,fast::clamp(l9_1117,0.0,1.0));
}
}
l9_1102.x=l9_1113;
float l9_1118=l9_1102.y;
int l9_1119=l9_1105.y;
if (l9_1119==1)
{
l9_1118=fract(l9_1118);
}
else
{
if (l9_1119==2)
{
float l9_1120=fract(l9_1118);
float l9_1121=l9_1118-l9_1120;
float l9_1122=step(0.25,fract(l9_1121*0.5));
l9_1118=mix(l9_1120,1.0-l9_1120,fast::clamp(l9_1122,0.0,1.0));
}
}
l9_1102.y=l9_1118;
if (l9_1106)
{
bool l9_1123=l9_1108;
bool l9_1124;
if (l9_1123)
{
l9_1124=l9_1105.x==3;
}
else
{
l9_1124=l9_1123;
}
float l9_1125=l9_1102.x;
float l9_1126=l9_1107.x;
float l9_1127=l9_1107.z;
bool l9_1128=l9_1124;
float l9_1129=l9_1112;
float l9_1130=fast::clamp(l9_1125,l9_1126,l9_1127);
float l9_1131=step(abs(l9_1125-l9_1130),9.9999997e-06);
l9_1129*=(l9_1131+((1.0-float(l9_1128))*(1.0-l9_1131)));
l9_1125=l9_1130;
l9_1102.x=l9_1125;
l9_1112=l9_1129;
bool l9_1132=l9_1108;
bool l9_1133;
if (l9_1132)
{
l9_1133=l9_1105.y==3;
}
else
{
l9_1133=l9_1132;
}
float l9_1134=l9_1102.y;
float l9_1135=l9_1107.y;
float l9_1136=l9_1107.w;
bool l9_1137=l9_1133;
float l9_1138=l9_1112;
float l9_1139=fast::clamp(l9_1134,l9_1135,l9_1136);
float l9_1140=step(abs(l9_1134-l9_1139),9.9999997e-06);
l9_1138*=(l9_1140+((1.0-float(l9_1137))*(1.0-l9_1140)));
l9_1134=l9_1139;
l9_1102.y=l9_1134;
l9_1112=l9_1138;
}
float2 l9_1141=l9_1102;
bool l9_1142=l9_1103;
float3x3 l9_1143=l9_1104;
if (l9_1142)
{
l9_1141=float2((l9_1143*float3(l9_1141,1.0)).xy);
}
float2 l9_1144=l9_1141;
l9_1102=l9_1144;
float l9_1145=l9_1102.x;
int l9_1146=l9_1105.x;
bool l9_1147=l9_1111;
float l9_1148=l9_1112;
if ((l9_1146==0)||(l9_1146==3))
{
float l9_1149=l9_1145;
float l9_1150=0.0;
float l9_1151=1.0;
bool l9_1152=l9_1147;
float l9_1153=l9_1148;
float l9_1154=fast::clamp(l9_1149,l9_1150,l9_1151);
float l9_1155=step(abs(l9_1149-l9_1154),9.9999997e-06);
l9_1153*=(l9_1155+((1.0-float(l9_1152))*(1.0-l9_1155)));
l9_1149=l9_1154;
l9_1145=l9_1149;
l9_1148=l9_1153;
}
l9_1102.x=l9_1145;
l9_1112=l9_1148;
float l9_1156=l9_1102.y;
int l9_1157=l9_1105.y;
bool l9_1158=l9_1111;
float l9_1159=l9_1112;
if ((l9_1157==0)||(l9_1157==3))
{
float l9_1160=l9_1156;
float l9_1161=0.0;
float l9_1162=1.0;
bool l9_1163=l9_1158;
float l9_1164=l9_1159;
float l9_1165=fast::clamp(l9_1160,l9_1161,l9_1162);
float l9_1166=step(abs(l9_1160-l9_1165),9.9999997e-06);
l9_1164*=(l9_1166+((1.0-float(l9_1163))*(1.0-l9_1166)));
l9_1160=l9_1165;
l9_1156=l9_1160;
l9_1159=l9_1164;
}
l9_1102.y=l9_1156;
l9_1112=l9_1159;
float2 l9_1167=l9_1102;
int l9_1168=l9_1100;
int l9_1169=l9_1101;
float l9_1170=l9_1110;
float2 l9_1171=l9_1167;
int l9_1172=l9_1168;
int l9_1173=l9_1169;
float3 l9_1174=float3(0.0);
if (l9_1172==0)
{
l9_1174=float3(l9_1171,0.0);
}
else
{
if (l9_1172==1)
{
l9_1174=float3(l9_1171.x,(l9_1171.y*0.5)+(0.5-(float(l9_1173)*0.5)),0.0);
}
else
{
l9_1174=float3(l9_1171,float(l9_1173));
}
}
float3 l9_1175=l9_1174;
float3 l9_1176=l9_1175;
float4 l9_1177=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_1176.xy,level(l9_1170));
float4 l9_1178=l9_1177;
if (l9_1108)
{
l9_1178=mix(l9_1109,l9_1178,float4(l9_1112));
}
float4 l9_1179=l9_1178;
l9_1088=l9_1179.x;
float l9_1180=l9_1088;
float l9_1181=l9_1180;
float l9_1182;
if (N155_curvThickEnable)
{
l9_1182=l9_1060*l9_1181;
}
else
{
l9_1182=l9_1060;
}
float l9_1183=l9_1182;
float3 l9_1184=mix(float3(l9_1081,l9_1082,l9_1083)+(((l9_1085*cos(l9_1067))+(l9_1086*sin(l9_1067)))*l9_1183),float3(l9_1081,l9_1082,l9_1083),float3(l9_1078*N155_VolumeFill));
float3 l9_1185;
if (l9_1064>1.0)
{
l9_1185=l9_1184/float3(0.0);
}
else
{
l9_1185=l9_1184;
}
l9_1184=l9_1185;
if (N155_OrientationAxis==0)
{
l9_1184=l9_1184.zxy;
l9_1084=l9_1084.zxy;
l9_1085=l9_1085.zxy;
l9_1086=l9_1086.zxy;
}
else
{
if (N155_OrientationAxis==1)
{
l9_1184=l9_1184.xzy;
l9_1084=l9_1084.xzy;
l9_1085=l9_1085.xzy;
l9_1086=l9_1086.xzy;
}
}
tempGlobals.N155_helixDirection=l9_1084;
N155_Result=l9_1184;
l9_1054=N155_Result;
l9_1038=l9_1054;
l9_633=l9_1038;
l9_638=l9_633;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==6)
{
float l9_1186=0.0;
float l9_1187=(*sc_set0.UserUniforms).Tweak_N298;
l9_1186=l9_1187;
float3 l9_1188=float3(0.0);
float3 l9_1189=(*sc_set0.UserUniforms).Tweak_N330;
l9_1188=l9_1189;
float l9_1190=0.0;
float l9_1191=float((*sc_set0.UserUniforms).Tweak_N308!=0);
l9_1190=l9_1191;
float l9_1192=0.0;
float l9_1193=(*sc_set0.UserUniforms).timeGlobal;
l9_1192=l9_1193;
float l9_1194=0.0;
float l9_1195=(*sc_set0.UserUniforms).externalTimeInput;
l9_1194=l9_1195;
float l9_1196=0.0;
float l9_1197=(*sc_set0.UserUniforms).externalSeed;
l9_1196=l9_1197;
float l9_1198=0.0;
float l9_1199=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_1198=l9_1199;
float2 l9_1200=float2(0.0);
float2 l9_1201=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_1200=l9_1201;
float l9_1202=0.0;
float l9_1203=(*sc_set0.UserUniforms).spawnDuration;
l9_1202=l9_1203;
float l9_1204=0.0;
float l9_1205;
if ((int(TRAILS_tmp)!=0))
{
l9_1205=1.001;
}
else
{
l9_1205=0.001;
}
l9_1205-=0.001;
l9_1204=l9_1205;
float l9_1206=0.0;
float l9_1207=(*sc_set0.UserUniforms).trailLength;
l9_1206=l9_1207;
float4 l9_1208=float4(0.0);
l9_1208=l9_637.VertexColor;
float l9_1209=0.0;
l9_1209=l9_1208.x;
float l9_1210=0.0;
float l9_1211=l9_1204;
bool l9_1212=(l9_1211*1.0)!=0.0;
bool l9_1213;
if (l9_1212)
{
l9_1213=(l9_1209*1.0)!=0.0;
}
else
{
l9_1213=l9_1212;
}
l9_1210=float(l9_1213);
float4 l9_1214=float4(0.0);
float l9_1215=l9_1192;
float l9_1216=l9_1194;
float l9_1217=l9_1196;
float l9_1218=l9_1198;
float2 l9_1219=l9_1200;
float l9_1220=l9_1202;
float l9_1221=l9_1206;
float l9_1222=l9_1210;
ssGlobals l9_1223=l9_637;
tempGlobals=l9_1223;
float4 l9_1224=float4(0.0);
N181_timeGlobal=l9_1215;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_1216;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_1217;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_1218;
N181_lifeTimeMinMax=l9_1219;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_1220;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_1221;
N181_isTrailCondition=l9_1222!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_1225=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_1226=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_1225=length(float4(1.0)*l9_1226);
}
N181_globalSeed=N181_externalSeed+l9_1225;
int l9_1227=0;
l9_1227=ssInstanceID;
int l9_1228=l9_1227;
float l9_1229=float(l9_1228);
int l9_1230=int(l9_1229);
int l9_1231=l9_1230^(l9_1230*15299);
int l9_1232=l9_1231;
int l9_1233=l9_1232;
int l9_1234=((l9_1233*((l9_1233*1471343)+101146501))+1559861749)&2147483647;
int l9_1235=l9_1234;
int l9_1236=l9_1232*1399;
int l9_1237=((l9_1236*((l9_1236*1471343)+101146501))+1559861749)&2147483647;
int l9_1238=l9_1237;
int l9_1239=l9_1232*7177;
int l9_1240=((l9_1239*((l9_1239*1471343)+101146501))+1559861749)&2147483647;
int l9_1241=l9_1240;
int l9_1242=l9_1235;
float l9_1243=float(l9_1242)*4.6566129e-10;
int l9_1244=l9_1238;
float l9_1245=float(l9_1244)*4.6566129e-10;
int l9_1246=l9_1241;
float l9_1247=float(l9_1246)*4.6566129e-10;
float3 l9_1248=float3(l9_1243,l9_1245,l9_1247);
float3 l9_1249=l9_1248;
N181_particleSeed=l9_1249;
float l9_1250=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_1251;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_1251=N181_lifeTimeMinMax;
}
else
{
l9_1251=float2(N181_lifeTimeConstant);
}
float2 l9_1252=l9_1251;
float l9_1253=fast::max(l9_1252.x,0.0099999998);
float l9_1254=fast::max(l9_1252.y,0.0099999998);
float l9_1255=tempGlobals.gTimeElapsed;
float l9_1256=l9_1255;
if (N181_ENABLE_EXTERNALTIME)
{
l9_1256=N181_externalTime;
}
float l9_1257=l9_1256;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_1257=N181_timeGlobal*l9_1256;
}
else
{
float l9_1258=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_1258=N181_trailLength;
}
}
float l9_1259=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_1260=0.0;
float l9_1261;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_1261=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_1261=0.0;
}
l9_1260=l9_1261;
float l9_1262=l9_1260;
int l9_1263=0;
l9_1263=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_1264=l9_1263;
l9_1259=fast::max(l9_1262*(1.0-(1.0/float(l9_1264))),0.0);
}
else
{
l9_1259=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_1265=fract(((l9_1256*N181_timeGlobal)*(1.0/(l9_1252.y+l9_1258)))+l9_1259);
l9_1257=l9_1265*(l9_1252.y+l9_1258);
}
float l9_1266=mix(l9_1257/l9_1253,l9_1257/l9_1254,l9_1250);
float l9_1267=fast::clamp(l9_1266,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_1257,l9_1267);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_1268=tempGlobals.Surface_UVCoord0;
l9_1257-=(l9_1268.y*N181_trailLength);
l9_1266=mix(l9_1257/l9_1253,l9_1257/l9_1254,l9_1250);
l9_1267=fast::clamp(l9_1266,0.0,1.0);
}
}
float l9_1269=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_1256-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_1269=1.0;
}
}
}
float l9_1270=l9_1266+l9_1269;
N181_particleAlive=1.0;
if ((l9_1270>0.99989998)||(l9_1257<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_1256*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_1252,l9_1257,l9_1267);
l9_1224=N181_timeValues;
l9_1214=l9_1224;
float l9_1271=0.0;
float l9_1272=(*sc_set0.UserUniforms).Tweak_N294;
l9_1271=l9_1272;
float l9_1273=0.0;
float l9_1274=float((*sc_set0.UserUniforms).Tweak_N339!=0);
l9_1273=l9_1274;
float2 l9_1275=float2(0.0);
float2 l9_1276=(*sc_set0.UserUniforms).Tweak_N342;
l9_1275=l9_1276;
float l9_1277=0.0;
float l9_1278=(*sc_set0.UserUniforms).Tweak_N301;
l9_1277=l9_1278;
float l9_1279=0.0;
float l9_1280=float((*sc_set0.UserUniforms).Tweak_N274!=0);
l9_1279=l9_1280;
float l9_1281=0.0;
float l9_1282=(*sc_set0.UserUniforms).Tweak_N302;
l9_1281=l9_1282;
float l9_1283=0.0;
float l9_1284=(*sc_set0.UserUniforms).Tweak_N318;
l9_1283=l9_1284;
float3 l9_1285=float3(0.0);
float l9_1286=l9_1186;
float3 l9_1287=l9_1188;
float l9_1288=l9_1190;
float4 l9_1289=l9_1214;
float l9_1290=l9_1271;
float l9_1291=l9_1273;
float2 l9_1292=l9_1275;
float l9_1293=l9_1277;
float l9_1294=l9_1279;
float l9_1295=l9_1281;
float l9_1296=l9_1283;
ssGlobals l9_1297=l9_637;
tempGlobals=l9_1297;
float3 l9_1298=float3(0.0);
N319_Scale=l9_1286;
N319_scaleXYZ=l9_1287;
N319_animPath=l9_1288!=0.0;
N319_timeValuesIn=l9_1289;
N319_Speed=l9_1290;
N319_randSpeed=l9_1291!=0.0;
N319_SpeedMinMax=l9_1292;
N319_thicknessRad=l9_1293;
N319_curvThickEnable=l9_1294!=0.0;
N319_VolumeFill=l9_1295;
N319_res=l9_1296;
float3 l9_1299=float3(0.0);
float3 l9_1300=float3(0.0);
float3 l9_1301=float3(0.0);
float3 l9_1302=float3(0.0);
float l9_1303=0.0;
float l9_1304;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_1304=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_1304=0.0;
}
l9_1303=l9_1304;
float l9_1305=l9_1303;
float l9_1306=l9_1305;
float l9_1307=l9_1306;
int l9_1308=0;
l9_1308=ssInstanceID;
int l9_1309=l9_1308;
float l9_1310=float(l9_1309);
float l9_1311=l9_1310;
int l9_1312=int(l9_1311);
int l9_1313=l9_1312^(l9_1312*15299);
int l9_1314=l9_1313;
int l9_1315=l9_1314;
int l9_1316=((l9_1315*((l9_1315*1471343)+101146501))+1559861749)&2147483647;
int l9_1317=l9_1316;
float l9_1318=float(l9_1317)*4.6566129e-10;
float l9_1319=l9_1318;
float l9_1320=l9_1319;
float l9_1321=l9_1320;
if (N319_animPath)
{
if (N319_randSpeed)
{
l9_1307=mod(l9_1306+(N319_timeValuesIn.z*mix(N319_SpeedMinMax.x,N319_SpeedMinMax.y,l9_1321)),1.1);
}
else
{
l9_1307=mod(l9_1306+(N319_timeValuesIn.z*N319_Speed),1.1);
}
}
float l9_1322=l9_1307;
float3 l9_1323=l9_1299;
float3 l9_1324=l9_1300;
float3 l9_1325=l9_1301;
float3 l9_1326=l9_1302;
int l9_1327=5;
float l9_1328=1.0/float(l9_1327);
int l9_1329;
int l9_1330;
int l9_1331;
int l9_1332;
int l9_1333;
int l9_1334;
int l9_1335=0;
for (int snapLoopIndex=0; snapLoopIndex==0; snapLoopIndex+=0)
{
if (l9_1335<l9_1327)
{
float l9_1336=float(l9_1335)*l9_1328;
float l9_1337=0.0;
float l9_1338=(*sc_set0.UserUniforms).Tweak_N293_curveData.x;
float l9_1339=(*sc_set0.UserUniforms).Tweak_N293_curveData.y;
float l9_1340=(*sc_set0.UserUniforms).Tweak_N293_curveData.z;
float l9_1341=(l9_1336-l9_1339)/(l9_1340-l9_1339);
float2 l9_1342=float2(l9_1341,l9_1338);
l9_1342=fast::clamp(l9_1342,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_1343=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1343=0;
}
else
{
l9_1343=gl_InstanceIndex%2;
}
int l9_1344=l9_1343;
l9_1329=1-l9_1344;
}
else
{
int l9_1345=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1345=0;
}
else
{
l9_1345=gl_InstanceIndex%2;
}
int l9_1346=l9_1345;
l9_1329=l9_1346;
}
int l9_1347=l9_1329;
int l9_1348=sc_CurveAtlasLayout_tmp;
int l9_1349=l9_1347;
float2 l9_1350=l9_1342;
bool l9_1351=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_1352=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_1353=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_1354=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_1355=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_1356=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_1357=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_1358=0.0;
bool l9_1359=l9_1356&&(!l9_1354);
float l9_1360=1.0;
float l9_1361=l9_1350.x;
int l9_1362=l9_1353.x;
if (l9_1362==1)
{
l9_1361=fract(l9_1361);
}
else
{
if (l9_1362==2)
{
float l9_1363=fract(l9_1361);
float l9_1364=l9_1361-l9_1363;
float l9_1365=step(0.25,fract(l9_1364*0.5));
l9_1361=mix(l9_1363,1.0-l9_1363,fast::clamp(l9_1365,0.0,1.0));
}
}
l9_1350.x=l9_1361;
float l9_1366=l9_1350.y;
int l9_1367=l9_1353.y;
if (l9_1367==1)
{
l9_1366=fract(l9_1366);
}
else
{
if (l9_1367==2)
{
float l9_1368=fract(l9_1366);
float l9_1369=l9_1366-l9_1368;
float l9_1370=step(0.25,fract(l9_1369*0.5));
l9_1366=mix(l9_1368,1.0-l9_1368,fast::clamp(l9_1370,0.0,1.0));
}
}
l9_1350.y=l9_1366;
if (l9_1354)
{
bool l9_1371=l9_1356;
bool l9_1372;
if (l9_1371)
{
l9_1372=l9_1353.x==3;
}
else
{
l9_1372=l9_1371;
}
float l9_1373=l9_1350.x;
float l9_1374=l9_1355.x;
float l9_1375=l9_1355.z;
bool l9_1376=l9_1372;
float l9_1377=l9_1360;
float l9_1378=fast::clamp(l9_1373,l9_1374,l9_1375);
float l9_1379=step(abs(l9_1373-l9_1378),9.9999997e-06);
l9_1377*=(l9_1379+((1.0-float(l9_1376))*(1.0-l9_1379)));
l9_1373=l9_1378;
l9_1350.x=l9_1373;
l9_1360=l9_1377;
bool l9_1380=l9_1356;
bool l9_1381;
if (l9_1380)
{
l9_1381=l9_1353.y==3;
}
else
{
l9_1381=l9_1380;
}
float l9_1382=l9_1350.y;
float l9_1383=l9_1355.y;
float l9_1384=l9_1355.w;
bool l9_1385=l9_1381;
float l9_1386=l9_1360;
float l9_1387=fast::clamp(l9_1382,l9_1383,l9_1384);
float l9_1388=step(abs(l9_1382-l9_1387),9.9999997e-06);
l9_1386*=(l9_1388+((1.0-float(l9_1385))*(1.0-l9_1388)));
l9_1382=l9_1387;
l9_1350.y=l9_1382;
l9_1360=l9_1386;
}
float2 l9_1389=l9_1350;
bool l9_1390=l9_1351;
float3x3 l9_1391=l9_1352;
if (l9_1390)
{
l9_1389=float2((l9_1391*float3(l9_1389,1.0)).xy);
}
float2 l9_1392=l9_1389;
l9_1350=l9_1392;
float l9_1393=l9_1350.x;
int l9_1394=l9_1353.x;
bool l9_1395=l9_1359;
float l9_1396=l9_1360;
if ((l9_1394==0)||(l9_1394==3))
{
float l9_1397=l9_1393;
float l9_1398=0.0;
float l9_1399=1.0;
bool l9_1400=l9_1395;
float l9_1401=l9_1396;
float l9_1402=fast::clamp(l9_1397,l9_1398,l9_1399);
float l9_1403=step(abs(l9_1397-l9_1402),9.9999997e-06);
l9_1401*=(l9_1403+((1.0-float(l9_1400))*(1.0-l9_1403)));
l9_1397=l9_1402;
l9_1393=l9_1397;
l9_1396=l9_1401;
}
l9_1350.x=l9_1393;
l9_1360=l9_1396;
float l9_1404=l9_1350.y;
int l9_1405=l9_1353.y;
bool l9_1406=l9_1359;
float l9_1407=l9_1360;
if ((l9_1405==0)||(l9_1405==3))
{
float l9_1408=l9_1404;
float l9_1409=0.0;
float l9_1410=1.0;
bool l9_1411=l9_1406;
float l9_1412=l9_1407;
float l9_1413=fast::clamp(l9_1408,l9_1409,l9_1410);
float l9_1414=step(abs(l9_1408-l9_1413),9.9999997e-06);
l9_1412*=(l9_1414+((1.0-float(l9_1411))*(1.0-l9_1414)));
l9_1408=l9_1413;
l9_1404=l9_1408;
l9_1407=l9_1412;
}
l9_1350.y=l9_1404;
l9_1360=l9_1407;
float2 l9_1415=l9_1350;
int l9_1416=l9_1348;
int l9_1417=l9_1349;
float l9_1418=l9_1358;
float2 l9_1419=l9_1415;
int l9_1420=l9_1416;
int l9_1421=l9_1417;
float3 l9_1422=float3(0.0);
if (l9_1420==0)
{
l9_1422=float3(l9_1419,0.0);
}
else
{
if (l9_1420==1)
{
l9_1422=float3(l9_1419.x,(l9_1419.y*0.5)+(0.5-(float(l9_1421)*0.5)),0.0);
}
else
{
l9_1422=float3(l9_1419,float(l9_1421));
}
}
float3 l9_1423=l9_1422;
float3 l9_1424=l9_1423;
float4 l9_1425=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_1424.xy,level(l9_1418));
float4 l9_1426=l9_1425;
if (l9_1356)
{
l9_1426=mix(l9_1357,l9_1426,float4(l9_1360));
}
float4 l9_1427=l9_1426;
l9_1337=l9_1427.x;
float l9_1428=l9_1337;
float l9_1429=l9_1428;
float l9_1430=float(l9_1335)*l9_1328;
float l9_1431=0.0;
float l9_1432=(*sc_set0.UserUniforms).Tweak_N305_curveData.x;
float l9_1433=(*sc_set0.UserUniforms).Tweak_N305_curveData.y;
float l9_1434=(*sc_set0.UserUniforms).Tweak_N305_curveData.z;
float l9_1435=(l9_1430-l9_1433)/(l9_1434-l9_1433);
float2 l9_1436=float2(l9_1435,l9_1432);
l9_1436=fast::clamp(l9_1436,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_1437=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1437=0;
}
else
{
l9_1437=gl_InstanceIndex%2;
}
int l9_1438=l9_1437;
l9_1330=1-l9_1438;
}
else
{
int l9_1439=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1439=0;
}
else
{
l9_1439=gl_InstanceIndex%2;
}
int l9_1440=l9_1439;
l9_1330=l9_1440;
}
int l9_1441=l9_1330;
int l9_1442=sc_CurveAtlasLayout_tmp;
int l9_1443=l9_1441;
float2 l9_1444=l9_1436;
bool l9_1445=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_1446=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_1447=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_1448=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_1449=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_1450=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_1451=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_1452=0.0;
bool l9_1453=l9_1450&&(!l9_1448);
float l9_1454=1.0;
float l9_1455=l9_1444.x;
int l9_1456=l9_1447.x;
if (l9_1456==1)
{
l9_1455=fract(l9_1455);
}
else
{
if (l9_1456==2)
{
float l9_1457=fract(l9_1455);
float l9_1458=l9_1455-l9_1457;
float l9_1459=step(0.25,fract(l9_1458*0.5));
l9_1455=mix(l9_1457,1.0-l9_1457,fast::clamp(l9_1459,0.0,1.0));
}
}
l9_1444.x=l9_1455;
float l9_1460=l9_1444.y;
int l9_1461=l9_1447.y;
if (l9_1461==1)
{
l9_1460=fract(l9_1460);
}
else
{
if (l9_1461==2)
{
float l9_1462=fract(l9_1460);
float l9_1463=l9_1460-l9_1462;
float l9_1464=step(0.25,fract(l9_1463*0.5));
l9_1460=mix(l9_1462,1.0-l9_1462,fast::clamp(l9_1464,0.0,1.0));
}
}
l9_1444.y=l9_1460;
if (l9_1448)
{
bool l9_1465=l9_1450;
bool l9_1466;
if (l9_1465)
{
l9_1466=l9_1447.x==3;
}
else
{
l9_1466=l9_1465;
}
float l9_1467=l9_1444.x;
float l9_1468=l9_1449.x;
float l9_1469=l9_1449.z;
bool l9_1470=l9_1466;
float l9_1471=l9_1454;
float l9_1472=fast::clamp(l9_1467,l9_1468,l9_1469);
float l9_1473=step(abs(l9_1467-l9_1472),9.9999997e-06);
l9_1471*=(l9_1473+((1.0-float(l9_1470))*(1.0-l9_1473)));
l9_1467=l9_1472;
l9_1444.x=l9_1467;
l9_1454=l9_1471;
bool l9_1474=l9_1450;
bool l9_1475;
if (l9_1474)
{
l9_1475=l9_1447.y==3;
}
else
{
l9_1475=l9_1474;
}
float l9_1476=l9_1444.y;
float l9_1477=l9_1449.y;
float l9_1478=l9_1449.w;
bool l9_1479=l9_1475;
float l9_1480=l9_1454;
float l9_1481=fast::clamp(l9_1476,l9_1477,l9_1478);
float l9_1482=step(abs(l9_1476-l9_1481),9.9999997e-06);
l9_1480*=(l9_1482+((1.0-float(l9_1479))*(1.0-l9_1482)));
l9_1476=l9_1481;
l9_1444.y=l9_1476;
l9_1454=l9_1480;
}
float2 l9_1483=l9_1444;
bool l9_1484=l9_1445;
float3x3 l9_1485=l9_1446;
if (l9_1484)
{
l9_1483=float2((l9_1485*float3(l9_1483,1.0)).xy);
}
float2 l9_1486=l9_1483;
l9_1444=l9_1486;
float l9_1487=l9_1444.x;
int l9_1488=l9_1447.x;
bool l9_1489=l9_1453;
float l9_1490=l9_1454;
if ((l9_1488==0)||(l9_1488==3))
{
float l9_1491=l9_1487;
float l9_1492=0.0;
float l9_1493=1.0;
bool l9_1494=l9_1489;
float l9_1495=l9_1490;
float l9_1496=fast::clamp(l9_1491,l9_1492,l9_1493);
float l9_1497=step(abs(l9_1491-l9_1496),9.9999997e-06);
l9_1495*=(l9_1497+((1.0-float(l9_1494))*(1.0-l9_1497)));
l9_1491=l9_1496;
l9_1487=l9_1491;
l9_1490=l9_1495;
}
l9_1444.x=l9_1487;
l9_1454=l9_1490;
float l9_1498=l9_1444.y;
int l9_1499=l9_1447.y;
bool l9_1500=l9_1453;
float l9_1501=l9_1454;
if ((l9_1499==0)||(l9_1499==3))
{
float l9_1502=l9_1498;
float l9_1503=0.0;
float l9_1504=1.0;
bool l9_1505=l9_1500;
float l9_1506=l9_1501;
float l9_1507=fast::clamp(l9_1502,l9_1503,l9_1504);
float l9_1508=step(abs(l9_1502-l9_1507),9.9999997e-06);
l9_1506*=(l9_1508+((1.0-float(l9_1505))*(1.0-l9_1508)));
l9_1502=l9_1507;
l9_1498=l9_1502;
l9_1501=l9_1506;
}
l9_1444.y=l9_1498;
l9_1454=l9_1501;
float2 l9_1509=l9_1444;
int l9_1510=l9_1442;
int l9_1511=l9_1443;
float l9_1512=l9_1452;
float2 l9_1513=l9_1509;
int l9_1514=l9_1510;
int l9_1515=l9_1511;
float3 l9_1516=float3(0.0);
if (l9_1514==0)
{
l9_1516=float3(l9_1513,0.0);
}
else
{
if (l9_1514==1)
{
l9_1516=float3(l9_1513.x,(l9_1513.y*0.5)+(0.5-(float(l9_1515)*0.5)),0.0);
}
else
{
l9_1516=float3(l9_1513,float(l9_1515));
}
}
float3 l9_1517=l9_1516;
float3 l9_1518=l9_1517;
float4 l9_1519=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_1518.xy,level(l9_1512));
float4 l9_1520=l9_1519;
if (l9_1450)
{
l9_1520=mix(l9_1451,l9_1520,float4(l9_1454));
}
float4 l9_1521=l9_1520;
l9_1431=l9_1521.x;
float l9_1522=l9_1431;
float l9_1523=l9_1522;
float l9_1524=float(l9_1335)*l9_1328;
float l9_1525=0.0;
float l9_1526=(*sc_set0.UserUniforms).Tweak_N297_curveData.x;
float l9_1527=(*sc_set0.UserUniforms).Tweak_N297_curveData.y;
float l9_1528=(*sc_set0.UserUniforms).Tweak_N297_curveData.z;
float l9_1529=(l9_1524-l9_1527)/(l9_1528-l9_1527);
float2 l9_1530=float2(l9_1529,l9_1526);
l9_1530=fast::clamp(l9_1530,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_1531=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1531=0;
}
else
{
l9_1531=gl_InstanceIndex%2;
}
int l9_1532=l9_1531;
l9_1331=1-l9_1532;
}
else
{
int l9_1533=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1533=0;
}
else
{
l9_1533=gl_InstanceIndex%2;
}
int l9_1534=l9_1533;
l9_1331=l9_1534;
}
int l9_1535=l9_1331;
int l9_1536=sc_CurveAtlasLayout_tmp;
int l9_1537=l9_1535;
float2 l9_1538=l9_1530;
bool l9_1539=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_1540=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_1541=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_1542=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_1543=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_1544=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_1545=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_1546=0.0;
bool l9_1547=l9_1544&&(!l9_1542);
float l9_1548=1.0;
float l9_1549=l9_1538.x;
int l9_1550=l9_1541.x;
if (l9_1550==1)
{
l9_1549=fract(l9_1549);
}
else
{
if (l9_1550==2)
{
float l9_1551=fract(l9_1549);
float l9_1552=l9_1549-l9_1551;
float l9_1553=step(0.25,fract(l9_1552*0.5));
l9_1549=mix(l9_1551,1.0-l9_1551,fast::clamp(l9_1553,0.0,1.0));
}
}
l9_1538.x=l9_1549;
float l9_1554=l9_1538.y;
int l9_1555=l9_1541.y;
if (l9_1555==1)
{
l9_1554=fract(l9_1554);
}
else
{
if (l9_1555==2)
{
float l9_1556=fract(l9_1554);
float l9_1557=l9_1554-l9_1556;
float l9_1558=step(0.25,fract(l9_1557*0.5));
l9_1554=mix(l9_1556,1.0-l9_1556,fast::clamp(l9_1558,0.0,1.0));
}
}
l9_1538.y=l9_1554;
if (l9_1542)
{
bool l9_1559=l9_1544;
bool l9_1560;
if (l9_1559)
{
l9_1560=l9_1541.x==3;
}
else
{
l9_1560=l9_1559;
}
float l9_1561=l9_1538.x;
float l9_1562=l9_1543.x;
float l9_1563=l9_1543.z;
bool l9_1564=l9_1560;
float l9_1565=l9_1548;
float l9_1566=fast::clamp(l9_1561,l9_1562,l9_1563);
float l9_1567=step(abs(l9_1561-l9_1566),9.9999997e-06);
l9_1565*=(l9_1567+((1.0-float(l9_1564))*(1.0-l9_1567)));
l9_1561=l9_1566;
l9_1538.x=l9_1561;
l9_1548=l9_1565;
bool l9_1568=l9_1544;
bool l9_1569;
if (l9_1568)
{
l9_1569=l9_1541.y==3;
}
else
{
l9_1569=l9_1568;
}
float l9_1570=l9_1538.y;
float l9_1571=l9_1543.y;
float l9_1572=l9_1543.w;
bool l9_1573=l9_1569;
float l9_1574=l9_1548;
float l9_1575=fast::clamp(l9_1570,l9_1571,l9_1572);
float l9_1576=step(abs(l9_1570-l9_1575),9.9999997e-06);
l9_1574*=(l9_1576+((1.0-float(l9_1573))*(1.0-l9_1576)));
l9_1570=l9_1575;
l9_1538.y=l9_1570;
l9_1548=l9_1574;
}
float2 l9_1577=l9_1538;
bool l9_1578=l9_1539;
float3x3 l9_1579=l9_1540;
if (l9_1578)
{
l9_1577=float2((l9_1579*float3(l9_1577,1.0)).xy);
}
float2 l9_1580=l9_1577;
l9_1538=l9_1580;
float l9_1581=l9_1538.x;
int l9_1582=l9_1541.x;
bool l9_1583=l9_1547;
float l9_1584=l9_1548;
if ((l9_1582==0)||(l9_1582==3))
{
float l9_1585=l9_1581;
float l9_1586=0.0;
float l9_1587=1.0;
bool l9_1588=l9_1583;
float l9_1589=l9_1584;
float l9_1590=fast::clamp(l9_1585,l9_1586,l9_1587);
float l9_1591=step(abs(l9_1585-l9_1590),9.9999997e-06);
l9_1589*=(l9_1591+((1.0-float(l9_1588))*(1.0-l9_1591)));
l9_1585=l9_1590;
l9_1581=l9_1585;
l9_1584=l9_1589;
}
l9_1538.x=l9_1581;
l9_1548=l9_1584;
float l9_1592=l9_1538.y;
int l9_1593=l9_1541.y;
bool l9_1594=l9_1547;
float l9_1595=l9_1548;
if ((l9_1593==0)||(l9_1593==3))
{
float l9_1596=l9_1592;
float l9_1597=0.0;
float l9_1598=1.0;
bool l9_1599=l9_1594;
float l9_1600=l9_1595;
float l9_1601=fast::clamp(l9_1596,l9_1597,l9_1598);
float l9_1602=step(abs(l9_1596-l9_1601),9.9999997e-06);
l9_1600*=(l9_1602+((1.0-float(l9_1599))*(1.0-l9_1602)));
l9_1596=l9_1601;
l9_1592=l9_1596;
l9_1595=l9_1600;
}
l9_1538.y=l9_1592;
l9_1548=l9_1595;
float2 l9_1603=l9_1538;
int l9_1604=l9_1536;
int l9_1605=l9_1537;
float l9_1606=l9_1546;
float2 l9_1607=l9_1603;
int l9_1608=l9_1604;
int l9_1609=l9_1605;
float3 l9_1610=float3(0.0);
if (l9_1608==0)
{
l9_1610=float3(l9_1607,0.0);
}
else
{
if (l9_1608==1)
{
l9_1610=float3(l9_1607.x,(l9_1607.y*0.5)+(0.5-(float(l9_1609)*0.5)),0.0);
}
else
{
l9_1610=float3(l9_1607,float(l9_1609));
}
}
float3 l9_1611=l9_1610;
float3 l9_1612=l9_1611;
float4 l9_1613=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_1612.xy,level(l9_1606));
float4 l9_1614=l9_1613;
if (l9_1544)
{
l9_1614=mix(l9_1545,l9_1614,float4(l9_1548));
}
float4 l9_1615=l9_1614;
l9_1525=l9_1615.x;
float l9_1616=l9_1525;
float3 l9_1617=float3(l9_1429,l9_1523,l9_1616);
float l9_1618=(float(l9_1335)*l9_1328)+N319_res;
float l9_1619=0.0;
float l9_1620=(*sc_set0.UserUniforms).Tweak_N293_curveData.x;
float l9_1621=(*sc_set0.UserUniforms).Tweak_N293_curveData.y;
float l9_1622=(*sc_set0.UserUniforms).Tweak_N293_curveData.z;
float l9_1623=(l9_1618-l9_1621)/(l9_1622-l9_1621);
float2 l9_1624=float2(l9_1623,l9_1620);
l9_1624=fast::clamp(l9_1624,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_1625=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1625=0;
}
else
{
l9_1625=gl_InstanceIndex%2;
}
int l9_1626=l9_1625;
l9_1332=1-l9_1626;
}
else
{
int l9_1627=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1627=0;
}
else
{
l9_1627=gl_InstanceIndex%2;
}
int l9_1628=l9_1627;
l9_1332=l9_1628;
}
int l9_1629=l9_1332;
int l9_1630=sc_CurveAtlasLayout_tmp;
int l9_1631=l9_1629;
float2 l9_1632=l9_1624;
bool l9_1633=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_1634=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_1635=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_1636=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_1637=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_1638=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_1639=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_1640=0.0;
bool l9_1641=l9_1638&&(!l9_1636);
float l9_1642=1.0;
float l9_1643=l9_1632.x;
int l9_1644=l9_1635.x;
if (l9_1644==1)
{
l9_1643=fract(l9_1643);
}
else
{
if (l9_1644==2)
{
float l9_1645=fract(l9_1643);
float l9_1646=l9_1643-l9_1645;
float l9_1647=step(0.25,fract(l9_1646*0.5));
l9_1643=mix(l9_1645,1.0-l9_1645,fast::clamp(l9_1647,0.0,1.0));
}
}
l9_1632.x=l9_1643;
float l9_1648=l9_1632.y;
int l9_1649=l9_1635.y;
if (l9_1649==1)
{
l9_1648=fract(l9_1648);
}
else
{
if (l9_1649==2)
{
float l9_1650=fract(l9_1648);
float l9_1651=l9_1648-l9_1650;
float l9_1652=step(0.25,fract(l9_1651*0.5));
l9_1648=mix(l9_1650,1.0-l9_1650,fast::clamp(l9_1652,0.0,1.0));
}
}
l9_1632.y=l9_1648;
if (l9_1636)
{
bool l9_1653=l9_1638;
bool l9_1654;
if (l9_1653)
{
l9_1654=l9_1635.x==3;
}
else
{
l9_1654=l9_1653;
}
float l9_1655=l9_1632.x;
float l9_1656=l9_1637.x;
float l9_1657=l9_1637.z;
bool l9_1658=l9_1654;
float l9_1659=l9_1642;
float l9_1660=fast::clamp(l9_1655,l9_1656,l9_1657);
float l9_1661=step(abs(l9_1655-l9_1660),9.9999997e-06);
l9_1659*=(l9_1661+((1.0-float(l9_1658))*(1.0-l9_1661)));
l9_1655=l9_1660;
l9_1632.x=l9_1655;
l9_1642=l9_1659;
bool l9_1662=l9_1638;
bool l9_1663;
if (l9_1662)
{
l9_1663=l9_1635.y==3;
}
else
{
l9_1663=l9_1662;
}
float l9_1664=l9_1632.y;
float l9_1665=l9_1637.y;
float l9_1666=l9_1637.w;
bool l9_1667=l9_1663;
float l9_1668=l9_1642;
float l9_1669=fast::clamp(l9_1664,l9_1665,l9_1666);
float l9_1670=step(abs(l9_1664-l9_1669),9.9999997e-06);
l9_1668*=(l9_1670+((1.0-float(l9_1667))*(1.0-l9_1670)));
l9_1664=l9_1669;
l9_1632.y=l9_1664;
l9_1642=l9_1668;
}
float2 l9_1671=l9_1632;
bool l9_1672=l9_1633;
float3x3 l9_1673=l9_1634;
if (l9_1672)
{
l9_1671=float2((l9_1673*float3(l9_1671,1.0)).xy);
}
float2 l9_1674=l9_1671;
l9_1632=l9_1674;
float l9_1675=l9_1632.x;
int l9_1676=l9_1635.x;
bool l9_1677=l9_1641;
float l9_1678=l9_1642;
if ((l9_1676==0)||(l9_1676==3))
{
float l9_1679=l9_1675;
float l9_1680=0.0;
float l9_1681=1.0;
bool l9_1682=l9_1677;
float l9_1683=l9_1678;
float l9_1684=fast::clamp(l9_1679,l9_1680,l9_1681);
float l9_1685=step(abs(l9_1679-l9_1684),9.9999997e-06);
l9_1683*=(l9_1685+((1.0-float(l9_1682))*(1.0-l9_1685)));
l9_1679=l9_1684;
l9_1675=l9_1679;
l9_1678=l9_1683;
}
l9_1632.x=l9_1675;
l9_1642=l9_1678;
float l9_1686=l9_1632.y;
int l9_1687=l9_1635.y;
bool l9_1688=l9_1641;
float l9_1689=l9_1642;
if ((l9_1687==0)||(l9_1687==3))
{
float l9_1690=l9_1686;
float l9_1691=0.0;
float l9_1692=1.0;
bool l9_1693=l9_1688;
float l9_1694=l9_1689;
float l9_1695=fast::clamp(l9_1690,l9_1691,l9_1692);
float l9_1696=step(abs(l9_1690-l9_1695),9.9999997e-06);
l9_1694*=(l9_1696+((1.0-float(l9_1693))*(1.0-l9_1696)));
l9_1690=l9_1695;
l9_1686=l9_1690;
l9_1689=l9_1694;
}
l9_1632.y=l9_1686;
l9_1642=l9_1689;
float2 l9_1697=l9_1632;
int l9_1698=l9_1630;
int l9_1699=l9_1631;
float l9_1700=l9_1640;
float2 l9_1701=l9_1697;
int l9_1702=l9_1698;
int l9_1703=l9_1699;
float3 l9_1704=float3(0.0);
if (l9_1702==0)
{
l9_1704=float3(l9_1701,0.0);
}
else
{
if (l9_1702==1)
{
l9_1704=float3(l9_1701.x,(l9_1701.y*0.5)+(0.5-(float(l9_1703)*0.5)),0.0);
}
else
{
l9_1704=float3(l9_1701,float(l9_1703));
}
}
float3 l9_1705=l9_1704;
float3 l9_1706=l9_1705;
float4 l9_1707=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_1706.xy,level(l9_1700));
float4 l9_1708=l9_1707;
if (l9_1638)
{
l9_1708=mix(l9_1639,l9_1708,float4(l9_1642));
}
float4 l9_1709=l9_1708;
l9_1619=l9_1709.x;
float l9_1710=l9_1619;
float l9_1711=l9_1710;
float l9_1712=(float(l9_1335)*l9_1328)+N319_res;
float l9_1713=0.0;
float l9_1714=(*sc_set0.UserUniforms).Tweak_N305_curveData.x;
float l9_1715=(*sc_set0.UserUniforms).Tweak_N305_curveData.y;
float l9_1716=(*sc_set0.UserUniforms).Tweak_N305_curveData.z;
float l9_1717=(l9_1712-l9_1715)/(l9_1716-l9_1715);
float2 l9_1718=float2(l9_1717,l9_1714);
l9_1718=fast::clamp(l9_1718,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_1719=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1719=0;
}
else
{
l9_1719=gl_InstanceIndex%2;
}
int l9_1720=l9_1719;
l9_1333=1-l9_1720;
}
else
{
int l9_1721=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1721=0;
}
else
{
l9_1721=gl_InstanceIndex%2;
}
int l9_1722=l9_1721;
l9_1333=l9_1722;
}
int l9_1723=l9_1333;
int l9_1724=sc_CurveAtlasLayout_tmp;
int l9_1725=l9_1723;
float2 l9_1726=l9_1718;
bool l9_1727=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_1728=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_1729=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_1730=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_1731=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_1732=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_1733=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_1734=0.0;
bool l9_1735=l9_1732&&(!l9_1730);
float l9_1736=1.0;
float l9_1737=l9_1726.x;
int l9_1738=l9_1729.x;
if (l9_1738==1)
{
l9_1737=fract(l9_1737);
}
else
{
if (l9_1738==2)
{
float l9_1739=fract(l9_1737);
float l9_1740=l9_1737-l9_1739;
float l9_1741=step(0.25,fract(l9_1740*0.5));
l9_1737=mix(l9_1739,1.0-l9_1739,fast::clamp(l9_1741,0.0,1.0));
}
}
l9_1726.x=l9_1737;
float l9_1742=l9_1726.y;
int l9_1743=l9_1729.y;
if (l9_1743==1)
{
l9_1742=fract(l9_1742);
}
else
{
if (l9_1743==2)
{
float l9_1744=fract(l9_1742);
float l9_1745=l9_1742-l9_1744;
float l9_1746=step(0.25,fract(l9_1745*0.5));
l9_1742=mix(l9_1744,1.0-l9_1744,fast::clamp(l9_1746,0.0,1.0));
}
}
l9_1726.y=l9_1742;
if (l9_1730)
{
bool l9_1747=l9_1732;
bool l9_1748;
if (l9_1747)
{
l9_1748=l9_1729.x==3;
}
else
{
l9_1748=l9_1747;
}
float l9_1749=l9_1726.x;
float l9_1750=l9_1731.x;
float l9_1751=l9_1731.z;
bool l9_1752=l9_1748;
float l9_1753=l9_1736;
float l9_1754=fast::clamp(l9_1749,l9_1750,l9_1751);
float l9_1755=step(abs(l9_1749-l9_1754),9.9999997e-06);
l9_1753*=(l9_1755+((1.0-float(l9_1752))*(1.0-l9_1755)));
l9_1749=l9_1754;
l9_1726.x=l9_1749;
l9_1736=l9_1753;
bool l9_1756=l9_1732;
bool l9_1757;
if (l9_1756)
{
l9_1757=l9_1729.y==3;
}
else
{
l9_1757=l9_1756;
}
float l9_1758=l9_1726.y;
float l9_1759=l9_1731.y;
float l9_1760=l9_1731.w;
bool l9_1761=l9_1757;
float l9_1762=l9_1736;
float l9_1763=fast::clamp(l9_1758,l9_1759,l9_1760);
float l9_1764=step(abs(l9_1758-l9_1763),9.9999997e-06);
l9_1762*=(l9_1764+((1.0-float(l9_1761))*(1.0-l9_1764)));
l9_1758=l9_1763;
l9_1726.y=l9_1758;
l9_1736=l9_1762;
}
float2 l9_1765=l9_1726;
bool l9_1766=l9_1727;
float3x3 l9_1767=l9_1728;
if (l9_1766)
{
l9_1765=float2((l9_1767*float3(l9_1765,1.0)).xy);
}
float2 l9_1768=l9_1765;
l9_1726=l9_1768;
float l9_1769=l9_1726.x;
int l9_1770=l9_1729.x;
bool l9_1771=l9_1735;
float l9_1772=l9_1736;
if ((l9_1770==0)||(l9_1770==3))
{
float l9_1773=l9_1769;
float l9_1774=0.0;
float l9_1775=1.0;
bool l9_1776=l9_1771;
float l9_1777=l9_1772;
float l9_1778=fast::clamp(l9_1773,l9_1774,l9_1775);
float l9_1779=step(abs(l9_1773-l9_1778),9.9999997e-06);
l9_1777*=(l9_1779+((1.0-float(l9_1776))*(1.0-l9_1779)));
l9_1773=l9_1778;
l9_1769=l9_1773;
l9_1772=l9_1777;
}
l9_1726.x=l9_1769;
l9_1736=l9_1772;
float l9_1780=l9_1726.y;
int l9_1781=l9_1729.y;
bool l9_1782=l9_1735;
float l9_1783=l9_1736;
if ((l9_1781==0)||(l9_1781==3))
{
float l9_1784=l9_1780;
float l9_1785=0.0;
float l9_1786=1.0;
bool l9_1787=l9_1782;
float l9_1788=l9_1783;
float l9_1789=fast::clamp(l9_1784,l9_1785,l9_1786);
float l9_1790=step(abs(l9_1784-l9_1789),9.9999997e-06);
l9_1788*=(l9_1790+((1.0-float(l9_1787))*(1.0-l9_1790)));
l9_1784=l9_1789;
l9_1780=l9_1784;
l9_1783=l9_1788;
}
l9_1726.y=l9_1780;
l9_1736=l9_1783;
float2 l9_1791=l9_1726;
int l9_1792=l9_1724;
int l9_1793=l9_1725;
float l9_1794=l9_1734;
float2 l9_1795=l9_1791;
int l9_1796=l9_1792;
int l9_1797=l9_1793;
float3 l9_1798=float3(0.0);
if (l9_1796==0)
{
l9_1798=float3(l9_1795,0.0);
}
else
{
if (l9_1796==1)
{
l9_1798=float3(l9_1795.x,(l9_1795.y*0.5)+(0.5-(float(l9_1797)*0.5)),0.0);
}
else
{
l9_1798=float3(l9_1795,float(l9_1797));
}
}
float3 l9_1799=l9_1798;
float3 l9_1800=l9_1799;
float4 l9_1801=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_1800.xy,level(l9_1794));
float4 l9_1802=l9_1801;
if (l9_1732)
{
l9_1802=mix(l9_1733,l9_1802,float4(l9_1736));
}
float4 l9_1803=l9_1802;
l9_1713=l9_1803.x;
float l9_1804=l9_1713;
float l9_1805=l9_1804;
float l9_1806=(float(l9_1335)*l9_1328)+N319_res;
float l9_1807=0.0;
float l9_1808=(*sc_set0.UserUniforms).Tweak_N297_curveData.x;
float l9_1809=(*sc_set0.UserUniforms).Tweak_N297_curveData.y;
float l9_1810=(*sc_set0.UserUniforms).Tweak_N297_curveData.z;
float l9_1811=(l9_1806-l9_1809)/(l9_1810-l9_1809);
float2 l9_1812=float2(l9_1811,l9_1808);
l9_1812=fast::clamp(l9_1812,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_1813=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1813=0;
}
else
{
l9_1813=gl_InstanceIndex%2;
}
int l9_1814=l9_1813;
l9_1334=1-l9_1814;
}
else
{
int l9_1815=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1815=0;
}
else
{
l9_1815=gl_InstanceIndex%2;
}
int l9_1816=l9_1815;
l9_1334=l9_1816;
}
int l9_1817=l9_1334;
int l9_1818=sc_CurveAtlasLayout_tmp;
int l9_1819=l9_1817;
float2 l9_1820=l9_1812;
bool l9_1821=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_1822=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_1823=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_1824=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_1825=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_1826=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_1827=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_1828=0.0;
bool l9_1829=l9_1826&&(!l9_1824);
float l9_1830=1.0;
float l9_1831=l9_1820.x;
int l9_1832=l9_1823.x;
if (l9_1832==1)
{
l9_1831=fract(l9_1831);
}
else
{
if (l9_1832==2)
{
float l9_1833=fract(l9_1831);
float l9_1834=l9_1831-l9_1833;
float l9_1835=step(0.25,fract(l9_1834*0.5));
l9_1831=mix(l9_1833,1.0-l9_1833,fast::clamp(l9_1835,0.0,1.0));
}
}
l9_1820.x=l9_1831;
float l9_1836=l9_1820.y;
int l9_1837=l9_1823.y;
if (l9_1837==1)
{
l9_1836=fract(l9_1836);
}
else
{
if (l9_1837==2)
{
float l9_1838=fract(l9_1836);
float l9_1839=l9_1836-l9_1838;
float l9_1840=step(0.25,fract(l9_1839*0.5));
l9_1836=mix(l9_1838,1.0-l9_1838,fast::clamp(l9_1840,0.0,1.0));
}
}
l9_1820.y=l9_1836;
if (l9_1824)
{
bool l9_1841=l9_1826;
bool l9_1842;
if (l9_1841)
{
l9_1842=l9_1823.x==3;
}
else
{
l9_1842=l9_1841;
}
float l9_1843=l9_1820.x;
float l9_1844=l9_1825.x;
float l9_1845=l9_1825.z;
bool l9_1846=l9_1842;
float l9_1847=l9_1830;
float l9_1848=fast::clamp(l9_1843,l9_1844,l9_1845);
float l9_1849=step(abs(l9_1843-l9_1848),9.9999997e-06);
l9_1847*=(l9_1849+((1.0-float(l9_1846))*(1.0-l9_1849)));
l9_1843=l9_1848;
l9_1820.x=l9_1843;
l9_1830=l9_1847;
bool l9_1850=l9_1826;
bool l9_1851;
if (l9_1850)
{
l9_1851=l9_1823.y==3;
}
else
{
l9_1851=l9_1850;
}
float l9_1852=l9_1820.y;
float l9_1853=l9_1825.y;
float l9_1854=l9_1825.w;
bool l9_1855=l9_1851;
float l9_1856=l9_1830;
float l9_1857=fast::clamp(l9_1852,l9_1853,l9_1854);
float l9_1858=step(abs(l9_1852-l9_1857),9.9999997e-06);
l9_1856*=(l9_1858+((1.0-float(l9_1855))*(1.0-l9_1858)));
l9_1852=l9_1857;
l9_1820.y=l9_1852;
l9_1830=l9_1856;
}
float2 l9_1859=l9_1820;
bool l9_1860=l9_1821;
float3x3 l9_1861=l9_1822;
if (l9_1860)
{
l9_1859=float2((l9_1861*float3(l9_1859,1.0)).xy);
}
float2 l9_1862=l9_1859;
l9_1820=l9_1862;
float l9_1863=l9_1820.x;
int l9_1864=l9_1823.x;
bool l9_1865=l9_1829;
float l9_1866=l9_1830;
if ((l9_1864==0)||(l9_1864==3))
{
float l9_1867=l9_1863;
float l9_1868=0.0;
float l9_1869=1.0;
bool l9_1870=l9_1865;
float l9_1871=l9_1866;
float l9_1872=fast::clamp(l9_1867,l9_1868,l9_1869);
float l9_1873=step(abs(l9_1867-l9_1872),9.9999997e-06);
l9_1871*=(l9_1873+((1.0-float(l9_1870))*(1.0-l9_1873)));
l9_1867=l9_1872;
l9_1863=l9_1867;
l9_1866=l9_1871;
}
l9_1820.x=l9_1863;
l9_1830=l9_1866;
float l9_1874=l9_1820.y;
int l9_1875=l9_1823.y;
bool l9_1876=l9_1829;
float l9_1877=l9_1830;
if ((l9_1875==0)||(l9_1875==3))
{
float l9_1878=l9_1874;
float l9_1879=0.0;
float l9_1880=1.0;
bool l9_1881=l9_1876;
float l9_1882=l9_1877;
float l9_1883=fast::clamp(l9_1878,l9_1879,l9_1880);
float l9_1884=step(abs(l9_1878-l9_1883),9.9999997e-06);
l9_1882*=(l9_1884+((1.0-float(l9_1881))*(1.0-l9_1884)));
l9_1878=l9_1883;
l9_1874=l9_1878;
l9_1877=l9_1882;
}
l9_1820.y=l9_1874;
l9_1830=l9_1877;
float2 l9_1885=l9_1820;
int l9_1886=l9_1818;
int l9_1887=l9_1819;
float l9_1888=l9_1828;
float2 l9_1889=l9_1885;
int l9_1890=l9_1886;
int l9_1891=l9_1887;
float3 l9_1892=float3(0.0);
if (l9_1890==0)
{
l9_1892=float3(l9_1889,0.0);
}
else
{
if (l9_1890==1)
{
l9_1892=float3(l9_1889.x,(l9_1889.y*0.5)+(0.5-(float(l9_1891)*0.5)),0.0);
}
else
{
l9_1892=float3(l9_1889,float(l9_1891));
}
}
float3 l9_1893=l9_1892;
float3 l9_1894=l9_1893;
float4 l9_1895=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_1894.xy,level(l9_1888));
float4 l9_1896=l9_1895;
if (l9_1826)
{
l9_1896=mix(l9_1827,l9_1896,float4(l9_1830));
}
float4 l9_1897=l9_1896;
l9_1807=l9_1897.x;
float l9_1898=l9_1807;
float3 l9_1899=float3(l9_1711,l9_1805,l9_1898);
l9_1323+=normalize(l9_1899-l9_1617);
l9_1335++;
continue;
}
else
{
break;
}
}
l9_1323=normalize(l9_1323);
l9_1324=normalize(cross(l9_1323,float3(0.0099990005,0.99990004,0.0099990005)));
l9_1325=normalize(cross(l9_1323,l9_1324));
float l9_1900=l9_1322;
float l9_1901=0.0;
float l9_1902=(*sc_set0.UserUniforms).Tweak_N293_curveData.x;
float l9_1903=(*sc_set0.UserUniforms).Tweak_N293_curveData.y;
float l9_1904=(*sc_set0.UserUniforms).Tweak_N293_curveData.z;
float l9_1905=(l9_1900-l9_1903)/(l9_1904-l9_1903);
float2 l9_1906=float2(l9_1905,l9_1902);
l9_1906=fast::clamp(l9_1906,float2(0.0),float2(1.0));
int l9_1907;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_1908=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1908=0;
}
else
{
l9_1908=gl_InstanceIndex%2;
}
int l9_1909=l9_1908;
l9_1907=1-l9_1909;
}
else
{
int l9_1910=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1910=0;
}
else
{
l9_1910=gl_InstanceIndex%2;
}
int l9_1911=l9_1910;
l9_1907=l9_1911;
}
int l9_1912=l9_1907;
int l9_1913=sc_CurveAtlasLayout_tmp;
int l9_1914=l9_1912;
float2 l9_1915=l9_1906;
bool l9_1916=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_1917=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_1918=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_1919=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_1920=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_1921=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_1922=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_1923=0.0;
bool l9_1924=l9_1921&&(!l9_1919);
float l9_1925=1.0;
float l9_1926=l9_1915.x;
int l9_1927=l9_1918.x;
if (l9_1927==1)
{
l9_1926=fract(l9_1926);
}
else
{
if (l9_1927==2)
{
float l9_1928=fract(l9_1926);
float l9_1929=l9_1926-l9_1928;
float l9_1930=step(0.25,fract(l9_1929*0.5));
l9_1926=mix(l9_1928,1.0-l9_1928,fast::clamp(l9_1930,0.0,1.0));
}
}
l9_1915.x=l9_1926;
float l9_1931=l9_1915.y;
int l9_1932=l9_1918.y;
if (l9_1932==1)
{
l9_1931=fract(l9_1931);
}
else
{
if (l9_1932==2)
{
float l9_1933=fract(l9_1931);
float l9_1934=l9_1931-l9_1933;
float l9_1935=step(0.25,fract(l9_1934*0.5));
l9_1931=mix(l9_1933,1.0-l9_1933,fast::clamp(l9_1935,0.0,1.0));
}
}
l9_1915.y=l9_1931;
if (l9_1919)
{
bool l9_1936=l9_1921;
bool l9_1937;
if (l9_1936)
{
l9_1937=l9_1918.x==3;
}
else
{
l9_1937=l9_1936;
}
float l9_1938=l9_1915.x;
float l9_1939=l9_1920.x;
float l9_1940=l9_1920.z;
bool l9_1941=l9_1937;
float l9_1942=l9_1925;
float l9_1943=fast::clamp(l9_1938,l9_1939,l9_1940);
float l9_1944=step(abs(l9_1938-l9_1943),9.9999997e-06);
l9_1942*=(l9_1944+((1.0-float(l9_1941))*(1.0-l9_1944)));
l9_1938=l9_1943;
l9_1915.x=l9_1938;
l9_1925=l9_1942;
bool l9_1945=l9_1921;
bool l9_1946;
if (l9_1945)
{
l9_1946=l9_1918.y==3;
}
else
{
l9_1946=l9_1945;
}
float l9_1947=l9_1915.y;
float l9_1948=l9_1920.y;
float l9_1949=l9_1920.w;
bool l9_1950=l9_1946;
float l9_1951=l9_1925;
float l9_1952=fast::clamp(l9_1947,l9_1948,l9_1949);
float l9_1953=step(abs(l9_1947-l9_1952),9.9999997e-06);
l9_1951*=(l9_1953+((1.0-float(l9_1950))*(1.0-l9_1953)));
l9_1947=l9_1952;
l9_1915.y=l9_1947;
l9_1925=l9_1951;
}
float2 l9_1954=l9_1915;
bool l9_1955=l9_1916;
float3x3 l9_1956=l9_1917;
if (l9_1955)
{
l9_1954=float2((l9_1956*float3(l9_1954,1.0)).xy);
}
float2 l9_1957=l9_1954;
l9_1915=l9_1957;
float l9_1958=l9_1915.x;
int l9_1959=l9_1918.x;
bool l9_1960=l9_1924;
float l9_1961=l9_1925;
if ((l9_1959==0)||(l9_1959==3))
{
float l9_1962=l9_1958;
float l9_1963=0.0;
float l9_1964=1.0;
bool l9_1965=l9_1960;
float l9_1966=l9_1961;
float l9_1967=fast::clamp(l9_1962,l9_1963,l9_1964);
float l9_1968=step(abs(l9_1962-l9_1967),9.9999997e-06);
l9_1966*=(l9_1968+((1.0-float(l9_1965))*(1.0-l9_1968)));
l9_1962=l9_1967;
l9_1958=l9_1962;
l9_1961=l9_1966;
}
l9_1915.x=l9_1958;
l9_1925=l9_1961;
float l9_1969=l9_1915.y;
int l9_1970=l9_1918.y;
bool l9_1971=l9_1924;
float l9_1972=l9_1925;
if ((l9_1970==0)||(l9_1970==3))
{
float l9_1973=l9_1969;
float l9_1974=0.0;
float l9_1975=1.0;
bool l9_1976=l9_1971;
float l9_1977=l9_1972;
float l9_1978=fast::clamp(l9_1973,l9_1974,l9_1975);
float l9_1979=step(abs(l9_1973-l9_1978),9.9999997e-06);
l9_1977*=(l9_1979+((1.0-float(l9_1976))*(1.0-l9_1979)));
l9_1973=l9_1978;
l9_1969=l9_1973;
l9_1972=l9_1977;
}
l9_1915.y=l9_1969;
l9_1925=l9_1972;
float2 l9_1980=l9_1915;
int l9_1981=l9_1913;
int l9_1982=l9_1914;
float l9_1983=l9_1923;
float2 l9_1984=l9_1980;
int l9_1985=l9_1981;
int l9_1986=l9_1982;
float3 l9_1987=float3(0.0);
if (l9_1985==0)
{
l9_1987=float3(l9_1984,0.0);
}
else
{
if (l9_1985==1)
{
l9_1987=float3(l9_1984.x,(l9_1984.y*0.5)+(0.5-(float(l9_1986)*0.5)),0.0);
}
else
{
l9_1987=float3(l9_1984,float(l9_1986));
}
}
float3 l9_1988=l9_1987;
float3 l9_1989=l9_1988;
float4 l9_1990=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_1989.xy,level(l9_1983));
float4 l9_1991=l9_1990;
if (l9_1921)
{
l9_1991=mix(l9_1922,l9_1991,float4(l9_1925));
}
float4 l9_1992=l9_1991;
l9_1901=l9_1992.x;
float l9_1993=l9_1901;
float l9_1994=l9_1993;
float l9_1995=l9_1322;
float l9_1996=0.0;
float l9_1997=(*sc_set0.UserUniforms).Tweak_N305_curveData.x;
float l9_1998=(*sc_set0.UserUniforms).Tweak_N305_curveData.y;
float l9_1999=(*sc_set0.UserUniforms).Tweak_N305_curveData.z;
float l9_2000=(l9_1995-l9_1998)/(l9_1999-l9_1998);
float2 l9_2001=float2(l9_2000,l9_1997);
l9_2001=fast::clamp(l9_2001,float2(0.0),float2(1.0));
int l9_2002;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_2003=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2003=0;
}
else
{
l9_2003=gl_InstanceIndex%2;
}
int l9_2004=l9_2003;
l9_2002=1-l9_2004;
}
else
{
int l9_2005=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2005=0;
}
else
{
l9_2005=gl_InstanceIndex%2;
}
int l9_2006=l9_2005;
l9_2002=l9_2006;
}
int l9_2007=l9_2002;
int l9_2008=sc_CurveAtlasLayout_tmp;
int l9_2009=l9_2007;
float2 l9_2010=l9_2001;
bool l9_2011=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_2012=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_2013=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_2014=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_2015=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_2016=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_2017=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_2018=0.0;
bool l9_2019=l9_2016&&(!l9_2014);
float l9_2020=1.0;
float l9_2021=l9_2010.x;
int l9_2022=l9_2013.x;
if (l9_2022==1)
{
l9_2021=fract(l9_2021);
}
else
{
if (l9_2022==2)
{
float l9_2023=fract(l9_2021);
float l9_2024=l9_2021-l9_2023;
float l9_2025=step(0.25,fract(l9_2024*0.5));
l9_2021=mix(l9_2023,1.0-l9_2023,fast::clamp(l9_2025,0.0,1.0));
}
}
l9_2010.x=l9_2021;
float l9_2026=l9_2010.y;
int l9_2027=l9_2013.y;
if (l9_2027==1)
{
l9_2026=fract(l9_2026);
}
else
{
if (l9_2027==2)
{
float l9_2028=fract(l9_2026);
float l9_2029=l9_2026-l9_2028;
float l9_2030=step(0.25,fract(l9_2029*0.5));
l9_2026=mix(l9_2028,1.0-l9_2028,fast::clamp(l9_2030,0.0,1.0));
}
}
l9_2010.y=l9_2026;
if (l9_2014)
{
bool l9_2031=l9_2016;
bool l9_2032;
if (l9_2031)
{
l9_2032=l9_2013.x==3;
}
else
{
l9_2032=l9_2031;
}
float l9_2033=l9_2010.x;
float l9_2034=l9_2015.x;
float l9_2035=l9_2015.z;
bool l9_2036=l9_2032;
float l9_2037=l9_2020;
float l9_2038=fast::clamp(l9_2033,l9_2034,l9_2035);
float l9_2039=step(abs(l9_2033-l9_2038),9.9999997e-06);
l9_2037*=(l9_2039+((1.0-float(l9_2036))*(1.0-l9_2039)));
l9_2033=l9_2038;
l9_2010.x=l9_2033;
l9_2020=l9_2037;
bool l9_2040=l9_2016;
bool l9_2041;
if (l9_2040)
{
l9_2041=l9_2013.y==3;
}
else
{
l9_2041=l9_2040;
}
float l9_2042=l9_2010.y;
float l9_2043=l9_2015.y;
float l9_2044=l9_2015.w;
bool l9_2045=l9_2041;
float l9_2046=l9_2020;
float l9_2047=fast::clamp(l9_2042,l9_2043,l9_2044);
float l9_2048=step(abs(l9_2042-l9_2047),9.9999997e-06);
l9_2046*=(l9_2048+((1.0-float(l9_2045))*(1.0-l9_2048)));
l9_2042=l9_2047;
l9_2010.y=l9_2042;
l9_2020=l9_2046;
}
float2 l9_2049=l9_2010;
bool l9_2050=l9_2011;
float3x3 l9_2051=l9_2012;
if (l9_2050)
{
l9_2049=float2((l9_2051*float3(l9_2049,1.0)).xy);
}
float2 l9_2052=l9_2049;
l9_2010=l9_2052;
float l9_2053=l9_2010.x;
int l9_2054=l9_2013.x;
bool l9_2055=l9_2019;
float l9_2056=l9_2020;
if ((l9_2054==0)||(l9_2054==3))
{
float l9_2057=l9_2053;
float l9_2058=0.0;
float l9_2059=1.0;
bool l9_2060=l9_2055;
float l9_2061=l9_2056;
float l9_2062=fast::clamp(l9_2057,l9_2058,l9_2059);
float l9_2063=step(abs(l9_2057-l9_2062),9.9999997e-06);
l9_2061*=(l9_2063+((1.0-float(l9_2060))*(1.0-l9_2063)));
l9_2057=l9_2062;
l9_2053=l9_2057;
l9_2056=l9_2061;
}
l9_2010.x=l9_2053;
l9_2020=l9_2056;
float l9_2064=l9_2010.y;
int l9_2065=l9_2013.y;
bool l9_2066=l9_2019;
float l9_2067=l9_2020;
if ((l9_2065==0)||(l9_2065==3))
{
float l9_2068=l9_2064;
float l9_2069=0.0;
float l9_2070=1.0;
bool l9_2071=l9_2066;
float l9_2072=l9_2067;
float l9_2073=fast::clamp(l9_2068,l9_2069,l9_2070);
float l9_2074=step(abs(l9_2068-l9_2073),9.9999997e-06);
l9_2072*=(l9_2074+((1.0-float(l9_2071))*(1.0-l9_2074)));
l9_2068=l9_2073;
l9_2064=l9_2068;
l9_2067=l9_2072;
}
l9_2010.y=l9_2064;
l9_2020=l9_2067;
float2 l9_2075=l9_2010;
int l9_2076=l9_2008;
int l9_2077=l9_2009;
float l9_2078=l9_2018;
float2 l9_2079=l9_2075;
int l9_2080=l9_2076;
int l9_2081=l9_2077;
float3 l9_2082=float3(0.0);
if (l9_2080==0)
{
l9_2082=float3(l9_2079,0.0);
}
else
{
if (l9_2080==1)
{
l9_2082=float3(l9_2079.x,(l9_2079.y*0.5)+(0.5-(float(l9_2081)*0.5)),0.0);
}
else
{
l9_2082=float3(l9_2079,float(l9_2081));
}
}
float3 l9_2083=l9_2082;
float3 l9_2084=l9_2083;
float4 l9_2085=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_2084.xy,level(l9_2078));
float4 l9_2086=l9_2085;
if (l9_2016)
{
l9_2086=mix(l9_2017,l9_2086,float4(l9_2020));
}
float4 l9_2087=l9_2086;
l9_1996=l9_2087.x;
float l9_2088=l9_1996;
float l9_2089=l9_2088;
float l9_2090=l9_1322;
float l9_2091=0.0;
float l9_2092=(*sc_set0.UserUniforms).Tweak_N297_curveData.x;
float l9_2093=(*sc_set0.UserUniforms).Tweak_N297_curveData.y;
float l9_2094=(*sc_set0.UserUniforms).Tweak_N297_curveData.z;
float l9_2095=(l9_2090-l9_2093)/(l9_2094-l9_2093);
float2 l9_2096=float2(l9_2095,l9_2092);
l9_2096=fast::clamp(l9_2096,float2(0.0),float2(1.0));
int l9_2097;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_2098=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2098=0;
}
else
{
l9_2098=gl_InstanceIndex%2;
}
int l9_2099=l9_2098;
l9_2097=1-l9_2099;
}
else
{
int l9_2100=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2100=0;
}
else
{
l9_2100=gl_InstanceIndex%2;
}
int l9_2101=l9_2100;
l9_2097=l9_2101;
}
int l9_2102=l9_2097;
int l9_2103=sc_CurveAtlasLayout_tmp;
int l9_2104=l9_2102;
float2 l9_2105=l9_2096;
bool l9_2106=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_2107=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_2108=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_2109=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_2110=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_2111=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_2112=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_2113=0.0;
bool l9_2114=l9_2111&&(!l9_2109);
float l9_2115=1.0;
float l9_2116=l9_2105.x;
int l9_2117=l9_2108.x;
if (l9_2117==1)
{
l9_2116=fract(l9_2116);
}
else
{
if (l9_2117==2)
{
float l9_2118=fract(l9_2116);
float l9_2119=l9_2116-l9_2118;
float l9_2120=step(0.25,fract(l9_2119*0.5));
l9_2116=mix(l9_2118,1.0-l9_2118,fast::clamp(l9_2120,0.0,1.0));
}
}
l9_2105.x=l9_2116;
float l9_2121=l9_2105.y;
int l9_2122=l9_2108.y;
if (l9_2122==1)
{
l9_2121=fract(l9_2121);
}
else
{
if (l9_2122==2)
{
float l9_2123=fract(l9_2121);
float l9_2124=l9_2121-l9_2123;
float l9_2125=step(0.25,fract(l9_2124*0.5));
l9_2121=mix(l9_2123,1.0-l9_2123,fast::clamp(l9_2125,0.0,1.0));
}
}
l9_2105.y=l9_2121;
if (l9_2109)
{
bool l9_2126=l9_2111;
bool l9_2127;
if (l9_2126)
{
l9_2127=l9_2108.x==3;
}
else
{
l9_2127=l9_2126;
}
float l9_2128=l9_2105.x;
float l9_2129=l9_2110.x;
float l9_2130=l9_2110.z;
bool l9_2131=l9_2127;
float l9_2132=l9_2115;
float l9_2133=fast::clamp(l9_2128,l9_2129,l9_2130);
float l9_2134=step(abs(l9_2128-l9_2133),9.9999997e-06);
l9_2132*=(l9_2134+((1.0-float(l9_2131))*(1.0-l9_2134)));
l9_2128=l9_2133;
l9_2105.x=l9_2128;
l9_2115=l9_2132;
bool l9_2135=l9_2111;
bool l9_2136;
if (l9_2135)
{
l9_2136=l9_2108.y==3;
}
else
{
l9_2136=l9_2135;
}
float l9_2137=l9_2105.y;
float l9_2138=l9_2110.y;
float l9_2139=l9_2110.w;
bool l9_2140=l9_2136;
float l9_2141=l9_2115;
float l9_2142=fast::clamp(l9_2137,l9_2138,l9_2139);
float l9_2143=step(abs(l9_2137-l9_2142),9.9999997e-06);
l9_2141*=(l9_2143+((1.0-float(l9_2140))*(1.0-l9_2143)));
l9_2137=l9_2142;
l9_2105.y=l9_2137;
l9_2115=l9_2141;
}
float2 l9_2144=l9_2105;
bool l9_2145=l9_2106;
float3x3 l9_2146=l9_2107;
if (l9_2145)
{
l9_2144=float2((l9_2146*float3(l9_2144,1.0)).xy);
}
float2 l9_2147=l9_2144;
l9_2105=l9_2147;
float l9_2148=l9_2105.x;
int l9_2149=l9_2108.x;
bool l9_2150=l9_2114;
float l9_2151=l9_2115;
if ((l9_2149==0)||(l9_2149==3))
{
float l9_2152=l9_2148;
float l9_2153=0.0;
float l9_2154=1.0;
bool l9_2155=l9_2150;
float l9_2156=l9_2151;
float l9_2157=fast::clamp(l9_2152,l9_2153,l9_2154);
float l9_2158=step(abs(l9_2152-l9_2157),9.9999997e-06);
l9_2156*=(l9_2158+((1.0-float(l9_2155))*(1.0-l9_2158)));
l9_2152=l9_2157;
l9_2148=l9_2152;
l9_2151=l9_2156;
}
l9_2105.x=l9_2148;
l9_2115=l9_2151;
float l9_2159=l9_2105.y;
int l9_2160=l9_2108.y;
bool l9_2161=l9_2114;
float l9_2162=l9_2115;
if ((l9_2160==0)||(l9_2160==3))
{
float l9_2163=l9_2159;
float l9_2164=0.0;
float l9_2165=1.0;
bool l9_2166=l9_2161;
float l9_2167=l9_2162;
float l9_2168=fast::clamp(l9_2163,l9_2164,l9_2165);
float l9_2169=step(abs(l9_2163-l9_2168),9.9999997e-06);
l9_2167*=(l9_2169+((1.0-float(l9_2166))*(1.0-l9_2169)));
l9_2163=l9_2168;
l9_2159=l9_2163;
l9_2162=l9_2167;
}
l9_2105.y=l9_2159;
l9_2115=l9_2162;
float2 l9_2170=l9_2105;
int l9_2171=l9_2103;
int l9_2172=l9_2104;
float l9_2173=l9_2113;
float2 l9_2174=l9_2170;
int l9_2175=l9_2171;
int l9_2176=l9_2172;
float3 l9_2177=float3(0.0);
if (l9_2175==0)
{
l9_2177=float3(l9_2174,0.0);
}
else
{
if (l9_2175==1)
{
l9_2177=float3(l9_2174.x,(l9_2174.y*0.5)+(0.5-(float(l9_2176)*0.5)),0.0);
}
else
{
l9_2177=float3(l9_2174,float(l9_2176));
}
}
float3 l9_2178=l9_2177;
float3 l9_2179=l9_2178;
float4 l9_2180=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_2179.xy,level(l9_2173));
float4 l9_2181=l9_2180;
if (l9_2111)
{
l9_2181=mix(l9_2112,l9_2181,float4(l9_2115));
}
float4 l9_2182=l9_2181;
l9_2091=l9_2182.x;
float l9_2183=l9_2091;
float3 l9_2184=float3(l9_1994,l9_2089,l9_2183);
float l9_2185=l9_1322+N319_res;
float l9_2186=0.0;
float l9_2187=(*sc_set0.UserUniforms).Tweak_N293_curveData.x;
float l9_2188=(*sc_set0.UserUniforms).Tweak_N293_curveData.y;
float l9_2189=(*sc_set0.UserUniforms).Tweak_N293_curveData.z;
float l9_2190=(l9_2185-l9_2188)/(l9_2189-l9_2188);
float2 l9_2191=float2(l9_2190,l9_2187);
l9_2191=fast::clamp(l9_2191,float2(0.0),float2(1.0));
int l9_2192;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_2193=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2193=0;
}
else
{
l9_2193=gl_InstanceIndex%2;
}
int l9_2194=l9_2193;
l9_2192=1-l9_2194;
}
else
{
int l9_2195=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2195=0;
}
else
{
l9_2195=gl_InstanceIndex%2;
}
int l9_2196=l9_2195;
l9_2192=l9_2196;
}
int l9_2197=l9_2192;
int l9_2198=sc_CurveAtlasLayout_tmp;
int l9_2199=l9_2197;
float2 l9_2200=l9_2191;
bool l9_2201=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_2202=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_2203=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_2204=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_2205=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_2206=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_2207=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_2208=0.0;
bool l9_2209=l9_2206&&(!l9_2204);
float l9_2210=1.0;
float l9_2211=l9_2200.x;
int l9_2212=l9_2203.x;
if (l9_2212==1)
{
l9_2211=fract(l9_2211);
}
else
{
if (l9_2212==2)
{
float l9_2213=fract(l9_2211);
float l9_2214=l9_2211-l9_2213;
float l9_2215=step(0.25,fract(l9_2214*0.5));
l9_2211=mix(l9_2213,1.0-l9_2213,fast::clamp(l9_2215,0.0,1.0));
}
}
l9_2200.x=l9_2211;
float l9_2216=l9_2200.y;
int l9_2217=l9_2203.y;
if (l9_2217==1)
{
l9_2216=fract(l9_2216);
}
else
{
if (l9_2217==2)
{
float l9_2218=fract(l9_2216);
float l9_2219=l9_2216-l9_2218;
float l9_2220=step(0.25,fract(l9_2219*0.5));
l9_2216=mix(l9_2218,1.0-l9_2218,fast::clamp(l9_2220,0.0,1.0));
}
}
l9_2200.y=l9_2216;
if (l9_2204)
{
bool l9_2221=l9_2206;
bool l9_2222;
if (l9_2221)
{
l9_2222=l9_2203.x==3;
}
else
{
l9_2222=l9_2221;
}
float l9_2223=l9_2200.x;
float l9_2224=l9_2205.x;
float l9_2225=l9_2205.z;
bool l9_2226=l9_2222;
float l9_2227=l9_2210;
float l9_2228=fast::clamp(l9_2223,l9_2224,l9_2225);
float l9_2229=step(abs(l9_2223-l9_2228),9.9999997e-06);
l9_2227*=(l9_2229+((1.0-float(l9_2226))*(1.0-l9_2229)));
l9_2223=l9_2228;
l9_2200.x=l9_2223;
l9_2210=l9_2227;
bool l9_2230=l9_2206;
bool l9_2231;
if (l9_2230)
{
l9_2231=l9_2203.y==3;
}
else
{
l9_2231=l9_2230;
}
float l9_2232=l9_2200.y;
float l9_2233=l9_2205.y;
float l9_2234=l9_2205.w;
bool l9_2235=l9_2231;
float l9_2236=l9_2210;
float l9_2237=fast::clamp(l9_2232,l9_2233,l9_2234);
float l9_2238=step(abs(l9_2232-l9_2237),9.9999997e-06);
l9_2236*=(l9_2238+((1.0-float(l9_2235))*(1.0-l9_2238)));
l9_2232=l9_2237;
l9_2200.y=l9_2232;
l9_2210=l9_2236;
}
float2 l9_2239=l9_2200;
bool l9_2240=l9_2201;
float3x3 l9_2241=l9_2202;
if (l9_2240)
{
l9_2239=float2((l9_2241*float3(l9_2239,1.0)).xy);
}
float2 l9_2242=l9_2239;
l9_2200=l9_2242;
float l9_2243=l9_2200.x;
int l9_2244=l9_2203.x;
bool l9_2245=l9_2209;
float l9_2246=l9_2210;
if ((l9_2244==0)||(l9_2244==3))
{
float l9_2247=l9_2243;
float l9_2248=0.0;
float l9_2249=1.0;
bool l9_2250=l9_2245;
float l9_2251=l9_2246;
float l9_2252=fast::clamp(l9_2247,l9_2248,l9_2249);
float l9_2253=step(abs(l9_2247-l9_2252),9.9999997e-06);
l9_2251*=(l9_2253+((1.0-float(l9_2250))*(1.0-l9_2253)));
l9_2247=l9_2252;
l9_2243=l9_2247;
l9_2246=l9_2251;
}
l9_2200.x=l9_2243;
l9_2210=l9_2246;
float l9_2254=l9_2200.y;
int l9_2255=l9_2203.y;
bool l9_2256=l9_2209;
float l9_2257=l9_2210;
if ((l9_2255==0)||(l9_2255==3))
{
float l9_2258=l9_2254;
float l9_2259=0.0;
float l9_2260=1.0;
bool l9_2261=l9_2256;
float l9_2262=l9_2257;
float l9_2263=fast::clamp(l9_2258,l9_2259,l9_2260);
float l9_2264=step(abs(l9_2258-l9_2263),9.9999997e-06);
l9_2262*=(l9_2264+((1.0-float(l9_2261))*(1.0-l9_2264)));
l9_2258=l9_2263;
l9_2254=l9_2258;
l9_2257=l9_2262;
}
l9_2200.y=l9_2254;
l9_2210=l9_2257;
float2 l9_2265=l9_2200;
int l9_2266=l9_2198;
int l9_2267=l9_2199;
float l9_2268=l9_2208;
float2 l9_2269=l9_2265;
int l9_2270=l9_2266;
int l9_2271=l9_2267;
float3 l9_2272=float3(0.0);
if (l9_2270==0)
{
l9_2272=float3(l9_2269,0.0);
}
else
{
if (l9_2270==1)
{
l9_2272=float3(l9_2269.x,(l9_2269.y*0.5)+(0.5-(float(l9_2271)*0.5)),0.0);
}
else
{
l9_2272=float3(l9_2269,float(l9_2271));
}
}
float3 l9_2273=l9_2272;
float3 l9_2274=l9_2273;
float4 l9_2275=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_2274.xy,level(l9_2268));
float4 l9_2276=l9_2275;
if (l9_2206)
{
l9_2276=mix(l9_2207,l9_2276,float4(l9_2210));
}
float4 l9_2277=l9_2276;
l9_2186=l9_2277.x;
float l9_2278=l9_2186;
float l9_2279=l9_2278;
float l9_2280=l9_1322+N319_res;
float l9_2281=0.0;
float l9_2282=(*sc_set0.UserUniforms).Tweak_N305_curveData.x;
float l9_2283=(*sc_set0.UserUniforms).Tweak_N305_curveData.y;
float l9_2284=(*sc_set0.UserUniforms).Tweak_N305_curveData.z;
float l9_2285=(l9_2280-l9_2283)/(l9_2284-l9_2283);
float2 l9_2286=float2(l9_2285,l9_2282);
l9_2286=fast::clamp(l9_2286,float2(0.0),float2(1.0));
int l9_2287;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_2288=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2288=0;
}
else
{
l9_2288=gl_InstanceIndex%2;
}
int l9_2289=l9_2288;
l9_2287=1-l9_2289;
}
else
{
int l9_2290=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2290=0;
}
else
{
l9_2290=gl_InstanceIndex%2;
}
int l9_2291=l9_2290;
l9_2287=l9_2291;
}
int l9_2292=l9_2287;
int l9_2293=sc_CurveAtlasLayout_tmp;
int l9_2294=l9_2292;
float2 l9_2295=l9_2286;
bool l9_2296=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_2297=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_2298=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_2299=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_2300=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_2301=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_2302=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_2303=0.0;
bool l9_2304=l9_2301&&(!l9_2299);
float l9_2305=1.0;
float l9_2306=l9_2295.x;
int l9_2307=l9_2298.x;
if (l9_2307==1)
{
l9_2306=fract(l9_2306);
}
else
{
if (l9_2307==2)
{
float l9_2308=fract(l9_2306);
float l9_2309=l9_2306-l9_2308;
float l9_2310=step(0.25,fract(l9_2309*0.5));
l9_2306=mix(l9_2308,1.0-l9_2308,fast::clamp(l9_2310,0.0,1.0));
}
}
l9_2295.x=l9_2306;
float l9_2311=l9_2295.y;
int l9_2312=l9_2298.y;
if (l9_2312==1)
{
l9_2311=fract(l9_2311);
}
else
{
if (l9_2312==2)
{
float l9_2313=fract(l9_2311);
float l9_2314=l9_2311-l9_2313;
float l9_2315=step(0.25,fract(l9_2314*0.5));
l9_2311=mix(l9_2313,1.0-l9_2313,fast::clamp(l9_2315,0.0,1.0));
}
}
l9_2295.y=l9_2311;
if (l9_2299)
{
bool l9_2316=l9_2301;
bool l9_2317;
if (l9_2316)
{
l9_2317=l9_2298.x==3;
}
else
{
l9_2317=l9_2316;
}
float l9_2318=l9_2295.x;
float l9_2319=l9_2300.x;
float l9_2320=l9_2300.z;
bool l9_2321=l9_2317;
float l9_2322=l9_2305;
float l9_2323=fast::clamp(l9_2318,l9_2319,l9_2320);
float l9_2324=step(abs(l9_2318-l9_2323),9.9999997e-06);
l9_2322*=(l9_2324+((1.0-float(l9_2321))*(1.0-l9_2324)));
l9_2318=l9_2323;
l9_2295.x=l9_2318;
l9_2305=l9_2322;
bool l9_2325=l9_2301;
bool l9_2326;
if (l9_2325)
{
l9_2326=l9_2298.y==3;
}
else
{
l9_2326=l9_2325;
}
float l9_2327=l9_2295.y;
float l9_2328=l9_2300.y;
float l9_2329=l9_2300.w;
bool l9_2330=l9_2326;
float l9_2331=l9_2305;
float l9_2332=fast::clamp(l9_2327,l9_2328,l9_2329);
float l9_2333=step(abs(l9_2327-l9_2332),9.9999997e-06);
l9_2331*=(l9_2333+((1.0-float(l9_2330))*(1.0-l9_2333)));
l9_2327=l9_2332;
l9_2295.y=l9_2327;
l9_2305=l9_2331;
}
float2 l9_2334=l9_2295;
bool l9_2335=l9_2296;
float3x3 l9_2336=l9_2297;
if (l9_2335)
{
l9_2334=float2((l9_2336*float3(l9_2334,1.0)).xy);
}
float2 l9_2337=l9_2334;
l9_2295=l9_2337;
float l9_2338=l9_2295.x;
int l9_2339=l9_2298.x;
bool l9_2340=l9_2304;
float l9_2341=l9_2305;
if ((l9_2339==0)||(l9_2339==3))
{
float l9_2342=l9_2338;
float l9_2343=0.0;
float l9_2344=1.0;
bool l9_2345=l9_2340;
float l9_2346=l9_2341;
float l9_2347=fast::clamp(l9_2342,l9_2343,l9_2344);
float l9_2348=step(abs(l9_2342-l9_2347),9.9999997e-06);
l9_2346*=(l9_2348+((1.0-float(l9_2345))*(1.0-l9_2348)));
l9_2342=l9_2347;
l9_2338=l9_2342;
l9_2341=l9_2346;
}
l9_2295.x=l9_2338;
l9_2305=l9_2341;
float l9_2349=l9_2295.y;
int l9_2350=l9_2298.y;
bool l9_2351=l9_2304;
float l9_2352=l9_2305;
if ((l9_2350==0)||(l9_2350==3))
{
float l9_2353=l9_2349;
float l9_2354=0.0;
float l9_2355=1.0;
bool l9_2356=l9_2351;
float l9_2357=l9_2352;
float l9_2358=fast::clamp(l9_2353,l9_2354,l9_2355);
float l9_2359=step(abs(l9_2353-l9_2358),9.9999997e-06);
l9_2357*=(l9_2359+((1.0-float(l9_2356))*(1.0-l9_2359)));
l9_2353=l9_2358;
l9_2349=l9_2353;
l9_2352=l9_2357;
}
l9_2295.y=l9_2349;
l9_2305=l9_2352;
float2 l9_2360=l9_2295;
int l9_2361=l9_2293;
int l9_2362=l9_2294;
float l9_2363=l9_2303;
float2 l9_2364=l9_2360;
int l9_2365=l9_2361;
int l9_2366=l9_2362;
float3 l9_2367=float3(0.0);
if (l9_2365==0)
{
l9_2367=float3(l9_2364,0.0);
}
else
{
if (l9_2365==1)
{
l9_2367=float3(l9_2364.x,(l9_2364.y*0.5)+(0.5-(float(l9_2366)*0.5)),0.0);
}
else
{
l9_2367=float3(l9_2364,float(l9_2366));
}
}
float3 l9_2368=l9_2367;
float3 l9_2369=l9_2368;
float4 l9_2370=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_2369.xy,level(l9_2363));
float4 l9_2371=l9_2370;
if (l9_2301)
{
l9_2371=mix(l9_2302,l9_2371,float4(l9_2305));
}
float4 l9_2372=l9_2371;
l9_2281=l9_2372.x;
float l9_2373=l9_2281;
float l9_2374=l9_2373;
float l9_2375=l9_1322+N319_res;
float l9_2376=0.0;
float l9_2377=(*sc_set0.UserUniforms).Tweak_N297_curveData.x;
float l9_2378=(*sc_set0.UserUniforms).Tweak_N297_curveData.y;
float l9_2379=(*sc_set0.UserUniforms).Tweak_N297_curveData.z;
float l9_2380=(l9_2375-l9_2378)/(l9_2379-l9_2378);
float2 l9_2381=float2(l9_2380,l9_2377);
l9_2381=fast::clamp(l9_2381,float2(0.0),float2(1.0));
int l9_2382;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_2383=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2383=0;
}
else
{
l9_2383=gl_InstanceIndex%2;
}
int l9_2384=l9_2383;
l9_2382=1-l9_2384;
}
else
{
int l9_2385=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2385=0;
}
else
{
l9_2385=gl_InstanceIndex%2;
}
int l9_2386=l9_2385;
l9_2382=l9_2386;
}
int l9_2387=l9_2382;
int l9_2388=sc_CurveAtlasLayout_tmp;
int l9_2389=l9_2387;
float2 l9_2390=l9_2381;
bool l9_2391=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_2392=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_2393=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_2394=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_2395=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_2396=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_2397=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_2398=0.0;
bool l9_2399=l9_2396&&(!l9_2394);
float l9_2400=1.0;
float l9_2401=l9_2390.x;
int l9_2402=l9_2393.x;
if (l9_2402==1)
{
l9_2401=fract(l9_2401);
}
else
{
if (l9_2402==2)
{
float l9_2403=fract(l9_2401);
float l9_2404=l9_2401-l9_2403;
float l9_2405=step(0.25,fract(l9_2404*0.5));
l9_2401=mix(l9_2403,1.0-l9_2403,fast::clamp(l9_2405,0.0,1.0));
}
}
l9_2390.x=l9_2401;
float l9_2406=l9_2390.y;
int l9_2407=l9_2393.y;
if (l9_2407==1)
{
l9_2406=fract(l9_2406);
}
else
{
if (l9_2407==2)
{
float l9_2408=fract(l9_2406);
float l9_2409=l9_2406-l9_2408;
float l9_2410=step(0.25,fract(l9_2409*0.5));
l9_2406=mix(l9_2408,1.0-l9_2408,fast::clamp(l9_2410,0.0,1.0));
}
}
l9_2390.y=l9_2406;
if (l9_2394)
{
bool l9_2411=l9_2396;
bool l9_2412;
if (l9_2411)
{
l9_2412=l9_2393.x==3;
}
else
{
l9_2412=l9_2411;
}
float l9_2413=l9_2390.x;
float l9_2414=l9_2395.x;
float l9_2415=l9_2395.z;
bool l9_2416=l9_2412;
float l9_2417=l9_2400;
float l9_2418=fast::clamp(l9_2413,l9_2414,l9_2415);
float l9_2419=step(abs(l9_2413-l9_2418),9.9999997e-06);
l9_2417*=(l9_2419+((1.0-float(l9_2416))*(1.0-l9_2419)));
l9_2413=l9_2418;
l9_2390.x=l9_2413;
l9_2400=l9_2417;
bool l9_2420=l9_2396;
bool l9_2421;
if (l9_2420)
{
l9_2421=l9_2393.y==3;
}
else
{
l9_2421=l9_2420;
}
float l9_2422=l9_2390.y;
float l9_2423=l9_2395.y;
float l9_2424=l9_2395.w;
bool l9_2425=l9_2421;
float l9_2426=l9_2400;
float l9_2427=fast::clamp(l9_2422,l9_2423,l9_2424);
float l9_2428=step(abs(l9_2422-l9_2427),9.9999997e-06);
l9_2426*=(l9_2428+((1.0-float(l9_2425))*(1.0-l9_2428)));
l9_2422=l9_2427;
l9_2390.y=l9_2422;
l9_2400=l9_2426;
}
float2 l9_2429=l9_2390;
bool l9_2430=l9_2391;
float3x3 l9_2431=l9_2392;
if (l9_2430)
{
l9_2429=float2((l9_2431*float3(l9_2429,1.0)).xy);
}
float2 l9_2432=l9_2429;
l9_2390=l9_2432;
float l9_2433=l9_2390.x;
int l9_2434=l9_2393.x;
bool l9_2435=l9_2399;
float l9_2436=l9_2400;
if ((l9_2434==0)||(l9_2434==3))
{
float l9_2437=l9_2433;
float l9_2438=0.0;
float l9_2439=1.0;
bool l9_2440=l9_2435;
float l9_2441=l9_2436;
float l9_2442=fast::clamp(l9_2437,l9_2438,l9_2439);
float l9_2443=step(abs(l9_2437-l9_2442),9.9999997e-06);
l9_2441*=(l9_2443+((1.0-float(l9_2440))*(1.0-l9_2443)));
l9_2437=l9_2442;
l9_2433=l9_2437;
l9_2436=l9_2441;
}
l9_2390.x=l9_2433;
l9_2400=l9_2436;
float l9_2444=l9_2390.y;
int l9_2445=l9_2393.y;
bool l9_2446=l9_2399;
float l9_2447=l9_2400;
if ((l9_2445==0)||(l9_2445==3))
{
float l9_2448=l9_2444;
float l9_2449=0.0;
float l9_2450=1.0;
bool l9_2451=l9_2446;
float l9_2452=l9_2447;
float l9_2453=fast::clamp(l9_2448,l9_2449,l9_2450);
float l9_2454=step(abs(l9_2448-l9_2453),9.9999997e-06);
l9_2452*=(l9_2454+((1.0-float(l9_2451))*(1.0-l9_2454)));
l9_2448=l9_2453;
l9_2444=l9_2448;
l9_2447=l9_2452;
}
l9_2390.y=l9_2444;
l9_2400=l9_2447;
float2 l9_2455=l9_2390;
int l9_2456=l9_2388;
int l9_2457=l9_2389;
float l9_2458=l9_2398;
float2 l9_2459=l9_2455;
int l9_2460=l9_2456;
int l9_2461=l9_2457;
float3 l9_2462=float3(0.0);
if (l9_2460==0)
{
l9_2462=float3(l9_2459,0.0);
}
else
{
if (l9_2460==1)
{
l9_2462=float3(l9_2459.x,(l9_2459.y*0.5)+(0.5-(float(l9_2461)*0.5)),0.0);
}
else
{
l9_2462=float3(l9_2459,float(l9_2461));
}
}
float3 l9_2463=l9_2462;
float3 l9_2464=l9_2463;
float4 l9_2465=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_2464.xy,level(l9_2458));
float4 l9_2466=l9_2465;
if (l9_2396)
{
l9_2466=mix(l9_2397,l9_2466,float4(l9_2400));
}
float4 l9_2467=l9_2466;
l9_2376=l9_2467.x;
float l9_2468=l9_2376;
float3 l9_2469=float3(l9_2279,l9_2374,l9_2468);
l9_1326=normalize(l9_2469-l9_2184);
l9_1299=l9_1323;
l9_1300=l9_1324;
l9_1301=l9_1325;
l9_1302=l9_1326;
float l9_2470=l9_1307;
float l9_2471=0.0;
float l9_2472=(*sc_set0.UserUniforms).Tweak_N299_curveData.x;
float l9_2473=(*sc_set0.UserUniforms).Tweak_N299_curveData.y;
float l9_2474=(*sc_set0.UserUniforms).Tweak_N299_curveData.z;
float l9_2475=(l9_2470-l9_2473)/(l9_2474-l9_2473);
float2 l9_2476=float2(l9_2475,l9_2472);
l9_2476=fast::clamp(l9_2476,float2(0.0),float2(1.0));
int l9_2477;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_2478=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2478=0;
}
else
{
l9_2478=gl_InstanceIndex%2;
}
int l9_2479=l9_2478;
l9_2477=1-l9_2479;
}
else
{
int l9_2480=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2480=0;
}
else
{
l9_2480=gl_InstanceIndex%2;
}
int l9_2481=l9_2480;
l9_2477=l9_2481;
}
int l9_2482=l9_2477;
int l9_2483=sc_CurveAtlasLayout_tmp;
int l9_2484=l9_2482;
float2 l9_2485=l9_2476;
bool l9_2486=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_2487=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_2488=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_2489=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_2490=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_2491=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_2492=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_2493=0.0;
bool l9_2494=l9_2491&&(!l9_2489);
float l9_2495=1.0;
float l9_2496=l9_2485.x;
int l9_2497=l9_2488.x;
if (l9_2497==1)
{
l9_2496=fract(l9_2496);
}
else
{
if (l9_2497==2)
{
float l9_2498=fract(l9_2496);
float l9_2499=l9_2496-l9_2498;
float l9_2500=step(0.25,fract(l9_2499*0.5));
l9_2496=mix(l9_2498,1.0-l9_2498,fast::clamp(l9_2500,0.0,1.0));
}
}
l9_2485.x=l9_2496;
float l9_2501=l9_2485.y;
int l9_2502=l9_2488.y;
if (l9_2502==1)
{
l9_2501=fract(l9_2501);
}
else
{
if (l9_2502==2)
{
float l9_2503=fract(l9_2501);
float l9_2504=l9_2501-l9_2503;
float l9_2505=step(0.25,fract(l9_2504*0.5));
l9_2501=mix(l9_2503,1.0-l9_2503,fast::clamp(l9_2505,0.0,1.0));
}
}
l9_2485.y=l9_2501;
if (l9_2489)
{
bool l9_2506=l9_2491;
bool l9_2507;
if (l9_2506)
{
l9_2507=l9_2488.x==3;
}
else
{
l9_2507=l9_2506;
}
float l9_2508=l9_2485.x;
float l9_2509=l9_2490.x;
float l9_2510=l9_2490.z;
bool l9_2511=l9_2507;
float l9_2512=l9_2495;
float l9_2513=fast::clamp(l9_2508,l9_2509,l9_2510);
float l9_2514=step(abs(l9_2508-l9_2513),9.9999997e-06);
l9_2512*=(l9_2514+((1.0-float(l9_2511))*(1.0-l9_2514)));
l9_2508=l9_2513;
l9_2485.x=l9_2508;
l9_2495=l9_2512;
bool l9_2515=l9_2491;
bool l9_2516;
if (l9_2515)
{
l9_2516=l9_2488.y==3;
}
else
{
l9_2516=l9_2515;
}
float l9_2517=l9_2485.y;
float l9_2518=l9_2490.y;
float l9_2519=l9_2490.w;
bool l9_2520=l9_2516;
float l9_2521=l9_2495;
float l9_2522=fast::clamp(l9_2517,l9_2518,l9_2519);
float l9_2523=step(abs(l9_2517-l9_2522),9.9999997e-06);
l9_2521*=(l9_2523+((1.0-float(l9_2520))*(1.0-l9_2523)));
l9_2517=l9_2522;
l9_2485.y=l9_2517;
l9_2495=l9_2521;
}
float2 l9_2524=l9_2485;
bool l9_2525=l9_2486;
float3x3 l9_2526=l9_2487;
if (l9_2525)
{
l9_2524=float2((l9_2526*float3(l9_2524,1.0)).xy);
}
float2 l9_2527=l9_2524;
l9_2485=l9_2527;
float l9_2528=l9_2485.x;
int l9_2529=l9_2488.x;
bool l9_2530=l9_2494;
float l9_2531=l9_2495;
if ((l9_2529==0)||(l9_2529==3))
{
float l9_2532=l9_2528;
float l9_2533=0.0;
float l9_2534=1.0;
bool l9_2535=l9_2530;
float l9_2536=l9_2531;
float l9_2537=fast::clamp(l9_2532,l9_2533,l9_2534);
float l9_2538=step(abs(l9_2532-l9_2537),9.9999997e-06);
l9_2536*=(l9_2538+((1.0-float(l9_2535))*(1.0-l9_2538)));
l9_2532=l9_2537;
l9_2528=l9_2532;
l9_2531=l9_2536;
}
l9_2485.x=l9_2528;
l9_2495=l9_2531;
float l9_2539=l9_2485.y;
int l9_2540=l9_2488.y;
bool l9_2541=l9_2494;
float l9_2542=l9_2495;
if ((l9_2540==0)||(l9_2540==3))
{
float l9_2543=l9_2539;
float l9_2544=0.0;
float l9_2545=1.0;
bool l9_2546=l9_2541;
float l9_2547=l9_2542;
float l9_2548=fast::clamp(l9_2543,l9_2544,l9_2545);
float l9_2549=step(abs(l9_2543-l9_2548),9.9999997e-06);
l9_2547*=(l9_2549+((1.0-float(l9_2546))*(1.0-l9_2549)));
l9_2543=l9_2548;
l9_2539=l9_2543;
l9_2542=l9_2547;
}
l9_2485.y=l9_2539;
l9_2495=l9_2542;
float2 l9_2550=l9_2485;
int l9_2551=l9_2483;
int l9_2552=l9_2484;
float l9_2553=l9_2493;
float2 l9_2554=l9_2550;
int l9_2555=l9_2551;
int l9_2556=l9_2552;
float3 l9_2557=float3(0.0);
if (l9_2555==0)
{
l9_2557=float3(l9_2554,0.0);
}
else
{
if (l9_2555==1)
{
l9_2557=float3(l9_2554.x,(l9_2554.y*0.5)+(0.5-(float(l9_2556)*0.5)),0.0);
}
else
{
l9_2557=float3(l9_2554,float(l9_2556));
}
}
float3 l9_2558=l9_2557;
float3 l9_2559=l9_2558;
float4 l9_2560=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_2559.xy,level(l9_2553));
float4 l9_2561=l9_2560;
if (l9_2491)
{
l9_2561=mix(l9_2492,l9_2561,float4(l9_2495));
}
float4 l9_2562=l9_2561;
l9_2471=l9_2562.x;
float l9_2563=l9_2471;
float l9_2564=l9_2563;
float l9_2565;
if (N319_curvThickEnable)
{
l9_2565=N319_thicknessRad*l9_2564;
}
else
{
l9_2565=N319_thicknessRad;
}
float l9_2566=l9_2565;
float l9_2567=l9_1307;
float l9_2568=0.0;
float l9_2569=(*sc_set0.UserUniforms).Tweak_N293_curveData.x;
float l9_2570=(*sc_set0.UserUniforms).Tweak_N293_curveData.y;
float l9_2571=(*sc_set0.UserUniforms).Tweak_N293_curveData.z;
float l9_2572=(l9_2567-l9_2570)/(l9_2571-l9_2570);
float2 l9_2573=float2(l9_2572,l9_2569);
l9_2573=fast::clamp(l9_2573,float2(0.0),float2(1.0));
int l9_2574;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_2575=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2575=0;
}
else
{
l9_2575=gl_InstanceIndex%2;
}
int l9_2576=l9_2575;
l9_2574=1-l9_2576;
}
else
{
int l9_2577=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2577=0;
}
else
{
l9_2577=gl_InstanceIndex%2;
}
int l9_2578=l9_2577;
l9_2574=l9_2578;
}
int l9_2579=l9_2574;
int l9_2580=sc_CurveAtlasLayout_tmp;
int l9_2581=l9_2579;
float2 l9_2582=l9_2573;
bool l9_2583=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_2584=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_2585=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_2586=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_2587=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_2588=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_2589=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_2590=0.0;
bool l9_2591=l9_2588&&(!l9_2586);
float l9_2592=1.0;
float l9_2593=l9_2582.x;
int l9_2594=l9_2585.x;
if (l9_2594==1)
{
l9_2593=fract(l9_2593);
}
else
{
if (l9_2594==2)
{
float l9_2595=fract(l9_2593);
float l9_2596=l9_2593-l9_2595;
float l9_2597=step(0.25,fract(l9_2596*0.5));
l9_2593=mix(l9_2595,1.0-l9_2595,fast::clamp(l9_2597,0.0,1.0));
}
}
l9_2582.x=l9_2593;
float l9_2598=l9_2582.y;
int l9_2599=l9_2585.y;
if (l9_2599==1)
{
l9_2598=fract(l9_2598);
}
else
{
if (l9_2599==2)
{
float l9_2600=fract(l9_2598);
float l9_2601=l9_2598-l9_2600;
float l9_2602=step(0.25,fract(l9_2601*0.5));
l9_2598=mix(l9_2600,1.0-l9_2600,fast::clamp(l9_2602,0.0,1.0));
}
}
l9_2582.y=l9_2598;
if (l9_2586)
{
bool l9_2603=l9_2588;
bool l9_2604;
if (l9_2603)
{
l9_2604=l9_2585.x==3;
}
else
{
l9_2604=l9_2603;
}
float l9_2605=l9_2582.x;
float l9_2606=l9_2587.x;
float l9_2607=l9_2587.z;
bool l9_2608=l9_2604;
float l9_2609=l9_2592;
float l9_2610=fast::clamp(l9_2605,l9_2606,l9_2607);
float l9_2611=step(abs(l9_2605-l9_2610),9.9999997e-06);
l9_2609*=(l9_2611+((1.0-float(l9_2608))*(1.0-l9_2611)));
l9_2605=l9_2610;
l9_2582.x=l9_2605;
l9_2592=l9_2609;
bool l9_2612=l9_2588;
bool l9_2613;
if (l9_2612)
{
l9_2613=l9_2585.y==3;
}
else
{
l9_2613=l9_2612;
}
float l9_2614=l9_2582.y;
float l9_2615=l9_2587.y;
float l9_2616=l9_2587.w;
bool l9_2617=l9_2613;
float l9_2618=l9_2592;
float l9_2619=fast::clamp(l9_2614,l9_2615,l9_2616);
float l9_2620=step(abs(l9_2614-l9_2619),9.9999997e-06);
l9_2618*=(l9_2620+((1.0-float(l9_2617))*(1.0-l9_2620)));
l9_2614=l9_2619;
l9_2582.y=l9_2614;
l9_2592=l9_2618;
}
float2 l9_2621=l9_2582;
bool l9_2622=l9_2583;
float3x3 l9_2623=l9_2584;
if (l9_2622)
{
l9_2621=float2((l9_2623*float3(l9_2621,1.0)).xy);
}
float2 l9_2624=l9_2621;
l9_2582=l9_2624;
float l9_2625=l9_2582.x;
int l9_2626=l9_2585.x;
bool l9_2627=l9_2591;
float l9_2628=l9_2592;
if ((l9_2626==0)||(l9_2626==3))
{
float l9_2629=l9_2625;
float l9_2630=0.0;
float l9_2631=1.0;
bool l9_2632=l9_2627;
float l9_2633=l9_2628;
float l9_2634=fast::clamp(l9_2629,l9_2630,l9_2631);
float l9_2635=step(abs(l9_2629-l9_2634),9.9999997e-06);
l9_2633*=(l9_2635+((1.0-float(l9_2632))*(1.0-l9_2635)));
l9_2629=l9_2634;
l9_2625=l9_2629;
l9_2628=l9_2633;
}
l9_2582.x=l9_2625;
l9_2592=l9_2628;
float l9_2636=l9_2582.y;
int l9_2637=l9_2585.y;
bool l9_2638=l9_2591;
float l9_2639=l9_2592;
if ((l9_2637==0)||(l9_2637==3))
{
float l9_2640=l9_2636;
float l9_2641=0.0;
float l9_2642=1.0;
bool l9_2643=l9_2638;
float l9_2644=l9_2639;
float l9_2645=fast::clamp(l9_2640,l9_2641,l9_2642);
float l9_2646=step(abs(l9_2640-l9_2645),9.9999997e-06);
l9_2644*=(l9_2646+((1.0-float(l9_2643))*(1.0-l9_2646)));
l9_2640=l9_2645;
l9_2636=l9_2640;
l9_2639=l9_2644;
}
l9_2582.y=l9_2636;
l9_2592=l9_2639;
float2 l9_2647=l9_2582;
int l9_2648=l9_2580;
int l9_2649=l9_2581;
float l9_2650=l9_2590;
float2 l9_2651=l9_2647;
int l9_2652=l9_2648;
int l9_2653=l9_2649;
float3 l9_2654=float3(0.0);
if (l9_2652==0)
{
l9_2654=float3(l9_2651,0.0);
}
else
{
if (l9_2652==1)
{
l9_2654=float3(l9_2651.x,(l9_2651.y*0.5)+(0.5-(float(l9_2653)*0.5)),0.0);
}
else
{
l9_2654=float3(l9_2651,float(l9_2653));
}
}
float3 l9_2655=l9_2654;
float3 l9_2656=l9_2655;
float4 l9_2657=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_2656.xy,level(l9_2650));
float4 l9_2658=l9_2657;
if (l9_2588)
{
l9_2658=mix(l9_2589,l9_2658,float4(l9_2592));
}
float4 l9_2659=l9_2658;
l9_2568=l9_2659.x;
float l9_2660=l9_2568;
float l9_2661=l9_2660;
float l9_2662=l9_1307;
float l9_2663=0.0;
float l9_2664=(*sc_set0.UserUniforms).Tweak_N305_curveData.x;
float l9_2665=(*sc_set0.UserUniforms).Tweak_N305_curveData.y;
float l9_2666=(*sc_set0.UserUniforms).Tweak_N305_curveData.z;
float l9_2667=(l9_2662-l9_2665)/(l9_2666-l9_2665);
float2 l9_2668=float2(l9_2667,l9_2664);
l9_2668=fast::clamp(l9_2668,float2(0.0),float2(1.0));
int l9_2669;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_2670=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2670=0;
}
else
{
l9_2670=gl_InstanceIndex%2;
}
int l9_2671=l9_2670;
l9_2669=1-l9_2671;
}
else
{
int l9_2672=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2672=0;
}
else
{
l9_2672=gl_InstanceIndex%2;
}
int l9_2673=l9_2672;
l9_2669=l9_2673;
}
int l9_2674=l9_2669;
int l9_2675=sc_CurveAtlasLayout_tmp;
int l9_2676=l9_2674;
float2 l9_2677=l9_2668;
bool l9_2678=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_2679=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_2680=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_2681=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_2682=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_2683=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_2684=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_2685=0.0;
bool l9_2686=l9_2683&&(!l9_2681);
float l9_2687=1.0;
float l9_2688=l9_2677.x;
int l9_2689=l9_2680.x;
if (l9_2689==1)
{
l9_2688=fract(l9_2688);
}
else
{
if (l9_2689==2)
{
float l9_2690=fract(l9_2688);
float l9_2691=l9_2688-l9_2690;
float l9_2692=step(0.25,fract(l9_2691*0.5));
l9_2688=mix(l9_2690,1.0-l9_2690,fast::clamp(l9_2692,0.0,1.0));
}
}
l9_2677.x=l9_2688;
float l9_2693=l9_2677.y;
int l9_2694=l9_2680.y;
if (l9_2694==1)
{
l9_2693=fract(l9_2693);
}
else
{
if (l9_2694==2)
{
float l9_2695=fract(l9_2693);
float l9_2696=l9_2693-l9_2695;
float l9_2697=step(0.25,fract(l9_2696*0.5));
l9_2693=mix(l9_2695,1.0-l9_2695,fast::clamp(l9_2697,0.0,1.0));
}
}
l9_2677.y=l9_2693;
if (l9_2681)
{
bool l9_2698=l9_2683;
bool l9_2699;
if (l9_2698)
{
l9_2699=l9_2680.x==3;
}
else
{
l9_2699=l9_2698;
}
float l9_2700=l9_2677.x;
float l9_2701=l9_2682.x;
float l9_2702=l9_2682.z;
bool l9_2703=l9_2699;
float l9_2704=l9_2687;
float l9_2705=fast::clamp(l9_2700,l9_2701,l9_2702);
float l9_2706=step(abs(l9_2700-l9_2705),9.9999997e-06);
l9_2704*=(l9_2706+((1.0-float(l9_2703))*(1.0-l9_2706)));
l9_2700=l9_2705;
l9_2677.x=l9_2700;
l9_2687=l9_2704;
bool l9_2707=l9_2683;
bool l9_2708;
if (l9_2707)
{
l9_2708=l9_2680.y==3;
}
else
{
l9_2708=l9_2707;
}
float l9_2709=l9_2677.y;
float l9_2710=l9_2682.y;
float l9_2711=l9_2682.w;
bool l9_2712=l9_2708;
float l9_2713=l9_2687;
float l9_2714=fast::clamp(l9_2709,l9_2710,l9_2711);
float l9_2715=step(abs(l9_2709-l9_2714),9.9999997e-06);
l9_2713*=(l9_2715+((1.0-float(l9_2712))*(1.0-l9_2715)));
l9_2709=l9_2714;
l9_2677.y=l9_2709;
l9_2687=l9_2713;
}
float2 l9_2716=l9_2677;
bool l9_2717=l9_2678;
float3x3 l9_2718=l9_2679;
if (l9_2717)
{
l9_2716=float2((l9_2718*float3(l9_2716,1.0)).xy);
}
float2 l9_2719=l9_2716;
l9_2677=l9_2719;
float l9_2720=l9_2677.x;
int l9_2721=l9_2680.x;
bool l9_2722=l9_2686;
float l9_2723=l9_2687;
if ((l9_2721==0)||(l9_2721==3))
{
float l9_2724=l9_2720;
float l9_2725=0.0;
float l9_2726=1.0;
bool l9_2727=l9_2722;
float l9_2728=l9_2723;
float l9_2729=fast::clamp(l9_2724,l9_2725,l9_2726);
float l9_2730=step(abs(l9_2724-l9_2729),9.9999997e-06);
l9_2728*=(l9_2730+((1.0-float(l9_2727))*(1.0-l9_2730)));
l9_2724=l9_2729;
l9_2720=l9_2724;
l9_2723=l9_2728;
}
l9_2677.x=l9_2720;
l9_2687=l9_2723;
float l9_2731=l9_2677.y;
int l9_2732=l9_2680.y;
bool l9_2733=l9_2686;
float l9_2734=l9_2687;
if ((l9_2732==0)||(l9_2732==3))
{
float l9_2735=l9_2731;
float l9_2736=0.0;
float l9_2737=1.0;
bool l9_2738=l9_2733;
float l9_2739=l9_2734;
float l9_2740=fast::clamp(l9_2735,l9_2736,l9_2737);
float l9_2741=step(abs(l9_2735-l9_2740),9.9999997e-06);
l9_2739*=(l9_2741+((1.0-float(l9_2738))*(1.0-l9_2741)));
l9_2735=l9_2740;
l9_2731=l9_2735;
l9_2734=l9_2739;
}
l9_2677.y=l9_2731;
l9_2687=l9_2734;
float2 l9_2742=l9_2677;
int l9_2743=l9_2675;
int l9_2744=l9_2676;
float l9_2745=l9_2685;
float2 l9_2746=l9_2742;
int l9_2747=l9_2743;
int l9_2748=l9_2744;
float3 l9_2749=float3(0.0);
if (l9_2747==0)
{
l9_2749=float3(l9_2746,0.0);
}
else
{
if (l9_2747==1)
{
l9_2749=float3(l9_2746.x,(l9_2746.y*0.5)+(0.5-(float(l9_2748)*0.5)),0.0);
}
else
{
l9_2749=float3(l9_2746,float(l9_2748));
}
}
float3 l9_2750=l9_2749;
float3 l9_2751=l9_2750;
float4 l9_2752=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_2751.xy,level(l9_2745));
float4 l9_2753=l9_2752;
if (l9_2683)
{
l9_2753=mix(l9_2684,l9_2753,float4(l9_2687));
}
float4 l9_2754=l9_2753;
l9_2663=l9_2754.x;
float l9_2755=l9_2663;
float l9_2756=l9_2755;
float l9_2757=l9_1307;
float l9_2758=0.0;
float l9_2759=(*sc_set0.UserUniforms).Tweak_N297_curveData.x;
float l9_2760=(*sc_set0.UserUniforms).Tweak_N297_curveData.y;
float l9_2761=(*sc_set0.UserUniforms).Tweak_N297_curveData.z;
float l9_2762=(l9_2757-l9_2760)/(l9_2761-l9_2760);
float2 l9_2763=float2(l9_2762,l9_2759);
l9_2763=fast::clamp(l9_2763,float2(0.0),float2(1.0));
int l9_2764;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_2765=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2765=0;
}
else
{
l9_2765=gl_InstanceIndex%2;
}
int l9_2766=l9_2765;
l9_2764=1-l9_2766;
}
else
{
int l9_2767=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2767=0;
}
else
{
l9_2767=gl_InstanceIndex%2;
}
int l9_2768=l9_2767;
l9_2764=l9_2768;
}
int l9_2769=l9_2764;
int l9_2770=sc_CurveAtlasLayout_tmp;
int l9_2771=l9_2769;
float2 l9_2772=l9_2763;
bool l9_2773=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_2774=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_2775=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_2776=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_2777=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_2778=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_2779=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_2780=0.0;
bool l9_2781=l9_2778&&(!l9_2776);
float l9_2782=1.0;
float l9_2783=l9_2772.x;
int l9_2784=l9_2775.x;
if (l9_2784==1)
{
l9_2783=fract(l9_2783);
}
else
{
if (l9_2784==2)
{
float l9_2785=fract(l9_2783);
float l9_2786=l9_2783-l9_2785;
float l9_2787=step(0.25,fract(l9_2786*0.5));
l9_2783=mix(l9_2785,1.0-l9_2785,fast::clamp(l9_2787,0.0,1.0));
}
}
l9_2772.x=l9_2783;
float l9_2788=l9_2772.y;
int l9_2789=l9_2775.y;
if (l9_2789==1)
{
l9_2788=fract(l9_2788);
}
else
{
if (l9_2789==2)
{
float l9_2790=fract(l9_2788);
float l9_2791=l9_2788-l9_2790;
float l9_2792=step(0.25,fract(l9_2791*0.5));
l9_2788=mix(l9_2790,1.0-l9_2790,fast::clamp(l9_2792,0.0,1.0));
}
}
l9_2772.y=l9_2788;
if (l9_2776)
{
bool l9_2793=l9_2778;
bool l9_2794;
if (l9_2793)
{
l9_2794=l9_2775.x==3;
}
else
{
l9_2794=l9_2793;
}
float l9_2795=l9_2772.x;
float l9_2796=l9_2777.x;
float l9_2797=l9_2777.z;
bool l9_2798=l9_2794;
float l9_2799=l9_2782;
float l9_2800=fast::clamp(l9_2795,l9_2796,l9_2797);
float l9_2801=step(abs(l9_2795-l9_2800),9.9999997e-06);
l9_2799*=(l9_2801+((1.0-float(l9_2798))*(1.0-l9_2801)));
l9_2795=l9_2800;
l9_2772.x=l9_2795;
l9_2782=l9_2799;
bool l9_2802=l9_2778;
bool l9_2803;
if (l9_2802)
{
l9_2803=l9_2775.y==3;
}
else
{
l9_2803=l9_2802;
}
float l9_2804=l9_2772.y;
float l9_2805=l9_2777.y;
float l9_2806=l9_2777.w;
bool l9_2807=l9_2803;
float l9_2808=l9_2782;
float l9_2809=fast::clamp(l9_2804,l9_2805,l9_2806);
float l9_2810=step(abs(l9_2804-l9_2809),9.9999997e-06);
l9_2808*=(l9_2810+((1.0-float(l9_2807))*(1.0-l9_2810)));
l9_2804=l9_2809;
l9_2772.y=l9_2804;
l9_2782=l9_2808;
}
float2 l9_2811=l9_2772;
bool l9_2812=l9_2773;
float3x3 l9_2813=l9_2774;
if (l9_2812)
{
l9_2811=float2((l9_2813*float3(l9_2811,1.0)).xy);
}
float2 l9_2814=l9_2811;
l9_2772=l9_2814;
float l9_2815=l9_2772.x;
int l9_2816=l9_2775.x;
bool l9_2817=l9_2781;
float l9_2818=l9_2782;
if ((l9_2816==0)||(l9_2816==3))
{
float l9_2819=l9_2815;
float l9_2820=0.0;
float l9_2821=1.0;
bool l9_2822=l9_2817;
float l9_2823=l9_2818;
float l9_2824=fast::clamp(l9_2819,l9_2820,l9_2821);
float l9_2825=step(abs(l9_2819-l9_2824),9.9999997e-06);
l9_2823*=(l9_2825+((1.0-float(l9_2822))*(1.0-l9_2825)));
l9_2819=l9_2824;
l9_2815=l9_2819;
l9_2818=l9_2823;
}
l9_2772.x=l9_2815;
l9_2782=l9_2818;
float l9_2826=l9_2772.y;
int l9_2827=l9_2775.y;
bool l9_2828=l9_2781;
float l9_2829=l9_2782;
if ((l9_2827==0)||(l9_2827==3))
{
float l9_2830=l9_2826;
float l9_2831=0.0;
float l9_2832=1.0;
bool l9_2833=l9_2828;
float l9_2834=l9_2829;
float l9_2835=fast::clamp(l9_2830,l9_2831,l9_2832);
float l9_2836=step(abs(l9_2830-l9_2835),9.9999997e-06);
l9_2834*=(l9_2836+((1.0-float(l9_2833))*(1.0-l9_2836)));
l9_2830=l9_2835;
l9_2826=l9_2830;
l9_2829=l9_2834;
}
l9_2772.y=l9_2826;
l9_2782=l9_2829;
float2 l9_2837=l9_2772;
int l9_2838=l9_2770;
int l9_2839=l9_2771;
float l9_2840=l9_2780;
float2 l9_2841=l9_2837;
int l9_2842=l9_2838;
int l9_2843=l9_2839;
float3 l9_2844=float3(0.0);
if (l9_2842==0)
{
l9_2844=float3(l9_2841,0.0);
}
else
{
if (l9_2842==1)
{
l9_2844=float3(l9_2841.x,(l9_2841.y*0.5)+(0.5-(float(l9_2843)*0.5)),0.0);
}
else
{
l9_2844=float3(l9_2841,float(l9_2843));
}
}
float3 l9_2845=l9_2844;
float3 l9_2846=l9_2845;
float4 l9_2847=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_2846.xy,level(l9_2840));
float4 l9_2848=l9_2847;
if (l9_2778)
{
l9_2848=mix(l9_2779,l9_2848,float4(l9_2782));
}
float4 l9_2849=l9_2848;
l9_2758=l9_2849.x;
float l9_2850=l9_2758;
float3 l9_2851=float3(l9_2661,l9_2756,l9_2850)*N319_scaleXYZ;
float3 l9_2852=mix(l9_2851+(((l9_1300*cos(l9_1310))+(l9_1301*sin(l9_1310)))*l9_2566),l9_2851,float3(l9_1321*N319_VolumeFill));
float3 l9_2853;
if (l9_1307>1.0)
{
l9_2853=l9_2852/float3(0.0);
}
else
{
l9_2853=l9_2852;
}
l9_2852=l9_2853;
tempGlobals.N319_curveDirection=l9_1302;
N319_Result=l9_2852*N319_Scale;
l9_1298=N319_Result;
l9_1285=l9_1298;
l9_634=l9_1285;
l9_638=l9_634;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==7)
{
float l9_2854=0.0;
float l9_2855=float((*sc_set0.UserUniforms).Tweak_N271);
l9_2854=l9_2855;
float l9_2856=0.0;
float l9_2857=(*sc_set0.UserUniforms).Tweak_N273;
l9_2856=l9_2857;
float2 l9_2858=float2(0.0);
float2 l9_2859=(*sc_set0.UserUniforms).Tweak_N270;
l9_2858=l9_2859;
float2 l9_2860=float2(0.0);
float2 l9_2861=(*sc_set0.UserUniforms).Tweak_N272;
l9_2860=l9_2861;
float l9_2862=0.0;
float l9_2863=(*sc_set0.UserUniforms).Tweak_N269;
l9_2862=l9_2863;
float l9_2864=0.0;
float l9_2865=(*sc_set0.UserUniforms).Tweak_N275;
l9_2864=l9_2865;
float l9_2866=0.0;
float l9_2867=float((*sc_set0.UserUniforms).Tweak_N161);
l9_2866=l9_2867;
float3 l9_2868=float3(0.0);
float l9_2869=l9_2854;
float l9_2870=l9_2856;
float2 l9_2871=l9_2858;
float2 l9_2872=l9_2860;
float l9_2873=l9_2862;
float l9_2874=l9_2864;
float l9_2875=l9_2866;
ssGlobals l9_2876=l9_637;
tempGlobals=l9_2876;
float3 l9_2877=float3(0.0);
N267_Seed=int(l9_2869);
N267_Depth=l9_2870;
N267_Expand=l9_2871;
N267_Offset=l9_2872;
N267_Thickness=l9_2873;
N267_Push=l9_2874;
N267_pushMetod=int(l9_2875);
int l9_2878=0;
l9_2878=ssInstanceID;
int l9_2879=l9_2878;
float l9_2880=float(l9_2879+N267_Seed);
int l9_2881=int(l9_2880);
int l9_2882=l9_2881^(l9_2881*15299);
int l9_2883=l9_2882;
int l9_2884=l9_2883;
int l9_2885=((l9_2884*((l9_2884*1471343)+101146501))+1559861749)&2147483647;
int l9_2886=l9_2885;
int l9_2887=l9_2883*1399;
int l9_2888=((l9_2887*((l9_2887*1471343)+101146501))+1559861749)&2147483647;
int l9_2889=l9_2888;
int l9_2890=l9_2886;
float l9_2891=float(l9_2890)*4.6566129e-10;
int l9_2892=l9_2889;
float l9_2893=float(l9_2892)*4.6566129e-10;
float2 l9_2894=float2(l9_2891,l9_2893);
float2 l9_2895=l9_2894;
float2 l9_2896=l9_2895;
int l9_2897=0;
l9_2897=ssInstanceID;
int l9_2898=l9_2897;
float l9_2899=float(l9_2898);
int l9_2900=int(l9_2899);
int l9_2901=l9_2900^(l9_2900*15299);
int l9_2902=l9_2901;
int l9_2903=l9_2902;
int l9_2904=((l9_2903*((l9_2903*1471343)+101146501))+1559861749)&2147483647;
int l9_2905=l9_2904;
float l9_2906=float(l9_2905)*4.6566129e-10;
float l9_2907=l9_2906;
float l9_2908=l9_2907;
float l9_2909=l9_2908;
float2 l9_2910=(float2(0.5)-l9_2896)+N267_Offset;
float2 l9_2911=fast::clamp(normalize(l9_2910),float2(-0.5),float2(0.5));
float l9_2912=distance(l9_2910,float2(0.0));
float l9_2913=0.0+(((l9_2912-(N267_Push-0.1))*1.0)/((N267_Push-(N267_Push-0.1))+1e-06));
if (N267_pushMetod==1)
{
l9_2910=mix(l9_2911,l9_2910,float2(fast::clamp(l9_2913,0.0,1.0)));
}
else
{
if (N267_pushMetod==2)
{
l9_2910=mix(l9_2910,l9_2911,float2(N267_Push));
}
}
float l9_2914=(*sc_set0.UserUniforms).sc_Camera.aspect;
l9_2910.x*=l9_2914;
float l9_2915=tempGlobals.CameraFOV;
l9_2910*=(tan(radians(l9_2915)*0.5)*2.0);
float l9_2916=(N267_Depth*((l9_2909-0.5)*2.0))*N267_Thickness;
l9_2910*=(N267_Depth+l9_2916);
float3 l9_2917=float3(l9_2910*N267_Expand,(N267_Depth+l9_2916)*(-1.0));
N267_Result=l9_2917;
l9_2877=N267_Result;
l9_2868=l9_2877;
l9_635=l9_2868;
l9_638=l9_635;
}
else
{
l9_638=l9_636;
}
}
}
}
}
}
}
}
l9_627=l9_638;
l9_626=l9_627;
float3 l9_2918=l9_626;
N111_spawnLocation=l9_2918;
float3 l9_2919=float3(0.0);
float3 l9_2920=float3(0.0);
float3 l9_2921=(*sc_set0.UserUniforms).spawnBox;
l9_2920=l9_2921;
l9_2919=l9_2920;
float3 l9_2922=l9_2919;
N111_spawnBox=l9_2922;
float3 l9_2923=float3(0.0);
float3 l9_2924=float3(0.0);
float3 l9_2925=(*sc_set0.UserUniforms).spawnSphere;
l9_2924=l9_2925;
l9_2923=l9_2924;
float3 l9_2926=l9_2923;
N111_spawnSphere=l9_2926;
float3 l9_2927=float3(0.0);
float3 l9_2928=float3(0.0);
float3 l9_2929=(*sc_set0.UserUniforms).noiseMult;
l9_2928=l9_2929;
l9_2927=l9_2928;
float3 l9_2930=l9_2927;
N111_noiseMult=l9_2930;
float3 l9_2931=float3(0.0);
float3 l9_2932=float3(0.0);
float3 l9_2933=(*sc_set0.UserUniforms).noiseFrequency;
l9_2932=l9_2933;
l9_2931=l9_2932;
float3 l9_2934=l9_2931;
N111_noiseFrequency=l9_2934;
float3 l9_2935=float3(0.0);
float3 l9_2936=float3(0.0);
float3 l9_2937=(*sc_set0.UserUniforms).sNoiseMult;
l9_2936=l9_2937;
l9_2935=l9_2936;
float3 l9_2938=l9_2935;
N111_sNoiseMult=l9_2938;
float3 l9_2939=float3(0.0);
float3 l9_2940=float3(0.0);
float3 l9_2941=(*sc_set0.UserUniforms).sNoiseFrequency;
l9_2940=l9_2941;
l9_2939=l9_2940;
float3 l9_2942=l9_2939;
N111_sNoiseFrequency=l9_2942;
float3 l9_2943=float3(0.0);
float3 l9_2944=float3(0.0);
float3 l9_2945=(*sc_set0.UserUniforms).velocityMin;
l9_2944=l9_2945;
l9_2943=l9_2944;
float3 l9_2946=l9_2943;
N111_velocityMin=l9_2946;
float3 l9_2947=float3(0.0);
float3 l9_2948=float3(0.0);
float3 l9_2949=(*sc_set0.UserUniforms).velocityMax;
l9_2948=l9_2949;
l9_2947=l9_2948;
float3 l9_2950=l9_2947;
N111_velocityMax=l9_2950;
float3 l9_2951=float3(0.0);
float3 l9_2952=float3(0.0);
float3 l9_2953=(*sc_set0.UserUniforms).velocityDrag;
l9_2952=l9_2953;
l9_2951=l9_2952;
float3 l9_2954=l9_2951;
N111_velocityDrag=l9_2954;
float2 l9_2955=float2(0.0);
float2 l9_2956=float2(0.0);
float2 l9_2957=(*sc_set0.UserUniforms).sizeStart;
l9_2956=l9_2957;
l9_2955=l9_2956;
float2 l9_2958=l9_2955;
N111_sizeStart=l9_2958;
float2 l9_2959=float2(0.0);
float2 l9_2960=float2(0.0);
float2 l9_2961=(*sc_set0.UserUniforms).sizeEnd;
l9_2960=l9_2961;
l9_2959=l9_2960;
float2 l9_2962=l9_2959;
N111_sizeEnd=l9_2962;
float2 l9_2963=float2(0.0);
float2 l9_2964=float2(0.0);
float2 l9_2965=(*sc_set0.UserUniforms).sizeStartMax;
l9_2964=l9_2965;
l9_2963=l9_2964;
float2 l9_2966=l9_2963;
N111_sizeStartMax=l9_2966;
float2 l9_2967=float2(0.0);
float2 l9_2968=float2(0.0);
float2 l9_2969=(*sc_set0.UserUniforms).sizeEndMax;
l9_2968=l9_2969;
l9_2967=l9_2968;
float2 l9_2970=l9_2967;
N111_sizeEndMax=l9_2970;
float3 l9_2971=float3(0.0);
float3 l9_2972=float3(0.0);
float3 l9_2973=(*sc_set0.UserUniforms).sizeStart3D;
l9_2972=l9_2973;
l9_2971=l9_2972;
float3 l9_2974=l9_2971;
N111_sizeStart3D=l9_2974;
float3 l9_2975=float3(0.0);
float3 l9_2976=float3(0.0);
float3 l9_2977=(*sc_set0.UserUniforms).sizeEnd3D;
l9_2976=l9_2977;
l9_2975=l9_2976;
float3 l9_2978=l9_2975;
N111_sizeEnd3D=l9_2978;
float3 l9_2979=float3(0.0);
float3 l9_2980=float3(0.0);
float3 l9_2981=(*sc_set0.UserUniforms).sizeStartMax3D;
l9_2980=l9_2981;
l9_2979=l9_2980;
float3 l9_2982=l9_2979;
N111_sizeStartMax3D=l9_2982;
float3 l9_2983=float3(0.0);
float3 l9_2984=float3(0.0);
float3 l9_2985=(*sc_set0.UserUniforms).sizeEndMax3D;
l9_2984=l9_2985;
l9_2983=l9_2984;
float3 l9_2986=l9_2983;
N111_sizeEndMax3D=l9_2986;
float l9_2987=0.0;
float l9_2988=0.0;
float l9_2989=(*sc_set0.UserUniforms).sizeSpeed;
l9_2988=l9_2989;
l9_2987=l9_2988;
float l9_2990=l9_2987;
N111_sizeSpeed=l9_2990;
float l9_2991=0.0;
float l9_2992=0.0;
float l9_2993=(*sc_set0.UserUniforms).gravity;
l9_2992=l9_2993;
l9_2991=l9_2992;
float l9_2994=l9_2991;
N111_gravity=l9_2994;
float3 l9_2995=float3(0.0);
float3 l9_2996=float3(0.0);
float3 l9_2997=(*sc_set0.UserUniforms).localForce;
l9_2996=l9_2997;
l9_2995=l9_2996;
float3 l9_2998=l9_2995;
N111_localForce=l9_2998;
float3 l9_2999=float3(0.0);
l9_2999=tempGlobals.N111_ParticleSpawnPosition;
float l9_3000=0.0;
float l9_3001=(*sc_set0.UserUniforms).timeGlobal;
l9_3000=l9_3001;
float l9_3002=0.0;
float l9_3003=(*sc_set0.UserUniforms).externalTimeInput;
l9_3002=l9_3003;
float l9_3004=0.0;
float l9_3005=(*sc_set0.UserUniforms).externalSeed;
l9_3004=l9_3005;
float l9_3006=0.0;
float l9_3007=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_3006=l9_3007;
float2 l9_3008=float2(0.0);
float2 l9_3009=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_3008=l9_3009;
float l9_3010=0.0;
float l9_3011=(*sc_set0.UserUniforms).spawnDuration;
l9_3010=l9_3011;
float l9_3012=0.0;
float l9_3013;
if ((int(TRAILS_tmp)!=0))
{
l9_3013=1.001;
}
else
{
l9_3013=0.001;
}
l9_3013-=0.001;
l9_3012=l9_3013;
float l9_3014=0.0;
float l9_3015=(*sc_set0.UserUniforms).trailLength;
l9_3014=l9_3015;
float4 l9_3016=float4(0.0);
l9_3016=tempGlobals.VertexColor;
float l9_3017=0.0;
l9_3017=l9_3016.x;
float l9_3018=0.0;
float l9_3019=l9_3012;
bool l9_3020=(l9_3019*1.0)!=0.0;
bool l9_3021;
if (l9_3020)
{
l9_3021=(l9_3017*1.0)!=0.0;
}
else
{
l9_3021=l9_3020;
}
l9_3018=float(l9_3021);
float3 l9_3022=float3(0.0);
float l9_3023=0.0;
float l9_3024=l9_3000;
float l9_3025=l9_3002;
float l9_3026=l9_3004;
float l9_3027=l9_3006;
float2 l9_3028=l9_3008;
float l9_3029=l9_3010;
float l9_3030=l9_3014;
float l9_3031=l9_3018;
ssGlobals l9_3032=tempGlobals;
tempGlobals=l9_3032;
float3 l9_3033=float3(0.0);
float l9_3034=0.0;
N181_timeGlobal=l9_3024;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_3025;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_3026;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_3027;
N181_lifeTimeMinMax=l9_3028;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_3029;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_3030;
N181_isTrailCondition=l9_3031!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_3035=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_3036=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_3035=length(float4(1.0)*l9_3036);
}
N181_globalSeed=N181_externalSeed+l9_3035;
int l9_3037=0;
l9_3037=ssInstanceID;
int l9_3038=l9_3037;
float l9_3039=float(l9_3038);
int l9_3040=int(l9_3039);
int l9_3041=l9_3040^(l9_3040*15299);
int l9_3042=l9_3041;
int l9_3043=l9_3042;
int l9_3044=((l9_3043*((l9_3043*1471343)+101146501))+1559861749)&2147483647;
int l9_3045=l9_3044;
int l9_3046=l9_3042*1399;
int l9_3047=((l9_3046*((l9_3046*1471343)+101146501))+1559861749)&2147483647;
int l9_3048=l9_3047;
int l9_3049=l9_3042*7177;
int l9_3050=((l9_3049*((l9_3049*1471343)+101146501))+1559861749)&2147483647;
int l9_3051=l9_3050;
int l9_3052=l9_3045;
float l9_3053=float(l9_3052)*4.6566129e-10;
int l9_3054=l9_3048;
float l9_3055=float(l9_3054)*4.6566129e-10;
int l9_3056=l9_3051;
float l9_3057=float(l9_3056)*4.6566129e-10;
float3 l9_3058=float3(l9_3053,l9_3055,l9_3057);
float3 l9_3059=l9_3058;
N181_particleSeed=l9_3059;
float l9_3060=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_3061;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_3061=N181_lifeTimeMinMax;
}
else
{
l9_3061=float2(N181_lifeTimeConstant);
}
float2 l9_3062=l9_3061;
float l9_3063=fast::max(l9_3062.x,0.0099999998);
float l9_3064=fast::max(l9_3062.y,0.0099999998);
float l9_3065=tempGlobals.gTimeElapsed;
float l9_3066=l9_3065;
if (N181_ENABLE_EXTERNALTIME)
{
l9_3066=N181_externalTime;
}
float l9_3067=l9_3066;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_3067=N181_timeGlobal*l9_3066;
}
else
{
float l9_3068=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_3068=N181_trailLength;
}
}
float l9_3069=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_3070=0.0;
float l9_3071;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_3071=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_3071=0.0;
}
l9_3070=l9_3071;
float l9_3072=l9_3070;
int l9_3073=0;
l9_3073=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_3074=l9_3073;
l9_3069=fast::max(l9_3072*(1.0-(1.0/float(l9_3074))),0.0);
}
else
{
l9_3069=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_3075=fract(((l9_3066*N181_timeGlobal)*(1.0/(l9_3062.y+l9_3068)))+l9_3069);
l9_3067=l9_3075*(l9_3062.y+l9_3068);
}
float l9_3076=mix(l9_3067/l9_3063,l9_3067/l9_3064,l9_3060);
float l9_3077=fast::clamp(l9_3076,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_3067,l9_3077);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_3078=tempGlobals.Surface_UVCoord0;
l9_3067-=(l9_3078.y*N181_trailLength);
l9_3076=mix(l9_3067/l9_3063,l9_3067/l9_3064,l9_3060);
l9_3077=fast::clamp(l9_3076,0.0,1.0);
}
}
float l9_3079=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_3066-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_3079=1.0;
}
}
}
float l9_3080=l9_3076+l9_3079;
N181_particleAlive=1.0;
if ((l9_3080>0.99989998)||(l9_3067<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_3066*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_3062,l9_3067,l9_3077);
l9_3033=N181_particleSeed;
l9_3034=N181_isTrail;
l9_3022=l9_3033;
l9_3023=l9_3034;
float l9_3081=0.0;
float l9_3082=(*sc_set0.UserUniforms).attractRepelForceStrength;
l9_3081=l9_3082;
float3 l9_3083=float3(0.0);
float3 l9_3084=(*sc_set0.UserUniforms).customForceOrigin;
l9_3083=l9_3084;
float3 l9_3085=l9_2999;
float3 l9_3086=l9_3022;
float l9_3087=l9_3081;
float3 l9_3088=l9_3083;
ssGlobals l9_3089=tempGlobals;
tempGlobals=l9_3089;
N223_OnOff=(int(Tweak_N131_tmp)!=0);
N223_ParticleSpawnPosition=l9_3085;
N223_ParticleSeed=l9_3086;
N223_Strength=l9_3087;
N223_ForceOrigin=l9_3088;
N223_CustomForce=float3(0.0);
float4x4 l9_3090=(*sc_set0.UserUniforms).sc_ModelMatrix;
float4 l9_3091=l9_3090*float4(N223_ParticleSpawnPosition,1.0);
if (N223_OnOff)
{
float3 l9_3092=N223_ForceOrigin;
float3 l9_3093=l9_3091.xyz;
float l9_3094=N223_Strength;
float3 l9_3095=float3(0.0);
if (all(l9_3092==l9_3093))
{
int l9_3096=0;
l9_3096=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_3097=l9_3096;
float3 l9_3098=N223_ParticleSeed*float(l9_3097);
int l9_3099=int(l9_3098.x);
int l9_3100=int(l9_3098.y);
int l9_3101=int(l9_3098.z);
int l9_3102=((l9_3099*15299)^(l9_3100*30133))^(l9_3101*17539);
int l9_3103=l9_3102;
int l9_3104=l9_3103;
int l9_3105=((l9_3104*((l9_3104*1471343)+101146501))+1559861749)&2147483647;
int l9_3106=l9_3105;
int l9_3107=l9_3103*1399;
int l9_3108=((l9_3107*((l9_3107*1471343)+101146501))+1559861749)&2147483647;
int l9_3109=l9_3108;
int l9_3110=l9_3103*7177;
int l9_3111=((l9_3110*((l9_3110*1471343)+101146501))+1559861749)&2147483647;
int l9_3112=l9_3111;
int l9_3113=l9_3106;
float l9_3114=float(l9_3113)*4.6566129e-10;
int l9_3115=l9_3109;
float l9_3116=float(l9_3115)*4.6566129e-10;
int l9_3117=l9_3112;
float l9_3118=float(l9_3117)*4.6566129e-10;
float3 l9_3119=float3(l9_3114,l9_3116,l9_3118);
float3 l9_3120=l9_3119;
l9_3095=normalize((l9_3120-float3(0.5))*2.0);
}
else
{
l9_3095=normalize(l9_3092-l9_3093);
}
float3 l9_3121=l9_3095*l9_3094;
N223_CustomForce+=l9_3121;
}
float3 l9_3122=float3(0.0);
l9_3122=tempGlobals.N111_ParticleSpawnPosition;
float3 l9_3123=float3(0.0);
float3 l9_3124=(*sc_set0.UserUniforms).Tex3dScale;
l9_3123=l9_3124;
float3 l9_3125=float3(0.0);
float3 l9_3126=(*sc_set0.UserUniforms).Tex3dScrollSpeed;
l9_3125=l9_3126;
float3 l9_3127=float3(0.0);
float3 l9_3128=(*sc_set0.UserUniforms).Tex3dForceStrength;
l9_3127=l9_3128;
float3 l9_3129=l9_3122;
float3 l9_3130=l9_3123;
float3 l9_3131=l9_3125;
float3 l9_3132=l9_3127;
ssGlobals l9_3133=tempGlobals;
tempGlobals=l9_3133;
N202_OnOff=(int(Tweak_N133_tmp)!=0);
N202_ParticleSpawnPosition=l9_3129;
N202_ScaleTexture=l9_3130;
N202_ScrollSpeed=l9_3131;
N202_Strength=l9_3132;
N202_CustomForce=float3(0.0);
if (N202_OnOff)
{
float3 l9_3134=N202_ParticleSpawnPosition;
float3 l9_3135=N202_Strength;
float3 l9_3136=l9_3134;
float l9_3137=tempGlobals.gTimeElapsed;
float3 l9_3138=float3(l9_3137)*(N202_ScrollSpeed*0.1);
l9_3136/=(N202_ScaleTexture*2.0);
l9_3136+=l9_3138;
float3 l9_3139=l9_3136;
float4 l9_3140=float4(0.0);
float3 l9_3141=l9_3139;
float l9_3142=0.0;
float4 l9_3143=sc_set0.Tex3d.sample(sc_set0.Tex3dSmpSC,l9_3141,level(l9_3142));
l9_3140=l9_3143;
float4 l9_3144=l9_3140;
float3 l9_3145=l9_3144.xyz;
float3 l9_3146=(l9_3145*2.0)-float3(1.0);
l9_3146*=l9_3135;
float3 l9_3147=l9_3146;
N202_CustomForce+=l9_3147;
}
float3 l9_3148=float3(0.0);
l9_3148=tempGlobals.N155_helixDirection;
float3 l9_3149=float3(0.0);
l9_3149=tempGlobals.N319_curveDirection;
float3 l9_3150=float3(0.0);
float3 l9_3151=(*sc_set0.UserUniforms).Tweak_N314;
l9_3150=l9_3151;
float l9_3152=l9_3023;
float3 l9_3153=l9_3148;
float3 l9_3154=l9_3149;
float3 l9_3155=l9_3150;
ssGlobals l9_3156=tempGlobals;
tempGlobals=l9_3156;
N277_OnOff=(int(Tweak_N313_tmp)!=0);
N277_isTrail=l9_3152!=0.0;
N277_helixDir=l9_3153;
N277_curveDir=l9_3154;
N277_Strength=l9_3155;
N277_Path=NODE_248_DROPLIST_ITEM_tmp;
N277_DirectionForce=float3(0.0);
N277_Direction=float3(0.0);
if (N277_OnOff||N277_isTrail)
{
float3 l9_3157;
if (N277_Path==5)
{
l9_3157=N277_helixDir;
}
else
{
bool3 l9_3158=bool3(N277_Path==6);
l9_3157=float3(l9_3158.x ? N277_curveDir.x : float3(0.0).x,l9_3158.y ? N277_curveDir.y : float3(0.0).y,l9_3158.z ? N277_curveDir.z : float3(0.0).z);
}
float3 l9_3159=l9_3157;
float3 l9_3160=l9_3159;
float3 l9_3161=l9_3160;
if (N277_OnOff)
{
N277_DirectionForce+=(l9_3161*N277_Strength);
}
N277_Direction=l9_3161;
}
float l9_3162=0.0;
float l9_3163=0.0;
float l9_3164=(*sc_set0.UserUniforms).sizeVelScale;
l9_3163=l9_3164;
l9_3162=l9_3163;
float l9_3165=l9_3162;
N111_sizeVelScale=l9_3165;
float l9_3166=0.0;
float l9_3167=0.0;
float l9_3168=float((*sc_set0.UserUniforms).IGNOREVEL!=0);
l9_3167=l9_3168;
l9_3166=l9_3167;
bool l9_3169=l9_3166!=0.0;
N111_ENABLE_IGNOREVEL=l9_3169;
float l9_3170=0.0;
float l9_3171=0.0;
float l9_3172=float((*sc_set0.UserUniforms).NORMALIZESCALETOTRANSFORM!=0);
l9_3171=l9_3172;
l9_3170=l9_3171;
bool l9_3173=l9_3170!=0.0;
N111_ENABLE_IGNORETRANSFORMSCALE=l9_3173;
float2 l9_3174=float2(0.0);
float2 l9_3175=float2(0.0);
float2 l9_3176=(*sc_set0.UserUniforms).velScaleMinMax;
l9_3175=l9_3176;
l9_3174=l9_3175;
float2 l9_3177=l9_3174;
N111_velScaleMinMax=l9_3177;
float2 l9_3178=float2(0.0);
float2 l9_3179=float2(0.0);
float2 l9_3180=(*sc_set0.UserUniforms).rotationRandom;
l9_3179=l9_3180;
l9_3178=l9_3179;
float2 l9_3181=l9_3178;
N111_rotationRandom=l9_3181;
float2 l9_3182=float2(0.0);
float2 l9_3183=float2(0.0);
float2 l9_3184=(*sc_set0.UserUniforms).rotationRate;
l9_3183=l9_3184;
l9_3182=l9_3183;
float2 l9_3185=l9_3182;
N111_rotationRate=l9_3185;
float2 l9_3186=float2(0.0);
float2 l9_3187=float2(0.0);
float2 l9_3188=(*sc_set0.UserUniforms).rotationRandomX;
l9_3187=l9_3188;
l9_3186=l9_3187;
float2 l9_3189=l9_3186;
N111_rotationRandomX=l9_3189;
float2 l9_3190=float2(0.0);
float2 l9_3191=float2(0.0);
float2 l9_3192=(*sc_set0.UserUniforms).rotationRateX;
l9_3191=l9_3192;
l9_3190=l9_3191;
float2 l9_3193=l9_3190;
N111_rotationRateX=l9_3193;
float2 l9_3194=float2(0.0);
float2 l9_3195=float2(0.0);
float2 l9_3196=(*sc_set0.UserUniforms).randomRotationY;
l9_3195=l9_3196;
l9_3194=l9_3195;
float2 l9_3197=l9_3194;
N111_rotationRandomY=l9_3197;
float2 l9_3198=float2(0.0);
float2 l9_3199=float2(0.0);
float2 l9_3200=(*sc_set0.UserUniforms).rotationRateY;
l9_3199=l9_3200;
l9_3198=l9_3199;
float2 l9_3201=l9_3198;
N111_rotationRateY=l9_3201;
float2 l9_3202=float2(0.0);
float2 l9_3203=float2(0.0);
float2 l9_3204=(*sc_set0.UserUniforms).randomRotationZ;
l9_3203=l9_3204;
l9_3202=l9_3203;
float2 l9_3205=l9_3202;
N111_rotationRandomZ=l9_3205;
float2 l9_3206=float2(0.0);
float2 l9_3207=float2(0.0);
float2 l9_3208=(*sc_set0.UserUniforms).rotationRateZ;
l9_3207=l9_3208;
l9_3206=l9_3207;
float2 l9_3209=l9_3206;
N111_rotationRateZ=l9_3209;
float l9_3210=0.0;
float l9_3211=0.0;
float l9_3212=(*sc_set0.UserUniforms).rotationDrag;
l9_3211=l9_3212;
l9_3210=l9_3211;
float l9_3213=l9_3210;
N111_rotationDrag=l9_3213;
float l9_3214=0.0;
float l9_3215=0.0;
float l9_3216=float((*sc_set0.UserUniforms).CENTER_BBOX!=0);
l9_3215=l9_3216;
l9_3214=l9_3215;
bool l9_3217=l9_3214!=0.0;
N111_ENABLE_CENTER_IN_BBOX=l9_3217;
float3 l9_3218=float3(0.0);
float3 l9_3219=float3(0.0);
float3 l9_3220=(*sc_set0.UserUniforms).displaceScale;
l9_3219=l9_3220;
l9_3218=l9_3219;
float3 l9_3221=l9_3218;
N111_ScaleDisplace=l9_3221;
float3 l9_3222=float3(0.0);
float3 l9_3223=float3(0.0);
float3 l9_3224=(*sc_set0.UserUniforms).displaceSpeed;
l9_3223=l9_3224;
l9_3222=l9_3223;
float3 l9_3225=l9_3222;
N111_ScrollSpeedDisplace=l9_3225;
float3 l9_3226=float3(0.0);
float3 l9_3227=float3(0.0);
float3 l9_3228=(*sc_set0.UserUniforms).displaceStrength;
l9_3227=l9_3228;
l9_3226=l9_3227;
float3 l9_3229=l9_3226;
N111_DisplaceStrength=l9_3229;
float3 l9_3230=float3(0.0);
float3 l9_3231=float3(0.0);
float3 l9_3232=(*sc_set0.UserUniforms).orbitAxis;
l9_3231=l9_3232;
l9_3230=l9_3231;
float3 l9_3233=l9_3230;
N111_AxisOrbit=l9_3233;
float3 l9_3234=float3(0.0);
float3 l9_3235=float3(0.0);
float3 l9_3236=(*sc_set0.UserUniforms).orbitCenter;
l9_3235=l9_3236;
l9_3234=l9_3235;
float3 l9_3237=l9_3234;
N111_CenterOrbit=l9_3237;
float2 l9_3238=float2(0.0);
float2 l9_3239=float2(0.0);
float2 l9_3240=(*sc_set0.UserUniforms).orbitMinMaxAngle;
l9_3239=l9_3240;
l9_3238=l9_3239;
float2 l9_3241=l9_3238;
N111_MinMaxOrbitAngle=l9_3241;
float2 l9_3242=float2(0.0);
float2 l9_3243=float2(0.0);
float2 l9_3244=(*sc_set0.UserUniforms).orbitMinMaxSpeed;
l9_3243=l9_3244;
l9_3242=l9_3243;
float2 l9_3245=l9_3242;
N111_MinMaxOrbitSpeed=l9_3245;
float l9_3246=0.0;
float l9_3247=0.0;
float l9_3248=(*sc_set0.UserUniforms).fadeDistanceVisible;
l9_3247=l9_3248;
l9_3246=l9_3247;
float l9_3249=l9_3246;
N111_fadeDistanceVisible=l9_3249;
float l9_3250=0.0;
float l9_3251=0.0;
float l9_3252=(*sc_set0.UserUniforms).fadeDistanceInvisible;
l9_3251=l9_3252;
l9_3250=l9_3251;
float l9_3253=l9_3250;
N111_fadeDistanceInvisible=l9_3253;
float3 l9_3254=float3(0.0);
float l9_3255=0.0;
float l9_3256=(*sc_set0.UserUniforms).timeGlobal;
l9_3255=l9_3256;
float l9_3257=0.0;
float l9_3258=(*sc_set0.UserUniforms).externalTimeInput;
l9_3257=l9_3258;
float l9_3259=0.0;
float l9_3260=(*sc_set0.UserUniforms).externalSeed;
l9_3259=l9_3260;
float l9_3261=0.0;
float l9_3262=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_3261=l9_3262;
float2 l9_3263=float2(0.0);
float2 l9_3264=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_3263=l9_3264;
float l9_3265=0.0;
float l9_3266=(*sc_set0.UserUniforms).spawnDuration;
l9_3265=l9_3266;
float l9_3267=0.0;
float l9_3268;
if ((int(TRAILS_tmp)!=0))
{
l9_3268=1.001;
}
else
{
l9_3268=0.001;
}
l9_3268-=0.001;
l9_3267=l9_3268;
float l9_3269=0.0;
float l9_3270=(*sc_set0.UserUniforms).trailLength;
l9_3269=l9_3270;
float4 l9_3271=float4(0.0);
l9_3271=tempGlobals.VertexColor;
float l9_3272=0.0;
l9_3272=l9_3271.x;
float l9_3273=0.0;
float l9_3274=l9_3267;
bool l9_3275=(l9_3274*1.0)!=0.0;
bool l9_3276;
if (l9_3275)
{
l9_3276=(l9_3272*1.0)!=0.0;
}
else
{
l9_3276=l9_3275;
}
l9_3273=float(l9_3276);
float l9_3277=0.0;
float l9_3278=l9_3255;
float l9_3279=l9_3257;
float l9_3280=l9_3259;
float l9_3281=l9_3261;
float2 l9_3282=l9_3263;
float l9_3283=l9_3265;
float l9_3284=l9_3269;
float l9_3285=l9_3273;
ssGlobals l9_3286=tempGlobals;
tempGlobals=l9_3286;
float l9_3287=0.0;
N181_timeGlobal=l9_3278;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_3279;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_3280;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_3281;
N181_lifeTimeMinMax=l9_3282;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_3283;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_3284;
N181_isTrailCondition=l9_3285!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_3288=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_3289=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_3288=length(float4(1.0)*l9_3289);
}
N181_globalSeed=N181_externalSeed+l9_3288;
int l9_3290=0;
l9_3290=ssInstanceID;
int l9_3291=l9_3290;
float l9_3292=float(l9_3291);
int l9_3293=int(l9_3292);
int l9_3294=l9_3293^(l9_3293*15299);
int l9_3295=l9_3294;
int l9_3296=l9_3295;
int l9_3297=((l9_3296*((l9_3296*1471343)+101146501))+1559861749)&2147483647;
int l9_3298=l9_3297;
int l9_3299=l9_3295*1399;
int l9_3300=((l9_3299*((l9_3299*1471343)+101146501))+1559861749)&2147483647;
int l9_3301=l9_3300;
int l9_3302=l9_3295*7177;
int l9_3303=((l9_3302*((l9_3302*1471343)+101146501))+1559861749)&2147483647;
int l9_3304=l9_3303;
int l9_3305=l9_3298;
float l9_3306=float(l9_3305)*4.6566129e-10;
int l9_3307=l9_3301;
float l9_3308=float(l9_3307)*4.6566129e-10;
int l9_3309=l9_3304;
float l9_3310=float(l9_3309)*4.6566129e-10;
float3 l9_3311=float3(l9_3306,l9_3308,l9_3310);
float3 l9_3312=l9_3311;
N181_particleSeed=l9_3312;
float l9_3313=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_3314;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_3314=N181_lifeTimeMinMax;
}
else
{
l9_3314=float2(N181_lifeTimeConstant);
}
float2 l9_3315=l9_3314;
float l9_3316=fast::max(l9_3315.x,0.0099999998);
float l9_3317=fast::max(l9_3315.y,0.0099999998);
float l9_3318=tempGlobals.gTimeElapsed;
float l9_3319=l9_3318;
if (N181_ENABLE_EXTERNALTIME)
{
l9_3319=N181_externalTime;
}
float l9_3320=l9_3319;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_3320=N181_timeGlobal*l9_3319;
}
else
{
float l9_3321=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_3321=N181_trailLength;
}
}
float l9_3322=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_3323=0.0;
float l9_3324;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_3324=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_3324=0.0;
}
l9_3323=l9_3324;
float l9_3325=l9_3323;
int l9_3326=0;
l9_3326=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_3327=l9_3326;
l9_3322=fast::max(l9_3325*(1.0-(1.0/float(l9_3327))),0.0);
}
else
{
l9_3322=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_3328=fract(((l9_3319*N181_timeGlobal)*(1.0/(l9_3315.y+l9_3321)))+l9_3322);
l9_3320=l9_3328*(l9_3315.y+l9_3321);
}
float l9_3329=mix(l9_3320/l9_3316,l9_3320/l9_3317,l9_3313);
float l9_3330=fast::clamp(l9_3329,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_3320,l9_3330);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_3331=tempGlobals.Surface_UVCoord0;
l9_3320-=(l9_3331.y*N181_trailLength);
l9_3329=mix(l9_3320/l9_3316,l9_3320/l9_3317,l9_3313);
l9_3330=fast::clamp(l9_3329,0.0,1.0);
}
}
float l9_3332=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_3319-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_3332=1.0;
}
}
}
float l9_3333=l9_3329+l9_3332;
N181_particleAlive=1.0;
if ((l9_3333>0.99989998)||(l9_3320<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_3319*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_3315,l9_3320,l9_3330);
l9_3287=N181_isTrail;
l9_3277=l9_3287;
float3 l9_3334=float3(0.0);
l9_3334=tempGlobals.N155_helixDirection;
float3 l9_3335=float3(0.0);
l9_3335=tempGlobals.N319_curveDirection;
float3 l9_3336=float3(0.0);
float3 l9_3337=(*sc_set0.UserUniforms).Tweak_N314;
l9_3336=l9_3337;
float3 l9_3338=float3(0.0);
float l9_3339=l9_3277;
float3 l9_3340=l9_3334;
float3 l9_3341=l9_3335;
float3 l9_3342=l9_3336;
ssGlobals l9_3343=tempGlobals;
tempGlobals=l9_3343;
float3 l9_3344=float3(0.0);
N277_OnOff=(int(Tweak_N313_tmp)!=0);
N277_isTrail=l9_3339!=0.0;
N277_helixDir=l9_3340;
N277_curveDir=l9_3341;
N277_Strength=l9_3342;
N277_Path=NODE_248_DROPLIST_ITEM_tmp;
N277_DirectionForce=float3(0.0);
N277_Direction=float3(0.0);
if (N277_OnOff||N277_isTrail)
{
float3 l9_3345;
if (N277_Path==5)
{
l9_3345=N277_helixDir;
}
else
{
bool3 l9_3346=bool3(N277_Path==6);
l9_3345=float3(l9_3346.x ? N277_curveDir.x : float3(0.0).x,l9_3346.y ? N277_curveDir.y : float3(0.0).y,l9_3346.z ? N277_curveDir.z : float3(0.0).z);
}
float3 l9_3347=l9_3345;
float3 l9_3348=l9_3347;
float3 l9_3349=l9_3348;
if (N277_OnOff)
{
N277_DirectionForce+=(l9_3349*N277_Strength);
}
N277_Direction=l9_3349;
}
l9_3344=N277_Direction;
l9_3338=l9_3344;
l9_3254=l9_3338;
float3 l9_3350=l9_3254;
N111_tangentIN=l9_3350;
float3 l9_3351=float3(0.0);
N111_particleSeed=N111_particleSeedIn;
N111_globalSeed=N111_globalSeedIn;
float l9_3352=N111_particleSeed.x;
float l9_3353=N111_particleSeed.y;
float l9_3354=N111_particleSeed.z;
float3 l9_3355=fract((float3(l9_3352,l9_3353,l9_3354)*3048.28)+float3(N111_globalSeed))-float3(0.5);
float3 l9_3356=fract((N111_particleSeed*374.57129)+float3(N111_globalSeed))-float3(0.5);
float3 l9_3357=normalize(l9_3356+float3(1e-06));
float l9_3358=fract(N111_particleSeed.x+N111_globalSeed);
float l9_3359=l9_3358;
float l9_3360=0.33333334;
float l9_3361;
if (l9_3359<=0.0)
{
l9_3361=0.0;
}
else
{
l9_3361=pow(l9_3359,l9_3360);
}
float l9_3362=l9_3361;
float l9_3363=l9_3362;
l9_3357*=l9_3363;
l9_3357/=float3(2.0);
float l9_3364=fract((N111_particleSeed.x*334.59122)+N111_globalSeed);
float l9_3365=fract((N111_particleSeed.y*41.231232)+N111_globalSeed);
float l9_3366=fract((N111_particleSeed.z*18.984529)+N111_globalSeed);
float l9_3367=fract((N111_particleSeed.x*654.15588)+N111_globalSeed);
float l9_3368=fract((N111_particleSeed.y*45.722408)+N111_globalSeed);
float3 l9_3369=(float3(l9_3367,l9_3368,l9_3366)-float3(0.5))*2.0;
float3 l9_3370=float3(l9_3367,l9_3368,l9_3366);
float l9_3371=fract((N111_particleSeed.z*15.32451)+N111_globalSeed);
float2 l9_3372=fract((N111_particleSeed.xz*582.65741)+float2(N111_globalSeed));
float2 l9_3373=N111_timeValuesIn.xy;
float l9_3374=N111_timeValuesIn.z;
float l9_3375=N111_timeValuesIn.w;
N111_cameraFade_trailHeadTime_taper=float4(0.0);
float3 l9_3376=l9_3351;
float3 l9_3377=l9_3351;
float3 l9_3378=l9_3351;
if ((int(INILOCATION_tmp)!=0))
{
l9_3378=N111_spawnLocation;
}
if ((int(BOXSPAWN_tmp)!=0))
{
l9_3376=N111_spawnBox*l9_3355;
}
if ((int(SPHERESPAWN_tmp)!=0))
{
l9_3377=N111_spawnSphere*l9_3357;
}
float3 l9_3379=(l9_3378+l9_3377)+l9_3376;
float3 l9_3380=l9_3351;
if ((int(NOISE_tmp)!=0))
{
float3 l9_3381=N111_noiseFrequency;
float3 l9_3382=N111_noiseMult;
float3 l9_3383=l9_3369;
float l9_3384=l9_3375;
float l9_3385=sin(l9_3384*l9_3381.x);
float l9_3386=sin(l9_3384*l9_3381.y);
float l9_3387=sin(l9_3384*l9_3381.z);
float3 l9_3388=(float3(l9_3385,l9_3386,l9_3387)*l9_3382)*l9_3383;
float3 l9_3389=l9_3388;
l9_3380+=l9_3389;
}
if ((int(SNOISE_tmp)!=0))
{
float l9_3390=l9_3366;
float l9_3391=l9_3367;
float l9_3392=l9_3368;
float3 l9_3393=N111_sNoiseFrequency;
float3 l9_3394=N111_sNoiseMult;
float3 l9_3395=l9_3369;
float l9_3396=l9_3374;
float2 l9_3397=float2(l9_3390*l9_3396,l9_3393.x);
float2 l9_3398=floor(l9_3397+float2(dot(l9_3397,float2(0.36602542))));
float2 l9_3399=(l9_3397-l9_3398)+float2(dot(l9_3398,float2(0.21132487)));
float2 l9_3400=float2(0.0);
bool2 l9_3401=bool2(l9_3399.x>l9_3399.y);
l9_3400=float2(l9_3401.x ? float2(1.0,0.0).x : float2(0.0,1.0).x,l9_3401.y ? float2(1.0,0.0).y : float2(0.0,1.0).y);
float4 l9_3402=l9_3399.xyxy+float4(0.21132487,0.21132487,-0.57735026,-0.57735026);
float2 l9_3403=l9_3402.xy-l9_3400;
l9_3402=float4(l9_3403.x,l9_3403.y,l9_3402.z,l9_3402.w);
l9_3398=mod(l9_3398,float2(289.0));
float3 l9_3404=float3(l9_3398.y)+float3(0.0,l9_3400.y,1.0);
float3 l9_3405=mod(((l9_3404*34.0)+float3(1.0))*l9_3404,float3(289.0));
float3 l9_3406=(l9_3405+float3(l9_3398.x))+float3(0.0,l9_3400.x,1.0);
float3 l9_3407=mod(((l9_3406*34.0)+float3(1.0))*l9_3406,float3(289.0));
float3 l9_3408=l9_3407;
float3 l9_3409=fast::max(float3(0.5)-float3(dot(l9_3399,l9_3399),dot(l9_3402.xy,l9_3402.xy),dot(l9_3402.zw,l9_3402.zw)),float3(0.0));
l9_3409*=l9_3409;
l9_3409*=l9_3409;
float3 l9_3410=(fract(l9_3408*float3(0.024390243))*2.0)-float3(1.0);
float3 l9_3411=abs(l9_3410)-float3(0.5);
float3 l9_3412=floor(l9_3410+float3(0.5));
float3 l9_3413=l9_3410-l9_3412;
l9_3409*=(float3(1.7928429)-(((l9_3413*l9_3413)+(l9_3411*l9_3411))*0.85373473));
float3 l9_3414=float3(0.0);
l9_3414.x=(l9_3413.x*l9_3399.x)+(l9_3411.x*l9_3399.y);
float2 l9_3415=(l9_3413.yz*l9_3402.xz)+(l9_3411.yz*l9_3402.yw);
l9_3414=float3(l9_3414.x,l9_3415.x,l9_3415.y);
float l9_3416=130.0*dot(l9_3409,l9_3414);
float l9_3417=l9_3416;
float2 l9_3418=float2(l9_3391*l9_3396,l9_3393.y);
float2 l9_3419=floor(l9_3418+float2(dot(l9_3418,float2(0.36602542))));
float2 l9_3420=(l9_3418-l9_3419)+float2(dot(l9_3419,float2(0.21132487)));
float2 l9_3421=float2(0.0);
bool2 l9_3422=bool2(l9_3420.x>l9_3420.y);
l9_3421=float2(l9_3422.x ? float2(1.0,0.0).x : float2(0.0,1.0).x,l9_3422.y ? float2(1.0,0.0).y : float2(0.0,1.0).y);
float4 l9_3423=l9_3420.xyxy+float4(0.21132487,0.21132487,-0.57735026,-0.57735026);
float2 l9_3424=l9_3423.xy-l9_3421;
l9_3423=float4(l9_3424.x,l9_3424.y,l9_3423.z,l9_3423.w);
l9_3419=mod(l9_3419,float2(289.0));
float3 l9_3425=float3(l9_3419.y)+float3(0.0,l9_3421.y,1.0);
float3 l9_3426=mod(((l9_3425*34.0)+float3(1.0))*l9_3425,float3(289.0));
float3 l9_3427=(l9_3426+float3(l9_3419.x))+float3(0.0,l9_3421.x,1.0);
float3 l9_3428=mod(((l9_3427*34.0)+float3(1.0))*l9_3427,float3(289.0));
float3 l9_3429=l9_3428;
float3 l9_3430=fast::max(float3(0.5)-float3(dot(l9_3420,l9_3420),dot(l9_3423.xy,l9_3423.xy),dot(l9_3423.zw,l9_3423.zw)),float3(0.0));
l9_3430*=l9_3430;
l9_3430*=l9_3430;
float3 l9_3431=(fract(l9_3429*float3(0.024390243))*2.0)-float3(1.0);
float3 l9_3432=abs(l9_3431)-float3(0.5);
float3 l9_3433=floor(l9_3431+float3(0.5));
float3 l9_3434=l9_3431-l9_3433;
l9_3430*=(float3(1.7928429)-(((l9_3434*l9_3434)+(l9_3432*l9_3432))*0.85373473));
float3 l9_3435=float3(0.0);
l9_3435.x=(l9_3434.x*l9_3420.x)+(l9_3432.x*l9_3420.y);
float2 l9_3436=(l9_3434.yz*l9_3423.xz)+(l9_3432.yz*l9_3423.yw);
l9_3435=float3(l9_3435.x,l9_3436.x,l9_3436.y);
float l9_3437=130.0*dot(l9_3430,l9_3435);
float l9_3438=l9_3437;
float2 l9_3439=float2(l9_3392*l9_3396,l9_3393.z);
float2 l9_3440=floor(l9_3439+float2(dot(l9_3439,float2(0.36602542))));
float2 l9_3441=(l9_3439-l9_3440)+float2(dot(l9_3440,float2(0.21132487)));
float2 l9_3442=float2(0.0);
bool2 l9_3443=bool2(l9_3441.x>l9_3441.y);
l9_3442=float2(l9_3443.x ? float2(1.0,0.0).x : float2(0.0,1.0).x,l9_3443.y ? float2(1.0,0.0).y : float2(0.0,1.0).y);
float4 l9_3444=l9_3441.xyxy+float4(0.21132487,0.21132487,-0.57735026,-0.57735026);
float2 l9_3445=l9_3444.xy-l9_3442;
l9_3444=float4(l9_3445.x,l9_3445.y,l9_3444.z,l9_3444.w);
l9_3440=mod(l9_3440,float2(289.0));
float3 l9_3446=float3(l9_3440.y)+float3(0.0,l9_3442.y,1.0);
float3 l9_3447=mod(((l9_3446*34.0)+float3(1.0))*l9_3446,float3(289.0));
float3 l9_3448=(l9_3447+float3(l9_3440.x))+float3(0.0,l9_3442.x,1.0);
float3 l9_3449=mod(((l9_3448*34.0)+float3(1.0))*l9_3448,float3(289.0));
float3 l9_3450=l9_3449;
float3 l9_3451=fast::max(float3(0.5)-float3(dot(l9_3441,l9_3441),dot(l9_3444.xy,l9_3444.xy),dot(l9_3444.zw,l9_3444.zw)),float3(0.0));
l9_3451*=l9_3451;
l9_3451*=l9_3451;
float3 l9_3452=(fract(l9_3450*float3(0.024390243))*2.0)-float3(1.0);
float3 l9_3453=abs(l9_3452)-float3(0.5);
float3 l9_3454=floor(l9_3452+float3(0.5));
float3 l9_3455=l9_3452-l9_3454;
l9_3451*=(float3(1.7928429)-(((l9_3455*l9_3455)+(l9_3453*l9_3453))*0.85373473));
float3 l9_3456=float3(0.0);
l9_3456.x=(l9_3455.x*l9_3441.x)+(l9_3453.x*l9_3441.y);
float2 l9_3457=(l9_3455.yz*l9_3444.xz)+(l9_3453.yz*l9_3444.yw);
l9_3456=float3(l9_3456.x,l9_3457.x,l9_3457.y);
float l9_3458=130.0*dot(l9_3451,l9_3456);
float l9_3459=l9_3458;
float3 l9_3460=(float3(l9_3417,l9_3438,l9_3459)*l9_3394)*l9_3395;
l9_3380+=l9_3460;
}
float3 l9_3461=float3(0.0,((N111_gravity/2.0)*l9_3374)*l9_3374,0.0);
float3 l9_3462=l9_3351;
if ((int(FORCE_tmp)!=0))
{
l9_3462=((N111_localForce/float3(2.0))*l9_3374)*l9_3374;
}
float3 l9_3463=l9_3351;
if ((int(CUSTOMFORCE_tmp)!=0))
{
tempGlobals.N111_ParticleSpawnPosition=l9_3379;
float3 l9_3464=float3(0.0);
float3 l9_3465=float3(0.0);
l9_3465=tempGlobals.N111_ParticleSpawnPosition;
float l9_3466=0.0;
float l9_3467=(*sc_set0.UserUniforms).timeGlobal;
l9_3466=l9_3467;
float l9_3468=0.0;
float l9_3469=(*sc_set0.UserUniforms).externalTimeInput;
l9_3468=l9_3469;
float l9_3470=0.0;
float l9_3471=(*sc_set0.UserUniforms).externalSeed;
l9_3470=l9_3471;
float l9_3472=0.0;
float l9_3473=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_3472=l9_3473;
float2 l9_3474=float2(0.0);
float2 l9_3475=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_3474=l9_3475;
float l9_3476=0.0;
float l9_3477=(*sc_set0.UserUniforms).spawnDuration;
l9_3476=l9_3477;
float l9_3478=0.0;
float l9_3479;
if ((int(TRAILS_tmp)!=0))
{
l9_3479=1.001;
}
else
{
l9_3479=0.001;
}
l9_3479-=0.001;
l9_3478=l9_3479;
float l9_3480=0.0;
float l9_3481=(*sc_set0.UserUniforms).trailLength;
l9_3480=l9_3481;
float4 l9_3482=float4(0.0);
l9_3482=tempGlobals.VertexColor;
float l9_3483=0.0;
l9_3483=l9_3482.x;
float l9_3484=0.0;
float l9_3485=l9_3478;
bool l9_3486=(l9_3485*1.0)!=0.0;
bool l9_3487;
if (l9_3486)
{
l9_3487=(l9_3483*1.0)!=0.0;
}
else
{
l9_3487=l9_3486;
}
l9_3484=float(l9_3487);
float3 l9_3488=float3(0.0);
float l9_3489=0.0;
float l9_3490=l9_3466;
float l9_3491=l9_3468;
float l9_3492=l9_3470;
float l9_3493=l9_3472;
float2 l9_3494=l9_3474;
float l9_3495=l9_3476;
float l9_3496=l9_3480;
float l9_3497=l9_3484;
ssGlobals l9_3498=tempGlobals;
tempGlobals=l9_3498;
float3 l9_3499=float3(0.0);
float l9_3500=0.0;
N181_timeGlobal=l9_3490;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_3491;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_3492;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_3493;
N181_lifeTimeMinMax=l9_3494;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_3495;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_3496;
N181_isTrailCondition=l9_3497!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_3501=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_3502=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_3501=length(float4(1.0)*l9_3502);
}
N181_globalSeed=N181_externalSeed+l9_3501;
int l9_3503=0;
l9_3503=ssInstanceID;
int l9_3504=l9_3503;
float l9_3505=float(l9_3504);
int l9_3506=int(l9_3505);
int l9_3507=l9_3506^(l9_3506*15299);
int l9_3508=l9_3507;
int l9_3509=l9_3508;
int l9_3510=((l9_3509*((l9_3509*1471343)+101146501))+1559861749)&2147483647;
int l9_3511=l9_3510;
int l9_3512=l9_3508*1399;
int l9_3513=((l9_3512*((l9_3512*1471343)+101146501))+1559861749)&2147483647;
int l9_3514=l9_3513;
int l9_3515=l9_3508*7177;
int l9_3516=((l9_3515*((l9_3515*1471343)+101146501))+1559861749)&2147483647;
int l9_3517=l9_3516;
int l9_3518=l9_3511;
float l9_3519=float(l9_3518)*4.6566129e-10;
int l9_3520=l9_3514;
float l9_3521=float(l9_3520)*4.6566129e-10;
int l9_3522=l9_3517;
float l9_3523=float(l9_3522)*4.6566129e-10;
float3 l9_3524=float3(l9_3519,l9_3521,l9_3523);
float3 l9_3525=l9_3524;
N181_particleSeed=l9_3525;
float l9_3526=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_3527;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_3527=N181_lifeTimeMinMax;
}
else
{
l9_3527=float2(N181_lifeTimeConstant);
}
float2 l9_3528=l9_3527;
float l9_3529=fast::max(l9_3528.x,0.0099999998);
float l9_3530=fast::max(l9_3528.y,0.0099999998);
float l9_3531=tempGlobals.gTimeElapsed;
float l9_3532=l9_3531;
if (N181_ENABLE_EXTERNALTIME)
{
l9_3532=N181_externalTime;
}
float l9_3533=l9_3532;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_3533=N181_timeGlobal*l9_3532;
}
else
{
float l9_3534=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_3534=N181_trailLength;
}
}
float l9_3535=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_3536=0.0;
float l9_3537;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_3537=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_3537=0.0;
}
l9_3536=l9_3537;
float l9_3538=l9_3536;
int l9_3539=0;
l9_3539=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_3540=l9_3539;
l9_3535=fast::max(l9_3538*(1.0-(1.0/float(l9_3540))),0.0);
}
else
{
l9_3535=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_3541=fract(((l9_3532*N181_timeGlobal)*(1.0/(l9_3528.y+l9_3534)))+l9_3535);
l9_3533=l9_3541*(l9_3528.y+l9_3534);
}
float l9_3542=mix(l9_3533/l9_3529,l9_3533/l9_3530,l9_3526);
float l9_3543=fast::clamp(l9_3542,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_3533,l9_3543);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_3544=tempGlobals.Surface_UVCoord0;
l9_3533-=(l9_3544.y*N181_trailLength);
l9_3542=mix(l9_3533/l9_3529,l9_3533/l9_3530,l9_3526);
l9_3543=fast::clamp(l9_3542,0.0,1.0);
}
}
float l9_3545=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_3532-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_3545=1.0;
}
}
}
float l9_3546=l9_3542+l9_3545;
N181_particleAlive=1.0;
if ((l9_3546>0.99989998)||(l9_3533<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_3532*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_3528,l9_3533,l9_3543);
l9_3499=N181_particleSeed;
l9_3500=N181_isTrail;
l9_3488=l9_3499;
l9_3489=l9_3500;
float l9_3547=0.0;
float l9_3548=(*sc_set0.UserUniforms).attractRepelForceStrength;
l9_3547=l9_3548;
float3 l9_3549=float3(0.0);
float3 l9_3550=(*sc_set0.UserUniforms).customForceOrigin;
l9_3549=l9_3550;
float3 l9_3551=float3(0.0);
float3 l9_3552=l9_3465;
float3 l9_3553=l9_3488;
float l9_3554=l9_3547;
float3 l9_3555=l9_3549;
ssGlobals l9_3556=tempGlobals;
tempGlobals=l9_3556;
float3 l9_3557=float3(0.0);
N223_OnOff=(int(Tweak_N131_tmp)!=0);
N223_ParticleSpawnPosition=l9_3552;
N223_ParticleSeed=l9_3553;
N223_Strength=l9_3554;
N223_ForceOrigin=l9_3555;
N223_CustomForce=float3(0.0);
float4x4 l9_3558=(*sc_set0.UserUniforms).sc_ModelMatrix;
float4 l9_3559=l9_3558*float4(N223_ParticleSpawnPosition,1.0);
if (N223_OnOff)
{
float3 l9_3560=N223_ForceOrigin;
float3 l9_3561=l9_3559.xyz;
float l9_3562=N223_Strength;
float3 l9_3563=float3(0.0);
if (all(l9_3560==l9_3561))
{
int l9_3564=0;
l9_3564=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_3565=l9_3564;
float3 l9_3566=N223_ParticleSeed*float(l9_3565);
int l9_3567=int(l9_3566.x);
int l9_3568=int(l9_3566.y);
int l9_3569=int(l9_3566.z);
int l9_3570=((l9_3567*15299)^(l9_3568*30133))^(l9_3569*17539);
int l9_3571=l9_3570;
int l9_3572=l9_3571;
int l9_3573=((l9_3572*((l9_3572*1471343)+101146501))+1559861749)&2147483647;
int l9_3574=l9_3573;
int l9_3575=l9_3571*1399;
int l9_3576=((l9_3575*((l9_3575*1471343)+101146501))+1559861749)&2147483647;
int l9_3577=l9_3576;
int l9_3578=l9_3571*7177;
int l9_3579=((l9_3578*((l9_3578*1471343)+101146501))+1559861749)&2147483647;
int l9_3580=l9_3579;
int l9_3581=l9_3574;
float l9_3582=float(l9_3581)*4.6566129e-10;
int l9_3583=l9_3577;
float l9_3584=float(l9_3583)*4.6566129e-10;
int l9_3585=l9_3580;
float l9_3586=float(l9_3585)*4.6566129e-10;
float3 l9_3587=float3(l9_3582,l9_3584,l9_3586);
float3 l9_3588=l9_3587;
l9_3563=normalize((l9_3588-float3(0.5))*2.0);
}
else
{
l9_3563=normalize(l9_3560-l9_3561);
}
float3 l9_3589=l9_3563*l9_3562;
N223_CustomForce+=l9_3589;
}
l9_3557=N223_CustomForce;
l9_3551=l9_3557;
float3 l9_3590=float3(0.0);
l9_3590=tempGlobals.N111_ParticleSpawnPosition;
float3 l9_3591=float3(0.0);
float3 l9_3592=(*sc_set0.UserUniforms).Tex3dScale;
l9_3591=l9_3592;
float3 l9_3593=float3(0.0);
float3 l9_3594=(*sc_set0.UserUniforms).Tex3dScrollSpeed;
l9_3593=l9_3594;
float3 l9_3595=float3(0.0);
float3 l9_3596=(*sc_set0.UserUniforms).Tex3dForceStrength;
l9_3595=l9_3596;
float3 l9_3597=float3(0.0);
float3 l9_3598=l9_3590;
float3 l9_3599=l9_3591;
float3 l9_3600=l9_3593;
float3 l9_3601=l9_3595;
ssGlobals l9_3602=tempGlobals;
tempGlobals=l9_3602;
float3 l9_3603=float3(0.0);
N202_OnOff=(int(Tweak_N133_tmp)!=0);
N202_ParticleSpawnPosition=l9_3598;
N202_ScaleTexture=l9_3599;
N202_ScrollSpeed=l9_3600;
N202_Strength=l9_3601;
N202_CustomForce=float3(0.0);
if (N202_OnOff)
{
float3 l9_3604=N202_ParticleSpawnPosition;
float3 l9_3605=N202_Strength;
float3 l9_3606=l9_3604;
float l9_3607=tempGlobals.gTimeElapsed;
float3 l9_3608=float3(l9_3607)*(N202_ScrollSpeed*0.1);
l9_3606/=(N202_ScaleTexture*2.0);
l9_3606+=l9_3608;
float3 l9_3609=l9_3606;
float4 l9_3610=float4(0.0);
float3 l9_3611=l9_3609;
float l9_3612=0.0;
float4 l9_3613=sc_set0.Tex3d.sample(sc_set0.Tex3dSmpSC,l9_3611,level(l9_3612));
l9_3610=l9_3613;
float4 l9_3614=l9_3610;
float3 l9_3615=l9_3614.xyz;
float3 l9_3616=(l9_3615*2.0)-float3(1.0);
l9_3616*=l9_3605;
float3 l9_3617=l9_3616;
N202_CustomForce+=l9_3617;
}
l9_3603=N202_CustomForce;
l9_3597=l9_3603;
float3 l9_3618=float3(0.0);
l9_3618=tempGlobals.N155_helixDirection;
float3 l9_3619=float3(0.0);
l9_3619=tempGlobals.N319_curveDirection;
float3 l9_3620=float3(0.0);
float3 l9_3621=(*sc_set0.UserUniforms).Tweak_N314;
l9_3620=l9_3621;
float3 l9_3622=float3(0.0);
float l9_3623=l9_3489;
float3 l9_3624=l9_3618;
float3 l9_3625=l9_3619;
float3 l9_3626=l9_3620;
ssGlobals l9_3627=tempGlobals;
tempGlobals=l9_3627;
float3 l9_3628=float3(0.0);
N277_OnOff=(int(Tweak_N313_tmp)!=0);
N277_isTrail=l9_3623!=0.0;
N277_helixDir=l9_3624;
N277_curveDir=l9_3625;
N277_Strength=l9_3626;
N277_Path=NODE_248_DROPLIST_ITEM_tmp;
N277_DirectionForce=float3(0.0);
N277_Direction=float3(0.0);
if (N277_OnOff||N277_isTrail)
{
float3 l9_3629;
if (N277_Path==5)
{
l9_3629=N277_helixDir;
}
else
{
bool3 l9_3630=bool3(N277_Path==6);
l9_3629=float3(l9_3630.x ? N277_curveDir.x : float3(0.0).x,l9_3630.y ? N277_curveDir.y : float3(0.0).y,l9_3630.z ? N277_curveDir.z : float3(0.0).z);
}
float3 l9_3631=l9_3629;
float3 l9_3632=l9_3631;
float3 l9_3633=l9_3632;
if (N277_OnOff)
{
N277_DirectionForce+=(l9_3633*N277_Strength);
}
N277_Direction=l9_3633;
}
l9_3628=N277_DirectionForce;
l9_3622=l9_3628;
float3 l9_3634=float3(0.0);
l9_3634=(l9_3551+l9_3597)+l9_3622;
l9_3464=l9_3634;
float3 l9_3635=l9_3464;
l9_3463=((l9_3635/float3(2.0))*l9_3374)*l9_3374;
}
float3 l9_3636=l9_3351;
float3 l9_3637=N111_velocityMin+(((l9_3369+float3(1.0))/float3(2.0))*(N111_velocityMax-N111_velocityMin));
if ((int(VELRAMP_tmp)!=0))
{
l9_3637=mix(N111_velocityMin,N111_velocityMax,l9_3370);
}
float3 l9_3638=l9_3637;
float l9_3639=l9_3374;
float3 l9_3640=N111_velocityDrag;
float3 l9_3641=l9_3380;
float l9_3642=l9_3375;
float3 l9_3643=float3(l9_3639,l9_3639,l9_3639);
float3 l9_3644=l9_3640;
float l9_3645;
if (l9_3643.x<=0.0)
{
l9_3645=0.0;
}
else
{
l9_3645=pow(l9_3643.x,l9_3644.x);
}
float l9_3646=l9_3645;
float l9_3647;
if (l9_3643.y<=0.0)
{
l9_3647=0.0;
}
else
{
l9_3647=pow(l9_3643.y,l9_3644.y);
}
float l9_3648=l9_3647;
float l9_3649;
if (l9_3643.z<=0.0)
{
l9_3649=0.0;
}
else
{
l9_3649=pow(l9_3643.z,l9_3644.z);
}
float3 l9_3650=float3(l9_3646,l9_3648,l9_3649);
float3 l9_3651=l9_3650;
float3 l9_3652=(l9_3638+l9_3641)*l9_3651;
if ((int(VELRAMP_tmp)!=0))
{
float l9_3653=floor(l9_3642*10000.0)/10000.0;
float2 l9_3654=tempGlobals.Surface_UVCoord0;
float2 l9_3655=(l9_3654/float2(10000.0,1.0))+float2(l9_3653,0.0);
float2 l9_3656=l9_3655;
float4 l9_3657=float4(0.0);
int l9_3658;
if ((int(velRampTextureHasSwappedViews_tmp)!=0))
{
int l9_3659=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3659=0;
}
else
{
l9_3659=gl_InstanceIndex%2;
}
int l9_3660=l9_3659;
l9_3658=1-l9_3660;
}
else
{
int l9_3661=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3661=0;
}
else
{
l9_3661=gl_InstanceIndex%2;
}
int l9_3662=l9_3661;
l9_3658=l9_3662;
}
int l9_3663=l9_3658;
int l9_3664=velRampTextureLayout_tmp;
int l9_3665=l9_3663;
float2 l9_3666=l9_3656;
bool l9_3667=(int(SC_USE_UV_TRANSFORM_velRampTexture_tmp)!=0);
float3x3 l9_3668=(*sc_set0.UserUniforms).velRampTextureTransform;
int2 l9_3669=int2(SC_SOFTWARE_WRAP_MODE_U_velRampTexture_tmp,SC_SOFTWARE_WRAP_MODE_V_velRampTexture_tmp);
bool l9_3670=(int(SC_USE_UV_MIN_MAX_velRampTexture_tmp)!=0);
float4 l9_3671=(*sc_set0.UserUniforms).velRampTextureUvMinMax;
bool l9_3672=(int(SC_USE_CLAMP_TO_BORDER_velRampTexture_tmp)!=0);
float4 l9_3673=(*sc_set0.UserUniforms).velRampTextureBorderColor;
float l9_3674=0.0;
bool l9_3675=l9_3672&&(!l9_3670);
float l9_3676=1.0;
float l9_3677=l9_3666.x;
int l9_3678=l9_3669.x;
if (l9_3678==1)
{
l9_3677=fract(l9_3677);
}
else
{
if (l9_3678==2)
{
float l9_3679=fract(l9_3677);
float l9_3680=l9_3677-l9_3679;
float l9_3681=step(0.25,fract(l9_3680*0.5));
l9_3677=mix(l9_3679,1.0-l9_3679,fast::clamp(l9_3681,0.0,1.0));
}
}
l9_3666.x=l9_3677;
float l9_3682=l9_3666.y;
int l9_3683=l9_3669.y;
if (l9_3683==1)
{
l9_3682=fract(l9_3682);
}
else
{
if (l9_3683==2)
{
float l9_3684=fract(l9_3682);
float l9_3685=l9_3682-l9_3684;
float l9_3686=step(0.25,fract(l9_3685*0.5));
l9_3682=mix(l9_3684,1.0-l9_3684,fast::clamp(l9_3686,0.0,1.0));
}
}
l9_3666.y=l9_3682;
if (l9_3670)
{
bool l9_3687=l9_3672;
bool l9_3688;
if (l9_3687)
{
l9_3688=l9_3669.x==3;
}
else
{
l9_3688=l9_3687;
}
float l9_3689=l9_3666.x;
float l9_3690=l9_3671.x;
float l9_3691=l9_3671.z;
bool l9_3692=l9_3688;
float l9_3693=l9_3676;
float l9_3694=fast::clamp(l9_3689,l9_3690,l9_3691);
float l9_3695=step(abs(l9_3689-l9_3694),9.9999997e-06);
l9_3693*=(l9_3695+((1.0-float(l9_3692))*(1.0-l9_3695)));
l9_3689=l9_3694;
l9_3666.x=l9_3689;
l9_3676=l9_3693;
bool l9_3696=l9_3672;
bool l9_3697;
if (l9_3696)
{
l9_3697=l9_3669.y==3;
}
else
{
l9_3697=l9_3696;
}
float l9_3698=l9_3666.y;
float l9_3699=l9_3671.y;
float l9_3700=l9_3671.w;
bool l9_3701=l9_3697;
float l9_3702=l9_3676;
float l9_3703=fast::clamp(l9_3698,l9_3699,l9_3700);
float l9_3704=step(abs(l9_3698-l9_3703),9.9999997e-06);
l9_3702*=(l9_3704+((1.0-float(l9_3701))*(1.0-l9_3704)));
l9_3698=l9_3703;
l9_3666.y=l9_3698;
l9_3676=l9_3702;
}
float2 l9_3705=l9_3666;
bool l9_3706=l9_3667;
float3x3 l9_3707=l9_3668;
if (l9_3706)
{
l9_3705=float2((l9_3707*float3(l9_3705,1.0)).xy);
}
float2 l9_3708=l9_3705;
l9_3666=l9_3708;
float l9_3709=l9_3666.x;
int l9_3710=l9_3669.x;
bool l9_3711=l9_3675;
float l9_3712=l9_3676;
if ((l9_3710==0)||(l9_3710==3))
{
float l9_3713=l9_3709;
float l9_3714=0.0;
float l9_3715=1.0;
bool l9_3716=l9_3711;
float l9_3717=l9_3712;
float l9_3718=fast::clamp(l9_3713,l9_3714,l9_3715);
float l9_3719=step(abs(l9_3713-l9_3718),9.9999997e-06);
l9_3717*=(l9_3719+((1.0-float(l9_3716))*(1.0-l9_3719)));
l9_3713=l9_3718;
l9_3709=l9_3713;
l9_3712=l9_3717;
}
l9_3666.x=l9_3709;
l9_3676=l9_3712;
float l9_3720=l9_3666.y;
int l9_3721=l9_3669.y;
bool l9_3722=l9_3675;
float l9_3723=l9_3676;
if ((l9_3721==0)||(l9_3721==3))
{
float l9_3724=l9_3720;
float l9_3725=0.0;
float l9_3726=1.0;
bool l9_3727=l9_3722;
float l9_3728=l9_3723;
float l9_3729=fast::clamp(l9_3724,l9_3725,l9_3726);
float l9_3730=step(abs(l9_3724-l9_3729),9.9999997e-06);
l9_3728*=(l9_3730+((1.0-float(l9_3727))*(1.0-l9_3730)));
l9_3724=l9_3729;
l9_3720=l9_3724;
l9_3723=l9_3728;
}
l9_3666.y=l9_3720;
l9_3676=l9_3723;
float2 l9_3731=l9_3666;
int l9_3732=l9_3664;
int l9_3733=l9_3665;
float l9_3734=l9_3674;
float2 l9_3735=l9_3731;
int l9_3736=l9_3732;
int l9_3737=l9_3733;
float3 l9_3738=float3(0.0);
if (l9_3736==0)
{
l9_3738=float3(l9_3735,0.0);
}
else
{
if (l9_3736==1)
{
l9_3738=float3(l9_3735.x,(l9_3735.y*0.5)+(0.5-(float(l9_3737)*0.5)),0.0);
}
else
{
l9_3738=float3(l9_3735,float(l9_3737));
}
}
float3 l9_3739=l9_3738;
float3 l9_3740=l9_3739;
float4 l9_3741=sc_set0.velRampTexture.sample(sc_set0.velRampTextureSmpSC,l9_3740.xy,level(l9_3734));
float4 l9_3742=l9_3741;
if (l9_3672)
{
l9_3742=mix(l9_3673,l9_3742,float4(l9_3676));
}
float4 l9_3743=l9_3742;
l9_3657=l9_3743;
float4 l9_3744=l9_3657;
float3 l9_3745=l9_3744.xyz;
l9_3652=(l9_3638+l9_3641)*l9_3745;
if (!(SC_DEVICE_CLASS_tmp>=2))
{
l9_3652=l9_3638*l9_3651;
}
}
float3 l9_3746=l9_3652;
l9_3636=l9_3746;
if ((int(TRAILS_tmp)!=0))
{
if (N111_isTrail)
{
float2 l9_3747=tempGlobals.Surface_UVCoord0;
float2 l9_3748=l9_3747;
float l9_3749=mix(1.0,l9_3748.y,1.0-N111_taper.x);
l9_3749*=mix(1.0,1.0-l9_3748.y,1.0-N111_taper.y);
N111_cameraFade_trailHeadTime_taper=float4(N111_cameraFade_trailHeadTime_taper.x,N111_trailHeadTime.x,N111_trailHeadTime.y,N111_cameraFade_trailHeadTime_taper.w);
N111_cameraFade_trailHeadTime_taper.w=l9_3749;
}
}
float4x4 l9_3750=(*sc_set0.UserUniforms).sc_ModelMatrix;
float l9_3751=length(l9_3750[0].xyz);
float4x4 l9_3752=(*sc_set0.UserUniforms).sc_ModelMatrix;
float l9_3753=length(l9_3752[1].xyz);
float4x4 l9_3754=(*sc_set0.UserUniforms).sc_ModelMatrix;
float l9_3755=length(l9_3754[2].xyz);
float3 l9_3756=float3(l9_3751,l9_3753,l9_3755);
float4x4 l9_3757=(*sc_set0.UserUniforms).sc_ModelMatrix;
float4x4 l9_3758=l9_3757;
float4 l9_3759=l9_3758[0];
float4 l9_3760=l9_3758[1];
float4 l9_3761=l9_3758[2];
float3x3 l9_3762=float3x3(float3(float3(l9_3759.x,l9_3760.x,l9_3761.x)),float3(float3(l9_3759.y,l9_3760.y,l9_3761.y)),float3(float3(l9_3759.z,l9_3760.z,l9_3761.z)));
float3x3 l9_3763=l9_3762;
float3x3 l9_3764=l9_3763;
float3 l9_3765=float3(0.0);
if (rotationSpace_tmp==2)
{
l9_3765=(((l9_3636*l9_3764)+l9_3461)+l9_3462)+l9_3463;
}
else
{
if (rotationSpace_tmp==1)
{
l9_3765=(((l9_3636*l9_3756)+l9_3461)+l9_3462)+l9_3463;
}
else
{
l9_3765=(((l9_3636+l9_3461)+l9_3462)+l9_3463)*l9_3764;
}
}
float4x4 l9_3766=(*sc_set0.UserUniforms).sc_ModelMatrix;
float3 l9_3767=(l9_3766*float4(l9_3379,1.0)).xyz+l9_3765;
N111_particleSpawnPosition=l9_3379;
if ((int(Tweak_N282_tmp)!=0))
{
float3 l9_3768=l9_3379;
float3 l9_3769=N111_DisplaceStrength;
float3 l9_3770=N111_ScrollSpeedDisplace;
float3 l9_3771=N111_ScaleDisplace;
float3 l9_3772=l9_3768;
float l9_3773=tempGlobals.gTimeElapsed;
float3 l9_3774=float3(l9_3773)*(l9_3770*0.1);
l9_3772/=(l9_3771*2.0);
l9_3772+=l9_3774;
float3 l9_3775=l9_3772;
float4 l9_3776=float4(0.0);
float3 l9_3777=l9_3775;
float l9_3778=0.0;
float4 l9_3779=sc_set0.displace3dTex.sample(sc_set0.displace3dTexSmpSC,l9_3777,level(l9_3778));
l9_3776=l9_3779;
float4 l9_3780=l9_3776;
float3 l9_3781=l9_3780.xyz;
float3 l9_3782=(l9_3781*2.0)-float3(1.0);
l9_3782*=l9_3769;
float3 l9_3783=l9_3782;
float3 l9_3784=l9_3783;
if ((int(Tweak_N331_tmp)!=0))
{
float4x4 l9_3785=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_3784=float3x3(l9_3785[0].xyz,l9_3785[1].xyz,l9_3785[2].xyz)*l9_3784;
}
l9_3767+=l9_3784;
}
if ((int(Tweak_N228_tmp)!=0))
{
float3 l9_3786=N111_AxisOrbit;
float3 l9_3787=N111_CenterOrbit;
if ((int(Tweak_N332_tmp)!=0))
{
float4x4 l9_3788=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_3786=float3x3(l9_3788[0].xyz,l9_3788[1].xyz,l9_3788[2].xyz)*N111_AxisOrbit;
float4x4 l9_3789=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_3787=N111_CenterOrbit+l9_3789[3].xyz;
}
float3 l9_3790=l9_3767;
float3 l9_3791=l9_3786;
float2 l9_3792=N111_MinMaxOrbitAngle;
float2 l9_3793=N111_MinMaxOrbitSpeed;
float3 l9_3794=l9_3787;
float2 l9_3795=l9_3372;
float l9_3796=mix(l9_3792.x,l9_3792.y,l9_3795.x);
float l9_3797=tempGlobals.gTimeElapsed;
float l9_3798=l9_3797*mix(l9_3793.x,l9_3793.y,l9_3795.y);
l9_3796+=l9_3798;
float3 l9_3799=l9_3791;
float l9_3800=l9_3796;
float3 l9_3801=l9_3799;
float l9_3802=l9_3800;
float3 l9_3803=normalize(l9_3801);
float l9_3804=sin(radians(l9_3802));
float l9_3805=cos(radians(l9_3802));
float l9_3806=1.0-l9_3805;
float3x3 l9_3807=float3x3(float3(((l9_3806*l9_3803.x)*l9_3803.x)+l9_3805,((l9_3806*l9_3803.x)*l9_3803.y)-(l9_3803.z*l9_3804),((l9_3806*l9_3803.z)*l9_3803.x)+(l9_3803.y*l9_3804)),float3(((l9_3806*l9_3803.x)*l9_3803.y)+(l9_3803.z*l9_3804),((l9_3806*l9_3803.y)*l9_3803.y)+l9_3805,((l9_3806*l9_3803.y)*l9_3803.z)-(l9_3803.x*l9_3804)),float3(((l9_3806*l9_3803.z)*l9_3803.x)-(l9_3803.y*l9_3804),((l9_3806*l9_3803.y)*l9_3803.z)+(l9_3803.x*l9_3804),((l9_3806*l9_3803.z)*l9_3803.z)+l9_3805));
float3x3 l9_3808=l9_3807;
float3x3 l9_3809=l9_3808;
float3 l9_3810=l9_3809*(l9_3790-l9_3794);
float3 l9_3811=l9_3810+l9_3794;
l9_3767=l9_3811;
}
float l9_3812;
if (MESHTYPE_tmp==0)
{
l9_3812=mix(N111_rotationRandom.x,N111_rotationRandom.y,l9_3371);
}
else
{
l9_3812=mix(N111_rotationRandomZ.x,N111_rotationRandomZ.y,l9_3371);
}
float l9_3813=l9_3812;
float l9_3814=1.0;
if (!(int(ALIGNPARTICLES_tmp)!=0))
{
float l9_3815=1.0-l9_3375;
float l9_3816=N111_rotationDrag;
float l9_3817;
if (l9_3815<=0.0)
{
l9_3817=0.0;
}
else
{
l9_3817=pow(l9_3815,l9_3816);
}
float l9_3818=l9_3817;
l9_3814=l9_3818;
}
float l9_3819;
if (MESHTYPE_tmp==0)
{
l9_3819=mix(N111_rotationRate.x,N111_rotationRate.y,l9_3371);
}
else
{
l9_3819=mix(N111_rotationRateZ.x,N111_rotationRateZ.y,l9_3371);
}
float l9_3820=l9_3819;
float l9_3821=((l9_3820*l9_3814)*l9_3375)*2.0;
float l9_3822=3.1415927*((l9_3821+l9_3813)-0.5);
float l9_3823=1.0;
if ((int(SCREENFADE_tmp)!=0))
{
float3 l9_3824=(*sc_set0.UserUniforms).sc_Camera.position;
float3 l9_3825=l9_3824-l9_3767;
float l9_3826=dot(l9_3825,l9_3825);
float l9_3827=(N111_fadeDistanceInvisible+1e-06)*(N111_fadeDistanceInvisible+1e-06);
float l9_3828=N111_fadeDistanceVisible*N111_fadeDistanceVisible;
float l9_3829=fast::min(l9_3827,l9_3828);
float l9_3830=fast::max(l9_3827,l9_3828);
float l9_3831=smoothstep(l9_3829,l9_3830,l9_3826);
float l9_3832;
if (l9_3827>l9_3828)
{
l9_3832=1.0-l9_3831;
}
else
{
l9_3832=l9_3831;
}
l9_3831=l9_3832;
if (l9_3831<=1e-06)
{
l9_3823=0.0;
}
N111_cameraFade_trailHeadTime_taper.x=l9_3831;
}
if ((MESHTYPE_tmp==0)||(int(TRAILS_tmp)!=0))
{
if ((MESHTYPE_tmp==0)||N111_isTrail)
{
int l9_3833=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3833=0;
}
else
{
l9_3833=gl_InstanceIndex%2;
}
int l9_3834=l9_3833;
float4x4 l9_3835=(*sc_set0.UserUniforms).sc_ViewMatrixInverseArray[l9_3834];
float3 l9_3836=normalize(l9_3835[2].xyz);
if (N111_isTrail)
{
l9_3836*=float3(-1.0);
}
float3 l9_3837=float3(0.0,1.0,0.0);
if (ALIGN_TO_CAMERA_tmp==1)
{
int l9_3838=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3838=0;
}
else
{
l9_3838=gl_InstanceIndex%2;
}
int l9_3839=l9_3838;
float3 l9_3840=(*sc_set0.UserUniforms).sc_ViewMatrixInverseArray[l9_3839][1].xyz;
l9_3837=l9_3840;
}
float3 l9_3841=-normalize(cross(l9_3836,l9_3837));
float3 l9_3842=normalize(cross(l9_3841,l9_3836));
float l9_3843=1.0;
if ((int(ALIGNPARTICLES_tmp)!=0))
{
if (ALIGN_PARTICLES_TO_OPTION_tmp==1)
{
l9_3841=float3(0.0,0.0,1.0);
l9_3842=float3(0.0,1.0,0.0);
}
if (ALIGN_PARTICLES_TO_OPTION_tmp==2)
{
l9_3841=float3(1.0,0.0,0.0);
l9_3842=float3(0.0,0.0,1.0);
}
if (ALIGN_PARTICLES_TO_OPTION_tmp==3)
{
l9_3841=float3(1.0,0.0,0.0);
l9_3842=float3(0.0,1.0,0.0);
}
}
float2 l9_3844=float2(cos(l9_3822),sin(l9_3822));
float2 l9_3845=float2(-sin(l9_3822),cos(l9_3822));
float3 l9_3846=float3((l9_3841*l9_3844.x)+(l9_3842*l9_3844.y));
float3 l9_3847=float3((l9_3841*l9_3845.x)+(l9_3842*l9_3845.y));
if ((int(ALIGNPARTICLES_tmp)!=0))
{
if (ALIGN_PARTICLES_TO_OPTION_tmp==0)
{
if (!N111_isTrail)
{
float l9_3848=l9_3843;
float3 l9_3849=l9_3846;
float3 l9_3850=l9_3847;
float3 l9_3851=l9_3836;
float3 l9_3852=l9_3765;
float3 l9_3853=l9_3461;
float3 l9_3854=l9_3462;
float3 l9_3855=l9_3463;
float3 l9_3856=normalize((((l9_3852+l9_3853)+l9_3854)+l9_3855)+float3(1e-06));
float3 l9_3857=l9_3852*0.02;
l9_3849=l9_3856;
l9_3850=normalize(cross(l9_3849,l9_3851));
if (N111_ENABLE_IGNOREVEL)
{
l9_3848=fast::max(N111_sizeVelScale,1e-06);
}
else
{
if (N111_ENABLE_IGNORETRANSFORMSCALE)
{
float4x4 l9_3858=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_3848=(length(l9_3857)/length(l9_3858[0].xyz))*N111_sizeVelScale;
}
else
{
l9_3848=length(l9_3857)*N111_sizeVelScale;
}
l9_3848=fast::clamp(l9_3848,N111_velScaleMinMax.x,N111_velScaleMinMax.y);
}
l9_3843=l9_3848;
l9_3846=l9_3849;
l9_3847=l9_3850;
}
}
}
if ((int(TRAILS_tmp)!=0))
{
if (N111_isTrail)
{
float3 l9_3859=l9_3846;
float3 l9_3860=l9_3847;
float3 l9_3861=l9_3836;
float2 l9_3862=l9_3844;
float3 l9_3863=l9_3765;
float3 l9_3864=l9_3461;
float3 l9_3865=l9_3462;
float3 l9_3866=l9_3463;
float3 l9_3867=N111_tangentIN;
float3 l9_3868=(((((l9_3863*0.02)+l9_3864)+l9_3865)+l9_3866)+l9_3867)+float3(1e-06);
float3 l9_3869=normalize(l9_3868);
l9_3859=l9_3869;
l9_3860=normalize(cross(l9_3859,l9_3861));
if ((int(TRAILTWIST_tmp)!=0))
{
l9_3860=float3((l9_3859*l9_3862.x)+(l9_3860*l9_3862.y));
}
l9_3846=l9_3859;
l9_3847=l9_3860;
}
}
float4x4 l9_3870=(*sc_set0.UserUniforms).sc_ModelMatrix;
float l9_3871=length(l9_3870[0].xyz);
float2 l9_3872=tempGlobals.Surface_UVCoord0;
float l9_3873=l9_3364;
float l9_3874=l9_3365;
float l9_3875=l9_3375;
float l9_3876=N111_sizeSpeed;
float2 l9_3877=(((l9_3872-float2(0.5))*l9_3823)*N111_pSize(l9_3873,l9_3874,l9_3875,l9_3876,N111_isTrail,N111_trailHeadTime,N111_trailSizeMult,N111_sizeStart,N111_sizeEnd,N111_sizeStartMax,N111_sizeEndMax,N111_sizeStart3D,N111_sizeEnd3D,N111_sizeStartMax3D,N111_sizeEndMax3D,gl_InstanceIndex,(*sc_set0.UserUniforms),tempGlobals,sc_set0.trailSizeRampTex,sc_set0.trailSizeRampTexSmpSC,sc_set0.sizeRampTexture,sc_set0.sizeRampTextureSmpSC))*l9_3871;
float3 l9_3878=(l9_3767+(l9_3847*l9_3877.x))+(l9_3846*(l9_3877.y*l9_3843));
N111_position=l9_3878;
if ((N111_particleAlive<0.5)||(l9_3823<0.5))
{
N111_position/=float3(0.0);
}
N111_normal=l9_3836;
}
}
if (!(MESHTYPE_tmp==0))
{
if (!N111_isTrail)
{
N111_position=N111_positionObjectSpace;
if (N111_ENABLE_CENTER_IN_BBOX)
{
float3 l9_3879=(*sc_set0.UserUniforms).sc_LocalAabbMax;
float3 l9_3880=(*sc_set0.UserUniforms).sc_LocalAabbMin;
float3 l9_3881=(l9_3879+l9_3880)/float3(2.0);
N111_position-=l9_3881;
}
float l9_3882=l9_3364;
float l9_3883=l9_3365;
float l9_3884=l9_3375;
float l9_3885=N111_sizeSpeed;
N111_position=(N111_position*l9_3756)*N111_pSize3D(l9_3882,l9_3883,l9_3884,l9_3885,N111_sizeStart3D,N111_sizeEnd3D,N111_sizeStartMax3D,N111_sizeEndMax3D,gl_InstanceIndex,(*sc_set0.UserUniforms),tempGlobals,sc_set0.sizeRampTexture,sc_set0.sizeRampTextureSmpSC);
if ((N111_particleAlive<0.5)||(l9_3823<0.5))
{
N111_position.x=2.1474836e+09;
}
float3x3 l9_3886;
if ((int(ALIGNPARTICLES_tmp)!=0))
{
if (ALIGN_PARTICLES_TO_OPTION_tmp==3)
{
l9_3886=float3x3(float3(1.0,0.0,0.0),float3(0.0,1.0,0.0),float3(0.0,0.0,1.0));
}
else
{
float3 l9_3887=float3(0.0);
if (ALIGN_PARTICLES_TO_OPTION_tmp==1)
{
l9_3887=float3(1.0,0.0,0.0);
}
if (ALIGN_PARTICLES_TO_OPTION_tmp==2)
{
l9_3887=float3(0.0,1.0,0.0);
}
if (ALIGN_PARTICLES_TO_OPTION_tmp==0)
{
float l9_3888=0.001;
float3 l9_3889=l9_3637;
float l9_3890=l9_3374-l9_3888;
float3 l9_3891=N111_velocityDrag;
float3 l9_3892=l9_3380;
float l9_3893=l9_3375-l9_3888;
float3 l9_3894=float3(l9_3890,l9_3890,l9_3890);
float3 l9_3895=l9_3891;
float l9_3896;
if (l9_3894.x<=0.0)
{
l9_3896=0.0;
}
else
{
l9_3896=pow(l9_3894.x,l9_3895.x);
}
float l9_3897=l9_3896;
float l9_3898;
if (l9_3894.y<=0.0)
{
l9_3898=0.0;
}
else
{
l9_3898=pow(l9_3894.y,l9_3895.y);
}
float l9_3899=l9_3898;
float l9_3900;
if (l9_3894.z<=0.0)
{
l9_3900=0.0;
}
else
{
l9_3900=pow(l9_3894.z,l9_3895.z);
}
float3 l9_3901=float3(l9_3897,l9_3899,l9_3900);
float3 l9_3902=l9_3901;
float3 l9_3903=(l9_3889+l9_3892)*l9_3902;
if ((int(VELRAMP_tmp)!=0))
{
float l9_3904=floor(l9_3893*10000.0)/10000.0;
float2 l9_3905=tempGlobals.Surface_UVCoord0;
float2 l9_3906=(l9_3905/float2(10000.0,1.0))+float2(l9_3904,0.0);
float2 l9_3907=l9_3906;
float4 l9_3908=float4(0.0);
int l9_3909;
if ((int(velRampTextureHasSwappedViews_tmp)!=0))
{
int l9_3910=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3910=0;
}
else
{
l9_3910=gl_InstanceIndex%2;
}
int l9_3911=l9_3910;
l9_3909=1-l9_3911;
}
else
{
int l9_3912=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3912=0;
}
else
{
l9_3912=gl_InstanceIndex%2;
}
int l9_3913=l9_3912;
l9_3909=l9_3913;
}
int l9_3914=l9_3909;
int l9_3915=velRampTextureLayout_tmp;
int l9_3916=l9_3914;
float2 l9_3917=l9_3907;
bool l9_3918=(int(SC_USE_UV_TRANSFORM_velRampTexture_tmp)!=0);
float3x3 l9_3919=(*sc_set0.UserUniforms).velRampTextureTransform;
int2 l9_3920=int2(SC_SOFTWARE_WRAP_MODE_U_velRampTexture_tmp,SC_SOFTWARE_WRAP_MODE_V_velRampTexture_tmp);
bool l9_3921=(int(SC_USE_UV_MIN_MAX_velRampTexture_tmp)!=0);
float4 l9_3922=(*sc_set0.UserUniforms).velRampTextureUvMinMax;
bool l9_3923=(int(SC_USE_CLAMP_TO_BORDER_velRampTexture_tmp)!=0);
float4 l9_3924=(*sc_set0.UserUniforms).velRampTextureBorderColor;
float l9_3925=0.0;
bool l9_3926=l9_3923&&(!l9_3921);
float l9_3927=1.0;
float l9_3928=l9_3917.x;
int l9_3929=l9_3920.x;
if (l9_3929==1)
{
l9_3928=fract(l9_3928);
}
else
{
if (l9_3929==2)
{
float l9_3930=fract(l9_3928);
float l9_3931=l9_3928-l9_3930;
float l9_3932=step(0.25,fract(l9_3931*0.5));
l9_3928=mix(l9_3930,1.0-l9_3930,fast::clamp(l9_3932,0.0,1.0));
}
}
l9_3917.x=l9_3928;
float l9_3933=l9_3917.y;
int l9_3934=l9_3920.y;
if (l9_3934==1)
{
l9_3933=fract(l9_3933);
}
else
{
if (l9_3934==2)
{
float l9_3935=fract(l9_3933);
float l9_3936=l9_3933-l9_3935;
float l9_3937=step(0.25,fract(l9_3936*0.5));
l9_3933=mix(l9_3935,1.0-l9_3935,fast::clamp(l9_3937,0.0,1.0));
}
}
l9_3917.y=l9_3933;
if (l9_3921)
{
bool l9_3938=l9_3923;
bool l9_3939;
if (l9_3938)
{
l9_3939=l9_3920.x==3;
}
else
{
l9_3939=l9_3938;
}
float l9_3940=l9_3917.x;
float l9_3941=l9_3922.x;
float l9_3942=l9_3922.z;
bool l9_3943=l9_3939;
float l9_3944=l9_3927;
float l9_3945=fast::clamp(l9_3940,l9_3941,l9_3942);
float l9_3946=step(abs(l9_3940-l9_3945),9.9999997e-06);
l9_3944*=(l9_3946+((1.0-float(l9_3943))*(1.0-l9_3946)));
l9_3940=l9_3945;
l9_3917.x=l9_3940;
l9_3927=l9_3944;
bool l9_3947=l9_3923;
bool l9_3948;
if (l9_3947)
{
l9_3948=l9_3920.y==3;
}
else
{
l9_3948=l9_3947;
}
float l9_3949=l9_3917.y;
float l9_3950=l9_3922.y;
float l9_3951=l9_3922.w;
bool l9_3952=l9_3948;
float l9_3953=l9_3927;
float l9_3954=fast::clamp(l9_3949,l9_3950,l9_3951);
float l9_3955=step(abs(l9_3949-l9_3954),9.9999997e-06);
l9_3953*=(l9_3955+((1.0-float(l9_3952))*(1.0-l9_3955)));
l9_3949=l9_3954;
l9_3917.y=l9_3949;
l9_3927=l9_3953;
}
float2 l9_3956=l9_3917;
bool l9_3957=l9_3918;
float3x3 l9_3958=l9_3919;
if (l9_3957)
{
l9_3956=float2((l9_3958*float3(l9_3956,1.0)).xy);
}
float2 l9_3959=l9_3956;
l9_3917=l9_3959;
float l9_3960=l9_3917.x;
int l9_3961=l9_3920.x;
bool l9_3962=l9_3926;
float l9_3963=l9_3927;
if ((l9_3961==0)||(l9_3961==3))
{
float l9_3964=l9_3960;
float l9_3965=0.0;
float l9_3966=1.0;
bool l9_3967=l9_3962;
float l9_3968=l9_3963;
float l9_3969=fast::clamp(l9_3964,l9_3965,l9_3966);
float l9_3970=step(abs(l9_3964-l9_3969),9.9999997e-06);
l9_3968*=(l9_3970+((1.0-float(l9_3967))*(1.0-l9_3970)));
l9_3964=l9_3969;
l9_3960=l9_3964;
l9_3963=l9_3968;
}
l9_3917.x=l9_3960;
l9_3927=l9_3963;
float l9_3971=l9_3917.y;
int l9_3972=l9_3920.y;
bool l9_3973=l9_3926;
float l9_3974=l9_3927;
if ((l9_3972==0)||(l9_3972==3))
{
float l9_3975=l9_3971;
float l9_3976=0.0;
float l9_3977=1.0;
bool l9_3978=l9_3973;
float l9_3979=l9_3974;
float l9_3980=fast::clamp(l9_3975,l9_3976,l9_3977);
float l9_3981=step(abs(l9_3975-l9_3980),9.9999997e-06);
l9_3979*=(l9_3981+((1.0-float(l9_3978))*(1.0-l9_3981)));
l9_3975=l9_3980;
l9_3971=l9_3975;
l9_3974=l9_3979;
}
l9_3917.y=l9_3971;
l9_3927=l9_3974;
float2 l9_3982=l9_3917;
int l9_3983=l9_3915;
int l9_3984=l9_3916;
float l9_3985=l9_3925;
float2 l9_3986=l9_3982;
int l9_3987=l9_3983;
int l9_3988=l9_3984;
float3 l9_3989=float3(0.0);
if (l9_3987==0)
{
l9_3989=float3(l9_3986,0.0);
}
else
{
if (l9_3987==1)
{
l9_3989=float3(l9_3986.x,(l9_3986.y*0.5)+(0.5-(float(l9_3988)*0.5)),0.0);
}
else
{
l9_3989=float3(l9_3986,float(l9_3988));
}
}
float3 l9_3990=l9_3989;
float3 l9_3991=l9_3990;
float4 l9_3992=sc_set0.velRampTexture.sample(sc_set0.velRampTextureSmpSC,l9_3991.xy,level(l9_3985));
float4 l9_3993=l9_3992;
if (l9_3923)
{
l9_3993=mix(l9_3924,l9_3993,float4(l9_3927));
}
float4 l9_3994=l9_3993;
l9_3908=l9_3994;
float4 l9_3995=l9_3908;
float3 l9_3996=l9_3995.xyz;
l9_3903=(l9_3889+l9_3892)*l9_3996;
if (!(SC_DEVICE_CLASS_tmp>=2))
{
l9_3903=l9_3889*l9_3902;
}
}
float3 l9_3997=l9_3903;
float3 l9_3998=l9_3997;
float l9_3999=((N111_gravity/2.0)*(l9_3374-l9_3888))*(l9_3374-l9_3888);
l9_3461.y-=l9_3999;
if ((int(FORCE_tmp)!=0))
{
float3 l9_4000=float3(((N111_localForce/float3(2.0))*(l9_3374-l9_3888))*(l9_3374-l9_3888));
l9_3462-=l9_4000;
}
if ((int(CUSTOMFORCE_tmp)!=0))
{
tempGlobals.N111_ParticleSpawnPosition=l9_3379;
float3 l9_4001=float3(0.0);
float3 l9_4002=float3(0.0);
l9_4002=tempGlobals.N111_ParticleSpawnPosition;
float l9_4003=0.0;
float l9_4004=(*sc_set0.UserUniforms).timeGlobal;
l9_4003=l9_4004;
float l9_4005=0.0;
float l9_4006=(*sc_set0.UserUniforms).externalTimeInput;
l9_4005=l9_4006;
float l9_4007=0.0;
float l9_4008=(*sc_set0.UserUniforms).externalSeed;
l9_4007=l9_4008;
float l9_4009=0.0;
float l9_4010=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_4009=l9_4010;
float2 l9_4011=float2(0.0);
float2 l9_4012=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_4011=l9_4012;
float l9_4013=0.0;
float l9_4014=(*sc_set0.UserUniforms).spawnDuration;
l9_4013=l9_4014;
float l9_4015=0.0;
float l9_4016;
if ((int(TRAILS_tmp)!=0))
{
l9_4016=1.001;
}
else
{
l9_4016=0.001;
}
l9_4016-=0.001;
l9_4015=l9_4016;
float l9_4017=0.0;
float l9_4018=(*sc_set0.UserUniforms).trailLength;
l9_4017=l9_4018;
float4 l9_4019=float4(0.0);
l9_4019=tempGlobals.VertexColor;
float l9_4020=0.0;
l9_4020=l9_4019.x;
float l9_4021=0.0;
float l9_4022=l9_4015;
bool l9_4023=(l9_4022*1.0)!=0.0;
bool l9_4024;
if (l9_4023)
{
l9_4024=(l9_4020*1.0)!=0.0;
}
else
{
l9_4024=l9_4023;
}
l9_4021=float(l9_4024);
float3 l9_4025=float3(0.0);
float l9_4026=0.0;
float l9_4027=l9_4003;
float l9_4028=l9_4005;
float l9_4029=l9_4007;
float l9_4030=l9_4009;
float2 l9_4031=l9_4011;
float l9_4032=l9_4013;
float l9_4033=l9_4017;
float l9_4034=l9_4021;
ssGlobals l9_4035=tempGlobals;
tempGlobals=l9_4035;
float3 l9_4036=float3(0.0);
float l9_4037=0.0;
N181_timeGlobal=l9_4027;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_4028;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_4029;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_4030;
N181_lifeTimeMinMax=l9_4031;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_4032;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_4033;
N181_isTrailCondition=l9_4034!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_4038=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_4039=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_4038=length(float4(1.0)*l9_4039);
}
N181_globalSeed=N181_externalSeed+l9_4038;
int l9_4040=0;
l9_4040=ssInstanceID;
int l9_4041=l9_4040;
float l9_4042=float(l9_4041);
int l9_4043=int(l9_4042);
int l9_4044=l9_4043^(l9_4043*15299);
int l9_4045=l9_4044;
int l9_4046=l9_4045;
int l9_4047=((l9_4046*((l9_4046*1471343)+101146501))+1559861749)&2147483647;
int l9_4048=l9_4047;
int l9_4049=l9_4045*1399;
int l9_4050=((l9_4049*((l9_4049*1471343)+101146501))+1559861749)&2147483647;
int l9_4051=l9_4050;
int l9_4052=l9_4045*7177;
int l9_4053=((l9_4052*((l9_4052*1471343)+101146501))+1559861749)&2147483647;
int l9_4054=l9_4053;
int l9_4055=l9_4048;
float l9_4056=float(l9_4055)*4.6566129e-10;
int l9_4057=l9_4051;
float l9_4058=float(l9_4057)*4.6566129e-10;
int l9_4059=l9_4054;
float l9_4060=float(l9_4059)*4.6566129e-10;
float3 l9_4061=float3(l9_4056,l9_4058,l9_4060);
float3 l9_4062=l9_4061;
N181_particleSeed=l9_4062;
float l9_4063=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_4064;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_4064=N181_lifeTimeMinMax;
}
else
{
l9_4064=float2(N181_lifeTimeConstant);
}
float2 l9_4065=l9_4064;
float l9_4066=fast::max(l9_4065.x,0.0099999998);
float l9_4067=fast::max(l9_4065.y,0.0099999998);
float l9_4068=tempGlobals.gTimeElapsed;
float l9_4069=l9_4068;
if (N181_ENABLE_EXTERNALTIME)
{
l9_4069=N181_externalTime;
}
float l9_4070=l9_4069;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_4070=N181_timeGlobal*l9_4069;
}
else
{
float l9_4071=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_4071=N181_trailLength;
}
}
float l9_4072=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_4073=0.0;
float l9_4074;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_4074=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_4074=0.0;
}
l9_4073=l9_4074;
float l9_4075=l9_4073;
int l9_4076=0;
l9_4076=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_4077=l9_4076;
l9_4072=fast::max(l9_4075*(1.0-(1.0/float(l9_4077))),0.0);
}
else
{
l9_4072=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_4078=fract(((l9_4069*N181_timeGlobal)*(1.0/(l9_4065.y+l9_4071)))+l9_4072);
l9_4070=l9_4078*(l9_4065.y+l9_4071);
}
float l9_4079=mix(l9_4070/l9_4066,l9_4070/l9_4067,l9_4063);
float l9_4080=fast::clamp(l9_4079,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_4070,l9_4080);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_4081=tempGlobals.Surface_UVCoord0;
l9_4070-=(l9_4081.y*N181_trailLength);
l9_4079=mix(l9_4070/l9_4066,l9_4070/l9_4067,l9_4063);
l9_4080=fast::clamp(l9_4079,0.0,1.0);
}
}
float l9_4082=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_4069-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_4082=1.0;
}
}
}
float l9_4083=l9_4079+l9_4082;
N181_particleAlive=1.0;
if ((l9_4083>0.99989998)||(l9_4070<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_4069*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_4065,l9_4070,l9_4080);
l9_4036=N181_particleSeed;
l9_4037=N181_isTrail;
l9_4025=l9_4036;
l9_4026=l9_4037;
float l9_4084=0.0;
float l9_4085=(*sc_set0.UserUniforms).attractRepelForceStrength;
l9_4084=l9_4085;
float3 l9_4086=float3(0.0);
float3 l9_4087=(*sc_set0.UserUniforms).customForceOrigin;
l9_4086=l9_4087;
float3 l9_4088=float3(0.0);
float3 l9_4089=l9_4002;
float3 l9_4090=l9_4025;
float l9_4091=l9_4084;
float3 l9_4092=l9_4086;
ssGlobals l9_4093=tempGlobals;
tempGlobals=l9_4093;
float3 l9_4094=float3(0.0);
N223_OnOff=(int(Tweak_N131_tmp)!=0);
N223_ParticleSpawnPosition=l9_4089;
N223_ParticleSeed=l9_4090;
N223_Strength=l9_4091;
N223_ForceOrigin=l9_4092;
N223_CustomForce=float3(0.0);
float4x4 l9_4095=(*sc_set0.UserUniforms).sc_ModelMatrix;
float4 l9_4096=l9_4095*float4(N223_ParticleSpawnPosition,1.0);
if (N223_OnOff)
{
float3 l9_4097=N223_ForceOrigin;
float3 l9_4098=l9_4096.xyz;
float l9_4099=N223_Strength;
float3 l9_4100=float3(0.0);
if (all(l9_4097==l9_4098))
{
int l9_4101=0;
l9_4101=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_4102=l9_4101;
float3 l9_4103=N223_ParticleSeed*float(l9_4102);
int l9_4104=int(l9_4103.x);
int l9_4105=int(l9_4103.y);
int l9_4106=int(l9_4103.z);
int l9_4107=((l9_4104*15299)^(l9_4105*30133))^(l9_4106*17539);
int l9_4108=l9_4107;
int l9_4109=l9_4108;
int l9_4110=((l9_4109*((l9_4109*1471343)+101146501))+1559861749)&2147483647;
int l9_4111=l9_4110;
int l9_4112=l9_4108*1399;
int l9_4113=((l9_4112*((l9_4112*1471343)+101146501))+1559861749)&2147483647;
int l9_4114=l9_4113;
int l9_4115=l9_4108*7177;
int l9_4116=((l9_4115*((l9_4115*1471343)+101146501))+1559861749)&2147483647;
int l9_4117=l9_4116;
int l9_4118=l9_4111;
float l9_4119=float(l9_4118)*4.6566129e-10;
int l9_4120=l9_4114;
float l9_4121=float(l9_4120)*4.6566129e-10;
int l9_4122=l9_4117;
float l9_4123=float(l9_4122)*4.6566129e-10;
float3 l9_4124=float3(l9_4119,l9_4121,l9_4123);
float3 l9_4125=l9_4124;
l9_4100=normalize((l9_4125-float3(0.5))*2.0);
}
else
{
l9_4100=normalize(l9_4097-l9_4098);
}
float3 l9_4126=l9_4100*l9_4099;
N223_CustomForce+=l9_4126;
}
l9_4094=N223_CustomForce;
l9_4088=l9_4094;
float3 l9_4127=float3(0.0);
l9_4127=tempGlobals.N111_ParticleSpawnPosition;
float3 l9_4128=float3(0.0);
float3 l9_4129=(*sc_set0.UserUniforms).Tex3dScale;
l9_4128=l9_4129;
float3 l9_4130=float3(0.0);
float3 l9_4131=(*sc_set0.UserUniforms).Tex3dScrollSpeed;
l9_4130=l9_4131;
float3 l9_4132=float3(0.0);
float3 l9_4133=(*sc_set0.UserUniforms).Tex3dForceStrength;
l9_4132=l9_4133;
float3 l9_4134=float3(0.0);
float3 l9_4135=l9_4127;
float3 l9_4136=l9_4128;
float3 l9_4137=l9_4130;
float3 l9_4138=l9_4132;
ssGlobals l9_4139=tempGlobals;
tempGlobals=l9_4139;
float3 l9_4140=float3(0.0);
N202_OnOff=(int(Tweak_N133_tmp)!=0);
N202_ParticleSpawnPosition=l9_4135;
N202_ScaleTexture=l9_4136;
N202_ScrollSpeed=l9_4137;
N202_Strength=l9_4138;
N202_CustomForce=float3(0.0);
if (N202_OnOff)
{
float3 l9_4141=N202_ParticleSpawnPosition;
float3 l9_4142=N202_Strength;
float3 l9_4143=l9_4141;
float l9_4144=tempGlobals.gTimeElapsed;
float3 l9_4145=float3(l9_4144)*(N202_ScrollSpeed*0.1);
l9_4143/=(N202_ScaleTexture*2.0);
l9_4143+=l9_4145;
float3 l9_4146=l9_4143;
float4 l9_4147=float4(0.0);
float3 l9_4148=l9_4146;
float l9_4149=0.0;
float4 l9_4150=sc_set0.Tex3d.sample(sc_set0.Tex3dSmpSC,l9_4148,level(l9_4149));
l9_4147=l9_4150;
float4 l9_4151=l9_4147;
float3 l9_4152=l9_4151.xyz;
float3 l9_4153=(l9_4152*2.0)-float3(1.0);
l9_4153*=l9_4142;
float3 l9_4154=l9_4153;
N202_CustomForce+=l9_4154;
}
l9_4140=N202_CustomForce;
l9_4134=l9_4140;
float3 l9_4155=float3(0.0);
l9_4155=tempGlobals.N155_helixDirection;
float3 l9_4156=float3(0.0);
l9_4156=tempGlobals.N319_curveDirection;
float3 l9_4157=float3(0.0);
float3 l9_4158=(*sc_set0.UserUniforms).Tweak_N314;
l9_4157=l9_4158;
float3 l9_4159=float3(0.0);
float l9_4160=l9_4026;
float3 l9_4161=l9_4155;
float3 l9_4162=l9_4156;
float3 l9_4163=l9_4157;
ssGlobals l9_4164=tempGlobals;
tempGlobals=l9_4164;
float3 l9_4165=float3(0.0);
N277_OnOff=(int(Tweak_N313_tmp)!=0);
N277_isTrail=l9_4160!=0.0;
N277_helixDir=l9_4161;
N277_curveDir=l9_4162;
N277_Strength=l9_4163;
N277_Path=NODE_248_DROPLIST_ITEM_tmp;
N277_DirectionForce=float3(0.0);
N277_Direction=float3(0.0);
if (N277_OnOff||N277_isTrail)
{
float3 l9_4166;
if (N277_Path==5)
{
l9_4166=N277_helixDir;
}
else
{
bool3 l9_4167=bool3(N277_Path==6);
l9_4166=float3(l9_4167.x ? N277_curveDir.x : float3(0.0).x,l9_4167.y ? N277_curveDir.y : float3(0.0).y,l9_4167.z ? N277_curveDir.z : float3(0.0).z);
}
float3 l9_4168=l9_4166;
float3 l9_4169=l9_4168;
float3 l9_4170=l9_4169;
if (N277_OnOff)
{
N277_DirectionForce+=(l9_4170*N277_Strength);
}
N277_Direction=l9_4170;
}
l9_4165=N277_DirectionForce;
l9_4159=l9_4165;
float3 l9_4171=float3(0.0);
l9_4171=(l9_4088+l9_4134)+l9_4159;
l9_4001=l9_4171;
float3 l9_4172=l9_4001;
float3 l9_4173=((l9_4172/float3(2.0))*(l9_3374-l9_3888))*(l9_3374-l9_3888);
l9_3463-=l9_4173;
}
if (rotationSpace_tmp==2)
{
l9_3887=((((l9_3636-l9_3998)*l9_3764)+l9_3461)+l9_3462)+l9_3463;
}
else
{
if (rotationSpace_tmp==1)
{
l9_3887=(((l9_3636-l9_3998)+l9_3461)+l9_3462)+l9_3463;
}
else
{
l9_3887=((((l9_3636-l9_3998)+l9_3462)+l9_3461)+l9_3463)*l9_3764;
}
}
l9_3887=normalize(l9_3887+float3(1e-06));
}
float3 l9_4174=float3(0.0,0.0,1.0);
float3 l9_4175=cross(l9_3887,l9_4174);
float3 l9_4176=normalize(l9_4175);
float l9_4177=length(l9_4175);
float l9_4178=dot(l9_4174,l9_3887);
float l9_4179=1.0-l9_4178;
l9_3886=float3x3(float3(((l9_4179*l9_4176.x)*l9_4176.x)+l9_4178,((l9_4179*l9_4176.x)*l9_4176.y)-(l9_4176.z*l9_4177),((l9_4179*l9_4176.z)*l9_4176.x)+(l9_4176.y*l9_4177)),float3(((l9_4179*l9_4176.x)*l9_4176.y)+(l9_4176.z*l9_4177),((l9_4179*l9_4176.y)*l9_4176.y)+l9_4178,((l9_4179*l9_4176.y)*l9_4176.z)-(l9_4176.x*l9_4177)),float3(((l9_4179*l9_4176.z)*l9_4176.x)-(l9_4176.y*l9_4177),((l9_4179*l9_4176.y)*l9_4176.z)+(l9_4176.x*l9_4177),((l9_4179*l9_4176.z)*l9_4176.z)+l9_4178));
}
float3x3 l9_4180=float3x3(float3(cos(l9_3822),-sin(l9_3822),0.0),float3(sin(l9_3822),cos(l9_3822),0.0),float3(0.0,0.0,1.0));
l9_3886=l9_3886*l9_4180;
if ((int(ALIGNPARTICLES_tmp)!=0))
{
if (ALIGN_PARTICLES_TO_OPTION_tmp==0)
{
if (!N111_ENABLE_IGNOREVEL)
{
float l9_4181=fast::max(length(l9_3765*0.02),1.0)*fast::max(N111_sizeVelScale,1e-06);
l9_4181=fast::clamp(l9_4181,N111_velScaleMinMax.x,N111_velScaleMinMax.y);
N111_position.z*=l9_4181;
}
}
}
}
else
{
float l9_4182=fract((N111_particleSeed.x*92.653008)+N111_globalSeed);
float l9_4183=mix(N111_rotationRandomX.x,N111_rotationRandomX.y,l9_4182);
float l9_4184=mix(N111_rotationRateX.x,N111_rotationRateX.y,l9_4182);
float l9_4185=((l9_4184*l9_3814)*l9_3375)*2.0;
float l9_4186=fract((N111_particleSeed.y*6.7557559)+N111_globalSeed);
float l9_4187=mix(N111_rotationRandomY.x,N111_rotationRandomY.y,l9_4186);
float l9_4188=mix(N111_rotationRateY.x,N111_rotationRateY.y,l9_4186);
float l9_4189=((l9_4188*l9_3814)*l9_3375)*2.0;
float l9_4190=3.1415927*(l9_4185+l9_4183);
float l9_4191=3.1415927*(l9_4189+l9_4187);
float l9_4192=3.1415927*(l9_3821+l9_3813);
float3 l9_4193=float3(l9_4190,l9_4191,l9_4192);
float l9_4194=cos(l9_4193.x);
float l9_4195=sin(l9_4193.x);
float l9_4196=cos(l9_4193.y);
float l9_4197=sin(l9_4193.y);
float l9_4198=cos(l9_4193.z);
float l9_4199=sin(l9_4193.z);
l9_3886=float3x3(float3(l9_4196*l9_4198,(l9_4194*l9_4199)+((l9_4195*l9_4197)*l9_4198),(l9_4195*l9_4199)-((l9_4194*l9_4197)*l9_4198)),float3((-l9_4196)*l9_4199,(l9_4194*l9_4198)-((l9_4195*l9_4197)*l9_4199),(l9_4195*l9_4198)+((l9_4194*l9_4197)*l9_4199)),float3(l9_4197,(-l9_4195)*l9_4196,l9_4194*l9_4196));
}
if (!(rotationSpace_tmp==1))
{
if (!(int(ALIGNPARTICLES_tmp)!=0))
{
float4x4 l9_4200=(*sc_set0.UserUniforms).sc_ModelMatrix;
float4x4 l9_4201=(*sc_set0.UserUniforms).sc_ModelMatrix;
float4x4 l9_4202=(*sc_set0.UserUniforms).sc_ModelMatrix;
float3x3 l9_4203=float3x3(float3(l9_4200[0].xyz/float3(l9_3756.x)),float3(l9_4201[1].xyz/float3(l9_3756.y)),float3(l9_4202[2].xyz/float3(l9_3756.z)));
l9_3886=l9_4203*l9_3886;
}
}
N111_position=l9_3886*N111_position;
N111_normal=normalize(l9_3886*N111_normalObjectSpace);
N111_position+=l9_3767;
}
}
N111_timeValues=float4(l9_3373,l9_3374,l9_3375);
param_1=N111_position;
param_2=N111_particleSpawnPosition;
position_N111=param_1;
particleSpawnPosition_N111=param_2;
float Output_N153=0.0;
float param_4=float((*sc_set0.UserUniforms).circularMask!=0);
Output_N153=param_4;
float Output_N316=0.0;
float param_5=float((*sc_set0.UserUniforms).squareMask!=0);
Output_N316=param_5;
float2 ScreenUV_N123=float2(0.0);
float3 param_6=particleSpawnPosition_N111;
ssGlobals param_8=Globals;
tempGlobals=param_8;
float2 param_7=float2(0.0);
N123_particlePosition=param_6;
int l9_4204=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_4204=0;
}
else
{
l9_4204=gl_InstanceIndex%2;
}
int l9_4205=l9_4204;
float4x4 l9_4206=(*sc_set0.UserUniforms).sc_ModelViewProjectionMatrixArray[l9_4205];
float4 l9_4207=l9_4206*float4(N123_particlePosition,1.0);
float2 l9_4208=((l9_4207.xy/float2(l9_4207.w))*0.5)+float2(0.5);
N123_ScreenUV=l9_4208;
param_7=N123_ScreenUV;
ScreenUV_N123=param_7;
float Output_N122=0.0;
float param_9=(*sc_set0.UserUniforms).maskTreshold;
Output_N122=param_9;
float Output_N125=0.0;
float param_10=(*sc_set0.UserUniforms).maskFeather;
Output_N125=param_10;
float maskOut_N150=0.0;
float param_11=Output_N153;
float param_12=Output_N316;
float2 param_13=ScreenUV_N123;
float param_14=Output_N122;
float param_15=Output_N125;
ssGlobals param_17=Globals;
tempGlobals=param_17;
float param_16=0.0;
N150_circularMask=param_11!=0.0;
N150_squareMask=param_12!=0.0;
N150_screenUV=param_13;
N150_maskThreshold=param_14;
N150_maskFeather=param_15;
float l9_4209=1.0;
if (N150_circularMask||N150_squareMask)
{
float2 l9_4210=N150_screenUV;
float l9_4211=distance(l9_4210,float2(0.5))*2.0;
if (N150_squareMask)
{
float2 l9_4212=abs(l9_4210-float2(0.5))*2.0;
l9_4211=fast::max(l9_4212.x,l9_4212.y);
}
float l9_4213=smoothstep(N150_maskThreshold,N150_maskThreshold+N150_maskFeather,l9_4211);
float l9_4214=l9_4213;
l9_4209=l9_4214;
}
N150_maskOut=l9_4209;
param_16=N150_maskOut;
maskOut_N150=param_16;
float3 PositionOut_N126=float3(0.0);
float3 param_18=position_N111;
float param_19=maskOut_N150;
ssGlobals param_21=Globals;
tempGlobals=param_21;
float3 param_20=float3(0.0);
N126_PositionIn=param_18;
N126_Mask=param_19;
int l9_4215=0;
l9_4215=ssInstanceID;
int l9_4216=l9_4215;
float l9_4217=float(l9_4216)+263.5462;
int l9_4218=int(l9_4217);
int l9_4219=l9_4218^(l9_4218*15299);
int l9_4220=l9_4219;
int l9_4221=l9_4220;
int l9_4222=((l9_4221*((l9_4221*1471343)+101146501))+1559861749)&2147483647;
int l9_4223=l9_4222;
float l9_4224=float(l9_4223)*4.6566129e-10;
float l9_4225=l9_4224;
float l9_4226=l9_4225;
float l9_4227=l9_4226;
float l9_4228=step(l9_4227,N126_Mask);
N126_PositionOut=N126_PositionIn/float3(l9_4228);
param_20=N126_PositionOut;
PositionOut_N126=param_20;
WorldPosition=PositionOut_N126;
float3 normal_N111=float3(0.0);
ssGlobals param_23=Globals;
tempGlobals=param_23;
float3 param_22=float3(0.0);
float3 l9_4229=float3(0.0);
float l9_4230=0.0;
float l9_4231=(*sc_set0.UserUniforms).timeGlobal;
l9_4230=l9_4231;
float l9_4232=0.0;
float l9_4233=(*sc_set0.UserUniforms).externalTimeInput;
l9_4232=l9_4233;
float l9_4234=0.0;
float l9_4235=(*sc_set0.UserUniforms).externalSeed;
l9_4234=l9_4235;
float l9_4236=0.0;
float l9_4237=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_4236=l9_4237;
float2 l9_4238=float2(0.0);
float2 l9_4239=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_4238=l9_4239;
float l9_4240=0.0;
float l9_4241=(*sc_set0.UserUniforms).spawnDuration;
l9_4240=l9_4241;
float l9_4242=0.0;
float l9_4243;
if ((int(TRAILS_tmp)!=0))
{
l9_4243=1.001;
}
else
{
l9_4243=0.001;
}
l9_4243-=0.001;
l9_4242=l9_4243;
float l9_4244=0.0;
float l9_4245=(*sc_set0.UserUniforms).trailLength;
l9_4244=l9_4245;
float4 l9_4246=float4(0.0);
l9_4246=tempGlobals.VertexColor;
float l9_4247=0.0;
l9_4247=l9_4246.x;
float l9_4248=0.0;
float l9_4249=l9_4242;
bool l9_4250=(l9_4249*1.0)!=0.0;
bool l9_4251;
if (l9_4250)
{
l9_4251=(l9_4247*1.0)!=0.0;
}
else
{
l9_4251=l9_4250;
}
l9_4248=float(l9_4251);
float3 l9_4252=float3(0.0);
float l9_4253=l9_4230;
float l9_4254=l9_4232;
float l9_4255=l9_4234;
float l9_4256=l9_4236;
float2 l9_4257=l9_4238;
float l9_4258=l9_4240;
float l9_4259=l9_4244;
float l9_4260=l9_4248;
ssGlobals l9_4261=tempGlobals;
tempGlobals=l9_4261;
float3 l9_4262=float3(0.0);
N181_timeGlobal=l9_4253;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_4254;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_4255;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_4256;
N181_lifeTimeMinMax=l9_4257;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_4258;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_4259;
N181_isTrailCondition=l9_4260!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_4263=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_4264=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_4263=length(float4(1.0)*l9_4264);
}
N181_globalSeed=N181_externalSeed+l9_4263;
int l9_4265=0;
l9_4265=ssInstanceID;
int l9_4266=l9_4265;
float l9_4267=float(l9_4266);
int l9_4268=int(l9_4267);
int l9_4269=l9_4268^(l9_4268*15299);
int l9_4270=l9_4269;
int l9_4271=l9_4270;
int l9_4272=((l9_4271*((l9_4271*1471343)+101146501))+1559861749)&2147483647;
int l9_4273=l9_4272;
int l9_4274=l9_4270*1399;
int l9_4275=((l9_4274*((l9_4274*1471343)+101146501))+1559861749)&2147483647;
int l9_4276=l9_4275;
int l9_4277=l9_4270*7177;
int l9_4278=((l9_4277*((l9_4277*1471343)+101146501))+1559861749)&2147483647;
int l9_4279=l9_4278;
int l9_4280=l9_4273;
float l9_4281=float(l9_4280)*4.6566129e-10;
int l9_4282=l9_4276;
float l9_4283=float(l9_4282)*4.6566129e-10;
int l9_4284=l9_4279;
float l9_4285=float(l9_4284)*4.6566129e-10;
float3 l9_4286=float3(l9_4281,l9_4283,l9_4285);
float3 l9_4287=l9_4286;
N181_particleSeed=l9_4287;
float l9_4288=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_4289;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_4289=N181_lifeTimeMinMax;
}
else
{
l9_4289=float2(N181_lifeTimeConstant);
}
float2 l9_4290=l9_4289;
float l9_4291=fast::max(l9_4290.x,0.0099999998);
float l9_4292=fast::max(l9_4290.y,0.0099999998);
float l9_4293=tempGlobals.gTimeElapsed;
float l9_4294=l9_4293;
if (N181_ENABLE_EXTERNALTIME)
{
l9_4294=N181_externalTime;
}
float l9_4295=l9_4294;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_4295=N181_timeGlobal*l9_4294;
}
else
{
float l9_4296=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_4296=N181_trailLength;
}
}
float l9_4297=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_4298=0.0;
float l9_4299;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_4299=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_4299=0.0;
}
l9_4298=l9_4299;
float l9_4300=l9_4298;
int l9_4301=0;
l9_4301=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_4302=l9_4301;
l9_4297=fast::max(l9_4300*(1.0-(1.0/float(l9_4302))),0.0);
}
else
{
l9_4297=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_4303=fract(((l9_4294*N181_timeGlobal)*(1.0/(l9_4290.y+l9_4296)))+l9_4297);
l9_4295=l9_4303*(l9_4290.y+l9_4296);
}
float l9_4304=mix(l9_4295/l9_4291,l9_4295/l9_4292,l9_4288);
float l9_4305=fast::clamp(l9_4304,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_4295,l9_4305);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_4306=tempGlobals.Surface_UVCoord0;
l9_4295-=(l9_4306.y*N181_trailLength);
l9_4304=mix(l9_4295/l9_4291,l9_4295/l9_4292,l9_4288);
l9_4305=fast::clamp(l9_4304,0.0,1.0);
}
}
float l9_4307=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_4294-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_4307=1.0;
}
}
}
float l9_4308=l9_4304+l9_4307;
N181_particleAlive=1.0;
if ((l9_4308>0.99989998)||(l9_4295<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_4294*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_4290,l9_4295,l9_4305);
l9_4262=N181_particleSeed;
l9_4252=l9_4262;
l9_4229=l9_4252;
float3 l9_4309=l9_4229;
N111_particleSeedIn=l9_4309;
float l9_4310=0.0;
float l9_4311=0.0;
float l9_4312=(*sc_set0.UserUniforms).timeGlobal;
l9_4311=l9_4312;
float l9_4313=0.0;
float l9_4314=(*sc_set0.UserUniforms).externalTimeInput;
l9_4313=l9_4314;
float l9_4315=0.0;
float l9_4316=(*sc_set0.UserUniforms).externalSeed;
l9_4315=l9_4316;
float l9_4317=0.0;
float l9_4318=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_4317=l9_4318;
float2 l9_4319=float2(0.0);
float2 l9_4320=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_4319=l9_4320;
float l9_4321=0.0;
float l9_4322=(*sc_set0.UserUniforms).spawnDuration;
l9_4321=l9_4322;
float l9_4323=0.0;
float l9_4324;
if ((int(TRAILS_tmp)!=0))
{
l9_4324=1.001;
}
else
{
l9_4324=0.001;
}
l9_4324-=0.001;
l9_4323=l9_4324;
float l9_4325=0.0;
float l9_4326=(*sc_set0.UserUniforms).trailLength;
l9_4325=l9_4326;
float4 l9_4327=float4(0.0);
l9_4327=tempGlobals.VertexColor;
float l9_4328=0.0;
l9_4328=l9_4327.x;
float l9_4329=0.0;
float l9_4330=l9_4323;
bool l9_4331=(l9_4330*1.0)!=0.0;
bool l9_4332;
if (l9_4331)
{
l9_4332=(l9_4328*1.0)!=0.0;
}
else
{
l9_4332=l9_4331;
}
l9_4329=float(l9_4332);
float l9_4333=0.0;
float l9_4334=l9_4311;
float l9_4335=l9_4313;
float l9_4336=l9_4315;
float l9_4337=l9_4317;
float2 l9_4338=l9_4319;
float l9_4339=l9_4321;
float l9_4340=l9_4325;
float l9_4341=l9_4329;
ssGlobals l9_4342=tempGlobals;
tempGlobals=l9_4342;
float l9_4343=0.0;
N181_timeGlobal=l9_4334;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_4335;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_4336;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_4337;
N181_lifeTimeMinMax=l9_4338;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_4339;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_4340;
N181_isTrailCondition=l9_4341!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_4344=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_4345=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_4344=length(float4(1.0)*l9_4345);
}
N181_globalSeed=N181_externalSeed+l9_4344;
int l9_4346=0;
l9_4346=ssInstanceID;
int l9_4347=l9_4346;
float l9_4348=float(l9_4347);
int l9_4349=int(l9_4348);
int l9_4350=l9_4349^(l9_4349*15299);
int l9_4351=l9_4350;
int l9_4352=l9_4351;
int l9_4353=((l9_4352*((l9_4352*1471343)+101146501))+1559861749)&2147483647;
int l9_4354=l9_4353;
int l9_4355=l9_4351*1399;
int l9_4356=((l9_4355*((l9_4355*1471343)+101146501))+1559861749)&2147483647;
int l9_4357=l9_4356;
int l9_4358=l9_4351*7177;
int l9_4359=((l9_4358*((l9_4358*1471343)+101146501))+1559861749)&2147483647;
int l9_4360=l9_4359;
int l9_4361=l9_4354;
float l9_4362=float(l9_4361)*4.6566129e-10;
int l9_4363=l9_4357;
float l9_4364=float(l9_4363)*4.6566129e-10;
int l9_4365=l9_4360;
float l9_4366=float(l9_4365)*4.6566129e-10;
float3 l9_4367=float3(l9_4362,l9_4364,l9_4366);
float3 l9_4368=l9_4367;
N181_particleSeed=l9_4368;
float l9_4369=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_4370;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_4370=N181_lifeTimeMinMax;
}
else
{
l9_4370=float2(N181_lifeTimeConstant);
}
float2 l9_4371=l9_4370;
float l9_4372=fast::max(l9_4371.x,0.0099999998);
float l9_4373=fast::max(l9_4371.y,0.0099999998);
float l9_4374=tempGlobals.gTimeElapsed;
float l9_4375=l9_4374;
if (N181_ENABLE_EXTERNALTIME)
{
l9_4375=N181_externalTime;
}
float l9_4376=l9_4375;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_4376=N181_timeGlobal*l9_4375;
}
else
{
float l9_4377=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_4377=N181_trailLength;
}
}
float l9_4378=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_4379=0.0;
float l9_4380;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_4380=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_4380=0.0;
}
l9_4379=l9_4380;
float l9_4381=l9_4379;
int l9_4382=0;
l9_4382=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_4383=l9_4382;
l9_4378=fast::max(l9_4381*(1.0-(1.0/float(l9_4383))),0.0);
}
else
{
l9_4378=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_4384=fract(((l9_4375*N181_timeGlobal)*(1.0/(l9_4371.y+l9_4377)))+l9_4378);
l9_4376=l9_4384*(l9_4371.y+l9_4377);
}
float l9_4385=mix(l9_4376/l9_4372,l9_4376/l9_4373,l9_4369);
float l9_4386=fast::clamp(l9_4385,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_4376,l9_4386);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_4387=tempGlobals.Surface_UVCoord0;
l9_4376-=(l9_4387.y*N181_trailLength);
l9_4385=mix(l9_4376/l9_4372,l9_4376/l9_4373,l9_4369);
l9_4386=fast::clamp(l9_4385,0.0,1.0);
}
}
float l9_4388=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_4375-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_4388=1.0;
}
}
}
float l9_4389=l9_4385+l9_4388;
N181_particleAlive=1.0;
if ((l9_4389>0.99989998)||(l9_4376<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_4375*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_4371,l9_4376,l9_4386);
l9_4343=N181_globalSeed;
l9_4333=l9_4343;
l9_4310=l9_4333;
float l9_4390=l9_4310;
N111_globalSeedIn=l9_4390;
float l9_4391=0.0;
float l9_4392=0.0;
float l9_4393=(*sc_set0.UserUniforms).timeGlobal;
l9_4392=l9_4393;
float l9_4394=0.0;
float l9_4395=(*sc_set0.UserUniforms).externalTimeInput;
l9_4394=l9_4395;
float l9_4396=0.0;
float l9_4397=(*sc_set0.UserUniforms).externalSeed;
l9_4396=l9_4397;
float l9_4398=0.0;
float l9_4399=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_4398=l9_4399;
float2 l9_4400=float2(0.0);
float2 l9_4401=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_4400=l9_4401;
float l9_4402=0.0;
float l9_4403=(*sc_set0.UserUniforms).spawnDuration;
l9_4402=l9_4403;
float l9_4404=0.0;
float l9_4405;
if ((int(TRAILS_tmp)!=0))
{
l9_4405=1.001;
}
else
{
l9_4405=0.001;
}
l9_4405-=0.001;
l9_4404=l9_4405;
float l9_4406=0.0;
float l9_4407=(*sc_set0.UserUniforms).trailLength;
l9_4406=l9_4407;
float4 l9_4408=float4(0.0);
l9_4408=tempGlobals.VertexColor;
float l9_4409=0.0;
l9_4409=l9_4408.x;
float l9_4410=0.0;
float l9_4411=l9_4404;
bool l9_4412=(l9_4411*1.0)!=0.0;
bool l9_4413;
if (l9_4412)
{
l9_4413=(l9_4409*1.0)!=0.0;
}
else
{
l9_4413=l9_4412;
}
l9_4410=float(l9_4413);
float l9_4414=0.0;
float l9_4415=l9_4392;
float l9_4416=l9_4394;
float l9_4417=l9_4396;
float l9_4418=l9_4398;
float2 l9_4419=l9_4400;
float l9_4420=l9_4402;
float l9_4421=l9_4406;
float l9_4422=l9_4410;
ssGlobals l9_4423=tempGlobals;
tempGlobals=l9_4423;
float l9_4424=0.0;
N181_timeGlobal=l9_4415;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_4416;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_4417;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_4418;
N181_lifeTimeMinMax=l9_4419;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_4420;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_4421;
N181_isTrailCondition=l9_4422!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_4425=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_4426=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_4425=length(float4(1.0)*l9_4426);
}
N181_globalSeed=N181_externalSeed+l9_4425;
int l9_4427=0;
l9_4427=ssInstanceID;
int l9_4428=l9_4427;
float l9_4429=float(l9_4428);
int l9_4430=int(l9_4429);
int l9_4431=l9_4430^(l9_4430*15299);
int l9_4432=l9_4431;
int l9_4433=l9_4432;
int l9_4434=((l9_4433*((l9_4433*1471343)+101146501))+1559861749)&2147483647;
int l9_4435=l9_4434;
int l9_4436=l9_4432*1399;
int l9_4437=((l9_4436*((l9_4436*1471343)+101146501))+1559861749)&2147483647;
int l9_4438=l9_4437;
int l9_4439=l9_4432*7177;
int l9_4440=((l9_4439*((l9_4439*1471343)+101146501))+1559861749)&2147483647;
int l9_4441=l9_4440;
int l9_4442=l9_4435;
float l9_4443=float(l9_4442)*4.6566129e-10;
int l9_4444=l9_4438;
float l9_4445=float(l9_4444)*4.6566129e-10;
int l9_4446=l9_4441;
float l9_4447=float(l9_4446)*4.6566129e-10;
float3 l9_4448=float3(l9_4443,l9_4445,l9_4447);
float3 l9_4449=l9_4448;
N181_particleSeed=l9_4449;
float l9_4450=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_4451;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_4451=N181_lifeTimeMinMax;
}
else
{
l9_4451=float2(N181_lifeTimeConstant);
}
float2 l9_4452=l9_4451;
float l9_4453=fast::max(l9_4452.x,0.0099999998);
float l9_4454=fast::max(l9_4452.y,0.0099999998);
float l9_4455=tempGlobals.gTimeElapsed;
float l9_4456=l9_4455;
if (N181_ENABLE_EXTERNALTIME)
{
l9_4456=N181_externalTime;
}
float l9_4457=l9_4456;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_4457=N181_timeGlobal*l9_4456;
}
else
{
float l9_4458=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_4458=N181_trailLength;
}
}
float l9_4459=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_4460=0.0;
float l9_4461;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_4461=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_4461=0.0;
}
l9_4460=l9_4461;
float l9_4462=l9_4460;
int l9_4463=0;
l9_4463=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_4464=l9_4463;
l9_4459=fast::max(l9_4462*(1.0-(1.0/float(l9_4464))),0.0);
}
else
{
l9_4459=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_4465=fract(((l9_4456*N181_timeGlobal)*(1.0/(l9_4452.y+l9_4458)))+l9_4459);
l9_4457=l9_4465*(l9_4452.y+l9_4458);
}
float l9_4466=mix(l9_4457/l9_4453,l9_4457/l9_4454,l9_4450);
float l9_4467=fast::clamp(l9_4466,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_4457,l9_4467);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_4468=tempGlobals.Surface_UVCoord0;
l9_4457-=(l9_4468.y*N181_trailLength);
l9_4466=mix(l9_4457/l9_4453,l9_4457/l9_4454,l9_4450);
l9_4467=fast::clamp(l9_4466,0.0,1.0);
}
}
float l9_4469=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_4456-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_4469=1.0;
}
}
}
float l9_4470=l9_4466+l9_4469;
N181_particleAlive=1.0;
if ((l9_4470>0.99989998)||(l9_4457<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_4456*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_4452,l9_4457,l9_4467);
l9_4424=N181_particleAlive;
l9_4414=l9_4424;
l9_4391=l9_4414;
float l9_4471=l9_4391;
N111_particleAlive=l9_4471;
float4 l9_4472=float4(0.0);
float l9_4473=0.0;
float l9_4474=(*sc_set0.UserUniforms).timeGlobal;
l9_4473=l9_4474;
float l9_4475=0.0;
float l9_4476=(*sc_set0.UserUniforms).externalTimeInput;
l9_4475=l9_4476;
float l9_4477=0.0;
float l9_4478=(*sc_set0.UserUniforms).externalSeed;
l9_4477=l9_4478;
float l9_4479=0.0;
float l9_4480=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_4479=l9_4480;
float2 l9_4481=float2(0.0);
float2 l9_4482=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_4481=l9_4482;
float l9_4483=0.0;
float l9_4484=(*sc_set0.UserUniforms).spawnDuration;
l9_4483=l9_4484;
float l9_4485=0.0;
float l9_4486;
if ((int(TRAILS_tmp)!=0))
{
l9_4486=1.001;
}
else
{
l9_4486=0.001;
}
l9_4486-=0.001;
l9_4485=l9_4486;
float l9_4487=0.0;
float l9_4488=(*sc_set0.UserUniforms).trailLength;
l9_4487=l9_4488;
float4 l9_4489=float4(0.0);
l9_4489=tempGlobals.VertexColor;
float l9_4490=0.0;
l9_4490=l9_4489.x;
float l9_4491=0.0;
float l9_4492=l9_4485;
bool l9_4493=(l9_4492*1.0)!=0.0;
bool l9_4494;
if (l9_4493)
{
l9_4494=(l9_4490*1.0)!=0.0;
}
else
{
l9_4494=l9_4493;
}
l9_4491=float(l9_4494);
float4 l9_4495=float4(0.0);
float l9_4496=l9_4473;
float l9_4497=l9_4475;
float l9_4498=l9_4477;
float l9_4499=l9_4479;
float2 l9_4500=l9_4481;
float l9_4501=l9_4483;
float l9_4502=l9_4487;
float l9_4503=l9_4491;
ssGlobals l9_4504=tempGlobals;
tempGlobals=l9_4504;
float4 l9_4505=float4(0.0);
N181_timeGlobal=l9_4496;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_4497;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_4498;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_4499;
N181_lifeTimeMinMax=l9_4500;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_4501;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_4502;
N181_isTrailCondition=l9_4503!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_4506=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_4507=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_4506=length(float4(1.0)*l9_4507);
}
N181_globalSeed=N181_externalSeed+l9_4506;
int l9_4508=0;
l9_4508=ssInstanceID;
int l9_4509=l9_4508;
float l9_4510=float(l9_4509);
int l9_4511=int(l9_4510);
int l9_4512=l9_4511^(l9_4511*15299);
int l9_4513=l9_4512;
int l9_4514=l9_4513;
int l9_4515=((l9_4514*((l9_4514*1471343)+101146501))+1559861749)&2147483647;
int l9_4516=l9_4515;
int l9_4517=l9_4513*1399;
int l9_4518=((l9_4517*((l9_4517*1471343)+101146501))+1559861749)&2147483647;
int l9_4519=l9_4518;
int l9_4520=l9_4513*7177;
int l9_4521=((l9_4520*((l9_4520*1471343)+101146501))+1559861749)&2147483647;
int l9_4522=l9_4521;
int l9_4523=l9_4516;
float l9_4524=float(l9_4523)*4.6566129e-10;
int l9_4525=l9_4519;
float l9_4526=float(l9_4525)*4.6566129e-10;
int l9_4527=l9_4522;
float l9_4528=float(l9_4527)*4.6566129e-10;
float3 l9_4529=float3(l9_4524,l9_4526,l9_4528);
float3 l9_4530=l9_4529;
N181_particleSeed=l9_4530;
float l9_4531=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_4532;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_4532=N181_lifeTimeMinMax;
}
else
{
l9_4532=float2(N181_lifeTimeConstant);
}
float2 l9_4533=l9_4532;
float l9_4534=fast::max(l9_4533.x,0.0099999998);
float l9_4535=fast::max(l9_4533.y,0.0099999998);
float l9_4536=tempGlobals.gTimeElapsed;
float l9_4537=l9_4536;
if (N181_ENABLE_EXTERNALTIME)
{
l9_4537=N181_externalTime;
}
float l9_4538=l9_4537;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_4538=N181_timeGlobal*l9_4537;
}
else
{
float l9_4539=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_4539=N181_trailLength;
}
}
float l9_4540=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_4541=0.0;
float l9_4542;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_4542=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_4542=0.0;
}
l9_4541=l9_4542;
float l9_4543=l9_4541;
int l9_4544=0;
l9_4544=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_4545=l9_4544;
l9_4540=fast::max(l9_4543*(1.0-(1.0/float(l9_4545))),0.0);
}
else
{
l9_4540=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_4546=fract(((l9_4537*N181_timeGlobal)*(1.0/(l9_4533.y+l9_4539)))+l9_4540);
l9_4538=l9_4546*(l9_4533.y+l9_4539);
}
float l9_4547=mix(l9_4538/l9_4534,l9_4538/l9_4535,l9_4531);
float l9_4548=fast::clamp(l9_4547,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_4538,l9_4548);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_4549=tempGlobals.Surface_UVCoord0;
l9_4538-=(l9_4549.y*N181_trailLength);
l9_4547=mix(l9_4538/l9_4534,l9_4538/l9_4535,l9_4531);
l9_4548=fast::clamp(l9_4547,0.0,1.0);
}
}
float l9_4550=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_4537-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_4550=1.0;
}
}
}
float l9_4551=l9_4547+l9_4550;
N181_particleAlive=1.0;
if ((l9_4551>0.99989998)||(l9_4538<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_4537*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_4533,l9_4538,l9_4548);
l9_4505=N181_timeValues;
l9_4495=l9_4505;
l9_4472=l9_4495;
float4 l9_4552=l9_4472;
N111_timeValuesIn=l9_4552;
float l9_4553=0.0;
float l9_4554=0.0;
float l9_4555=(*sc_set0.UserUniforms).timeGlobal;
l9_4554=l9_4555;
float l9_4556=0.0;
float l9_4557=(*sc_set0.UserUniforms).externalTimeInput;
l9_4556=l9_4557;
float l9_4558=0.0;
float l9_4559=(*sc_set0.UserUniforms).externalSeed;
l9_4558=l9_4559;
float l9_4560=0.0;
float l9_4561=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_4560=l9_4561;
float2 l9_4562=float2(0.0);
float2 l9_4563=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_4562=l9_4563;
float l9_4564=0.0;
float l9_4565=(*sc_set0.UserUniforms).spawnDuration;
l9_4564=l9_4565;
float l9_4566=0.0;
float l9_4567;
if ((int(TRAILS_tmp)!=0))
{
l9_4567=1.001;
}
else
{
l9_4567=0.001;
}
l9_4567-=0.001;
l9_4566=l9_4567;
float l9_4568=0.0;
float l9_4569=(*sc_set0.UserUniforms).trailLength;
l9_4568=l9_4569;
float4 l9_4570=float4(0.0);
l9_4570=tempGlobals.VertexColor;
float l9_4571=0.0;
l9_4571=l9_4570.x;
float l9_4572=0.0;
float l9_4573=l9_4566;
bool l9_4574=(l9_4573*1.0)!=0.0;
bool l9_4575;
if (l9_4574)
{
l9_4575=(l9_4571*1.0)!=0.0;
}
else
{
l9_4575=l9_4574;
}
l9_4572=float(l9_4575);
float l9_4576=0.0;
float l9_4577=l9_4554;
float l9_4578=l9_4556;
float l9_4579=l9_4558;
float l9_4580=l9_4560;
float2 l9_4581=l9_4562;
float l9_4582=l9_4564;
float l9_4583=l9_4568;
float l9_4584=l9_4572;
ssGlobals l9_4585=tempGlobals;
tempGlobals=l9_4585;
float l9_4586=0.0;
N181_timeGlobal=l9_4577;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_4578;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_4579;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_4580;
N181_lifeTimeMinMax=l9_4581;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_4582;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_4583;
N181_isTrailCondition=l9_4584!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_4587=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_4588=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_4587=length(float4(1.0)*l9_4588);
}
N181_globalSeed=N181_externalSeed+l9_4587;
int l9_4589=0;
l9_4589=ssInstanceID;
int l9_4590=l9_4589;
float l9_4591=float(l9_4590);
int l9_4592=int(l9_4591);
int l9_4593=l9_4592^(l9_4592*15299);
int l9_4594=l9_4593;
int l9_4595=l9_4594;
int l9_4596=((l9_4595*((l9_4595*1471343)+101146501))+1559861749)&2147483647;
int l9_4597=l9_4596;
int l9_4598=l9_4594*1399;
int l9_4599=((l9_4598*((l9_4598*1471343)+101146501))+1559861749)&2147483647;
int l9_4600=l9_4599;
int l9_4601=l9_4594*7177;
int l9_4602=((l9_4601*((l9_4601*1471343)+101146501))+1559861749)&2147483647;
int l9_4603=l9_4602;
int l9_4604=l9_4597;
float l9_4605=float(l9_4604)*4.6566129e-10;
int l9_4606=l9_4600;
float l9_4607=float(l9_4606)*4.6566129e-10;
int l9_4608=l9_4603;
float l9_4609=float(l9_4608)*4.6566129e-10;
float3 l9_4610=float3(l9_4605,l9_4607,l9_4609);
float3 l9_4611=l9_4610;
N181_particleSeed=l9_4611;
float l9_4612=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_4613;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_4613=N181_lifeTimeMinMax;
}
else
{
l9_4613=float2(N181_lifeTimeConstant);
}
float2 l9_4614=l9_4613;
float l9_4615=fast::max(l9_4614.x,0.0099999998);
float l9_4616=fast::max(l9_4614.y,0.0099999998);
float l9_4617=tempGlobals.gTimeElapsed;
float l9_4618=l9_4617;
if (N181_ENABLE_EXTERNALTIME)
{
l9_4618=N181_externalTime;
}
float l9_4619=l9_4618;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_4619=N181_timeGlobal*l9_4618;
}
else
{
float l9_4620=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_4620=N181_trailLength;
}
}
float l9_4621=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_4622=0.0;
float l9_4623;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_4623=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_4623=0.0;
}
l9_4622=l9_4623;
float l9_4624=l9_4622;
int l9_4625=0;
l9_4625=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_4626=l9_4625;
l9_4621=fast::max(l9_4624*(1.0-(1.0/float(l9_4626))),0.0);
}
else
{
l9_4621=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_4627=fract(((l9_4618*N181_timeGlobal)*(1.0/(l9_4614.y+l9_4620)))+l9_4621);
l9_4619=l9_4627*(l9_4614.y+l9_4620);
}
float l9_4628=mix(l9_4619/l9_4615,l9_4619/l9_4616,l9_4612);
float l9_4629=fast::clamp(l9_4628,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_4619,l9_4629);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_4630=tempGlobals.Surface_UVCoord0;
l9_4619-=(l9_4630.y*N181_trailLength);
l9_4628=mix(l9_4619/l9_4615,l9_4619/l9_4616,l9_4612);
l9_4629=fast::clamp(l9_4628,0.0,1.0);
}
}
float l9_4631=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_4618-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_4631=1.0;
}
}
}
float l9_4632=l9_4628+l9_4631;
N181_particleAlive=1.0;
if ((l9_4632>0.99989998)||(l9_4619<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_4618*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_4614,l9_4619,l9_4629);
l9_4586=N181_isTrail;
l9_4576=l9_4586;
l9_4553=l9_4576;
bool l9_4633=l9_4553!=0.0;
N111_isTrail=l9_4633;
float2 l9_4634=float2(0.0);
float l9_4635=0.0;
float l9_4636=(*sc_set0.UserUniforms).timeGlobal;
l9_4635=l9_4636;
float l9_4637=0.0;
float l9_4638=(*sc_set0.UserUniforms).externalTimeInput;
l9_4637=l9_4638;
float l9_4639=0.0;
float l9_4640=(*sc_set0.UserUniforms).externalSeed;
l9_4639=l9_4640;
float l9_4641=0.0;
float l9_4642=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_4641=l9_4642;
float2 l9_4643=float2(0.0);
float2 l9_4644=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_4643=l9_4644;
float l9_4645=0.0;
float l9_4646=(*sc_set0.UserUniforms).spawnDuration;
l9_4645=l9_4646;
float l9_4647=0.0;
float l9_4648;
if ((int(TRAILS_tmp)!=0))
{
l9_4648=1.001;
}
else
{
l9_4648=0.001;
}
l9_4648-=0.001;
l9_4647=l9_4648;
float l9_4649=0.0;
float l9_4650=(*sc_set0.UserUniforms).trailLength;
l9_4649=l9_4650;
float4 l9_4651=float4(0.0);
l9_4651=tempGlobals.VertexColor;
float l9_4652=0.0;
l9_4652=l9_4651.x;
float l9_4653=0.0;
float l9_4654=l9_4647;
bool l9_4655=(l9_4654*1.0)!=0.0;
bool l9_4656;
if (l9_4655)
{
l9_4656=(l9_4652*1.0)!=0.0;
}
else
{
l9_4656=l9_4655;
}
l9_4653=float(l9_4656);
float2 l9_4657=float2(0.0);
float l9_4658=l9_4635;
float l9_4659=l9_4637;
float l9_4660=l9_4639;
float l9_4661=l9_4641;
float2 l9_4662=l9_4643;
float l9_4663=l9_4645;
float l9_4664=l9_4649;
float l9_4665=l9_4653;
ssGlobals l9_4666=tempGlobals;
tempGlobals=l9_4666;
float2 l9_4667=float2(0.0);
N181_timeGlobal=l9_4658;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_4659;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_4660;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_4661;
N181_lifeTimeMinMax=l9_4662;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_4663;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_4664;
N181_isTrailCondition=l9_4665!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_4668=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_4669=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_4668=length(float4(1.0)*l9_4669);
}
N181_globalSeed=N181_externalSeed+l9_4668;
int l9_4670=0;
l9_4670=ssInstanceID;
int l9_4671=l9_4670;
float l9_4672=float(l9_4671);
int l9_4673=int(l9_4672);
int l9_4674=l9_4673^(l9_4673*15299);
int l9_4675=l9_4674;
int l9_4676=l9_4675;
int l9_4677=((l9_4676*((l9_4676*1471343)+101146501))+1559861749)&2147483647;
int l9_4678=l9_4677;
int l9_4679=l9_4675*1399;
int l9_4680=((l9_4679*((l9_4679*1471343)+101146501))+1559861749)&2147483647;
int l9_4681=l9_4680;
int l9_4682=l9_4675*7177;
int l9_4683=((l9_4682*((l9_4682*1471343)+101146501))+1559861749)&2147483647;
int l9_4684=l9_4683;
int l9_4685=l9_4678;
float l9_4686=float(l9_4685)*4.6566129e-10;
int l9_4687=l9_4681;
float l9_4688=float(l9_4687)*4.6566129e-10;
int l9_4689=l9_4684;
float l9_4690=float(l9_4689)*4.6566129e-10;
float3 l9_4691=float3(l9_4686,l9_4688,l9_4690);
float3 l9_4692=l9_4691;
N181_particleSeed=l9_4692;
float l9_4693=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_4694;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_4694=N181_lifeTimeMinMax;
}
else
{
l9_4694=float2(N181_lifeTimeConstant);
}
float2 l9_4695=l9_4694;
float l9_4696=fast::max(l9_4695.x,0.0099999998);
float l9_4697=fast::max(l9_4695.y,0.0099999998);
float l9_4698=tempGlobals.gTimeElapsed;
float l9_4699=l9_4698;
if (N181_ENABLE_EXTERNALTIME)
{
l9_4699=N181_externalTime;
}
float l9_4700=l9_4699;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_4700=N181_timeGlobal*l9_4699;
}
else
{
float l9_4701=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_4701=N181_trailLength;
}
}
float l9_4702=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_4703=0.0;
float l9_4704;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_4704=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_4704=0.0;
}
l9_4703=l9_4704;
float l9_4705=l9_4703;
int l9_4706=0;
l9_4706=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_4707=l9_4706;
l9_4702=fast::max(l9_4705*(1.0-(1.0/float(l9_4707))),0.0);
}
else
{
l9_4702=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_4708=fract(((l9_4699*N181_timeGlobal)*(1.0/(l9_4695.y+l9_4701)))+l9_4702);
l9_4700=l9_4708*(l9_4695.y+l9_4701);
}
float l9_4709=mix(l9_4700/l9_4696,l9_4700/l9_4697,l9_4693);
float l9_4710=fast::clamp(l9_4709,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_4700,l9_4710);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_4711=tempGlobals.Surface_UVCoord0;
l9_4700-=(l9_4711.y*N181_trailLength);
l9_4709=mix(l9_4700/l9_4696,l9_4700/l9_4697,l9_4693);
l9_4710=fast::clamp(l9_4709,0.0,1.0);
}
}
float l9_4712=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_4699-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_4712=1.0;
}
}
}
float l9_4713=l9_4709+l9_4712;
N181_particleAlive=1.0;
if ((l9_4713>0.99989998)||(l9_4700<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_4699*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_4695,l9_4700,l9_4710);
l9_4667=N181_trailHeadTime;
l9_4657=l9_4667;
l9_4634=l9_4657;
float2 l9_4714=l9_4634;
N111_trailHeadTime=l9_4714;
float2 l9_4715=float2(0.0);
float2 l9_4716=float2(0.0);
float2 l9_4717=(*sc_set0.UserUniforms).trailTaper;
l9_4716=l9_4717;
l9_4715=l9_4716;
float2 l9_4718=l9_4715;
N111_taper=l9_4718;
float l9_4719=0.0;
float l9_4720=0.0;
float l9_4721=(*sc_set0.UserUniforms).trailWidth;
l9_4720=l9_4721;
l9_4719=l9_4720;
float l9_4722=l9_4719;
N111_trailSizeMult=l9_4722;
float3 l9_4723=float3(0.0);
float3 l9_4724=float3(0.0);
l9_4724=tempGlobals.SurfacePosition_ObjectSpace;
l9_4723=l9_4724;
float3 l9_4725=l9_4723;
N111_positionObjectSpace=l9_4725;
float3 l9_4726=float3(0.0);
float3 l9_4727=float3(0.0);
l9_4727=tempGlobals.VertexNormal_ObjectSpace;
l9_4726=l9_4727;
float3 l9_4728=l9_4726;
N111_normalObjectSpace=l9_4728;
float3 l9_4729=float3(0.0);
float3 l9_4730=float3(0.0);
float3 l9_4731=float3(0.0);
float3 l9_4732=float3(0.0);
float3 l9_4733=float3(0.0);
float3 l9_4734=float3(0.0);
float3 l9_4735=float3(0.0);
float3 l9_4736=float3(0.0);
float3 l9_4737=float3(0.0);
float3 l9_4738=float3(0.0);
float3 l9_4739=(*sc_set0.UserUniforms).Port_Default_N247;
ssGlobals l9_4740=tempGlobals;
float3 l9_4741;
if (NODE_248_DROPLIST_ITEM_tmp==0)
{
float l9_4742=0.0;
float l9_4743=(*sc_set0.UserUniforms).Tweak_N255;
l9_4742=l9_4743;
float l9_4744=0.0;
float l9_4745=(*sc_set0.UserUniforms).Tweak_N254;
l9_4744=l9_4745;
float3 l9_4746=float3(0.0);
float3 l9_4747=(*sc_set0.UserUniforms).Tweak_N252;
l9_4746=l9_4747;
float3 l9_4748=float3(0.0);
float3 l9_4749=(*sc_set0.UserUniforms).Tweak_N253;
l9_4748=l9_4749;
float l9_4750=0.0;
float l9_4751=(*sc_set0.UserUniforms).Tweak_N224;
l9_4750=l9_4751;
float3 l9_4752=float3(0.0);
float l9_4753=l9_4742;
float l9_4754=l9_4744;
float3 l9_4755=l9_4746;
float3 l9_4756=l9_4748;
float l9_4757=l9_4750;
ssGlobals l9_4758=l9_4740;
tempGlobals=l9_4758;
float3 l9_4759=float3(0.0);
N128_SphereType=int(l9_4753);
N128_Radius=l9_4754;
N128_Scale=l9_4755;
N128_Center=l9_4756;
N128_VolumeFill=l9_4757;
int l9_4760=0;
l9_4760=ssInstanceID;
int l9_4761=l9_4760;
float l9_4762=float(l9_4761);
int l9_4763=int(l9_4762);
int l9_4764=l9_4763^(l9_4763*15299);
int l9_4765=l9_4764;
int l9_4766=l9_4765;
int l9_4767=((l9_4766*((l9_4766*1471343)+101146501))+1559861749)&2147483647;
int l9_4768=l9_4767;
int l9_4769=l9_4765*1399;
int l9_4770=((l9_4769*((l9_4769*1471343)+101146501))+1559861749)&2147483647;
int l9_4771=l9_4770;
int l9_4772=l9_4765*7177;
int l9_4773=((l9_4772*((l9_4772*1471343)+101146501))+1559861749)&2147483647;
int l9_4774=l9_4773;
int l9_4775=l9_4768;
float l9_4776=float(l9_4775)*4.6566129e-10;
int l9_4777=l9_4771;
float l9_4778=float(l9_4777)*4.6566129e-10;
int l9_4779=l9_4774;
float l9_4780=float(l9_4779)*4.6566129e-10;
float3 l9_4781=float3(l9_4776,l9_4778,l9_4780);
float3 l9_4782=l9_4781;
float3 l9_4783=l9_4782;
int l9_4784=0;
l9_4784=ssInstanceID;
int l9_4785=l9_4784;
float l9_4786=float(l9_4785+1);
int l9_4787=int(l9_4786);
int l9_4788=l9_4787^(l9_4787*15299);
int l9_4789=l9_4788;
int l9_4790=l9_4789;
int l9_4791=((l9_4790*((l9_4790*1471343)+101146501))+1559861749)&2147483647;
int l9_4792=l9_4791;
int l9_4793=l9_4789*1399;
int l9_4794=((l9_4793*((l9_4793*1471343)+101146501))+1559861749)&2147483647;
int l9_4795=l9_4794;
int l9_4796=l9_4789*7177;
int l9_4797=((l9_4796*((l9_4796*1471343)+101146501))+1559861749)&2147483647;
int l9_4798=l9_4797;
int l9_4799=l9_4792;
float l9_4800=float(l9_4799)*4.6566129e-10;
int l9_4801=l9_4795;
float l9_4802=float(l9_4801)*4.6566129e-10;
int l9_4803=l9_4798;
float l9_4804=float(l9_4803)*4.6566129e-10;
float3 l9_4805=float3(l9_4800,l9_4802,l9_4804);
float3 l9_4806=l9_4805;
float3 l9_4807=l9_4806;
float l9_4808=1.0-N128_VolumeFill;
float l9_4809=3.0;
float l9_4810;
if (l9_4808<=0.0)
{
l9_4810=0.0;
}
else
{
l9_4810=pow(l9_4808,l9_4809);
}
float l9_4811=l9_4810;
float l9_4812=l9_4811;
l9_4783=mix(float3(l9_4812),float3(1.0),l9_4783);
float3 l9_4813=l9_4783;
float l9_4814;
if (l9_4813.x<=0.0)
{
l9_4814=0.0;
}
else
{
l9_4814=sqrt(l9_4813.x);
}
float l9_4815=l9_4814;
float l9_4816;
if (l9_4813.y<=0.0)
{
l9_4816=0.0;
}
else
{
l9_4816=sqrt(l9_4813.y);
}
float l9_4817=l9_4816;
float l9_4818;
if (l9_4813.z<=0.0)
{
l9_4818=0.0;
}
else
{
l9_4818=sqrt(l9_4813.z);
}
float3 l9_4819=float3(l9_4815,l9_4817,l9_4818);
l9_4783=l9_4819;
l9_4807=mix(float3(-1.0),float3(1.0),l9_4807);
l9_4807/=float3(length(l9_4807+float3(9.9999997e-05)));
float3 l9_4820=((l9_4783*l9_4807)*N128_Scale)*(N128_Radius*0.5);
if (N128_SphereType==1)
{
l9_4820.x=abs(l9_4820.x);
}
else
{
if (N128_SphereType==2)
{
l9_4820.y=abs(l9_4820.y);
}
else
{
if (N128_SphereType==3)
{
l9_4820.z=abs(l9_4820.z);
}
}
}
l9_4820+=N128_Center;
N128_Result=l9_4820;
l9_4759=N128_Result;
l9_4752=l9_4759;
l9_4731=l9_4752;
l9_4741=l9_4731;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==1)
{
float3 l9_4821=float3(0.0);
float3 l9_4822=(*sc_set0.UserUniforms).Tweak_N250;
l9_4821=l9_4822;
float3 l9_4823=float3(0.0);
float3 l9_4824=(*sc_set0.UserUniforms).Tweak_N251;
l9_4823=l9_4824;
float l9_4825=0.0;
float l9_4826=(*sc_set0.UserUniforms).volumeFill;
l9_4825=l9_4826;
float3 l9_4827=float3(0.0);
float3 l9_4828=l9_4821;
float3 l9_4829=l9_4823;
float l9_4830=l9_4825;
ssGlobals l9_4831=l9_4740;
tempGlobals=l9_4831;
float3 l9_4832=float3(0.0);
N137_Scale=l9_4828;
N137_Center=l9_4829;
N137_VolumeFill=l9_4830;
int l9_4833=0;
l9_4833=ssInstanceID;
int l9_4834=l9_4833;
float l9_4835=float(l9_4834);
float l9_4836=mod(l9_4835,8.0);
float l9_4837=mod(l9_4835,3.0);
float l9_4838=l9_4835;
int l9_4839=int(l9_4838);
int l9_4840=l9_4839^(l9_4839*15299);
int l9_4841=l9_4840;
int l9_4842=l9_4841;
int l9_4843=((l9_4842*((l9_4842*1471343)+101146501))+1559861749)&2147483647;
int l9_4844=l9_4843;
int l9_4845=l9_4841*1399;
int l9_4846=((l9_4845*((l9_4845*1471343)+101146501))+1559861749)&2147483647;
int l9_4847=l9_4846;
int l9_4848=l9_4841*7177;
int l9_4849=((l9_4848*((l9_4848*1471343)+101146501))+1559861749)&2147483647;
int l9_4850=l9_4849;
int l9_4851=l9_4844;
float l9_4852=float(l9_4851)*4.6566129e-10;
int l9_4853=l9_4847;
float l9_4854=float(l9_4853)*4.6566129e-10;
int l9_4855=l9_4850;
float l9_4856=float(l9_4855)*4.6566129e-10;
float3 l9_4857=float3(l9_4852,l9_4854,l9_4856);
float3 l9_4858=l9_4857;
float3 l9_4859=l9_4858;
float l9_4860=1.0-N137_VolumeFill;
float l9_4861=3.0;
float l9_4862;
if (l9_4860<=0.0)
{
l9_4862=0.0;
}
else
{
l9_4862=pow(l9_4860,l9_4861);
}
float l9_4863=l9_4862;
float l9_4864=l9_4863;
float3 l9_4865;
if (l9_4837==0.0)
{
l9_4865=float3(l9_4864,0.0,0.0);
}
else
{
float3 l9_4866;
if (l9_4837==1.0)
{
l9_4866=float3(0.0,l9_4864,0.0);
}
else
{
l9_4866=float3(0.0,0.0,l9_4864);
}
l9_4865=l9_4866;
}
float3 l9_4867=l9_4865;
float3 l9_4868=mix(l9_4867,float3(1.0),l9_4859);
float3 l9_4869;
if (l9_4836==0.0)
{
l9_4869=l9_4868*float3(1.0);
}
else
{
float3 l9_4870;
if (l9_4836==1.0)
{
l9_4870=l9_4868*float3(-1.0,1.0,1.0);
}
else
{
float3 l9_4871;
if (l9_4836==2.0)
{
l9_4871=l9_4868*float3(-1.0,-1.0,1.0);
}
else
{
float3 l9_4872;
if (l9_4836==3.0)
{
l9_4872=l9_4868*float3(-1.0);
}
else
{
float3 l9_4873;
if (l9_4836==4.0)
{
l9_4873=l9_4868*float3(1.0,-1.0,-1.0);
}
else
{
float3 l9_4874;
if (l9_4836==5.0)
{
l9_4874=l9_4868*float3(1.0,1.0,-1.0);
}
else
{
float3 l9_4875;
if (l9_4836==6.0)
{
l9_4875=l9_4868*float3(-1.0,1.0,-1.0);
}
else
{
l9_4875=l9_4868*float3(1.0,-1.0,1.0);
}
l9_4874=l9_4875;
}
l9_4873=l9_4874;
}
l9_4872=l9_4873;
}
l9_4871=l9_4872;
}
l9_4870=l9_4871;
}
l9_4869=l9_4870;
}
float3 l9_4876=l9_4869;
float3 l9_4877=l9_4876;
float3 l9_4878=l9_4877*(N137_Scale*0.5);
l9_4878+=N137_Center;
N137_Result=l9_4878;
l9_4832=N137_Result;
l9_4827=l9_4832;
l9_4732=l9_4827;
l9_4741=l9_4732;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==2)
{
float l9_4879=0.0;
float l9_4880=(*sc_set0.UserUniforms).Tweak_N238;
l9_4879=l9_4880;
float l9_4881=0.0;
float l9_4882=(*sc_set0.UserUniforms).Tweak_N16;
l9_4881=l9_4882;
float l9_4883=0.0;
float l9_4884=(*sc_set0.UserUniforms).Tweak_N234;
l9_4883=l9_4884;
float l9_4885=0.0;
float l9_4886=(*sc_set0.UserUniforms).Tweak_N239;
l9_4885=l9_4886;
float2 l9_4887=float2(0.0);
float2 l9_4888=(*sc_set0.UserUniforms).Tweak_N240;
l9_4887=l9_4888;
float3 l9_4889=float3(0.0);
float3 l9_4890=(*sc_set0.UserUniforms).Tweak_N241;
l9_4889=l9_4890;
float3 l9_4891=float3(0.0);
float3 l9_4892=(*sc_set0.UserUniforms).Tweak_N242;
l9_4891=l9_4892;
float l9_4893=0.0;
float l9_4894=(*sc_set0.UserUniforms).Tweak_N226;
l9_4893=l9_4894;
float l9_4895=0.0;
float l9_4896=(*sc_set0.UserUniforms).Tweak_N243;
l9_4895=l9_4896;
float3 l9_4897=float3(0.0);
float l9_4898=l9_4879;
float l9_4899=l9_4881;
float l9_4900=l9_4883;
float l9_4901=l9_4885;
float2 l9_4902=l9_4887;
float3 l9_4903=l9_4889;
float3 l9_4904=l9_4891;
float l9_4905=l9_4893;
float l9_4906=l9_4895;
ssGlobals l9_4907=l9_4740;
tempGlobals=l9_4907;
float3 l9_4908=float3(0.0);
N144_Radius=l9_4898;
N144_startRad=l9_4899;
N144_endRad=l9_4900;
N144_Height=l9_4901;
N144_ArcAngles=l9_4902;
N144_Scale=l9_4903;
N144_Center=l9_4904;
N144_VolumeFill=l9_4905;
N144_OrientationAxis=int(l9_4906);
int l9_4909=0;
l9_4909=ssInstanceID;
int l9_4910=l9_4909;
float l9_4911=float(l9_4910);
int l9_4912=int(l9_4911);
int l9_4913=l9_4912^(l9_4912*15299);
int l9_4914=l9_4913;
int l9_4915=l9_4914;
int l9_4916=((l9_4915*((l9_4915*1471343)+101146501))+1559861749)&2147483647;
int l9_4917=l9_4916;
int l9_4918=l9_4914*1399;
int l9_4919=((l9_4918*((l9_4918*1471343)+101146501))+1559861749)&2147483647;
int l9_4920=l9_4919;
int l9_4921=l9_4914*7177;
int l9_4922=((l9_4921*((l9_4921*1471343)+101146501))+1559861749)&2147483647;
int l9_4923=l9_4922;
int l9_4924=l9_4917;
float l9_4925=float(l9_4924)*4.6566129e-10;
int l9_4926=l9_4920;
float l9_4927=float(l9_4926)*4.6566129e-10;
int l9_4928=l9_4923;
float l9_4929=float(l9_4928)*4.6566129e-10;
float3 l9_4930=float3(l9_4925,l9_4927,l9_4929);
float3 l9_4931=l9_4930;
float3 l9_4932=l9_4931;
float2 l9_4933=radians(N144_ArcAngles);
float l9_4934=1.0-N144_VolumeFill;
l9_4934*=l9_4934;
float l9_4935=mix(l9_4933.x,l9_4933.y,l9_4932.x);
float l9_4936=mix(-1.0,1.0,l9_4932.y);
float l9_4937=mix(l9_4934,1.0,l9_4932.z);
float l9_4938=l9_4937;
float l9_4939;
if (l9_4938<=0.0)
{
l9_4939=0.0;
}
else
{
l9_4939=sqrt(l9_4938);
}
float l9_4940=l9_4939;
l9_4937=l9_4940;
float3 l9_4941=float3(sin(l9_4935),cos(l9_4935),l9_4936);
float l9_4942=(N144_Radius*0.5)*mix(N144_startRad,N144_endRad,l9_4932.y);
l9_4941*=((N144_Scale*float3(l9_4942,l9_4942,N144_Height*0.5))*float3(l9_4937,l9_4937,1.0));
if (N144_OrientationAxis==0)
{
l9_4941=l9_4941.zxy;
}
else
{
if (N144_OrientationAxis==1)
{
l9_4941=l9_4941.xzy;
}
}
l9_4941+=N144_Center;
N144_Result=l9_4941;
l9_4908=N144_Result;
l9_4897=l9_4908;
l9_4733=l9_4897;
l9_4741=l9_4733;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==3)
{
float l9_4943=0.0;
float l9_4944=(*sc_set0.UserUniforms).Tweak_N257;
l9_4943=l9_4944;
float l9_4945=0.0;
float l9_4946=(*sc_set0.UserUniforms).Tweak_N258;
l9_4945=l9_4946;
float2 l9_4947=float2(0.0);
float2 l9_4948=(*sc_set0.UserUniforms).Tweak_N259;
l9_4947=l9_4948;
float3 l9_4949=float3(0.0);
float3 l9_4950=(*sc_set0.UserUniforms).Tweak_N260;
l9_4949=l9_4950;
float3 l9_4951=float3(0.0);
float3 l9_4952=(*sc_set0.UserUniforms).Tweak_N261;
l9_4951=l9_4952;
float l9_4953=0.0;
float l9_4954=(*sc_set0.UserUniforms).Tweak_N262;
l9_4953=l9_4954;
float l9_4955=0.0;
float l9_4956=(*sc_set0.UserUniforms).Tweak_N263;
l9_4955=l9_4956;
float3 l9_4957=float3(0.0);
float l9_4958=l9_4943;
float l9_4959=l9_4945;
float2 l9_4960=l9_4947;
float3 l9_4961=l9_4949;
float3 l9_4962=l9_4951;
float l9_4963=l9_4953;
float l9_4964=l9_4955;
ssGlobals l9_4965=l9_4740;
tempGlobals=l9_4965;
float3 l9_4966=float3(0.0);
N149_InnerRadius=l9_4958;
N149_OuterRadius=l9_4959;
N149_ArcAngles=l9_4960;
N149_Scale=l9_4961;
N149_Center=l9_4962;
N149_VolumeFill=l9_4963;
N149_Axis=int(l9_4964);
int l9_4967=0;
l9_4967=ssInstanceID;
int l9_4968=l9_4967;
float l9_4969=float(l9_4968);
int l9_4970=int(l9_4969);
int l9_4971=l9_4970^(l9_4970*15299);
int l9_4972=l9_4971;
int l9_4973=l9_4972;
int l9_4974=((l9_4973*((l9_4973*1471343)+101146501))+1559861749)&2147483647;
int l9_4975=l9_4974;
int l9_4976=l9_4972*1399;
int l9_4977=((l9_4976*((l9_4976*1471343)+101146501))+1559861749)&2147483647;
int l9_4978=l9_4977;
int l9_4979=l9_4972*7177;
int l9_4980=((l9_4979*((l9_4979*1471343)+101146501))+1559861749)&2147483647;
int l9_4981=l9_4980;
int l9_4982=l9_4975;
float l9_4983=float(l9_4982)*4.6566129e-10;
int l9_4984=l9_4978;
float l9_4985=float(l9_4984)*4.6566129e-10;
int l9_4986=l9_4981;
float l9_4987=float(l9_4986)*4.6566129e-10;
float3 l9_4988=float3(l9_4983,l9_4985,l9_4987);
float3 l9_4989=l9_4988;
float3 l9_4990=l9_4989;
float2 l9_4991=radians(N149_ArcAngles);
float l9_4992=mix(l9_4991.x,l9_4991.y,l9_4990.z);
float l9_4993=3.1415927;
float l9_4994=mix(0.0,l9_4993*2.0,l9_4990.y);
float l9_4995=mix(1.0-(N149_VolumeFill*N149_VolumeFill),1.0,l9_4990.x);
float l9_4996=l9_4995;
float l9_4997;
if (l9_4996<=0.0)
{
l9_4997=0.0;
}
else
{
l9_4997=sqrt(l9_4996);
}
float l9_4998=l9_4997;
l9_4995=l9_4998*(N149_InnerRadius*0.5);
float l9_4999=(cos(l9_4994)*l9_4995)+(N149_OuterRadius*0.5);
float3 l9_5000=float3(cos(l9_4992)*l9_4999,sin(l9_4992)*l9_4999,sin(l9_4994)*l9_4995);
if (N149_Axis==1)
{
l9_5000=l9_5000.yzx;
}
else
{
if (N149_Axis==2)
{
l9_5000=l9_5000.zyx;
}
}
l9_5000*=N149_Scale;
l9_5000+=N149_Center;
N149_Result=l9_5000;
l9_4966=N149_Result;
l9_4957=l9_4966;
l9_4734=l9_4957;
l9_4741=l9_4734;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==4)
{
float3 l9_5001=float3(0.0);
float3 l9_5002=(*sc_set0.UserUniforms).Tweak_N236;
l9_5001=l9_5002;
float3 l9_5003=float3(0.0);
float3 l9_5004=(*sc_set0.UserUniforms).Tweak_N237;
l9_5003=l9_5004;
float3 l9_5005=float3(0.0);
float3 l9_5006=(*sc_set0.UserUniforms).Tweak_N264;
l9_5005=l9_5006;
float3 l9_5007=float3(0.0);
float3 l9_5008=l9_5001;
float3 l9_5009=l9_5003;
float3 l9_5010=l9_5005;
ssGlobals l9_5011=l9_4740;
tempGlobals=l9_5011;
float3 l9_5012=float3(0.0);
N235_gridSize=l9_5008;
N235_gridDim=l9_5009;
N235_Offset=l9_5010;
int l9_5013=int((N235_gridDim.x*N235_gridDim.y)*N235_gridDim.z);
int l9_5014=0;
l9_5014=ssInstanceID;
int l9_5015=l9_5014;
int l9_5016=l9_5015;
int l9_5017=l9_5016%l9_5013;
int l9_5018=l9_5017;
float3 l9_5019=N235_gridDim;
float3 l9_5020=N235_gridSize;
int3 l9_5021=int3(l9_5019);
int l9_5022=l9_5021.x*l9_5021.y;
int l9_5023=l9_5018/l9_5022;
int l9_5024=l9_5018%l9_5022;
int l9_5025=l9_5024/l9_5021.x;
int l9_5026=l9_5024%l9_5021.x;
float l9_5027;
if (l9_5021.x>1)
{
l9_5027=l9_5020.x/(l9_5019.x-1.0);
}
else
{
l9_5027=0.0;
}
float l9_5028=l9_5027;
float l9_5029;
if (l9_5021.y>1)
{
l9_5029=l9_5020.y/(l9_5019.y-1.0);
}
else
{
l9_5029=0.0;
}
float l9_5030=l9_5029;
float l9_5031;
if (l9_5021.z>1)
{
l9_5031=l9_5020.z/(l9_5019.z-1.0);
}
else
{
l9_5031=0.0;
}
float3 l9_5032=float3(l9_5028,l9_5030,l9_5031);
float3 l9_5033=(l9_5019-float3(1.0))*l9_5032;
float3 l9_5034=(-l9_5033)*0.5;
float3 l9_5035=(float3(float(l9_5026),float(l9_5025),float(l9_5023))*l9_5032)+l9_5034;
N235_Result=l9_5035+N235_Offset;
l9_5012=N235_Result;
l9_5007=l9_5012;
l9_4735=l9_5007;
l9_4741=l9_4735;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==5)
{
float l9_5036=0.0;
float l9_5037=(*sc_set0.UserUniforms).Tweak_N232;
l9_5036=l9_5037;
float l9_5038=0.0;
float l9_5039=(*sc_set0.UserUniforms).Tweak_N233;
l9_5038=l9_5039;
float l9_5040=0.0;
float l9_5041=(*sc_set0.UserUniforms).Tweak_N231;
l9_5040=l9_5041;
float l9_5042=0.0;
float l9_5043=(*sc_set0.UserUniforms).Tweak_N304;
l9_5042=l9_5043;
float l9_5044=0.0;
float l9_5045=(*sc_set0.UserUniforms).Tweak_N229;
l9_5044=l9_5045;
float l9_5046=0.0;
float l9_5047=float((*sc_set0.UserUniforms).Tweak_N280!=0);
l9_5046=l9_5047;
float l9_5048=0.0;
float l9_5049=(*sc_set0.UserUniforms).Tweak_N285;
l9_5048=l9_5049;
float l9_5050=0.0;
float l9_5051=(*sc_set0.UserUniforms).Tweak_N245;
l9_5050=l9_5051;
float l9_5052=0.0;
float l9_5053=(*sc_set0.UserUniforms).Tweak_N230;
l9_5052=l9_5053;
float l9_5054=0.0;
float l9_5055=float((*sc_set0.UserUniforms).animated!=0);
l9_5054=l9_5055;
float l9_5056=0.0;
float l9_5057=(*sc_set0.UserUniforms).Tweak_N279;
l9_5056=l9_5057;
float l9_5058=0.0;
float l9_5059=float((*sc_set0.UserUniforms).Tweak_N303!=0);
l9_5058=l9_5059;
float2 l9_5060=float2(0.0);
float2 l9_5061=(*sc_set0.UserUniforms).Tweak_N336;
l9_5060=l9_5061;
float l9_5062=0.0;
float l9_5063=(*sc_set0.UserUniforms).timeGlobal;
l9_5062=l9_5063;
float l9_5064=0.0;
float l9_5065=(*sc_set0.UserUniforms).externalTimeInput;
l9_5064=l9_5065;
float l9_5066=0.0;
float l9_5067=(*sc_set0.UserUniforms).externalSeed;
l9_5066=l9_5067;
float l9_5068=0.0;
float l9_5069=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_5068=l9_5069;
float2 l9_5070=float2(0.0);
float2 l9_5071=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_5070=l9_5071;
float l9_5072=0.0;
float l9_5073=(*sc_set0.UserUniforms).spawnDuration;
l9_5072=l9_5073;
float l9_5074=0.0;
float l9_5075;
if ((int(TRAILS_tmp)!=0))
{
l9_5075=1.001;
}
else
{
l9_5075=0.001;
}
l9_5075-=0.001;
l9_5074=l9_5075;
float l9_5076=0.0;
float l9_5077=(*sc_set0.UserUniforms).trailLength;
l9_5076=l9_5077;
float4 l9_5078=float4(0.0);
l9_5078=l9_4740.VertexColor;
float l9_5079=0.0;
l9_5079=l9_5078.x;
float l9_5080=0.0;
float l9_5081=l9_5074;
bool l9_5082=(l9_5081*1.0)!=0.0;
bool l9_5083;
if (l9_5082)
{
l9_5083=(l9_5079*1.0)!=0.0;
}
else
{
l9_5083=l9_5082;
}
l9_5080=float(l9_5083);
float4 l9_5084=float4(0.0);
float l9_5085=l9_5062;
float l9_5086=l9_5064;
float l9_5087=l9_5066;
float l9_5088=l9_5068;
float2 l9_5089=l9_5070;
float l9_5090=l9_5072;
float l9_5091=l9_5076;
float l9_5092=l9_5080;
ssGlobals l9_5093=l9_4740;
tempGlobals=l9_5093;
float4 l9_5094=float4(0.0);
N181_timeGlobal=l9_5085;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_5086;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_5087;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_5088;
N181_lifeTimeMinMax=l9_5089;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_5090;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_5091;
N181_isTrailCondition=l9_5092!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_5095=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_5096=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_5095=length(float4(1.0)*l9_5096);
}
N181_globalSeed=N181_externalSeed+l9_5095;
int l9_5097=0;
l9_5097=ssInstanceID;
int l9_5098=l9_5097;
float l9_5099=float(l9_5098);
int l9_5100=int(l9_5099);
int l9_5101=l9_5100^(l9_5100*15299);
int l9_5102=l9_5101;
int l9_5103=l9_5102;
int l9_5104=((l9_5103*((l9_5103*1471343)+101146501))+1559861749)&2147483647;
int l9_5105=l9_5104;
int l9_5106=l9_5102*1399;
int l9_5107=((l9_5106*((l9_5106*1471343)+101146501))+1559861749)&2147483647;
int l9_5108=l9_5107;
int l9_5109=l9_5102*7177;
int l9_5110=((l9_5109*((l9_5109*1471343)+101146501))+1559861749)&2147483647;
int l9_5111=l9_5110;
int l9_5112=l9_5105;
float l9_5113=float(l9_5112)*4.6566129e-10;
int l9_5114=l9_5108;
float l9_5115=float(l9_5114)*4.6566129e-10;
int l9_5116=l9_5111;
float l9_5117=float(l9_5116)*4.6566129e-10;
float3 l9_5118=float3(l9_5113,l9_5115,l9_5117);
float3 l9_5119=l9_5118;
N181_particleSeed=l9_5119;
float l9_5120=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_5121;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_5121=N181_lifeTimeMinMax;
}
else
{
l9_5121=float2(N181_lifeTimeConstant);
}
float2 l9_5122=l9_5121;
float l9_5123=fast::max(l9_5122.x,0.0099999998);
float l9_5124=fast::max(l9_5122.y,0.0099999998);
float l9_5125=tempGlobals.gTimeElapsed;
float l9_5126=l9_5125;
if (N181_ENABLE_EXTERNALTIME)
{
l9_5126=N181_externalTime;
}
float l9_5127=l9_5126;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_5127=N181_timeGlobal*l9_5126;
}
else
{
float l9_5128=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_5128=N181_trailLength;
}
}
float l9_5129=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_5130=0.0;
float l9_5131;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_5131=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_5131=0.0;
}
l9_5130=l9_5131;
float l9_5132=l9_5130;
int l9_5133=0;
l9_5133=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_5134=l9_5133;
l9_5129=fast::max(l9_5132*(1.0-(1.0/float(l9_5134))),0.0);
}
else
{
l9_5129=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_5135=fract(((l9_5126*N181_timeGlobal)*(1.0/(l9_5122.y+l9_5128)))+l9_5129);
l9_5127=l9_5135*(l9_5122.y+l9_5128);
}
float l9_5136=mix(l9_5127/l9_5123,l9_5127/l9_5124,l9_5120);
float l9_5137=fast::clamp(l9_5136,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_5127,l9_5137);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_5138=tempGlobals.Surface_UVCoord0;
l9_5127-=(l9_5138.y*N181_trailLength);
l9_5136=mix(l9_5127/l9_5123,l9_5127/l9_5124,l9_5120);
l9_5137=fast::clamp(l9_5136,0.0,1.0);
}
}
float l9_5139=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_5126-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_5139=1.0;
}
}
}
float l9_5140=l9_5136+l9_5139;
N181_particleAlive=1.0;
if ((l9_5140>0.99989998)||(l9_5127<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_5126*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_5122,l9_5127,l9_5137);
l9_5094=N181_timeValues;
l9_5084=l9_5094;
float3 l9_5141=float3(0.0);
float l9_5142=l9_5036;
float l9_5143=l9_5038;
float l9_5144=l9_5040;
float l9_5145=l9_5042;
float l9_5146=l9_5044;
float l9_5147=l9_5046;
float l9_5148=l9_5048;
float l9_5149=l9_5050;
float l9_5150=l9_5052;
float l9_5151=l9_5054;
float l9_5152=l9_5056;
float l9_5153=l9_5058;
float2 l9_5154=l9_5060;
float4 l9_5155=l9_5084;
ssGlobals l9_5156=l9_4740;
tempGlobals=l9_5156;
float3 l9_5157=float3(0.0);
N155_startRad=l9_5142;
N155_endRad=l9_5143;
N155_heightPerTurn=l9_5144;
N155_alignHeight=int(l9_5145);
N155_thicknessRad=l9_5146;
N155_curvThickEnable=l9_5147!=0.0;
N155_VolumeFill=l9_5148;
N155_OrientationAxis=int(l9_5149);
N155_nTurns=l9_5150;
N155_animPath=l9_5151!=0.0;
N155_Speed=l9_5152;
N155_randSpeed=l9_5153!=0.0;
N155_SpeedMinMax=l9_5154;
N155_timeValuesIn=l9_5155;
float l9_5158=3.1415927;
float l9_5159=l9_5158*2.0;
float l9_5160=(N155_heightPerTurn/N155_nTurns)/l9_5159;
float l9_5161=N155_startRad*0.5;
float l9_5162=N155_endRad*0.5;
float l9_5163=N155_thicknessRad*0.5;
float l9_5164=0.0;
float l9_5165;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_5165=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_5165=0.0;
}
l9_5164=l9_5165;
float l9_5166=l9_5164;
float l9_5167=l9_5166;
int l9_5168=0;
l9_5168=ssInstanceID;
int l9_5169=l9_5168;
float l9_5170=float(l9_5169);
float l9_5171=l9_5170;
int l9_5172=int(l9_5171);
int l9_5173=l9_5172^(l9_5172*15299);
int l9_5174=l9_5173;
int l9_5175=l9_5174;
int l9_5176=((l9_5175*((l9_5175*1471343)+101146501))+1559861749)&2147483647;
int l9_5177=l9_5176;
float l9_5178=float(l9_5177)*4.6566129e-10;
float l9_5179=l9_5178;
float l9_5180=l9_5179;
float l9_5181=l9_5180;
if (N155_animPath)
{
if (N155_randSpeed)
{
l9_5167=mod(l9_5167+(N155_timeValuesIn.z*mix(N155_SpeedMinMax.x,N155_SpeedMinMax.y,l9_5181)),1.1);
}
else
{
l9_5167=mod(l9_5167+(N155_timeValuesIn.z*N155_Speed),1.1);
}
}
float l9_5182=(l9_5159*N155_nTurns)*l9_5167;
float l9_5183=mix(l9_5161,l9_5162,l9_5167);
float l9_5184=l9_5183*cos(l9_5182);
float l9_5185=l9_5183*sin(l9_5182);
float l9_5186=l9_5160*l9_5182;
if (N155_alignHeight==1)
{
l9_5186-=(((l9_5160*N155_nTurns)*l9_5159)*0.5);
}
else
{
if (N155_alignHeight==2)
{
l9_5186-=((l9_5160*N155_nTurns)*l9_5159);
}
}
float3 l9_5187=normalize(float3(-sin(l9_5182),cos(l9_5182),l9_5160/l9_5159));
float3 l9_5188=normalize(cross(l9_5187,float3(0.0,0.0,1.0)));
float3 l9_5189=cross(l9_5187,l9_5188);
float l9_5190=l9_5167;
float l9_5191=0.0;
float l9_5192=(*sc_set0.UserUniforms).Tweak_N157_curveData.x;
float l9_5193=(*sc_set0.UserUniforms).Tweak_N157_curveData.y;
float l9_5194=(*sc_set0.UserUniforms).Tweak_N157_curveData.z;
float l9_5195=(l9_5190-l9_5193)/(l9_5194-l9_5193);
float2 l9_5196=float2(l9_5195,l9_5192);
l9_5196=fast::clamp(l9_5196,float2(0.0),float2(1.0));
int l9_5197;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_5198=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_5198=0;
}
else
{
l9_5198=gl_InstanceIndex%2;
}
int l9_5199=l9_5198;
l9_5197=1-l9_5199;
}
else
{
int l9_5200=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_5200=0;
}
else
{
l9_5200=gl_InstanceIndex%2;
}
int l9_5201=l9_5200;
l9_5197=l9_5201;
}
int l9_5202=l9_5197;
int l9_5203=sc_CurveAtlasLayout_tmp;
int l9_5204=l9_5202;
float2 l9_5205=l9_5196;
bool l9_5206=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_5207=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_5208=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_5209=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_5210=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_5211=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_5212=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_5213=0.0;
bool l9_5214=l9_5211&&(!l9_5209);
float l9_5215=1.0;
float l9_5216=l9_5205.x;
int l9_5217=l9_5208.x;
if (l9_5217==1)
{
l9_5216=fract(l9_5216);
}
else
{
if (l9_5217==2)
{
float l9_5218=fract(l9_5216);
float l9_5219=l9_5216-l9_5218;
float l9_5220=step(0.25,fract(l9_5219*0.5));
l9_5216=mix(l9_5218,1.0-l9_5218,fast::clamp(l9_5220,0.0,1.0));
}
}
l9_5205.x=l9_5216;
float l9_5221=l9_5205.y;
int l9_5222=l9_5208.y;
if (l9_5222==1)
{
l9_5221=fract(l9_5221);
}
else
{
if (l9_5222==2)
{
float l9_5223=fract(l9_5221);
float l9_5224=l9_5221-l9_5223;
float l9_5225=step(0.25,fract(l9_5224*0.5));
l9_5221=mix(l9_5223,1.0-l9_5223,fast::clamp(l9_5225,0.0,1.0));
}
}
l9_5205.y=l9_5221;
if (l9_5209)
{
bool l9_5226=l9_5211;
bool l9_5227;
if (l9_5226)
{
l9_5227=l9_5208.x==3;
}
else
{
l9_5227=l9_5226;
}
float l9_5228=l9_5205.x;
float l9_5229=l9_5210.x;
float l9_5230=l9_5210.z;
bool l9_5231=l9_5227;
float l9_5232=l9_5215;
float l9_5233=fast::clamp(l9_5228,l9_5229,l9_5230);
float l9_5234=step(abs(l9_5228-l9_5233),9.9999997e-06);
l9_5232*=(l9_5234+((1.0-float(l9_5231))*(1.0-l9_5234)));
l9_5228=l9_5233;
l9_5205.x=l9_5228;
l9_5215=l9_5232;
bool l9_5235=l9_5211;
bool l9_5236;
if (l9_5235)
{
l9_5236=l9_5208.y==3;
}
else
{
l9_5236=l9_5235;
}
float l9_5237=l9_5205.y;
float l9_5238=l9_5210.y;
float l9_5239=l9_5210.w;
bool l9_5240=l9_5236;
float l9_5241=l9_5215;
float l9_5242=fast::clamp(l9_5237,l9_5238,l9_5239);
float l9_5243=step(abs(l9_5237-l9_5242),9.9999997e-06);
l9_5241*=(l9_5243+((1.0-float(l9_5240))*(1.0-l9_5243)));
l9_5237=l9_5242;
l9_5205.y=l9_5237;
l9_5215=l9_5241;
}
float2 l9_5244=l9_5205;
bool l9_5245=l9_5206;
float3x3 l9_5246=l9_5207;
if (l9_5245)
{
l9_5244=float2((l9_5246*float3(l9_5244,1.0)).xy);
}
float2 l9_5247=l9_5244;
l9_5205=l9_5247;
float l9_5248=l9_5205.x;
int l9_5249=l9_5208.x;
bool l9_5250=l9_5214;
float l9_5251=l9_5215;
if ((l9_5249==0)||(l9_5249==3))
{
float l9_5252=l9_5248;
float l9_5253=0.0;
float l9_5254=1.0;
bool l9_5255=l9_5250;
float l9_5256=l9_5251;
float l9_5257=fast::clamp(l9_5252,l9_5253,l9_5254);
float l9_5258=step(abs(l9_5252-l9_5257),9.9999997e-06);
l9_5256*=(l9_5258+((1.0-float(l9_5255))*(1.0-l9_5258)));
l9_5252=l9_5257;
l9_5248=l9_5252;
l9_5251=l9_5256;
}
l9_5205.x=l9_5248;
l9_5215=l9_5251;
float l9_5259=l9_5205.y;
int l9_5260=l9_5208.y;
bool l9_5261=l9_5214;
float l9_5262=l9_5215;
if ((l9_5260==0)||(l9_5260==3))
{
float l9_5263=l9_5259;
float l9_5264=0.0;
float l9_5265=1.0;
bool l9_5266=l9_5261;
float l9_5267=l9_5262;
float l9_5268=fast::clamp(l9_5263,l9_5264,l9_5265);
float l9_5269=step(abs(l9_5263-l9_5268),9.9999997e-06);
l9_5267*=(l9_5269+((1.0-float(l9_5266))*(1.0-l9_5269)));
l9_5263=l9_5268;
l9_5259=l9_5263;
l9_5262=l9_5267;
}
l9_5205.y=l9_5259;
l9_5215=l9_5262;
float2 l9_5270=l9_5205;
int l9_5271=l9_5203;
int l9_5272=l9_5204;
float l9_5273=l9_5213;
float2 l9_5274=l9_5270;
int l9_5275=l9_5271;
int l9_5276=l9_5272;
float3 l9_5277=float3(0.0);
if (l9_5275==0)
{
l9_5277=float3(l9_5274,0.0);
}
else
{
if (l9_5275==1)
{
l9_5277=float3(l9_5274.x,(l9_5274.y*0.5)+(0.5-(float(l9_5276)*0.5)),0.0);
}
else
{
l9_5277=float3(l9_5274,float(l9_5276));
}
}
float3 l9_5278=l9_5277;
float3 l9_5279=l9_5278;
float4 l9_5280=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_5279.xy,level(l9_5273));
float4 l9_5281=l9_5280;
if (l9_5211)
{
l9_5281=mix(l9_5212,l9_5281,float4(l9_5215));
}
float4 l9_5282=l9_5281;
l9_5191=l9_5282.x;
float l9_5283=l9_5191;
float l9_5284=l9_5283;
float l9_5285;
if (N155_curvThickEnable)
{
l9_5285=l9_5163*l9_5284;
}
else
{
l9_5285=l9_5163;
}
float l9_5286=l9_5285;
float3 l9_5287=mix(float3(l9_5184,l9_5185,l9_5186)+(((l9_5188*cos(l9_5170))+(l9_5189*sin(l9_5170)))*l9_5286),float3(l9_5184,l9_5185,l9_5186),float3(l9_5181*N155_VolumeFill));
float3 l9_5288;
if (l9_5167>1.0)
{
l9_5288=l9_5287/float3(0.0);
}
else
{
l9_5288=l9_5287;
}
l9_5287=l9_5288;
if (N155_OrientationAxis==0)
{
l9_5287=l9_5287.zxy;
l9_5187=l9_5187.zxy;
l9_5188=l9_5188.zxy;
l9_5189=l9_5189.zxy;
}
else
{
if (N155_OrientationAxis==1)
{
l9_5287=l9_5287.xzy;
l9_5187=l9_5187.xzy;
l9_5188=l9_5188.xzy;
l9_5189=l9_5189.xzy;
}
}
tempGlobals.N155_helixDirection=l9_5187;
N155_Result=l9_5287;
l9_5157=N155_Result;
l9_5141=l9_5157;
l9_4736=l9_5141;
l9_4741=l9_4736;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==6)
{
float l9_5289=0.0;
float l9_5290=(*sc_set0.UserUniforms).Tweak_N298;
l9_5289=l9_5290;
float3 l9_5291=float3(0.0);
float3 l9_5292=(*sc_set0.UserUniforms).Tweak_N330;
l9_5291=l9_5292;
float l9_5293=0.0;
float l9_5294=float((*sc_set0.UserUniforms).Tweak_N308!=0);
l9_5293=l9_5294;
float l9_5295=0.0;
float l9_5296=(*sc_set0.UserUniforms).timeGlobal;
l9_5295=l9_5296;
float l9_5297=0.0;
float l9_5298=(*sc_set0.UserUniforms).externalTimeInput;
l9_5297=l9_5298;
float l9_5299=0.0;
float l9_5300=(*sc_set0.UserUniforms).externalSeed;
l9_5299=l9_5300;
float l9_5301=0.0;
float l9_5302=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_5301=l9_5302;
float2 l9_5303=float2(0.0);
float2 l9_5304=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_5303=l9_5304;
float l9_5305=0.0;
float l9_5306=(*sc_set0.UserUniforms).spawnDuration;
l9_5305=l9_5306;
float l9_5307=0.0;
float l9_5308;
if ((int(TRAILS_tmp)!=0))
{
l9_5308=1.001;
}
else
{
l9_5308=0.001;
}
l9_5308-=0.001;
l9_5307=l9_5308;
float l9_5309=0.0;
float l9_5310=(*sc_set0.UserUniforms).trailLength;
l9_5309=l9_5310;
float4 l9_5311=float4(0.0);
l9_5311=l9_4740.VertexColor;
float l9_5312=0.0;
l9_5312=l9_5311.x;
float l9_5313=0.0;
float l9_5314=l9_5307;
bool l9_5315=(l9_5314*1.0)!=0.0;
bool l9_5316;
if (l9_5315)
{
l9_5316=(l9_5312*1.0)!=0.0;
}
else
{
l9_5316=l9_5315;
}
l9_5313=float(l9_5316);
float4 l9_5317=float4(0.0);
float l9_5318=l9_5295;
float l9_5319=l9_5297;
float l9_5320=l9_5299;
float l9_5321=l9_5301;
float2 l9_5322=l9_5303;
float l9_5323=l9_5305;
float l9_5324=l9_5309;
float l9_5325=l9_5313;
ssGlobals l9_5326=l9_4740;
tempGlobals=l9_5326;
float4 l9_5327=float4(0.0);
N181_timeGlobal=l9_5318;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_5319;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_5320;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_5321;
N181_lifeTimeMinMax=l9_5322;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_5323;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_5324;
N181_isTrailCondition=l9_5325!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_5328=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_5329=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_5328=length(float4(1.0)*l9_5329);
}
N181_globalSeed=N181_externalSeed+l9_5328;
int l9_5330=0;
l9_5330=ssInstanceID;
int l9_5331=l9_5330;
float l9_5332=float(l9_5331);
int l9_5333=int(l9_5332);
int l9_5334=l9_5333^(l9_5333*15299);
int l9_5335=l9_5334;
int l9_5336=l9_5335;
int l9_5337=((l9_5336*((l9_5336*1471343)+101146501))+1559861749)&2147483647;
int l9_5338=l9_5337;
int l9_5339=l9_5335*1399;
int l9_5340=((l9_5339*((l9_5339*1471343)+101146501))+1559861749)&2147483647;
int l9_5341=l9_5340;
int l9_5342=l9_5335*7177;
int l9_5343=((l9_5342*((l9_5342*1471343)+101146501))+1559861749)&2147483647;
int l9_5344=l9_5343;
int l9_5345=l9_5338;
float l9_5346=float(l9_5345)*4.6566129e-10;
int l9_5347=l9_5341;
float l9_5348=float(l9_5347)*4.6566129e-10;
int l9_5349=l9_5344;
float l9_5350=float(l9_5349)*4.6566129e-10;
float3 l9_5351=float3(l9_5346,l9_5348,l9_5350);
float3 l9_5352=l9_5351;
N181_particleSeed=l9_5352;
float l9_5353=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_5354;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_5354=N181_lifeTimeMinMax;
}
else
{
l9_5354=float2(N181_lifeTimeConstant);
}
float2 l9_5355=l9_5354;
float l9_5356=fast::max(l9_5355.x,0.0099999998);
float l9_5357=fast::max(l9_5355.y,0.0099999998);
float l9_5358=tempGlobals.gTimeElapsed;
float l9_5359=l9_5358;
if (N181_ENABLE_EXTERNALTIME)
{
l9_5359=N181_externalTime;
}
float l9_5360=l9_5359;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_5360=N181_timeGlobal*l9_5359;
}
else
{
float l9_5361=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_5361=N181_trailLength;
}
}
float l9_5362=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_5363=0.0;
float l9_5364;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_5364=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_5364=0.0;
}
l9_5363=l9_5364;
float l9_5365=l9_5363;
int l9_5366=0;
l9_5366=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_5367=l9_5366;
l9_5362=fast::max(l9_5365*(1.0-(1.0/float(l9_5367))),0.0);
}
else
{
l9_5362=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_5368=fract(((l9_5359*N181_timeGlobal)*(1.0/(l9_5355.y+l9_5361)))+l9_5362);
l9_5360=l9_5368*(l9_5355.y+l9_5361);
}
float l9_5369=mix(l9_5360/l9_5356,l9_5360/l9_5357,l9_5353);
float l9_5370=fast::clamp(l9_5369,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_5360,l9_5370);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_5371=tempGlobals.Surface_UVCoord0;
l9_5360-=(l9_5371.y*N181_trailLength);
l9_5369=mix(l9_5360/l9_5356,l9_5360/l9_5357,l9_5353);
l9_5370=fast::clamp(l9_5369,0.0,1.0);
}
}
float l9_5372=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_5359-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_5372=1.0;
}
}
}
float l9_5373=l9_5369+l9_5372;
N181_particleAlive=1.0;
if ((l9_5373>0.99989998)||(l9_5360<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_5359*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_5355,l9_5360,l9_5370);
l9_5327=N181_timeValues;
l9_5317=l9_5327;
float l9_5374=0.0;
float l9_5375=(*sc_set0.UserUniforms).Tweak_N294;
l9_5374=l9_5375;
float l9_5376=0.0;
float l9_5377=float((*sc_set0.UserUniforms).Tweak_N339!=0);
l9_5376=l9_5377;
float2 l9_5378=float2(0.0);
float2 l9_5379=(*sc_set0.UserUniforms).Tweak_N342;
l9_5378=l9_5379;
float l9_5380=0.0;
float l9_5381=(*sc_set0.UserUniforms).Tweak_N301;
l9_5380=l9_5381;
float l9_5382=0.0;
float l9_5383=float((*sc_set0.UserUniforms).Tweak_N274!=0);
l9_5382=l9_5383;
float l9_5384=0.0;
float l9_5385=(*sc_set0.UserUniforms).Tweak_N302;
l9_5384=l9_5385;
float l9_5386=0.0;
float l9_5387=(*sc_set0.UserUniforms).Tweak_N318;
l9_5386=l9_5387;
float3 l9_5388=float3(0.0);
float l9_5389=l9_5289;
float3 l9_5390=l9_5291;
float l9_5391=l9_5293;
float4 l9_5392=l9_5317;
float l9_5393=l9_5374;
float l9_5394=l9_5376;
float2 l9_5395=l9_5378;
float l9_5396=l9_5380;
float l9_5397=l9_5382;
float l9_5398=l9_5384;
float l9_5399=l9_5386;
ssGlobals l9_5400=l9_4740;
tempGlobals=l9_5400;
float3 l9_5401=float3(0.0);
N319_Scale=l9_5389;
N319_scaleXYZ=l9_5390;
N319_animPath=l9_5391!=0.0;
N319_timeValuesIn=l9_5392;
N319_Speed=l9_5393;
N319_randSpeed=l9_5394!=0.0;
N319_SpeedMinMax=l9_5395;
N319_thicknessRad=l9_5396;
N319_curvThickEnable=l9_5397!=0.0;
N319_VolumeFill=l9_5398;
N319_res=l9_5399;
float3 l9_5402=float3(0.0);
float3 l9_5403=float3(0.0);
float3 l9_5404=float3(0.0);
float3 l9_5405=float3(0.0);
float l9_5406=0.0;
float l9_5407;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_5407=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_5407=0.0;
}
l9_5406=l9_5407;
float l9_5408=l9_5406;
float l9_5409=l9_5408;
float l9_5410=l9_5409;
int l9_5411=0;
l9_5411=ssInstanceID;
int l9_5412=l9_5411;
float l9_5413=float(l9_5412);
float l9_5414=l9_5413;
int l9_5415=int(l9_5414);
int l9_5416=l9_5415^(l9_5415*15299);
int l9_5417=l9_5416;
int l9_5418=l9_5417;
int l9_5419=((l9_5418*((l9_5418*1471343)+101146501))+1559861749)&2147483647;
int l9_5420=l9_5419;
float l9_5421=float(l9_5420)*4.6566129e-10;
float l9_5422=l9_5421;
float l9_5423=l9_5422;
float l9_5424=l9_5423;
if (N319_animPath)
{
if (N319_randSpeed)
{
l9_5410=mod(l9_5409+(N319_timeValuesIn.z*mix(N319_SpeedMinMax.x,N319_SpeedMinMax.y,l9_5424)),1.1);
}
else
{
l9_5410=mod(l9_5409+(N319_timeValuesIn.z*N319_Speed),1.1);
}
}
float l9_5425=l9_5410;
float3 l9_5426=l9_5402;
float3 l9_5427=l9_5403;
float3 l9_5428=l9_5404;
float3 l9_5429=l9_5405;
int l9_5430=5;
float l9_5431=1.0/float(l9_5430);
int l9_5432;
int l9_5433;
int l9_5434;
int l9_5435;
int l9_5436;
int l9_5437;
int l9_5438=0;
for (int snapLoopIndex=0; snapLoopIndex==0; snapLoopIndex+=0)
{
if (l9_5438<l9_5430)
{
float l9_5439=float(l9_5438)*l9_5431;
float l9_5440=0.0;
float l9_5441=(*sc_set0.UserUniforms).Tweak_N293_curveData.x;
float l9_5442=(*sc_set0.UserUniforms).Tweak_N293_curveData.y;
float l9_5443=(*sc_set0.UserUniforms).Tweak_N293_curveData.z;
float l9_5444=(l9_5439-l9_5442)/(l9_5443-l9_5442);
float2 l9_5445=float2(l9_5444,l9_5441);
l9_5445=fast::clamp(l9_5445,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_5446=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_5446=0;
}
else
{
l9_5446=gl_InstanceIndex%2;
}
int l9_5447=l9_5446;
l9_5432=1-l9_5447;
}
else
{
int l9_5448=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_5448=0;
}
else
{
l9_5448=gl_InstanceIndex%2;
}
int l9_5449=l9_5448;
l9_5432=l9_5449;
}
int l9_5450=l9_5432;
int l9_5451=sc_CurveAtlasLayout_tmp;
int l9_5452=l9_5450;
float2 l9_5453=l9_5445;
bool l9_5454=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_5455=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_5456=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_5457=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_5458=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_5459=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_5460=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_5461=0.0;
bool l9_5462=l9_5459&&(!l9_5457);
float l9_5463=1.0;
float l9_5464=l9_5453.x;
int l9_5465=l9_5456.x;
if (l9_5465==1)
{
l9_5464=fract(l9_5464);
}
else
{
if (l9_5465==2)
{
float l9_5466=fract(l9_5464);
float l9_5467=l9_5464-l9_5466;
float l9_5468=step(0.25,fract(l9_5467*0.5));
l9_5464=mix(l9_5466,1.0-l9_5466,fast::clamp(l9_5468,0.0,1.0));
}
}
l9_5453.x=l9_5464;
float l9_5469=l9_5453.y;
int l9_5470=l9_5456.y;
if (l9_5470==1)
{
l9_5469=fract(l9_5469);
}
else
{
if (l9_5470==2)
{
float l9_5471=fract(l9_5469);
float l9_5472=l9_5469-l9_5471;
float l9_5473=step(0.25,fract(l9_5472*0.5));
l9_5469=mix(l9_5471,1.0-l9_5471,fast::clamp(l9_5473,0.0,1.0));
}
}
l9_5453.y=l9_5469;
if (l9_5457)
{
bool l9_5474=l9_5459;
bool l9_5475;
if (l9_5474)
{
l9_5475=l9_5456.x==3;
}
else
{
l9_5475=l9_5474;
}
float l9_5476=l9_5453.x;
float l9_5477=l9_5458.x;
float l9_5478=l9_5458.z;
bool l9_5479=l9_5475;
float l9_5480=l9_5463;
float l9_5481=fast::clamp(l9_5476,l9_5477,l9_5478);
float l9_5482=step(abs(l9_5476-l9_5481),9.9999997e-06);
l9_5480*=(l9_5482+((1.0-float(l9_5479))*(1.0-l9_5482)));
l9_5476=l9_5481;
l9_5453.x=l9_5476;
l9_5463=l9_5480;
bool l9_5483=l9_5459;
bool l9_5484;
if (l9_5483)
{
l9_5484=l9_5456.y==3;
}
else
{
l9_5484=l9_5483;
}
float l9_5485=l9_5453.y;
float l9_5486=l9_5458.y;
float l9_5487=l9_5458.w;
bool l9_5488=l9_5484;
float l9_5489=l9_5463;
float l9_5490=fast::clamp(l9_5485,l9_5486,l9_5487);
float l9_5491=step(abs(l9_5485-l9_5490),9.9999997e-06);
l9_5489*=(l9_5491+((1.0-float(l9_5488))*(1.0-l9_5491)));
l9_5485=l9_5490;
l9_5453.y=l9_5485;
l9_5463=l9_5489;
}
float2 l9_5492=l9_5453;
bool l9_5493=l9_5454;
float3x3 l9_5494=l9_5455;
if (l9_5493)
{
l9_5492=float2((l9_5494*float3(l9_5492,1.0)).xy);
}
float2 l9_5495=l9_5492;
l9_5453=l9_5495;
float l9_5496=l9_5453.x;
int l9_5497=l9_5456.x;
bool l9_5498=l9_5462;
float l9_5499=l9_5463;
if ((l9_5497==0)||(l9_5497==3))
{
float l9_5500=l9_5496;
float l9_5501=0.0;
float l9_5502=1.0;
bool l9_5503=l9_5498;
float l9_5504=l9_5499;
float l9_5505=fast::clamp(l9_5500,l9_5501,l9_5502);
float l9_5506=step(abs(l9_5500-l9_5505),9.9999997e-06);
l9_5504*=(l9_5506+((1.0-float(l9_5503))*(1.0-l9_5506)));
l9_5500=l9_5505;
l9_5496=l9_5500;
l9_5499=l9_5504;
}
l9_5453.x=l9_5496;
l9_5463=l9_5499;
float l9_5507=l9_5453.y;
int l9_5508=l9_5456.y;
bool l9_5509=l9_5462;
float l9_5510=l9_5463;
if ((l9_5508==0)||(l9_5508==3))
{
float l9_5511=l9_5507;
float l9_5512=0.0;
float l9_5513=1.0;
bool l9_5514=l9_5509;
float l9_5515=l9_5510;
float l9_5516=fast::clamp(l9_5511,l9_5512,l9_5513);
float l9_5517=step(abs(l9_5511-l9_5516),9.9999997e-06);
l9_5515*=(l9_5517+((1.0-float(l9_5514))*(1.0-l9_5517)));
l9_5511=l9_5516;
l9_5507=l9_5511;
l9_5510=l9_5515;
}
l9_5453.y=l9_5507;
l9_5463=l9_5510;
float2 l9_5518=l9_5453;
int l9_5519=l9_5451;
int l9_5520=l9_5452;
float l9_5521=l9_5461;
float2 l9_5522=l9_5518;
int l9_5523=l9_5519;
int l9_5524=l9_5520;
float3 l9_5525=float3(0.0);
if (l9_5523==0)
{
l9_5525=float3(l9_5522,0.0);
}
else
{
if (l9_5523==1)
{
l9_5525=float3(l9_5522.x,(l9_5522.y*0.5)+(0.5-(float(l9_5524)*0.5)),0.0);
}
else
{
l9_5525=float3(l9_5522,float(l9_5524));
}
}
float3 l9_5526=l9_5525;
float3 l9_5527=l9_5526;
float4 l9_5528=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_5527.xy,level(l9_5521));
float4 l9_5529=l9_5528;
if (l9_5459)
{
l9_5529=mix(l9_5460,l9_5529,float4(l9_5463));
}
float4 l9_5530=l9_5529;
l9_5440=l9_5530.x;
float l9_5531=l9_5440;
float l9_5532=l9_5531;
float l9_5533=float(l9_5438)*l9_5431;
float l9_5534=0.0;
float l9_5535=(*sc_set0.UserUniforms).Tweak_N305_curveData.x;
float l9_5536=(*sc_set0.UserUniforms).Tweak_N305_curveData.y;
float l9_5537=(*sc_set0.UserUniforms).Tweak_N305_curveData.z;
float l9_5538=(l9_5533-l9_5536)/(l9_5537-l9_5536);
float2 l9_5539=float2(l9_5538,l9_5535);
l9_5539=fast::clamp(l9_5539,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_5540=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_5540=0;
}
else
{
l9_5540=gl_InstanceIndex%2;
}
int l9_5541=l9_5540;
l9_5433=1-l9_5541;
}
else
{
int l9_5542=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_5542=0;
}
else
{
l9_5542=gl_InstanceIndex%2;
}
int l9_5543=l9_5542;
l9_5433=l9_5543;
}
int l9_5544=l9_5433;
int l9_5545=sc_CurveAtlasLayout_tmp;
int l9_5546=l9_5544;
float2 l9_5547=l9_5539;
bool l9_5548=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_5549=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_5550=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_5551=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_5552=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_5553=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_5554=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_5555=0.0;
bool l9_5556=l9_5553&&(!l9_5551);
float l9_5557=1.0;
float l9_5558=l9_5547.x;
int l9_5559=l9_5550.x;
if (l9_5559==1)
{
l9_5558=fract(l9_5558);
}
else
{
if (l9_5559==2)
{
float l9_5560=fract(l9_5558);
float l9_5561=l9_5558-l9_5560;
float l9_5562=step(0.25,fract(l9_5561*0.5));
l9_5558=mix(l9_5560,1.0-l9_5560,fast::clamp(l9_5562,0.0,1.0));
}
}
l9_5547.x=l9_5558;
float l9_5563=l9_5547.y;
int l9_5564=l9_5550.y;
if (l9_5564==1)
{
l9_5563=fract(l9_5563);
}
else
{
if (l9_5564==2)
{
float l9_5565=fract(l9_5563);
float l9_5566=l9_5563-l9_5565;
float l9_5567=step(0.25,fract(l9_5566*0.5));
l9_5563=mix(l9_5565,1.0-l9_5565,fast::clamp(l9_5567,0.0,1.0));
}
}
l9_5547.y=l9_5563;
if (l9_5551)
{
bool l9_5568=l9_5553;
bool l9_5569;
if (l9_5568)
{
l9_5569=l9_5550.x==3;
}
else
{
l9_5569=l9_5568;
}
float l9_5570=l9_5547.x;
float l9_5571=l9_5552.x;
float l9_5572=l9_5552.z;
bool l9_5573=l9_5569;
float l9_5574=l9_5557;
float l9_5575=fast::clamp(l9_5570,l9_5571,l9_5572);
float l9_5576=step(abs(l9_5570-l9_5575),9.9999997e-06);
l9_5574*=(l9_5576+((1.0-float(l9_5573))*(1.0-l9_5576)));
l9_5570=l9_5575;
l9_5547.x=l9_5570;
l9_5557=l9_5574;
bool l9_5577=l9_5553;
bool l9_5578;
if (l9_5577)
{
l9_5578=l9_5550.y==3;
}
else
{
l9_5578=l9_5577;
}
float l9_5579=l9_5547.y;
float l9_5580=l9_5552.y;
float l9_5581=l9_5552.w;
bool l9_5582=l9_5578;
float l9_5583=l9_5557;
float l9_5584=fast::clamp(l9_5579,l9_5580,l9_5581);
float l9_5585=step(abs(l9_5579-l9_5584),9.9999997e-06);
l9_5583*=(l9_5585+((1.0-float(l9_5582))*(1.0-l9_5585)));
l9_5579=l9_5584;
l9_5547.y=l9_5579;
l9_5557=l9_5583;
}
float2 l9_5586=l9_5547;
bool l9_5587=l9_5548;
float3x3 l9_5588=l9_5549;
if (l9_5587)
{
l9_5586=float2((l9_5588*float3(l9_5586,1.0)).xy);
}
float2 l9_5589=l9_5586;
l9_5547=l9_5589;
float l9_5590=l9_5547.x;
int l9_5591=l9_5550.x;
bool l9_5592=l9_5556;
float l9_5593=l9_5557;
if ((l9_5591==0)||(l9_5591==3))
{
float l9_5594=l9_5590;
float l9_5595=0.0;
float l9_5596=1.0;
bool l9_5597=l9_5592;
float l9_5598=l9_5593;
float l9_5599=fast::clamp(l9_5594,l9_5595,l9_5596);
float l9_5600=step(abs(l9_5594-l9_5599),9.9999997e-06);
l9_5598*=(l9_5600+((1.0-float(l9_5597))*(1.0-l9_5600)));
l9_5594=l9_5599;
l9_5590=l9_5594;
l9_5593=l9_5598;
}
l9_5547.x=l9_5590;
l9_5557=l9_5593;
float l9_5601=l9_5547.y;
int l9_5602=l9_5550.y;
bool l9_5603=l9_5556;
float l9_5604=l9_5557;
if ((l9_5602==0)||(l9_5602==3))
{
float l9_5605=l9_5601;
float l9_5606=0.0;
float l9_5607=1.0;
bool l9_5608=l9_5603;
float l9_5609=l9_5604;
float l9_5610=fast::clamp(l9_5605,l9_5606,l9_5607);
float l9_5611=step(abs(l9_5605-l9_5610),9.9999997e-06);
l9_5609*=(l9_5611+((1.0-float(l9_5608))*(1.0-l9_5611)));
l9_5605=l9_5610;
l9_5601=l9_5605;
l9_5604=l9_5609;
}
l9_5547.y=l9_5601;
l9_5557=l9_5604;
float2 l9_5612=l9_5547;
int l9_5613=l9_5545;
int l9_5614=l9_5546;
float l9_5615=l9_5555;
float2 l9_5616=l9_5612;
int l9_5617=l9_5613;
int l9_5618=l9_5614;
float3 l9_5619=float3(0.0);
if (l9_5617==0)
{
l9_5619=float3(l9_5616,0.0);
}
else
{
if (l9_5617==1)
{
l9_5619=float3(l9_5616.x,(l9_5616.y*0.5)+(0.5-(float(l9_5618)*0.5)),0.0);
}
else
{
l9_5619=float3(l9_5616,float(l9_5618));
}
}
float3 l9_5620=l9_5619;
float3 l9_5621=l9_5620;
float4 l9_5622=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_5621.xy,level(l9_5615));
float4 l9_5623=l9_5622;
if (l9_5553)
{
l9_5623=mix(l9_5554,l9_5623,float4(l9_5557));
}
float4 l9_5624=l9_5623;
l9_5534=l9_5624.x;
float l9_5625=l9_5534;
float l9_5626=l9_5625;
float l9_5627=float(l9_5438)*l9_5431;
float l9_5628=0.0;
float l9_5629=(*sc_set0.UserUniforms).Tweak_N297_curveData.x;
float l9_5630=(*sc_set0.UserUniforms).Tweak_N297_curveData.y;
float l9_5631=(*sc_set0.UserUniforms).Tweak_N297_curveData.z;
float l9_5632=(l9_5627-l9_5630)/(l9_5631-l9_5630);
float2 l9_5633=float2(l9_5632,l9_5629);
l9_5633=fast::clamp(l9_5633,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_5634=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_5634=0;
}
else
{
l9_5634=gl_InstanceIndex%2;
}
int l9_5635=l9_5634;
l9_5434=1-l9_5635;
}
else
{
int l9_5636=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_5636=0;
}
else
{
l9_5636=gl_InstanceIndex%2;
}
int l9_5637=l9_5636;
l9_5434=l9_5637;
}
int l9_5638=l9_5434;
int l9_5639=sc_CurveAtlasLayout_tmp;
int l9_5640=l9_5638;
float2 l9_5641=l9_5633;
bool l9_5642=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_5643=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_5644=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_5645=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_5646=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_5647=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_5648=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_5649=0.0;
bool l9_5650=l9_5647&&(!l9_5645);
float l9_5651=1.0;
float l9_5652=l9_5641.x;
int l9_5653=l9_5644.x;
if (l9_5653==1)
{
l9_5652=fract(l9_5652);
}
else
{
if (l9_5653==2)
{
float l9_5654=fract(l9_5652);
float l9_5655=l9_5652-l9_5654;
float l9_5656=step(0.25,fract(l9_5655*0.5));
l9_5652=mix(l9_5654,1.0-l9_5654,fast::clamp(l9_5656,0.0,1.0));
}
}
l9_5641.x=l9_5652;
float l9_5657=l9_5641.y;
int l9_5658=l9_5644.y;
if (l9_5658==1)
{
l9_5657=fract(l9_5657);
}
else
{
if (l9_5658==2)
{
float l9_5659=fract(l9_5657);
float l9_5660=l9_5657-l9_5659;
float l9_5661=step(0.25,fract(l9_5660*0.5));
l9_5657=mix(l9_5659,1.0-l9_5659,fast::clamp(l9_5661,0.0,1.0));
}
}
l9_5641.y=l9_5657;
if (l9_5645)
{
bool l9_5662=l9_5647;
bool l9_5663;
if (l9_5662)
{
l9_5663=l9_5644.x==3;
}
else
{
l9_5663=l9_5662;
}
float l9_5664=l9_5641.x;
float l9_5665=l9_5646.x;
float l9_5666=l9_5646.z;
bool l9_5667=l9_5663;
float l9_5668=l9_5651;
float l9_5669=fast::clamp(l9_5664,l9_5665,l9_5666);
float l9_5670=step(abs(l9_5664-l9_5669),9.9999997e-06);
l9_5668*=(l9_5670+((1.0-float(l9_5667))*(1.0-l9_5670)));
l9_5664=l9_5669;
l9_5641.x=l9_5664;
l9_5651=l9_5668;
bool l9_5671=l9_5647;
bool l9_5672;
if (l9_5671)
{
l9_5672=l9_5644.y==3;
}
else
{
l9_5672=l9_5671;
}
float l9_5673=l9_5641.y;
float l9_5674=l9_5646.y;
float l9_5675=l9_5646.w;
bool l9_5676=l9_5672;
float l9_5677=l9_5651;
float l9_5678=fast::clamp(l9_5673,l9_5674,l9_5675);
float l9_5679=step(abs(l9_5673-l9_5678),9.9999997e-06);
l9_5677*=(l9_5679+((1.0-float(l9_5676))*(1.0-l9_5679)));
l9_5673=l9_5678;
l9_5641.y=l9_5673;
l9_5651=l9_5677;
}
float2 l9_5680=l9_5641;
bool l9_5681=l9_5642;
float3x3 l9_5682=l9_5643;
if (l9_5681)
{
l9_5680=float2((l9_5682*float3(l9_5680,1.0)).xy);
}
float2 l9_5683=l9_5680;
l9_5641=l9_5683;
float l9_5684=l9_5641.x;
int l9_5685=l9_5644.x;
bool l9_5686=l9_5650;
float l9_5687=l9_5651;
if ((l9_5685==0)||(l9_5685==3))
{
float l9_5688=l9_5684;
float l9_5689=0.0;
float l9_5690=1.0;
bool l9_5691=l9_5686;
float l9_5692=l9_5687;
float l9_5693=fast::clamp(l9_5688,l9_5689,l9_5690);
float l9_5694=step(abs(l9_5688-l9_5693),9.9999997e-06);
l9_5692*=(l9_5694+((1.0-float(l9_5691))*(1.0-l9_5694)));
l9_5688=l9_5693;
l9_5684=l9_5688;
l9_5687=l9_5692;
}
l9_5641.x=l9_5684;
l9_5651=l9_5687;
float l9_5695=l9_5641.y;
int l9_5696=l9_5644.y;
bool l9_5697=l9_5650;
float l9_5698=l9_5651;
if ((l9_5696==0)||(l9_5696==3))
{
float l9_5699=l9_5695;
float l9_5700=0.0;
float l9_5701=1.0;
bool l9_5702=l9_5697;
float l9_5703=l9_5698;
float l9_5704=fast::clamp(l9_5699,l9_5700,l9_5701);
float l9_5705=step(abs(l9_5699-l9_5704),9.9999997e-06);
l9_5703*=(l9_5705+((1.0-float(l9_5702))*(1.0-l9_5705)));
l9_5699=l9_5704;
l9_5695=l9_5699;
l9_5698=l9_5703;
}
l9_5641.y=l9_5695;
l9_5651=l9_5698;
float2 l9_5706=l9_5641;
int l9_5707=l9_5639;
int l9_5708=l9_5640;
float l9_5709=l9_5649;
float2 l9_5710=l9_5706;
int l9_5711=l9_5707;
int l9_5712=l9_5708;
float3 l9_5713=float3(0.0);
if (l9_5711==0)
{
l9_5713=float3(l9_5710,0.0);
}
else
{
if (l9_5711==1)
{
l9_5713=float3(l9_5710.x,(l9_5710.y*0.5)+(0.5-(float(l9_5712)*0.5)),0.0);
}
else
{
l9_5713=float3(l9_5710,float(l9_5712));
}
}
float3 l9_5714=l9_5713;
float3 l9_5715=l9_5714;
float4 l9_5716=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_5715.xy,level(l9_5709));
float4 l9_5717=l9_5716;
if (l9_5647)
{
l9_5717=mix(l9_5648,l9_5717,float4(l9_5651));
}
float4 l9_5718=l9_5717;
l9_5628=l9_5718.x;
float l9_5719=l9_5628;
float3 l9_5720=float3(l9_5532,l9_5626,l9_5719);
float l9_5721=(float(l9_5438)*l9_5431)+N319_res;
float l9_5722=0.0;
float l9_5723=(*sc_set0.UserUniforms).Tweak_N293_curveData.x;
float l9_5724=(*sc_set0.UserUniforms).Tweak_N293_curveData.y;
float l9_5725=(*sc_set0.UserUniforms).Tweak_N293_curveData.z;
float l9_5726=(l9_5721-l9_5724)/(l9_5725-l9_5724);
float2 l9_5727=float2(l9_5726,l9_5723);
l9_5727=fast::clamp(l9_5727,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_5728=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_5728=0;
}
else
{
l9_5728=gl_InstanceIndex%2;
}
int l9_5729=l9_5728;
l9_5435=1-l9_5729;
}
else
{
int l9_5730=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_5730=0;
}
else
{
l9_5730=gl_InstanceIndex%2;
}
int l9_5731=l9_5730;
l9_5435=l9_5731;
}
int l9_5732=l9_5435;
int l9_5733=sc_CurveAtlasLayout_tmp;
int l9_5734=l9_5732;
float2 l9_5735=l9_5727;
bool l9_5736=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_5737=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_5738=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_5739=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_5740=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_5741=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_5742=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_5743=0.0;
bool l9_5744=l9_5741&&(!l9_5739);
float l9_5745=1.0;
float l9_5746=l9_5735.x;
int l9_5747=l9_5738.x;
if (l9_5747==1)
{
l9_5746=fract(l9_5746);
}
else
{
if (l9_5747==2)
{
float l9_5748=fract(l9_5746);
float l9_5749=l9_5746-l9_5748;
float l9_5750=step(0.25,fract(l9_5749*0.5));
l9_5746=mix(l9_5748,1.0-l9_5748,fast::clamp(l9_5750,0.0,1.0));
}
}
l9_5735.x=l9_5746;
float l9_5751=l9_5735.y;
int l9_5752=l9_5738.y;
if (l9_5752==1)
{
l9_5751=fract(l9_5751);
}
else
{
if (l9_5752==2)
{
float l9_5753=fract(l9_5751);
float l9_5754=l9_5751-l9_5753;
float l9_5755=step(0.25,fract(l9_5754*0.5));
l9_5751=mix(l9_5753,1.0-l9_5753,fast::clamp(l9_5755,0.0,1.0));
}
}
l9_5735.y=l9_5751;
if (l9_5739)
{
bool l9_5756=l9_5741;
bool l9_5757;
if (l9_5756)
{
l9_5757=l9_5738.x==3;
}
else
{
l9_5757=l9_5756;
}
float l9_5758=l9_5735.x;
float l9_5759=l9_5740.x;
float l9_5760=l9_5740.z;
bool l9_5761=l9_5757;
float l9_5762=l9_5745;
float l9_5763=fast::clamp(l9_5758,l9_5759,l9_5760);
float l9_5764=step(abs(l9_5758-l9_5763),9.9999997e-06);
l9_5762*=(l9_5764+((1.0-float(l9_5761))*(1.0-l9_5764)));
l9_5758=l9_5763;
l9_5735.x=l9_5758;
l9_5745=l9_5762;
bool l9_5765=l9_5741;
bool l9_5766;
if (l9_5765)
{
l9_5766=l9_5738.y==3;
}
else
{
l9_5766=l9_5765;
}
float l9_5767=l9_5735.y;
float l9_5768=l9_5740.y;
float l9_5769=l9_5740.w;
bool l9_5770=l9_5766;
float l9_5771=l9_5745;
float l9_5772=fast::clamp(l9_5767,l9_5768,l9_5769);
float l9_5773=step(abs(l9_5767-l9_5772),9.9999997e-06);
l9_5771*=(l9_5773+((1.0-float(l9_5770))*(1.0-l9_5773)));
l9_5767=l9_5772;
l9_5735.y=l9_5767;
l9_5745=l9_5771;
}
float2 l9_5774=l9_5735;
bool l9_5775=l9_5736;
float3x3 l9_5776=l9_5737;
if (l9_5775)
{
l9_5774=float2((l9_5776*float3(l9_5774,1.0)).xy);
}
float2 l9_5777=l9_5774;
l9_5735=l9_5777;
float l9_5778=l9_5735.x;
int l9_5779=l9_5738.x;
bool l9_5780=l9_5744;
float l9_5781=l9_5745;
if ((l9_5779==0)||(l9_5779==3))
{
float l9_5782=l9_5778;
float l9_5783=0.0;
float l9_5784=1.0;
bool l9_5785=l9_5780;
float l9_5786=l9_5781;
float l9_5787=fast::clamp(l9_5782,l9_5783,l9_5784);
float l9_5788=step(abs(l9_5782-l9_5787),9.9999997e-06);
l9_5786*=(l9_5788+((1.0-float(l9_5785))*(1.0-l9_5788)));
l9_5782=l9_5787;
l9_5778=l9_5782;
l9_5781=l9_5786;
}
l9_5735.x=l9_5778;
l9_5745=l9_5781;
float l9_5789=l9_5735.y;
int l9_5790=l9_5738.y;
bool l9_5791=l9_5744;
float l9_5792=l9_5745;
if ((l9_5790==0)||(l9_5790==3))
{
float l9_5793=l9_5789;
float l9_5794=0.0;
float l9_5795=1.0;
bool l9_5796=l9_5791;
float l9_5797=l9_5792;
float l9_5798=fast::clamp(l9_5793,l9_5794,l9_5795);
float l9_5799=step(abs(l9_5793-l9_5798),9.9999997e-06);
l9_5797*=(l9_5799+((1.0-float(l9_5796))*(1.0-l9_5799)));
l9_5793=l9_5798;
l9_5789=l9_5793;
l9_5792=l9_5797;
}
l9_5735.y=l9_5789;
l9_5745=l9_5792;
float2 l9_5800=l9_5735;
int l9_5801=l9_5733;
int l9_5802=l9_5734;
float l9_5803=l9_5743;
float2 l9_5804=l9_5800;
int l9_5805=l9_5801;
int l9_5806=l9_5802;
float3 l9_5807=float3(0.0);
if (l9_5805==0)
{
l9_5807=float3(l9_5804,0.0);
}
else
{
if (l9_5805==1)
{
l9_5807=float3(l9_5804.x,(l9_5804.y*0.5)+(0.5-(float(l9_5806)*0.5)),0.0);
}
else
{
l9_5807=float3(l9_5804,float(l9_5806));
}
}
float3 l9_5808=l9_5807;
float3 l9_5809=l9_5808;
float4 l9_5810=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_5809.xy,level(l9_5803));
float4 l9_5811=l9_5810;
if (l9_5741)
{
l9_5811=mix(l9_5742,l9_5811,float4(l9_5745));
}
float4 l9_5812=l9_5811;
l9_5722=l9_5812.x;
float l9_5813=l9_5722;
float l9_5814=l9_5813;
float l9_5815=(float(l9_5438)*l9_5431)+N319_res;
float l9_5816=0.0;
float l9_5817=(*sc_set0.UserUniforms).Tweak_N305_curveData.x;
float l9_5818=(*sc_set0.UserUniforms).Tweak_N305_curveData.y;
float l9_5819=(*sc_set0.UserUniforms).Tweak_N305_curveData.z;
float l9_5820=(l9_5815-l9_5818)/(l9_5819-l9_5818);
float2 l9_5821=float2(l9_5820,l9_5817);
l9_5821=fast::clamp(l9_5821,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_5822=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_5822=0;
}
else
{
l9_5822=gl_InstanceIndex%2;
}
int l9_5823=l9_5822;
l9_5436=1-l9_5823;
}
else
{
int l9_5824=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_5824=0;
}
else
{
l9_5824=gl_InstanceIndex%2;
}
int l9_5825=l9_5824;
l9_5436=l9_5825;
}
int l9_5826=l9_5436;
int l9_5827=sc_CurveAtlasLayout_tmp;
int l9_5828=l9_5826;
float2 l9_5829=l9_5821;
bool l9_5830=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_5831=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_5832=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_5833=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_5834=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_5835=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_5836=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_5837=0.0;
bool l9_5838=l9_5835&&(!l9_5833);
float l9_5839=1.0;
float l9_5840=l9_5829.x;
int l9_5841=l9_5832.x;
if (l9_5841==1)
{
l9_5840=fract(l9_5840);
}
else
{
if (l9_5841==2)
{
float l9_5842=fract(l9_5840);
float l9_5843=l9_5840-l9_5842;
float l9_5844=step(0.25,fract(l9_5843*0.5));
l9_5840=mix(l9_5842,1.0-l9_5842,fast::clamp(l9_5844,0.0,1.0));
}
}
l9_5829.x=l9_5840;
float l9_5845=l9_5829.y;
int l9_5846=l9_5832.y;
if (l9_5846==1)
{
l9_5845=fract(l9_5845);
}
else
{
if (l9_5846==2)
{
float l9_5847=fract(l9_5845);
float l9_5848=l9_5845-l9_5847;
float l9_5849=step(0.25,fract(l9_5848*0.5));
l9_5845=mix(l9_5847,1.0-l9_5847,fast::clamp(l9_5849,0.0,1.0));
}
}
l9_5829.y=l9_5845;
if (l9_5833)
{
bool l9_5850=l9_5835;
bool l9_5851;
if (l9_5850)
{
l9_5851=l9_5832.x==3;
}
else
{
l9_5851=l9_5850;
}
float l9_5852=l9_5829.x;
float l9_5853=l9_5834.x;
float l9_5854=l9_5834.z;
bool l9_5855=l9_5851;
float l9_5856=l9_5839;
float l9_5857=fast::clamp(l9_5852,l9_5853,l9_5854);
float l9_5858=step(abs(l9_5852-l9_5857),9.9999997e-06);
l9_5856*=(l9_5858+((1.0-float(l9_5855))*(1.0-l9_5858)));
l9_5852=l9_5857;
l9_5829.x=l9_5852;
l9_5839=l9_5856;
bool l9_5859=l9_5835;
bool l9_5860;
if (l9_5859)
{
l9_5860=l9_5832.y==3;
}
else
{
l9_5860=l9_5859;
}
float l9_5861=l9_5829.y;
float l9_5862=l9_5834.y;
float l9_5863=l9_5834.w;
bool l9_5864=l9_5860;
float l9_5865=l9_5839;
float l9_5866=fast::clamp(l9_5861,l9_5862,l9_5863);
float l9_5867=step(abs(l9_5861-l9_5866),9.9999997e-06);
l9_5865*=(l9_5867+((1.0-float(l9_5864))*(1.0-l9_5867)));
l9_5861=l9_5866;
l9_5829.y=l9_5861;
l9_5839=l9_5865;
}
float2 l9_5868=l9_5829;
bool l9_5869=l9_5830;
float3x3 l9_5870=l9_5831;
if (l9_5869)
{
l9_5868=float2((l9_5870*float3(l9_5868,1.0)).xy);
}
float2 l9_5871=l9_5868;
l9_5829=l9_5871;
float l9_5872=l9_5829.x;
int l9_5873=l9_5832.x;
bool l9_5874=l9_5838;
float l9_5875=l9_5839;
if ((l9_5873==0)||(l9_5873==3))
{
float l9_5876=l9_5872;
float l9_5877=0.0;
float l9_5878=1.0;
bool l9_5879=l9_5874;
float l9_5880=l9_5875;
float l9_5881=fast::clamp(l9_5876,l9_5877,l9_5878);
float l9_5882=step(abs(l9_5876-l9_5881),9.9999997e-06);
l9_5880*=(l9_5882+((1.0-float(l9_5879))*(1.0-l9_5882)));
l9_5876=l9_5881;
l9_5872=l9_5876;
l9_5875=l9_5880;
}
l9_5829.x=l9_5872;
l9_5839=l9_5875;
float l9_5883=l9_5829.y;
int l9_5884=l9_5832.y;
bool l9_5885=l9_5838;
float l9_5886=l9_5839;
if ((l9_5884==0)||(l9_5884==3))
{
float l9_5887=l9_5883;
float l9_5888=0.0;
float l9_5889=1.0;
bool l9_5890=l9_5885;
float l9_5891=l9_5886;
float l9_5892=fast::clamp(l9_5887,l9_5888,l9_5889);
float l9_5893=step(abs(l9_5887-l9_5892),9.9999997e-06);
l9_5891*=(l9_5893+((1.0-float(l9_5890))*(1.0-l9_5893)));
l9_5887=l9_5892;
l9_5883=l9_5887;
l9_5886=l9_5891;
}
l9_5829.y=l9_5883;
l9_5839=l9_5886;
float2 l9_5894=l9_5829;
int l9_5895=l9_5827;
int l9_5896=l9_5828;
float l9_5897=l9_5837;
float2 l9_5898=l9_5894;
int l9_5899=l9_5895;
int l9_5900=l9_5896;
float3 l9_5901=float3(0.0);
if (l9_5899==0)
{
l9_5901=float3(l9_5898,0.0);
}
else
{
if (l9_5899==1)
{
l9_5901=float3(l9_5898.x,(l9_5898.y*0.5)+(0.5-(float(l9_5900)*0.5)),0.0);
}
else
{
l9_5901=float3(l9_5898,float(l9_5900));
}
}
float3 l9_5902=l9_5901;
float3 l9_5903=l9_5902;
float4 l9_5904=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_5903.xy,level(l9_5897));
float4 l9_5905=l9_5904;
if (l9_5835)
{
l9_5905=mix(l9_5836,l9_5905,float4(l9_5839));
}
float4 l9_5906=l9_5905;
l9_5816=l9_5906.x;
float l9_5907=l9_5816;
float l9_5908=l9_5907;
float l9_5909=(float(l9_5438)*l9_5431)+N319_res;
float l9_5910=0.0;
float l9_5911=(*sc_set0.UserUniforms).Tweak_N297_curveData.x;
float l9_5912=(*sc_set0.UserUniforms).Tweak_N297_curveData.y;
float l9_5913=(*sc_set0.UserUniforms).Tweak_N297_curveData.z;
float l9_5914=(l9_5909-l9_5912)/(l9_5913-l9_5912);
float2 l9_5915=float2(l9_5914,l9_5911);
l9_5915=fast::clamp(l9_5915,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_5916=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_5916=0;
}
else
{
l9_5916=gl_InstanceIndex%2;
}
int l9_5917=l9_5916;
l9_5437=1-l9_5917;
}
else
{
int l9_5918=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_5918=0;
}
else
{
l9_5918=gl_InstanceIndex%2;
}
int l9_5919=l9_5918;
l9_5437=l9_5919;
}
int l9_5920=l9_5437;
int l9_5921=sc_CurveAtlasLayout_tmp;
int l9_5922=l9_5920;
float2 l9_5923=l9_5915;
bool l9_5924=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_5925=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_5926=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_5927=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_5928=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_5929=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_5930=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_5931=0.0;
bool l9_5932=l9_5929&&(!l9_5927);
float l9_5933=1.0;
float l9_5934=l9_5923.x;
int l9_5935=l9_5926.x;
if (l9_5935==1)
{
l9_5934=fract(l9_5934);
}
else
{
if (l9_5935==2)
{
float l9_5936=fract(l9_5934);
float l9_5937=l9_5934-l9_5936;
float l9_5938=step(0.25,fract(l9_5937*0.5));
l9_5934=mix(l9_5936,1.0-l9_5936,fast::clamp(l9_5938,0.0,1.0));
}
}
l9_5923.x=l9_5934;
float l9_5939=l9_5923.y;
int l9_5940=l9_5926.y;
if (l9_5940==1)
{
l9_5939=fract(l9_5939);
}
else
{
if (l9_5940==2)
{
float l9_5941=fract(l9_5939);
float l9_5942=l9_5939-l9_5941;
float l9_5943=step(0.25,fract(l9_5942*0.5));
l9_5939=mix(l9_5941,1.0-l9_5941,fast::clamp(l9_5943,0.0,1.0));
}
}
l9_5923.y=l9_5939;
if (l9_5927)
{
bool l9_5944=l9_5929;
bool l9_5945;
if (l9_5944)
{
l9_5945=l9_5926.x==3;
}
else
{
l9_5945=l9_5944;
}
float l9_5946=l9_5923.x;
float l9_5947=l9_5928.x;
float l9_5948=l9_5928.z;
bool l9_5949=l9_5945;
float l9_5950=l9_5933;
float l9_5951=fast::clamp(l9_5946,l9_5947,l9_5948);
float l9_5952=step(abs(l9_5946-l9_5951),9.9999997e-06);
l9_5950*=(l9_5952+((1.0-float(l9_5949))*(1.0-l9_5952)));
l9_5946=l9_5951;
l9_5923.x=l9_5946;
l9_5933=l9_5950;
bool l9_5953=l9_5929;
bool l9_5954;
if (l9_5953)
{
l9_5954=l9_5926.y==3;
}
else
{
l9_5954=l9_5953;
}
float l9_5955=l9_5923.y;
float l9_5956=l9_5928.y;
float l9_5957=l9_5928.w;
bool l9_5958=l9_5954;
float l9_5959=l9_5933;
float l9_5960=fast::clamp(l9_5955,l9_5956,l9_5957);
float l9_5961=step(abs(l9_5955-l9_5960),9.9999997e-06);
l9_5959*=(l9_5961+((1.0-float(l9_5958))*(1.0-l9_5961)));
l9_5955=l9_5960;
l9_5923.y=l9_5955;
l9_5933=l9_5959;
}
float2 l9_5962=l9_5923;
bool l9_5963=l9_5924;
float3x3 l9_5964=l9_5925;
if (l9_5963)
{
l9_5962=float2((l9_5964*float3(l9_5962,1.0)).xy);
}
float2 l9_5965=l9_5962;
l9_5923=l9_5965;
float l9_5966=l9_5923.x;
int l9_5967=l9_5926.x;
bool l9_5968=l9_5932;
float l9_5969=l9_5933;
if ((l9_5967==0)||(l9_5967==3))
{
float l9_5970=l9_5966;
float l9_5971=0.0;
float l9_5972=1.0;
bool l9_5973=l9_5968;
float l9_5974=l9_5969;
float l9_5975=fast::clamp(l9_5970,l9_5971,l9_5972);
float l9_5976=step(abs(l9_5970-l9_5975),9.9999997e-06);
l9_5974*=(l9_5976+((1.0-float(l9_5973))*(1.0-l9_5976)));
l9_5970=l9_5975;
l9_5966=l9_5970;
l9_5969=l9_5974;
}
l9_5923.x=l9_5966;
l9_5933=l9_5969;
float l9_5977=l9_5923.y;
int l9_5978=l9_5926.y;
bool l9_5979=l9_5932;
float l9_5980=l9_5933;
if ((l9_5978==0)||(l9_5978==3))
{
float l9_5981=l9_5977;
float l9_5982=0.0;
float l9_5983=1.0;
bool l9_5984=l9_5979;
float l9_5985=l9_5980;
float l9_5986=fast::clamp(l9_5981,l9_5982,l9_5983);
float l9_5987=step(abs(l9_5981-l9_5986),9.9999997e-06);
l9_5985*=(l9_5987+((1.0-float(l9_5984))*(1.0-l9_5987)));
l9_5981=l9_5986;
l9_5977=l9_5981;
l9_5980=l9_5985;
}
l9_5923.y=l9_5977;
l9_5933=l9_5980;
float2 l9_5988=l9_5923;
int l9_5989=l9_5921;
int l9_5990=l9_5922;
float l9_5991=l9_5931;
float2 l9_5992=l9_5988;
int l9_5993=l9_5989;
int l9_5994=l9_5990;
float3 l9_5995=float3(0.0);
if (l9_5993==0)
{
l9_5995=float3(l9_5992,0.0);
}
else
{
if (l9_5993==1)
{
l9_5995=float3(l9_5992.x,(l9_5992.y*0.5)+(0.5-(float(l9_5994)*0.5)),0.0);
}
else
{
l9_5995=float3(l9_5992,float(l9_5994));
}
}
float3 l9_5996=l9_5995;
float3 l9_5997=l9_5996;
float4 l9_5998=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_5997.xy,level(l9_5991));
float4 l9_5999=l9_5998;
if (l9_5929)
{
l9_5999=mix(l9_5930,l9_5999,float4(l9_5933));
}
float4 l9_6000=l9_5999;
l9_5910=l9_6000.x;
float l9_6001=l9_5910;
float3 l9_6002=float3(l9_5814,l9_5908,l9_6001);
l9_5426+=normalize(l9_6002-l9_5720);
l9_5438++;
continue;
}
else
{
break;
}
}
l9_5426=normalize(l9_5426);
l9_5427=normalize(cross(l9_5426,float3(0.0099990005,0.99990004,0.0099990005)));
l9_5428=normalize(cross(l9_5426,l9_5427));
float l9_6003=l9_5425;
float l9_6004=0.0;
float l9_6005=(*sc_set0.UserUniforms).Tweak_N293_curveData.x;
float l9_6006=(*sc_set0.UserUniforms).Tweak_N293_curveData.y;
float l9_6007=(*sc_set0.UserUniforms).Tweak_N293_curveData.z;
float l9_6008=(l9_6003-l9_6006)/(l9_6007-l9_6006);
float2 l9_6009=float2(l9_6008,l9_6005);
l9_6009=fast::clamp(l9_6009,float2(0.0),float2(1.0));
int l9_6010;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_6011=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_6011=0;
}
else
{
l9_6011=gl_InstanceIndex%2;
}
int l9_6012=l9_6011;
l9_6010=1-l9_6012;
}
else
{
int l9_6013=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_6013=0;
}
else
{
l9_6013=gl_InstanceIndex%2;
}
int l9_6014=l9_6013;
l9_6010=l9_6014;
}
int l9_6015=l9_6010;
int l9_6016=sc_CurveAtlasLayout_tmp;
int l9_6017=l9_6015;
float2 l9_6018=l9_6009;
bool l9_6019=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_6020=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_6021=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_6022=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_6023=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_6024=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_6025=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_6026=0.0;
bool l9_6027=l9_6024&&(!l9_6022);
float l9_6028=1.0;
float l9_6029=l9_6018.x;
int l9_6030=l9_6021.x;
if (l9_6030==1)
{
l9_6029=fract(l9_6029);
}
else
{
if (l9_6030==2)
{
float l9_6031=fract(l9_6029);
float l9_6032=l9_6029-l9_6031;
float l9_6033=step(0.25,fract(l9_6032*0.5));
l9_6029=mix(l9_6031,1.0-l9_6031,fast::clamp(l9_6033,0.0,1.0));
}
}
l9_6018.x=l9_6029;
float l9_6034=l9_6018.y;
int l9_6035=l9_6021.y;
if (l9_6035==1)
{
l9_6034=fract(l9_6034);
}
else
{
if (l9_6035==2)
{
float l9_6036=fract(l9_6034);
float l9_6037=l9_6034-l9_6036;
float l9_6038=step(0.25,fract(l9_6037*0.5));
l9_6034=mix(l9_6036,1.0-l9_6036,fast::clamp(l9_6038,0.0,1.0));
}
}
l9_6018.y=l9_6034;
if (l9_6022)
{
bool l9_6039=l9_6024;
bool l9_6040;
if (l9_6039)
{
l9_6040=l9_6021.x==3;
}
else
{
l9_6040=l9_6039;
}
float l9_6041=l9_6018.x;
float l9_6042=l9_6023.x;
float l9_6043=l9_6023.z;
bool l9_6044=l9_6040;
float l9_6045=l9_6028;
float l9_6046=fast::clamp(l9_6041,l9_6042,l9_6043);
float l9_6047=step(abs(l9_6041-l9_6046),9.9999997e-06);
l9_6045*=(l9_6047+((1.0-float(l9_6044))*(1.0-l9_6047)));
l9_6041=l9_6046;
l9_6018.x=l9_6041;
l9_6028=l9_6045;
bool l9_6048=l9_6024;
bool l9_6049;
if (l9_6048)
{
l9_6049=l9_6021.y==3;
}
else
{
l9_6049=l9_6048;
}
float l9_6050=l9_6018.y;
float l9_6051=l9_6023.y;
float l9_6052=l9_6023.w;
bool l9_6053=l9_6049;
float l9_6054=l9_6028;
float l9_6055=fast::clamp(l9_6050,l9_6051,l9_6052);
float l9_6056=step(abs(l9_6050-l9_6055),9.9999997e-06);
l9_6054*=(l9_6056+((1.0-float(l9_6053))*(1.0-l9_6056)));
l9_6050=l9_6055;
l9_6018.y=l9_6050;
l9_6028=l9_6054;
}
float2 l9_6057=l9_6018;
bool l9_6058=l9_6019;
float3x3 l9_6059=l9_6020;
if (l9_6058)
{
l9_6057=float2((l9_6059*float3(l9_6057,1.0)).xy);
}
float2 l9_6060=l9_6057;
l9_6018=l9_6060;
float l9_6061=l9_6018.x;
int l9_6062=l9_6021.x;
bool l9_6063=l9_6027;
float l9_6064=l9_6028;
if ((l9_6062==0)||(l9_6062==3))
{
float l9_6065=l9_6061;
float l9_6066=0.0;
float l9_6067=1.0;
bool l9_6068=l9_6063;
float l9_6069=l9_6064;
float l9_6070=fast::clamp(l9_6065,l9_6066,l9_6067);
float l9_6071=step(abs(l9_6065-l9_6070),9.9999997e-06);
l9_6069*=(l9_6071+((1.0-float(l9_6068))*(1.0-l9_6071)));
l9_6065=l9_6070;
l9_6061=l9_6065;
l9_6064=l9_6069;
}
l9_6018.x=l9_6061;
l9_6028=l9_6064;
float l9_6072=l9_6018.y;
int l9_6073=l9_6021.y;
bool l9_6074=l9_6027;
float l9_6075=l9_6028;
if ((l9_6073==0)||(l9_6073==3))
{
float l9_6076=l9_6072;
float l9_6077=0.0;
float l9_6078=1.0;
bool l9_6079=l9_6074;
float l9_6080=l9_6075;
float l9_6081=fast::clamp(l9_6076,l9_6077,l9_6078);
float l9_6082=step(abs(l9_6076-l9_6081),9.9999997e-06);
l9_6080*=(l9_6082+((1.0-float(l9_6079))*(1.0-l9_6082)));
l9_6076=l9_6081;
l9_6072=l9_6076;
l9_6075=l9_6080;
}
l9_6018.y=l9_6072;
l9_6028=l9_6075;
float2 l9_6083=l9_6018;
int l9_6084=l9_6016;
int l9_6085=l9_6017;
float l9_6086=l9_6026;
float2 l9_6087=l9_6083;
int l9_6088=l9_6084;
int l9_6089=l9_6085;
float3 l9_6090=float3(0.0);
if (l9_6088==0)
{
l9_6090=float3(l9_6087,0.0);
}
else
{
if (l9_6088==1)
{
l9_6090=float3(l9_6087.x,(l9_6087.y*0.5)+(0.5-(float(l9_6089)*0.5)),0.0);
}
else
{
l9_6090=float3(l9_6087,float(l9_6089));
}
}
float3 l9_6091=l9_6090;
float3 l9_6092=l9_6091;
float4 l9_6093=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_6092.xy,level(l9_6086));
float4 l9_6094=l9_6093;
if (l9_6024)
{
l9_6094=mix(l9_6025,l9_6094,float4(l9_6028));
}
float4 l9_6095=l9_6094;
l9_6004=l9_6095.x;
float l9_6096=l9_6004;
float l9_6097=l9_6096;
float l9_6098=l9_5425;
float l9_6099=0.0;
float l9_6100=(*sc_set0.UserUniforms).Tweak_N305_curveData.x;
float l9_6101=(*sc_set0.UserUniforms).Tweak_N305_curveData.y;
float l9_6102=(*sc_set0.UserUniforms).Tweak_N305_curveData.z;
float l9_6103=(l9_6098-l9_6101)/(l9_6102-l9_6101);
float2 l9_6104=float2(l9_6103,l9_6100);
l9_6104=fast::clamp(l9_6104,float2(0.0),float2(1.0));
int l9_6105;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_6106=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_6106=0;
}
else
{
l9_6106=gl_InstanceIndex%2;
}
int l9_6107=l9_6106;
l9_6105=1-l9_6107;
}
else
{
int l9_6108=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_6108=0;
}
else
{
l9_6108=gl_InstanceIndex%2;
}
int l9_6109=l9_6108;
l9_6105=l9_6109;
}
int l9_6110=l9_6105;
int l9_6111=sc_CurveAtlasLayout_tmp;
int l9_6112=l9_6110;
float2 l9_6113=l9_6104;
bool l9_6114=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_6115=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_6116=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_6117=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_6118=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_6119=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_6120=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_6121=0.0;
bool l9_6122=l9_6119&&(!l9_6117);
float l9_6123=1.0;
float l9_6124=l9_6113.x;
int l9_6125=l9_6116.x;
if (l9_6125==1)
{
l9_6124=fract(l9_6124);
}
else
{
if (l9_6125==2)
{
float l9_6126=fract(l9_6124);
float l9_6127=l9_6124-l9_6126;
float l9_6128=step(0.25,fract(l9_6127*0.5));
l9_6124=mix(l9_6126,1.0-l9_6126,fast::clamp(l9_6128,0.0,1.0));
}
}
l9_6113.x=l9_6124;
float l9_6129=l9_6113.y;
int l9_6130=l9_6116.y;
if (l9_6130==1)
{
l9_6129=fract(l9_6129);
}
else
{
if (l9_6130==2)
{
float l9_6131=fract(l9_6129);
float l9_6132=l9_6129-l9_6131;
float l9_6133=step(0.25,fract(l9_6132*0.5));
l9_6129=mix(l9_6131,1.0-l9_6131,fast::clamp(l9_6133,0.0,1.0));
}
}
l9_6113.y=l9_6129;
if (l9_6117)
{
bool l9_6134=l9_6119;
bool l9_6135;
if (l9_6134)
{
l9_6135=l9_6116.x==3;
}
else
{
l9_6135=l9_6134;
}
float l9_6136=l9_6113.x;
float l9_6137=l9_6118.x;
float l9_6138=l9_6118.z;
bool l9_6139=l9_6135;
float l9_6140=l9_6123;
float l9_6141=fast::clamp(l9_6136,l9_6137,l9_6138);
float l9_6142=step(abs(l9_6136-l9_6141),9.9999997e-06);
l9_6140*=(l9_6142+((1.0-float(l9_6139))*(1.0-l9_6142)));
l9_6136=l9_6141;
l9_6113.x=l9_6136;
l9_6123=l9_6140;
bool l9_6143=l9_6119;
bool l9_6144;
if (l9_6143)
{
l9_6144=l9_6116.y==3;
}
else
{
l9_6144=l9_6143;
}
float l9_6145=l9_6113.y;
float l9_6146=l9_6118.y;
float l9_6147=l9_6118.w;
bool l9_6148=l9_6144;
float l9_6149=l9_6123;
float l9_6150=fast::clamp(l9_6145,l9_6146,l9_6147);
float l9_6151=step(abs(l9_6145-l9_6150),9.9999997e-06);
l9_6149*=(l9_6151+((1.0-float(l9_6148))*(1.0-l9_6151)));
l9_6145=l9_6150;
l9_6113.y=l9_6145;
l9_6123=l9_6149;
}
float2 l9_6152=l9_6113;
bool l9_6153=l9_6114;
float3x3 l9_6154=l9_6115;
if (l9_6153)
{
l9_6152=float2((l9_6154*float3(l9_6152,1.0)).xy);
}
float2 l9_6155=l9_6152;
l9_6113=l9_6155;
float l9_6156=l9_6113.x;
int l9_6157=l9_6116.x;
bool l9_6158=l9_6122;
float l9_6159=l9_6123;
if ((l9_6157==0)||(l9_6157==3))
{
float l9_6160=l9_6156;
float l9_6161=0.0;
float l9_6162=1.0;
bool l9_6163=l9_6158;
float l9_6164=l9_6159;
float l9_6165=fast::clamp(l9_6160,l9_6161,l9_6162);
float l9_6166=step(abs(l9_6160-l9_6165),9.9999997e-06);
l9_6164*=(l9_6166+((1.0-float(l9_6163))*(1.0-l9_6166)));
l9_6160=l9_6165;
l9_6156=l9_6160;
l9_6159=l9_6164;
}
l9_6113.x=l9_6156;
l9_6123=l9_6159;
float l9_6167=l9_6113.y;
int l9_6168=l9_6116.y;
bool l9_6169=l9_6122;
float l9_6170=l9_6123;
if ((l9_6168==0)||(l9_6168==3))
{
float l9_6171=l9_6167;
float l9_6172=0.0;
float l9_6173=1.0;
bool l9_6174=l9_6169;
float l9_6175=l9_6170;
float l9_6176=fast::clamp(l9_6171,l9_6172,l9_6173);
float l9_6177=step(abs(l9_6171-l9_6176),9.9999997e-06);
l9_6175*=(l9_6177+((1.0-float(l9_6174))*(1.0-l9_6177)));
l9_6171=l9_6176;
l9_6167=l9_6171;
l9_6170=l9_6175;
}
l9_6113.y=l9_6167;
l9_6123=l9_6170;
float2 l9_6178=l9_6113;
int l9_6179=l9_6111;
int l9_6180=l9_6112;
float l9_6181=l9_6121;
float2 l9_6182=l9_6178;
int l9_6183=l9_6179;
int l9_6184=l9_6180;
float3 l9_6185=float3(0.0);
if (l9_6183==0)
{
l9_6185=float3(l9_6182,0.0);
}
else
{
if (l9_6183==1)
{
l9_6185=float3(l9_6182.x,(l9_6182.y*0.5)+(0.5-(float(l9_6184)*0.5)),0.0);
}
else
{
l9_6185=float3(l9_6182,float(l9_6184));
}
}
float3 l9_6186=l9_6185;
float3 l9_6187=l9_6186;
float4 l9_6188=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_6187.xy,level(l9_6181));
float4 l9_6189=l9_6188;
if (l9_6119)
{
l9_6189=mix(l9_6120,l9_6189,float4(l9_6123));
}
float4 l9_6190=l9_6189;
l9_6099=l9_6190.x;
float l9_6191=l9_6099;
float l9_6192=l9_6191;
float l9_6193=l9_5425;
float l9_6194=0.0;
float l9_6195=(*sc_set0.UserUniforms).Tweak_N297_curveData.x;
float l9_6196=(*sc_set0.UserUniforms).Tweak_N297_curveData.y;
float l9_6197=(*sc_set0.UserUniforms).Tweak_N297_curveData.z;
float l9_6198=(l9_6193-l9_6196)/(l9_6197-l9_6196);
float2 l9_6199=float2(l9_6198,l9_6195);
l9_6199=fast::clamp(l9_6199,float2(0.0),float2(1.0));
int l9_6200;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_6201=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_6201=0;
}
else
{
l9_6201=gl_InstanceIndex%2;
}
int l9_6202=l9_6201;
l9_6200=1-l9_6202;
}
else
{
int l9_6203=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_6203=0;
}
else
{
l9_6203=gl_InstanceIndex%2;
}
int l9_6204=l9_6203;
l9_6200=l9_6204;
}
int l9_6205=l9_6200;
int l9_6206=sc_CurveAtlasLayout_tmp;
int l9_6207=l9_6205;
float2 l9_6208=l9_6199;
bool l9_6209=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_6210=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_6211=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_6212=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_6213=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_6214=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_6215=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_6216=0.0;
bool l9_6217=l9_6214&&(!l9_6212);
float l9_6218=1.0;
float l9_6219=l9_6208.x;
int l9_6220=l9_6211.x;
if (l9_6220==1)
{
l9_6219=fract(l9_6219);
}
else
{
if (l9_6220==2)
{
float l9_6221=fract(l9_6219);
float l9_6222=l9_6219-l9_6221;
float l9_6223=step(0.25,fract(l9_6222*0.5));
l9_6219=mix(l9_6221,1.0-l9_6221,fast::clamp(l9_6223,0.0,1.0));
}
}
l9_6208.x=l9_6219;
float l9_6224=l9_6208.y;
int l9_6225=l9_6211.y;
if (l9_6225==1)
{
l9_6224=fract(l9_6224);
}
else
{
if (l9_6225==2)
{
float l9_6226=fract(l9_6224);
float l9_6227=l9_6224-l9_6226;
float l9_6228=step(0.25,fract(l9_6227*0.5));
l9_6224=mix(l9_6226,1.0-l9_6226,fast::clamp(l9_6228,0.0,1.0));
}
}
l9_6208.y=l9_6224;
if (l9_6212)
{
bool l9_6229=l9_6214;
bool l9_6230;
if (l9_6229)
{
l9_6230=l9_6211.x==3;
}
else
{
l9_6230=l9_6229;
}
float l9_6231=l9_6208.x;
float l9_6232=l9_6213.x;
float l9_6233=l9_6213.z;
bool l9_6234=l9_6230;
float l9_6235=l9_6218;
float l9_6236=fast::clamp(l9_6231,l9_6232,l9_6233);
float l9_6237=step(abs(l9_6231-l9_6236),9.9999997e-06);
l9_6235*=(l9_6237+((1.0-float(l9_6234))*(1.0-l9_6237)));
l9_6231=l9_6236;
l9_6208.x=l9_6231;
l9_6218=l9_6235;
bool l9_6238=l9_6214;
bool l9_6239;
if (l9_6238)
{
l9_6239=l9_6211.y==3;
}
else
{
l9_6239=l9_6238;
}
float l9_6240=l9_6208.y;
float l9_6241=l9_6213.y;
float l9_6242=l9_6213.w;
bool l9_6243=l9_6239;
float l9_6244=l9_6218;
float l9_6245=fast::clamp(l9_6240,l9_6241,l9_6242);
float l9_6246=step(abs(l9_6240-l9_6245),9.9999997e-06);
l9_6244*=(l9_6246+((1.0-float(l9_6243))*(1.0-l9_6246)));
l9_6240=l9_6245;
l9_6208.y=l9_6240;
l9_6218=l9_6244;
}
float2 l9_6247=l9_6208;
bool l9_6248=l9_6209;
float3x3 l9_6249=l9_6210;
if (l9_6248)
{
l9_6247=float2((l9_6249*float3(l9_6247,1.0)).xy);
}
float2 l9_6250=l9_6247;
l9_6208=l9_6250;
float l9_6251=l9_6208.x;
int l9_6252=l9_6211.x;
bool l9_6253=l9_6217;
float l9_6254=l9_6218;
if ((l9_6252==0)||(l9_6252==3))
{
float l9_6255=l9_6251;
float l9_6256=0.0;
float l9_6257=1.0;
bool l9_6258=l9_6253;
float l9_6259=l9_6254;
float l9_6260=fast::clamp(l9_6255,l9_6256,l9_6257);
float l9_6261=step(abs(l9_6255-l9_6260),9.9999997e-06);
l9_6259*=(l9_6261+((1.0-float(l9_6258))*(1.0-l9_6261)));
l9_6255=l9_6260;
l9_6251=l9_6255;
l9_6254=l9_6259;
}
l9_6208.x=l9_6251;
l9_6218=l9_6254;
float l9_6262=l9_6208.y;
int l9_6263=l9_6211.y;
bool l9_6264=l9_6217;
float l9_6265=l9_6218;
if ((l9_6263==0)||(l9_6263==3))
{
float l9_6266=l9_6262;
float l9_6267=0.0;
float l9_6268=1.0;
bool l9_6269=l9_6264;
float l9_6270=l9_6265;
float l9_6271=fast::clamp(l9_6266,l9_6267,l9_6268);
float l9_6272=step(abs(l9_6266-l9_6271),9.9999997e-06);
l9_6270*=(l9_6272+((1.0-float(l9_6269))*(1.0-l9_6272)));
l9_6266=l9_6271;
l9_6262=l9_6266;
l9_6265=l9_6270;
}
l9_6208.y=l9_6262;
l9_6218=l9_6265;
float2 l9_6273=l9_6208;
int l9_6274=l9_6206;
int l9_6275=l9_6207;
float l9_6276=l9_6216;
float2 l9_6277=l9_6273;
int l9_6278=l9_6274;
int l9_6279=l9_6275;
float3 l9_6280=float3(0.0);
if (l9_6278==0)
{
l9_6280=float3(l9_6277,0.0);
}
else
{
if (l9_6278==1)
{
l9_6280=float3(l9_6277.x,(l9_6277.y*0.5)+(0.5-(float(l9_6279)*0.5)),0.0);
}
else
{
l9_6280=float3(l9_6277,float(l9_6279));
}
}
float3 l9_6281=l9_6280;
float3 l9_6282=l9_6281;
float4 l9_6283=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_6282.xy,level(l9_6276));
float4 l9_6284=l9_6283;
if (l9_6214)
{
l9_6284=mix(l9_6215,l9_6284,float4(l9_6218));
}
float4 l9_6285=l9_6284;
l9_6194=l9_6285.x;
float l9_6286=l9_6194;
float3 l9_6287=float3(l9_6097,l9_6192,l9_6286);
float l9_6288=l9_5425+N319_res;
float l9_6289=0.0;
float l9_6290=(*sc_set0.UserUniforms).Tweak_N293_curveData.x;
float l9_6291=(*sc_set0.UserUniforms).Tweak_N293_curveData.y;
float l9_6292=(*sc_set0.UserUniforms).Tweak_N293_curveData.z;
float l9_6293=(l9_6288-l9_6291)/(l9_6292-l9_6291);
float2 l9_6294=float2(l9_6293,l9_6290);
l9_6294=fast::clamp(l9_6294,float2(0.0),float2(1.0));
int l9_6295;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_6296=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_6296=0;
}
else
{
l9_6296=gl_InstanceIndex%2;
}
int l9_6297=l9_6296;
l9_6295=1-l9_6297;
}
else
{
int l9_6298=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_6298=0;
}
else
{
l9_6298=gl_InstanceIndex%2;
}
int l9_6299=l9_6298;
l9_6295=l9_6299;
}
int l9_6300=l9_6295;
int l9_6301=sc_CurveAtlasLayout_tmp;
int l9_6302=l9_6300;
float2 l9_6303=l9_6294;
bool l9_6304=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_6305=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_6306=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_6307=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_6308=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_6309=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_6310=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_6311=0.0;
bool l9_6312=l9_6309&&(!l9_6307);
float l9_6313=1.0;
float l9_6314=l9_6303.x;
int l9_6315=l9_6306.x;
if (l9_6315==1)
{
l9_6314=fract(l9_6314);
}
else
{
if (l9_6315==2)
{
float l9_6316=fract(l9_6314);
float l9_6317=l9_6314-l9_6316;
float l9_6318=step(0.25,fract(l9_6317*0.5));
l9_6314=mix(l9_6316,1.0-l9_6316,fast::clamp(l9_6318,0.0,1.0));
}
}
l9_6303.x=l9_6314;
float l9_6319=l9_6303.y;
int l9_6320=l9_6306.y;
if (l9_6320==1)
{
l9_6319=fract(l9_6319);
}
else
{
if (l9_6320==2)
{
float l9_6321=fract(l9_6319);
float l9_6322=l9_6319-l9_6321;
float l9_6323=step(0.25,fract(l9_6322*0.5));
l9_6319=mix(l9_6321,1.0-l9_6321,fast::clamp(l9_6323,0.0,1.0));
}
}
l9_6303.y=l9_6319;
if (l9_6307)
{
bool l9_6324=l9_6309;
bool l9_6325;
if (l9_6324)
{
l9_6325=l9_6306.x==3;
}
else
{
l9_6325=l9_6324;
}
float l9_6326=l9_6303.x;
float l9_6327=l9_6308.x;
float l9_6328=l9_6308.z;
bool l9_6329=l9_6325;
float l9_6330=l9_6313;
float l9_6331=fast::clamp(l9_6326,l9_6327,l9_6328);
float l9_6332=step(abs(l9_6326-l9_6331),9.9999997e-06);
l9_6330*=(l9_6332+((1.0-float(l9_6329))*(1.0-l9_6332)));
l9_6326=l9_6331;
l9_6303.x=l9_6326;
l9_6313=l9_6330;
bool l9_6333=l9_6309;
bool l9_6334;
if (l9_6333)
{
l9_6334=l9_6306.y==3;
}
else
{
l9_6334=l9_6333;
}
float l9_6335=l9_6303.y;
float l9_6336=l9_6308.y;
float l9_6337=l9_6308.w;
bool l9_6338=l9_6334;
float l9_6339=l9_6313;
float l9_6340=fast::clamp(l9_6335,l9_6336,l9_6337);
float l9_6341=step(abs(l9_6335-l9_6340),9.9999997e-06);
l9_6339*=(l9_6341+((1.0-float(l9_6338))*(1.0-l9_6341)));
l9_6335=l9_6340;
l9_6303.y=l9_6335;
l9_6313=l9_6339;
}
float2 l9_6342=l9_6303;
bool l9_6343=l9_6304;
float3x3 l9_6344=l9_6305;
if (l9_6343)
{
l9_6342=float2((l9_6344*float3(l9_6342,1.0)).xy);
}
float2 l9_6345=l9_6342;
l9_6303=l9_6345;
float l9_6346=l9_6303.x;
int l9_6347=l9_6306.x;
bool l9_6348=l9_6312;
float l9_6349=l9_6313;
if ((l9_6347==0)||(l9_6347==3))
{
float l9_6350=l9_6346;
float l9_6351=0.0;
float l9_6352=1.0;
bool l9_6353=l9_6348;
float l9_6354=l9_6349;
float l9_6355=fast::clamp(l9_6350,l9_6351,l9_6352);
float l9_6356=step(abs(l9_6350-l9_6355),9.9999997e-06);
l9_6354*=(l9_6356+((1.0-float(l9_6353))*(1.0-l9_6356)));
l9_6350=l9_6355;
l9_6346=l9_6350;
l9_6349=l9_6354;
}
l9_6303.x=l9_6346;
l9_6313=l9_6349;
float l9_6357=l9_6303.y;
int l9_6358=l9_6306.y;
bool l9_6359=l9_6312;
float l9_6360=l9_6313;
if ((l9_6358==0)||(l9_6358==3))
{
float l9_6361=l9_6357;
float l9_6362=0.0;
float l9_6363=1.0;
bool l9_6364=l9_6359;
float l9_6365=l9_6360;
float l9_6366=fast::clamp(l9_6361,l9_6362,l9_6363);
float l9_6367=step(abs(l9_6361-l9_6366),9.9999997e-06);
l9_6365*=(l9_6367+((1.0-float(l9_6364))*(1.0-l9_6367)));
l9_6361=l9_6366;
l9_6357=l9_6361;
l9_6360=l9_6365;
}
l9_6303.y=l9_6357;
l9_6313=l9_6360;
float2 l9_6368=l9_6303;
int l9_6369=l9_6301;
int l9_6370=l9_6302;
float l9_6371=l9_6311;
float2 l9_6372=l9_6368;
int l9_6373=l9_6369;
int l9_6374=l9_6370;
float3 l9_6375=float3(0.0);
if (l9_6373==0)
{
l9_6375=float3(l9_6372,0.0);
}
else
{
if (l9_6373==1)
{
l9_6375=float3(l9_6372.x,(l9_6372.y*0.5)+(0.5-(float(l9_6374)*0.5)),0.0);
}
else
{
l9_6375=float3(l9_6372,float(l9_6374));
}
}
float3 l9_6376=l9_6375;
float3 l9_6377=l9_6376;
float4 l9_6378=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_6377.xy,level(l9_6371));
float4 l9_6379=l9_6378;
if (l9_6309)
{
l9_6379=mix(l9_6310,l9_6379,float4(l9_6313));
}
float4 l9_6380=l9_6379;
l9_6289=l9_6380.x;
float l9_6381=l9_6289;
float l9_6382=l9_6381;
float l9_6383=l9_5425+N319_res;
float l9_6384=0.0;
float l9_6385=(*sc_set0.UserUniforms).Tweak_N305_curveData.x;
float l9_6386=(*sc_set0.UserUniforms).Tweak_N305_curveData.y;
float l9_6387=(*sc_set0.UserUniforms).Tweak_N305_curveData.z;
float l9_6388=(l9_6383-l9_6386)/(l9_6387-l9_6386);
float2 l9_6389=float2(l9_6388,l9_6385);
l9_6389=fast::clamp(l9_6389,float2(0.0),float2(1.0));
int l9_6390;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_6391=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_6391=0;
}
else
{
l9_6391=gl_InstanceIndex%2;
}
int l9_6392=l9_6391;
l9_6390=1-l9_6392;
}
else
{
int l9_6393=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_6393=0;
}
else
{
l9_6393=gl_InstanceIndex%2;
}
int l9_6394=l9_6393;
l9_6390=l9_6394;
}
int l9_6395=l9_6390;
int l9_6396=sc_CurveAtlasLayout_tmp;
int l9_6397=l9_6395;
float2 l9_6398=l9_6389;
bool l9_6399=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_6400=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_6401=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_6402=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_6403=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_6404=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_6405=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_6406=0.0;
bool l9_6407=l9_6404&&(!l9_6402);
float l9_6408=1.0;
float l9_6409=l9_6398.x;
int l9_6410=l9_6401.x;
if (l9_6410==1)
{
l9_6409=fract(l9_6409);
}
else
{
if (l9_6410==2)
{
float l9_6411=fract(l9_6409);
float l9_6412=l9_6409-l9_6411;
float l9_6413=step(0.25,fract(l9_6412*0.5));
l9_6409=mix(l9_6411,1.0-l9_6411,fast::clamp(l9_6413,0.0,1.0));
}
}
l9_6398.x=l9_6409;
float l9_6414=l9_6398.y;
int l9_6415=l9_6401.y;
if (l9_6415==1)
{
l9_6414=fract(l9_6414);
}
else
{
if (l9_6415==2)
{
float l9_6416=fract(l9_6414);
float l9_6417=l9_6414-l9_6416;
float l9_6418=step(0.25,fract(l9_6417*0.5));
l9_6414=mix(l9_6416,1.0-l9_6416,fast::clamp(l9_6418,0.0,1.0));
}
}
l9_6398.y=l9_6414;
if (l9_6402)
{
bool l9_6419=l9_6404;
bool l9_6420;
if (l9_6419)
{
l9_6420=l9_6401.x==3;
}
else
{
l9_6420=l9_6419;
}
float l9_6421=l9_6398.x;
float l9_6422=l9_6403.x;
float l9_6423=l9_6403.z;
bool l9_6424=l9_6420;
float l9_6425=l9_6408;
float l9_6426=fast::clamp(l9_6421,l9_6422,l9_6423);
float l9_6427=step(abs(l9_6421-l9_6426),9.9999997e-06);
l9_6425*=(l9_6427+((1.0-float(l9_6424))*(1.0-l9_6427)));
l9_6421=l9_6426;
l9_6398.x=l9_6421;
l9_6408=l9_6425;
bool l9_6428=l9_6404;
bool l9_6429;
if (l9_6428)
{
l9_6429=l9_6401.y==3;
}
else
{
l9_6429=l9_6428;
}
float l9_6430=l9_6398.y;
float l9_6431=l9_6403.y;
float l9_6432=l9_6403.w;
bool l9_6433=l9_6429;
float l9_6434=l9_6408;
float l9_6435=fast::clamp(l9_6430,l9_6431,l9_6432);
float l9_6436=step(abs(l9_6430-l9_6435),9.9999997e-06);
l9_6434*=(l9_6436+((1.0-float(l9_6433))*(1.0-l9_6436)));
l9_6430=l9_6435;
l9_6398.y=l9_6430;
l9_6408=l9_6434;
}
float2 l9_6437=l9_6398;
bool l9_6438=l9_6399;
float3x3 l9_6439=l9_6400;
if (l9_6438)
{
l9_6437=float2((l9_6439*float3(l9_6437,1.0)).xy);
}
float2 l9_6440=l9_6437;
l9_6398=l9_6440;
float l9_6441=l9_6398.x;
int l9_6442=l9_6401.x;
bool l9_6443=l9_6407;
float l9_6444=l9_6408;
if ((l9_6442==0)||(l9_6442==3))
{
float l9_6445=l9_6441;
float l9_6446=0.0;
float l9_6447=1.0;
bool l9_6448=l9_6443;
float l9_6449=l9_6444;
float l9_6450=fast::clamp(l9_6445,l9_6446,l9_6447);
float l9_6451=step(abs(l9_6445-l9_6450),9.9999997e-06);
l9_6449*=(l9_6451+((1.0-float(l9_6448))*(1.0-l9_6451)));
l9_6445=l9_6450;
l9_6441=l9_6445;
l9_6444=l9_6449;
}
l9_6398.x=l9_6441;
l9_6408=l9_6444;
float l9_6452=l9_6398.y;
int l9_6453=l9_6401.y;
bool l9_6454=l9_6407;
float l9_6455=l9_6408;
if ((l9_6453==0)||(l9_6453==3))
{
float l9_6456=l9_6452;
float l9_6457=0.0;
float l9_6458=1.0;
bool l9_6459=l9_6454;
float l9_6460=l9_6455;
float l9_6461=fast::clamp(l9_6456,l9_6457,l9_6458);
float l9_6462=step(abs(l9_6456-l9_6461),9.9999997e-06);
l9_6460*=(l9_6462+((1.0-float(l9_6459))*(1.0-l9_6462)));
l9_6456=l9_6461;
l9_6452=l9_6456;
l9_6455=l9_6460;
}
l9_6398.y=l9_6452;
l9_6408=l9_6455;
float2 l9_6463=l9_6398;
int l9_6464=l9_6396;
int l9_6465=l9_6397;
float l9_6466=l9_6406;
float2 l9_6467=l9_6463;
int l9_6468=l9_6464;
int l9_6469=l9_6465;
float3 l9_6470=float3(0.0);
if (l9_6468==0)
{
l9_6470=float3(l9_6467,0.0);
}
else
{
if (l9_6468==1)
{
l9_6470=float3(l9_6467.x,(l9_6467.y*0.5)+(0.5-(float(l9_6469)*0.5)),0.0);
}
else
{
l9_6470=float3(l9_6467,float(l9_6469));
}
}
float3 l9_6471=l9_6470;
float3 l9_6472=l9_6471;
float4 l9_6473=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_6472.xy,level(l9_6466));
float4 l9_6474=l9_6473;
if (l9_6404)
{
l9_6474=mix(l9_6405,l9_6474,float4(l9_6408));
}
float4 l9_6475=l9_6474;
l9_6384=l9_6475.x;
float l9_6476=l9_6384;
float l9_6477=l9_6476;
float l9_6478=l9_5425+N319_res;
float l9_6479=0.0;
float l9_6480=(*sc_set0.UserUniforms).Tweak_N297_curveData.x;
float l9_6481=(*sc_set0.UserUniforms).Tweak_N297_curveData.y;
float l9_6482=(*sc_set0.UserUniforms).Tweak_N297_curveData.z;
float l9_6483=(l9_6478-l9_6481)/(l9_6482-l9_6481);
float2 l9_6484=float2(l9_6483,l9_6480);
l9_6484=fast::clamp(l9_6484,float2(0.0),float2(1.0));
int l9_6485;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_6486=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_6486=0;
}
else
{
l9_6486=gl_InstanceIndex%2;
}
int l9_6487=l9_6486;
l9_6485=1-l9_6487;
}
else
{
int l9_6488=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_6488=0;
}
else
{
l9_6488=gl_InstanceIndex%2;
}
int l9_6489=l9_6488;
l9_6485=l9_6489;
}
int l9_6490=l9_6485;
int l9_6491=sc_CurveAtlasLayout_tmp;
int l9_6492=l9_6490;
float2 l9_6493=l9_6484;
bool l9_6494=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_6495=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_6496=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_6497=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_6498=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_6499=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_6500=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_6501=0.0;
bool l9_6502=l9_6499&&(!l9_6497);
float l9_6503=1.0;
float l9_6504=l9_6493.x;
int l9_6505=l9_6496.x;
if (l9_6505==1)
{
l9_6504=fract(l9_6504);
}
else
{
if (l9_6505==2)
{
float l9_6506=fract(l9_6504);
float l9_6507=l9_6504-l9_6506;
float l9_6508=step(0.25,fract(l9_6507*0.5));
l9_6504=mix(l9_6506,1.0-l9_6506,fast::clamp(l9_6508,0.0,1.0));
}
}
l9_6493.x=l9_6504;
float l9_6509=l9_6493.y;
int l9_6510=l9_6496.y;
if (l9_6510==1)
{
l9_6509=fract(l9_6509);
}
else
{
if (l9_6510==2)
{
float l9_6511=fract(l9_6509);
float l9_6512=l9_6509-l9_6511;
float l9_6513=step(0.25,fract(l9_6512*0.5));
l9_6509=mix(l9_6511,1.0-l9_6511,fast::clamp(l9_6513,0.0,1.0));
}
}
l9_6493.y=l9_6509;
if (l9_6497)
{
bool l9_6514=l9_6499;
bool l9_6515;
if (l9_6514)
{
l9_6515=l9_6496.x==3;
}
else
{
l9_6515=l9_6514;
}
float l9_6516=l9_6493.x;
float l9_6517=l9_6498.x;
float l9_6518=l9_6498.z;
bool l9_6519=l9_6515;
float l9_6520=l9_6503;
float l9_6521=fast::clamp(l9_6516,l9_6517,l9_6518);
float l9_6522=step(abs(l9_6516-l9_6521),9.9999997e-06);
l9_6520*=(l9_6522+((1.0-float(l9_6519))*(1.0-l9_6522)));
l9_6516=l9_6521;
l9_6493.x=l9_6516;
l9_6503=l9_6520;
bool l9_6523=l9_6499;
bool l9_6524;
if (l9_6523)
{
l9_6524=l9_6496.y==3;
}
else
{
l9_6524=l9_6523;
}
float l9_6525=l9_6493.y;
float l9_6526=l9_6498.y;
float l9_6527=l9_6498.w;
bool l9_6528=l9_6524;
float l9_6529=l9_6503;
float l9_6530=fast::clamp(l9_6525,l9_6526,l9_6527);
float l9_6531=step(abs(l9_6525-l9_6530),9.9999997e-06);
l9_6529*=(l9_6531+((1.0-float(l9_6528))*(1.0-l9_6531)));
l9_6525=l9_6530;
l9_6493.y=l9_6525;
l9_6503=l9_6529;
}
float2 l9_6532=l9_6493;
bool l9_6533=l9_6494;
float3x3 l9_6534=l9_6495;
if (l9_6533)
{
l9_6532=float2((l9_6534*float3(l9_6532,1.0)).xy);
}
float2 l9_6535=l9_6532;
l9_6493=l9_6535;
float l9_6536=l9_6493.x;
int l9_6537=l9_6496.x;
bool l9_6538=l9_6502;
float l9_6539=l9_6503;
if ((l9_6537==0)||(l9_6537==3))
{
float l9_6540=l9_6536;
float l9_6541=0.0;
float l9_6542=1.0;
bool l9_6543=l9_6538;
float l9_6544=l9_6539;
float l9_6545=fast::clamp(l9_6540,l9_6541,l9_6542);
float l9_6546=step(abs(l9_6540-l9_6545),9.9999997e-06);
l9_6544*=(l9_6546+((1.0-float(l9_6543))*(1.0-l9_6546)));
l9_6540=l9_6545;
l9_6536=l9_6540;
l9_6539=l9_6544;
}
l9_6493.x=l9_6536;
l9_6503=l9_6539;
float l9_6547=l9_6493.y;
int l9_6548=l9_6496.y;
bool l9_6549=l9_6502;
float l9_6550=l9_6503;
if ((l9_6548==0)||(l9_6548==3))
{
float l9_6551=l9_6547;
float l9_6552=0.0;
float l9_6553=1.0;
bool l9_6554=l9_6549;
float l9_6555=l9_6550;
float l9_6556=fast::clamp(l9_6551,l9_6552,l9_6553);
float l9_6557=step(abs(l9_6551-l9_6556),9.9999997e-06);
l9_6555*=(l9_6557+((1.0-float(l9_6554))*(1.0-l9_6557)));
l9_6551=l9_6556;
l9_6547=l9_6551;
l9_6550=l9_6555;
}
l9_6493.y=l9_6547;
l9_6503=l9_6550;
float2 l9_6558=l9_6493;
int l9_6559=l9_6491;
int l9_6560=l9_6492;
float l9_6561=l9_6501;
float2 l9_6562=l9_6558;
int l9_6563=l9_6559;
int l9_6564=l9_6560;
float3 l9_6565=float3(0.0);
if (l9_6563==0)
{
l9_6565=float3(l9_6562,0.0);
}
else
{
if (l9_6563==1)
{
l9_6565=float3(l9_6562.x,(l9_6562.y*0.5)+(0.5-(float(l9_6564)*0.5)),0.0);
}
else
{
l9_6565=float3(l9_6562,float(l9_6564));
}
}
float3 l9_6566=l9_6565;
float3 l9_6567=l9_6566;
float4 l9_6568=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_6567.xy,level(l9_6561));
float4 l9_6569=l9_6568;
if (l9_6499)
{
l9_6569=mix(l9_6500,l9_6569,float4(l9_6503));
}
float4 l9_6570=l9_6569;
l9_6479=l9_6570.x;
float l9_6571=l9_6479;
float3 l9_6572=float3(l9_6382,l9_6477,l9_6571);
l9_5429=normalize(l9_6572-l9_6287);
l9_5402=l9_5426;
l9_5403=l9_5427;
l9_5404=l9_5428;
l9_5405=l9_5429;
float l9_6573=l9_5410;
float l9_6574=0.0;
float l9_6575=(*sc_set0.UserUniforms).Tweak_N299_curveData.x;
float l9_6576=(*sc_set0.UserUniforms).Tweak_N299_curveData.y;
float l9_6577=(*sc_set0.UserUniforms).Tweak_N299_curveData.z;
float l9_6578=(l9_6573-l9_6576)/(l9_6577-l9_6576);
float2 l9_6579=float2(l9_6578,l9_6575);
l9_6579=fast::clamp(l9_6579,float2(0.0),float2(1.0));
int l9_6580;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_6581=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_6581=0;
}
else
{
l9_6581=gl_InstanceIndex%2;
}
int l9_6582=l9_6581;
l9_6580=1-l9_6582;
}
else
{
int l9_6583=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_6583=0;
}
else
{
l9_6583=gl_InstanceIndex%2;
}
int l9_6584=l9_6583;
l9_6580=l9_6584;
}
int l9_6585=l9_6580;
int l9_6586=sc_CurveAtlasLayout_tmp;
int l9_6587=l9_6585;
float2 l9_6588=l9_6579;
bool l9_6589=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_6590=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_6591=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_6592=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_6593=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_6594=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_6595=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_6596=0.0;
bool l9_6597=l9_6594&&(!l9_6592);
float l9_6598=1.0;
float l9_6599=l9_6588.x;
int l9_6600=l9_6591.x;
if (l9_6600==1)
{
l9_6599=fract(l9_6599);
}
else
{
if (l9_6600==2)
{
float l9_6601=fract(l9_6599);
float l9_6602=l9_6599-l9_6601;
float l9_6603=step(0.25,fract(l9_6602*0.5));
l9_6599=mix(l9_6601,1.0-l9_6601,fast::clamp(l9_6603,0.0,1.0));
}
}
l9_6588.x=l9_6599;
float l9_6604=l9_6588.y;
int l9_6605=l9_6591.y;
if (l9_6605==1)
{
l9_6604=fract(l9_6604);
}
else
{
if (l9_6605==2)
{
float l9_6606=fract(l9_6604);
float l9_6607=l9_6604-l9_6606;
float l9_6608=step(0.25,fract(l9_6607*0.5));
l9_6604=mix(l9_6606,1.0-l9_6606,fast::clamp(l9_6608,0.0,1.0));
}
}
l9_6588.y=l9_6604;
if (l9_6592)
{
bool l9_6609=l9_6594;
bool l9_6610;
if (l9_6609)
{
l9_6610=l9_6591.x==3;
}
else
{
l9_6610=l9_6609;
}
float l9_6611=l9_6588.x;
float l9_6612=l9_6593.x;
float l9_6613=l9_6593.z;
bool l9_6614=l9_6610;
float l9_6615=l9_6598;
float l9_6616=fast::clamp(l9_6611,l9_6612,l9_6613);
float l9_6617=step(abs(l9_6611-l9_6616),9.9999997e-06);
l9_6615*=(l9_6617+((1.0-float(l9_6614))*(1.0-l9_6617)));
l9_6611=l9_6616;
l9_6588.x=l9_6611;
l9_6598=l9_6615;
bool l9_6618=l9_6594;
bool l9_6619;
if (l9_6618)
{
l9_6619=l9_6591.y==3;
}
else
{
l9_6619=l9_6618;
}
float l9_6620=l9_6588.y;
float l9_6621=l9_6593.y;
float l9_6622=l9_6593.w;
bool l9_6623=l9_6619;
float l9_6624=l9_6598;
float l9_6625=fast::clamp(l9_6620,l9_6621,l9_6622);
float l9_6626=step(abs(l9_6620-l9_6625),9.9999997e-06);
l9_6624*=(l9_6626+((1.0-float(l9_6623))*(1.0-l9_6626)));
l9_6620=l9_6625;
l9_6588.y=l9_6620;
l9_6598=l9_6624;
}
float2 l9_6627=l9_6588;
bool l9_6628=l9_6589;
float3x3 l9_6629=l9_6590;
if (l9_6628)
{
l9_6627=float2((l9_6629*float3(l9_6627,1.0)).xy);
}
float2 l9_6630=l9_6627;
l9_6588=l9_6630;
float l9_6631=l9_6588.x;
int l9_6632=l9_6591.x;
bool l9_6633=l9_6597;
float l9_6634=l9_6598;
if ((l9_6632==0)||(l9_6632==3))
{
float l9_6635=l9_6631;
float l9_6636=0.0;
float l9_6637=1.0;
bool l9_6638=l9_6633;
float l9_6639=l9_6634;
float l9_6640=fast::clamp(l9_6635,l9_6636,l9_6637);
float l9_6641=step(abs(l9_6635-l9_6640),9.9999997e-06);
l9_6639*=(l9_6641+((1.0-float(l9_6638))*(1.0-l9_6641)));
l9_6635=l9_6640;
l9_6631=l9_6635;
l9_6634=l9_6639;
}
l9_6588.x=l9_6631;
l9_6598=l9_6634;
float l9_6642=l9_6588.y;
int l9_6643=l9_6591.y;
bool l9_6644=l9_6597;
float l9_6645=l9_6598;
if ((l9_6643==0)||(l9_6643==3))
{
float l9_6646=l9_6642;
float l9_6647=0.0;
float l9_6648=1.0;
bool l9_6649=l9_6644;
float l9_6650=l9_6645;
float l9_6651=fast::clamp(l9_6646,l9_6647,l9_6648);
float l9_6652=step(abs(l9_6646-l9_6651),9.9999997e-06);
l9_6650*=(l9_6652+((1.0-float(l9_6649))*(1.0-l9_6652)));
l9_6646=l9_6651;
l9_6642=l9_6646;
l9_6645=l9_6650;
}
l9_6588.y=l9_6642;
l9_6598=l9_6645;
float2 l9_6653=l9_6588;
int l9_6654=l9_6586;
int l9_6655=l9_6587;
float l9_6656=l9_6596;
float2 l9_6657=l9_6653;
int l9_6658=l9_6654;
int l9_6659=l9_6655;
float3 l9_6660=float3(0.0);
if (l9_6658==0)
{
l9_6660=float3(l9_6657,0.0);
}
else
{
if (l9_6658==1)
{
l9_6660=float3(l9_6657.x,(l9_6657.y*0.5)+(0.5-(float(l9_6659)*0.5)),0.0);
}
else
{
l9_6660=float3(l9_6657,float(l9_6659));
}
}
float3 l9_6661=l9_6660;
float3 l9_6662=l9_6661;
float4 l9_6663=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_6662.xy,level(l9_6656));
float4 l9_6664=l9_6663;
if (l9_6594)
{
l9_6664=mix(l9_6595,l9_6664,float4(l9_6598));
}
float4 l9_6665=l9_6664;
l9_6574=l9_6665.x;
float l9_6666=l9_6574;
float l9_6667=l9_6666;
float l9_6668;
if (N319_curvThickEnable)
{
l9_6668=N319_thicknessRad*l9_6667;
}
else
{
l9_6668=N319_thicknessRad;
}
float l9_6669=l9_6668;
float l9_6670=l9_5410;
float l9_6671=0.0;
float l9_6672=(*sc_set0.UserUniforms).Tweak_N293_curveData.x;
float l9_6673=(*sc_set0.UserUniforms).Tweak_N293_curveData.y;
float l9_6674=(*sc_set0.UserUniforms).Tweak_N293_curveData.z;
float l9_6675=(l9_6670-l9_6673)/(l9_6674-l9_6673);
float2 l9_6676=float2(l9_6675,l9_6672);
l9_6676=fast::clamp(l9_6676,float2(0.0),float2(1.0));
int l9_6677;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_6678=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_6678=0;
}
else
{
l9_6678=gl_InstanceIndex%2;
}
int l9_6679=l9_6678;
l9_6677=1-l9_6679;
}
else
{
int l9_6680=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_6680=0;
}
else
{
l9_6680=gl_InstanceIndex%2;
}
int l9_6681=l9_6680;
l9_6677=l9_6681;
}
int l9_6682=l9_6677;
int l9_6683=sc_CurveAtlasLayout_tmp;
int l9_6684=l9_6682;
float2 l9_6685=l9_6676;
bool l9_6686=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_6687=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_6688=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_6689=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_6690=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_6691=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_6692=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_6693=0.0;
bool l9_6694=l9_6691&&(!l9_6689);
float l9_6695=1.0;
float l9_6696=l9_6685.x;
int l9_6697=l9_6688.x;
if (l9_6697==1)
{
l9_6696=fract(l9_6696);
}
else
{
if (l9_6697==2)
{
float l9_6698=fract(l9_6696);
float l9_6699=l9_6696-l9_6698;
float l9_6700=step(0.25,fract(l9_6699*0.5));
l9_6696=mix(l9_6698,1.0-l9_6698,fast::clamp(l9_6700,0.0,1.0));
}
}
l9_6685.x=l9_6696;
float l9_6701=l9_6685.y;
int l9_6702=l9_6688.y;
if (l9_6702==1)
{
l9_6701=fract(l9_6701);
}
else
{
if (l9_6702==2)
{
float l9_6703=fract(l9_6701);
float l9_6704=l9_6701-l9_6703;
float l9_6705=step(0.25,fract(l9_6704*0.5));
l9_6701=mix(l9_6703,1.0-l9_6703,fast::clamp(l9_6705,0.0,1.0));
}
}
l9_6685.y=l9_6701;
if (l9_6689)
{
bool l9_6706=l9_6691;
bool l9_6707;
if (l9_6706)
{
l9_6707=l9_6688.x==3;
}
else
{
l9_6707=l9_6706;
}
float l9_6708=l9_6685.x;
float l9_6709=l9_6690.x;
float l9_6710=l9_6690.z;
bool l9_6711=l9_6707;
float l9_6712=l9_6695;
float l9_6713=fast::clamp(l9_6708,l9_6709,l9_6710);
float l9_6714=step(abs(l9_6708-l9_6713),9.9999997e-06);
l9_6712*=(l9_6714+((1.0-float(l9_6711))*(1.0-l9_6714)));
l9_6708=l9_6713;
l9_6685.x=l9_6708;
l9_6695=l9_6712;
bool l9_6715=l9_6691;
bool l9_6716;
if (l9_6715)
{
l9_6716=l9_6688.y==3;
}
else
{
l9_6716=l9_6715;
}
float l9_6717=l9_6685.y;
float l9_6718=l9_6690.y;
float l9_6719=l9_6690.w;
bool l9_6720=l9_6716;
float l9_6721=l9_6695;
float l9_6722=fast::clamp(l9_6717,l9_6718,l9_6719);
float l9_6723=step(abs(l9_6717-l9_6722),9.9999997e-06);
l9_6721*=(l9_6723+((1.0-float(l9_6720))*(1.0-l9_6723)));
l9_6717=l9_6722;
l9_6685.y=l9_6717;
l9_6695=l9_6721;
}
float2 l9_6724=l9_6685;
bool l9_6725=l9_6686;
float3x3 l9_6726=l9_6687;
if (l9_6725)
{
l9_6724=float2((l9_6726*float3(l9_6724,1.0)).xy);
}
float2 l9_6727=l9_6724;
l9_6685=l9_6727;
float l9_6728=l9_6685.x;
int l9_6729=l9_6688.x;
bool l9_6730=l9_6694;
float l9_6731=l9_6695;
if ((l9_6729==0)||(l9_6729==3))
{
float l9_6732=l9_6728;
float l9_6733=0.0;
float l9_6734=1.0;
bool l9_6735=l9_6730;
float l9_6736=l9_6731;
float l9_6737=fast::clamp(l9_6732,l9_6733,l9_6734);
float l9_6738=step(abs(l9_6732-l9_6737),9.9999997e-06);
l9_6736*=(l9_6738+((1.0-float(l9_6735))*(1.0-l9_6738)));
l9_6732=l9_6737;
l9_6728=l9_6732;
l9_6731=l9_6736;
}
l9_6685.x=l9_6728;
l9_6695=l9_6731;
float l9_6739=l9_6685.y;
int l9_6740=l9_6688.y;
bool l9_6741=l9_6694;
float l9_6742=l9_6695;
if ((l9_6740==0)||(l9_6740==3))
{
float l9_6743=l9_6739;
float l9_6744=0.0;
float l9_6745=1.0;
bool l9_6746=l9_6741;
float l9_6747=l9_6742;
float l9_6748=fast::clamp(l9_6743,l9_6744,l9_6745);
float l9_6749=step(abs(l9_6743-l9_6748),9.9999997e-06);
l9_6747*=(l9_6749+((1.0-float(l9_6746))*(1.0-l9_6749)));
l9_6743=l9_6748;
l9_6739=l9_6743;
l9_6742=l9_6747;
}
l9_6685.y=l9_6739;
l9_6695=l9_6742;
float2 l9_6750=l9_6685;
int l9_6751=l9_6683;
int l9_6752=l9_6684;
float l9_6753=l9_6693;
float2 l9_6754=l9_6750;
int l9_6755=l9_6751;
int l9_6756=l9_6752;
float3 l9_6757=float3(0.0);
if (l9_6755==0)
{
l9_6757=float3(l9_6754,0.0);
}
else
{
if (l9_6755==1)
{
l9_6757=float3(l9_6754.x,(l9_6754.y*0.5)+(0.5-(float(l9_6756)*0.5)),0.0);
}
else
{
l9_6757=float3(l9_6754,float(l9_6756));
}
}
float3 l9_6758=l9_6757;
float3 l9_6759=l9_6758;
float4 l9_6760=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_6759.xy,level(l9_6753));
float4 l9_6761=l9_6760;
if (l9_6691)
{
l9_6761=mix(l9_6692,l9_6761,float4(l9_6695));
}
float4 l9_6762=l9_6761;
l9_6671=l9_6762.x;
float l9_6763=l9_6671;
float l9_6764=l9_6763;
float l9_6765=l9_5410;
float l9_6766=0.0;
float l9_6767=(*sc_set0.UserUniforms).Tweak_N305_curveData.x;
float l9_6768=(*sc_set0.UserUniforms).Tweak_N305_curveData.y;
float l9_6769=(*sc_set0.UserUniforms).Tweak_N305_curveData.z;
float l9_6770=(l9_6765-l9_6768)/(l9_6769-l9_6768);
float2 l9_6771=float2(l9_6770,l9_6767);
l9_6771=fast::clamp(l9_6771,float2(0.0),float2(1.0));
int l9_6772;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_6773=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_6773=0;
}
else
{
l9_6773=gl_InstanceIndex%2;
}
int l9_6774=l9_6773;
l9_6772=1-l9_6774;
}
else
{
int l9_6775=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_6775=0;
}
else
{
l9_6775=gl_InstanceIndex%2;
}
int l9_6776=l9_6775;
l9_6772=l9_6776;
}
int l9_6777=l9_6772;
int l9_6778=sc_CurveAtlasLayout_tmp;
int l9_6779=l9_6777;
float2 l9_6780=l9_6771;
bool l9_6781=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_6782=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_6783=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_6784=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_6785=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_6786=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_6787=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_6788=0.0;
bool l9_6789=l9_6786&&(!l9_6784);
float l9_6790=1.0;
float l9_6791=l9_6780.x;
int l9_6792=l9_6783.x;
if (l9_6792==1)
{
l9_6791=fract(l9_6791);
}
else
{
if (l9_6792==2)
{
float l9_6793=fract(l9_6791);
float l9_6794=l9_6791-l9_6793;
float l9_6795=step(0.25,fract(l9_6794*0.5));
l9_6791=mix(l9_6793,1.0-l9_6793,fast::clamp(l9_6795,0.0,1.0));
}
}
l9_6780.x=l9_6791;
float l9_6796=l9_6780.y;
int l9_6797=l9_6783.y;
if (l9_6797==1)
{
l9_6796=fract(l9_6796);
}
else
{
if (l9_6797==2)
{
float l9_6798=fract(l9_6796);
float l9_6799=l9_6796-l9_6798;
float l9_6800=step(0.25,fract(l9_6799*0.5));
l9_6796=mix(l9_6798,1.0-l9_6798,fast::clamp(l9_6800,0.0,1.0));
}
}
l9_6780.y=l9_6796;
if (l9_6784)
{
bool l9_6801=l9_6786;
bool l9_6802;
if (l9_6801)
{
l9_6802=l9_6783.x==3;
}
else
{
l9_6802=l9_6801;
}
float l9_6803=l9_6780.x;
float l9_6804=l9_6785.x;
float l9_6805=l9_6785.z;
bool l9_6806=l9_6802;
float l9_6807=l9_6790;
float l9_6808=fast::clamp(l9_6803,l9_6804,l9_6805);
float l9_6809=step(abs(l9_6803-l9_6808),9.9999997e-06);
l9_6807*=(l9_6809+((1.0-float(l9_6806))*(1.0-l9_6809)));
l9_6803=l9_6808;
l9_6780.x=l9_6803;
l9_6790=l9_6807;
bool l9_6810=l9_6786;
bool l9_6811;
if (l9_6810)
{
l9_6811=l9_6783.y==3;
}
else
{
l9_6811=l9_6810;
}
float l9_6812=l9_6780.y;
float l9_6813=l9_6785.y;
float l9_6814=l9_6785.w;
bool l9_6815=l9_6811;
float l9_6816=l9_6790;
float l9_6817=fast::clamp(l9_6812,l9_6813,l9_6814);
float l9_6818=step(abs(l9_6812-l9_6817),9.9999997e-06);
l9_6816*=(l9_6818+((1.0-float(l9_6815))*(1.0-l9_6818)));
l9_6812=l9_6817;
l9_6780.y=l9_6812;
l9_6790=l9_6816;
}
float2 l9_6819=l9_6780;
bool l9_6820=l9_6781;
float3x3 l9_6821=l9_6782;
if (l9_6820)
{
l9_6819=float2((l9_6821*float3(l9_6819,1.0)).xy);
}
float2 l9_6822=l9_6819;
l9_6780=l9_6822;
float l9_6823=l9_6780.x;
int l9_6824=l9_6783.x;
bool l9_6825=l9_6789;
float l9_6826=l9_6790;
if ((l9_6824==0)||(l9_6824==3))
{
float l9_6827=l9_6823;
float l9_6828=0.0;
float l9_6829=1.0;
bool l9_6830=l9_6825;
float l9_6831=l9_6826;
float l9_6832=fast::clamp(l9_6827,l9_6828,l9_6829);
float l9_6833=step(abs(l9_6827-l9_6832),9.9999997e-06);
l9_6831*=(l9_6833+((1.0-float(l9_6830))*(1.0-l9_6833)));
l9_6827=l9_6832;
l9_6823=l9_6827;
l9_6826=l9_6831;
}
l9_6780.x=l9_6823;
l9_6790=l9_6826;
float l9_6834=l9_6780.y;
int l9_6835=l9_6783.y;
bool l9_6836=l9_6789;
float l9_6837=l9_6790;
if ((l9_6835==0)||(l9_6835==3))
{
float l9_6838=l9_6834;
float l9_6839=0.0;
float l9_6840=1.0;
bool l9_6841=l9_6836;
float l9_6842=l9_6837;
float l9_6843=fast::clamp(l9_6838,l9_6839,l9_6840);
float l9_6844=step(abs(l9_6838-l9_6843),9.9999997e-06);
l9_6842*=(l9_6844+((1.0-float(l9_6841))*(1.0-l9_6844)));
l9_6838=l9_6843;
l9_6834=l9_6838;
l9_6837=l9_6842;
}
l9_6780.y=l9_6834;
l9_6790=l9_6837;
float2 l9_6845=l9_6780;
int l9_6846=l9_6778;
int l9_6847=l9_6779;
float l9_6848=l9_6788;
float2 l9_6849=l9_6845;
int l9_6850=l9_6846;
int l9_6851=l9_6847;
float3 l9_6852=float3(0.0);
if (l9_6850==0)
{
l9_6852=float3(l9_6849,0.0);
}
else
{
if (l9_6850==1)
{
l9_6852=float3(l9_6849.x,(l9_6849.y*0.5)+(0.5-(float(l9_6851)*0.5)),0.0);
}
else
{
l9_6852=float3(l9_6849,float(l9_6851));
}
}
float3 l9_6853=l9_6852;
float3 l9_6854=l9_6853;
float4 l9_6855=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_6854.xy,level(l9_6848));
float4 l9_6856=l9_6855;
if (l9_6786)
{
l9_6856=mix(l9_6787,l9_6856,float4(l9_6790));
}
float4 l9_6857=l9_6856;
l9_6766=l9_6857.x;
float l9_6858=l9_6766;
float l9_6859=l9_6858;
float l9_6860=l9_5410;
float l9_6861=0.0;
float l9_6862=(*sc_set0.UserUniforms).Tweak_N297_curveData.x;
float l9_6863=(*sc_set0.UserUniforms).Tweak_N297_curveData.y;
float l9_6864=(*sc_set0.UserUniforms).Tweak_N297_curveData.z;
float l9_6865=(l9_6860-l9_6863)/(l9_6864-l9_6863);
float2 l9_6866=float2(l9_6865,l9_6862);
l9_6866=fast::clamp(l9_6866,float2(0.0),float2(1.0));
int l9_6867;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_6868=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_6868=0;
}
else
{
l9_6868=gl_InstanceIndex%2;
}
int l9_6869=l9_6868;
l9_6867=1-l9_6869;
}
else
{
int l9_6870=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_6870=0;
}
else
{
l9_6870=gl_InstanceIndex%2;
}
int l9_6871=l9_6870;
l9_6867=l9_6871;
}
int l9_6872=l9_6867;
int l9_6873=sc_CurveAtlasLayout_tmp;
int l9_6874=l9_6872;
float2 l9_6875=l9_6866;
bool l9_6876=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_6877=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_6878=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_6879=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_6880=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_6881=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_6882=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_6883=0.0;
bool l9_6884=l9_6881&&(!l9_6879);
float l9_6885=1.0;
float l9_6886=l9_6875.x;
int l9_6887=l9_6878.x;
if (l9_6887==1)
{
l9_6886=fract(l9_6886);
}
else
{
if (l9_6887==2)
{
float l9_6888=fract(l9_6886);
float l9_6889=l9_6886-l9_6888;
float l9_6890=step(0.25,fract(l9_6889*0.5));
l9_6886=mix(l9_6888,1.0-l9_6888,fast::clamp(l9_6890,0.0,1.0));
}
}
l9_6875.x=l9_6886;
float l9_6891=l9_6875.y;
int l9_6892=l9_6878.y;
if (l9_6892==1)
{
l9_6891=fract(l9_6891);
}
else
{
if (l9_6892==2)
{
float l9_6893=fract(l9_6891);
float l9_6894=l9_6891-l9_6893;
float l9_6895=step(0.25,fract(l9_6894*0.5));
l9_6891=mix(l9_6893,1.0-l9_6893,fast::clamp(l9_6895,0.0,1.0));
}
}
l9_6875.y=l9_6891;
if (l9_6879)
{
bool l9_6896=l9_6881;
bool l9_6897;
if (l9_6896)
{
l9_6897=l9_6878.x==3;
}
else
{
l9_6897=l9_6896;
}
float l9_6898=l9_6875.x;
float l9_6899=l9_6880.x;
float l9_6900=l9_6880.z;
bool l9_6901=l9_6897;
float l9_6902=l9_6885;
float l9_6903=fast::clamp(l9_6898,l9_6899,l9_6900);
float l9_6904=step(abs(l9_6898-l9_6903),9.9999997e-06);
l9_6902*=(l9_6904+((1.0-float(l9_6901))*(1.0-l9_6904)));
l9_6898=l9_6903;
l9_6875.x=l9_6898;
l9_6885=l9_6902;
bool l9_6905=l9_6881;
bool l9_6906;
if (l9_6905)
{
l9_6906=l9_6878.y==3;
}
else
{
l9_6906=l9_6905;
}
float l9_6907=l9_6875.y;
float l9_6908=l9_6880.y;
float l9_6909=l9_6880.w;
bool l9_6910=l9_6906;
float l9_6911=l9_6885;
float l9_6912=fast::clamp(l9_6907,l9_6908,l9_6909);
float l9_6913=step(abs(l9_6907-l9_6912),9.9999997e-06);
l9_6911*=(l9_6913+((1.0-float(l9_6910))*(1.0-l9_6913)));
l9_6907=l9_6912;
l9_6875.y=l9_6907;
l9_6885=l9_6911;
}
float2 l9_6914=l9_6875;
bool l9_6915=l9_6876;
float3x3 l9_6916=l9_6877;
if (l9_6915)
{
l9_6914=float2((l9_6916*float3(l9_6914,1.0)).xy);
}
float2 l9_6917=l9_6914;
l9_6875=l9_6917;
float l9_6918=l9_6875.x;
int l9_6919=l9_6878.x;
bool l9_6920=l9_6884;
float l9_6921=l9_6885;
if ((l9_6919==0)||(l9_6919==3))
{
float l9_6922=l9_6918;
float l9_6923=0.0;
float l9_6924=1.0;
bool l9_6925=l9_6920;
float l9_6926=l9_6921;
float l9_6927=fast::clamp(l9_6922,l9_6923,l9_6924);
float l9_6928=step(abs(l9_6922-l9_6927),9.9999997e-06);
l9_6926*=(l9_6928+((1.0-float(l9_6925))*(1.0-l9_6928)));
l9_6922=l9_6927;
l9_6918=l9_6922;
l9_6921=l9_6926;
}
l9_6875.x=l9_6918;
l9_6885=l9_6921;
float l9_6929=l9_6875.y;
int l9_6930=l9_6878.y;
bool l9_6931=l9_6884;
float l9_6932=l9_6885;
if ((l9_6930==0)||(l9_6930==3))
{
float l9_6933=l9_6929;
float l9_6934=0.0;
float l9_6935=1.0;
bool l9_6936=l9_6931;
float l9_6937=l9_6932;
float l9_6938=fast::clamp(l9_6933,l9_6934,l9_6935);
float l9_6939=step(abs(l9_6933-l9_6938),9.9999997e-06);
l9_6937*=(l9_6939+((1.0-float(l9_6936))*(1.0-l9_6939)));
l9_6933=l9_6938;
l9_6929=l9_6933;
l9_6932=l9_6937;
}
l9_6875.y=l9_6929;
l9_6885=l9_6932;
float2 l9_6940=l9_6875;
int l9_6941=l9_6873;
int l9_6942=l9_6874;
float l9_6943=l9_6883;
float2 l9_6944=l9_6940;
int l9_6945=l9_6941;
int l9_6946=l9_6942;
float3 l9_6947=float3(0.0);
if (l9_6945==0)
{
l9_6947=float3(l9_6944,0.0);
}
else
{
if (l9_6945==1)
{
l9_6947=float3(l9_6944.x,(l9_6944.y*0.5)+(0.5-(float(l9_6946)*0.5)),0.0);
}
else
{
l9_6947=float3(l9_6944,float(l9_6946));
}
}
float3 l9_6948=l9_6947;
float3 l9_6949=l9_6948;
float4 l9_6950=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_6949.xy,level(l9_6943));
float4 l9_6951=l9_6950;
if (l9_6881)
{
l9_6951=mix(l9_6882,l9_6951,float4(l9_6885));
}
float4 l9_6952=l9_6951;
l9_6861=l9_6952.x;
float l9_6953=l9_6861;
float3 l9_6954=float3(l9_6764,l9_6859,l9_6953)*N319_scaleXYZ;
float3 l9_6955=mix(l9_6954+(((l9_5403*cos(l9_5413))+(l9_5404*sin(l9_5413)))*l9_6669),l9_6954,float3(l9_5424*N319_VolumeFill));
float3 l9_6956;
if (l9_5410>1.0)
{
l9_6956=l9_6955/float3(0.0);
}
else
{
l9_6956=l9_6955;
}
l9_6955=l9_6956;
tempGlobals.N319_curveDirection=l9_5405;
N319_Result=l9_6955*N319_Scale;
l9_5401=N319_Result;
l9_5388=l9_5401;
l9_4737=l9_5388;
l9_4741=l9_4737;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==7)
{
float l9_6957=0.0;
float l9_6958=float((*sc_set0.UserUniforms).Tweak_N271);
l9_6957=l9_6958;
float l9_6959=0.0;
float l9_6960=(*sc_set0.UserUniforms).Tweak_N273;
l9_6959=l9_6960;
float2 l9_6961=float2(0.0);
float2 l9_6962=(*sc_set0.UserUniforms).Tweak_N270;
l9_6961=l9_6962;
float2 l9_6963=float2(0.0);
float2 l9_6964=(*sc_set0.UserUniforms).Tweak_N272;
l9_6963=l9_6964;
float l9_6965=0.0;
float l9_6966=(*sc_set0.UserUniforms).Tweak_N269;
l9_6965=l9_6966;
float l9_6967=0.0;
float l9_6968=(*sc_set0.UserUniforms).Tweak_N275;
l9_6967=l9_6968;
float l9_6969=0.0;
float l9_6970=float((*sc_set0.UserUniforms).Tweak_N161);
l9_6969=l9_6970;
float3 l9_6971=float3(0.0);
float l9_6972=l9_6957;
float l9_6973=l9_6959;
float2 l9_6974=l9_6961;
float2 l9_6975=l9_6963;
float l9_6976=l9_6965;
float l9_6977=l9_6967;
float l9_6978=l9_6969;
ssGlobals l9_6979=l9_4740;
tempGlobals=l9_6979;
float3 l9_6980=float3(0.0);
N267_Seed=int(l9_6972);
N267_Depth=l9_6973;
N267_Expand=l9_6974;
N267_Offset=l9_6975;
N267_Thickness=l9_6976;
N267_Push=l9_6977;
N267_pushMetod=int(l9_6978);
int l9_6981=0;
l9_6981=ssInstanceID;
int l9_6982=l9_6981;
float l9_6983=float(l9_6982+N267_Seed);
int l9_6984=int(l9_6983);
int l9_6985=l9_6984^(l9_6984*15299);
int l9_6986=l9_6985;
int l9_6987=l9_6986;
int l9_6988=((l9_6987*((l9_6987*1471343)+101146501))+1559861749)&2147483647;
int l9_6989=l9_6988;
int l9_6990=l9_6986*1399;
int l9_6991=((l9_6990*((l9_6990*1471343)+101146501))+1559861749)&2147483647;
int l9_6992=l9_6991;
int l9_6993=l9_6989;
float l9_6994=float(l9_6993)*4.6566129e-10;
int l9_6995=l9_6992;
float l9_6996=float(l9_6995)*4.6566129e-10;
float2 l9_6997=float2(l9_6994,l9_6996);
float2 l9_6998=l9_6997;
float2 l9_6999=l9_6998;
int l9_7000=0;
l9_7000=ssInstanceID;
int l9_7001=l9_7000;
float l9_7002=float(l9_7001);
int l9_7003=int(l9_7002);
int l9_7004=l9_7003^(l9_7003*15299);
int l9_7005=l9_7004;
int l9_7006=l9_7005;
int l9_7007=((l9_7006*((l9_7006*1471343)+101146501))+1559861749)&2147483647;
int l9_7008=l9_7007;
float l9_7009=float(l9_7008)*4.6566129e-10;
float l9_7010=l9_7009;
float l9_7011=l9_7010;
float l9_7012=l9_7011;
float2 l9_7013=(float2(0.5)-l9_6999)+N267_Offset;
float2 l9_7014=fast::clamp(normalize(l9_7013),float2(-0.5),float2(0.5));
float l9_7015=distance(l9_7013,float2(0.0));
float l9_7016=0.0+(((l9_7015-(N267_Push-0.1))*1.0)/((N267_Push-(N267_Push-0.1))+1e-06));
if (N267_pushMetod==1)
{
l9_7013=mix(l9_7014,l9_7013,float2(fast::clamp(l9_7016,0.0,1.0)));
}
else
{
if (N267_pushMetod==2)
{
l9_7013=mix(l9_7013,l9_7014,float2(N267_Push));
}
}
float l9_7017=(*sc_set0.UserUniforms).sc_Camera.aspect;
l9_7013.x*=l9_7017;
float l9_7018=tempGlobals.CameraFOV;
l9_7013*=(tan(radians(l9_7018)*0.5)*2.0);
float l9_7019=(N267_Depth*((l9_7012-0.5)*2.0))*N267_Thickness;
l9_7013*=(N267_Depth+l9_7019);
float3 l9_7020=float3(l9_7013*N267_Expand,(N267_Depth+l9_7019)*(-1.0));
N267_Result=l9_7020;
l9_6980=N267_Result;
l9_6971=l9_6980;
l9_4738=l9_6971;
l9_4741=l9_4738;
}
else
{
l9_4741=l9_4739;
}
}
}
}
}
}
}
}
l9_4730=l9_4741;
l9_4729=l9_4730;
float3 l9_7021=l9_4729;
N111_spawnLocation=l9_7021;
float3 l9_7022=float3(0.0);
float3 l9_7023=float3(0.0);
float3 l9_7024=(*sc_set0.UserUniforms).spawnBox;
l9_7023=l9_7024;
l9_7022=l9_7023;
float3 l9_7025=l9_7022;
N111_spawnBox=l9_7025;
float3 l9_7026=float3(0.0);
float3 l9_7027=float3(0.0);
float3 l9_7028=(*sc_set0.UserUniforms).spawnSphere;
l9_7027=l9_7028;
l9_7026=l9_7027;
float3 l9_7029=l9_7026;
N111_spawnSphere=l9_7029;
float3 l9_7030=float3(0.0);
float3 l9_7031=float3(0.0);
float3 l9_7032=(*sc_set0.UserUniforms).noiseMult;
l9_7031=l9_7032;
l9_7030=l9_7031;
float3 l9_7033=l9_7030;
N111_noiseMult=l9_7033;
float3 l9_7034=float3(0.0);
float3 l9_7035=float3(0.0);
float3 l9_7036=(*sc_set0.UserUniforms).noiseFrequency;
l9_7035=l9_7036;
l9_7034=l9_7035;
float3 l9_7037=l9_7034;
N111_noiseFrequency=l9_7037;
float3 l9_7038=float3(0.0);
float3 l9_7039=float3(0.0);
float3 l9_7040=(*sc_set0.UserUniforms).sNoiseMult;
l9_7039=l9_7040;
l9_7038=l9_7039;
float3 l9_7041=l9_7038;
N111_sNoiseMult=l9_7041;
float3 l9_7042=float3(0.0);
float3 l9_7043=float3(0.0);
float3 l9_7044=(*sc_set0.UserUniforms).sNoiseFrequency;
l9_7043=l9_7044;
l9_7042=l9_7043;
float3 l9_7045=l9_7042;
N111_sNoiseFrequency=l9_7045;
float3 l9_7046=float3(0.0);
float3 l9_7047=float3(0.0);
float3 l9_7048=(*sc_set0.UserUniforms).velocityMin;
l9_7047=l9_7048;
l9_7046=l9_7047;
float3 l9_7049=l9_7046;
N111_velocityMin=l9_7049;
float3 l9_7050=float3(0.0);
float3 l9_7051=float3(0.0);
float3 l9_7052=(*sc_set0.UserUniforms).velocityMax;
l9_7051=l9_7052;
l9_7050=l9_7051;
float3 l9_7053=l9_7050;
N111_velocityMax=l9_7053;
float3 l9_7054=float3(0.0);
float3 l9_7055=float3(0.0);
float3 l9_7056=(*sc_set0.UserUniforms).velocityDrag;
l9_7055=l9_7056;
l9_7054=l9_7055;
float3 l9_7057=l9_7054;
N111_velocityDrag=l9_7057;
float2 l9_7058=float2(0.0);
float2 l9_7059=float2(0.0);
float2 l9_7060=(*sc_set0.UserUniforms).sizeStart;
l9_7059=l9_7060;
l9_7058=l9_7059;
float2 l9_7061=l9_7058;
N111_sizeStart=l9_7061;
float2 l9_7062=float2(0.0);
float2 l9_7063=float2(0.0);
float2 l9_7064=(*sc_set0.UserUniforms).sizeEnd;
l9_7063=l9_7064;
l9_7062=l9_7063;
float2 l9_7065=l9_7062;
N111_sizeEnd=l9_7065;
float2 l9_7066=float2(0.0);
float2 l9_7067=float2(0.0);
float2 l9_7068=(*sc_set0.UserUniforms).sizeStartMax;
l9_7067=l9_7068;
l9_7066=l9_7067;
float2 l9_7069=l9_7066;
N111_sizeStartMax=l9_7069;
float2 l9_7070=float2(0.0);
float2 l9_7071=float2(0.0);
float2 l9_7072=(*sc_set0.UserUniforms).sizeEndMax;
l9_7071=l9_7072;
l9_7070=l9_7071;
float2 l9_7073=l9_7070;
N111_sizeEndMax=l9_7073;
float3 l9_7074=float3(0.0);
float3 l9_7075=float3(0.0);
float3 l9_7076=(*sc_set0.UserUniforms).sizeStart3D;
l9_7075=l9_7076;
l9_7074=l9_7075;
float3 l9_7077=l9_7074;
N111_sizeStart3D=l9_7077;
float3 l9_7078=float3(0.0);
float3 l9_7079=float3(0.0);
float3 l9_7080=(*sc_set0.UserUniforms).sizeEnd3D;
l9_7079=l9_7080;
l9_7078=l9_7079;
float3 l9_7081=l9_7078;
N111_sizeEnd3D=l9_7081;
float3 l9_7082=float3(0.0);
float3 l9_7083=float3(0.0);
float3 l9_7084=(*sc_set0.UserUniforms).sizeStartMax3D;
l9_7083=l9_7084;
l9_7082=l9_7083;
float3 l9_7085=l9_7082;
N111_sizeStartMax3D=l9_7085;
float3 l9_7086=float3(0.0);
float3 l9_7087=float3(0.0);
float3 l9_7088=(*sc_set0.UserUniforms).sizeEndMax3D;
l9_7087=l9_7088;
l9_7086=l9_7087;
float3 l9_7089=l9_7086;
N111_sizeEndMax3D=l9_7089;
float l9_7090=0.0;
float l9_7091=0.0;
float l9_7092=(*sc_set0.UserUniforms).sizeSpeed;
l9_7091=l9_7092;
l9_7090=l9_7091;
float l9_7093=l9_7090;
N111_sizeSpeed=l9_7093;
float l9_7094=0.0;
float l9_7095=0.0;
float l9_7096=(*sc_set0.UserUniforms).gravity;
l9_7095=l9_7096;
l9_7094=l9_7095;
float l9_7097=l9_7094;
N111_gravity=l9_7097;
float3 l9_7098=float3(0.0);
float3 l9_7099=float3(0.0);
float3 l9_7100=(*sc_set0.UserUniforms).localForce;
l9_7099=l9_7100;
l9_7098=l9_7099;
float3 l9_7101=l9_7098;
N111_localForce=l9_7101;
float3 l9_7102=float3(0.0);
l9_7102=tempGlobals.N111_ParticleSpawnPosition;
float l9_7103=0.0;
float l9_7104=(*sc_set0.UserUniforms).timeGlobal;
l9_7103=l9_7104;
float l9_7105=0.0;
float l9_7106=(*sc_set0.UserUniforms).externalTimeInput;
l9_7105=l9_7106;
float l9_7107=0.0;
float l9_7108=(*sc_set0.UserUniforms).externalSeed;
l9_7107=l9_7108;
float l9_7109=0.0;
float l9_7110=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_7109=l9_7110;
float2 l9_7111=float2(0.0);
float2 l9_7112=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_7111=l9_7112;
float l9_7113=0.0;
float l9_7114=(*sc_set0.UserUniforms).spawnDuration;
l9_7113=l9_7114;
float l9_7115=0.0;
float l9_7116;
if ((int(TRAILS_tmp)!=0))
{
l9_7116=1.001;
}
else
{
l9_7116=0.001;
}
l9_7116-=0.001;
l9_7115=l9_7116;
float l9_7117=0.0;
float l9_7118=(*sc_set0.UserUniforms).trailLength;
l9_7117=l9_7118;
float4 l9_7119=float4(0.0);
l9_7119=tempGlobals.VertexColor;
float l9_7120=0.0;
l9_7120=l9_7119.x;
float l9_7121=0.0;
float l9_7122=l9_7115;
bool l9_7123=(l9_7122*1.0)!=0.0;
bool l9_7124;
if (l9_7123)
{
l9_7124=(l9_7120*1.0)!=0.0;
}
else
{
l9_7124=l9_7123;
}
l9_7121=float(l9_7124);
float3 l9_7125=float3(0.0);
float l9_7126=0.0;
float l9_7127=l9_7103;
float l9_7128=l9_7105;
float l9_7129=l9_7107;
float l9_7130=l9_7109;
float2 l9_7131=l9_7111;
float l9_7132=l9_7113;
float l9_7133=l9_7117;
float l9_7134=l9_7121;
ssGlobals l9_7135=tempGlobals;
tempGlobals=l9_7135;
float3 l9_7136=float3(0.0);
float l9_7137=0.0;
N181_timeGlobal=l9_7127;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_7128;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_7129;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_7130;
N181_lifeTimeMinMax=l9_7131;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_7132;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_7133;
N181_isTrailCondition=l9_7134!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_7138=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_7139=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_7138=length(float4(1.0)*l9_7139);
}
N181_globalSeed=N181_externalSeed+l9_7138;
int l9_7140=0;
l9_7140=ssInstanceID;
int l9_7141=l9_7140;
float l9_7142=float(l9_7141);
int l9_7143=int(l9_7142);
int l9_7144=l9_7143^(l9_7143*15299);
int l9_7145=l9_7144;
int l9_7146=l9_7145;
int l9_7147=((l9_7146*((l9_7146*1471343)+101146501))+1559861749)&2147483647;
int l9_7148=l9_7147;
int l9_7149=l9_7145*1399;
int l9_7150=((l9_7149*((l9_7149*1471343)+101146501))+1559861749)&2147483647;
int l9_7151=l9_7150;
int l9_7152=l9_7145*7177;
int l9_7153=((l9_7152*((l9_7152*1471343)+101146501))+1559861749)&2147483647;
int l9_7154=l9_7153;
int l9_7155=l9_7148;
float l9_7156=float(l9_7155)*4.6566129e-10;
int l9_7157=l9_7151;
float l9_7158=float(l9_7157)*4.6566129e-10;
int l9_7159=l9_7154;
float l9_7160=float(l9_7159)*4.6566129e-10;
float3 l9_7161=float3(l9_7156,l9_7158,l9_7160);
float3 l9_7162=l9_7161;
N181_particleSeed=l9_7162;
float l9_7163=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_7164;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_7164=N181_lifeTimeMinMax;
}
else
{
l9_7164=float2(N181_lifeTimeConstant);
}
float2 l9_7165=l9_7164;
float l9_7166=fast::max(l9_7165.x,0.0099999998);
float l9_7167=fast::max(l9_7165.y,0.0099999998);
float l9_7168=tempGlobals.gTimeElapsed;
float l9_7169=l9_7168;
if (N181_ENABLE_EXTERNALTIME)
{
l9_7169=N181_externalTime;
}
float l9_7170=l9_7169;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_7170=N181_timeGlobal*l9_7169;
}
else
{
float l9_7171=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_7171=N181_trailLength;
}
}
float l9_7172=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_7173=0.0;
float l9_7174;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_7174=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_7174=0.0;
}
l9_7173=l9_7174;
float l9_7175=l9_7173;
int l9_7176=0;
l9_7176=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_7177=l9_7176;
l9_7172=fast::max(l9_7175*(1.0-(1.0/float(l9_7177))),0.0);
}
else
{
l9_7172=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_7178=fract(((l9_7169*N181_timeGlobal)*(1.0/(l9_7165.y+l9_7171)))+l9_7172);
l9_7170=l9_7178*(l9_7165.y+l9_7171);
}
float l9_7179=mix(l9_7170/l9_7166,l9_7170/l9_7167,l9_7163);
float l9_7180=fast::clamp(l9_7179,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_7170,l9_7180);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_7181=tempGlobals.Surface_UVCoord0;
l9_7170-=(l9_7181.y*N181_trailLength);
l9_7179=mix(l9_7170/l9_7166,l9_7170/l9_7167,l9_7163);
l9_7180=fast::clamp(l9_7179,0.0,1.0);
}
}
float l9_7182=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_7169-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_7182=1.0;
}
}
}
float l9_7183=l9_7179+l9_7182;
N181_particleAlive=1.0;
if ((l9_7183>0.99989998)||(l9_7170<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_7169*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_7165,l9_7170,l9_7180);
l9_7136=N181_particleSeed;
l9_7137=N181_isTrail;
l9_7125=l9_7136;
l9_7126=l9_7137;
float l9_7184=0.0;
float l9_7185=(*sc_set0.UserUniforms).attractRepelForceStrength;
l9_7184=l9_7185;
float3 l9_7186=float3(0.0);
float3 l9_7187=(*sc_set0.UserUniforms).customForceOrigin;
l9_7186=l9_7187;
float3 l9_7188=l9_7102;
float3 l9_7189=l9_7125;
float l9_7190=l9_7184;
float3 l9_7191=l9_7186;
ssGlobals l9_7192=tempGlobals;
tempGlobals=l9_7192;
N223_OnOff=(int(Tweak_N131_tmp)!=0);
N223_ParticleSpawnPosition=l9_7188;
N223_ParticleSeed=l9_7189;
N223_Strength=l9_7190;
N223_ForceOrigin=l9_7191;
N223_CustomForce=float3(0.0);
float4x4 l9_7193=(*sc_set0.UserUniforms).sc_ModelMatrix;
float4 l9_7194=l9_7193*float4(N223_ParticleSpawnPosition,1.0);
if (N223_OnOff)
{
float3 l9_7195=N223_ForceOrigin;
float3 l9_7196=l9_7194.xyz;
float l9_7197=N223_Strength;
float3 l9_7198=float3(0.0);
if (all(l9_7195==l9_7196))
{
int l9_7199=0;
l9_7199=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_7200=l9_7199;
float3 l9_7201=N223_ParticleSeed*float(l9_7200);
int l9_7202=int(l9_7201.x);
int l9_7203=int(l9_7201.y);
int l9_7204=int(l9_7201.z);
int l9_7205=((l9_7202*15299)^(l9_7203*30133))^(l9_7204*17539);
int l9_7206=l9_7205;
int l9_7207=l9_7206;
int l9_7208=((l9_7207*((l9_7207*1471343)+101146501))+1559861749)&2147483647;
int l9_7209=l9_7208;
int l9_7210=l9_7206*1399;
int l9_7211=((l9_7210*((l9_7210*1471343)+101146501))+1559861749)&2147483647;
int l9_7212=l9_7211;
int l9_7213=l9_7206*7177;
int l9_7214=((l9_7213*((l9_7213*1471343)+101146501))+1559861749)&2147483647;
int l9_7215=l9_7214;
int l9_7216=l9_7209;
float l9_7217=float(l9_7216)*4.6566129e-10;
int l9_7218=l9_7212;
float l9_7219=float(l9_7218)*4.6566129e-10;
int l9_7220=l9_7215;
float l9_7221=float(l9_7220)*4.6566129e-10;
float3 l9_7222=float3(l9_7217,l9_7219,l9_7221);
float3 l9_7223=l9_7222;
l9_7198=normalize((l9_7223-float3(0.5))*2.0);
}
else
{
l9_7198=normalize(l9_7195-l9_7196);
}
float3 l9_7224=l9_7198*l9_7197;
N223_CustomForce+=l9_7224;
}
float3 l9_7225=float3(0.0);
l9_7225=tempGlobals.N111_ParticleSpawnPosition;
float3 l9_7226=float3(0.0);
float3 l9_7227=(*sc_set0.UserUniforms).Tex3dScale;
l9_7226=l9_7227;
float3 l9_7228=float3(0.0);
float3 l9_7229=(*sc_set0.UserUniforms).Tex3dScrollSpeed;
l9_7228=l9_7229;
float3 l9_7230=float3(0.0);
float3 l9_7231=(*sc_set0.UserUniforms).Tex3dForceStrength;
l9_7230=l9_7231;
float3 l9_7232=l9_7225;
float3 l9_7233=l9_7226;
float3 l9_7234=l9_7228;
float3 l9_7235=l9_7230;
ssGlobals l9_7236=tempGlobals;
tempGlobals=l9_7236;
N202_OnOff=(int(Tweak_N133_tmp)!=0);
N202_ParticleSpawnPosition=l9_7232;
N202_ScaleTexture=l9_7233;
N202_ScrollSpeed=l9_7234;
N202_Strength=l9_7235;
N202_CustomForce=float3(0.0);
if (N202_OnOff)
{
float3 l9_7237=N202_ParticleSpawnPosition;
float3 l9_7238=N202_Strength;
float3 l9_7239=l9_7237;
float l9_7240=tempGlobals.gTimeElapsed;
float3 l9_7241=float3(l9_7240)*(N202_ScrollSpeed*0.1);
l9_7239/=(N202_ScaleTexture*2.0);
l9_7239+=l9_7241;
float3 l9_7242=l9_7239;
float4 l9_7243=float4(0.0);
float3 l9_7244=l9_7242;
float l9_7245=0.0;
float4 l9_7246=sc_set0.Tex3d.sample(sc_set0.Tex3dSmpSC,l9_7244,level(l9_7245));
l9_7243=l9_7246;
float4 l9_7247=l9_7243;
float3 l9_7248=l9_7247.xyz;
float3 l9_7249=(l9_7248*2.0)-float3(1.0);
l9_7249*=l9_7238;
float3 l9_7250=l9_7249;
N202_CustomForce+=l9_7250;
}
float3 l9_7251=float3(0.0);
l9_7251=tempGlobals.N155_helixDirection;
float3 l9_7252=float3(0.0);
l9_7252=tempGlobals.N319_curveDirection;
float3 l9_7253=float3(0.0);
float3 l9_7254=(*sc_set0.UserUniforms).Tweak_N314;
l9_7253=l9_7254;
float l9_7255=l9_7126;
float3 l9_7256=l9_7251;
float3 l9_7257=l9_7252;
float3 l9_7258=l9_7253;
ssGlobals l9_7259=tempGlobals;
tempGlobals=l9_7259;
N277_OnOff=(int(Tweak_N313_tmp)!=0);
N277_isTrail=l9_7255!=0.0;
N277_helixDir=l9_7256;
N277_curveDir=l9_7257;
N277_Strength=l9_7258;
N277_Path=NODE_248_DROPLIST_ITEM_tmp;
N277_DirectionForce=float3(0.0);
N277_Direction=float3(0.0);
if (N277_OnOff||N277_isTrail)
{
float3 l9_7260;
if (N277_Path==5)
{
l9_7260=N277_helixDir;
}
else
{
bool3 l9_7261=bool3(N277_Path==6);
l9_7260=float3(l9_7261.x ? N277_curveDir.x : float3(0.0).x,l9_7261.y ? N277_curveDir.y : float3(0.0).y,l9_7261.z ? N277_curveDir.z : float3(0.0).z);
}
float3 l9_7262=l9_7260;
float3 l9_7263=l9_7262;
float3 l9_7264=l9_7263;
if (N277_OnOff)
{
N277_DirectionForce+=(l9_7264*N277_Strength);
}
N277_Direction=l9_7264;
}
float l9_7265=0.0;
float l9_7266=0.0;
float l9_7267=(*sc_set0.UserUniforms).sizeVelScale;
l9_7266=l9_7267;
l9_7265=l9_7266;
float l9_7268=l9_7265;
N111_sizeVelScale=l9_7268;
float l9_7269=0.0;
float l9_7270=0.0;
float l9_7271=float((*sc_set0.UserUniforms).IGNOREVEL!=0);
l9_7270=l9_7271;
l9_7269=l9_7270;
bool l9_7272=l9_7269!=0.0;
N111_ENABLE_IGNOREVEL=l9_7272;
float l9_7273=0.0;
float l9_7274=0.0;
float l9_7275=float((*sc_set0.UserUniforms).NORMALIZESCALETOTRANSFORM!=0);
l9_7274=l9_7275;
l9_7273=l9_7274;
bool l9_7276=l9_7273!=0.0;
N111_ENABLE_IGNORETRANSFORMSCALE=l9_7276;
float2 l9_7277=float2(0.0);
float2 l9_7278=float2(0.0);
float2 l9_7279=(*sc_set0.UserUniforms).velScaleMinMax;
l9_7278=l9_7279;
l9_7277=l9_7278;
float2 l9_7280=l9_7277;
N111_velScaleMinMax=l9_7280;
float2 l9_7281=float2(0.0);
float2 l9_7282=float2(0.0);
float2 l9_7283=(*sc_set0.UserUniforms).rotationRandom;
l9_7282=l9_7283;
l9_7281=l9_7282;
float2 l9_7284=l9_7281;
N111_rotationRandom=l9_7284;
float2 l9_7285=float2(0.0);
float2 l9_7286=float2(0.0);
float2 l9_7287=(*sc_set0.UserUniforms).rotationRate;
l9_7286=l9_7287;
l9_7285=l9_7286;
float2 l9_7288=l9_7285;
N111_rotationRate=l9_7288;
float2 l9_7289=float2(0.0);
float2 l9_7290=float2(0.0);
float2 l9_7291=(*sc_set0.UserUniforms).rotationRandomX;
l9_7290=l9_7291;
l9_7289=l9_7290;
float2 l9_7292=l9_7289;
N111_rotationRandomX=l9_7292;
float2 l9_7293=float2(0.0);
float2 l9_7294=float2(0.0);
float2 l9_7295=(*sc_set0.UserUniforms).rotationRateX;
l9_7294=l9_7295;
l9_7293=l9_7294;
float2 l9_7296=l9_7293;
N111_rotationRateX=l9_7296;
float2 l9_7297=float2(0.0);
float2 l9_7298=float2(0.0);
float2 l9_7299=(*sc_set0.UserUniforms).randomRotationY;
l9_7298=l9_7299;
l9_7297=l9_7298;
float2 l9_7300=l9_7297;
N111_rotationRandomY=l9_7300;
float2 l9_7301=float2(0.0);
float2 l9_7302=float2(0.0);
float2 l9_7303=(*sc_set0.UserUniforms).rotationRateY;
l9_7302=l9_7303;
l9_7301=l9_7302;
float2 l9_7304=l9_7301;
N111_rotationRateY=l9_7304;
float2 l9_7305=float2(0.0);
float2 l9_7306=float2(0.0);
float2 l9_7307=(*sc_set0.UserUniforms).randomRotationZ;
l9_7306=l9_7307;
l9_7305=l9_7306;
float2 l9_7308=l9_7305;
N111_rotationRandomZ=l9_7308;
float2 l9_7309=float2(0.0);
float2 l9_7310=float2(0.0);
float2 l9_7311=(*sc_set0.UserUniforms).rotationRateZ;
l9_7310=l9_7311;
l9_7309=l9_7310;
float2 l9_7312=l9_7309;
N111_rotationRateZ=l9_7312;
float l9_7313=0.0;
float l9_7314=0.0;
float l9_7315=(*sc_set0.UserUniforms).rotationDrag;
l9_7314=l9_7315;
l9_7313=l9_7314;
float l9_7316=l9_7313;
N111_rotationDrag=l9_7316;
float l9_7317=0.0;
float l9_7318=0.0;
float l9_7319=float((*sc_set0.UserUniforms).CENTER_BBOX!=0);
l9_7318=l9_7319;
l9_7317=l9_7318;
bool l9_7320=l9_7317!=0.0;
N111_ENABLE_CENTER_IN_BBOX=l9_7320;
float3 l9_7321=float3(0.0);
float3 l9_7322=float3(0.0);
float3 l9_7323=(*sc_set0.UserUniforms).displaceScale;
l9_7322=l9_7323;
l9_7321=l9_7322;
float3 l9_7324=l9_7321;
N111_ScaleDisplace=l9_7324;
float3 l9_7325=float3(0.0);
float3 l9_7326=float3(0.0);
float3 l9_7327=(*sc_set0.UserUniforms).displaceSpeed;
l9_7326=l9_7327;
l9_7325=l9_7326;
float3 l9_7328=l9_7325;
N111_ScrollSpeedDisplace=l9_7328;
float3 l9_7329=float3(0.0);
float3 l9_7330=float3(0.0);
float3 l9_7331=(*sc_set0.UserUniforms).displaceStrength;
l9_7330=l9_7331;
l9_7329=l9_7330;
float3 l9_7332=l9_7329;
N111_DisplaceStrength=l9_7332;
float3 l9_7333=float3(0.0);
float3 l9_7334=float3(0.0);
float3 l9_7335=(*sc_set0.UserUniforms).orbitAxis;
l9_7334=l9_7335;
l9_7333=l9_7334;
float3 l9_7336=l9_7333;
N111_AxisOrbit=l9_7336;
float3 l9_7337=float3(0.0);
float3 l9_7338=float3(0.0);
float3 l9_7339=(*sc_set0.UserUniforms).orbitCenter;
l9_7338=l9_7339;
l9_7337=l9_7338;
float3 l9_7340=l9_7337;
N111_CenterOrbit=l9_7340;
float2 l9_7341=float2(0.0);
float2 l9_7342=float2(0.0);
float2 l9_7343=(*sc_set0.UserUniforms).orbitMinMaxAngle;
l9_7342=l9_7343;
l9_7341=l9_7342;
float2 l9_7344=l9_7341;
N111_MinMaxOrbitAngle=l9_7344;
float2 l9_7345=float2(0.0);
float2 l9_7346=float2(0.0);
float2 l9_7347=(*sc_set0.UserUniforms).orbitMinMaxSpeed;
l9_7346=l9_7347;
l9_7345=l9_7346;
float2 l9_7348=l9_7345;
N111_MinMaxOrbitSpeed=l9_7348;
float l9_7349=0.0;
float l9_7350=0.0;
float l9_7351=(*sc_set0.UserUniforms).fadeDistanceVisible;
l9_7350=l9_7351;
l9_7349=l9_7350;
float l9_7352=l9_7349;
N111_fadeDistanceVisible=l9_7352;
float l9_7353=0.0;
float l9_7354=0.0;
float l9_7355=(*sc_set0.UserUniforms).fadeDistanceInvisible;
l9_7354=l9_7355;
l9_7353=l9_7354;
float l9_7356=l9_7353;
N111_fadeDistanceInvisible=l9_7356;
float3 l9_7357=float3(0.0);
float l9_7358=0.0;
float l9_7359=(*sc_set0.UserUniforms).timeGlobal;
l9_7358=l9_7359;
float l9_7360=0.0;
float l9_7361=(*sc_set0.UserUniforms).externalTimeInput;
l9_7360=l9_7361;
float l9_7362=0.0;
float l9_7363=(*sc_set0.UserUniforms).externalSeed;
l9_7362=l9_7363;
float l9_7364=0.0;
float l9_7365=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_7364=l9_7365;
float2 l9_7366=float2(0.0);
float2 l9_7367=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_7366=l9_7367;
float l9_7368=0.0;
float l9_7369=(*sc_set0.UserUniforms).spawnDuration;
l9_7368=l9_7369;
float l9_7370=0.0;
float l9_7371;
if ((int(TRAILS_tmp)!=0))
{
l9_7371=1.001;
}
else
{
l9_7371=0.001;
}
l9_7371-=0.001;
l9_7370=l9_7371;
float l9_7372=0.0;
float l9_7373=(*sc_set0.UserUniforms).trailLength;
l9_7372=l9_7373;
float4 l9_7374=float4(0.0);
l9_7374=tempGlobals.VertexColor;
float l9_7375=0.0;
l9_7375=l9_7374.x;
float l9_7376=0.0;
float l9_7377=l9_7370;
bool l9_7378=(l9_7377*1.0)!=0.0;
bool l9_7379;
if (l9_7378)
{
l9_7379=(l9_7375*1.0)!=0.0;
}
else
{
l9_7379=l9_7378;
}
l9_7376=float(l9_7379);
float l9_7380=0.0;
float l9_7381=l9_7358;
float l9_7382=l9_7360;
float l9_7383=l9_7362;
float l9_7384=l9_7364;
float2 l9_7385=l9_7366;
float l9_7386=l9_7368;
float l9_7387=l9_7372;
float l9_7388=l9_7376;
ssGlobals l9_7389=tempGlobals;
tempGlobals=l9_7389;
float l9_7390=0.0;
N181_timeGlobal=l9_7381;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_7382;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_7383;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_7384;
N181_lifeTimeMinMax=l9_7385;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_7386;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_7387;
N181_isTrailCondition=l9_7388!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_7391=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_7392=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_7391=length(float4(1.0)*l9_7392);
}
N181_globalSeed=N181_externalSeed+l9_7391;
int l9_7393=0;
l9_7393=ssInstanceID;
int l9_7394=l9_7393;
float l9_7395=float(l9_7394);
int l9_7396=int(l9_7395);
int l9_7397=l9_7396^(l9_7396*15299);
int l9_7398=l9_7397;
int l9_7399=l9_7398;
int l9_7400=((l9_7399*((l9_7399*1471343)+101146501))+1559861749)&2147483647;
int l9_7401=l9_7400;
int l9_7402=l9_7398*1399;
int l9_7403=((l9_7402*((l9_7402*1471343)+101146501))+1559861749)&2147483647;
int l9_7404=l9_7403;
int l9_7405=l9_7398*7177;
int l9_7406=((l9_7405*((l9_7405*1471343)+101146501))+1559861749)&2147483647;
int l9_7407=l9_7406;
int l9_7408=l9_7401;
float l9_7409=float(l9_7408)*4.6566129e-10;
int l9_7410=l9_7404;
float l9_7411=float(l9_7410)*4.6566129e-10;
int l9_7412=l9_7407;
float l9_7413=float(l9_7412)*4.6566129e-10;
float3 l9_7414=float3(l9_7409,l9_7411,l9_7413);
float3 l9_7415=l9_7414;
N181_particleSeed=l9_7415;
float l9_7416=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_7417;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_7417=N181_lifeTimeMinMax;
}
else
{
l9_7417=float2(N181_lifeTimeConstant);
}
float2 l9_7418=l9_7417;
float l9_7419=fast::max(l9_7418.x,0.0099999998);
float l9_7420=fast::max(l9_7418.y,0.0099999998);
float l9_7421=tempGlobals.gTimeElapsed;
float l9_7422=l9_7421;
if (N181_ENABLE_EXTERNALTIME)
{
l9_7422=N181_externalTime;
}
float l9_7423=l9_7422;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_7423=N181_timeGlobal*l9_7422;
}
else
{
float l9_7424=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_7424=N181_trailLength;
}
}
float l9_7425=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_7426=0.0;
float l9_7427;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_7427=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_7427=0.0;
}
l9_7426=l9_7427;
float l9_7428=l9_7426;
int l9_7429=0;
l9_7429=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_7430=l9_7429;
l9_7425=fast::max(l9_7428*(1.0-(1.0/float(l9_7430))),0.0);
}
else
{
l9_7425=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_7431=fract(((l9_7422*N181_timeGlobal)*(1.0/(l9_7418.y+l9_7424)))+l9_7425);
l9_7423=l9_7431*(l9_7418.y+l9_7424);
}
float l9_7432=mix(l9_7423/l9_7419,l9_7423/l9_7420,l9_7416);
float l9_7433=fast::clamp(l9_7432,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_7423,l9_7433);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_7434=tempGlobals.Surface_UVCoord0;
l9_7423-=(l9_7434.y*N181_trailLength);
l9_7432=mix(l9_7423/l9_7419,l9_7423/l9_7420,l9_7416);
l9_7433=fast::clamp(l9_7432,0.0,1.0);
}
}
float l9_7435=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_7422-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_7435=1.0;
}
}
}
float l9_7436=l9_7432+l9_7435;
N181_particleAlive=1.0;
if ((l9_7436>0.99989998)||(l9_7423<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_7422*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_7418,l9_7423,l9_7433);
l9_7390=N181_isTrail;
l9_7380=l9_7390;
float3 l9_7437=float3(0.0);
l9_7437=tempGlobals.N155_helixDirection;
float3 l9_7438=float3(0.0);
l9_7438=tempGlobals.N319_curveDirection;
float3 l9_7439=float3(0.0);
float3 l9_7440=(*sc_set0.UserUniforms).Tweak_N314;
l9_7439=l9_7440;
float3 l9_7441=float3(0.0);
float l9_7442=l9_7380;
float3 l9_7443=l9_7437;
float3 l9_7444=l9_7438;
float3 l9_7445=l9_7439;
ssGlobals l9_7446=tempGlobals;
tempGlobals=l9_7446;
float3 l9_7447=float3(0.0);
N277_OnOff=(int(Tweak_N313_tmp)!=0);
N277_isTrail=l9_7442!=0.0;
N277_helixDir=l9_7443;
N277_curveDir=l9_7444;
N277_Strength=l9_7445;
N277_Path=NODE_248_DROPLIST_ITEM_tmp;
N277_DirectionForce=float3(0.0);
N277_Direction=float3(0.0);
if (N277_OnOff||N277_isTrail)
{
float3 l9_7448;
if (N277_Path==5)
{
l9_7448=N277_helixDir;
}
else
{
bool3 l9_7449=bool3(N277_Path==6);
l9_7448=float3(l9_7449.x ? N277_curveDir.x : float3(0.0).x,l9_7449.y ? N277_curveDir.y : float3(0.0).y,l9_7449.z ? N277_curveDir.z : float3(0.0).z);
}
float3 l9_7450=l9_7448;
float3 l9_7451=l9_7450;
float3 l9_7452=l9_7451;
if (N277_OnOff)
{
N277_DirectionForce+=(l9_7452*N277_Strength);
}
N277_Direction=l9_7452;
}
l9_7447=N277_Direction;
l9_7441=l9_7447;
l9_7357=l9_7441;
float3 l9_7453=l9_7357;
N111_tangentIN=l9_7453;
float3 l9_7454=float3(0.0);
N111_particleSeed=N111_particleSeedIn;
N111_globalSeed=N111_globalSeedIn;
float l9_7455=N111_particleSeed.x;
float l9_7456=N111_particleSeed.y;
float l9_7457=N111_particleSeed.z;
float3 l9_7458=fract((float3(l9_7455,l9_7456,l9_7457)*3048.28)+float3(N111_globalSeed))-float3(0.5);
float3 l9_7459=fract((N111_particleSeed*374.57129)+float3(N111_globalSeed))-float3(0.5);
float3 l9_7460=normalize(l9_7459+float3(1e-06));
float l9_7461=fract(N111_particleSeed.x+N111_globalSeed);
float l9_7462=l9_7461;
float l9_7463=0.33333334;
float l9_7464;
if (l9_7462<=0.0)
{
l9_7464=0.0;
}
else
{
l9_7464=pow(l9_7462,l9_7463);
}
float l9_7465=l9_7464;
float l9_7466=l9_7465;
l9_7460*=l9_7466;
l9_7460/=float3(2.0);
float l9_7467=fract((N111_particleSeed.x*334.59122)+N111_globalSeed);
float l9_7468=fract((N111_particleSeed.y*41.231232)+N111_globalSeed);
float l9_7469=fract((N111_particleSeed.z*18.984529)+N111_globalSeed);
float l9_7470=fract((N111_particleSeed.x*654.15588)+N111_globalSeed);
float l9_7471=fract((N111_particleSeed.y*45.722408)+N111_globalSeed);
float3 l9_7472=(float3(l9_7470,l9_7471,l9_7469)-float3(0.5))*2.0;
float3 l9_7473=float3(l9_7470,l9_7471,l9_7469);
float l9_7474=fract((N111_particleSeed.z*15.32451)+N111_globalSeed);
float2 l9_7475=fract((N111_particleSeed.xz*582.65741)+float2(N111_globalSeed));
float2 l9_7476=N111_timeValuesIn.xy;
float l9_7477=N111_timeValuesIn.z;
float l9_7478=N111_timeValuesIn.w;
N111_cameraFade_trailHeadTime_taper=float4(0.0);
float3 l9_7479=l9_7454;
float3 l9_7480=l9_7454;
float3 l9_7481=l9_7454;
if ((int(INILOCATION_tmp)!=0))
{
l9_7481=N111_spawnLocation;
}
if ((int(BOXSPAWN_tmp)!=0))
{
l9_7479=N111_spawnBox*l9_7458;
}
if ((int(SPHERESPAWN_tmp)!=0))
{
l9_7480=N111_spawnSphere*l9_7460;
}
float3 l9_7482=(l9_7481+l9_7480)+l9_7479;
float3 l9_7483=l9_7454;
if ((int(NOISE_tmp)!=0))
{
float3 l9_7484=N111_noiseFrequency;
float3 l9_7485=N111_noiseMult;
float3 l9_7486=l9_7472;
float l9_7487=l9_7478;
float l9_7488=sin(l9_7487*l9_7484.x);
float l9_7489=sin(l9_7487*l9_7484.y);
float l9_7490=sin(l9_7487*l9_7484.z);
float3 l9_7491=(float3(l9_7488,l9_7489,l9_7490)*l9_7485)*l9_7486;
float3 l9_7492=l9_7491;
l9_7483+=l9_7492;
}
if ((int(SNOISE_tmp)!=0))
{
float l9_7493=l9_7469;
float l9_7494=l9_7470;
float l9_7495=l9_7471;
float3 l9_7496=N111_sNoiseFrequency;
float3 l9_7497=N111_sNoiseMult;
float3 l9_7498=l9_7472;
float l9_7499=l9_7477;
float2 l9_7500=float2(l9_7493*l9_7499,l9_7496.x);
float2 l9_7501=floor(l9_7500+float2(dot(l9_7500,float2(0.36602542))));
float2 l9_7502=(l9_7500-l9_7501)+float2(dot(l9_7501,float2(0.21132487)));
float2 l9_7503=float2(0.0);
bool2 l9_7504=bool2(l9_7502.x>l9_7502.y);
l9_7503=float2(l9_7504.x ? float2(1.0,0.0).x : float2(0.0,1.0).x,l9_7504.y ? float2(1.0,0.0).y : float2(0.0,1.0).y);
float4 l9_7505=l9_7502.xyxy+float4(0.21132487,0.21132487,-0.57735026,-0.57735026);
float2 l9_7506=l9_7505.xy-l9_7503;
l9_7505=float4(l9_7506.x,l9_7506.y,l9_7505.z,l9_7505.w);
l9_7501=mod(l9_7501,float2(289.0));
float3 l9_7507=float3(l9_7501.y)+float3(0.0,l9_7503.y,1.0);
float3 l9_7508=mod(((l9_7507*34.0)+float3(1.0))*l9_7507,float3(289.0));
float3 l9_7509=(l9_7508+float3(l9_7501.x))+float3(0.0,l9_7503.x,1.0);
float3 l9_7510=mod(((l9_7509*34.0)+float3(1.0))*l9_7509,float3(289.0));
float3 l9_7511=l9_7510;
float3 l9_7512=fast::max(float3(0.5)-float3(dot(l9_7502,l9_7502),dot(l9_7505.xy,l9_7505.xy),dot(l9_7505.zw,l9_7505.zw)),float3(0.0));
l9_7512*=l9_7512;
l9_7512*=l9_7512;
float3 l9_7513=(fract(l9_7511*float3(0.024390243))*2.0)-float3(1.0);
float3 l9_7514=abs(l9_7513)-float3(0.5);
float3 l9_7515=floor(l9_7513+float3(0.5));
float3 l9_7516=l9_7513-l9_7515;
l9_7512*=(float3(1.7928429)-(((l9_7516*l9_7516)+(l9_7514*l9_7514))*0.85373473));
float3 l9_7517=float3(0.0);
l9_7517.x=(l9_7516.x*l9_7502.x)+(l9_7514.x*l9_7502.y);
float2 l9_7518=(l9_7516.yz*l9_7505.xz)+(l9_7514.yz*l9_7505.yw);
l9_7517=float3(l9_7517.x,l9_7518.x,l9_7518.y);
float l9_7519=130.0*dot(l9_7512,l9_7517);
float l9_7520=l9_7519;
float2 l9_7521=float2(l9_7494*l9_7499,l9_7496.y);
float2 l9_7522=floor(l9_7521+float2(dot(l9_7521,float2(0.36602542))));
float2 l9_7523=(l9_7521-l9_7522)+float2(dot(l9_7522,float2(0.21132487)));
float2 l9_7524=float2(0.0);
bool2 l9_7525=bool2(l9_7523.x>l9_7523.y);
l9_7524=float2(l9_7525.x ? float2(1.0,0.0).x : float2(0.0,1.0).x,l9_7525.y ? float2(1.0,0.0).y : float2(0.0,1.0).y);
float4 l9_7526=l9_7523.xyxy+float4(0.21132487,0.21132487,-0.57735026,-0.57735026);
float2 l9_7527=l9_7526.xy-l9_7524;
l9_7526=float4(l9_7527.x,l9_7527.y,l9_7526.z,l9_7526.w);
l9_7522=mod(l9_7522,float2(289.0));
float3 l9_7528=float3(l9_7522.y)+float3(0.0,l9_7524.y,1.0);
float3 l9_7529=mod(((l9_7528*34.0)+float3(1.0))*l9_7528,float3(289.0));
float3 l9_7530=(l9_7529+float3(l9_7522.x))+float3(0.0,l9_7524.x,1.0);
float3 l9_7531=mod(((l9_7530*34.0)+float3(1.0))*l9_7530,float3(289.0));
float3 l9_7532=l9_7531;
float3 l9_7533=fast::max(float3(0.5)-float3(dot(l9_7523,l9_7523),dot(l9_7526.xy,l9_7526.xy),dot(l9_7526.zw,l9_7526.zw)),float3(0.0));
l9_7533*=l9_7533;
l9_7533*=l9_7533;
float3 l9_7534=(fract(l9_7532*float3(0.024390243))*2.0)-float3(1.0);
float3 l9_7535=abs(l9_7534)-float3(0.5);
float3 l9_7536=floor(l9_7534+float3(0.5));
float3 l9_7537=l9_7534-l9_7536;
l9_7533*=(float3(1.7928429)-(((l9_7537*l9_7537)+(l9_7535*l9_7535))*0.85373473));
float3 l9_7538=float3(0.0);
l9_7538.x=(l9_7537.x*l9_7523.x)+(l9_7535.x*l9_7523.y);
float2 l9_7539=(l9_7537.yz*l9_7526.xz)+(l9_7535.yz*l9_7526.yw);
l9_7538=float3(l9_7538.x,l9_7539.x,l9_7539.y);
float l9_7540=130.0*dot(l9_7533,l9_7538);
float l9_7541=l9_7540;
float2 l9_7542=float2(l9_7495*l9_7499,l9_7496.z);
float2 l9_7543=floor(l9_7542+float2(dot(l9_7542,float2(0.36602542))));
float2 l9_7544=(l9_7542-l9_7543)+float2(dot(l9_7543,float2(0.21132487)));
float2 l9_7545=float2(0.0);
bool2 l9_7546=bool2(l9_7544.x>l9_7544.y);
l9_7545=float2(l9_7546.x ? float2(1.0,0.0).x : float2(0.0,1.0).x,l9_7546.y ? float2(1.0,0.0).y : float2(0.0,1.0).y);
float4 l9_7547=l9_7544.xyxy+float4(0.21132487,0.21132487,-0.57735026,-0.57735026);
float2 l9_7548=l9_7547.xy-l9_7545;
l9_7547=float4(l9_7548.x,l9_7548.y,l9_7547.z,l9_7547.w);
l9_7543=mod(l9_7543,float2(289.0));
float3 l9_7549=float3(l9_7543.y)+float3(0.0,l9_7545.y,1.0);
float3 l9_7550=mod(((l9_7549*34.0)+float3(1.0))*l9_7549,float3(289.0));
float3 l9_7551=(l9_7550+float3(l9_7543.x))+float3(0.0,l9_7545.x,1.0);
float3 l9_7552=mod(((l9_7551*34.0)+float3(1.0))*l9_7551,float3(289.0));
float3 l9_7553=l9_7552;
float3 l9_7554=fast::max(float3(0.5)-float3(dot(l9_7544,l9_7544),dot(l9_7547.xy,l9_7547.xy),dot(l9_7547.zw,l9_7547.zw)),float3(0.0));
l9_7554*=l9_7554;
l9_7554*=l9_7554;
float3 l9_7555=(fract(l9_7553*float3(0.024390243))*2.0)-float3(1.0);
float3 l9_7556=abs(l9_7555)-float3(0.5);
float3 l9_7557=floor(l9_7555+float3(0.5));
float3 l9_7558=l9_7555-l9_7557;
l9_7554*=(float3(1.7928429)-(((l9_7558*l9_7558)+(l9_7556*l9_7556))*0.85373473));
float3 l9_7559=float3(0.0);
l9_7559.x=(l9_7558.x*l9_7544.x)+(l9_7556.x*l9_7544.y);
float2 l9_7560=(l9_7558.yz*l9_7547.xz)+(l9_7556.yz*l9_7547.yw);
l9_7559=float3(l9_7559.x,l9_7560.x,l9_7560.y);
float l9_7561=130.0*dot(l9_7554,l9_7559);
float l9_7562=l9_7561;
float3 l9_7563=(float3(l9_7520,l9_7541,l9_7562)*l9_7497)*l9_7498;
l9_7483+=l9_7563;
}
float3 l9_7564=float3(0.0,((N111_gravity/2.0)*l9_7477)*l9_7477,0.0);
float3 l9_7565=l9_7454;
if ((int(FORCE_tmp)!=0))
{
l9_7565=((N111_localForce/float3(2.0))*l9_7477)*l9_7477;
}
float3 l9_7566=l9_7454;
if ((int(CUSTOMFORCE_tmp)!=0))
{
tempGlobals.N111_ParticleSpawnPosition=l9_7482;
float3 l9_7567=float3(0.0);
float3 l9_7568=float3(0.0);
l9_7568=tempGlobals.N111_ParticleSpawnPosition;
float l9_7569=0.0;
float l9_7570=(*sc_set0.UserUniforms).timeGlobal;
l9_7569=l9_7570;
float l9_7571=0.0;
float l9_7572=(*sc_set0.UserUniforms).externalTimeInput;
l9_7571=l9_7572;
float l9_7573=0.0;
float l9_7574=(*sc_set0.UserUniforms).externalSeed;
l9_7573=l9_7574;
float l9_7575=0.0;
float l9_7576=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_7575=l9_7576;
float2 l9_7577=float2(0.0);
float2 l9_7578=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_7577=l9_7578;
float l9_7579=0.0;
float l9_7580=(*sc_set0.UserUniforms).spawnDuration;
l9_7579=l9_7580;
float l9_7581=0.0;
float l9_7582;
if ((int(TRAILS_tmp)!=0))
{
l9_7582=1.001;
}
else
{
l9_7582=0.001;
}
l9_7582-=0.001;
l9_7581=l9_7582;
float l9_7583=0.0;
float l9_7584=(*sc_set0.UserUniforms).trailLength;
l9_7583=l9_7584;
float4 l9_7585=float4(0.0);
l9_7585=tempGlobals.VertexColor;
float l9_7586=0.0;
l9_7586=l9_7585.x;
float l9_7587=0.0;
float l9_7588=l9_7581;
bool l9_7589=(l9_7588*1.0)!=0.0;
bool l9_7590;
if (l9_7589)
{
l9_7590=(l9_7586*1.0)!=0.0;
}
else
{
l9_7590=l9_7589;
}
l9_7587=float(l9_7590);
float3 l9_7591=float3(0.0);
float l9_7592=0.0;
float l9_7593=l9_7569;
float l9_7594=l9_7571;
float l9_7595=l9_7573;
float l9_7596=l9_7575;
float2 l9_7597=l9_7577;
float l9_7598=l9_7579;
float l9_7599=l9_7583;
float l9_7600=l9_7587;
ssGlobals l9_7601=tempGlobals;
tempGlobals=l9_7601;
float3 l9_7602=float3(0.0);
float l9_7603=0.0;
N181_timeGlobal=l9_7593;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_7594;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_7595;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_7596;
N181_lifeTimeMinMax=l9_7597;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_7598;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_7599;
N181_isTrailCondition=l9_7600!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_7604=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_7605=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_7604=length(float4(1.0)*l9_7605);
}
N181_globalSeed=N181_externalSeed+l9_7604;
int l9_7606=0;
l9_7606=ssInstanceID;
int l9_7607=l9_7606;
float l9_7608=float(l9_7607);
int l9_7609=int(l9_7608);
int l9_7610=l9_7609^(l9_7609*15299);
int l9_7611=l9_7610;
int l9_7612=l9_7611;
int l9_7613=((l9_7612*((l9_7612*1471343)+101146501))+1559861749)&2147483647;
int l9_7614=l9_7613;
int l9_7615=l9_7611*1399;
int l9_7616=((l9_7615*((l9_7615*1471343)+101146501))+1559861749)&2147483647;
int l9_7617=l9_7616;
int l9_7618=l9_7611*7177;
int l9_7619=((l9_7618*((l9_7618*1471343)+101146501))+1559861749)&2147483647;
int l9_7620=l9_7619;
int l9_7621=l9_7614;
float l9_7622=float(l9_7621)*4.6566129e-10;
int l9_7623=l9_7617;
float l9_7624=float(l9_7623)*4.6566129e-10;
int l9_7625=l9_7620;
float l9_7626=float(l9_7625)*4.6566129e-10;
float3 l9_7627=float3(l9_7622,l9_7624,l9_7626);
float3 l9_7628=l9_7627;
N181_particleSeed=l9_7628;
float l9_7629=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_7630;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_7630=N181_lifeTimeMinMax;
}
else
{
l9_7630=float2(N181_lifeTimeConstant);
}
float2 l9_7631=l9_7630;
float l9_7632=fast::max(l9_7631.x,0.0099999998);
float l9_7633=fast::max(l9_7631.y,0.0099999998);
float l9_7634=tempGlobals.gTimeElapsed;
float l9_7635=l9_7634;
if (N181_ENABLE_EXTERNALTIME)
{
l9_7635=N181_externalTime;
}
float l9_7636=l9_7635;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_7636=N181_timeGlobal*l9_7635;
}
else
{
float l9_7637=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_7637=N181_trailLength;
}
}
float l9_7638=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_7639=0.0;
float l9_7640;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_7640=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_7640=0.0;
}
l9_7639=l9_7640;
float l9_7641=l9_7639;
int l9_7642=0;
l9_7642=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_7643=l9_7642;
l9_7638=fast::max(l9_7641*(1.0-(1.0/float(l9_7643))),0.0);
}
else
{
l9_7638=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_7644=fract(((l9_7635*N181_timeGlobal)*(1.0/(l9_7631.y+l9_7637)))+l9_7638);
l9_7636=l9_7644*(l9_7631.y+l9_7637);
}
float l9_7645=mix(l9_7636/l9_7632,l9_7636/l9_7633,l9_7629);
float l9_7646=fast::clamp(l9_7645,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_7636,l9_7646);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_7647=tempGlobals.Surface_UVCoord0;
l9_7636-=(l9_7647.y*N181_trailLength);
l9_7645=mix(l9_7636/l9_7632,l9_7636/l9_7633,l9_7629);
l9_7646=fast::clamp(l9_7645,0.0,1.0);
}
}
float l9_7648=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_7635-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_7648=1.0;
}
}
}
float l9_7649=l9_7645+l9_7648;
N181_particleAlive=1.0;
if ((l9_7649>0.99989998)||(l9_7636<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_7635*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_7631,l9_7636,l9_7646);
l9_7602=N181_particleSeed;
l9_7603=N181_isTrail;
l9_7591=l9_7602;
l9_7592=l9_7603;
float l9_7650=0.0;
float l9_7651=(*sc_set0.UserUniforms).attractRepelForceStrength;
l9_7650=l9_7651;
float3 l9_7652=float3(0.0);
float3 l9_7653=(*sc_set0.UserUniforms).customForceOrigin;
l9_7652=l9_7653;
float3 l9_7654=float3(0.0);
float3 l9_7655=l9_7568;
float3 l9_7656=l9_7591;
float l9_7657=l9_7650;
float3 l9_7658=l9_7652;
ssGlobals l9_7659=tempGlobals;
tempGlobals=l9_7659;
float3 l9_7660=float3(0.0);
N223_OnOff=(int(Tweak_N131_tmp)!=0);
N223_ParticleSpawnPosition=l9_7655;
N223_ParticleSeed=l9_7656;
N223_Strength=l9_7657;
N223_ForceOrigin=l9_7658;
N223_CustomForce=float3(0.0);
float4x4 l9_7661=(*sc_set0.UserUniforms).sc_ModelMatrix;
float4 l9_7662=l9_7661*float4(N223_ParticleSpawnPosition,1.0);
if (N223_OnOff)
{
float3 l9_7663=N223_ForceOrigin;
float3 l9_7664=l9_7662.xyz;
float l9_7665=N223_Strength;
float3 l9_7666=float3(0.0);
if (all(l9_7663==l9_7664))
{
int l9_7667=0;
l9_7667=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_7668=l9_7667;
float3 l9_7669=N223_ParticleSeed*float(l9_7668);
int l9_7670=int(l9_7669.x);
int l9_7671=int(l9_7669.y);
int l9_7672=int(l9_7669.z);
int l9_7673=((l9_7670*15299)^(l9_7671*30133))^(l9_7672*17539);
int l9_7674=l9_7673;
int l9_7675=l9_7674;
int l9_7676=((l9_7675*((l9_7675*1471343)+101146501))+1559861749)&2147483647;
int l9_7677=l9_7676;
int l9_7678=l9_7674*1399;
int l9_7679=((l9_7678*((l9_7678*1471343)+101146501))+1559861749)&2147483647;
int l9_7680=l9_7679;
int l9_7681=l9_7674*7177;
int l9_7682=((l9_7681*((l9_7681*1471343)+101146501))+1559861749)&2147483647;
int l9_7683=l9_7682;
int l9_7684=l9_7677;
float l9_7685=float(l9_7684)*4.6566129e-10;
int l9_7686=l9_7680;
float l9_7687=float(l9_7686)*4.6566129e-10;
int l9_7688=l9_7683;
float l9_7689=float(l9_7688)*4.6566129e-10;
float3 l9_7690=float3(l9_7685,l9_7687,l9_7689);
float3 l9_7691=l9_7690;
l9_7666=normalize((l9_7691-float3(0.5))*2.0);
}
else
{
l9_7666=normalize(l9_7663-l9_7664);
}
float3 l9_7692=l9_7666*l9_7665;
N223_CustomForce+=l9_7692;
}
l9_7660=N223_CustomForce;
l9_7654=l9_7660;
float3 l9_7693=float3(0.0);
l9_7693=tempGlobals.N111_ParticleSpawnPosition;
float3 l9_7694=float3(0.0);
float3 l9_7695=(*sc_set0.UserUniforms).Tex3dScale;
l9_7694=l9_7695;
float3 l9_7696=float3(0.0);
float3 l9_7697=(*sc_set0.UserUniforms).Tex3dScrollSpeed;
l9_7696=l9_7697;
float3 l9_7698=float3(0.0);
float3 l9_7699=(*sc_set0.UserUniforms).Tex3dForceStrength;
l9_7698=l9_7699;
float3 l9_7700=float3(0.0);
float3 l9_7701=l9_7693;
float3 l9_7702=l9_7694;
float3 l9_7703=l9_7696;
float3 l9_7704=l9_7698;
ssGlobals l9_7705=tempGlobals;
tempGlobals=l9_7705;
float3 l9_7706=float3(0.0);
N202_OnOff=(int(Tweak_N133_tmp)!=0);
N202_ParticleSpawnPosition=l9_7701;
N202_ScaleTexture=l9_7702;
N202_ScrollSpeed=l9_7703;
N202_Strength=l9_7704;
N202_CustomForce=float3(0.0);
if (N202_OnOff)
{
float3 l9_7707=N202_ParticleSpawnPosition;
float3 l9_7708=N202_Strength;
float3 l9_7709=l9_7707;
float l9_7710=tempGlobals.gTimeElapsed;
float3 l9_7711=float3(l9_7710)*(N202_ScrollSpeed*0.1);
l9_7709/=(N202_ScaleTexture*2.0);
l9_7709+=l9_7711;
float3 l9_7712=l9_7709;
float4 l9_7713=float4(0.0);
float3 l9_7714=l9_7712;
float l9_7715=0.0;
float4 l9_7716=sc_set0.Tex3d.sample(sc_set0.Tex3dSmpSC,l9_7714,level(l9_7715));
l9_7713=l9_7716;
float4 l9_7717=l9_7713;
float3 l9_7718=l9_7717.xyz;
float3 l9_7719=(l9_7718*2.0)-float3(1.0);
l9_7719*=l9_7708;
float3 l9_7720=l9_7719;
N202_CustomForce+=l9_7720;
}
l9_7706=N202_CustomForce;
l9_7700=l9_7706;
float3 l9_7721=float3(0.0);
l9_7721=tempGlobals.N155_helixDirection;
float3 l9_7722=float3(0.0);
l9_7722=tempGlobals.N319_curveDirection;
float3 l9_7723=float3(0.0);
float3 l9_7724=(*sc_set0.UserUniforms).Tweak_N314;
l9_7723=l9_7724;
float3 l9_7725=float3(0.0);
float l9_7726=l9_7592;
float3 l9_7727=l9_7721;
float3 l9_7728=l9_7722;
float3 l9_7729=l9_7723;
ssGlobals l9_7730=tempGlobals;
tempGlobals=l9_7730;
float3 l9_7731=float3(0.0);
N277_OnOff=(int(Tweak_N313_tmp)!=0);
N277_isTrail=l9_7726!=0.0;
N277_helixDir=l9_7727;
N277_curveDir=l9_7728;
N277_Strength=l9_7729;
N277_Path=NODE_248_DROPLIST_ITEM_tmp;
N277_DirectionForce=float3(0.0);
N277_Direction=float3(0.0);
if (N277_OnOff||N277_isTrail)
{
float3 l9_7732;
if (N277_Path==5)
{
l9_7732=N277_helixDir;
}
else
{
bool3 l9_7733=bool3(N277_Path==6);
l9_7732=float3(l9_7733.x ? N277_curveDir.x : float3(0.0).x,l9_7733.y ? N277_curveDir.y : float3(0.0).y,l9_7733.z ? N277_curveDir.z : float3(0.0).z);
}
float3 l9_7734=l9_7732;
float3 l9_7735=l9_7734;
float3 l9_7736=l9_7735;
if (N277_OnOff)
{
N277_DirectionForce+=(l9_7736*N277_Strength);
}
N277_Direction=l9_7736;
}
l9_7731=N277_DirectionForce;
l9_7725=l9_7731;
float3 l9_7737=float3(0.0);
l9_7737=(l9_7654+l9_7700)+l9_7725;
l9_7567=l9_7737;
float3 l9_7738=l9_7567;
l9_7566=((l9_7738/float3(2.0))*l9_7477)*l9_7477;
}
float3 l9_7739=l9_7454;
float3 l9_7740=N111_velocityMin+(((l9_7472+float3(1.0))/float3(2.0))*(N111_velocityMax-N111_velocityMin));
if ((int(VELRAMP_tmp)!=0))
{
l9_7740=mix(N111_velocityMin,N111_velocityMax,l9_7473);
}
float3 l9_7741=l9_7740;
float l9_7742=l9_7477;
float3 l9_7743=N111_velocityDrag;
float3 l9_7744=l9_7483;
float l9_7745=l9_7478;
float3 l9_7746=float3(l9_7742,l9_7742,l9_7742);
float3 l9_7747=l9_7743;
float l9_7748;
if (l9_7746.x<=0.0)
{
l9_7748=0.0;
}
else
{
l9_7748=pow(l9_7746.x,l9_7747.x);
}
float l9_7749=l9_7748;
float l9_7750;
if (l9_7746.y<=0.0)
{
l9_7750=0.0;
}
else
{
l9_7750=pow(l9_7746.y,l9_7747.y);
}
float l9_7751=l9_7750;
float l9_7752;
if (l9_7746.z<=0.0)
{
l9_7752=0.0;
}
else
{
l9_7752=pow(l9_7746.z,l9_7747.z);
}
float3 l9_7753=float3(l9_7749,l9_7751,l9_7752);
float3 l9_7754=l9_7753;
float3 l9_7755=(l9_7741+l9_7744)*l9_7754;
if ((int(VELRAMP_tmp)!=0))
{
float l9_7756=floor(l9_7745*10000.0)/10000.0;
float2 l9_7757=tempGlobals.Surface_UVCoord0;
float2 l9_7758=(l9_7757/float2(10000.0,1.0))+float2(l9_7756,0.0);
float2 l9_7759=l9_7758;
float4 l9_7760=float4(0.0);
int l9_7761;
if ((int(velRampTextureHasSwappedViews_tmp)!=0))
{
int l9_7762=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_7762=0;
}
else
{
l9_7762=gl_InstanceIndex%2;
}
int l9_7763=l9_7762;
l9_7761=1-l9_7763;
}
else
{
int l9_7764=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_7764=0;
}
else
{
l9_7764=gl_InstanceIndex%2;
}
int l9_7765=l9_7764;
l9_7761=l9_7765;
}
int l9_7766=l9_7761;
int l9_7767=velRampTextureLayout_tmp;
int l9_7768=l9_7766;
float2 l9_7769=l9_7759;
bool l9_7770=(int(SC_USE_UV_TRANSFORM_velRampTexture_tmp)!=0);
float3x3 l9_7771=(*sc_set0.UserUniforms).velRampTextureTransform;
int2 l9_7772=int2(SC_SOFTWARE_WRAP_MODE_U_velRampTexture_tmp,SC_SOFTWARE_WRAP_MODE_V_velRampTexture_tmp);
bool l9_7773=(int(SC_USE_UV_MIN_MAX_velRampTexture_tmp)!=0);
float4 l9_7774=(*sc_set0.UserUniforms).velRampTextureUvMinMax;
bool l9_7775=(int(SC_USE_CLAMP_TO_BORDER_velRampTexture_tmp)!=0);
float4 l9_7776=(*sc_set0.UserUniforms).velRampTextureBorderColor;
float l9_7777=0.0;
bool l9_7778=l9_7775&&(!l9_7773);
float l9_7779=1.0;
float l9_7780=l9_7769.x;
int l9_7781=l9_7772.x;
if (l9_7781==1)
{
l9_7780=fract(l9_7780);
}
else
{
if (l9_7781==2)
{
float l9_7782=fract(l9_7780);
float l9_7783=l9_7780-l9_7782;
float l9_7784=step(0.25,fract(l9_7783*0.5));
l9_7780=mix(l9_7782,1.0-l9_7782,fast::clamp(l9_7784,0.0,1.0));
}
}
l9_7769.x=l9_7780;
float l9_7785=l9_7769.y;
int l9_7786=l9_7772.y;
if (l9_7786==1)
{
l9_7785=fract(l9_7785);
}
else
{
if (l9_7786==2)
{
float l9_7787=fract(l9_7785);
float l9_7788=l9_7785-l9_7787;
float l9_7789=step(0.25,fract(l9_7788*0.5));
l9_7785=mix(l9_7787,1.0-l9_7787,fast::clamp(l9_7789,0.0,1.0));
}
}
l9_7769.y=l9_7785;
if (l9_7773)
{
bool l9_7790=l9_7775;
bool l9_7791;
if (l9_7790)
{
l9_7791=l9_7772.x==3;
}
else
{
l9_7791=l9_7790;
}
float l9_7792=l9_7769.x;
float l9_7793=l9_7774.x;
float l9_7794=l9_7774.z;
bool l9_7795=l9_7791;
float l9_7796=l9_7779;
float l9_7797=fast::clamp(l9_7792,l9_7793,l9_7794);
float l9_7798=step(abs(l9_7792-l9_7797),9.9999997e-06);
l9_7796*=(l9_7798+((1.0-float(l9_7795))*(1.0-l9_7798)));
l9_7792=l9_7797;
l9_7769.x=l9_7792;
l9_7779=l9_7796;
bool l9_7799=l9_7775;
bool l9_7800;
if (l9_7799)
{
l9_7800=l9_7772.y==3;
}
else
{
l9_7800=l9_7799;
}
float l9_7801=l9_7769.y;
float l9_7802=l9_7774.y;
float l9_7803=l9_7774.w;
bool l9_7804=l9_7800;
float l9_7805=l9_7779;
float l9_7806=fast::clamp(l9_7801,l9_7802,l9_7803);
float l9_7807=step(abs(l9_7801-l9_7806),9.9999997e-06);
l9_7805*=(l9_7807+((1.0-float(l9_7804))*(1.0-l9_7807)));
l9_7801=l9_7806;
l9_7769.y=l9_7801;
l9_7779=l9_7805;
}
float2 l9_7808=l9_7769;
bool l9_7809=l9_7770;
float3x3 l9_7810=l9_7771;
if (l9_7809)
{
l9_7808=float2((l9_7810*float3(l9_7808,1.0)).xy);
}
float2 l9_7811=l9_7808;
l9_7769=l9_7811;
float l9_7812=l9_7769.x;
int l9_7813=l9_7772.x;
bool l9_7814=l9_7778;
float l9_7815=l9_7779;
if ((l9_7813==0)||(l9_7813==3))
{
float l9_7816=l9_7812;
float l9_7817=0.0;
float l9_7818=1.0;
bool l9_7819=l9_7814;
float l9_7820=l9_7815;
float l9_7821=fast::clamp(l9_7816,l9_7817,l9_7818);
float l9_7822=step(abs(l9_7816-l9_7821),9.9999997e-06);
l9_7820*=(l9_7822+((1.0-float(l9_7819))*(1.0-l9_7822)));
l9_7816=l9_7821;
l9_7812=l9_7816;
l9_7815=l9_7820;
}
l9_7769.x=l9_7812;
l9_7779=l9_7815;
float l9_7823=l9_7769.y;
int l9_7824=l9_7772.y;
bool l9_7825=l9_7778;
float l9_7826=l9_7779;
if ((l9_7824==0)||(l9_7824==3))
{
float l9_7827=l9_7823;
float l9_7828=0.0;
float l9_7829=1.0;
bool l9_7830=l9_7825;
float l9_7831=l9_7826;
float l9_7832=fast::clamp(l9_7827,l9_7828,l9_7829);
float l9_7833=step(abs(l9_7827-l9_7832),9.9999997e-06);
l9_7831*=(l9_7833+((1.0-float(l9_7830))*(1.0-l9_7833)));
l9_7827=l9_7832;
l9_7823=l9_7827;
l9_7826=l9_7831;
}
l9_7769.y=l9_7823;
l9_7779=l9_7826;
float2 l9_7834=l9_7769;
int l9_7835=l9_7767;
int l9_7836=l9_7768;
float l9_7837=l9_7777;
float2 l9_7838=l9_7834;
int l9_7839=l9_7835;
int l9_7840=l9_7836;
float3 l9_7841=float3(0.0);
if (l9_7839==0)
{
l9_7841=float3(l9_7838,0.0);
}
else
{
if (l9_7839==1)
{
l9_7841=float3(l9_7838.x,(l9_7838.y*0.5)+(0.5-(float(l9_7840)*0.5)),0.0);
}
else
{
l9_7841=float3(l9_7838,float(l9_7840));
}
}
float3 l9_7842=l9_7841;
float3 l9_7843=l9_7842;
float4 l9_7844=sc_set0.velRampTexture.sample(sc_set0.velRampTextureSmpSC,l9_7843.xy,level(l9_7837));
float4 l9_7845=l9_7844;
if (l9_7775)
{
l9_7845=mix(l9_7776,l9_7845,float4(l9_7779));
}
float4 l9_7846=l9_7845;
l9_7760=l9_7846;
float4 l9_7847=l9_7760;
float3 l9_7848=l9_7847.xyz;
l9_7755=(l9_7741+l9_7744)*l9_7848;
if (!(SC_DEVICE_CLASS_tmp>=2))
{
l9_7755=l9_7741*l9_7754;
}
}
float3 l9_7849=l9_7755;
l9_7739=l9_7849;
if ((int(TRAILS_tmp)!=0))
{
if (N111_isTrail)
{
float2 l9_7850=tempGlobals.Surface_UVCoord0;
float2 l9_7851=l9_7850;
float l9_7852=mix(1.0,l9_7851.y,1.0-N111_taper.x);
l9_7852*=mix(1.0,1.0-l9_7851.y,1.0-N111_taper.y);
N111_cameraFade_trailHeadTime_taper=float4(N111_cameraFade_trailHeadTime_taper.x,N111_trailHeadTime.x,N111_trailHeadTime.y,N111_cameraFade_trailHeadTime_taper.w);
N111_cameraFade_trailHeadTime_taper.w=l9_7852;
}
}
float4x4 l9_7853=(*sc_set0.UserUniforms).sc_ModelMatrix;
float l9_7854=length(l9_7853[0].xyz);
float4x4 l9_7855=(*sc_set0.UserUniforms).sc_ModelMatrix;
float l9_7856=length(l9_7855[1].xyz);
float4x4 l9_7857=(*sc_set0.UserUniforms).sc_ModelMatrix;
float l9_7858=length(l9_7857[2].xyz);
float3 l9_7859=float3(l9_7854,l9_7856,l9_7858);
float4x4 l9_7860=(*sc_set0.UserUniforms).sc_ModelMatrix;
float4x4 l9_7861=l9_7860;
float4 l9_7862=l9_7861[0];
float4 l9_7863=l9_7861[1];
float4 l9_7864=l9_7861[2];
float3x3 l9_7865=float3x3(float3(float3(l9_7862.x,l9_7863.x,l9_7864.x)),float3(float3(l9_7862.y,l9_7863.y,l9_7864.y)),float3(float3(l9_7862.z,l9_7863.z,l9_7864.z)));
float3x3 l9_7866=l9_7865;
float3x3 l9_7867=l9_7866;
float3 l9_7868=float3(0.0);
if (rotationSpace_tmp==2)
{
l9_7868=(((l9_7739*l9_7867)+l9_7564)+l9_7565)+l9_7566;
}
else
{
if (rotationSpace_tmp==1)
{
l9_7868=(((l9_7739*l9_7859)+l9_7564)+l9_7565)+l9_7566;
}
else
{
l9_7868=(((l9_7739+l9_7564)+l9_7565)+l9_7566)*l9_7867;
}
}
float4x4 l9_7869=(*sc_set0.UserUniforms).sc_ModelMatrix;
float3 l9_7870=(l9_7869*float4(l9_7482,1.0)).xyz+l9_7868;
N111_particleSpawnPosition=l9_7482;
if ((int(Tweak_N282_tmp)!=0))
{
float3 l9_7871=l9_7482;
float3 l9_7872=N111_DisplaceStrength;
float3 l9_7873=N111_ScrollSpeedDisplace;
float3 l9_7874=N111_ScaleDisplace;
float3 l9_7875=l9_7871;
float l9_7876=tempGlobals.gTimeElapsed;
float3 l9_7877=float3(l9_7876)*(l9_7873*0.1);
l9_7875/=(l9_7874*2.0);
l9_7875+=l9_7877;
float3 l9_7878=l9_7875;
float4 l9_7879=float4(0.0);
float3 l9_7880=l9_7878;
float l9_7881=0.0;
float4 l9_7882=sc_set0.displace3dTex.sample(sc_set0.displace3dTexSmpSC,l9_7880,level(l9_7881));
l9_7879=l9_7882;
float4 l9_7883=l9_7879;
float3 l9_7884=l9_7883.xyz;
float3 l9_7885=(l9_7884*2.0)-float3(1.0);
l9_7885*=l9_7872;
float3 l9_7886=l9_7885;
float3 l9_7887=l9_7886;
if ((int(Tweak_N331_tmp)!=0))
{
float4x4 l9_7888=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_7887=float3x3(l9_7888[0].xyz,l9_7888[1].xyz,l9_7888[2].xyz)*l9_7887;
}
l9_7870+=l9_7887;
}
if ((int(Tweak_N228_tmp)!=0))
{
float3 l9_7889=N111_AxisOrbit;
float3 l9_7890=N111_CenterOrbit;
if ((int(Tweak_N332_tmp)!=0))
{
float4x4 l9_7891=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_7889=float3x3(l9_7891[0].xyz,l9_7891[1].xyz,l9_7891[2].xyz)*N111_AxisOrbit;
float4x4 l9_7892=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_7890=N111_CenterOrbit+l9_7892[3].xyz;
}
float3 l9_7893=l9_7870;
float3 l9_7894=l9_7889;
float2 l9_7895=N111_MinMaxOrbitAngle;
float2 l9_7896=N111_MinMaxOrbitSpeed;
float3 l9_7897=l9_7890;
float2 l9_7898=l9_7475;
float l9_7899=mix(l9_7895.x,l9_7895.y,l9_7898.x);
float l9_7900=tempGlobals.gTimeElapsed;
float l9_7901=l9_7900*mix(l9_7896.x,l9_7896.y,l9_7898.y);
l9_7899+=l9_7901;
float3 l9_7902=l9_7894;
float l9_7903=l9_7899;
float3 l9_7904=l9_7902;
float l9_7905=l9_7903;
float3 l9_7906=normalize(l9_7904);
float l9_7907=sin(radians(l9_7905));
float l9_7908=cos(radians(l9_7905));
float l9_7909=1.0-l9_7908;
float3x3 l9_7910=float3x3(float3(((l9_7909*l9_7906.x)*l9_7906.x)+l9_7908,((l9_7909*l9_7906.x)*l9_7906.y)-(l9_7906.z*l9_7907),((l9_7909*l9_7906.z)*l9_7906.x)+(l9_7906.y*l9_7907)),float3(((l9_7909*l9_7906.x)*l9_7906.y)+(l9_7906.z*l9_7907),((l9_7909*l9_7906.y)*l9_7906.y)+l9_7908,((l9_7909*l9_7906.y)*l9_7906.z)-(l9_7906.x*l9_7907)),float3(((l9_7909*l9_7906.z)*l9_7906.x)-(l9_7906.y*l9_7907),((l9_7909*l9_7906.y)*l9_7906.z)+(l9_7906.x*l9_7907),((l9_7909*l9_7906.z)*l9_7906.z)+l9_7908));
float3x3 l9_7911=l9_7910;
float3x3 l9_7912=l9_7911;
float3 l9_7913=l9_7912*(l9_7893-l9_7897);
float3 l9_7914=l9_7913+l9_7897;
l9_7870=l9_7914;
}
float l9_7915;
if (MESHTYPE_tmp==0)
{
l9_7915=mix(N111_rotationRandom.x,N111_rotationRandom.y,l9_7474);
}
else
{
l9_7915=mix(N111_rotationRandomZ.x,N111_rotationRandomZ.y,l9_7474);
}
float l9_7916=l9_7915;
float l9_7917=1.0;
if (!(int(ALIGNPARTICLES_tmp)!=0))
{
float l9_7918=1.0-l9_7478;
float l9_7919=N111_rotationDrag;
float l9_7920;
if (l9_7918<=0.0)
{
l9_7920=0.0;
}
else
{
l9_7920=pow(l9_7918,l9_7919);
}
float l9_7921=l9_7920;
l9_7917=l9_7921;
}
float l9_7922;
if (MESHTYPE_tmp==0)
{
l9_7922=mix(N111_rotationRate.x,N111_rotationRate.y,l9_7474);
}
else
{
l9_7922=mix(N111_rotationRateZ.x,N111_rotationRateZ.y,l9_7474);
}
float l9_7923=l9_7922;
float l9_7924=((l9_7923*l9_7917)*l9_7478)*2.0;
float l9_7925=3.1415927*((l9_7924+l9_7916)-0.5);
float l9_7926=1.0;
if ((int(SCREENFADE_tmp)!=0))
{
float3 l9_7927=(*sc_set0.UserUniforms).sc_Camera.position;
float3 l9_7928=l9_7927-l9_7870;
float l9_7929=dot(l9_7928,l9_7928);
float l9_7930=(N111_fadeDistanceInvisible+1e-06)*(N111_fadeDistanceInvisible+1e-06);
float l9_7931=N111_fadeDistanceVisible*N111_fadeDistanceVisible;
float l9_7932=fast::min(l9_7930,l9_7931);
float l9_7933=fast::max(l9_7930,l9_7931);
float l9_7934=smoothstep(l9_7932,l9_7933,l9_7929);
float l9_7935;
if (l9_7930>l9_7931)
{
l9_7935=1.0-l9_7934;
}
else
{
l9_7935=l9_7934;
}
l9_7934=l9_7935;
if (l9_7934<=1e-06)
{
l9_7926=0.0;
}
N111_cameraFade_trailHeadTime_taper.x=l9_7934;
}
if ((MESHTYPE_tmp==0)||(int(TRAILS_tmp)!=0))
{
if ((MESHTYPE_tmp==0)||N111_isTrail)
{
int l9_7936=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_7936=0;
}
else
{
l9_7936=gl_InstanceIndex%2;
}
int l9_7937=l9_7936;
float4x4 l9_7938=(*sc_set0.UserUniforms).sc_ViewMatrixInverseArray[l9_7937];
float3 l9_7939=normalize(l9_7938[2].xyz);
if (N111_isTrail)
{
l9_7939*=float3(-1.0);
}
float3 l9_7940=float3(0.0,1.0,0.0);
if (ALIGN_TO_CAMERA_tmp==1)
{
int l9_7941=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_7941=0;
}
else
{
l9_7941=gl_InstanceIndex%2;
}
int l9_7942=l9_7941;
float3 l9_7943=(*sc_set0.UserUniforms).sc_ViewMatrixInverseArray[l9_7942][1].xyz;
l9_7940=l9_7943;
}
float3 l9_7944=-normalize(cross(l9_7939,l9_7940));
float3 l9_7945=normalize(cross(l9_7944,l9_7939));
float l9_7946=1.0;
if ((int(ALIGNPARTICLES_tmp)!=0))
{
if (ALIGN_PARTICLES_TO_OPTION_tmp==1)
{
l9_7944=float3(0.0,0.0,1.0);
l9_7945=float3(0.0,1.0,0.0);
}
if (ALIGN_PARTICLES_TO_OPTION_tmp==2)
{
l9_7944=float3(1.0,0.0,0.0);
l9_7945=float3(0.0,0.0,1.0);
}
if (ALIGN_PARTICLES_TO_OPTION_tmp==3)
{
l9_7944=float3(1.0,0.0,0.0);
l9_7945=float3(0.0,1.0,0.0);
}
}
float2 l9_7947=float2(cos(l9_7925),sin(l9_7925));
float2 l9_7948=float2(-sin(l9_7925),cos(l9_7925));
float3 l9_7949=float3((l9_7944*l9_7947.x)+(l9_7945*l9_7947.y));
float3 l9_7950=float3((l9_7944*l9_7948.x)+(l9_7945*l9_7948.y));
if ((int(ALIGNPARTICLES_tmp)!=0))
{
if (ALIGN_PARTICLES_TO_OPTION_tmp==0)
{
if (!N111_isTrail)
{
float l9_7951=l9_7946;
float3 l9_7952=l9_7949;
float3 l9_7953=l9_7950;
float3 l9_7954=l9_7939;
float3 l9_7955=l9_7868;
float3 l9_7956=l9_7564;
float3 l9_7957=l9_7565;
float3 l9_7958=l9_7566;
float3 l9_7959=normalize((((l9_7955+l9_7956)+l9_7957)+l9_7958)+float3(1e-06));
float3 l9_7960=l9_7955*0.02;
l9_7952=l9_7959;
l9_7953=normalize(cross(l9_7952,l9_7954));
if (N111_ENABLE_IGNOREVEL)
{
l9_7951=fast::max(N111_sizeVelScale,1e-06);
}
else
{
if (N111_ENABLE_IGNORETRANSFORMSCALE)
{
float4x4 l9_7961=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_7951=(length(l9_7960)/length(l9_7961[0].xyz))*N111_sizeVelScale;
}
else
{
l9_7951=length(l9_7960)*N111_sizeVelScale;
}
l9_7951=fast::clamp(l9_7951,N111_velScaleMinMax.x,N111_velScaleMinMax.y);
}
l9_7946=l9_7951;
l9_7949=l9_7952;
l9_7950=l9_7953;
}
}
}
if ((int(TRAILS_tmp)!=0))
{
if (N111_isTrail)
{
float3 l9_7962=l9_7949;
float3 l9_7963=l9_7950;
float3 l9_7964=l9_7939;
float2 l9_7965=l9_7947;
float3 l9_7966=l9_7868;
float3 l9_7967=l9_7564;
float3 l9_7968=l9_7565;
float3 l9_7969=l9_7566;
float3 l9_7970=N111_tangentIN;
float3 l9_7971=(((((l9_7966*0.02)+l9_7967)+l9_7968)+l9_7969)+l9_7970)+float3(1e-06);
float3 l9_7972=normalize(l9_7971);
l9_7962=l9_7972;
l9_7963=normalize(cross(l9_7962,l9_7964));
if ((int(TRAILTWIST_tmp)!=0))
{
l9_7963=float3((l9_7962*l9_7965.x)+(l9_7963*l9_7965.y));
}
l9_7949=l9_7962;
l9_7950=l9_7963;
}
}
float4x4 l9_7973=(*sc_set0.UserUniforms).sc_ModelMatrix;
float l9_7974=length(l9_7973[0].xyz);
float2 l9_7975=tempGlobals.Surface_UVCoord0;
float l9_7976=l9_7467;
float l9_7977=l9_7468;
float l9_7978=l9_7478;
float l9_7979=N111_sizeSpeed;
float2 l9_7980=(((l9_7975-float2(0.5))*l9_7926)*N111_pSize(l9_7976,l9_7977,l9_7978,l9_7979,N111_isTrail,N111_trailHeadTime,N111_trailSizeMult,N111_sizeStart,N111_sizeEnd,N111_sizeStartMax,N111_sizeEndMax,N111_sizeStart3D,N111_sizeEnd3D,N111_sizeStartMax3D,N111_sizeEndMax3D,gl_InstanceIndex,(*sc_set0.UserUniforms),tempGlobals,sc_set0.trailSizeRampTex,sc_set0.trailSizeRampTexSmpSC,sc_set0.sizeRampTexture,sc_set0.sizeRampTextureSmpSC))*l9_7974;
float3 l9_7981=(l9_7870+(l9_7950*l9_7980.x))+(l9_7949*(l9_7980.y*l9_7946));
N111_position=l9_7981;
if ((N111_particleAlive<0.5)||(l9_7926<0.5))
{
N111_position/=float3(0.0);
}
N111_normal=l9_7939;
}
}
if (!(MESHTYPE_tmp==0))
{
if (!N111_isTrail)
{
N111_position=N111_positionObjectSpace;
if (N111_ENABLE_CENTER_IN_BBOX)
{
float3 l9_7982=(*sc_set0.UserUniforms).sc_LocalAabbMax;
float3 l9_7983=(*sc_set0.UserUniforms).sc_LocalAabbMin;
float3 l9_7984=(l9_7982+l9_7983)/float3(2.0);
N111_position-=l9_7984;
}
float l9_7985=l9_7467;
float l9_7986=l9_7468;
float l9_7987=l9_7478;
float l9_7988=N111_sizeSpeed;
N111_position=(N111_position*l9_7859)*N111_pSize3D(l9_7985,l9_7986,l9_7987,l9_7988,N111_sizeStart3D,N111_sizeEnd3D,N111_sizeStartMax3D,N111_sizeEndMax3D,gl_InstanceIndex,(*sc_set0.UserUniforms),tempGlobals,sc_set0.sizeRampTexture,sc_set0.sizeRampTextureSmpSC);
if ((N111_particleAlive<0.5)||(l9_7926<0.5))
{
N111_position.x=2.1474836e+09;
}
float3x3 l9_7989;
if ((int(ALIGNPARTICLES_tmp)!=0))
{
if (ALIGN_PARTICLES_TO_OPTION_tmp==3)
{
l9_7989=float3x3(float3(1.0,0.0,0.0),float3(0.0,1.0,0.0),float3(0.0,0.0,1.0));
}
else
{
float3 l9_7990=float3(0.0);
if (ALIGN_PARTICLES_TO_OPTION_tmp==1)
{
l9_7990=float3(1.0,0.0,0.0);
}
if (ALIGN_PARTICLES_TO_OPTION_tmp==2)
{
l9_7990=float3(0.0,1.0,0.0);
}
if (ALIGN_PARTICLES_TO_OPTION_tmp==0)
{
float l9_7991=0.001;
float3 l9_7992=l9_7740;
float l9_7993=l9_7477-l9_7991;
float3 l9_7994=N111_velocityDrag;
float3 l9_7995=l9_7483;
float l9_7996=l9_7478-l9_7991;
float3 l9_7997=float3(l9_7993,l9_7993,l9_7993);
float3 l9_7998=l9_7994;
float l9_7999;
if (l9_7997.x<=0.0)
{
l9_7999=0.0;
}
else
{
l9_7999=pow(l9_7997.x,l9_7998.x);
}
float l9_8000=l9_7999;
float l9_8001;
if (l9_7997.y<=0.0)
{
l9_8001=0.0;
}
else
{
l9_8001=pow(l9_7997.y,l9_7998.y);
}
float l9_8002=l9_8001;
float l9_8003;
if (l9_7997.z<=0.0)
{
l9_8003=0.0;
}
else
{
l9_8003=pow(l9_7997.z,l9_7998.z);
}
float3 l9_8004=float3(l9_8000,l9_8002,l9_8003);
float3 l9_8005=l9_8004;
float3 l9_8006=(l9_7992+l9_7995)*l9_8005;
if ((int(VELRAMP_tmp)!=0))
{
float l9_8007=floor(l9_7996*10000.0)/10000.0;
float2 l9_8008=tempGlobals.Surface_UVCoord0;
float2 l9_8009=(l9_8008/float2(10000.0,1.0))+float2(l9_8007,0.0);
float2 l9_8010=l9_8009;
float4 l9_8011=float4(0.0);
int l9_8012;
if ((int(velRampTextureHasSwappedViews_tmp)!=0))
{
int l9_8013=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_8013=0;
}
else
{
l9_8013=gl_InstanceIndex%2;
}
int l9_8014=l9_8013;
l9_8012=1-l9_8014;
}
else
{
int l9_8015=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_8015=0;
}
else
{
l9_8015=gl_InstanceIndex%2;
}
int l9_8016=l9_8015;
l9_8012=l9_8016;
}
int l9_8017=l9_8012;
int l9_8018=velRampTextureLayout_tmp;
int l9_8019=l9_8017;
float2 l9_8020=l9_8010;
bool l9_8021=(int(SC_USE_UV_TRANSFORM_velRampTexture_tmp)!=0);
float3x3 l9_8022=(*sc_set0.UserUniforms).velRampTextureTransform;
int2 l9_8023=int2(SC_SOFTWARE_WRAP_MODE_U_velRampTexture_tmp,SC_SOFTWARE_WRAP_MODE_V_velRampTexture_tmp);
bool l9_8024=(int(SC_USE_UV_MIN_MAX_velRampTexture_tmp)!=0);
float4 l9_8025=(*sc_set0.UserUniforms).velRampTextureUvMinMax;
bool l9_8026=(int(SC_USE_CLAMP_TO_BORDER_velRampTexture_tmp)!=0);
float4 l9_8027=(*sc_set0.UserUniforms).velRampTextureBorderColor;
float l9_8028=0.0;
bool l9_8029=l9_8026&&(!l9_8024);
float l9_8030=1.0;
float l9_8031=l9_8020.x;
int l9_8032=l9_8023.x;
if (l9_8032==1)
{
l9_8031=fract(l9_8031);
}
else
{
if (l9_8032==2)
{
float l9_8033=fract(l9_8031);
float l9_8034=l9_8031-l9_8033;
float l9_8035=step(0.25,fract(l9_8034*0.5));
l9_8031=mix(l9_8033,1.0-l9_8033,fast::clamp(l9_8035,0.0,1.0));
}
}
l9_8020.x=l9_8031;
float l9_8036=l9_8020.y;
int l9_8037=l9_8023.y;
if (l9_8037==1)
{
l9_8036=fract(l9_8036);
}
else
{
if (l9_8037==2)
{
float l9_8038=fract(l9_8036);
float l9_8039=l9_8036-l9_8038;
float l9_8040=step(0.25,fract(l9_8039*0.5));
l9_8036=mix(l9_8038,1.0-l9_8038,fast::clamp(l9_8040,0.0,1.0));
}
}
l9_8020.y=l9_8036;
if (l9_8024)
{
bool l9_8041=l9_8026;
bool l9_8042;
if (l9_8041)
{
l9_8042=l9_8023.x==3;
}
else
{
l9_8042=l9_8041;
}
float l9_8043=l9_8020.x;
float l9_8044=l9_8025.x;
float l9_8045=l9_8025.z;
bool l9_8046=l9_8042;
float l9_8047=l9_8030;
float l9_8048=fast::clamp(l9_8043,l9_8044,l9_8045);
float l9_8049=step(abs(l9_8043-l9_8048),9.9999997e-06);
l9_8047*=(l9_8049+((1.0-float(l9_8046))*(1.0-l9_8049)));
l9_8043=l9_8048;
l9_8020.x=l9_8043;
l9_8030=l9_8047;
bool l9_8050=l9_8026;
bool l9_8051;
if (l9_8050)
{
l9_8051=l9_8023.y==3;
}
else
{
l9_8051=l9_8050;
}
float l9_8052=l9_8020.y;
float l9_8053=l9_8025.y;
float l9_8054=l9_8025.w;
bool l9_8055=l9_8051;
float l9_8056=l9_8030;
float l9_8057=fast::clamp(l9_8052,l9_8053,l9_8054);
float l9_8058=step(abs(l9_8052-l9_8057),9.9999997e-06);
l9_8056*=(l9_8058+((1.0-float(l9_8055))*(1.0-l9_8058)));
l9_8052=l9_8057;
l9_8020.y=l9_8052;
l9_8030=l9_8056;
}
float2 l9_8059=l9_8020;
bool l9_8060=l9_8021;
float3x3 l9_8061=l9_8022;
if (l9_8060)
{
l9_8059=float2((l9_8061*float3(l9_8059,1.0)).xy);
}
float2 l9_8062=l9_8059;
l9_8020=l9_8062;
float l9_8063=l9_8020.x;
int l9_8064=l9_8023.x;
bool l9_8065=l9_8029;
float l9_8066=l9_8030;
if ((l9_8064==0)||(l9_8064==3))
{
float l9_8067=l9_8063;
float l9_8068=0.0;
float l9_8069=1.0;
bool l9_8070=l9_8065;
float l9_8071=l9_8066;
float l9_8072=fast::clamp(l9_8067,l9_8068,l9_8069);
float l9_8073=step(abs(l9_8067-l9_8072),9.9999997e-06);
l9_8071*=(l9_8073+((1.0-float(l9_8070))*(1.0-l9_8073)));
l9_8067=l9_8072;
l9_8063=l9_8067;
l9_8066=l9_8071;
}
l9_8020.x=l9_8063;
l9_8030=l9_8066;
float l9_8074=l9_8020.y;
int l9_8075=l9_8023.y;
bool l9_8076=l9_8029;
float l9_8077=l9_8030;
if ((l9_8075==0)||(l9_8075==3))
{
float l9_8078=l9_8074;
float l9_8079=0.0;
float l9_8080=1.0;
bool l9_8081=l9_8076;
float l9_8082=l9_8077;
float l9_8083=fast::clamp(l9_8078,l9_8079,l9_8080);
float l9_8084=step(abs(l9_8078-l9_8083),9.9999997e-06);
l9_8082*=(l9_8084+((1.0-float(l9_8081))*(1.0-l9_8084)));
l9_8078=l9_8083;
l9_8074=l9_8078;
l9_8077=l9_8082;
}
l9_8020.y=l9_8074;
l9_8030=l9_8077;
float2 l9_8085=l9_8020;
int l9_8086=l9_8018;
int l9_8087=l9_8019;
float l9_8088=l9_8028;
float2 l9_8089=l9_8085;
int l9_8090=l9_8086;
int l9_8091=l9_8087;
float3 l9_8092=float3(0.0);
if (l9_8090==0)
{
l9_8092=float3(l9_8089,0.0);
}
else
{
if (l9_8090==1)
{
l9_8092=float3(l9_8089.x,(l9_8089.y*0.5)+(0.5-(float(l9_8091)*0.5)),0.0);
}
else
{
l9_8092=float3(l9_8089,float(l9_8091));
}
}
float3 l9_8093=l9_8092;
float3 l9_8094=l9_8093;
float4 l9_8095=sc_set0.velRampTexture.sample(sc_set0.velRampTextureSmpSC,l9_8094.xy,level(l9_8088));
float4 l9_8096=l9_8095;
if (l9_8026)
{
l9_8096=mix(l9_8027,l9_8096,float4(l9_8030));
}
float4 l9_8097=l9_8096;
l9_8011=l9_8097;
float4 l9_8098=l9_8011;
float3 l9_8099=l9_8098.xyz;
l9_8006=(l9_7992+l9_7995)*l9_8099;
if (!(SC_DEVICE_CLASS_tmp>=2))
{
l9_8006=l9_7992*l9_8005;
}
}
float3 l9_8100=l9_8006;
float3 l9_8101=l9_8100;
float l9_8102=((N111_gravity/2.0)*(l9_7477-l9_7991))*(l9_7477-l9_7991);
l9_7564.y-=l9_8102;
if ((int(FORCE_tmp)!=0))
{
float3 l9_8103=float3(((N111_localForce/float3(2.0))*(l9_7477-l9_7991))*(l9_7477-l9_7991));
l9_7565-=l9_8103;
}
if ((int(CUSTOMFORCE_tmp)!=0))
{
tempGlobals.N111_ParticleSpawnPosition=l9_7482;
float3 l9_8104=float3(0.0);
float3 l9_8105=float3(0.0);
l9_8105=tempGlobals.N111_ParticleSpawnPosition;
float l9_8106=0.0;
float l9_8107=(*sc_set0.UserUniforms).timeGlobal;
l9_8106=l9_8107;
float l9_8108=0.0;
float l9_8109=(*sc_set0.UserUniforms).externalTimeInput;
l9_8108=l9_8109;
float l9_8110=0.0;
float l9_8111=(*sc_set0.UserUniforms).externalSeed;
l9_8110=l9_8111;
float l9_8112=0.0;
float l9_8113=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_8112=l9_8113;
float2 l9_8114=float2(0.0);
float2 l9_8115=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_8114=l9_8115;
float l9_8116=0.0;
float l9_8117=(*sc_set0.UserUniforms).spawnDuration;
l9_8116=l9_8117;
float l9_8118=0.0;
float l9_8119;
if ((int(TRAILS_tmp)!=0))
{
l9_8119=1.001;
}
else
{
l9_8119=0.001;
}
l9_8119-=0.001;
l9_8118=l9_8119;
float l9_8120=0.0;
float l9_8121=(*sc_set0.UserUniforms).trailLength;
l9_8120=l9_8121;
float4 l9_8122=float4(0.0);
l9_8122=tempGlobals.VertexColor;
float l9_8123=0.0;
l9_8123=l9_8122.x;
float l9_8124=0.0;
float l9_8125=l9_8118;
bool l9_8126=(l9_8125*1.0)!=0.0;
bool l9_8127;
if (l9_8126)
{
l9_8127=(l9_8123*1.0)!=0.0;
}
else
{
l9_8127=l9_8126;
}
l9_8124=float(l9_8127);
float3 l9_8128=float3(0.0);
float l9_8129=0.0;
float l9_8130=l9_8106;
float l9_8131=l9_8108;
float l9_8132=l9_8110;
float l9_8133=l9_8112;
float2 l9_8134=l9_8114;
float l9_8135=l9_8116;
float l9_8136=l9_8120;
float l9_8137=l9_8124;
ssGlobals l9_8138=tempGlobals;
tempGlobals=l9_8138;
float3 l9_8139=float3(0.0);
float l9_8140=0.0;
N181_timeGlobal=l9_8130;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_8131;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_8132;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_8133;
N181_lifeTimeMinMax=l9_8134;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_8135;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_8136;
N181_isTrailCondition=l9_8137!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_8141=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_8142=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_8141=length(float4(1.0)*l9_8142);
}
N181_globalSeed=N181_externalSeed+l9_8141;
int l9_8143=0;
l9_8143=ssInstanceID;
int l9_8144=l9_8143;
float l9_8145=float(l9_8144);
int l9_8146=int(l9_8145);
int l9_8147=l9_8146^(l9_8146*15299);
int l9_8148=l9_8147;
int l9_8149=l9_8148;
int l9_8150=((l9_8149*((l9_8149*1471343)+101146501))+1559861749)&2147483647;
int l9_8151=l9_8150;
int l9_8152=l9_8148*1399;
int l9_8153=((l9_8152*((l9_8152*1471343)+101146501))+1559861749)&2147483647;
int l9_8154=l9_8153;
int l9_8155=l9_8148*7177;
int l9_8156=((l9_8155*((l9_8155*1471343)+101146501))+1559861749)&2147483647;
int l9_8157=l9_8156;
int l9_8158=l9_8151;
float l9_8159=float(l9_8158)*4.6566129e-10;
int l9_8160=l9_8154;
float l9_8161=float(l9_8160)*4.6566129e-10;
int l9_8162=l9_8157;
float l9_8163=float(l9_8162)*4.6566129e-10;
float3 l9_8164=float3(l9_8159,l9_8161,l9_8163);
float3 l9_8165=l9_8164;
N181_particleSeed=l9_8165;
float l9_8166=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_8167;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_8167=N181_lifeTimeMinMax;
}
else
{
l9_8167=float2(N181_lifeTimeConstant);
}
float2 l9_8168=l9_8167;
float l9_8169=fast::max(l9_8168.x,0.0099999998);
float l9_8170=fast::max(l9_8168.y,0.0099999998);
float l9_8171=tempGlobals.gTimeElapsed;
float l9_8172=l9_8171;
if (N181_ENABLE_EXTERNALTIME)
{
l9_8172=N181_externalTime;
}
float l9_8173=l9_8172;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_8173=N181_timeGlobal*l9_8172;
}
else
{
float l9_8174=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_8174=N181_trailLength;
}
}
float l9_8175=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_8176=0.0;
float l9_8177;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_8177=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_8177=0.0;
}
l9_8176=l9_8177;
float l9_8178=l9_8176;
int l9_8179=0;
l9_8179=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_8180=l9_8179;
l9_8175=fast::max(l9_8178*(1.0-(1.0/float(l9_8180))),0.0);
}
else
{
l9_8175=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_8181=fract(((l9_8172*N181_timeGlobal)*(1.0/(l9_8168.y+l9_8174)))+l9_8175);
l9_8173=l9_8181*(l9_8168.y+l9_8174);
}
float l9_8182=mix(l9_8173/l9_8169,l9_8173/l9_8170,l9_8166);
float l9_8183=fast::clamp(l9_8182,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_8173,l9_8183);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_8184=tempGlobals.Surface_UVCoord0;
l9_8173-=(l9_8184.y*N181_trailLength);
l9_8182=mix(l9_8173/l9_8169,l9_8173/l9_8170,l9_8166);
l9_8183=fast::clamp(l9_8182,0.0,1.0);
}
}
float l9_8185=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_8172-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_8185=1.0;
}
}
}
float l9_8186=l9_8182+l9_8185;
N181_particleAlive=1.0;
if ((l9_8186>0.99989998)||(l9_8173<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_8172*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_8168,l9_8173,l9_8183);
l9_8139=N181_particleSeed;
l9_8140=N181_isTrail;
l9_8128=l9_8139;
l9_8129=l9_8140;
float l9_8187=0.0;
float l9_8188=(*sc_set0.UserUniforms).attractRepelForceStrength;
l9_8187=l9_8188;
float3 l9_8189=float3(0.0);
float3 l9_8190=(*sc_set0.UserUniforms).customForceOrigin;
l9_8189=l9_8190;
float3 l9_8191=float3(0.0);
float3 l9_8192=l9_8105;
float3 l9_8193=l9_8128;
float l9_8194=l9_8187;
float3 l9_8195=l9_8189;
ssGlobals l9_8196=tempGlobals;
tempGlobals=l9_8196;
float3 l9_8197=float3(0.0);
N223_OnOff=(int(Tweak_N131_tmp)!=0);
N223_ParticleSpawnPosition=l9_8192;
N223_ParticleSeed=l9_8193;
N223_Strength=l9_8194;
N223_ForceOrigin=l9_8195;
N223_CustomForce=float3(0.0);
float4x4 l9_8198=(*sc_set0.UserUniforms).sc_ModelMatrix;
float4 l9_8199=l9_8198*float4(N223_ParticleSpawnPosition,1.0);
if (N223_OnOff)
{
float3 l9_8200=N223_ForceOrigin;
float3 l9_8201=l9_8199.xyz;
float l9_8202=N223_Strength;
float3 l9_8203=float3(0.0);
if (all(l9_8200==l9_8201))
{
int l9_8204=0;
l9_8204=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_8205=l9_8204;
float3 l9_8206=N223_ParticleSeed*float(l9_8205);
int l9_8207=int(l9_8206.x);
int l9_8208=int(l9_8206.y);
int l9_8209=int(l9_8206.z);
int l9_8210=((l9_8207*15299)^(l9_8208*30133))^(l9_8209*17539);
int l9_8211=l9_8210;
int l9_8212=l9_8211;
int l9_8213=((l9_8212*((l9_8212*1471343)+101146501))+1559861749)&2147483647;
int l9_8214=l9_8213;
int l9_8215=l9_8211*1399;
int l9_8216=((l9_8215*((l9_8215*1471343)+101146501))+1559861749)&2147483647;
int l9_8217=l9_8216;
int l9_8218=l9_8211*7177;
int l9_8219=((l9_8218*((l9_8218*1471343)+101146501))+1559861749)&2147483647;
int l9_8220=l9_8219;
int l9_8221=l9_8214;
float l9_8222=float(l9_8221)*4.6566129e-10;
int l9_8223=l9_8217;
float l9_8224=float(l9_8223)*4.6566129e-10;
int l9_8225=l9_8220;
float l9_8226=float(l9_8225)*4.6566129e-10;
float3 l9_8227=float3(l9_8222,l9_8224,l9_8226);
float3 l9_8228=l9_8227;
l9_8203=normalize((l9_8228-float3(0.5))*2.0);
}
else
{
l9_8203=normalize(l9_8200-l9_8201);
}
float3 l9_8229=l9_8203*l9_8202;
N223_CustomForce+=l9_8229;
}
l9_8197=N223_CustomForce;
l9_8191=l9_8197;
float3 l9_8230=float3(0.0);
l9_8230=tempGlobals.N111_ParticleSpawnPosition;
float3 l9_8231=float3(0.0);
float3 l9_8232=(*sc_set0.UserUniforms).Tex3dScale;
l9_8231=l9_8232;
float3 l9_8233=float3(0.0);
float3 l9_8234=(*sc_set0.UserUniforms).Tex3dScrollSpeed;
l9_8233=l9_8234;
float3 l9_8235=float3(0.0);
float3 l9_8236=(*sc_set0.UserUniforms).Tex3dForceStrength;
l9_8235=l9_8236;
float3 l9_8237=float3(0.0);
float3 l9_8238=l9_8230;
float3 l9_8239=l9_8231;
float3 l9_8240=l9_8233;
float3 l9_8241=l9_8235;
ssGlobals l9_8242=tempGlobals;
tempGlobals=l9_8242;
float3 l9_8243=float3(0.0);
N202_OnOff=(int(Tweak_N133_tmp)!=0);
N202_ParticleSpawnPosition=l9_8238;
N202_ScaleTexture=l9_8239;
N202_ScrollSpeed=l9_8240;
N202_Strength=l9_8241;
N202_CustomForce=float3(0.0);
if (N202_OnOff)
{
float3 l9_8244=N202_ParticleSpawnPosition;
float3 l9_8245=N202_Strength;
float3 l9_8246=l9_8244;
float l9_8247=tempGlobals.gTimeElapsed;
float3 l9_8248=float3(l9_8247)*(N202_ScrollSpeed*0.1);
l9_8246/=(N202_ScaleTexture*2.0);
l9_8246+=l9_8248;
float3 l9_8249=l9_8246;
float4 l9_8250=float4(0.0);
float3 l9_8251=l9_8249;
float l9_8252=0.0;
float4 l9_8253=sc_set0.Tex3d.sample(sc_set0.Tex3dSmpSC,l9_8251,level(l9_8252));
l9_8250=l9_8253;
float4 l9_8254=l9_8250;
float3 l9_8255=l9_8254.xyz;
float3 l9_8256=(l9_8255*2.0)-float3(1.0);
l9_8256*=l9_8245;
float3 l9_8257=l9_8256;
N202_CustomForce+=l9_8257;
}
l9_8243=N202_CustomForce;
l9_8237=l9_8243;
float3 l9_8258=float3(0.0);
l9_8258=tempGlobals.N155_helixDirection;
float3 l9_8259=float3(0.0);
l9_8259=tempGlobals.N319_curveDirection;
float3 l9_8260=float3(0.0);
float3 l9_8261=(*sc_set0.UserUniforms).Tweak_N314;
l9_8260=l9_8261;
float3 l9_8262=float3(0.0);
float l9_8263=l9_8129;
float3 l9_8264=l9_8258;
float3 l9_8265=l9_8259;
float3 l9_8266=l9_8260;
ssGlobals l9_8267=tempGlobals;
tempGlobals=l9_8267;
float3 l9_8268=float3(0.0);
N277_OnOff=(int(Tweak_N313_tmp)!=0);
N277_isTrail=l9_8263!=0.0;
N277_helixDir=l9_8264;
N277_curveDir=l9_8265;
N277_Strength=l9_8266;
N277_Path=NODE_248_DROPLIST_ITEM_tmp;
N277_DirectionForce=float3(0.0);
N277_Direction=float3(0.0);
if (N277_OnOff||N277_isTrail)
{
float3 l9_8269;
if (N277_Path==5)
{
l9_8269=N277_helixDir;
}
else
{
bool3 l9_8270=bool3(N277_Path==6);
l9_8269=float3(l9_8270.x ? N277_curveDir.x : float3(0.0).x,l9_8270.y ? N277_curveDir.y : float3(0.0).y,l9_8270.z ? N277_curveDir.z : float3(0.0).z);
}
float3 l9_8271=l9_8269;
float3 l9_8272=l9_8271;
float3 l9_8273=l9_8272;
if (N277_OnOff)
{
N277_DirectionForce+=(l9_8273*N277_Strength);
}
N277_Direction=l9_8273;
}
l9_8268=N277_DirectionForce;
l9_8262=l9_8268;
float3 l9_8274=float3(0.0);
l9_8274=(l9_8191+l9_8237)+l9_8262;
l9_8104=l9_8274;
float3 l9_8275=l9_8104;
float3 l9_8276=((l9_8275/float3(2.0))*(l9_7477-l9_7991))*(l9_7477-l9_7991);
l9_7566-=l9_8276;
}
if (rotationSpace_tmp==2)
{
l9_7990=((((l9_7739-l9_8101)*l9_7867)+l9_7564)+l9_7565)+l9_7566;
}
else
{
if (rotationSpace_tmp==1)
{
l9_7990=(((l9_7739-l9_8101)+l9_7564)+l9_7565)+l9_7566;
}
else
{
l9_7990=((((l9_7739-l9_8101)+l9_7565)+l9_7564)+l9_7566)*l9_7867;
}
}
l9_7990=normalize(l9_7990+float3(1e-06));
}
float3 l9_8277=float3(0.0,0.0,1.0);
float3 l9_8278=cross(l9_7990,l9_8277);
float3 l9_8279=normalize(l9_8278);
float l9_8280=length(l9_8278);
float l9_8281=dot(l9_8277,l9_7990);
float l9_8282=1.0-l9_8281;
l9_7989=float3x3(float3(((l9_8282*l9_8279.x)*l9_8279.x)+l9_8281,((l9_8282*l9_8279.x)*l9_8279.y)-(l9_8279.z*l9_8280),((l9_8282*l9_8279.z)*l9_8279.x)+(l9_8279.y*l9_8280)),float3(((l9_8282*l9_8279.x)*l9_8279.y)+(l9_8279.z*l9_8280),((l9_8282*l9_8279.y)*l9_8279.y)+l9_8281,((l9_8282*l9_8279.y)*l9_8279.z)-(l9_8279.x*l9_8280)),float3(((l9_8282*l9_8279.z)*l9_8279.x)-(l9_8279.y*l9_8280),((l9_8282*l9_8279.y)*l9_8279.z)+(l9_8279.x*l9_8280),((l9_8282*l9_8279.z)*l9_8279.z)+l9_8281));
}
float3x3 l9_8283=float3x3(float3(cos(l9_7925),-sin(l9_7925),0.0),float3(sin(l9_7925),cos(l9_7925),0.0),float3(0.0,0.0,1.0));
l9_7989=l9_7989*l9_8283;
if ((int(ALIGNPARTICLES_tmp)!=0))
{
if (ALIGN_PARTICLES_TO_OPTION_tmp==0)
{
if (!N111_ENABLE_IGNOREVEL)
{
float l9_8284=fast::max(length(l9_7868*0.02),1.0)*fast::max(N111_sizeVelScale,1e-06);
l9_8284=fast::clamp(l9_8284,N111_velScaleMinMax.x,N111_velScaleMinMax.y);
N111_position.z*=l9_8284;
}
}
}
}
else
{
float l9_8285=fract((N111_particleSeed.x*92.653008)+N111_globalSeed);
float l9_8286=mix(N111_rotationRandomX.x,N111_rotationRandomX.y,l9_8285);
float l9_8287=mix(N111_rotationRateX.x,N111_rotationRateX.y,l9_8285);
float l9_8288=((l9_8287*l9_7917)*l9_7478)*2.0;
float l9_8289=fract((N111_particleSeed.y*6.7557559)+N111_globalSeed);
float l9_8290=mix(N111_rotationRandomY.x,N111_rotationRandomY.y,l9_8289);
float l9_8291=mix(N111_rotationRateY.x,N111_rotationRateY.y,l9_8289);
float l9_8292=((l9_8291*l9_7917)*l9_7478)*2.0;
float l9_8293=3.1415927*(l9_8288+l9_8286);
float l9_8294=3.1415927*(l9_8292+l9_8290);
float l9_8295=3.1415927*(l9_7924+l9_7916);
float3 l9_8296=float3(l9_8293,l9_8294,l9_8295);
float l9_8297=cos(l9_8296.x);
float l9_8298=sin(l9_8296.x);
float l9_8299=cos(l9_8296.y);
float l9_8300=sin(l9_8296.y);
float l9_8301=cos(l9_8296.z);
float l9_8302=sin(l9_8296.z);
l9_7989=float3x3(float3(l9_8299*l9_8301,(l9_8297*l9_8302)+((l9_8298*l9_8300)*l9_8301),(l9_8298*l9_8302)-((l9_8297*l9_8300)*l9_8301)),float3((-l9_8299)*l9_8302,(l9_8297*l9_8301)-((l9_8298*l9_8300)*l9_8302),(l9_8298*l9_8301)+((l9_8297*l9_8300)*l9_8302)),float3(l9_8300,(-l9_8298)*l9_8299,l9_8297*l9_8299));
}
if (!(rotationSpace_tmp==1))
{
if (!(int(ALIGNPARTICLES_tmp)!=0))
{
float4x4 l9_8303=(*sc_set0.UserUniforms).sc_ModelMatrix;
float4x4 l9_8304=(*sc_set0.UserUniforms).sc_ModelMatrix;
float4x4 l9_8305=(*sc_set0.UserUniforms).sc_ModelMatrix;
float3x3 l9_8306=float3x3(float3(l9_8303[0].xyz/float3(l9_7859.x)),float3(l9_8304[1].xyz/float3(l9_7859.y)),float3(l9_8305[2].xyz/float3(l9_7859.z)));
l9_7989=l9_8306*l9_7989;
}
}
N111_position=l9_7989*N111_position;
N111_normal=normalize(l9_7989*N111_normalObjectSpace);
N111_position+=l9_7870;
}
}
N111_timeValues=float4(l9_7476,l9_7477,l9_7478);
param_22=N111_normal;
normal_N111=param_22;
WorldNormal=normal_N111;
if ((*sc_set0.UserUniforms).PreviewEnabled==1)
{
WorldPosition=out.varPosAndMotion.xyz;
WorldNormal=out.varNormalAndMotion.xyz;
WorldTangent=out.varTangent.xyz;
}
sc_Vertex_t param_24=v;
float3 param_25=WorldPosition;
float3 param_26=WorldNormal;
float3 param_27=WorldTangent;
float4 param_28=v.position;
out.varPosAndMotion=float4(param_25.x,param_25.y,param_25.z,out.varPosAndMotion.w);
float3 l9_8307=normalize(param_26);
out.varNormalAndMotion=float4(l9_8307.x,l9_8307.y,l9_8307.z,out.varNormalAndMotion.w);
float3 l9_8308=normalize(param_27);
out.varTangent=float4(l9_8308.x,l9_8308.y,l9_8308.z,out.varTangent.w);
out.varTangent.w=in.tangent.w;
if ((int(UseViewSpaceDepthVariant_tmp)!=0)&&(((int(sc_OITDepthGatherPass_tmp)!=0)||(int(sc_OITCompositingPass_tmp)!=0))||(int(sc_OITDepthBoundsPass_tmp)!=0)))
{
float4 l9_8309=param_24.position;
float4 l9_8310=float4(0.0);
if (sc_RenderingSpace_tmp==3)
{
int l9_8311=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_8311=0;
}
else
{
l9_8311=gl_InstanceIndex%2;
}
int l9_8312=l9_8311;
l9_8310=(*sc_set0.UserUniforms).sc_ProjectionMatrixInverseArray[l9_8312]*l9_8309;
}
else
{
if (sc_RenderingSpace_tmp==2)
{
int l9_8313=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_8313=0;
}
else
{
l9_8313=gl_InstanceIndex%2;
}
int l9_8314=l9_8313;
l9_8310=(*sc_set0.UserUniforms).sc_ViewMatrixArray[l9_8314]*l9_8309;
}
else
{
if (sc_RenderingSpace_tmp==1)
{
int l9_8315=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_8315=0;
}
else
{
l9_8315=gl_InstanceIndex%2;
}
int l9_8316=l9_8315;
l9_8310=(*sc_set0.UserUniforms).sc_ModelViewMatrixArray[l9_8316]*l9_8309;
}
else
{
l9_8310=l9_8309;
}
}
}
float4 l9_8317=l9_8310;
out.varViewSpaceDepth=-l9_8317.z;
}
float4 l9_8318=float4(0.0);
if (sc_RenderingSpace_tmp==3)
{
l9_8318=param_28;
}
else
{
if (sc_RenderingSpace_tmp==4)
{
int l9_8319=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_8319=0;
}
else
{
l9_8319=gl_InstanceIndex%2;
}
int l9_8320=l9_8319;
l9_8318=((*sc_set0.UserUniforms).sc_ModelViewMatrixArray[l9_8320]*param_24.position)*float4(1.0/(*sc_set0.UserUniforms).sc_Camera.aspect,1.0,1.0,1.0);
}
else
{
if (sc_RenderingSpace_tmp==2)
{
int l9_8321=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_8321=0;
}
else
{
l9_8321=gl_InstanceIndex%2;
}
int l9_8322=l9_8321;
l9_8318=(*sc_set0.UserUniforms).sc_ViewProjectionMatrixArray[l9_8322]*float4(out.varPosAndMotion.xyz,1.0);
}
else
{
if (sc_RenderingSpace_tmp==1)
{
int l9_8323=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_8323=0;
}
else
{
l9_8323=gl_InstanceIndex%2;
}
int l9_8324=l9_8323;
l9_8318=(*sc_set0.UserUniforms).sc_ViewProjectionMatrixArray[l9_8324]*float4(out.varPosAndMotion.xyz,1.0);
}
}
}
}
out.varTex01=float4(param_24.texture0,param_24.texture1);
if ((int(sc_ProjectiveShadowsReceiver_tmp)!=0))
{
float4 l9_8325=param_24.position;
float4 l9_8326=l9_8325;
if (sc_RenderingSpace_tmp==1)
{
l9_8326=(*sc_set0.UserUniforms).sc_ModelMatrix*l9_8325;
}
float4 l9_8327=(*sc_set0.UserUniforms).sc_ProjectorMatrix*l9_8326;
float2 l9_8328=((l9_8327.xy/float2(l9_8327.w))*0.5)+float2(0.5);
out.varShadowTex=l9_8328;
}
float4 l9_8329=l9_8318;
if (sc_DepthBufferMode_tmp==1)
{
int l9_8330=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_8330=0;
}
else
{
l9_8330=gl_InstanceIndex%2;
}
int l9_8331=l9_8330;
if ((*sc_set0.UserUniforms).sc_ProjectionMatrixArray[l9_8331][2].w!=0.0)
{
float l9_8332=2.0/log2((*sc_set0.UserUniforms).sc_Camera.clipPlanes.y+1.0);
l9_8329.z=((log2(fast::max((*sc_set0.UserUniforms).sc_Camera.clipPlanes.x,1.0+l9_8329.w))*l9_8332)-1.0)*l9_8329.w;
}
}
float4 l9_8333=l9_8329;
l9_8318=l9_8333;
float4 l9_8334=l9_8318;
if ((int(sc_TAAEnabled_tmp)!=0))
{
float2 l9_8335=l9_8334.xy+((*sc_set0.UserUniforms).sc_TAAJitterOffset*l9_8334.w);
l9_8334=float4(l9_8335.x,l9_8335.y,l9_8334.z,l9_8334.w);
}
float4 l9_8336=l9_8334;
l9_8318=l9_8336;
float4 l9_8337=l9_8318;
if (sc_ShaderCacheConstant_tmp!=0)
{
l9_8337.x+=((*sc_set0.UserUniforms).sc_UniformConstants.x*float(sc_ShaderCacheConstant_tmp));
}
if (sc_StereoRenderingMode_tmp>0)
{
out.varStereoViewID=gl_InstanceIndex%2;
}
float4 l9_8338=l9_8337;
if (sc_StereoRenderingMode_tmp==1)
{
float l9_8339=dot(l9_8338,(*sc_set0.UserUniforms).sc_StereoClipPlanes[gl_InstanceIndex%2]);
float l9_8340=l9_8339;
if (sc_StereoRendering_IsClipDistanceEnabled_tmp==1)
{
}
else
{
out.varClipDistance=l9_8340;
}
}
float4 l9_8341=float4(l9_8337.x,-l9_8337.y,(l9_8337.z*0.5)+(l9_8337.w*0.5),l9_8337.w);
out.gl_Position=l9_8341;
if ((int(sc_Voxelization_tmp)!=0))
{
sc_Vertex_t l9_8343=param_24;
sc_Vertex_t l9_8344=l9_8343;
if ((int(sc_VertexBlending_tmp)!=0))
{
if ((int(sc_VertexBlendingUseNormals_tmp)!=0))
{
sc_Vertex_t l9_8345=l9_8344;
float3 l9_8346=in.blendShape0Pos;
float3 l9_8347=in.blendShape0Normal;
float l9_8348=(*sc_set0.UserUniforms).weights0.x;
sc_Vertex_t l9_8349=l9_8345;
float3 l9_8350=l9_8346;
float l9_8351=l9_8348;
float3 l9_8352=l9_8349.position.xyz+(l9_8350*l9_8351);
l9_8349.position=float4(l9_8352.x,l9_8352.y,l9_8352.z,l9_8349.position.w);
l9_8345=l9_8349;
l9_8345.normal+=(l9_8347*l9_8348);
l9_8344=l9_8345;
sc_Vertex_t l9_8353=l9_8344;
float3 l9_8354=in.blendShape1Pos;
float3 l9_8355=in.blendShape1Normal;
float l9_8356=(*sc_set0.UserUniforms).weights0.y;
sc_Vertex_t l9_8357=l9_8353;
float3 l9_8358=l9_8354;
float l9_8359=l9_8356;
float3 l9_8360=l9_8357.position.xyz+(l9_8358*l9_8359);
l9_8357.position=float4(l9_8360.x,l9_8360.y,l9_8360.z,l9_8357.position.w);
l9_8353=l9_8357;
l9_8353.normal+=(l9_8355*l9_8356);
l9_8344=l9_8353;
sc_Vertex_t l9_8361=l9_8344;
float3 l9_8362=in.blendShape2Pos;
float3 l9_8363=in.blendShape2Normal;
float l9_8364=(*sc_set0.UserUniforms).weights0.z;
sc_Vertex_t l9_8365=l9_8361;
float3 l9_8366=l9_8362;
float l9_8367=l9_8364;
float3 l9_8368=l9_8365.position.xyz+(l9_8366*l9_8367);
l9_8365.position=float4(l9_8368.x,l9_8368.y,l9_8368.z,l9_8365.position.w);
l9_8361=l9_8365;
l9_8361.normal+=(l9_8363*l9_8364);
l9_8344=l9_8361;
}
else
{
sc_Vertex_t l9_8369=l9_8344;
float3 l9_8370=in.blendShape0Pos;
float l9_8371=(*sc_set0.UserUniforms).weights0.x;
float3 l9_8372=l9_8369.position.xyz+(l9_8370*l9_8371);
l9_8369.position=float4(l9_8372.x,l9_8372.y,l9_8372.z,l9_8369.position.w);
l9_8344=l9_8369;
sc_Vertex_t l9_8373=l9_8344;
float3 l9_8374=in.blendShape1Pos;
float l9_8375=(*sc_set0.UserUniforms).weights0.y;
float3 l9_8376=l9_8373.position.xyz+(l9_8374*l9_8375);
l9_8373.position=float4(l9_8376.x,l9_8376.y,l9_8376.z,l9_8373.position.w);
l9_8344=l9_8373;
sc_Vertex_t l9_8377=l9_8344;
float3 l9_8378=in.blendShape2Pos;
float l9_8379=(*sc_set0.UserUniforms).weights0.z;
float3 l9_8380=l9_8377.position.xyz+(l9_8378*l9_8379);
l9_8377.position=float4(l9_8380.x,l9_8380.y,l9_8380.z,l9_8377.position.w);
l9_8344=l9_8377;
sc_Vertex_t l9_8381=l9_8344;
float3 l9_8382=in.blendShape3Pos;
float l9_8383=(*sc_set0.UserUniforms).weights0.w;
float3 l9_8384=l9_8381.position.xyz+(l9_8382*l9_8383);
l9_8381.position=float4(l9_8384.x,l9_8384.y,l9_8384.z,l9_8381.position.w);
l9_8344=l9_8381;
sc_Vertex_t l9_8385=l9_8344;
float3 l9_8386=in.blendShape4Pos;
float l9_8387=(*sc_set0.UserUniforms).weights1.x;
float3 l9_8388=l9_8385.position.xyz+(l9_8386*l9_8387);
l9_8385.position=float4(l9_8388.x,l9_8388.y,l9_8388.z,l9_8385.position.w);
l9_8344=l9_8385;
sc_Vertex_t l9_8389=l9_8344;
float3 l9_8390=in.blendShape5Pos;
float l9_8391=(*sc_set0.UserUniforms).weights1.y;
float3 l9_8392=l9_8389.position.xyz+(l9_8390*l9_8391);
l9_8389.position=float4(l9_8392.x,l9_8392.y,l9_8392.z,l9_8389.position.w);
l9_8344=l9_8389;
}
}
l9_8343=l9_8344;
sc_Vertex_t l9_8393=l9_8343;
if (sc_SkinBonesCount_tmp>0)
{
float4 l9_8394=float4(0.0);
if (sc_SkinBonesCount_tmp>0)
{
l9_8394=float4(1.0,fract(in.boneData.yzw));
l9_8394.x-=dot(l9_8394.yzw,float3(1.0));
}
float4 l9_8395=l9_8394;
float4 l9_8396=l9_8395;
int l9_8397=int(in.boneData.x);
int l9_8398=int(in.boneData.y);
int l9_8399=int(in.boneData.z);
int l9_8400=int(in.boneData.w);
int l9_8401=l9_8397;
float4 l9_8402=l9_8393.position;
float3 l9_8403=float3(0.0);
if (sc_SkinBonesCount_tmp>0)
{
int l9_8404=l9_8401;
float4 l9_8405=(*sc_set0.sc_BonesUBO).sc_Bones[l9_8404].boneMatrix[0];
float4 l9_8406=(*sc_set0.sc_BonesUBO).sc_Bones[l9_8404].boneMatrix[1];
float4 l9_8407=(*sc_set0.sc_BonesUBO).sc_Bones[l9_8404].boneMatrix[2];
float4 l9_8408[3];
l9_8408[0]=l9_8405;
l9_8408[1]=l9_8406;
l9_8408[2]=l9_8407;
l9_8403=float3(dot(l9_8402,l9_8408[0]),dot(l9_8402,l9_8408[1]),dot(l9_8402,l9_8408[2]));
}
else
{
l9_8403=l9_8402.xyz;
}
float3 l9_8409=l9_8403;
float3 l9_8410=l9_8409;
float l9_8411=l9_8396.x;
int l9_8412=l9_8398;
float4 l9_8413=l9_8393.position;
float3 l9_8414=float3(0.0);
if (sc_SkinBonesCount_tmp>0)
{
int l9_8415=l9_8412;
float4 l9_8416=(*sc_set0.sc_BonesUBO).sc_Bones[l9_8415].boneMatrix[0];
float4 l9_8417=(*sc_set0.sc_BonesUBO).sc_Bones[l9_8415].boneMatrix[1];
float4 l9_8418=(*sc_set0.sc_BonesUBO).sc_Bones[l9_8415].boneMatrix[2];
float4 l9_8419[3];
l9_8419[0]=l9_8416;
l9_8419[1]=l9_8417;
l9_8419[2]=l9_8418;
l9_8414=float3(dot(l9_8413,l9_8419[0]),dot(l9_8413,l9_8419[1]),dot(l9_8413,l9_8419[2]));
}
else
{
l9_8414=l9_8413.xyz;
}
float3 l9_8420=l9_8414;
float3 l9_8421=l9_8420;
float l9_8422=l9_8396.y;
int l9_8423=l9_8399;
float4 l9_8424=l9_8393.position;
float3 l9_8425=float3(0.0);
if (sc_SkinBonesCount_tmp>0)
{
int l9_8426=l9_8423;
float4 l9_8427=(*sc_set0.sc_BonesUBO).sc_Bones[l9_8426].boneMatrix[0];
float4 l9_8428=(*sc_set0.sc_BonesUBO).sc_Bones[l9_8426].boneMatrix[1];
float4 l9_8429=(*sc_set0.sc_BonesUBO).sc_Bones[l9_8426].boneMatrix[2];
float4 l9_8430[3];
l9_8430[0]=l9_8427;
l9_8430[1]=l9_8428;
l9_8430[2]=l9_8429;
l9_8425=float3(dot(l9_8424,l9_8430[0]),dot(l9_8424,l9_8430[1]),dot(l9_8424,l9_8430[2]));
}
else
{
l9_8425=l9_8424.xyz;
}
float3 l9_8431=l9_8425;
float3 l9_8432=l9_8431;
float l9_8433=l9_8396.z;
int l9_8434=l9_8400;
float4 l9_8435=l9_8393.position;
float3 l9_8436=float3(0.0);
if (sc_SkinBonesCount_tmp>0)
{
int l9_8437=l9_8434;
float4 l9_8438=(*sc_set0.sc_BonesUBO).sc_Bones[l9_8437].boneMatrix[0];
float4 l9_8439=(*sc_set0.sc_BonesUBO).sc_Bones[l9_8437].boneMatrix[1];
float4 l9_8440=(*sc_set0.sc_BonesUBO).sc_Bones[l9_8437].boneMatrix[2];
float4 l9_8441[3];
l9_8441[0]=l9_8438;
l9_8441[1]=l9_8439;
l9_8441[2]=l9_8440;
l9_8436=float3(dot(l9_8435,l9_8441[0]),dot(l9_8435,l9_8441[1]),dot(l9_8435,l9_8441[2]));
}
else
{
l9_8436=l9_8435.xyz;
}
float3 l9_8442=l9_8436;
float3 l9_8443=(((l9_8410*l9_8411)+(l9_8421*l9_8422))+(l9_8432*l9_8433))+(l9_8442*l9_8396.w);
l9_8393.position=float4(l9_8443.x,l9_8443.y,l9_8443.z,l9_8393.position.w);
int l9_8444=l9_8397;
float3x3 l9_8445=float3x3(float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_8444].normalMatrix[0].xyz),float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_8444].normalMatrix[1].xyz),float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_8444].normalMatrix[2].xyz));
float3x3 l9_8446=l9_8445;
float3x3 l9_8447=l9_8446;
int l9_8448=l9_8398;
float3x3 l9_8449=float3x3(float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_8448].normalMatrix[0].xyz),float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_8448].normalMatrix[1].xyz),float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_8448].normalMatrix[2].xyz));
float3x3 l9_8450=l9_8449;
float3x3 l9_8451=l9_8450;
int l9_8452=l9_8399;
float3x3 l9_8453=float3x3(float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_8452].normalMatrix[0].xyz),float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_8452].normalMatrix[1].xyz),float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_8452].normalMatrix[2].xyz));
float3x3 l9_8454=l9_8453;
float3x3 l9_8455=l9_8454;
int l9_8456=l9_8400;
float3x3 l9_8457=float3x3(float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_8456].normalMatrix[0].xyz),float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_8456].normalMatrix[1].xyz),float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_8456].normalMatrix[2].xyz));
float3x3 l9_8458=l9_8457;
float3x3 l9_8459=l9_8458;
l9_8393.normal=((((l9_8447*l9_8393.normal)*l9_8396.x)+((l9_8451*l9_8393.normal)*l9_8396.y))+((l9_8455*l9_8393.normal)*l9_8396.z))+((l9_8459*l9_8393.normal)*l9_8396.w);
l9_8393.tangent=((((l9_8447*l9_8393.tangent)*l9_8396.x)+((l9_8451*l9_8393.tangent)*l9_8396.y))+((l9_8455*l9_8393.tangent)*l9_8396.z))+((l9_8459*l9_8393.tangent)*l9_8396.w);
}
l9_8343=l9_8393;
float l9_8460=(*sc_set0.UserUniforms).voxelization_params_0.y;
float l9_8461=(*sc_set0.UserUniforms).voxelization_params_0.z;
float l9_8462=(*sc_set0.UserUniforms).voxelization_params_0.w;
float l9_8463=(*sc_set0.UserUniforms).voxelization_params_frustum_lrbt.x;
float l9_8464=(*sc_set0.UserUniforms).voxelization_params_frustum_lrbt.y;
float l9_8465=(*sc_set0.UserUniforms).voxelization_params_frustum_lrbt.z;
float l9_8466=(*sc_set0.UserUniforms).voxelization_params_frustum_lrbt.w;
float l9_8467=(*sc_set0.UserUniforms).voxelization_params_frustum_nf.x;
float l9_8468=(*sc_set0.UserUniforms).voxelization_params_frustum_nf.y;
float3 l9_8469=(*sc_set0.UserUniforms).voxelization_params_camera_pos;
float l9_8470=l9_8460/l9_8461;
int l9_8471=gl_InstanceIndex;
int l9_8472=l9_8471;
l9_8343.position=(*sc_set0.UserUniforms).sc_ModelMatrixVoxelization*l9_8343.position;
float3 l9_8473=l9_8343.position.xyz;
float3 l9_8474=float3(float(l9_8472%int(l9_8462))*l9_8460,float(l9_8472/int(l9_8462))*l9_8460,(float(l9_8472)*l9_8470)+l9_8467);
float3 l9_8475=l9_8473+l9_8474;
float4 l9_8476=float4(l9_8475-l9_8469,1.0);
float l9_8477=l9_8463;
float l9_8478=l9_8464;
float l9_8479=l9_8465;
float l9_8480=l9_8466;
float l9_8481=l9_8467;
float l9_8482=l9_8468;
float4x4 l9_8483=float4x4(float4(2.0/(l9_8478-l9_8477),0.0,0.0,(-(l9_8478+l9_8477))/(l9_8478-l9_8477)),float4(0.0,2.0/(l9_8480-l9_8479),0.0,(-(l9_8480+l9_8479))/(l9_8480-l9_8479)),float4(0.0,0.0,(-2.0)/(l9_8482-l9_8481),(-(l9_8482+l9_8481))/(l9_8482-l9_8481)),float4(0.0,0.0,0.0,1.0));
float4x4 l9_8484=l9_8483;
float4 l9_8485=l9_8484*l9_8476;
l9_8485.w=1.0;
out.varScreenPos=l9_8485;
float4 l9_8486=l9_8485*1.0;
if (sc_ShaderCacheConstant_tmp!=0)
{
l9_8486.x+=((*sc_set0.UserUniforms).sc_UniformConstants.x*float(sc_ShaderCacheConstant_tmp));
}
if (sc_StereoRenderingMode_tmp>0)
{
out.varStereoViewID=gl_InstanceIndex%2;
}
float4 l9_8487=l9_8486;
if (sc_StereoRenderingMode_tmp==1)
{
float l9_8488=dot(l9_8487,(*sc_set0.UserUniforms).sc_StereoClipPlanes[gl_InstanceIndex%2]);
float l9_8489=l9_8488;
if (sc_StereoRendering_IsClipDistanceEnabled_tmp==1)
{
}
else
{
out.varClipDistance=l9_8489;
}
}
float4 l9_8490=float4(l9_8486.x,-l9_8486.y,(l9_8486.z*0.5)+(l9_8486.w*0.5),l9_8486.w);
out.gl_Position=l9_8490;
param_24=l9_8343;
}
else
{
if ((int(sc_OutputBounds_tmp)!=0))
{
sc_Vertex_t l9_8491=param_24;
sc_Vertex_t l9_8492=l9_8491;
if ((int(sc_VertexBlending_tmp)!=0))
{
if ((int(sc_VertexBlendingUseNormals_tmp)!=0))
{
sc_Vertex_t l9_8493=l9_8492;
float3 l9_8494=in.blendShape0Pos;
float3 l9_8495=in.blendShape0Normal;
float l9_8496=(*sc_set0.UserUniforms).weights0.x;
sc_Vertex_t l9_8497=l9_8493;
float3 l9_8498=l9_8494;
float l9_8499=l9_8496;
float3 l9_8500=l9_8497.position.xyz+(l9_8498*l9_8499);
l9_8497.position=float4(l9_8500.x,l9_8500.y,l9_8500.z,l9_8497.position.w);
l9_8493=l9_8497;
l9_8493.normal+=(l9_8495*l9_8496);
l9_8492=l9_8493;
sc_Vertex_t l9_8501=l9_8492;
float3 l9_8502=in.blendShape1Pos;
float3 l9_8503=in.blendShape1Normal;
float l9_8504=(*sc_set0.UserUniforms).weights0.y;
sc_Vertex_t l9_8505=l9_8501;
float3 l9_8506=l9_8502;
float l9_8507=l9_8504;
float3 l9_8508=l9_8505.position.xyz+(l9_8506*l9_8507);
l9_8505.position=float4(l9_8508.x,l9_8508.y,l9_8508.z,l9_8505.position.w);
l9_8501=l9_8505;
l9_8501.normal+=(l9_8503*l9_8504);
l9_8492=l9_8501;
sc_Vertex_t l9_8509=l9_8492;
float3 l9_8510=in.blendShape2Pos;
float3 l9_8511=in.blendShape2Normal;
float l9_8512=(*sc_set0.UserUniforms).weights0.z;
sc_Vertex_t l9_8513=l9_8509;
float3 l9_8514=l9_8510;
float l9_8515=l9_8512;
float3 l9_8516=l9_8513.position.xyz+(l9_8514*l9_8515);
l9_8513.position=float4(l9_8516.x,l9_8516.y,l9_8516.z,l9_8513.position.w);
l9_8509=l9_8513;
l9_8509.normal+=(l9_8511*l9_8512);
l9_8492=l9_8509;
}
else
{
sc_Vertex_t l9_8517=l9_8492;
float3 l9_8518=in.blendShape0Pos;
float l9_8519=(*sc_set0.UserUniforms).weights0.x;
float3 l9_8520=l9_8517.position.xyz+(l9_8518*l9_8519);
l9_8517.position=float4(l9_8520.x,l9_8520.y,l9_8520.z,l9_8517.position.w);
l9_8492=l9_8517;
sc_Vertex_t l9_8521=l9_8492;
float3 l9_8522=in.blendShape1Pos;
float l9_8523=(*sc_set0.UserUniforms).weights0.y;
float3 l9_8524=l9_8521.position.xyz+(l9_8522*l9_8523);
l9_8521.position=float4(l9_8524.x,l9_8524.y,l9_8524.z,l9_8521.position.w);
l9_8492=l9_8521;
sc_Vertex_t l9_8525=l9_8492;
float3 l9_8526=in.blendShape2Pos;
float l9_8527=(*sc_set0.UserUniforms).weights0.z;
float3 l9_8528=l9_8525.position.xyz+(l9_8526*l9_8527);
l9_8525.position=float4(l9_8528.x,l9_8528.y,l9_8528.z,l9_8525.position.w);
l9_8492=l9_8525;
sc_Vertex_t l9_8529=l9_8492;
float3 l9_8530=in.blendShape3Pos;
float l9_8531=(*sc_set0.UserUniforms).weights0.w;
float3 l9_8532=l9_8529.position.xyz+(l9_8530*l9_8531);
l9_8529.position=float4(l9_8532.x,l9_8532.y,l9_8532.z,l9_8529.position.w);
l9_8492=l9_8529;
sc_Vertex_t l9_8533=l9_8492;
float3 l9_8534=in.blendShape4Pos;
float l9_8535=(*sc_set0.UserUniforms).weights1.x;
float3 l9_8536=l9_8533.position.xyz+(l9_8534*l9_8535);
l9_8533.position=float4(l9_8536.x,l9_8536.y,l9_8536.z,l9_8533.position.w);
l9_8492=l9_8533;
sc_Vertex_t l9_8537=l9_8492;
float3 l9_8538=in.blendShape5Pos;
float l9_8539=(*sc_set0.UserUniforms).weights1.y;
float3 l9_8540=l9_8537.position.xyz+(l9_8538*l9_8539);
l9_8537.position=float4(l9_8540.x,l9_8540.y,l9_8540.z,l9_8537.position.w);
l9_8492=l9_8537;
}
}
l9_8491=l9_8492;
sc_Vertex_t l9_8541=l9_8491;
if (sc_SkinBonesCount_tmp>0)
{
float4 l9_8542=float4(0.0);
if (sc_SkinBonesCount_tmp>0)
{
l9_8542=float4(1.0,fract(in.boneData.yzw));
l9_8542.x-=dot(l9_8542.yzw,float3(1.0));
}
float4 l9_8543=l9_8542;
float4 l9_8544=l9_8543;
int l9_8545=int(in.boneData.x);
int l9_8546=int(in.boneData.y);
int l9_8547=int(in.boneData.z);
int l9_8548=int(in.boneData.w);
int l9_8549=l9_8545;
float4 l9_8550=l9_8541.position;
float3 l9_8551=float3(0.0);
if (sc_SkinBonesCount_tmp>0)
{
int l9_8552=l9_8549;
float4 l9_8553=(*sc_set0.sc_BonesUBO).sc_Bones[l9_8552].boneMatrix[0];
float4 l9_8554=(*sc_set0.sc_BonesUBO).sc_Bones[l9_8552].boneMatrix[1];
float4 l9_8555=(*sc_set0.sc_BonesUBO).sc_Bones[l9_8552].boneMatrix[2];
float4 l9_8556[3];
l9_8556[0]=l9_8553;
l9_8556[1]=l9_8554;
l9_8556[2]=l9_8555;
l9_8551=float3(dot(l9_8550,l9_8556[0]),dot(l9_8550,l9_8556[1]),dot(l9_8550,l9_8556[2]));
}
else
{
l9_8551=l9_8550.xyz;
}
float3 l9_8557=l9_8551;
float3 l9_8558=l9_8557;
float l9_8559=l9_8544.x;
int l9_8560=l9_8546;
float4 l9_8561=l9_8541.position;
float3 l9_8562=float3(0.0);
if (sc_SkinBonesCount_tmp>0)
{
int l9_8563=l9_8560;
float4 l9_8564=(*sc_set0.sc_BonesUBO).sc_Bones[l9_8563].boneMatrix[0];
float4 l9_8565=(*sc_set0.sc_BonesUBO).sc_Bones[l9_8563].boneMatrix[1];
float4 l9_8566=(*sc_set0.sc_BonesUBO).sc_Bones[l9_8563].boneMatrix[2];
float4 l9_8567[3];
l9_8567[0]=l9_8564;
l9_8567[1]=l9_8565;
l9_8567[2]=l9_8566;
l9_8562=float3(dot(l9_8561,l9_8567[0]),dot(l9_8561,l9_8567[1]),dot(l9_8561,l9_8567[2]));
}
else
{
l9_8562=l9_8561.xyz;
}
float3 l9_8568=l9_8562;
float3 l9_8569=l9_8568;
float l9_8570=l9_8544.y;
int l9_8571=l9_8547;
float4 l9_8572=l9_8541.position;
float3 l9_8573=float3(0.0);
if (sc_SkinBonesCount_tmp>0)
{
int l9_8574=l9_8571;
float4 l9_8575=(*sc_set0.sc_BonesUBO).sc_Bones[l9_8574].boneMatrix[0];
float4 l9_8576=(*sc_set0.sc_BonesUBO).sc_Bones[l9_8574].boneMatrix[1];
float4 l9_8577=(*sc_set0.sc_BonesUBO).sc_Bones[l9_8574].boneMatrix[2];
float4 l9_8578[3];
l9_8578[0]=l9_8575;
l9_8578[1]=l9_8576;
l9_8578[2]=l9_8577;
l9_8573=float3(dot(l9_8572,l9_8578[0]),dot(l9_8572,l9_8578[1]),dot(l9_8572,l9_8578[2]));
}
else
{
l9_8573=l9_8572.xyz;
}
float3 l9_8579=l9_8573;
float3 l9_8580=l9_8579;
float l9_8581=l9_8544.z;
int l9_8582=l9_8548;
float4 l9_8583=l9_8541.position;
float3 l9_8584=float3(0.0);
if (sc_SkinBonesCount_tmp>0)
{
int l9_8585=l9_8582;
float4 l9_8586=(*sc_set0.sc_BonesUBO).sc_Bones[l9_8585].boneMatrix[0];
float4 l9_8587=(*sc_set0.sc_BonesUBO).sc_Bones[l9_8585].boneMatrix[1];
float4 l9_8588=(*sc_set0.sc_BonesUBO).sc_Bones[l9_8585].boneMatrix[2];
float4 l9_8589[3];
l9_8589[0]=l9_8586;
l9_8589[1]=l9_8587;
l9_8589[2]=l9_8588;
l9_8584=float3(dot(l9_8583,l9_8589[0]),dot(l9_8583,l9_8589[1]),dot(l9_8583,l9_8589[2]));
}
else
{
l9_8584=l9_8583.xyz;
}
float3 l9_8590=l9_8584;
float3 l9_8591=(((l9_8558*l9_8559)+(l9_8569*l9_8570))+(l9_8580*l9_8581))+(l9_8590*l9_8544.w);
l9_8541.position=float4(l9_8591.x,l9_8591.y,l9_8591.z,l9_8541.position.w);
int l9_8592=l9_8545;
float3x3 l9_8593=float3x3(float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_8592].normalMatrix[0].xyz),float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_8592].normalMatrix[1].xyz),float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_8592].normalMatrix[2].xyz));
float3x3 l9_8594=l9_8593;
float3x3 l9_8595=l9_8594;
int l9_8596=l9_8546;
float3x3 l9_8597=float3x3(float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_8596].normalMatrix[0].xyz),float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_8596].normalMatrix[1].xyz),float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_8596].normalMatrix[2].xyz));
float3x3 l9_8598=l9_8597;
float3x3 l9_8599=l9_8598;
int l9_8600=l9_8547;
float3x3 l9_8601=float3x3(float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_8600].normalMatrix[0].xyz),float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_8600].normalMatrix[1].xyz),float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_8600].normalMatrix[2].xyz));
float3x3 l9_8602=l9_8601;
float3x3 l9_8603=l9_8602;
int l9_8604=l9_8548;
float3x3 l9_8605=float3x3(float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_8604].normalMatrix[0].xyz),float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_8604].normalMatrix[1].xyz),float3((*sc_set0.sc_BonesUBO).sc_Bones[l9_8604].normalMatrix[2].xyz));
float3x3 l9_8606=l9_8605;
float3x3 l9_8607=l9_8606;
l9_8541.normal=((((l9_8595*l9_8541.normal)*l9_8544.x)+((l9_8599*l9_8541.normal)*l9_8544.y))+((l9_8603*l9_8541.normal)*l9_8544.z))+((l9_8607*l9_8541.normal)*l9_8544.w);
l9_8541.tangent=((((l9_8595*l9_8541.tangent)*l9_8544.x)+((l9_8599*l9_8541.tangent)*l9_8544.y))+((l9_8603*l9_8541.tangent)*l9_8544.z))+((l9_8607*l9_8541.tangent)*l9_8544.w);
}
l9_8491=l9_8541;
float3 l9_8608=(*sc_set0.UserUniforms).voxelization_params_camera_pos;
float2 l9_8609=((l9_8491.position.xy/float2(l9_8491.position.w))*0.5)+float2(0.5);
out.varTex01=float4(l9_8609.x,l9_8609.y,out.varTex01.z,out.varTex01.w);
l9_8491.position=(*sc_set0.UserUniforms).sc_ModelMatrixVoxelization*l9_8491.position;
float3 l9_8610=l9_8491.position.xyz-l9_8608;
l9_8491.position=float4(l9_8610.x,l9_8610.y,l9_8610.z,l9_8491.position.w);
out.varPosAndMotion=float4(l9_8491.position.xyz.x,l9_8491.position.xyz.y,l9_8491.position.xyz.z,out.varPosAndMotion.w);
float3 l9_8611=normalize(l9_8491.normal);
out.varNormalAndMotion=float4(l9_8611.x,l9_8611.y,l9_8611.z,out.varNormalAndMotion.w);
float l9_8612=(*sc_set0.UserUniforms).voxelization_params_frustum_lrbt.x;
float l9_8613=(*sc_set0.UserUniforms).voxelization_params_frustum_lrbt.y;
float l9_8614=(*sc_set0.UserUniforms).voxelization_params_frustum_lrbt.z;
float l9_8615=(*sc_set0.UserUniforms).voxelization_params_frustum_lrbt.w;
float l9_8616=(*sc_set0.UserUniforms).voxelization_params_frustum_nf.x;
float l9_8617=(*sc_set0.UserUniforms).voxelization_params_frustum_nf.y;
float l9_8618=l9_8612;
float l9_8619=l9_8613;
float l9_8620=l9_8614;
float l9_8621=l9_8615;
float l9_8622=l9_8616;
float l9_8623=l9_8617;
float4x4 l9_8624=float4x4(float4(2.0/(l9_8619-l9_8618),0.0,0.0,(-(l9_8619+l9_8618))/(l9_8619-l9_8618)),float4(0.0,2.0/(l9_8621-l9_8620),0.0,(-(l9_8621+l9_8620))/(l9_8621-l9_8620)),float4(0.0,0.0,(-2.0)/(l9_8623-l9_8622),(-(l9_8623+l9_8622))/(l9_8623-l9_8622)),float4(0.0,0.0,0.0,1.0));
float4x4 l9_8625=l9_8624;
float4 l9_8626=float4(0.0);
float3 l9_8627=(l9_8625*l9_8491.position).xyz;
l9_8626=float4(l9_8627.x,l9_8627.y,l9_8627.z,l9_8626.w);
l9_8626.w=1.0;
out.varScreenPos=l9_8626;
float4 l9_8628=l9_8626*1.0;
float4 l9_8629=l9_8628;
if (sc_ShaderCacheConstant_tmp!=0)
{
l9_8629.x+=((*sc_set0.UserUniforms).sc_UniformConstants.x*float(sc_ShaderCacheConstant_tmp));
}
if (sc_StereoRenderingMode_tmp>0)
{
out.varStereoViewID=gl_InstanceIndex%2;
}
float4 l9_8630=l9_8629;
if (sc_StereoRenderingMode_tmp==1)
{
float l9_8631=dot(l9_8630,(*sc_set0.UserUniforms).sc_StereoClipPlanes[gl_InstanceIndex%2]);
float l9_8632=l9_8631;
if (sc_StereoRendering_IsClipDistanceEnabled_tmp==1)
{
}
else
{
out.varClipDistance=l9_8632;
}
}
float4 l9_8633=float4(l9_8629.x,-l9_8629.y,(l9_8629.z*0.5)+(l9_8629.w*0.5),l9_8629.w);
out.gl_Position=l9_8633;
param_24=l9_8491;
}
}
v=param_24;
out.Interpolator_gInstanceID=Globals.gInstanceID;
ssGlobals param_29=Globals;
float4 l9_8634=float4(0.0);
float4 l9_8635=float4(0.0);
ssGlobals l9_8636=param_29;
tempGlobals=l9_8636;
float4 l9_8637=float4(0.0);
float3 l9_8638=float3(0.0);
float l9_8639=0.0;
float l9_8640=(*sc_set0.UserUniforms).timeGlobal;
l9_8639=l9_8640;
float l9_8641=0.0;
float l9_8642=(*sc_set0.UserUniforms).externalTimeInput;
l9_8641=l9_8642;
float l9_8643=0.0;
float l9_8644=(*sc_set0.UserUniforms).externalSeed;
l9_8643=l9_8644;
float l9_8645=0.0;
float l9_8646=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_8645=l9_8646;
float2 l9_8647=float2(0.0);
float2 l9_8648=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_8647=l9_8648;
float l9_8649=0.0;
float l9_8650=(*sc_set0.UserUniforms).spawnDuration;
l9_8649=l9_8650;
float l9_8651=0.0;
float l9_8652;
if ((int(TRAILS_tmp)!=0))
{
l9_8652=1.001;
}
else
{
l9_8652=0.001;
}
l9_8652-=0.001;
l9_8651=l9_8652;
float l9_8653=0.0;
float l9_8654=(*sc_set0.UserUniforms).trailLength;
l9_8653=l9_8654;
float4 l9_8655=float4(0.0);
l9_8655=tempGlobals.VertexColor;
float l9_8656=0.0;
l9_8656=l9_8655.x;
float l9_8657=0.0;
float l9_8658=l9_8651;
bool l9_8659=(l9_8658*1.0)!=0.0;
bool l9_8660;
if (l9_8659)
{
l9_8660=(l9_8656*1.0)!=0.0;
}
else
{
l9_8660=l9_8659;
}
l9_8657=float(l9_8660);
float3 l9_8661=float3(0.0);
float l9_8662=l9_8639;
float l9_8663=l9_8641;
float l9_8664=l9_8643;
float l9_8665=l9_8645;
float2 l9_8666=l9_8647;
float l9_8667=l9_8649;
float l9_8668=l9_8653;
float l9_8669=l9_8657;
ssGlobals l9_8670=tempGlobals;
tempGlobals=l9_8670;
float3 l9_8671=float3(0.0);
N181_timeGlobal=l9_8662;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_8663;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_8664;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_8665;
N181_lifeTimeMinMax=l9_8666;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_8667;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_8668;
N181_isTrailCondition=l9_8669!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_8672=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_8673=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_8672=length(float4(1.0)*l9_8673);
}
N181_globalSeed=N181_externalSeed+l9_8672;
int l9_8674=0;
l9_8674=ssInstanceID;
int l9_8675=l9_8674;
float l9_8676=float(l9_8675);
int l9_8677=int(l9_8676);
int l9_8678=l9_8677^(l9_8677*15299);
int l9_8679=l9_8678;
int l9_8680=l9_8679;
int l9_8681=((l9_8680*((l9_8680*1471343)+101146501))+1559861749)&2147483647;
int l9_8682=l9_8681;
int l9_8683=l9_8679*1399;
int l9_8684=((l9_8683*((l9_8683*1471343)+101146501))+1559861749)&2147483647;
int l9_8685=l9_8684;
int l9_8686=l9_8679*7177;
int l9_8687=((l9_8686*((l9_8686*1471343)+101146501))+1559861749)&2147483647;
int l9_8688=l9_8687;
int l9_8689=l9_8682;
float l9_8690=float(l9_8689)*4.6566129e-10;
int l9_8691=l9_8685;
float l9_8692=float(l9_8691)*4.6566129e-10;
int l9_8693=l9_8688;
float l9_8694=float(l9_8693)*4.6566129e-10;
float3 l9_8695=float3(l9_8690,l9_8692,l9_8694);
float3 l9_8696=l9_8695;
N181_particleSeed=l9_8696;
float l9_8697=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_8698;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_8698=N181_lifeTimeMinMax;
}
else
{
l9_8698=float2(N181_lifeTimeConstant);
}
float2 l9_8699=l9_8698;
float l9_8700=fast::max(l9_8699.x,0.0099999998);
float l9_8701=fast::max(l9_8699.y,0.0099999998);
float l9_8702=tempGlobals.gTimeElapsed;
float l9_8703=l9_8702;
if (N181_ENABLE_EXTERNALTIME)
{
l9_8703=N181_externalTime;
}
float l9_8704=l9_8703;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_8704=N181_timeGlobal*l9_8703;
}
else
{
float l9_8705=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_8705=N181_trailLength;
}
}
float l9_8706=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_8707=0.0;
float l9_8708;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_8708=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_8708=0.0;
}
l9_8707=l9_8708;
float l9_8709=l9_8707;
int l9_8710=0;
l9_8710=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_8711=l9_8710;
l9_8706=fast::max(l9_8709*(1.0-(1.0/float(l9_8711))),0.0);
}
else
{
l9_8706=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_8712=fract(((l9_8703*N181_timeGlobal)*(1.0/(l9_8699.y+l9_8705)))+l9_8706);
l9_8704=l9_8712*(l9_8699.y+l9_8705);
}
float l9_8713=mix(l9_8704/l9_8700,l9_8704/l9_8701,l9_8697);
float l9_8714=fast::clamp(l9_8713,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_8704,l9_8714);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_8715=tempGlobals.Surface_UVCoord0;
l9_8704-=(l9_8715.y*N181_trailLength);
l9_8713=mix(l9_8704/l9_8700,l9_8704/l9_8701,l9_8697);
l9_8714=fast::clamp(l9_8713,0.0,1.0);
}
}
float l9_8716=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_8703-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_8716=1.0;
}
}
}
float l9_8717=l9_8713+l9_8716;
N181_particleAlive=1.0;
if ((l9_8717>0.99989998)||(l9_8704<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_8703*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_8699,l9_8704,l9_8714);
l9_8671=N181_particleSeed;
l9_8661=l9_8671;
l9_8638=l9_8661;
float3 l9_8718=l9_8638;
N111_particleSeedIn=l9_8718;
float l9_8719=0.0;
float l9_8720=0.0;
float l9_8721=(*sc_set0.UserUniforms).timeGlobal;
l9_8720=l9_8721;
float l9_8722=0.0;
float l9_8723=(*sc_set0.UserUniforms).externalTimeInput;
l9_8722=l9_8723;
float l9_8724=0.0;
float l9_8725=(*sc_set0.UserUniforms).externalSeed;
l9_8724=l9_8725;
float l9_8726=0.0;
float l9_8727=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_8726=l9_8727;
float2 l9_8728=float2(0.0);
float2 l9_8729=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_8728=l9_8729;
float l9_8730=0.0;
float l9_8731=(*sc_set0.UserUniforms).spawnDuration;
l9_8730=l9_8731;
float l9_8732=0.0;
float l9_8733;
if ((int(TRAILS_tmp)!=0))
{
l9_8733=1.001;
}
else
{
l9_8733=0.001;
}
l9_8733-=0.001;
l9_8732=l9_8733;
float l9_8734=0.0;
float l9_8735=(*sc_set0.UserUniforms).trailLength;
l9_8734=l9_8735;
float4 l9_8736=float4(0.0);
l9_8736=tempGlobals.VertexColor;
float l9_8737=0.0;
l9_8737=l9_8736.x;
float l9_8738=0.0;
float l9_8739=l9_8732;
bool l9_8740=(l9_8739*1.0)!=0.0;
bool l9_8741;
if (l9_8740)
{
l9_8741=(l9_8737*1.0)!=0.0;
}
else
{
l9_8741=l9_8740;
}
l9_8738=float(l9_8741);
float l9_8742=0.0;
float l9_8743=l9_8720;
float l9_8744=l9_8722;
float l9_8745=l9_8724;
float l9_8746=l9_8726;
float2 l9_8747=l9_8728;
float l9_8748=l9_8730;
float l9_8749=l9_8734;
float l9_8750=l9_8738;
ssGlobals l9_8751=tempGlobals;
tempGlobals=l9_8751;
float l9_8752=0.0;
N181_timeGlobal=l9_8743;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_8744;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_8745;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_8746;
N181_lifeTimeMinMax=l9_8747;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_8748;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_8749;
N181_isTrailCondition=l9_8750!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_8753=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_8754=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_8753=length(float4(1.0)*l9_8754);
}
N181_globalSeed=N181_externalSeed+l9_8753;
int l9_8755=0;
l9_8755=ssInstanceID;
int l9_8756=l9_8755;
float l9_8757=float(l9_8756);
int l9_8758=int(l9_8757);
int l9_8759=l9_8758^(l9_8758*15299);
int l9_8760=l9_8759;
int l9_8761=l9_8760;
int l9_8762=((l9_8761*((l9_8761*1471343)+101146501))+1559861749)&2147483647;
int l9_8763=l9_8762;
int l9_8764=l9_8760*1399;
int l9_8765=((l9_8764*((l9_8764*1471343)+101146501))+1559861749)&2147483647;
int l9_8766=l9_8765;
int l9_8767=l9_8760*7177;
int l9_8768=((l9_8767*((l9_8767*1471343)+101146501))+1559861749)&2147483647;
int l9_8769=l9_8768;
int l9_8770=l9_8763;
float l9_8771=float(l9_8770)*4.6566129e-10;
int l9_8772=l9_8766;
float l9_8773=float(l9_8772)*4.6566129e-10;
int l9_8774=l9_8769;
float l9_8775=float(l9_8774)*4.6566129e-10;
float3 l9_8776=float3(l9_8771,l9_8773,l9_8775);
float3 l9_8777=l9_8776;
N181_particleSeed=l9_8777;
float l9_8778=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_8779;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_8779=N181_lifeTimeMinMax;
}
else
{
l9_8779=float2(N181_lifeTimeConstant);
}
float2 l9_8780=l9_8779;
float l9_8781=fast::max(l9_8780.x,0.0099999998);
float l9_8782=fast::max(l9_8780.y,0.0099999998);
float l9_8783=tempGlobals.gTimeElapsed;
float l9_8784=l9_8783;
if (N181_ENABLE_EXTERNALTIME)
{
l9_8784=N181_externalTime;
}
float l9_8785=l9_8784;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_8785=N181_timeGlobal*l9_8784;
}
else
{
float l9_8786=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_8786=N181_trailLength;
}
}
float l9_8787=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_8788=0.0;
float l9_8789;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_8789=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_8789=0.0;
}
l9_8788=l9_8789;
float l9_8790=l9_8788;
int l9_8791=0;
l9_8791=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_8792=l9_8791;
l9_8787=fast::max(l9_8790*(1.0-(1.0/float(l9_8792))),0.0);
}
else
{
l9_8787=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_8793=fract(((l9_8784*N181_timeGlobal)*(1.0/(l9_8780.y+l9_8786)))+l9_8787);
l9_8785=l9_8793*(l9_8780.y+l9_8786);
}
float l9_8794=mix(l9_8785/l9_8781,l9_8785/l9_8782,l9_8778);
float l9_8795=fast::clamp(l9_8794,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_8785,l9_8795);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_8796=tempGlobals.Surface_UVCoord0;
l9_8785-=(l9_8796.y*N181_trailLength);
l9_8794=mix(l9_8785/l9_8781,l9_8785/l9_8782,l9_8778);
l9_8795=fast::clamp(l9_8794,0.0,1.0);
}
}
float l9_8797=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_8784-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_8797=1.0;
}
}
}
float l9_8798=l9_8794+l9_8797;
N181_particleAlive=1.0;
if ((l9_8798>0.99989998)||(l9_8785<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_8784*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_8780,l9_8785,l9_8795);
l9_8752=N181_globalSeed;
l9_8742=l9_8752;
l9_8719=l9_8742;
float l9_8799=l9_8719;
N111_globalSeedIn=l9_8799;
float l9_8800=0.0;
float l9_8801=0.0;
float l9_8802=(*sc_set0.UserUniforms).timeGlobal;
l9_8801=l9_8802;
float l9_8803=0.0;
float l9_8804=(*sc_set0.UserUniforms).externalTimeInput;
l9_8803=l9_8804;
float l9_8805=0.0;
float l9_8806=(*sc_set0.UserUniforms).externalSeed;
l9_8805=l9_8806;
float l9_8807=0.0;
float l9_8808=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_8807=l9_8808;
float2 l9_8809=float2(0.0);
float2 l9_8810=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_8809=l9_8810;
float l9_8811=0.0;
float l9_8812=(*sc_set0.UserUniforms).spawnDuration;
l9_8811=l9_8812;
float l9_8813=0.0;
float l9_8814;
if ((int(TRAILS_tmp)!=0))
{
l9_8814=1.001;
}
else
{
l9_8814=0.001;
}
l9_8814-=0.001;
l9_8813=l9_8814;
float l9_8815=0.0;
float l9_8816=(*sc_set0.UserUniforms).trailLength;
l9_8815=l9_8816;
float4 l9_8817=float4(0.0);
l9_8817=tempGlobals.VertexColor;
float l9_8818=0.0;
l9_8818=l9_8817.x;
float l9_8819=0.0;
float l9_8820=l9_8813;
bool l9_8821=(l9_8820*1.0)!=0.0;
bool l9_8822;
if (l9_8821)
{
l9_8822=(l9_8818*1.0)!=0.0;
}
else
{
l9_8822=l9_8821;
}
l9_8819=float(l9_8822);
float l9_8823=0.0;
float l9_8824=l9_8801;
float l9_8825=l9_8803;
float l9_8826=l9_8805;
float l9_8827=l9_8807;
float2 l9_8828=l9_8809;
float l9_8829=l9_8811;
float l9_8830=l9_8815;
float l9_8831=l9_8819;
ssGlobals l9_8832=tempGlobals;
tempGlobals=l9_8832;
float l9_8833=0.0;
N181_timeGlobal=l9_8824;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_8825;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_8826;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_8827;
N181_lifeTimeMinMax=l9_8828;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_8829;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_8830;
N181_isTrailCondition=l9_8831!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_8834=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_8835=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_8834=length(float4(1.0)*l9_8835);
}
N181_globalSeed=N181_externalSeed+l9_8834;
int l9_8836=0;
l9_8836=ssInstanceID;
int l9_8837=l9_8836;
float l9_8838=float(l9_8837);
int l9_8839=int(l9_8838);
int l9_8840=l9_8839^(l9_8839*15299);
int l9_8841=l9_8840;
int l9_8842=l9_8841;
int l9_8843=((l9_8842*((l9_8842*1471343)+101146501))+1559861749)&2147483647;
int l9_8844=l9_8843;
int l9_8845=l9_8841*1399;
int l9_8846=((l9_8845*((l9_8845*1471343)+101146501))+1559861749)&2147483647;
int l9_8847=l9_8846;
int l9_8848=l9_8841*7177;
int l9_8849=((l9_8848*((l9_8848*1471343)+101146501))+1559861749)&2147483647;
int l9_8850=l9_8849;
int l9_8851=l9_8844;
float l9_8852=float(l9_8851)*4.6566129e-10;
int l9_8853=l9_8847;
float l9_8854=float(l9_8853)*4.6566129e-10;
int l9_8855=l9_8850;
float l9_8856=float(l9_8855)*4.6566129e-10;
float3 l9_8857=float3(l9_8852,l9_8854,l9_8856);
float3 l9_8858=l9_8857;
N181_particleSeed=l9_8858;
float l9_8859=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_8860;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_8860=N181_lifeTimeMinMax;
}
else
{
l9_8860=float2(N181_lifeTimeConstant);
}
float2 l9_8861=l9_8860;
float l9_8862=fast::max(l9_8861.x,0.0099999998);
float l9_8863=fast::max(l9_8861.y,0.0099999998);
float l9_8864=tempGlobals.gTimeElapsed;
float l9_8865=l9_8864;
if (N181_ENABLE_EXTERNALTIME)
{
l9_8865=N181_externalTime;
}
float l9_8866=l9_8865;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_8866=N181_timeGlobal*l9_8865;
}
else
{
float l9_8867=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_8867=N181_trailLength;
}
}
float l9_8868=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_8869=0.0;
float l9_8870;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_8870=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_8870=0.0;
}
l9_8869=l9_8870;
float l9_8871=l9_8869;
int l9_8872=0;
l9_8872=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_8873=l9_8872;
l9_8868=fast::max(l9_8871*(1.0-(1.0/float(l9_8873))),0.0);
}
else
{
l9_8868=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_8874=fract(((l9_8865*N181_timeGlobal)*(1.0/(l9_8861.y+l9_8867)))+l9_8868);
l9_8866=l9_8874*(l9_8861.y+l9_8867);
}
float l9_8875=mix(l9_8866/l9_8862,l9_8866/l9_8863,l9_8859);
float l9_8876=fast::clamp(l9_8875,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_8866,l9_8876);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_8877=tempGlobals.Surface_UVCoord0;
l9_8866-=(l9_8877.y*N181_trailLength);
l9_8875=mix(l9_8866/l9_8862,l9_8866/l9_8863,l9_8859);
l9_8876=fast::clamp(l9_8875,0.0,1.0);
}
}
float l9_8878=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_8865-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_8878=1.0;
}
}
}
float l9_8879=l9_8875+l9_8878;
N181_particleAlive=1.0;
if ((l9_8879>0.99989998)||(l9_8866<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_8865*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_8861,l9_8866,l9_8876);
l9_8833=N181_particleAlive;
l9_8823=l9_8833;
l9_8800=l9_8823;
float l9_8880=l9_8800;
N111_particleAlive=l9_8880;
float4 l9_8881=float4(0.0);
float l9_8882=0.0;
float l9_8883=(*sc_set0.UserUniforms).timeGlobal;
l9_8882=l9_8883;
float l9_8884=0.0;
float l9_8885=(*sc_set0.UserUniforms).externalTimeInput;
l9_8884=l9_8885;
float l9_8886=0.0;
float l9_8887=(*sc_set0.UserUniforms).externalSeed;
l9_8886=l9_8887;
float l9_8888=0.0;
float l9_8889=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_8888=l9_8889;
float2 l9_8890=float2(0.0);
float2 l9_8891=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_8890=l9_8891;
float l9_8892=0.0;
float l9_8893=(*sc_set0.UserUniforms).spawnDuration;
l9_8892=l9_8893;
float l9_8894=0.0;
float l9_8895;
if ((int(TRAILS_tmp)!=0))
{
l9_8895=1.001;
}
else
{
l9_8895=0.001;
}
l9_8895-=0.001;
l9_8894=l9_8895;
float l9_8896=0.0;
float l9_8897=(*sc_set0.UserUniforms).trailLength;
l9_8896=l9_8897;
float4 l9_8898=float4(0.0);
l9_8898=tempGlobals.VertexColor;
float l9_8899=0.0;
l9_8899=l9_8898.x;
float l9_8900=0.0;
float l9_8901=l9_8894;
bool l9_8902=(l9_8901*1.0)!=0.0;
bool l9_8903;
if (l9_8902)
{
l9_8903=(l9_8899*1.0)!=0.0;
}
else
{
l9_8903=l9_8902;
}
l9_8900=float(l9_8903);
float4 l9_8904=float4(0.0);
float l9_8905=l9_8882;
float l9_8906=l9_8884;
float l9_8907=l9_8886;
float l9_8908=l9_8888;
float2 l9_8909=l9_8890;
float l9_8910=l9_8892;
float l9_8911=l9_8896;
float l9_8912=l9_8900;
ssGlobals l9_8913=tempGlobals;
tempGlobals=l9_8913;
float4 l9_8914=float4(0.0);
N181_timeGlobal=l9_8905;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_8906;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_8907;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_8908;
N181_lifeTimeMinMax=l9_8909;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_8910;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_8911;
N181_isTrailCondition=l9_8912!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_8915=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_8916=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_8915=length(float4(1.0)*l9_8916);
}
N181_globalSeed=N181_externalSeed+l9_8915;
int l9_8917=0;
l9_8917=ssInstanceID;
int l9_8918=l9_8917;
float l9_8919=float(l9_8918);
int l9_8920=int(l9_8919);
int l9_8921=l9_8920^(l9_8920*15299);
int l9_8922=l9_8921;
int l9_8923=l9_8922;
int l9_8924=((l9_8923*((l9_8923*1471343)+101146501))+1559861749)&2147483647;
int l9_8925=l9_8924;
int l9_8926=l9_8922*1399;
int l9_8927=((l9_8926*((l9_8926*1471343)+101146501))+1559861749)&2147483647;
int l9_8928=l9_8927;
int l9_8929=l9_8922*7177;
int l9_8930=((l9_8929*((l9_8929*1471343)+101146501))+1559861749)&2147483647;
int l9_8931=l9_8930;
int l9_8932=l9_8925;
float l9_8933=float(l9_8932)*4.6566129e-10;
int l9_8934=l9_8928;
float l9_8935=float(l9_8934)*4.6566129e-10;
int l9_8936=l9_8931;
float l9_8937=float(l9_8936)*4.6566129e-10;
float3 l9_8938=float3(l9_8933,l9_8935,l9_8937);
float3 l9_8939=l9_8938;
N181_particleSeed=l9_8939;
float l9_8940=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_8941;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_8941=N181_lifeTimeMinMax;
}
else
{
l9_8941=float2(N181_lifeTimeConstant);
}
float2 l9_8942=l9_8941;
float l9_8943=fast::max(l9_8942.x,0.0099999998);
float l9_8944=fast::max(l9_8942.y,0.0099999998);
float l9_8945=tempGlobals.gTimeElapsed;
float l9_8946=l9_8945;
if (N181_ENABLE_EXTERNALTIME)
{
l9_8946=N181_externalTime;
}
float l9_8947=l9_8946;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_8947=N181_timeGlobal*l9_8946;
}
else
{
float l9_8948=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_8948=N181_trailLength;
}
}
float l9_8949=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_8950=0.0;
float l9_8951;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_8951=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_8951=0.0;
}
l9_8950=l9_8951;
float l9_8952=l9_8950;
int l9_8953=0;
l9_8953=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_8954=l9_8953;
l9_8949=fast::max(l9_8952*(1.0-(1.0/float(l9_8954))),0.0);
}
else
{
l9_8949=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_8955=fract(((l9_8946*N181_timeGlobal)*(1.0/(l9_8942.y+l9_8948)))+l9_8949);
l9_8947=l9_8955*(l9_8942.y+l9_8948);
}
float l9_8956=mix(l9_8947/l9_8943,l9_8947/l9_8944,l9_8940);
float l9_8957=fast::clamp(l9_8956,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_8947,l9_8957);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_8958=tempGlobals.Surface_UVCoord0;
l9_8947-=(l9_8958.y*N181_trailLength);
l9_8956=mix(l9_8947/l9_8943,l9_8947/l9_8944,l9_8940);
l9_8957=fast::clamp(l9_8956,0.0,1.0);
}
}
float l9_8959=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_8946-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_8959=1.0;
}
}
}
float l9_8960=l9_8956+l9_8959;
N181_particleAlive=1.0;
if ((l9_8960>0.99989998)||(l9_8947<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_8946*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_8942,l9_8947,l9_8957);
l9_8914=N181_timeValues;
l9_8904=l9_8914;
l9_8881=l9_8904;
float4 l9_8961=l9_8881;
N111_timeValuesIn=l9_8961;
float l9_8962=0.0;
float l9_8963=0.0;
float l9_8964=(*sc_set0.UserUniforms).timeGlobal;
l9_8963=l9_8964;
float l9_8965=0.0;
float l9_8966=(*sc_set0.UserUniforms).externalTimeInput;
l9_8965=l9_8966;
float l9_8967=0.0;
float l9_8968=(*sc_set0.UserUniforms).externalSeed;
l9_8967=l9_8968;
float l9_8969=0.0;
float l9_8970=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_8969=l9_8970;
float2 l9_8971=float2(0.0);
float2 l9_8972=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_8971=l9_8972;
float l9_8973=0.0;
float l9_8974=(*sc_set0.UserUniforms).spawnDuration;
l9_8973=l9_8974;
float l9_8975=0.0;
float l9_8976;
if ((int(TRAILS_tmp)!=0))
{
l9_8976=1.001;
}
else
{
l9_8976=0.001;
}
l9_8976-=0.001;
l9_8975=l9_8976;
float l9_8977=0.0;
float l9_8978=(*sc_set0.UserUniforms).trailLength;
l9_8977=l9_8978;
float4 l9_8979=float4(0.0);
l9_8979=tempGlobals.VertexColor;
float l9_8980=0.0;
l9_8980=l9_8979.x;
float l9_8981=0.0;
float l9_8982=l9_8975;
bool l9_8983=(l9_8982*1.0)!=0.0;
bool l9_8984;
if (l9_8983)
{
l9_8984=(l9_8980*1.0)!=0.0;
}
else
{
l9_8984=l9_8983;
}
l9_8981=float(l9_8984);
float l9_8985=0.0;
float l9_8986=l9_8963;
float l9_8987=l9_8965;
float l9_8988=l9_8967;
float l9_8989=l9_8969;
float2 l9_8990=l9_8971;
float l9_8991=l9_8973;
float l9_8992=l9_8977;
float l9_8993=l9_8981;
ssGlobals l9_8994=tempGlobals;
tempGlobals=l9_8994;
float l9_8995=0.0;
N181_timeGlobal=l9_8986;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_8987;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_8988;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_8989;
N181_lifeTimeMinMax=l9_8990;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_8991;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_8992;
N181_isTrailCondition=l9_8993!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_8996=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_8997=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_8996=length(float4(1.0)*l9_8997);
}
N181_globalSeed=N181_externalSeed+l9_8996;
int l9_8998=0;
l9_8998=ssInstanceID;
int l9_8999=l9_8998;
float l9_9000=float(l9_8999);
int l9_9001=int(l9_9000);
int l9_9002=l9_9001^(l9_9001*15299);
int l9_9003=l9_9002;
int l9_9004=l9_9003;
int l9_9005=((l9_9004*((l9_9004*1471343)+101146501))+1559861749)&2147483647;
int l9_9006=l9_9005;
int l9_9007=l9_9003*1399;
int l9_9008=((l9_9007*((l9_9007*1471343)+101146501))+1559861749)&2147483647;
int l9_9009=l9_9008;
int l9_9010=l9_9003*7177;
int l9_9011=((l9_9010*((l9_9010*1471343)+101146501))+1559861749)&2147483647;
int l9_9012=l9_9011;
int l9_9013=l9_9006;
float l9_9014=float(l9_9013)*4.6566129e-10;
int l9_9015=l9_9009;
float l9_9016=float(l9_9015)*4.6566129e-10;
int l9_9017=l9_9012;
float l9_9018=float(l9_9017)*4.6566129e-10;
float3 l9_9019=float3(l9_9014,l9_9016,l9_9018);
float3 l9_9020=l9_9019;
N181_particleSeed=l9_9020;
float l9_9021=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_9022;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_9022=N181_lifeTimeMinMax;
}
else
{
l9_9022=float2(N181_lifeTimeConstant);
}
float2 l9_9023=l9_9022;
float l9_9024=fast::max(l9_9023.x,0.0099999998);
float l9_9025=fast::max(l9_9023.y,0.0099999998);
float l9_9026=tempGlobals.gTimeElapsed;
float l9_9027=l9_9026;
if (N181_ENABLE_EXTERNALTIME)
{
l9_9027=N181_externalTime;
}
float l9_9028=l9_9027;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_9028=N181_timeGlobal*l9_9027;
}
else
{
float l9_9029=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_9029=N181_trailLength;
}
}
float l9_9030=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_9031=0.0;
float l9_9032;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_9032=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_9032=0.0;
}
l9_9031=l9_9032;
float l9_9033=l9_9031;
int l9_9034=0;
l9_9034=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_9035=l9_9034;
l9_9030=fast::max(l9_9033*(1.0-(1.0/float(l9_9035))),0.0);
}
else
{
l9_9030=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_9036=fract(((l9_9027*N181_timeGlobal)*(1.0/(l9_9023.y+l9_9029)))+l9_9030);
l9_9028=l9_9036*(l9_9023.y+l9_9029);
}
float l9_9037=mix(l9_9028/l9_9024,l9_9028/l9_9025,l9_9021);
float l9_9038=fast::clamp(l9_9037,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_9028,l9_9038);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_9039=tempGlobals.Surface_UVCoord0;
l9_9028-=(l9_9039.y*N181_trailLength);
l9_9037=mix(l9_9028/l9_9024,l9_9028/l9_9025,l9_9021);
l9_9038=fast::clamp(l9_9037,0.0,1.0);
}
}
float l9_9040=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_9027-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_9040=1.0;
}
}
}
float l9_9041=l9_9037+l9_9040;
N181_particleAlive=1.0;
if ((l9_9041>0.99989998)||(l9_9028<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_9027*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_9023,l9_9028,l9_9038);
l9_8995=N181_isTrail;
l9_8985=l9_8995;
l9_8962=l9_8985;
bool l9_9042=l9_8962!=0.0;
N111_isTrail=l9_9042;
float2 l9_9043=float2(0.0);
float l9_9044=0.0;
float l9_9045=(*sc_set0.UserUniforms).timeGlobal;
l9_9044=l9_9045;
float l9_9046=0.0;
float l9_9047=(*sc_set0.UserUniforms).externalTimeInput;
l9_9046=l9_9047;
float l9_9048=0.0;
float l9_9049=(*sc_set0.UserUniforms).externalSeed;
l9_9048=l9_9049;
float l9_9050=0.0;
float l9_9051=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_9050=l9_9051;
float2 l9_9052=float2(0.0);
float2 l9_9053=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_9052=l9_9053;
float l9_9054=0.0;
float l9_9055=(*sc_set0.UserUniforms).spawnDuration;
l9_9054=l9_9055;
float l9_9056=0.0;
float l9_9057;
if ((int(TRAILS_tmp)!=0))
{
l9_9057=1.001;
}
else
{
l9_9057=0.001;
}
l9_9057-=0.001;
l9_9056=l9_9057;
float l9_9058=0.0;
float l9_9059=(*sc_set0.UserUniforms).trailLength;
l9_9058=l9_9059;
float4 l9_9060=float4(0.0);
l9_9060=tempGlobals.VertexColor;
float l9_9061=0.0;
l9_9061=l9_9060.x;
float l9_9062=0.0;
float l9_9063=l9_9056;
bool l9_9064=(l9_9063*1.0)!=0.0;
bool l9_9065;
if (l9_9064)
{
l9_9065=(l9_9061*1.0)!=0.0;
}
else
{
l9_9065=l9_9064;
}
l9_9062=float(l9_9065);
float2 l9_9066=float2(0.0);
float l9_9067=l9_9044;
float l9_9068=l9_9046;
float l9_9069=l9_9048;
float l9_9070=l9_9050;
float2 l9_9071=l9_9052;
float l9_9072=l9_9054;
float l9_9073=l9_9058;
float l9_9074=l9_9062;
ssGlobals l9_9075=tempGlobals;
tempGlobals=l9_9075;
float2 l9_9076=float2(0.0);
N181_timeGlobal=l9_9067;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_9068;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_9069;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_9070;
N181_lifeTimeMinMax=l9_9071;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_9072;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_9073;
N181_isTrailCondition=l9_9074!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_9077=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_9078=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_9077=length(float4(1.0)*l9_9078);
}
N181_globalSeed=N181_externalSeed+l9_9077;
int l9_9079=0;
l9_9079=ssInstanceID;
int l9_9080=l9_9079;
float l9_9081=float(l9_9080);
int l9_9082=int(l9_9081);
int l9_9083=l9_9082^(l9_9082*15299);
int l9_9084=l9_9083;
int l9_9085=l9_9084;
int l9_9086=((l9_9085*((l9_9085*1471343)+101146501))+1559861749)&2147483647;
int l9_9087=l9_9086;
int l9_9088=l9_9084*1399;
int l9_9089=((l9_9088*((l9_9088*1471343)+101146501))+1559861749)&2147483647;
int l9_9090=l9_9089;
int l9_9091=l9_9084*7177;
int l9_9092=((l9_9091*((l9_9091*1471343)+101146501))+1559861749)&2147483647;
int l9_9093=l9_9092;
int l9_9094=l9_9087;
float l9_9095=float(l9_9094)*4.6566129e-10;
int l9_9096=l9_9090;
float l9_9097=float(l9_9096)*4.6566129e-10;
int l9_9098=l9_9093;
float l9_9099=float(l9_9098)*4.6566129e-10;
float3 l9_9100=float3(l9_9095,l9_9097,l9_9099);
float3 l9_9101=l9_9100;
N181_particleSeed=l9_9101;
float l9_9102=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_9103;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_9103=N181_lifeTimeMinMax;
}
else
{
l9_9103=float2(N181_lifeTimeConstant);
}
float2 l9_9104=l9_9103;
float l9_9105=fast::max(l9_9104.x,0.0099999998);
float l9_9106=fast::max(l9_9104.y,0.0099999998);
float l9_9107=tempGlobals.gTimeElapsed;
float l9_9108=l9_9107;
if (N181_ENABLE_EXTERNALTIME)
{
l9_9108=N181_externalTime;
}
float l9_9109=l9_9108;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_9109=N181_timeGlobal*l9_9108;
}
else
{
float l9_9110=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_9110=N181_trailLength;
}
}
float l9_9111=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_9112=0.0;
float l9_9113;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_9113=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_9113=0.0;
}
l9_9112=l9_9113;
float l9_9114=l9_9112;
int l9_9115=0;
l9_9115=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_9116=l9_9115;
l9_9111=fast::max(l9_9114*(1.0-(1.0/float(l9_9116))),0.0);
}
else
{
l9_9111=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_9117=fract(((l9_9108*N181_timeGlobal)*(1.0/(l9_9104.y+l9_9110)))+l9_9111);
l9_9109=l9_9117*(l9_9104.y+l9_9110);
}
float l9_9118=mix(l9_9109/l9_9105,l9_9109/l9_9106,l9_9102);
float l9_9119=fast::clamp(l9_9118,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_9109,l9_9119);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_9120=tempGlobals.Surface_UVCoord0;
l9_9109-=(l9_9120.y*N181_trailLength);
l9_9118=mix(l9_9109/l9_9105,l9_9109/l9_9106,l9_9102);
l9_9119=fast::clamp(l9_9118,0.0,1.0);
}
}
float l9_9121=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_9108-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_9121=1.0;
}
}
}
float l9_9122=l9_9118+l9_9121;
N181_particleAlive=1.0;
if ((l9_9122>0.99989998)||(l9_9109<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_9108*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_9104,l9_9109,l9_9119);
l9_9076=N181_trailHeadTime;
l9_9066=l9_9076;
l9_9043=l9_9066;
float2 l9_9123=l9_9043;
N111_trailHeadTime=l9_9123;
float2 l9_9124=float2(0.0);
float2 l9_9125=float2(0.0);
float2 l9_9126=(*sc_set0.UserUniforms).trailTaper;
l9_9125=l9_9126;
l9_9124=l9_9125;
float2 l9_9127=l9_9124;
N111_taper=l9_9127;
float l9_9128=0.0;
float l9_9129=0.0;
float l9_9130=(*sc_set0.UserUniforms).trailWidth;
l9_9129=l9_9130;
l9_9128=l9_9129;
float l9_9131=l9_9128;
N111_trailSizeMult=l9_9131;
float3 l9_9132=float3(0.0);
float3 l9_9133=float3(0.0);
l9_9133=tempGlobals.SurfacePosition_ObjectSpace;
l9_9132=l9_9133;
float3 l9_9134=l9_9132;
N111_positionObjectSpace=l9_9134;
float3 l9_9135=float3(0.0);
float3 l9_9136=float3(0.0);
l9_9136=tempGlobals.VertexNormal_ObjectSpace;
l9_9135=l9_9136;
float3 l9_9137=l9_9135;
N111_normalObjectSpace=l9_9137;
float3 l9_9138=float3(0.0);
float3 l9_9139=float3(0.0);
float3 l9_9140=float3(0.0);
float3 l9_9141=float3(0.0);
float3 l9_9142=float3(0.0);
float3 l9_9143=float3(0.0);
float3 l9_9144=float3(0.0);
float3 l9_9145=float3(0.0);
float3 l9_9146=float3(0.0);
float3 l9_9147=float3(0.0);
float3 l9_9148=(*sc_set0.UserUniforms).Port_Default_N247;
ssGlobals l9_9149=tempGlobals;
float3 l9_9150;
if (NODE_248_DROPLIST_ITEM_tmp==0)
{
float l9_9151=0.0;
float l9_9152=(*sc_set0.UserUniforms).Tweak_N255;
l9_9151=l9_9152;
float l9_9153=0.0;
float l9_9154=(*sc_set0.UserUniforms).Tweak_N254;
l9_9153=l9_9154;
float3 l9_9155=float3(0.0);
float3 l9_9156=(*sc_set0.UserUniforms).Tweak_N252;
l9_9155=l9_9156;
float3 l9_9157=float3(0.0);
float3 l9_9158=(*sc_set0.UserUniforms).Tweak_N253;
l9_9157=l9_9158;
float l9_9159=0.0;
float l9_9160=(*sc_set0.UserUniforms).Tweak_N224;
l9_9159=l9_9160;
float3 l9_9161=float3(0.0);
float l9_9162=l9_9151;
float l9_9163=l9_9153;
float3 l9_9164=l9_9155;
float3 l9_9165=l9_9157;
float l9_9166=l9_9159;
ssGlobals l9_9167=l9_9149;
tempGlobals=l9_9167;
float3 l9_9168=float3(0.0);
N128_SphereType=int(l9_9162);
N128_Radius=l9_9163;
N128_Scale=l9_9164;
N128_Center=l9_9165;
N128_VolumeFill=l9_9166;
int l9_9169=0;
l9_9169=ssInstanceID;
int l9_9170=l9_9169;
float l9_9171=float(l9_9170);
int l9_9172=int(l9_9171);
int l9_9173=l9_9172^(l9_9172*15299);
int l9_9174=l9_9173;
int l9_9175=l9_9174;
int l9_9176=((l9_9175*((l9_9175*1471343)+101146501))+1559861749)&2147483647;
int l9_9177=l9_9176;
int l9_9178=l9_9174*1399;
int l9_9179=((l9_9178*((l9_9178*1471343)+101146501))+1559861749)&2147483647;
int l9_9180=l9_9179;
int l9_9181=l9_9174*7177;
int l9_9182=((l9_9181*((l9_9181*1471343)+101146501))+1559861749)&2147483647;
int l9_9183=l9_9182;
int l9_9184=l9_9177;
float l9_9185=float(l9_9184)*4.6566129e-10;
int l9_9186=l9_9180;
float l9_9187=float(l9_9186)*4.6566129e-10;
int l9_9188=l9_9183;
float l9_9189=float(l9_9188)*4.6566129e-10;
float3 l9_9190=float3(l9_9185,l9_9187,l9_9189);
float3 l9_9191=l9_9190;
float3 l9_9192=l9_9191;
int l9_9193=0;
l9_9193=ssInstanceID;
int l9_9194=l9_9193;
float l9_9195=float(l9_9194+1);
int l9_9196=int(l9_9195);
int l9_9197=l9_9196^(l9_9196*15299);
int l9_9198=l9_9197;
int l9_9199=l9_9198;
int l9_9200=((l9_9199*((l9_9199*1471343)+101146501))+1559861749)&2147483647;
int l9_9201=l9_9200;
int l9_9202=l9_9198*1399;
int l9_9203=((l9_9202*((l9_9202*1471343)+101146501))+1559861749)&2147483647;
int l9_9204=l9_9203;
int l9_9205=l9_9198*7177;
int l9_9206=((l9_9205*((l9_9205*1471343)+101146501))+1559861749)&2147483647;
int l9_9207=l9_9206;
int l9_9208=l9_9201;
float l9_9209=float(l9_9208)*4.6566129e-10;
int l9_9210=l9_9204;
float l9_9211=float(l9_9210)*4.6566129e-10;
int l9_9212=l9_9207;
float l9_9213=float(l9_9212)*4.6566129e-10;
float3 l9_9214=float3(l9_9209,l9_9211,l9_9213);
float3 l9_9215=l9_9214;
float3 l9_9216=l9_9215;
float l9_9217=1.0-N128_VolumeFill;
float l9_9218=3.0;
float l9_9219;
if (l9_9217<=0.0)
{
l9_9219=0.0;
}
else
{
l9_9219=pow(l9_9217,l9_9218);
}
float l9_9220=l9_9219;
float l9_9221=l9_9220;
l9_9192=mix(float3(l9_9221),float3(1.0),l9_9192);
float3 l9_9222=l9_9192;
float l9_9223;
if (l9_9222.x<=0.0)
{
l9_9223=0.0;
}
else
{
l9_9223=sqrt(l9_9222.x);
}
float l9_9224=l9_9223;
float l9_9225;
if (l9_9222.y<=0.0)
{
l9_9225=0.0;
}
else
{
l9_9225=sqrt(l9_9222.y);
}
float l9_9226=l9_9225;
float l9_9227;
if (l9_9222.z<=0.0)
{
l9_9227=0.0;
}
else
{
l9_9227=sqrt(l9_9222.z);
}
float3 l9_9228=float3(l9_9224,l9_9226,l9_9227);
l9_9192=l9_9228;
l9_9216=mix(float3(-1.0),float3(1.0),l9_9216);
l9_9216/=float3(length(l9_9216+float3(9.9999997e-05)));
float3 l9_9229=((l9_9192*l9_9216)*N128_Scale)*(N128_Radius*0.5);
if (N128_SphereType==1)
{
l9_9229.x=abs(l9_9229.x);
}
else
{
if (N128_SphereType==2)
{
l9_9229.y=abs(l9_9229.y);
}
else
{
if (N128_SphereType==3)
{
l9_9229.z=abs(l9_9229.z);
}
}
}
l9_9229+=N128_Center;
N128_Result=l9_9229;
l9_9168=N128_Result;
l9_9161=l9_9168;
l9_9140=l9_9161;
l9_9150=l9_9140;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==1)
{
float3 l9_9230=float3(0.0);
float3 l9_9231=(*sc_set0.UserUniforms).Tweak_N250;
l9_9230=l9_9231;
float3 l9_9232=float3(0.0);
float3 l9_9233=(*sc_set0.UserUniforms).Tweak_N251;
l9_9232=l9_9233;
float l9_9234=0.0;
float l9_9235=(*sc_set0.UserUniforms).volumeFill;
l9_9234=l9_9235;
float3 l9_9236=float3(0.0);
float3 l9_9237=l9_9230;
float3 l9_9238=l9_9232;
float l9_9239=l9_9234;
ssGlobals l9_9240=l9_9149;
tempGlobals=l9_9240;
float3 l9_9241=float3(0.0);
N137_Scale=l9_9237;
N137_Center=l9_9238;
N137_VolumeFill=l9_9239;
int l9_9242=0;
l9_9242=ssInstanceID;
int l9_9243=l9_9242;
float l9_9244=float(l9_9243);
float l9_9245=mod(l9_9244,8.0);
float l9_9246=mod(l9_9244,3.0);
float l9_9247=l9_9244;
int l9_9248=int(l9_9247);
int l9_9249=l9_9248^(l9_9248*15299);
int l9_9250=l9_9249;
int l9_9251=l9_9250;
int l9_9252=((l9_9251*((l9_9251*1471343)+101146501))+1559861749)&2147483647;
int l9_9253=l9_9252;
int l9_9254=l9_9250*1399;
int l9_9255=((l9_9254*((l9_9254*1471343)+101146501))+1559861749)&2147483647;
int l9_9256=l9_9255;
int l9_9257=l9_9250*7177;
int l9_9258=((l9_9257*((l9_9257*1471343)+101146501))+1559861749)&2147483647;
int l9_9259=l9_9258;
int l9_9260=l9_9253;
float l9_9261=float(l9_9260)*4.6566129e-10;
int l9_9262=l9_9256;
float l9_9263=float(l9_9262)*4.6566129e-10;
int l9_9264=l9_9259;
float l9_9265=float(l9_9264)*4.6566129e-10;
float3 l9_9266=float3(l9_9261,l9_9263,l9_9265);
float3 l9_9267=l9_9266;
float3 l9_9268=l9_9267;
float l9_9269=1.0-N137_VolumeFill;
float l9_9270=3.0;
float l9_9271;
if (l9_9269<=0.0)
{
l9_9271=0.0;
}
else
{
l9_9271=pow(l9_9269,l9_9270);
}
float l9_9272=l9_9271;
float l9_9273=l9_9272;
float3 l9_9274;
if (l9_9246==0.0)
{
l9_9274=float3(l9_9273,0.0,0.0);
}
else
{
float3 l9_9275;
if (l9_9246==1.0)
{
l9_9275=float3(0.0,l9_9273,0.0);
}
else
{
l9_9275=float3(0.0,0.0,l9_9273);
}
l9_9274=l9_9275;
}
float3 l9_9276=l9_9274;
float3 l9_9277=mix(l9_9276,float3(1.0),l9_9268);
float3 l9_9278;
if (l9_9245==0.0)
{
l9_9278=l9_9277*float3(1.0);
}
else
{
float3 l9_9279;
if (l9_9245==1.0)
{
l9_9279=l9_9277*float3(-1.0,1.0,1.0);
}
else
{
float3 l9_9280;
if (l9_9245==2.0)
{
l9_9280=l9_9277*float3(-1.0,-1.0,1.0);
}
else
{
float3 l9_9281;
if (l9_9245==3.0)
{
l9_9281=l9_9277*float3(-1.0);
}
else
{
float3 l9_9282;
if (l9_9245==4.0)
{
l9_9282=l9_9277*float3(1.0,-1.0,-1.0);
}
else
{
float3 l9_9283;
if (l9_9245==5.0)
{
l9_9283=l9_9277*float3(1.0,1.0,-1.0);
}
else
{
float3 l9_9284;
if (l9_9245==6.0)
{
l9_9284=l9_9277*float3(-1.0,1.0,-1.0);
}
else
{
l9_9284=l9_9277*float3(1.0,-1.0,1.0);
}
l9_9283=l9_9284;
}
l9_9282=l9_9283;
}
l9_9281=l9_9282;
}
l9_9280=l9_9281;
}
l9_9279=l9_9280;
}
l9_9278=l9_9279;
}
float3 l9_9285=l9_9278;
float3 l9_9286=l9_9285;
float3 l9_9287=l9_9286*(N137_Scale*0.5);
l9_9287+=N137_Center;
N137_Result=l9_9287;
l9_9241=N137_Result;
l9_9236=l9_9241;
l9_9141=l9_9236;
l9_9150=l9_9141;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==2)
{
float l9_9288=0.0;
float l9_9289=(*sc_set0.UserUniforms).Tweak_N238;
l9_9288=l9_9289;
float l9_9290=0.0;
float l9_9291=(*sc_set0.UserUniforms).Tweak_N16;
l9_9290=l9_9291;
float l9_9292=0.0;
float l9_9293=(*sc_set0.UserUniforms).Tweak_N234;
l9_9292=l9_9293;
float l9_9294=0.0;
float l9_9295=(*sc_set0.UserUniforms).Tweak_N239;
l9_9294=l9_9295;
float2 l9_9296=float2(0.0);
float2 l9_9297=(*sc_set0.UserUniforms).Tweak_N240;
l9_9296=l9_9297;
float3 l9_9298=float3(0.0);
float3 l9_9299=(*sc_set0.UserUniforms).Tweak_N241;
l9_9298=l9_9299;
float3 l9_9300=float3(0.0);
float3 l9_9301=(*sc_set0.UserUniforms).Tweak_N242;
l9_9300=l9_9301;
float l9_9302=0.0;
float l9_9303=(*sc_set0.UserUniforms).Tweak_N226;
l9_9302=l9_9303;
float l9_9304=0.0;
float l9_9305=(*sc_set0.UserUniforms).Tweak_N243;
l9_9304=l9_9305;
float3 l9_9306=float3(0.0);
float l9_9307=l9_9288;
float l9_9308=l9_9290;
float l9_9309=l9_9292;
float l9_9310=l9_9294;
float2 l9_9311=l9_9296;
float3 l9_9312=l9_9298;
float3 l9_9313=l9_9300;
float l9_9314=l9_9302;
float l9_9315=l9_9304;
ssGlobals l9_9316=l9_9149;
tempGlobals=l9_9316;
float3 l9_9317=float3(0.0);
N144_Radius=l9_9307;
N144_startRad=l9_9308;
N144_endRad=l9_9309;
N144_Height=l9_9310;
N144_ArcAngles=l9_9311;
N144_Scale=l9_9312;
N144_Center=l9_9313;
N144_VolumeFill=l9_9314;
N144_OrientationAxis=int(l9_9315);
int l9_9318=0;
l9_9318=ssInstanceID;
int l9_9319=l9_9318;
float l9_9320=float(l9_9319);
int l9_9321=int(l9_9320);
int l9_9322=l9_9321^(l9_9321*15299);
int l9_9323=l9_9322;
int l9_9324=l9_9323;
int l9_9325=((l9_9324*((l9_9324*1471343)+101146501))+1559861749)&2147483647;
int l9_9326=l9_9325;
int l9_9327=l9_9323*1399;
int l9_9328=((l9_9327*((l9_9327*1471343)+101146501))+1559861749)&2147483647;
int l9_9329=l9_9328;
int l9_9330=l9_9323*7177;
int l9_9331=((l9_9330*((l9_9330*1471343)+101146501))+1559861749)&2147483647;
int l9_9332=l9_9331;
int l9_9333=l9_9326;
float l9_9334=float(l9_9333)*4.6566129e-10;
int l9_9335=l9_9329;
float l9_9336=float(l9_9335)*4.6566129e-10;
int l9_9337=l9_9332;
float l9_9338=float(l9_9337)*4.6566129e-10;
float3 l9_9339=float3(l9_9334,l9_9336,l9_9338);
float3 l9_9340=l9_9339;
float3 l9_9341=l9_9340;
float2 l9_9342=radians(N144_ArcAngles);
float l9_9343=1.0-N144_VolumeFill;
l9_9343*=l9_9343;
float l9_9344=mix(l9_9342.x,l9_9342.y,l9_9341.x);
float l9_9345=mix(-1.0,1.0,l9_9341.y);
float l9_9346=mix(l9_9343,1.0,l9_9341.z);
float l9_9347=l9_9346;
float l9_9348;
if (l9_9347<=0.0)
{
l9_9348=0.0;
}
else
{
l9_9348=sqrt(l9_9347);
}
float l9_9349=l9_9348;
l9_9346=l9_9349;
float3 l9_9350=float3(sin(l9_9344),cos(l9_9344),l9_9345);
float l9_9351=(N144_Radius*0.5)*mix(N144_startRad,N144_endRad,l9_9341.y);
l9_9350*=((N144_Scale*float3(l9_9351,l9_9351,N144_Height*0.5))*float3(l9_9346,l9_9346,1.0));
if (N144_OrientationAxis==0)
{
l9_9350=l9_9350.zxy;
}
else
{
if (N144_OrientationAxis==1)
{
l9_9350=l9_9350.xzy;
}
}
l9_9350+=N144_Center;
N144_Result=l9_9350;
l9_9317=N144_Result;
l9_9306=l9_9317;
l9_9142=l9_9306;
l9_9150=l9_9142;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==3)
{
float l9_9352=0.0;
float l9_9353=(*sc_set0.UserUniforms).Tweak_N257;
l9_9352=l9_9353;
float l9_9354=0.0;
float l9_9355=(*sc_set0.UserUniforms).Tweak_N258;
l9_9354=l9_9355;
float2 l9_9356=float2(0.0);
float2 l9_9357=(*sc_set0.UserUniforms).Tweak_N259;
l9_9356=l9_9357;
float3 l9_9358=float3(0.0);
float3 l9_9359=(*sc_set0.UserUniforms).Tweak_N260;
l9_9358=l9_9359;
float3 l9_9360=float3(0.0);
float3 l9_9361=(*sc_set0.UserUniforms).Tweak_N261;
l9_9360=l9_9361;
float l9_9362=0.0;
float l9_9363=(*sc_set0.UserUniforms).Tweak_N262;
l9_9362=l9_9363;
float l9_9364=0.0;
float l9_9365=(*sc_set0.UserUniforms).Tweak_N263;
l9_9364=l9_9365;
float3 l9_9366=float3(0.0);
float l9_9367=l9_9352;
float l9_9368=l9_9354;
float2 l9_9369=l9_9356;
float3 l9_9370=l9_9358;
float3 l9_9371=l9_9360;
float l9_9372=l9_9362;
float l9_9373=l9_9364;
ssGlobals l9_9374=l9_9149;
tempGlobals=l9_9374;
float3 l9_9375=float3(0.0);
N149_InnerRadius=l9_9367;
N149_OuterRadius=l9_9368;
N149_ArcAngles=l9_9369;
N149_Scale=l9_9370;
N149_Center=l9_9371;
N149_VolumeFill=l9_9372;
N149_Axis=int(l9_9373);
int l9_9376=0;
l9_9376=ssInstanceID;
int l9_9377=l9_9376;
float l9_9378=float(l9_9377);
int l9_9379=int(l9_9378);
int l9_9380=l9_9379^(l9_9379*15299);
int l9_9381=l9_9380;
int l9_9382=l9_9381;
int l9_9383=((l9_9382*((l9_9382*1471343)+101146501))+1559861749)&2147483647;
int l9_9384=l9_9383;
int l9_9385=l9_9381*1399;
int l9_9386=((l9_9385*((l9_9385*1471343)+101146501))+1559861749)&2147483647;
int l9_9387=l9_9386;
int l9_9388=l9_9381*7177;
int l9_9389=((l9_9388*((l9_9388*1471343)+101146501))+1559861749)&2147483647;
int l9_9390=l9_9389;
int l9_9391=l9_9384;
float l9_9392=float(l9_9391)*4.6566129e-10;
int l9_9393=l9_9387;
float l9_9394=float(l9_9393)*4.6566129e-10;
int l9_9395=l9_9390;
float l9_9396=float(l9_9395)*4.6566129e-10;
float3 l9_9397=float3(l9_9392,l9_9394,l9_9396);
float3 l9_9398=l9_9397;
float3 l9_9399=l9_9398;
float2 l9_9400=radians(N149_ArcAngles);
float l9_9401=mix(l9_9400.x,l9_9400.y,l9_9399.z);
float l9_9402=3.1415927;
float l9_9403=mix(0.0,l9_9402*2.0,l9_9399.y);
float l9_9404=mix(1.0-(N149_VolumeFill*N149_VolumeFill),1.0,l9_9399.x);
float l9_9405=l9_9404;
float l9_9406;
if (l9_9405<=0.0)
{
l9_9406=0.0;
}
else
{
l9_9406=sqrt(l9_9405);
}
float l9_9407=l9_9406;
l9_9404=l9_9407*(N149_InnerRadius*0.5);
float l9_9408=(cos(l9_9403)*l9_9404)+(N149_OuterRadius*0.5);
float3 l9_9409=float3(cos(l9_9401)*l9_9408,sin(l9_9401)*l9_9408,sin(l9_9403)*l9_9404);
if (N149_Axis==1)
{
l9_9409=l9_9409.yzx;
}
else
{
if (N149_Axis==2)
{
l9_9409=l9_9409.zyx;
}
}
l9_9409*=N149_Scale;
l9_9409+=N149_Center;
N149_Result=l9_9409;
l9_9375=N149_Result;
l9_9366=l9_9375;
l9_9143=l9_9366;
l9_9150=l9_9143;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==4)
{
float3 l9_9410=float3(0.0);
float3 l9_9411=(*sc_set0.UserUniforms).Tweak_N236;
l9_9410=l9_9411;
float3 l9_9412=float3(0.0);
float3 l9_9413=(*sc_set0.UserUniforms).Tweak_N237;
l9_9412=l9_9413;
float3 l9_9414=float3(0.0);
float3 l9_9415=(*sc_set0.UserUniforms).Tweak_N264;
l9_9414=l9_9415;
float3 l9_9416=float3(0.0);
float3 l9_9417=l9_9410;
float3 l9_9418=l9_9412;
float3 l9_9419=l9_9414;
ssGlobals l9_9420=l9_9149;
tempGlobals=l9_9420;
float3 l9_9421=float3(0.0);
N235_gridSize=l9_9417;
N235_gridDim=l9_9418;
N235_Offset=l9_9419;
int l9_9422=int((N235_gridDim.x*N235_gridDim.y)*N235_gridDim.z);
int l9_9423=0;
l9_9423=ssInstanceID;
int l9_9424=l9_9423;
int l9_9425=l9_9424;
int l9_9426=l9_9425%l9_9422;
int l9_9427=l9_9426;
float3 l9_9428=N235_gridDim;
float3 l9_9429=N235_gridSize;
int3 l9_9430=int3(l9_9428);
int l9_9431=l9_9430.x*l9_9430.y;
int l9_9432=l9_9427/l9_9431;
int l9_9433=l9_9427%l9_9431;
int l9_9434=l9_9433/l9_9430.x;
int l9_9435=l9_9433%l9_9430.x;
float l9_9436;
if (l9_9430.x>1)
{
l9_9436=l9_9429.x/(l9_9428.x-1.0);
}
else
{
l9_9436=0.0;
}
float l9_9437=l9_9436;
float l9_9438;
if (l9_9430.y>1)
{
l9_9438=l9_9429.y/(l9_9428.y-1.0);
}
else
{
l9_9438=0.0;
}
float l9_9439=l9_9438;
float l9_9440;
if (l9_9430.z>1)
{
l9_9440=l9_9429.z/(l9_9428.z-1.0);
}
else
{
l9_9440=0.0;
}
float3 l9_9441=float3(l9_9437,l9_9439,l9_9440);
float3 l9_9442=(l9_9428-float3(1.0))*l9_9441;
float3 l9_9443=(-l9_9442)*0.5;
float3 l9_9444=(float3(float(l9_9435),float(l9_9434),float(l9_9432))*l9_9441)+l9_9443;
N235_Result=l9_9444+N235_Offset;
l9_9421=N235_Result;
l9_9416=l9_9421;
l9_9144=l9_9416;
l9_9150=l9_9144;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==5)
{
float l9_9445=0.0;
float l9_9446=(*sc_set0.UserUniforms).Tweak_N232;
l9_9445=l9_9446;
float l9_9447=0.0;
float l9_9448=(*sc_set0.UserUniforms).Tweak_N233;
l9_9447=l9_9448;
float l9_9449=0.0;
float l9_9450=(*sc_set0.UserUniforms).Tweak_N231;
l9_9449=l9_9450;
float l9_9451=0.0;
float l9_9452=(*sc_set0.UserUniforms).Tweak_N304;
l9_9451=l9_9452;
float l9_9453=0.0;
float l9_9454=(*sc_set0.UserUniforms).Tweak_N229;
l9_9453=l9_9454;
float l9_9455=0.0;
float l9_9456=float((*sc_set0.UserUniforms).Tweak_N280!=0);
l9_9455=l9_9456;
float l9_9457=0.0;
float l9_9458=(*sc_set0.UserUniforms).Tweak_N285;
l9_9457=l9_9458;
float l9_9459=0.0;
float l9_9460=(*sc_set0.UserUniforms).Tweak_N245;
l9_9459=l9_9460;
float l9_9461=0.0;
float l9_9462=(*sc_set0.UserUniforms).Tweak_N230;
l9_9461=l9_9462;
float l9_9463=0.0;
float l9_9464=float((*sc_set0.UserUniforms).animated!=0);
l9_9463=l9_9464;
float l9_9465=0.0;
float l9_9466=(*sc_set0.UserUniforms).Tweak_N279;
l9_9465=l9_9466;
float l9_9467=0.0;
float l9_9468=float((*sc_set0.UserUniforms).Tweak_N303!=0);
l9_9467=l9_9468;
float2 l9_9469=float2(0.0);
float2 l9_9470=(*sc_set0.UserUniforms).Tweak_N336;
l9_9469=l9_9470;
float l9_9471=0.0;
float l9_9472=(*sc_set0.UserUniforms).timeGlobal;
l9_9471=l9_9472;
float l9_9473=0.0;
float l9_9474=(*sc_set0.UserUniforms).externalTimeInput;
l9_9473=l9_9474;
float l9_9475=0.0;
float l9_9476=(*sc_set0.UserUniforms).externalSeed;
l9_9475=l9_9476;
float l9_9477=0.0;
float l9_9478=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_9477=l9_9478;
float2 l9_9479=float2(0.0);
float2 l9_9480=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_9479=l9_9480;
float l9_9481=0.0;
float l9_9482=(*sc_set0.UserUniforms).spawnDuration;
l9_9481=l9_9482;
float l9_9483=0.0;
float l9_9484;
if ((int(TRAILS_tmp)!=0))
{
l9_9484=1.001;
}
else
{
l9_9484=0.001;
}
l9_9484-=0.001;
l9_9483=l9_9484;
float l9_9485=0.0;
float l9_9486=(*sc_set0.UserUniforms).trailLength;
l9_9485=l9_9486;
float4 l9_9487=float4(0.0);
l9_9487=l9_9149.VertexColor;
float l9_9488=0.0;
l9_9488=l9_9487.x;
float l9_9489=0.0;
float l9_9490=l9_9483;
bool l9_9491=(l9_9490*1.0)!=0.0;
bool l9_9492;
if (l9_9491)
{
l9_9492=(l9_9488*1.0)!=0.0;
}
else
{
l9_9492=l9_9491;
}
l9_9489=float(l9_9492);
float4 l9_9493=float4(0.0);
float l9_9494=l9_9471;
float l9_9495=l9_9473;
float l9_9496=l9_9475;
float l9_9497=l9_9477;
float2 l9_9498=l9_9479;
float l9_9499=l9_9481;
float l9_9500=l9_9485;
float l9_9501=l9_9489;
ssGlobals l9_9502=l9_9149;
tempGlobals=l9_9502;
float4 l9_9503=float4(0.0);
N181_timeGlobal=l9_9494;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_9495;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_9496;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_9497;
N181_lifeTimeMinMax=l9_9498;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_9499;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_9500;
N181_isTrailCondition=l9_9501!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_9504=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_9505=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_9504=length(float4(1.0)*l9_9505);
}
N181_globalSeed=N181_externalSeed+l9_9504;
int l9_9506=0;
l9_9506=ssInstanceID;
int l9_9507=l9_9506;
float l9_9508=float(l9_9507);
int l9_9509=int(l9_9508);
int l9_9510=l9_9509^(l9_9509*15299);
int l9_9511=l9_9510;
int l9_9512=l9_9511;
int l9_9513=((l9_9512*((l9_9512*1471343)+101146501))+1559861749)&2147483647;
int l9_9514=l9_9513;
int l9_9515=l9_9511*1399;
int l9_9516=((l9_9515*((l9_9515*1471343)+101146501))+1559861749)&2147483647;
int l9_9517=l9_9516;
int l9_9518=l9_9511*7177;
int l9_9519=((l9_9518*((l9_9518*1471343)+101146501))+1559861749)&2147483647;
int l9_9520=l9_9519;
int l9_9521=l9_9514;
float l9_9522=float(l9_9521)*4.6566129e-10;
int l9_9523=l9_9517;
float l9_9524=float(l9_9523)*4.6566129e-10;
int l9_9525=l9_9520;
float l9_9526=float(l9_9525)*4.6566129e-10;
float3 l9_9527=float3(l9_9522,l9_9524,l9_9526);
float3 l9_9528=l9_9527;
N181_particleSeed=l9_9528;
float l9_9529=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_9530;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_9530=N181_lifeTimeMinMax;
}
else
{
l9_9530=float2(N181_lifeTimeConstant);
}
float2 l9_9531=l9_9530;
float l9_9532=fast::max(l9_9531.x,0.0099999998);
float l9_9533=fast::max(l9_9531.y,0.0099999998);
float l9_9534=tempGlobals.gTimeElapsed;
float l9_9535=l9_9534;
if (N181_ENABLE_EXTERNALTIME)
{
l9_9535=N181_externalTime;
}
float l9_9536=l9_9535;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_9536=N181_timeGlobal*l9_9535;
}
else
{
float l9_9537=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_9537=N181_trailLength;
}
}
float l9_9538=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_9539=0.0;
float l9_9540;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_9540=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_9540=0.0;
}
l9_9539=l9_9540;
float l9_9541=l9_9539;
int l9_9542=0;
l9_9542=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_9543=l9_9542;
l9_9538=fast::max(l9_9541*(1.0-(1.0/float(l9_9543))),0.0);
}
else
{
l9_9538=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_9544=fract(((l9_9535*N181_timeGlobal)*(1.0/(l9_9531.y+l9_9537)))+l9_9538);
l9_9536=l9_9544*(l9_9531.y+l9_9537);
}
float l9_9545=mix(l9_9536/l9_9532,l9_9536/l9_9533,l9_9529);
float l9_9546=fast::clamp(l9_9545,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_9536,l9_9546);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_9547=tempGlobals.Surface_UVCoord0;
l9_9536-=(l9_9547.y*N181_trailLength);
l9_9545=mix(l9_9536/l9_9532,l9_9536/l9_9533,l9_9529);
l9_9546=fast::clamp(l9_9545,0.0,1.0);
}
}
float l9_9548=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_9535-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_9548=1.0;
}
}
}
float l9_9549=l9_9545+l9_9548;
N181_particleAlive=1.0;
if ((l9_9549>0.99989998)||(l9_9536<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_9535*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_9531,l9_9536,l9_9546);
l9_9503=N181_timeValues;
l9_9493=l9_9503;
float3 l9_9550=float3(0.0);
float l9_9551=l9_9445;
float l9_9552=l9_9447;
float l9_9553=l9_9449;
float l9_9554=l9_9451;
float l9_9555=l9_9453;
float l9_9556=l9_9455;
float l9_9557=l9_9457;
float l9_9558=l9_9459;
float l9_9559=l9_9461;
float l9_9560=l9_9463;
float l9_9561=l9_9465;
float l9_9562=l9_9467;
float2 l9_9563=l9_9469;
float4 l9_9564=l9_9493;
ssGlobals l9_9565=l9_9149;
tempGlobals=l9_9565;
float3 l9_9566=float3(0.0);
N155_startRad=l9_9551;
N155_endRad=l9_9552;
N155_heightPerTurn=l9_9553;
N155_alignHeight=int(l9_9554);
N155_thicknessRad=l9_9555;
N155_curvThickEnable=l9_9556!=0.0;
N155_VolumeFill=l9_9557;
N155_OrientationAxis=int(l9_9558);
N155_nTurns=l9_9559;
N155_animPath=l9_9560!=0.0;
N155_Speed=l9_9561;
N155_randSpeed=l9_9562!=0.0;
N155_SpeedMinMax=l9_9563;
N155_timeValuesIn=l9_9564;
float l9_9567=3.1415927;
float l9_9568=l9_9567*2.0;
float l9_9569=(N155_heightPerTurn/N155_nTurns)/l9_9568;
float l9_9570=N155_startRad*0.5;
float l9_9571=N155_endRad*0.5;
float l9_9572=N155_thicknessRad*0.5;
float l9_9573=0.0;
float l9_9574;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_9574=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_9574=0.0;
}
l9_9573=l9_9574;
float l9_9575=l9_9573;
float l9_9576=l9_9575;
int l9_9577=0;
l9_9577=ssInstanceID;
int l9_9578=l9_9577;
float l9_9579=float(l9_9578);
float l9_9580=l9_9579;
int l9_9581=int(l9_9580);
int l9_9582=l9_9581^(l9_9581*15299);
int l9_9583=l9_9582;
int l9_9584=l9_9583;
int l9_9585=((l9_9584*((l9_9584*1471343)+101146501))+1559861749)&2147483647;
int l9_9586=l9_9585;
float l9_9587=float(l9_9586)*4.6566129e-10;
float l9_9588=l9_9587;
float l9_9589=l9_9588;
float l9_9590=l9_9589;
if (N155_animPath)
{
if (N155_randSpeed)
{
l9_9576=mod(l9_9576+(N155_timeValuesIn.z*mix(N155_SpeedMinMax.x,N155_SpeedMinMax.y,l9_9590)),1.1);
}
else
{
l9_9576=mod(l9_9576+(N155_timeValuesIn.z*N155_Speed),1.1);
}
}
float l9_9591=(l9_9568*N155_nTurns)*l9_9576;
float l9_9592=mix(l9_9570,l9_9571,l9_9576);
float l9_9593=l9_9592*cos(l9_9591);
float l9_9594=l9_9592*sin(l9_9591);
float l9_9595=l9_9569*l9_9591;
if (N155_alignHeight==1)
{
l9_9595-=(((l9_9569*N155_nTurns)*l9_9568)*0.5);
}
else
{
if (N155_alignHeight==2)
{
l9_9595-=((l9_9569*N155_nTurns)*l9_9568);
}
}
float3 l9_9596=normalize(float3(-sin(l9_9591),cos(l9_9591),l9_9569/l9_9568));
float3 l9_9597=normalize(cross(l9_9596,float3(0.0,0.0,1.0)));
float3 l9_9598=cross(l9_9596,l9_9597);
float l9_9599=l9_9576;
float l9_9600=0.0;
float l9_9601=(*sc_set0.UserUniforms).Tweak_N157_curveData.x;
float l9_9602=(*sc_set0.UserUniforms).Tweak_N157_curveData.y;
float l9_9603=(*sc_set0.UserUniforms).Tweak_N157_curveData.z;
float l9_9604=(l9_9599-l9_9602)/(l9_9603-l9_9602);
float2 l9_9605=float2(l9_9604,l9_9601);
l9_9605=fast::clamp(l9_9605,float2(0.0),float2(1.0));
int l9_9606;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_9607=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_9607=0;
}
else
{
l9_9607=gl_InstanceIndex%2;
}
int l9_9608=l9_9607;
l9_9606=1-l9_9608;
}
else
{
int l9_9609=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_9609=0;
}
else
{
l9_9609=gl_InstanceIndex%2;
}
int l9_9610=l9_9609;
l9_9606=l9_9610;
}
int l9_9611=l9_9606;
int l9_9612=sc_CurveAtlasLayout_tmp;
int l9_9613=l9_9611;
float2 l9_9614=l9_9605;
bool l9_9615=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_9616=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_9617=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_9618=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_9619=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_9620=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_9621=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_9622=0.0;
bool l9_9623=l9_9620&&(!l9_9618);
float l9_9624=1.0;
float l9_9625=l9_9614.x;
int l9_9626=l9_9617.x;
if (l9_9626==1)
{
l9_9625=fract(l9_9625);
}
else
{
if (l9_9626==2)
{
float l9_9627=fract(l9_9625);
float l9_9628=l9_9625-l9_9627;
float l9_9629=step(0.25,fract(l9_9628*0.5));
l9_9625=mix(l9_9627,1.0-l9_9627,fast::clamp(l9_9629,0.0,1.0));
}
}
l9_9614.x=l9_9625;
float l9_9630=l9_9614.y;
int l9_9631=l9_9617.y;
if (l9_9631==1)
{
l9_9630=fract(l9_9630);
}
else
{
if (l9_9631==2)
{
float l9_9632=fract(l9_9630);
float l9_9633=l9_9630-l9_9632;
float l9_9634=step(0.25,fract(l9_9633*0.5));
l9_9630=mix(l9_9632,1.0-l9_9632,fast::clamp(l9_9634,0.0,1.0));
}
}
l9_9614.y=l9_9630;
if (l9_9618)
{
bool l9_9635=l9_9620;
bool l9_9636;
if (l9_9635)
{
l9_9636=l9_9617.x==3;
}
else
{
l9_9636=l9_9635;
}
float l9_9637=l9_9614.x;
float l9_9638=l9_9619.x;
float l9_9639=l9_9619.z;
bool l9_9640=l9_9636;
float l9_9641=l9_9624;
float l9_9642=fast::clamp(l9_9637,l9_9638,l9_9639);
float l9_9643=step(abs(l9_9637-l9_9642),9.9999997e-06);
l9_9641*=(l9_9643+((1.0-float(l9_9640))*(1.0-l9_9643)));
l9_9637=l9_9642;
l9_9614.x=l9_9637;
l9_9624=l9_9641;
bool l9_9644=l9_9620;
bool l9_9645;
if (l9_9644)
{
l9_9645=l9_9617.y==3;
}
else
{
l9_9645=l9_9644;
}
float l9_9646=l9_9614.y;
float l9_9647=l9_9619.y;
float l9_9648=l9_9619.w;
bool l9_9649=l9_9645;
float l9_9650=l9_9624;
float l9_9651=fast::clamp(l9_9646,l9_9647,l9_9648);
float l9_9652=step(abs(l9_9646-l9_9651),9.9999997e-06);
l9_9650*=(l9_9652+((1.0-float(l9_9649))*(1.0-l9_9652)));
l9_9646=l9_9651;
l9_9614.y=l9_9646;
l9_9624=l9_9650;
}
float2 l9_9653=l9_9614;
bool l9_9654=l9_9615;
float3x3 l9_9655=l9_9616;
if (l9_9654)
{
l9_9653=float2((l9_9655*float3(l9_9653,1.0)).xy);
}
float2 l9_9656=l9_9653;
l9_9614=l9_9656;
float l9_9657=l9_9614.x;
int l9_9658=l9_9617.x;
bool l9_9659=l9_9623;
float l9_9660=l9_9624;
if ((l9_9658==0)||(l9_9658==3))
{
float l9_9661=l9_9657;
float l9_9662=0.0;
float l9_9663=1.0;
bool l9_9664=l9_9659;
float l9_9665=l9_9660;
float l9_9666=fast::clamp(l9_9661,l9_9662,l9_9663);
float l9_9667=step(abs(l9_9661-l9_9666),9.9999997e-06);
l9_9665*=(l9_9667+((1.0-float(l9_9664))*(1.0-l9_9667)));
l9_9661=l9_9666;
l9_9657=l9_9661;
l9_9660=l9_9665;
}
l9_9614.x=l9_9657;
l9_9624=l9_9660;
float l9_9668=l9_9614.y;
int l9_9669=l9_9617.y;
bool l9_9670=l9_9623;
float l9_9671=l9_9624;
if ((l9_9669==0)||(l9_9669==3))
{
float l9_9672=l9_9668;
float l9_9673=0.0;
float l9_9674=1.0;
bool l9_9675=l9_9670;
float l9_9676=l9_9671;
float l9_9677=fast::clamp(l9_9672,l9_9673,l9_9674);
float l9_9678=step(abs(l9_9672-l9_9677),9.9999997e-06);
l9_9676*=(l9_9678+((1.0-float(l9_9675))*(1.0-l9_9678)));
l9_9672=l9_9677;
l9_9668=l9_9672;
l9_9671=l9_9676;
}
l9_9614.y=l9_9668;
l9_9624=l9_9671;
float2 l9_9679=l9_9614;
int l9_9680=l9_9612;
int l9_9681=l9_9613;
float l9_9682=l9_9622;
float2 l9_9683=l9_9679;
int l9_9684=l9_9680;
int l9_9685=l9_9681;
float3 l9_9686=float3(0.0);
if (l9_9684==0)
{
l9_9686=float3(l9_9683,0.0);
}
else
{
if (l9_9684==1)
{
l9_9686=float3(l9_9683.x,(l9_9683.y*0.5)+(0.5-(float(l9_9685)*0.5)),0.0);
}
else
{
l9_9686=float3(l9_9683,float(l9_9685));
}
}
float3 l9_9687=l9_9686;
float3 l9_9688=l9_9687;
float4 l9_9689=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_9688.xy,level(l9_9682));
float4 l9_9690=l9_9689;
if (l9_9620)
{
l9_9690=mix(l9_9621,l9_9690,float4(l9_9624));
}
float4 l9_9691=l9_9690;
l9_9600=l9_9691.x;
float l9_9692=l9_9600;
float l9_9693=l9_9692;
float l9_9694;
if (N155_curvThickEnable)
{
l9_9694=l9_9572*l9_9693;
}
else
{
l9_9694=l9_9572;
}
float l9_9695=l9_9694;
float3 l9_9696=mix(float3(l9_9593,l9_9594,l9_9595)+(((l9_9597*cos(l9_9579))+(l9_9598*sin(l9_9579)))*l9_9695),float3(l9_9593,l9_9594,l9_9595),float3(l9_9590*N155_VolumeFill));
float3 l9_9697;
if (l9_9576>1.0)
{
l9_9697=l9_9696/float3(0.0);
}
else
{
l9_9697=l9_9696;
}
l9_9696=l9_9697;
if (N155_OrientationAxis==0)
{
l9_9696=l9_9696.zxy;
l9_9596=l9_9596.zxy;
l9_9597=l9_9597.zxy;
l9_9598=l9_9598.zxy;
}
else
{
if (N155_OrientationAxis==1)
{
l9_9696=l9_9696.xzy;
l9_9596=l9_9596.xzy;
l9_9597=l9_9597.xzy;
l9_9598=l9_9598.xzy;
}
}
tempGlobals.N155_helixDirection=l9_9596;
N155_Result=l9_9696;
l9_9566=N155_Result;
l9_9550=l9_9566;
l9_9145=l9_9550;
l9_9150=l9_9145;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==6)
{
float l9_9698=0.0;
float l9_9699=(*sc_set0.UserUniforms).Tweak_N298;
l9_9698=l9_9699;
float3 l9_9700=float3(0.0);
float3 l9_9701=(*sc_set0.UserUniforms).Tweak_N330;
l9_9700=l9_9701;
float l9_9702=0.0;
float l9_9703=float((*sc_set0.UserUniforms).Tweak_N308!=0);
l9_9702=l9_9703;
float l9_9704=0.0;
float l9_9705=(*sc_set0.UserUniforms).timeGlobal;
l9_9704=l9_9705;
float l9_9706=0.0;
float l9_9707=(*sc_set0.UserUniforms).externalTimeInput;
l9_9706=l9_9707;
float l9_9708=0.0;
float l9_9709=(*sc_set0.UserUniforms).externalSeed;
l9_9708=l9_9709;
float l9_9710=0.0;
float l9_9711=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_9710=l9_9711;
float2 l9_9712=float2(0.0);
float2 l9_9713=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_9712=l9_9713;
float l9_9714=0.0;
float l9_9715=(*sc_set0.UserUniforms).spawnDuration;
l9_9714=l9_9715;
float l9_9716=0.0;
float l9_9717;
if ((int(TRAILS_tmp)!=0))
{
l9_9717=1.001;
}
else
{
l9_9717=0.001;
}
l9_9717-=0.001;
l9_9716=l9_9717;
float l9_9718=0.0;
float l9_9719=(*sc_set0.UserUniforms).trailLength;
l9_9718=l9_9719;
float4 l9_9720=float4(0.0);
l9_9720=l9_9149.VertexColor;
float l9_9721=0.0;
l9_9721=l9_9720.x;
float l9_9722=0.0;
float l9_9723=l9_9716;
bool l9_9724=(l9_9723*1.0)!=0.0;
bool l9_9725;
if (l9_9724)
{
l9_9725=(l9_9721*1.0)!=0.0;
}
else
{
l9_9725=l9_9724;
}
l9_9722=float(l9_9725);
float4 l9_9726=float4(0.0);
float l9_9727=l9_9704;
float l9_9728=l9_9706;
float l9_9729=l9_9708;
float l9_9730=l9_9710;
float2 l9_9731=l9_9712;
float l9_9732=l9_9714;
float l9_9733=l9_9718;
float l9_9734=l9_9722;
ssGlobals l9_9735=l9_9149;
tempGlobals=l9_9735;
float4 l9_9736=float4(0.0);
N181_timeGlobal=l9_9727;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_9728;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_9729;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_9730;
N181_lifeTimeMinMax=l9_9731;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_9732;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_9733;
N181_isTrailCondition=l9_9734!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_9737=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_9738=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_9737=length(float4(1.0)*l9_9738);
}
N181_globalSeed=N181_externalSeed+l9_9737;
int l9_9739=0;
l9_9739=ssInstanceID;
int l9_9740=l9_9739;
float l9_9741=float(l9_9740);
int l9_9742=int(l9_9741);
int l9_9743=l9_9742^(l9_9742*15299);
int l9_9744=l9_9743;
int l9_9745=l9_9744;
int l9_9746=((l9_9745*((l9_9745*1471343)+101146501))+1559861749)&2147483647;
int l9_9747=l9_9746;
int l9_9748=l9_9744*1399;
int l9_9749=((l9_9748*((l9_9748*1471343)+101146501))+1559861749)&2147483647;
int l9_9750=l9_9749;
int l9_9751=l9_9744*7177;
int l9_9752=((l9_9751*((l9_9751*1471343)+101146501))+1559861749)&2147483647;
int l9_9753=l9_9752;
int l9_9754=l9_9747;
float l9_9755=float(l9_9754)*4.6566129e-10;
int l9_9756=l9_9750;
float l9_9757=float(l9_9756)*4.6566129e-10;
int l9_9758=l9_9753;
float l9_9759=float(l9_9758)*4.6566129e-10;
float3 l9_9760=float3(l9_9755,l9_9757,l9_9759);
float3 l9_9761=l9_9760;
N181_particleSeed=l9_9761;
float l9_9762=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_9763;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_9763=N181_lifeTimeMinMax;
}
else
{
l9_9763=float2(N181_lifeTimeConstant);
}
float2 l9_9764=l9_9763;
float l9_9765=fast::max(l9_9764.x,0.0099999998);
float l9_9766=fast::max(l9_9764.y,0.0099999998);
float l9_9767=tempGlobals.gTimeElapsed;
float l9_9768=l9_9767;
if (N181_ENABLE_EXTERNALTIME)
{
l9_9768=N181_externalTime;
}
float l9_9769=l9_9768;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_9769=N181_timeGlobal*l9_9768;
}
else
{
float l9_9770=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_9770=N181_trailLength;
}
}
float l9_9771=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_9772=0.0;
float l9_9773;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_9773=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_9773=0.0;
}
l9_9772=l9_9773;
float l9_9774=l9_9772;
int l9_9775=0;
l9_9775=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_9776=l9_9775;
l9_9771=fast::max(l9_9774*(1.0-(1.0/float(l9_9776))),0.0);
}
else
{
l9_9771=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_9777=fract(((l9_9768*N181_timeGlobal)*(1.0/(l9_9764.y+l9_9770)))+l9_9771);
l9_9769=l9_9777*(l9_9764.y+l9_9770);
}
float l9_9778=mix(l9_9769/l9_9765,l9_9769/l9_9766,l9_9762);
float l9_9779=fast::clamp(l9_9778,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_9769,l9_9779);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_9780=tempGlobals.Surface_UVCoord0;
l9_9769-=(l9_9780.y*N181_trailLength);
l9_9778=mix(l9_9769/l9_9765,l9_9769/l9_9766,l9_9762);
l9_9779=fast::clamp(l9_9778,0.0,1.0);
}
}
float l9_9781=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_9768-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_9781=1.0;
}
}
}
float l9_9782=l9_9778+l9_9781;
N181_particleAlive=1.0;
if ((l9_9782>0.99989998)||(l9_9769<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_9768*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_9764,l9_9769,l9_9779);
l9_9736=N181_timeValues;
l9_9726=l9_9736;
float l9_9783=0.0;
float l9_9784=(*sc_set0.UserUniforms).Tweak_N294;
l9_9783=l9_9784;
float l9_9785=0.0;
float l9_9786=float((*sc_set0.UserUniforms).Tweak_N339!=0);
l9_9785=l9_9786;
float2 l9_9787=float2(0.0);
float2 l9_9788=(*sc_set0.UserUniforms).Tweak_N342;
l9_9787=l9_9788;
float l9_9789=0.0;
float l9_9790=(*sc_set0.UserUniforms).Tweak_N301;
l9_9789=l9_9790;
float l9_9791=0.0;
float l9_9792=float((*sc_set0.UserUniforms).Tweak_N274!=0);
l9_9791=l9_9792;
float l9_9793=0.0;
float l9_9794=(*sc_set0.UserUniforms).Tweak_N302;
l9_9793=l9_9794;
float l9_9795=0.0;
float l9_9796=(*sc_set0.UserUniforms).Tweak_N318;
l9_9795=l9_9796;
float3 l9_9797=float3(0.0);
float l9_9798=l9_9698;
float3 l9_9799=l9_9700;
float l9_9800=l9_9702;
float4 l9_9801=l9_9726;
float l9_9802=l9_9783;
float l9_9803=l9_9785;
float2 l9_9804=l9_9787;
float l9_9805=l9_9789;
float l9_9806=l9_9791;
float l9_9807=l9_9793;
float l9_9808=l9_9795;
ssGlobals l9_9809=l9_9149;
tempGlobals=l9_9809;
float3 l9_9810=float3(0.0);
N319_Scale=l9_9798;
N319_scaleXYZ=l9_9799;
N319_animPath=l9_9800!=0.0;
N319_timeValuesIn=l9_9801;
N319_Speed=l9_9802;
N319_randSpeed=l9_9803!=0.0;
N319_SpeedMinMax=l9_9804;
N319_thicknessRad=l9_9805;
N319_curvThickEnable=l9_9806!=0.0;
N319_VolumeFill=l9_9807;
N319_res=l9_9808;
float3 l9_9811=float3(0.0);
float3 l9_9812=float3(0.0);
float3 l9_9813=float3(0.0);
float3 l9_9814=float3(0.0);
float l9_9815=0.0;
float l9_9816;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_9816=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_9816=0.0;
}
l9_9815=l9_9816;
float l9_9817=l9_9815;
float l9_9818=l9_9817;
float l9_9819=l9_9818;
int l9_9820=0;
l9_9820=ssInstanceID;
int l9_9821=l9_9820;
float l9_9822=float(l9_9821);
float l9_9823=l9_9822;
int l9_9824=int(l9_9823);
int l9_9825=l9_9824^(l9_9824*15299);
int l9_9826=l9_9825;
int l9_9827=l9_9826;
int l9_9828=((l9_9827*((l9_9827*1471343)+101146501))+1559861749)&2147483647;
int l9_9829=l9_9828;
float l9_9830=float(l9_9829)*4.6566129e-10;
float l9_9831=l9_9830;
float l9_9832=l9_9831;
float l9_9833=l9_9832;
if (N319_animPath)
{
if (N319_randSpeed)
{
l9_9819=mod(l9_9818+(N319_timeValuesIn.z*mix(N319_SpeedMinMax.x,N319_SpeedMinMax.y,l9_9833)),1.1);
}
else
{
l9_9819=mod(l9_9818+(N319_timeValuesIn.z*N319_Speed),1.1);
}
}
float l9_9834=l9_9819;
float3 l9_9835=l9_9811;
float3 l9_9836=l9_9812;
float3 l9_9837=l9_9813;
float3 l9_9838=l9_9814;
int l9_9839=5;
float l9_9840=1.0/float(l9_9839);
int l9_9841;
int l9_9842;
int l9_9843;
int l9_9844;
int l9_9845;
int l9_9846;
int l9_9847=0;
for (int snapLoopIndex=0; snapLoopIndex==0; snapLoopIndex+=0)
{
if (l9_9847<l9_9839)
{
float l9_9848=float(l9_9847)*l9_9840;
float l9_9849=0.0;
float l9_9850=(*sc_set0.UserUniforms).Tweak_N293_curveData.x;
float l9_9851=(*sc_set0.UserUniforms).Tweak_N293_curveData.y;
float l9_9852=(*sc_set0.UserUniforms).Tweak_N293_curveData.z;
float l9_9853=(l9_9848-l9_9851)/(l9_9852-l9_9851);
float2 l9_9854=float2(l9_9853,l9_9850);
l9_9854=fast::clamp(l9_9854,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_9855=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_9855=0;
}
else
{
l9_9855=gl_InstanceIndex%2;
}
int l9_9856=l9_9855;
l9_9841=1-l9_9856;
}
else
{
int l9_9857=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_9857=0;
}
else
{
l9_9857=gl_InstanceIndex%2;
}
int l9_9858=l9_9857;
l9_9841=l9_9858;
}
int l9_9859=l9_9841;
int l9_9860=sc_CurveAtlasLayout_tmp;
int l9_9861=l9_9859;
float2 l9_9862=l9_9854;
bool l9_9863=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_9864=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_9865=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_9866=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_9867=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_9868=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_9869=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_9870=0.0;
bool l9_9871=l9_9868&&(!l9_9866);
float l9_9872=1.0;
float l9_9873=l9_9862.x;
int l9_9874=l9_9865.x;
if (l9_9874==1)
{
l9_9873=fract(l9_9873);
}
else
{
if (l9_9874==2)
{
float l9_9875=fract(l9_9873);
float l9_9876=l9_9873-l9_9875;
float l9_9877=step(0.25,fract(l9_9876*0.5));
l9_9873=mix(l9_9875,1.0-l9_9875,fast::clamp(l9_9877,0.0,1.0));
}
}
l9_9862.x=l9_9873;
float l9_9878=l9_9862.y;
int l9_9879=l9_9865.y;
if (l9_9879==1)
{
l9_9878=fract(l9_9878);
}
else
{
if (l9_9879==2)
{
float l9_9880=fract(l9_9878);
float l9_9881=l9_9878-l9_9880;
float l9_9882=step(0.25,fract(l9_9881*0.5));
l9_9878=mix(l9_9880,1.0-l9_9880,fast::clamp(l9_9882,0.0,1.0));
}
}
l9_9862.y=l9_9878;
if (l9_9866)
{
bool l9_9883=l9_9868;
bool l9_9884;
if (l9_9883)
{
l9_9884=l9_9865.x==3;
}
else
{
l9_9884=l9_9883;
}
float l9_9885=l9_9862.x;
float l9_9886=l9_9867.x;
float l9_9887=l9_9867.z;
bool l9_9888=l9_9884;
float l9_9889=l9_9872;
float l9_9890=fast::clamp(l9_9885,l9_9886,l9_9887);
float l9_9891=step(abs(l9_9885-l9_9890),9.9999997e-06);
l9_9889*=(l9_9891+((1.0-float(l9_9888))*(1.0-l9_9891)));
l9_9885=l9_9890;
l9_9862.x=l9_9885;
l9_9872=l9_9889;
bool l9_9892=l9_9868;
bool l9_9893;
if (l9_9892)
{
l9_9893=l9_9865.y==3;
}
else
{
l9_9893=l9_9892;
}
float l9_9894=l9_9862.y;
float l9_9895=l9_9867.y;
float l9_9896=l9_9867.w;
bool l9_9897=l9_9893;
float l9_9898=l9_9872;
float l9_9899=fast::clamp(l9_9894,l9_9895,l9_9896);
float l9_9900=step(abs(l9_9894-l9_9899),9.9999997e-06);
l9_9898*=(l9_9900+((1.0-float(l9_9897))*(1.0-l9_9900)));
l9_9894=l9_9899;
l9_9862.y=l9_9894;
l9_9872=l9_9898;
}
float2 l9_9901=l9_9862;
bool l9_9902=l9_9863;
float3x3 l9_9903=l9_9864;
if (l9_9902)
{
l9_9901=float2((l9_9903*float3(l9_9901,1.0)).xy);
}
float2 l9_9904=l9_9901;
l9_9862=l9_9904;
float l9_9905=l9_9862.x;
int l9_9906=l9_9865.x;
bool l9_9907=l9_9871;
float l9_9908=l9_9872;
if ((l9_9906==0)||(l9_9906==3))
{
float l9_9909=l9_9905;
float l9_9910=0.0;
float l9_9911=1.0;
bool l9_9912=l9_9907;
float l9_9913=l9_9908;
float l9_9914=fast::clamp(l9_9909,l9_9910,l9_9911);
float l9_9915=step(abs(l9_9909-l9_9914),9.9999997e-06);
l9_9913*=(l9_9915+((1.0-float(l9_9912))*(1.0-l9_9915)));
l9_9909=l9_9914;
l9_9905=l9_9909;
l9_9908=l9_9913;
}
l9_9862.x=l9_9905;
l9_9872=l9_9908;
float l9_9916=l9_9862.y;
int l9_9917=l9_9865.y;
bool l9_9918=l9_9871;
float l9_9919=l9_9872;
if ((l9_9917==0)||(l9_9917==3))
{
float l9_9920=l9_9916;
float l9_9921=0.0;
float l9_9922=1.0;
bool l9_9923=l9_9918;
float l9_9924=l9_9919;
float l9_9925=fast::clamp(l9_9920,l9_9921,l9_9922);
float l9_9926=step(abs(l9_9920-l9_9925),9.9999997e-06);
l9_9924*=(l9_9926+((1.0-float(l9_9923))*(1.0-l9_9926)));
l9_9920=l9_9925;
l9_9916=l9_9920;
l9_9919=l9_9924;
}
l9_9862.y=l9_9916;
l9_9872=l9_9919;
float2 l9_9927=l9_9862;
int l9_9928=l9_9860;
int l9_9929=l9_9861;
float l9_9930=l9_9870;
float2 l9_9931=l9_9927;
int l9_9932=l9_9928;
int l9_9933=l9_9929;
float3 l9_9934=float3(0.0);
if (l9_9932==0)
{
l9_9934=float3(l9_9931,0.0);
}
else
{
if (l9_9932==1)
{
l9_9934=float3(l9_9931.x,(l9_9931.y*0.5)+(0.5-(float(l9_9933)*0.5)),0.0);
}
else
{
l9_9934=float3(l9_9931,float(l9_9933));
}
}
float3 l9_9935=l9_9934;
float3 l9_9936=l9_9935;
float4 l9_9937=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_9936.xy,level(l9_9930));
float4 l9_9938=l9_9937;
if (l9_9868)
{
l9_9938=mix(l9_9869,l9_9938,float4(l9_9872));
}
float4 l9_9939=l9_9938;
l9_9849=l9_9939.x;
float l9_9940=l9_9849;
float l9_9941=l9_9940;
float l9_9942=float(l9_9847)*l9_9840;
float l9_9943=0.0;
float l9_9944=(*sc_set0.UserUniforms).Tweak_N305_curveData.x;
float l9_9945=(*sc_set0.UserUniforms).Tweak_N305_curveData.y;
float l9_9946=(*sc_set0.UserUniforms).Tweak_N305_curveData.z;
float l9_9947=(l9_9942-l9_9945)/(l9_9946-l9_9945);
float2 l9_9948=float2(l9_9947,l9_9944);
l9_9948=fast::clamp(l9_9948,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_9949=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_9949=0;
}
else
{
l9_9949=gl_InstanceIndex%2;
}
int l9_9950=l9_9949;
l9_9842=1-l9_9950;
}
else
{
int l9_9951=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_9951=0;
}
else
{
l9_9951=gl_InstanceIndex%2;
}
int l9_9952=l9_9951;
l9_9842=l9_9952;
}
int l9_9953=l9_9842;
int l9_9954=sc_CurveAtlasLayout_tmp;
int l9_9955=l9_9953;
float2 l9_9956=l9_9948;
bool l9_9957=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_9958=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_9959=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_9960=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_9961=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_9962=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_9963=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_9964=0.0;
bool l9_9965=l9_9962&&(!l9_9960);
float l9_9966=1.0;
float l9_9967=l9_9956.x;
int l9_9968=l9_9959.x;
if (l9_9968==1)
{
l9_9967=fract(l9_9967);
}
else
{
if (l9_9968==2)
{
float l9_9969=fract(l9_9967);
float l9_9970=l9_9967-l9_9969;
float l9_9971=step(0.25,fract(l9_9970*0.5));
l9_9967=mix(l9_9969,1.0-l9_9969,fast::clamp(l9_9971,0.0,1.0));
}
}
l9_9956.x=l9_9967;
float l9_9972=l9_9956.y;
int l9_9973=l9_9959.y;
if (l9_9973==1)
{
l9_9972=fract(l9_9972);
}
else
{
if (l9_9973==2)
{
float l9_9974=fract(l9_9972);
float l9_9975=l9_9972-l9_9974;
float l9_9976=step(0.25,fract(l9_9975*0.5));
l9_9972=mix(l9_9974,1.0-l9_9974,fast::clamp(l9_9976,0.0,1.0));
}
}
l9_9956.y=l9_9972;
if (l9_9960)
{
bool l9_9977=l9_9962;
bool l9_9978;
if (l9_9977)
{
l9_9978=l9_9959.x==3;
}
else
{
l9_9978=l9_9977;
}
float l9_9979=l9_9956.x;
float l9_9980=l9_9961.x;
float l9_9981=l9_9961.z;
bool l9_9982=l9_9978;
float l9_9983=l9_9966;
float l9_9984=fast::clamp(l9_9979,l9_9980,l9_9981);
float l9_9985=step(abs(l9_9979-l9_9984),9.9999997e-06);
l9_9983*=(l9_9985+((1.0-float(l9_9982))*(1.0-l9_9985)));
l9_9979=l9_9984;
l9_9956.x=l9_9979;
l9_9966=l9_9983;
bool l9_9986=l9_9962;
bool l9_9987;
if (l9_9986)
{
l9_9987=l9_9959.y==3;
}
else
{
l9_9987=l9_9986;
}
float l9_9988=l9_9956.y;
float l9_9989=l9_9961.y;
float l9_9990=l9_9961.w;
bool l9_9991=l9_9987;
float l9_9992=l9_9966;
float l9_9993=fast::clamp(l9_9988,l9_9989,l9_9990);
float l9_9994=step(abs(l9_9988-l9_9993),9.9999997e-06);
l9_9992*=(l9_9994+((1.0-float(l9_9991))*(1.0-l9_9994)));
l9_9988=l9_9993;
l9_9956.y=l9_9988;
l9_9966=l9_9992;
}
float2 l9_9995=l9_9956;
bool l9_9996=l9_9957;
float3x3 l9_9997=l9_9958;
if (l9_9996)
{
l9_9995=float2((l9_9997*float3(l9_9995,1.0)).xy);
}
float2 l9_9998=l9_9995;
l9_9956=l9_9998;
float l9_9999=l9_9956.x;
int l9_10000=l9_9959.x;
bool l9_10001=l9_9965;
float l9_10002=l9_9966;
if ((l9_10000==0)||(l9_10000==3))
{
float l9_10003=l9_9999;
float l9_10004=0.0;
float l9_10005=1.0;
bool l9_10006=l9_10001;
float l9_10007=l9_10002;
float l9_10008=fast::clamp(l9_10003,l9_10004,l9_10005);
float l9_10009=step(abs(l9_10003-l9_10008),9.9999997e-06);
l9_10007*=(l9_10009+((1.0-float(l9_10006))*(1.0-l9_10009)));
l9_10003=l9_10008;
l9_9999=l9_10003;
l9_10002=l9_10007;
}
l9_9956.x=l9_9999;
l9_9966=l9_10002;
float l9_10010=l9_9956.y;
int l9_10011=l9_9959.y;
bool l9_10012=l9_9965;
float l9_10013=l9_9966;
if ((l9_10011==0)||(l9_10011==3))
{
float l9_10014=l9_10010;
float l9_10015=0.0;
float l9_10016=1.0;
bool l9_10017=l9_10012;
float l9_10018=l9_10013;
float l9_10019=fast::clamp(l9_10014,l9_10015,l9_10016);
float l9_10020=step(abs(l9_10014-l9_10019),9.9999997e-06);
l9_10018*=(l9_10020+((1.0-float(l9_10017))*(1.0-l9_10020)));
l9_10014=l9_10019;
l9_10010=l9_10014;
l9_10013=l9_10018;
}
l9_9956.y=l9_10010;
l9_9966=l9_10013;
float2 l9_10021=l9_9956;
int l9_10022=l9_9954;
int l9_10023=l9_9955;
float l9_10024=l9_9964;
float2 l9_10025=l9_10021;
int l9_10026=l9_10022;
int l9_10027=l9_10023;
float3 l9_10028=float3(0.0);
if (l9_10026==0)
{
l9_10028=float3(l9_10025,0.0);
}
else
{
if (l9_10026==1)
{
l9_10028=float3(l9_10025.x,(l9_10025.y*0.5)+(0.5-(float(l9_10027)*0.5)),0.0);
}
else
{
l9_10028=float3(l9_10025,float(l9_10027));
}
}
float3 l9_10029=l9_10028;
float3 l9_10030=l9_10029;
float4 l9_10031=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_10030.xy,level(l9_10024));
float4 l9_10032=l9_10031;
if (l9_9962)
{
l9_10032=mix(l9_9963,l9_10032,float4(l9_9966));
}
float4 l9_10033=l9_10032;
l9_9943=l9_10033.x;
float l9_10034=l9_9943;
float l9_10035=l9_10034;
float l9_10036=float(l9_9847)*l9_9840;
float l9_10037=0.0;
float l9_10038=(*sc_set0.UserUniforms).Tweak_N297_curveData.x;
float l9_10039=(*sc_set0.UserUniforms).Tweak_N297_curveData.y;
float l9_10040=(*sc_set0.UserUniforms).Tweak_N297_curveData.z;
float l9_10041=(l9_10036-l9_10039)/(l9_10040-l9_10039);
float2 l9_10042=float2(l9_10041,l9_10038);
l9_10042=fast::clamp(l9_10042,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_10043=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_10043=0;
}
else
{
l9_10043=gl_InstanceIndex%2;
}
int l9_10044=l9_10043;
l9_9843=1-l9_10044;
}
else
{
int l9_10045=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_10045=0;
}
else
{
l9_10045=gl_InstanceIndex%2;
}
int l9_10046=l9_10045;
l9_9843=l9_10046;
}
int l9_10047=l9_9843;
int l9_10048=sc_CurveAtlasLayout_tmp;
int l9_10049=l9_10047;
float2 l9_10050=l9_10042;
bool l9_10051=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_10052=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_10053=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_10054=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_10055=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_10056=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_10057=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_10058=0.0;
bool l9_10059=l9_10056&&(!l9_10054);
float l9_10060=1.0;
float l9_10061=l9_10050.x;
int l9_10062=l9_10053.x;
if (l9_10062==1)
{
l9_10061=fract(l9_10061);
}
else
{
if (l9_10062==2)
{
float l9_10063=fract(l9_10061);
float l9_10064=l9_10061-l9_10063;
float l9_10065=step(0.25,fract(l9_10064*0.5));
l9_10061=mix(l9_10063,1.0-l9_10063,fast::clamp(l9_10065,0.0,1.0));
}
}
l9_10050.x=l9_10061;
float l9_10066=l9_10050.y;
int l9_10067=l9_10053.y;
if (l9_10067==1)
{
l9_10066=fract(l9_10066);
}
else
{
if (l9_10067==2)
{
float l9_10068=fract(l9_10066);
float l9_10069=l9_10066-l9_10068;
float l9_10070=step(0.25,fract(l9_10069*0.5));
l9_10066=mix(l9_10068,1.0-l9_10068,fast::clamp(l9_10070,0.0,1.0));
}
}
l9_10050.y=l9_10066;
if (l9_10054)
{
bool l9_10071=l9_10056;
bool l9_10072;
if (l9_10071)
{
l9_10072=l9_10053.x==3;
}
else
{
l9_10072=l9_10071;
}
float l9_10073=l9_10050.x;
float l9_10074=l9_10055.x;
float l9_10075=l9_10055.z;
bool l9_10076=l9_10072;
float l9_10077=l9_10060;
float l9_10078=fast::clamp(l9_10073,l9_10074,l9_10075);
float l9_10079=step(abs(l9_10073-l9_10078),9.9999997e-06);
l9_10077*=(l9_10079+((1.0-float(l9_10076))*(1.0-l9_10079)));
l9_10073=l9_10078;
l9_10050.x=l9_10073;
l9_10060=l9_10077;
bool l9_10080=l9_10056;
bool l9_10081;
if (l9_10080)
{
l9_10081=l9_10053.y==3;
}
else
{
l9_10081=l9_10080;
}
float l9_10082=l9_10050.y;
float l9_10083=l9_10055.y;
float l9_10084=l9_10055.w;
bool l9_10085=l9_10081;
float l9_10086=l9_10060;
float l9_10087=fast::clamp(l9_10082,l9_10083,l9_10084);
float l9_10088=step(abs(l9_10082-l9_10087),9.9999997e-06);
l9_10086*=(l9_10088+((1.0-float(l9_10085))*(1.0-l9_10088)));
l9_10082=l9_10087;
l9_10050.y=l9_10082;
l9_10060=l9_10086;
}
float2 l9_10089=l9_10050;
bool l9_10090=l9_10051;
float3x3 l9_10091=l9_10052;
if (l9_10090)
{
l9_10089=float2((l9_10091*float3(l9_10089,1.0)).xy);
}
float2 l9_10092=l9_10089;
l9_10050=l9_10092;
float l9_10093=l9_10050.x;
int l9_10094=l9_10053.x;
bool l9_10095=l9_10059;
float l9_10096=l9_10060;
if ((l9_10094==0)||(l9_10094==3))
{
float l9_10097=l9_10093;
float l9_10098=0.0;
float l9_10099=1.0;
bool l9_10100=l9_10095;
float l9_10101=l9_10096;
float l9_10102=fast::clamp(l9_10097,l9_10098,l9_10099);
float l9_10103=step(abs(l9_10097-l9_10102),9.9999997e-06);
l9_10101*=(l9_10103+((1.0-float(l9_10100))*(1.0-l9_10103)));
l9_10097=l9_10102;
l9_10093=l9_10097;
l9_10096=l9_10101;
}
l9_10050.x=l9_10093;
l9_10060=l9_10096;
float l9_10104=l9_10050.y;
int l9_10105=l9_10053.y;
bool l9_10106=l9_10059;
float l9_10107=l9_10060;
if ((l9_10105==0)||(l9_10105==3))
{
float l9_10108=l9_10104;
float l9_10109=0.0;
float l9_10110=1.0;
bool l9_10111=l9_10106;
float l9_10112=l9_10107;
float l9_10113=fast::clamp(l9_10108,l9_10109,l9_10110);
float l9_10114=step(abs(l9_10108-l9_10113),9.9999997e-06);
l9_10112*=(l9_10114+((1.0-float(l9_10111))*(1.0-l9_10114)));
l9_10108=l9_10113;
l9_10104=l9_10108;
l9_10107=l9_10112;
}
l9_10050.y=l9_10104;
l9_10060=l9_10107;
float2 l9_10115=l9_10050;
int l9_10116=l9_10048;
int l9_10117=l9_10049;
float l9_10118=l9_10058;
float2 l9_10119=l9_10115;
int l9_10120=l9_10116;
int l9_10121=l9_10117;
float3 l9_10122=float3(0.0);
if (l9_10120==0)
{
l9_10122=float3(l9_10119,0.0);
}
else
{
if (l9_10120==1)
{
l9_10122=float3(l9_10119.x,(l9_10119.y*0.5)+(0.5-(float(l9_10121)*0.5)),0.0);
}
else
{
l9_10122=float3(l9_10119,float(l9_10121));
}
}
float3 l9_10123=l9_10122;
float3 l9_10124=l9_10123;
float4 l9_10125=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_10124.xy,level(l9_10118));
float4 l9_10126=l9_10125;
if (l9_10056)
{
l9_10126=mix(l9_10057,l9_10126,float4(l9_10060));
}
float4 l9_10127=l9_10126;
l9_10037=l9_10127.x;
float l9_10128=l9_10037;
float3 l9_10129=float3(l9_9941,l9_10035,l9_10128);
float l9_10130=(float(l9_9847)*l9_9840)+N319_res;
float l9_10131=0.0;
float l9_10132=(*sc_set0.UserUniforms).Tweak_N293_curveData.x;
float l9_10133=(*sc_set0.UserUniforms).Tweak_N293_curveData.y;
float l9_10134=(*sc_set0.UserUniforms).Tweak_N293_curveData.z;
float l9_10135=(l9_10130-l9_10133)/(l9_10134-l9_10133);
float2 l9_10136=float2(l9_10135,l9_10132);
l9_10136=fast::clamp(l9_10136,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_10137=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_10137=0;
}
else
{
l9_10137=gl_InstanceIndex%2;
}
int l9_10138=l9_10137;
l9_9844=1-l9_10138;
}
else
{
int l9_10139=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_10139=0;
}
else
{
l9_10139=gl_InstanceIndex%2;
}
int l9_10140=l9_10139;
l9_9844=l9_10140;
}
int l9_10141=l9_9844;
int l9_10142=sc_CurveAtlasLayout_tmp;
int l9_10143=l9_10141;
float2 l9_10144=l9_10136;
bool l9_10145=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_10146=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_10147=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_10148=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_10149=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_10150=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_10151=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_10152=0.0;
bool l9_10153=l9_10150&&(!l9_10148);
float l9_10154=1.0;
float l9_10155=l9_10144.x;
int l9_10156=l9_10147.x;
if (l9_10156==1)
{
l9_10155=fract(l9_10155);
}
else
{
if (l9_10156==2)
{
float l9_10157=fract(l9_10155);
float l9_10158=l9_10155-l9_10157;
float l9_10159=step(0.25,fract(l9_10158*0.5));
l9_10155=mix(l9_10157,1.0-l9_10157,fast::clamp(l9_10159,0.0,1.0));
}
}
l9_10144.x=l9_10155;
float l9_10160=l9_10144.y;
int l9_10161=l9_10147.y;
if (l9_10161==1)
{
l9_10160=fract(l9_10160);
}
else
{
if (l9_10161==2)
{
float l9_10162=fract(l9_10160);
float l9_10163=l9_10160-l9_10162;
float l9_10164=step(0.25,fract(l9_10163*0.5));
l9_10160=mix(l9_10162,1.0-l9_10162,fast::clamp(l9_10164,0.0,1.0));
}
}
l9_10144.y=l9_10160;
if (l9_10148)
{
bool l9_10165=l9_10150;
bool l9_10166;
if (l9_10165)
{
l9_10166=l9_10147.x==3;
}
else
{
l9_10166=l9_10165;
}
float l9_10167=l9_10144.x;
float l9_10168=l9_10149.x;
float l9_10169=l9_10149.z;
bool l9_10170=l9_10166;
float l9_10171=l9_10154;
float l9_10172=fast::clamp(l9_10167,l9_10168,l9_10169);
float l9_10173=step(abs(l9_10167-l9_10172),9.9999997e-06);
l9_10171*=(l9_10173+((1.0-float(l9_10170))*(1.0-l9_10173)));
l9_10167=l9_10172;
l9_10144.x=l9_10167;
l9_10154=l9_10171;
bool l9_10174=l9_10150;
bool l9_10175;
if (l9_10174)
{
l9_10175=l9_10147.y==3;
}
else
{
l9_10175=l9_10174;
}
float l9_10176=l9_10144.y;
float l9_10177=l9_10149.y;
float l9_10178=l9_10149.w;
bool l9_10179=l9_10175;
float l9_10180=l9_10154;
float l9_10181=fast::clamp(l9_10176,l9_10177,l9_10178);
float l9_10182=step(abs(l9_10176-l9_10181),9.9999997e-06);
l9_10180*=(l9_10182+((1.0-float(l9_10179))*(1.0-l9_10182)));
l9_10176=l9_10181;
l9_10144.y=l9_10176;
l9_10154=l9_10180;
}
float2 l9_10183=l9_10144;
bool l9_10184=l9_10145;
float3x3 l9_10185=l9_10146;
if (l9_10184)
{
l9_10183=float2((l9_10185*float3(l9_10183,1.0)).xy);
}
float2 l9_10186=l9_10183;
l9_10144=l9_10186;
float l9_10187=l9_10144.x;
int l9_10188=l9_10147.x;
bool l9_10189=l9_10153;
float l9_10190=l9_10154;
if ((l9_10188==0)||(l9_10188==3))
{
float l9_10191=l9_10187;
float l9_10192=0.0;
float l9_10193=1.0;
bool l9_10194=l9_10189;
float l9_10195=l9_10190;
float l9_10196=fast::clamp(l9_10191,l9_10192,l9_10193);
float l9_10197=step(abs(l9_10191-l9_10196),9.9999997e-06);
l9_10195*=(l9_10197+((1.0-float(l9_10194))*(1.0-l9_10197)));
l9_10191=l9_10196;
l9_10187=l9_10191;
l9_10190=l9_10195;
}
l9_10144.x=l9_10187;
l9_10154=l9_10190;
float l9_10198=l9_10144.y;
int l9_10199=l9_10147.y;
bool l9_10200=l9_10153;
float l9_10201=l9_10154;
if ((l9_10199==0)||(l9_10199==3))
{
float l9_10202=l9_10198;
float l9_10203=0.0;
float l9_10204=1.0;
bool l9_10205=l9_10200;
float l9_10206=l9_10201;
float l9_10207=fast::clamp(l9_10202,l9_10203,l9_10204);
float l9_10208=step(abs(l9_10202-l9_10207),9.9999997e-06);
l9_10206*=(l9_10208+((1.0-float(l9_10205))*(1.0-l9_10208)));
l9_10202=l9_10207;
l9_10198=l9_10202;
l9_10201=l9_10206;
}
l9_10144.y=l9_10198;
l9_10154=l9_10201;
float2 l9_10209=l9_10144;
int l9_10210=l9_10142;
int l9_10211=l9_10143;
float l9_10212=l9_10152;
float2 l9_10213=l9_10209;
int l9_10214=l9_10210;
int l9_10215=l9_10211;
float3 l9_10216=float3(0.0);
if (l9_10214==0)
{
l9_10216=float3(l9_10213,0.0);
}
else
{
if (l9_10214==1)
{
l9_10216=float3(l9_10213.x,(l9_10213.y*0.5)+(0.5-(float(l9_10215)*0.5)),0.0);
}
else
{
l9_10216=float3(l9_10213,float(l9_10215));
}
}
float3 l9_10217=l9_10216;
float3 l9_10218=l9_10217;
float4 l9_10219=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_10218.xy,level(l9_10212));
float4 l9_10220=l9_10219;
if (l9_10150)
{
l9_10220=mix(l9_10151,l9_10220,float4(l9_10154));
}
float4 l9_10221=l9_10220;
l9_10131=l9_10221.x;
float l9_10222=l9_10131;
float l9_10223=l9_10222;
float l9_10224=(float(l9_9847)*l9_9840)+N319_res;
float l9_10225=0.0;
float l9_10226=(*sc_set0.UserUniforms).Tweak_N305_curveData.x;
float l9_10227=(*sc_set0.UserUniforms).Tweak_N305_curveData.y;
float l9_10228=(*sc_set0.UserUniforms).Tweak_N305_curveData.z;
float l9_10229=(l9_10224-l9_10227)/(l9_10228-l9_10227);
float2 l9_10230=float2(l9_10229,l9_10226);
l9_10230=fast::clamp(l9_10230,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_10231=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_10231=0;
}
else
{
l9_10231=gl_InstanceIndex%2;
}
int l9_10232=l9_10231;
l9_9845=1-l9_10232;
}
else
{
int l9_10233=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_10233=0;
}
else
{
l9_10233=gl_InstanceIndex%2;
}
int l9_10234=l9_10233;
l9_9845=l9_10234;
}
int l9_10235=l9_9845;
int l9_10236=sc_CurveAtlasLayout_tmp;
int l9_10237=l9_10235;
float2 l9_10238=l9_10230;
bool l9_10239=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_10240=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_10241=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_10242=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_10243=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_10244=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_10245=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_10246=0.0;
bool l9_10247=l9_10244&&(!l9_10242);
float l9_10248=1.0;
float l9_10249=l9_10238.x;
int l9_10250=l9_10241.x;
if (l9_10250==1)
{
l9_10249=fract(l9_10249);
}
else
{
if (l9_10250==2)
{
float l9_10251=fract(l9_10249);
float l9_10252=l9_10249-l9_10251;
float l9_10253=step(0.25,fract(l9_10252*0.5));
l9_10249=mix(l9_10251,1.0-l9_10251,fast::clamp(l9_10253,0.0,1.0));
}
}
l9_10238.x=l9_10249;
float l9_10254=l9_10238.y;
int l9_10255=l9_10241.y;
if (l9_10255==1)
{
l9_10254=fract(l9_10254);
}
else
{
if (l9_10255==2)
{
float l9_10256=fract(l9_10254);
float l9_10257=l9_10254-l9_10256;
float l9_10258=step(0.25,fract(l9_10257*0.5));
l9_10254=mix(l9_10256,1.0-l9_10256,fast::clamp(l9_10258,0.0,1.0));
}
}
l9_10238.y=l9_10254;
if (l9_10242)
{
bool l9_10259=l9_10244;
bool l9_10260;
if (l9_10259)
{
l9_10260=l9_10241.x==3;
}
else
{
l9_10260=l9_10259;
}
float l9_10261=l9_10238.x;
float l9_10262=l9_10243.x;
float l9_10263=l9_10243.z;
bool l9_10264=l9_10260;
float l9_10265=l9_10248;
float l9_10266=fast::clamp(l9_10261,l9_10262,l9_10263);
float l9_10267=step(abs(l9_10261-l9_10266),9.9999997e-06);
l9_10265*=(l9_10267+((1.0-float(l9_10264))*(1.0-l9_10267)));
l9_10261=l9_10266;
l9_10238.x=l9_10261;
l9_10248=l9_10265;
bool l9_10268=l9_10244;
bool l9_10269;
if (l9_10268)
{
l9_10269=l9_10241.y==3;
}
else
{
l9_10269=l9_10268;
}
float l9_10270=l9_10238.y;
float l9_10271=l9_10243.y;
float l9_10272=l9_10243.w;
bool l9_10273=l9_10269;
float l9_10274=l9_10248;
float l9_10275=fast::clamp(l9_10270,l9_10271,l9_10272);
float l9_10276=step(abs(l9_10270-l9_10275),9.9999997e-06);
l9_10274*=(l9_10276+((1.0-float(l9_10273))*(1.0-l9_10276)));
l9_10270=l9_10275;
l9_10238.y=l9_10270;
l9_10248=l9_10274;
}
float2 l9_10277=l9_10238;
bool l9_10278=l9_10239;
float3x3 l9_10279=l9_10240;
if (l9_10278)
{
l9_10277=float2((l9_10279*float3(l9_10277,1.0)).xy);
}
float2 l9_10280=l9_10277;
l9_10238=l9_10280;
float l9_10281=l9_10238.x;
int l9_10282=l9_10241.x;
bool l9_10283=l9_10247;
float l9_10284=l9_10248;
if ((l9_10282==0)||(l9_10282==3))
{
float l9_10285=l9_10281;
float l9_10286=0.0;
float l9_10287=1.0;
bool l9_10288=l9_10283;
float l9_10289=l9_10284;
float l9_10290=fast::clamp(l9_10285,l9_10286,l9_10287);
float l9_10291=step(abs(l9_10285-l9_10290),9.9999997e-06);
l9_10289*=(l9_10291+((1.0-float(l9_10288))*(1.0-l9_10291)));
l9_10285=l9_10290;
l9_10281=l9_10285;
l9_10284=l9_10289;
}
l9_10238.x=l9_10281;
l9_10248=l9_10284;
float l9_10292=l9_10238.y;
int l9_10293=l9_10241.y;
bool l9_10294=l9_10247;
float l9_10295=l9_10248;
if ((l9_10293==0)||(l9_10293==3))
{
float l9_10296=l9_10292;
float l9_10297=0.0;
float l9_10298=1.0;
bool l9_10299=l9_10294;
float l9_10300=l9_10295;
float l9_10301=fast::clamp(l9_10296,l9_10297,l9_10298);
float l9_10302=step(abs(l9_10296-l9_10301),9.9999997e-06);
l9_10300*=(l9_10302+((1.0-float(l9_10299))*(1.0-l9_10302)));
l9_10296=l9_10301;
l9_10292=l9_10296;
l9_10295=l9_10300;
}
l9_10238.y=l9_10292;
l9_10248=l9_10295;
float2 l9_10303=l9_10238;
int l9_10304=l9_10236;
int l9_10305=l9_10237;
float l9_10306=l9_10246;
float2 l9_10307=l9_10303;
int l9_10308=l9_10304;
int l9_10309=l9_10305;
float3 l9_10310=float3(0.0);
if (l9_10308==0)
{
l9_10310=float3(l9_10307,0.0);
}
else
{
if (l9_10308==1)
{
l9_10310=float3(l9_10307.x,(l9_10307.y*0.5)+(0.5-(float(l9_10309)*0.5)),0.0);
}
else
{
l9_10310=float3(l9_10307,float(l9_10309));
}
}
float3 l9_10311=l9_10310;
float3 l9_10312=l9_10311;
float4 l9_10313=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_10312.xy,level(l9_10306));
float4 l9_10314=l9_10313;
if (l9_10244)
{
l9_10314=mix(l9_10245,l9_10314,float4(l9_10248));
}
float4 l9_10315=l9_10314;
l9_10225=l9_10315.x;
float l9_10316=l9_10225;
float l9_10317=l9_10316;
float l9_10318=(float(l9_9847)*l9_9840)+N319_res;
float l9_10319=0.0;
float l9_10320=(*sc_set0.UserUniforms).Tweak_N297_curveData.x;
float l9_10321=(*sc_set0.UserUniforms).Tweak_N297_curveData.y;
float l9_10322=(*sc_set0.UserUniforms).Tweak_N297_curveData.z;
float l9_10323=(l9_10318-l9_10321)/(l9_10322-l9_10321);
float2 l9_10324=float2(l9_10323,l9_10320);
l9_10324=fast::clamp(l9_10324,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_10325=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_10325=0;
}
else
{
l9_10325=gl_InstanceIndex%2;
}
int l9_10326=l9_10325;
l9_9846=1-l9_10326;
}
else
{
int l9_10327=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_10327=0;
}
else
{
l9_10327=gl_InstanceIndex%2;
}
int l9_10328=l9_10327;
l9_9846=l9_10328;
}
int l9_10329=l9_9846;
int l9_10330=sc_CurveAtlasLayout_tmp;
int l9_10331=l9_10329;
float2 l9_10332=l9_10324;
bool l9_10333=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_10334=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_10335=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_10336=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_10337=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_10338=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_10339=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_10340=0.0;
bool l9_10341=l9_10338&&(!l9_10336);
float l9_10342=1.0;
float l9_10343=l9_10332.x;
int l9_10344=l9_10335.x;
if (l9_10344==1)
{
l9_10343=fract(l9_10343);
}
else
{
if (l9_10344==2)
{
float l9_10345=fract(l9_10343);
float l9_10346=l9_10343-l9_10345;
float l9_10347=step(0.25,fract(l9_10346*0.5));
l9_10343=mix(l9_10345,1.0-l9_10345,fast::clamp(l9_10347,0.0,1.0));
}
}
l9_10332.x=l9_10343;
float l9_10348=l9_10332.y;
int l9_10349=l9_10335.y;
if (l9_10349==1)
{
l9_10348=fract(l9_10348);
}
else
{
if (l9_10349==2)
{
float l9_10350=fract(l9_10348);
float l9_10351=l9_10348-l9_10350;
float l9_10352=step(0.25,fract(l9_10351*0.5));
l9_10348=mix(l9_10350,1.0-l9_10350,fast::clamp(l9_10352,0.0,1.0));
}
}
l9_10332.y=l9_10348;
if (l9_10336)
{
bool l9_10353=l9_10338;
bool l9_10354;
if (l9_10353)
{
l9_10354=l9_10335.x==3;
}
else
{
l9_10354=l9_10353;
}
float l9_10355=l9_10332.x;
float l9_10356=l9_10337.x;
float l9_10357=l9_10337.z;
bool l9_10358=l9_10354;
float l9_10359=l9_10342;
float l9_10360=fast::clamp(l9_10355,l9_10356,l9_10357);
float l9_10361=step(abs(l9_10355-l9_10360),9.9999997e-06);
l9_10359*=(l9_10361+((1.0-float(l9_10358))*(1.0-l9_10361)));
l9_10355=l9_10360;
l9_10332.x=l9_10355;
l9_10342=l9_10359;
bool l9_10362=l9_10338;
bool l9_10363;
if (l9_10362)
{
l9_10363=l9_10335.y==3;
}
else
{
l9_10363=l9_10362;
}
float l9_10364=l9_10332.y;
float l9_10365=l9_10337.y;
float l9_10366=l9_10337.w;
bool l9_10367=l9_10363;
float l9_10368=l9_10342;
float l9_10369=fast::clamp(l9_10364,l9_10365,l9_10366);
float l9_10370=step(abs(l9_10364-l9_10369),9.9999997e-06);
l9_10368*=(l9_10370+((1.0-float(l9_10367))*(1.0-l9_10370)));
l9_10364=l9_10369;
l9_10332.y=l9_10364;
l9_10342=l9_10368;
}
float2 l9_10371=l9_10332;
bool l9_10372=l9_10333;
float3x3 l9_10373=l9_10334;
if (l9_10372)
{
l9_10371=float2((l9_10373*float3(l9_10371,1.0)).xy);
}
float2 l9_10374=l9_10371;
l9_10332=l9_10374;
float l9_10375=l9_10332.x;
int l9_10376=l9_10335.x;
bool l9_10377=l9_10341;
float l9_10378=l9_10342;
if ((l9_10376==0)||(l9_10376==3))
{
float l9_10379=l9_10375;
float l9_10380=0.0;
float l9_10381=1.0;
bool l9_10382=l9_10377;
float l9_10383=l9_10378;
float l9_10384=fast::clamp(l9_10379,l9_10380,l9_10381);
float l9_10385=step(abs(l9_10379-l9_10384),9.9999997e-06);
l9_10383*=(l9_10385+((1.0-float(l9_10382))*(1.0-l9_10385)));
l9_10379=l9_10384;
l9_10375=l9_10379;
l9_10378=l9_10383;
}
l9_10332.x=l9_10375;
l9_10342=l9_10378;
float l9_10386=l9_10332.y;
int l9_10387=l9_10335.y;
bool l9_10388=l9_10341;
float l9_10389=l9_10342;
if ((l9_10387==0)||(l9_10387==3))
{
float l9_10390=l9_10386;
float l9_10391=0.0;
float l9_10392=1.0;
bool l9_10393=l9_10388;
float l9_10394=l9_10389;
float l9_10395=fast::clamp(l9_10390,l9_10391,l9_10392);
float l9_10396=step(abs(l9_10390-l9_10395),9.9999997e-06);
l9_10394*=(l9_10396+((1.0-float(l9_10393))*(1.0-l9_10396)));
l9_10390=l9_10395;
l9_10386=l9_10390;
l9_10389=l9_10394;
}
l9_10332.y=l9_10386;
l9_10342=l9_10389;
float2 l9_10397=l9_10332;
int l9_10398=l9_10330;
int l9_10399=l9_10331;
float l9_10400=l9_10340;
float2 l9_10401=l9_10397;
int l9_10402=l9_10398;
int l9_10403=l9_10399;
float3 l9_10404=float3(0.0);
if (l9_10402==0)
{
l9_10404=float3(l9_10401,0.0);
}
else
{
if (l9_10402==1)
{
l9_10404=float3(l9_10401.x,(l9_10401.y*0.5)+(0.5-(float(l9_10403)*0.5)),0.0);
}
else
{
l9_10404=float3(l9_10401,float(l9_10403));
}
}
float3 l9_10405=l9_10404;
float3 l9_10406=l9_10405;
float4 l9_10407=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_10406.xy,level(l9_10400));
float4 l9_10408=l9_10407;
if (l9_10338)
{
l9_10408=mix(l9_10339,l9_10408,float4(l9_10342));
}
float4 l9_10409=l9_10408;
l9_10319=l9_10409.x;
float l9_10410=l9_10319;
float3 l9_10411=float3(l9_10223,l9_10317,l9_10410);
l9_9835+=normalize(l9_10411-l9_10129);
l9_9847++;
continue;
}
else
{
break;
}
}
l9_9835=normalize(l9_9835);
l9_9836=normalize(cross(l9_9835,float3(0.0099990005,0.99990004,0.0099990005)));
l9_9837=normalize(cross(l9_9835,l9_9836));
float l9_10412=l9_9834;
float l9_10413=0.0;
float l9_10414=(*sc_set0.UserUniforms).Tweak_N293_curveData.x;
float l9_10415=(*sc_set0.UserUniforms).Tweak_N293_curveData.y;
float l9_10416=(*sc_set0.UserUniforms).Tweak_N293_curveData.z;
float l9_10417=(l9_10412-l9_10415)/(l9_10416-l9_10415);
float2 l9_10418=float2(l9_10417,l9_10414);
l9_10418=fast::clamp(l9_10418,float2(0.0),float2(1.0));
int l9_10419;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_10420=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_10420=0;
}
else
{
l9_10420=gl_InstanceIndex%2;
}
int l9_10421=l9_10420;
l9_10419=1-l9_10421;
}
else
{
int l9_10422=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_10422=0;
}
else
{
l9_10422=gl_InstanceIndex%2;
}
int l9_10423=l9_10422;
l9_10419=l9_10423;
}
int l9_10424=l9_10419;
int l9_10425=sc_CurveAtlasLayout_tmp;
int l9_10426=l9_10424;
float2 l9_10427=l9_10418;
bool l9_10428=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_10429=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_10430=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_10431=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_10432=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_10433=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_10434=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_10435=0.0;
bool l9_10436=l9_10433&&(!l9_10431);
float l9_10437=1.0;
float l9_10438=l9_10427.x;
int l9_10439=l9_10430.x;
if (l9_10439==1)
{
l9_10438=fract(l9_10438);
}
else
{
if (l9_10439==2)
{
float l9_10440=fract(l9_10438);
float l9_10441=l9_10438-l9_10440;
float l9_10442=step(0.25,fract(l9_10441*0.5));
l9_10438=mix(l9_10440,1.0-l9_10440,fast::clamp(l9_10442,0.0,1.0));
}
}
l9_10427.x=l9_10438;
float l9_10443=l9_10427.y;
int l9_10444=l9_10430.y;
if (l9_10444==1)
{
l9_10443=fract(l9_10443);
}
else
{
if (l9_10444==2)
{
float l9_10445=fract(l9_10443);
float l9_10446=l9_10443-l9_10445;
float l9_10447=step(0.25,fract(l9_10446*0.5));
l9_10443=mix(l9_10445,1.0-l9_10445,fast::clamp(l9_10447,0.0,1.0));
}
}
l9_10427.y=l9_10443;
if (l9_10431)
{
bool l9_10448=l9_10433;
bool l9_10449;
if (l9_10448)
{
l9_10449=l9_10430.x==3;
}
else
{
l9_10449=l9_10448;
}
float l9_10450=l9_10427.x;
float l9_10451=l9_10432.x;
float l9_10452=l9_10432.z;
bool l9_10453=l9_10449;
float l9_10454=l9_10437;
float l9_10455=fast::clamp(l9_10450,l9_10451,l9_10452);
float l9_10456=step(abs(l9_10450-l9_10455),9.9999997e-06);
l9_10454*=(l9_10456+((1.0-float(l9_10453))*(1.0-l9_10456)));
l9_10450=l9_10455;
l9_10427.x=l9_10450;
l9_10437=l9_10454;
bool l9_10457=l9_10433;
bool l9_10458;
if (l9_10457)
{
l9_10458=l9_10430.y==3;
}
else
{
l9_10458=l9_10457;
}
float l9_10459=l9_10427.y;
float l9_10460=l9_10432.y;
float l9_10461=l9_10432.w;
bool l9_10462=l9_10458;
float l9_10463=l9_10437;
float l9_10464=fast::clamp(l9_10459,l9_10460,l9_10461);
float l9_10465=step(abs(l9_10459-l9_10464),9.9999997e-06);
l9_10463*=(l9_10465+((1.0-float(l9_10462))*(1.0-l9_10465)));
l9_10459=l9_10464;
l9_10427.y=l9_10459;
l9_10437=l9_10463;
}
float2 l9_10466=l9_10427;
bool l9_10467=l9_10428;
float3x3 l9_10468=l9_10429;
if (l9_10467)
{
l9_10466=float2((l9_10468*float3(l9_10466,1.0)).xy);
}
float2 l9_10469=l9_10466;
l9_10427=l9_10469;
float l9_10470=l9_10427.x;
int l9_10471=l9_10430.x;
bool l9_10472=l9_10436;
float l9_10473=l9_10437;
if ((l9_10471==0)||(l9_10471==3))
{
float l9_10474=l9_10470;
float l9_10475=0.0;
float l9_10476=1.0;
bool l9_10477=l9_10472;
float l9_10478=l9_10473;
float l9_10479=fast::clamp(l9_10474,l9_10475,l9_10476);
float l9_10480=step(abs(l9_10474-l9_10479),9.9999997e-06);
l9_10478*=(l9_10480+((1.0-float(l9_10477))*(1.0-l9_10480)));
l9_10474=l9_10479;
l9_10470=l9_10474;
l9_10473=l9_10478;
}
l9_10427.x=l9_10470;
l9_10437=l9_10473;
float l9_10481=l9_10427.y;
int l9_10482=l9_10430.y;
bool l9_10483=l9_10436;
float l9_10484=l9_10437;
if ((l9_10482==0)||(l9_10482==3))
{
float l9_10485=l9_10481;
float l9_10486=0.0;
float l9_10487=1.0;
bool l9_10488=l9_10483;
float l9_10489=l9_10484;
float l9_10490=fast::clamp(l9_10485,l9_10486,l9_10487);
float l9_10491=step(abs(l9_10485-l9_10490),9.9999997e-06);
l9_10489*=(l9_10491+((1.0-float(l9_10488))*(1.0-l9_10491)));
l9_10485=l9_10490;
l9_10481=l9_10485;
l9_10484=l9_10489;
}
l9_10427.y=l9_10481;
l9_10437=l9_10484;
float2 l9_10492=l9_10427;
int l9_10493=l9_10425;
int l9_10494=l9_10426;
float l9_10495=l9_10435;
float2 l9_10496=l9_10492;
int l9_10497=l9_10493;
int l9_10498=l9_10494;
float3 l9_10499=float3(0.0);
if (l9_10497==0)
{
l9_10499=float3(l9_10496,0.0);
}
else
{
if (l9_10497==1)
{
l9_10499=float3(l9_10496.x,(l9_10496.y*0.5)+(0.5-(float(l9_10498)*0.5)),0.0);
}
else
{
l9_10499=float3(l9_10496,float(l9_10498));
}
}
float3 l9_10500=l9_10499;
float3 l9_10501=l9_10500;
float4 l9_10502=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_10501.xy,level(l9_10495));
float4 l9_10503=l9_10502;
if (l9_10433)
{
l9_10503=mix(l9_10434,l9_10503,float4(l9_10437));
}
float4 l9_10504=l9_10503;
l9_10413=l9_10504.x;
float l9_10505=l9_10413;
float l9_10506=l9_10505;
float l9_10507=l9_9834;
float l9_10508=0.0;
float l9_10509=(*sc_set0.UserUniforms).Tweak_N305_curveData.x;
float l9_10510=(*sc_set0.UserUniforms).Tweak_N305_curveData.y;
float l9_10511=(*sc_set0.UserUniforms).Tweak_N305_curveData.z;
float l9_10512=(l9_10507-l9_10510)/(l9_10511-l9_10510);
float2 l9_10513=float2(l9_10512,l9_10509);
l9_10513=fast::clamp(l9_10513,float2(0.0),float2(1.0));
int l9_10514;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_10515=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_10515=0;
}
else
{
l9_10515=gl_InstanceIndex%2;
}
int l9_10516=l9_10515;
l9_10514=1-l9_10516;
}
else
{
int l9_10517=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_10517=0;
}
else
{
l9_10517=gl_InstanceIndex%2;
}
int l9_10518=l9_10517;
l9_10514=l9_10518;
}
int l9_10519=l9_10514;
int l9_10520=sc_CurveAtlasLayout_tmp;
int l9_10521=l9_10519;
float2 l9_10522=l9_10513;
bool l9_10523=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_10524=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_10525=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_10526=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_10527=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_10528=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_10529=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_10530=0.0;
bool l9_10531=l9_10528&&(!l9_10526);
float l9_10532=1.0;
float l9_10533=l9_10522.x;
int l9_10534=l9_10525.x;
if (l9_10534==1)
{
l9_10533=fract(l9_10533);
}
else
{
if (l9_10534==2)
{
float l9_10535=fract(l9_10533);
float l9_10536=l9_10533-l9_10535;
float l9_10537=step(0.25,fract(l9_10536*0.5));
l9_10533=mix(l9_10535,1.0-l9_10535,fast::clamp(l9_10537,0.0,1.0));
}
}
l9_10522.x=l9_10533;
float l9_10538=l9_10522.y;
int l9_10539=l9_10525.y;
if (l9_10539==1)
{
l9_10538=fract(l9_10538);
}
else
{
if (l9_10539==2)
{
float l9_10540=fract(l9_10538);
float l9_10541=l9_10538-l9_10540;
float l9_10542=step(0.25,fract(l9_10541*0.5));
l9_10538=mix(l9_10540,1.0-l9_10540,fast::clamp(l9_10542,0.0,1.0));
}
}
l9_10522.y=l9_10538;
if (l9_10526)
{
bool l9_10543=l9_10528;
bool l9_10544;
if (l9_10543)
{
l9_10544=l9_10525.x==3;
}
else
{
l9_10544=l9_10543;
}
float l9_10545=l9_10522.x;
float l9_10546=l9_10527.x;
float l9_10547=l9_10527.z;
bool l9_10548=l9_10544;
float l9_10549=l9_10532;
float l9_10550=fast::clamp(l9_10545,l9_10546,l9_10547);
float l9_10551=step(abs(l9_10545-l9_10550),9.9999997e-06);
l9_10549*=(l9_10551+((1.0-float(l9_10548))*(1.0-l9_10551)));
l9_10545=l9_10550;
l9_10522.x=l9_10545;
l9_10532=l9_10549;
bool l9_10552=l9_10528;
bool l9_10553;
if (l9_10552)
{
l9_10553=l9_10525.y==3;
}
else
{
l9_10553=l9_10552;
}
float l9_10554=l9_10522.y;
float l9_10555=l9_10527.y;
float l9_10556=l9_10527.w;
bool l9_10557=l9_10553;
float l9_10558=l9_10532;
float l9_10559=fast::clamp(l9_10554,l9_10555,l9_10556);
float l9_10560=step(abs(l9_10554-l9_10559),9.9999997e-06);
l9_10558*=(l9_10560+((1.0-float(l9_10557))*(1.0-l9_10560)));
l9_10554=l9_10559;
l9_10522.y=l9_10554;
l9_10532=l9_10558;
}
float2 l9_10561=l9_10522;
bool l9_10562=l9_10523;
float3x3 l9_10563=l9_10524;
if (l9_10562)
{
l9_10561=float2((l9_10563*float3(l9_10561,1.0)).xy);
}
float2 l9_10564=l9_10561;
l9_10522=l9_10564;
float l9_10565=l9_10522.x;
int l9_10566=l9_10525.x;
bool l9_10567=l9_10531;
float l9_10568=l9_10532;
if ((l9_10566==0)||(l9_10566==3))
{
float l9_10569=l9_10565;
float l9_10570=0.0;
float l9_10571=1.0;
bool l9_10572=l9_10567;
float l9_10573=l9_10568;
float l9_10574=fast::clamp(l9_10569,l9_10570,l9_10571);
float l9_10575=step(abs(l9_10569-l9_10574),9.9999997e-06);
l9_10573*=(l9_10575+((1.0-float(l9_10572))*(1.0-l9_10575)));
l9_10569=l9_10574;
l9_10565=l9_10569;
l9_10568=l9_10573;
}
l9_10522.x=l9_10565;
l9_10532=l9_10568;
float l9_10576=l9_10522.y;
int l9_10577=l9_10525.y;
bool l9_10578=l9_10531;
float l9_10579=l9_10532;
if ((l9_10577==0)||(l9_10577==3))
{
float l9_10580=l9_10576;
float l9_10581=0.0;
float l9_10582=1.0;
bool l9_10583=l9_10578;
float l9_10584=l9_10579;
float l9_10585=fast::clamp(l9_10580,l9_10581,l9_10582);
float l9_10586=step(abs(l9_10580-l9_10585),9.9999997e-06);
l9_10584*=(l9_10586+((1.0-float(l9_10583))*(1.0-l9_10586)));
l9_10580=l9_10585;
l9_10576=l9_10580;
l9_10579=l9_10584;
}
l9_10522.y=l9_10576;
l9_10532=l9_10579;
float2 l9_10587=l9_10522;
int l9_10588=l9_10520;
int l9_10589=l9_10521;
float l9_10590=l9_10530;
float2 l9_10591=l9_10587;
int l9_10592=l9_10588;
int l9_10593=l9_10589;
float3 l9_10594=float3(0.0);
if (l9_10592==0)
{
l9_10594=float3(l9_10591,0.0);
}
else
{
if (l9_10592==1)
{
l9_10594=float3(l9_10591.x,(l9_10591.y*0.5)+(0.5-(float(l9_10593)*0.5)),0.0);
}
else
{
l9_10594=float3(l9_10591,float(l9_10593));
}
}
float3 l9_10595=l9_10594;
float3 l9_10596=l9_10595;
float4 l9_10597=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_10596.xy,level(l9_10590));
float4 l9_10598=l9_10597;
if (l9_10528)
{
l9_10598=mix(l9_10529,l9_10598,float4(l9_10532));
}
float4 l9_10599=l9_10598;
l9_10508=l9_10599.x;
float l9_10600=l9_10508;
float l9_10601=l9_10600;
float l9_10602=l9_9834;
float l9_10603=0.0;
float l9_10604=(*sc_set0.UserUniforms).Tweak_N297_curveData.x;
float l9_10605=(*sc_set0.UserUniforms).Tweak_N297_curveData.y;
float l9_10606=(*sc_set0.UserUniforms).Tweak_N297_curveData.z;
float l9_10607=(l9_10602-l9_10605)/(l9_10606-l9_10605);
float2 l9_10608=float2(l9_10607,l9_10604);
l9_10608=fast::clamp(l9_10608,float2(0.0),float2(1.0));
int l9_10609;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_10610=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_10610=0;
}
else
{
l9_10610=gl_InstanceIndex%2;
}
int l9_10611=l9_10610;
l9_10609=1-l9_10611;
}
else
{
int l9_10612=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_10612=0;
}
else
{
l9_10612=gl_InstanceIndex%2;
}
int l9_10613=l9_10612;
l9_10609=l9_10613;
}
int l9_10614=l9_10609;
int l9_10615=sc_CurveAtlasLayout_tmp;
int l9_10616=l9_10614;
float2 l9_10617=l9_10608;
bool l9_10618=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_10619=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_10620=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_10621=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_10622=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_10623=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_10624=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_10625=0.0;
bool l9_10626=l9_10623&&(!l9_10621);
float l9_10627=1.0;
float l9_10628=l9_10617.x;
int l9_10629=l9_10620.x;
if (l9_10629==1)
{
l9_10628=fract(l9_10628);
}
else
{
if (l9_10629==2)
{
float l9_10630=fract(l9_10628);
float l9_10631=l9_10628-l9_10630;
float l9_10632=step(0.25,fract(l9_10631*0.5));
l9_10628=mix(l9_10630,1.0-l9_10630,fast::clamp(l9_10632,0.0,1.0));
}
}
l9_10617.x=l9_10628;
float l9_10633=l9_10617.y;
int l9_10634=l9_10620.y;
if (l9_10634==1)
{
l9_10633=fract(l9_10633);
}
else
{
if (l9_10634==2)
{
float l9_10635=fract(l9_10633);
float l9_10636=l9_10633-l9_10635;
float l9_10637=step(0.25,fract(l9_10636*0.5));
l9_10633=mix(l9_10635,1.0-l9_10635,fast::clamp(l9_10637,0.0,1.0));
}
}
l9_10617.y=l9_10633;
if (l9_10621)
{
bool l9_10638=l9_10623;
bool l9_10639;
if (l9_10638)
{
l9_10639=l9_10620.x==3;
}
else
{
l9_10639=l9_10638;
}
float l9_10640=l9_10617.x;
float l9_10641=l9_10622.x;
float l9_10642=l9_10622.z;
bool l9_10643=l9_10639;
float l9_10644=l9_10627;
float l9_10645=fast::clamp(l9_10640,l9_10641,l9_10642);
float l9_10646=step(abs(l9_10640-l9_10645),9.9999997e-06);
l9_10644*=(l9_10646+((1.0-float(l9_10643))*(1.0-l9_10646)));
l9_10640=l9_10645;
l9_10617.x=l9_10640;
l9_10627=l9_10644;
bool l9_10647=l9_10623;
bool l9_10648;
if (l9_10647)
{
l9_10648=l9_10620.y==3;
}
else
{
l9_10648=l9_10647;
}
float l9_10649=l9_10617.y;
float l9_10650=l9_10622.y;
float l9_10651=l9_10622.w;
bool l9_10652=l9_10648;
float l9_10653=l9_10627;
float l9_10654=fast::clamp(l9_10649,l9_10650,l9_10651);
float l9_10655=step(abs(l9_10649-l9_10654),9.9999997e-06);
l9_10653*=(l9_10655+((1.0-float(l9_10652))*(1.0-l9_10655)));
l9_10649=l9_10654;
l9_10617.y=l9_10649;
l9_10627=l9_10653;
}
float2 l9_10656=l9_10617;
bool l9_10657=l9_10618;
float3x3 l9_10658=l9_10619;
if (l9_10657)
{
l9_10656=float2((l9_10658*float3(l9_10656,1.0)).xy);
}
float2 l9_10659=l9_10656;
l9_10617=l9_10659;
float l9_10660=l9_10617.x;
int l9_10661=l9_10620.x;
bool l9_10662=l9_10626;
float l9_10663=l9_10627;
if ((l9_10661==0)||(l9_10661==3))
{
float l9_10664=l9_10660;
float l9_10665=0.0;
float l9_10666=1.0;
bool l9_10667=l9_10662;
float l9_10668=l9_10663;
float l9_10669=fast::clamp(l9_10664,l9_10665,l9_10666);
float l9_10670=step(abs(l9_10664-l9_10669),9.9999997e-06);
l9_10668*=(l9_10670+((1.0-float(l9_10667))*(1.0-l9_10670)));
l9_10664=l9_10669;
l9_10660=l9_10664;
l9_10663=l9_10668;
}
l9_10617.x=l9_10660;
l9_10627=l9_10663;
float l9_10671=l9_10617.y;
int l9_10672=l9_10620.y;
bool l9_10673=l9_10626;
float l9_10674=l9_10627;
if ((l9_10672==0)||(l9_10672==3))
{
float l9_10675=l9_10671;
float l9_10676=0.0;
float l9_10677=1.0;
bool l9_10678=l9_10673;
float l9_10679=l9_10674;
float l9_10680=fast::clamp(l9_10675,l9_10676,l9_10677);
float l9_10681=step(abs(l9_10675-l9_10680),9.9999997e-06);
l9_10679*=(l9_10681+((1.0-float(l9_10678))*(1.0-l9_10681)));
l9_10675=l9_10680;
l9_10671=l9_10675;
l9_10674=l9_10679;
}
l9_10617.y=l9_10671;
l9_10627=l9_10674;
float2 l9_10682=l9_10617;
int l9_10683=l9_10615;
int l9_10684=l9_10616;
float l9_10685=l9_10625;
float2 l9_10686=l9_10682;
int l9_10687=l9_10683;
int l9_10688=l9_10684;
float3 l9_10689=float3(0.0);
if (l9_10687==0)
{
l9_10689=float3(l9_10686,0.0);
}
else
{
if (l9_10687==1)
{
l9_10689=float3(l9_10686.x,(l9_10686.y*0.5)+(0.5-(float(l9_10688)*0.5)),0.0);
}
else
{
l9_10689=float3(l9_10686,float(l9_10688));
}
}
float3 l9_10690=l9_10689;
float3 l9_10691=l9_10690;
float4 l9_10692=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_10691.xy,level(l9_10685));
float4 l9_10693=l9_10692;
if (l9_10623)
{
l9_10693=mix(l9_10624,l9_10693,float4(l9_10627));
}
float4 l9_10694=l9_10693;
l9_10603=l9_10694.x;
float l9_10695=l9_10603;
float3 l9_10696=float3(l9_10506,l9_10601,l9_10695);
float l9_10697=l9_9834+N319_res;
float l9_10698=0.0;
float l9_10699=(*sc_set0.UserUniforms).Tweak_N293_curveData.x;
float l9_10700=(*sc_set0.UserUniforms).Tweak_N293_curveData.y;
float l9_10701=(*sc_set0.UserUniforms).Tweak_N293_curveData.z;
float l9_10702=(l9_10697-l9_10700)/(l9_10701-l9_10700);
float2 l9_10703=float2(l9_10702,l9_10699);
l9_10703=fast::clamp(l9_10703,float2(0.0),float2(1.0));
int l9_10704;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_10705=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_10705=0;
}
else
{
l9_10705=gl_InstanceIndex%2;
}
int l9_10706=l9_10705;
l9_10704=1-l9_10706;
}
else
{
int l9_10707=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_10707=0;
}
else
{
l9_10707=gl_InstanceIndex%2;
}
int l9_10708=l9_10707;
l9_10704=l9_10708;
}
int l9_10709=l9_10704;
int l9_10710=sc_CurveAtlasLayout_tmp;
int l9_10711=l9_10709;
float2 l9_10712=l9_10703;
bool l9_10713=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_10714=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_10715=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_10716=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_10717=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_10718=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_10719=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_10720=0.0;
bool l9_10721=l9_10718&&(!l9_10716);
float l9_10722=1.0;
float l9_10723=l9_10712.x;
int l9_10724=l9_10715.x;
if (l9_10724==1)
{
l9_10723=fract(l9_10723);
}
else
{
if (l9_10724==2)
{
float l9_10725=fract(l9_10723);
float l9_10726=l9_10723-l9_10725;
float l9_10727=step(0.25,fract(l9_10726*0.5));
l9_10723=mix(l9_10725,1.0-l9_10725,fast::clamp(l9_10727,0.0,1.0));
}
}
l9_10712.x=l9_10723;
float l9_10728=l9_10712.y;
int l9_10729=l9_10715.y;
if (l9_10729==1)
{
l9_10728=fract(l9_10728);
}
else
{
if (l9_10729==2)
{
float l9_10730=fract(l9_10728);
float l9_10731=l9_10728-l9_10730;
float l9_10732=step(0.25,fract(l9_10731*0.5));
l9_10728=mix(l9_10730,1.0-l9_10730,fast::clamp(l9_10732,0.0,1.0));
}
}
l9_10712.y=l9_10728;
if (l9_10716)
{
bool l9_10733=l9_10718;
bool l9_10734;
if (l9_10733)
{
l9_10734=l9_10715.x==3;
}
else
{
l9_10734=l9_10733;
}
float l9_10735=l9_10712.x;
float l9_10736=l9_10717.x;
float l9_10737=l9_10717.z;
bool l9_10738=l9_10734;
float l9_10739=l9_10722;
float l9_10740=fast::clamp(l9_10735,l9_10736,l9_10737);
float l9_10741=step(abs(l9_10735-l9_10740),9.9999997e-06);
l9_10739*=(l9_10741+((1.0-float(l9_10738))*(1.0-l9_10741)));
l9_10735=l9_10740;
l9_10712.x=l9_10735;
l9_10722=l9_10739;
bool l9_10742=l9_10718;
bool l9_10743;
if (l9_10742)
{
l9_10743=l9_10715.y==3;
}
else
{
l9_10743=l9_10742;
}
float l9_10744=l9_10712.y;
float l9_10745=l9_10717.y;
float l9_10746=l9_10717.w;
bool l9_10747=l9_10743;
float l9_10748=l9_10722;
float l9_10749=fast::clamp(l9_10744,l9_10745,l9_10746);
float l9_10750=step(abs(l9_10744-l9_10749),9.9999997e-06);
l9_10748*=(l9_10750+((1.0-float(l9_10747))*(1.0-l9_10750)));
l9_10744=l9_10749;
l9_10712.y=l9_10744;
l9_10722=l9_10748;
}
float2 l9_10751=l9_10712;
bool l9_10752=l9_10713;
float3x3 l9_10753=l9_10714;
if (l9_10752)
{
l9_10751=float2((l9_10753*float3(l9_10751,1.0)).xy);
}
float2 l9_10754=l9_10751;
l9_10712=l9_10754;
float l9_10755=l9_10712.x;
int l9_10756=l9_10715.x;
bool l9_10757=l9_10721;
float l9_10758=l9_10722;
if ((l9_10756==0)||(l9_10756==3))
{
float l9_10759=l9_10755;
float l9_10760=0.0;
float l9_10761=1.0;
bool l9_10762=l9_10757;
float l9_10763=l9_10758;
float l9_10764=fast::clamp(l9_10759,l9_10760,l9_10761);
float l9_10765=step(abs(l9_10759-l9_10764),9.9999997e-06);
l9_10763*=(l9_10765+((1.0-float(l9_10762))*(1.0-l9_10765)));
l9_10759=l9_10764;
l9_10755=l9_10759;
l9_10758=l9_10763;
}
l9_10712.x=l9_10755;
l9_10722=l9_10758;
float l9_10766=l9_10712.y;
int l9_10767=l9_10715.y;
bool l9_10768=l9_10721;
float l9_10769=l9_10722;
if ((l9_10767==0)||(l9_10767==3))
{
float l9_10770=l9_10766;
float l9_10771=0.0;
float l9_10772=1.0;
bool l9_10773=l9_10768;
float l9_10774=l9_10769;
float l9_10775=fast::clamp(l9_10770,l9_10771,l9_10772);
float l9_10776=step(abs(l9_10770-l9_10775),9.9999997e-06);
l9_10774*=(l9_10776+((1.0-float(l9_10773))*(1.0-l9_10776)));
l9_10770=l9_10775;
l9_10766=l9_10770;
l9_10769=l9_10774;
}
l9_10712.y=l9_10766;
l9_10722=l9_10769;
float2 l9_10777=l9_10712;
int l9_10778=l9_10710;
int l9_10779=l9_10711;
float l9_10780=l9_10720;
float2 l9_10781=l9_10777;
int l9_10782=l9_10778;
int l9_10783=l9_10779;
float3 l9_10784=float3(0.0);
if (l9_10782==0)
{
l9_10784=float3(l9_10781,0.0);
}
else
{
if (l9_10782==1)
{
l9_10784=float3(l9_10781.x,(l9_10781.y*0.5)+(0.5-(float(l9_10783)*0.5)),0.0);
}
else
{
l9_10784=float3(l9_10781,float(l9_10783));
}
}
float3 l9_10785=l9_10784;
float3 l9_10786=l9_10785;
float4 l9_10787=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_10786.xy,level(l9_10780));
float4 l9_10788=l9_10787;
if (l9_10718)
{
l9_10788=mix(l9_10719,l9_10788,float4(l9_10722));
}
float4 l9_10789=l9_10788;
l9_10698=l9_10789.x;
float l9_10790=l9_10698;
float l9_10791=l9_10790;
float l9_10792=l9_9834+N319_res;
float l9_10793=0.0;
float l9_10794=(*sc_set0.UserUniforms).Tweak_N305_curveData.x;
float l9_10795=(*sc_set0.UserUniforms).Tweak_N305_curveData.y;
float l9_10796=(*sc_set0.UserUniforms).Tweak_N305_curveData.z;
float l9_10797=(l9_10792-l9_10795)/(l9_10796-l9_10795);
float2 l9_10798=float2(l9_10797,l9_10794);
l9_10798=fast::clamp(l9_10798,float2(0.0),float2(1.0));
int l9_10799;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_10800=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_10800=0;
}
else
{
l9_10800=gl_InstanceIndex%2;
}
int l9_10801=l9_10800;
l9_10799=1-l9_10801;
}
else
{
int l9_10802=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_10802=0;
}
else
{
l9_10802=gl_InstanceIndex%2;
}
int l9_10803=l9_10802;
l9_10799=l9_10803;
}
int l9_10804=l9_10799;
int l9_10805=sc_CurveAtlasLayout_tmp;
int l9_10806=l9_10804;
float2 l9_10807=l9_10798;
bool l9_10808=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_10809=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_10810=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_10811=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_10812=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_10813=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_10814=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_10815=0.0;
bool l9_10816=l9_10813&&(!l9_10811);
float l9_10817=1.0;
float l9_10818=l9_10807.x;
int l9_10819=l9_10810.x;
if (l9_10819==1)
{
l9_10818=fract(l9_10818);
}
else
{
if (l9_10819==2)
{
float l9_10820=fract(l9_10818);
float l9_10821=l9_10818-l9_10820;
float l9_10822=step(0.25,fract(l9_10821*0.5));
l9_10818=mix(l9_10820,1.0-l9_10820,fast::clamp(l9_10822,0.0,1.0));
}
}
l9_10807.x=l9_10818;
float l9_10823=l9_10807.y;
int l9_10824=l9_10810.y;
if (l9_10824==1)
{
l9_10823=fract(l9_10823);
}
else
{
if (l9_10824==2)
{
float l9_10825=fract(l9_10823);
float l9_10826=l9_10823-l9_10825;
float l9_10827=step(0.25,fract(l9_10826*0.5));
l9_10823=mix(l9_10825,1.0-l9_10825,fast::clamp(l9_10827,0.0,1.0));
}
}
l9_10807.y=l9_10823;
if (l9_10811)
{
bool l9_10828=l9_10813;
bool l9_10829;
if (l9_10828)
{
l9_10829=l9_10810.x==3;
}
else
{
l9_10829=l9_10828;
}
float l9_10830=l9_10807.x;
float l9_10831=l9_10812.x;
float l9_10832=l9_10812.z;
bool l9_10833=l9_10829;
float l9_10834=l9_10817;
float l9_10835=fast::clamp(l9_10830,l9_10831,l9_10832);
float l9_10836=step(abs(l9_10830-l9_10835),9.9999997e-06);
l9_10834*=(l9_10836+((1.0-float(l9_10833))*(1.0-l9_10836)));
l9_10830=l9_10835;
l9_10807.x=l9_10830;
l9_10817=l9_10834;
bool l9_10837=l9_10813;
bool l9_10838;
if (l9_10837)
{
l9_10838=l9_10810.y==3;
}
else
{
l9_10838=l9_10837;
}
float l9_10839=l9_10807.y;
float l9_10840=l9_10812.y;
float l9_10841=l9_10812.w;
bool l9_10842=l9_10838;
float l9_10843=l9_10817;
float l9_10844=fast::clamp(l9_10839,l9_10840,l9_10841);
float l9_10845=step(abs(l9_10839-l9_10844),9.9999997e-06);
l9_10843*=(l9_10845+((1.0-float(l9_10842))*(1.0-l9_10845)));
l9_10839=l9_10844;
l9_10807.y=l9_10839;
l9_10817=l9_10843;
}
float2 l9_10846=l9_10807;
bool l9_10847=l9_10808;
float3x3 l9_10848=l9_10809;
if (l9_10847)
{
l9_10846=float2((l9_10848*float3(l9_10846,1.0)).xy);
}
float2 l9_10849=l9_10846;
l9_10807=l9_10849;
float l9_10850=l9_10807.x;
int l9_10851=l9_10810.x;
bool l9_10852=l9_10816;
float l9_10853=l9_10817;
if ((l9_10851==0)||(l9_10851==3))
{
float l9_10854=l9_10850;
float l9_10855=0.0;
float l9_10856=1.0;
bool l9_10857=l9_10852;
float l9_10858=l9_10853;
float l9_10859=fast::clamp(l9_10854,l9_10855,l9_10856);
float l9_10860=step(abs(l9_10854-l9_10859),9.9999997e-06);
l9_10858*=(l9_10860+((1.0-float(l9_10857))*(1.0-l9_10860)));
l9_10854=l9_10859;
l9_10850=l9_10854;
l9_10853=l9_10858;
}
l9_10807.x=l9_10850;
l9_10817=l9_10853;
float l9_10861=l9_10807.y;
int l9_10862=l9_10810.y;
bool l9_10863=l9_10816;
float l9_10864=l9_10817;
if ((l9_10862==0)||(l9_10862==3))
{
float l9_10865=l9_10861;
float l9_10866=0.0;
float l9_10867=1.0;
bool l9_10868=l9_10863;
float l9_10869=l9_10864;
float l9_10870=fast::clamp(l9_10865,l9_10866,l9_10867);
float l9_10871=step(abs(l9_10865-l9_10870),9.9999997e-06);
l9_10869*=(l9_10871+((1.0-float(l9_10868))*(1.0-l9_10871)));
l9_10865=l9_10870;
l9_10861=l9_10865;
l9_10864=l9_10869;
}
l9_10807.y=l9_10861;
l9_10817=l9_10864;
float2 l9_10872=l9_10807;
int l9_10873=l9_10805;
int l9_10874=l9_10806;
float l9_10875=l9_10815;
float2 l9_10876=l9_10872;
int l9_10877=l9_10873;
int l9_10878=l9_10874;
float3 l9_10879=float3(0.0);
if (l9_10877==0)
{
l9_10879=float3(l9_10876,0.0);
}
else
{
if (l9_10877==1)
{
l9_10879=float3(l9_10876.x,(l9_10876.y*0.5)+(0.5-(float(l9_10878)*0.5)),0.0);
}
else
{
l9_10879=float3(l9_10876,float(l9_10878));
}
}
float3 l9_10880=l9_10879;
float3 l9_10881=l9_10880;
float4 l9_10882=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_10881.xy,level(l9_10875));
float4 l9_10883=l9_10882;
if (l9_10813)
{
l9_10883=mix(l9_10814,l9_10883,float4(l9_10817));
}
float4 l9_10884=l9_10883;
l9_10793=l9_10884.x;
float l9_10885=l9_10793;
float l9_10886=l9_10885;
float l9_10887=l9_9834+N319_res;
float l9_10888=0.0;
float l9_10889=(*sc_set0.UserUniforms).Tweak_N297_curveData.x;
float l9_10890=(*sc_set0.UserUniforms).Tweak_N297_curveData.y;
float l9_10891=(*sc_set0.UserUniforms).Tweak_N297_curveData.z;
float l9_10892=(l9_10887-l9_10890)/(l9_10891-l9_10890);
float2 l9_10893=float2(l9_10892,l9_10889);
l9_10893=fast::clamp(l9_10893,float2(0.0),float2(1.0));
int l9_10894;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_10895=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_10895=0;
}
else
{
l9_10895=gl_InstanceIndex%2;
}
int l9_10896=l9_10895;
l9_10894=1-l9_10896;
}
else
{
int l9_10897=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_10897=0;
}
else
{
l9_10897=gl_InstanceIndex%2;
}
int l9_10898=l9_10897;
l9_10894=l9_10898;
}
int l9_10899=l9_10894;
int l9_10900=sc_CurveAtlasLayout_tmp;
int l9_10901=l9_10899;
float2 l9_10902=l9_10893;
bool l9_10903=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_10904=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_10905=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_10906=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_10907=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_10908=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_10909=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_10910=0.0;
bool l9_10911=l9_10908&&(!l9_10906);
float l9_10912=1.0;
float l9_10913=l9_10902.x;
int l9_10914=l9_10905.x;
if (l9_10914==1)
{
l9_10913=fract(l9_10913);
}
else
{
if (l9_10914==2)
{
float l9_10915=fract(l9_10913);
float l9_10916=l9_10913-l9_10915;
float l9_10917=step(0.25,fract(l9_10916*0.5));
l9_10913=mix(l9_10915,1.0-l9_10915,fast::clamp(l9_10917,0.0,1.0));
}
}
l9_10902.x=l9_10913;
float l9_10918=l9_10902.y;
int l9_10919=l9_10905.y;
if (l9_10919==1)
{
l9_10918=fract(l9_10918);
}
else
{
if (l9_10919==2)
{
float l9_10920=fract(l9_10918);
float l9_10921=l9_10918-l9_10920;
float l9_10922=step(0.25,fract(l9_10921*0.5));
l9_10918=mix(l9_10920,1.0-l9_10920,fast::clamp(l9_10922,0.0,1.0));
}
}
l9_10902.y=l9_10918;
if (l9_10906)
{
bool l9_10923=l9_10908;
bool l9_10924;
if (l9_10923)
{
l9_10924=l9_10905.x==3;
}
else
{
l9_10924=l9_10923;
}
float l9_10925=l9_10902.x;
float l9_10926=l9_10907.x;
float l9_10927=l9_10907.z;
bool l9_10928=l9_10924;
float l9_10929=l9_10912;
float l9_10930=fast::clamp(l9_10925,l9_10926,l9_10927);
float l9_10931=step(abs(l9_10925-l9_10930),9.9999997e-06);
l9_10929*=(l9_10931+((1.0-float(l9_10928))*(1.0-l9_10931)));
l9_10925=l9_10930;
l9_10902.x=l9_10925;
l9_10912=l9_10929;
bool l9_10932=l9_10908;
bool l9_10933;
if (l9_10932)
{
l9_10933=l9_10905.y==3;
}
else
{
l9_10933=l9_10932;
}
float l9_10934=l9_10902.y;
float l9_10935=l9_10907.y;
float l9_10936=l9_10907.w;
bool l9_10937=l9_10933;
float l9_10938=l9_10912;
float l9_10939=fast::clamp(l9_10934,l9_10935,l9_10936);
float l9_10940=step(abs(l9_10934-l9_10939),9.9999997e-06);
l9_10938*=(l9_10940+((1.0-float(l9_10937))*(1.0-l9_10940)));
l9_10934=l9_10939;
l9_10902.y=l9_10934;
l9_10912=l9_10938;
}
float2 l9_10941=l9_10902;
bool l9_10942=l9_10903;
float3x3 l9_10943=l9_10904;
if (l9_10942)
{
l9_10941=float2((l9_10943*float3(l9_10941,1.0)).xy);
}
float2 l9_10944=l9_10941;
l9_10902=l9_10944;
float l9_10945=l9_10902.x;
int l9_10946=l9_10905.x;
bool l9_10947=l9_10911;
float l9_10948=l9_10912;
if ((l9_10946==0)||(l9_10946==3))
{
float l9_10949=l9_10945;
float l9_10950=0.0;
float l9_10951=1.0;
bool l9_10952=l9_10947;
float l9_10953=l9_10948;
float l9_10954=fast::clamp(l9_10949,l9_10950,l9_10951);
float l9_10955=step(abs(l9_10949-l9_10954),9.9999997e-06);
l9_10953*=(l9_10955+((1.0-float(l9_10952))*(1.0-l9_10955)));
l9_10949=l9_10954;
l9_10945=l9_10949;
l9_10948=l9_10953;
}
l9_10902.x=l9_10945;
l9_10912=l9_10948;
float l9_10956=l9_10902.y;
int l9_10957=l9_10905.y;
bool l9_10958=l9_10911;
float l9_10959=l9_10912;
if ((l9_10957==0)||(l9_10957==3))
{
float l9_10960=l9_10956;
float l9_10961=0.0;
float l9_10962=1.0;
bool l9_10963=l9_10958;
float l9_10964=l9_10959;
float l9_10965=fast::clamp(l9_10960,l9_10961,l9_10962);
float l9_10966=step(abs(l9_10960-l9_10965),9.9999997e-06);
l9_10964*=(l9_10966+((1.0-float(l9_10963))*(1.0-l9_10966)));
l9_10960=l9_10965;
l9_10956=l9_10960;
l9_10959=l9_10964;
}
l9_10902.y=l9_10956;
l9_10912=l9_10959;
float2 l9_10967=l9_10902;
int l9_10968=l9_10900;
int l9_10969=l9_10901;
float l9_10970=l9_10910;
float2 l9_10971=l9_10967;
int l9_10972=l9_10968;
int l9_10973=l9_10969;
float3 l9_10974=float3(0.0);
if (l9_10972==0)
{
l9_10974=float3(l9_10971,0.0);
}
else
{
if (l9_10972==1)
{
l9_10974=float3(l9_10971.x,(l9_10971.y*0.5)+(0.5-(float(l9_10973)*0.5)),0.0);
}
else
{
l9_10974=float3(l9_10971,float(l9_10973));
}
}
float3 l9_10975=l9_10974;
float3 l9_10976=l9_10975;
float4 l9_10977=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_10976.xy,level(l9_10970));
float4 l9_10978=l9_10977;
if (l9_10908)
{
l9_10978=mix(l9_10909,l9_10978,float4(l9_10912));
}
float4 l9_10979=l9_10978;
l9_10888=l9_10979.x;
float l9_10980=l9_10888;
float3 l9_10981=float3(l9_10791,l9_10886,l9_10980);
l9_9838=normalize(l9_10981-l9_10696);
l9_9811=l9_9835;
l9_9812=l9_9836;
l9_9813=l9_9837;
l9_9814=l9_9838;
float l9_10982=l9_9819;
float l9_10983=0.0;
float l9_10984=(*sc_set0.UserUniforms).Tweak_N299_curveData.x;
float l9_10985=(*sc_set0.UserUniforms).Tweak_N299_curveData.y;
float l9_10986=(*sc_set0.UserUniforms).Tweak_N299_curveData.z;
float l9_10987=(l9_10982-l9_10985)/(l9_10986-l9_10985);
float2 l9_10988=float2(l9_10987,l9_10984);
l9_10988=fast::clamp(l9_10988,float2(0.0),float2(1.0));
int l9_10989;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_10990=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_10990=0;
}
else
{
l9_10990=gl_InstanceIndex%2;
}
int l9_10991=l9_10990;
l9_10989=1-l9_10991;
}
else
{
int l9_10992=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_10992=0;
}
else
{
l9_10992=gl_InstanceIndex%2;
}
int l9_10993=l9_10992;
l9_10989=l9_10993;
}
int l9_10994=l9_10989;
int l9_10995=sc_CurveAtlasLayout_tmp;
int l9_10996=l9_10994;
float2 l9_10997=l9_10988;
bool l9_10998=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_10999=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_11000=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_11001=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_11002=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_11003=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_11004=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_11005=0.0;
bool l9_11006=l9_11003&&(!l9_11001);
float l9_11007=1.0;
float l9_11008=l9_10997.x;
int l9_11009=l9_11000.x;
if (l9_11009==1)
{
l9_11008=fract(l9_11008);
}
else
{
if (l9_11009==2)
{
float l9_11010=fract(l9_11008);
float l9_11011=l9_11008-l9_11010;
float l9_11012=step(0.25,fract(l9_11011*0.5));
l9_11008=mix(l9_11010,1.0-l9_11010,fast::clamp(l9_11012,0.0,1.0));
}
}
l9_10997.x=l9_11008;
float l9_11013=l9_10997.y;
int l9_11014=l9_11000.y;
if (l9_11014==1)
{
l9_11013=fract(l9_11013);
}
else
{
if (l9_11014==2)
{
float l9_11015=fract(l9_11013);
float l9_11016=l9_11013-l9_11015;
float l9_11017=step(0.25,fract(l9_11016*0.5));
l9_11013=mix(l9_11015,1.0-l9_11015,fast::clamp(l9_11017,0.0,1.0));
}
}
l9_10997.y=l9_11013;
if (l9_11001)
{
bool l9_11018=l9_11003;
bool l9_11019;
if (l9_11018)
{
l9_11019=l9_11000.x==3;
}
else
{
l9_11019=l9_11018;
}
float l9_11020=l9_10997.x;
float l9_11021=l9_11002.x;
float l9_11022=l9_11002.z;
bool l9_11023=l9_11019;
float l9_11024=l9_11007;
float l9_11025=fast::clamp(l9_11020,l9_11021,l9_11022);
float l9_11026=step(abs(l9_11020-l9_11025),9.9999997e-06);
l9_11024*=(l9_11026+((1.0-float(l9_11023))*(1.0-l9_11026)));
l9_11020=l9_11025;
l9_10997.x=l9_11020;
l9_11007=l9_11024;
bool l9_11027=l9_11003;
bool l9_11028;
if (l9_11027)
{
l9_11028=l9_11000.y==3;
}
else
{
l9_11028=l9_11027;
}
float l9_11029=l9_10997.y;
float l9_11030=l9_11002.y;
float l9_11031=l9_11002.w;
bool l9_11032=l9_11028;
float l9_11033=l9_11007;
float l9_11034=fast::clamp(l9_11029,l9_11030,l9_11031);
float l9_11035=step(abs(l9_11029-l9_11034),9.9999997e-06);
l9_11033*=(l9_11035+((1.0-float(l9_11032))*(1.0-l9_11035)));
l9_11029=l9_11034;
l9_10997.y=l9_11029;
l9_11007=l9_11033;
}
float2 l9_11036=l9_10997;
bool l9_11037=l9_10998;
float3x3 l9_11038=l9_10999;
if (l9_11037)
{
l9_11036=float2((l9_11038*float3(l9_11036,1.0)).xy);
}
float2 l9_11039=l9_11036;
l9_10997=l9_11039;
float l9_11040=l9_10997.x;
int l9_11041=l9_11000.x;
bool l9_11042=l9_11006;
float l9_11043=l9_11007;
if ((l9_11041==0)||(l9_11041==3))
{
float l9_11044=l9_11040;
float l9_11045=0.0;
float l9_11046=1.0;
bool l9_11047=l9_11042;
float l9_11048=l9_11043;
float l9_11049=fast::clamp(l9_11044,l9_11045,l9_11046);
float l9_11050=step(abs(l9_11044-l9_11049),9.9999997e-06);
l9_11048*=(l9_11050+((1.0-float(l9_11047))*(1.0-l9_11050)));
l9_11044=l9_11049;
l9_11040=l9_11044;
l9_11043=l9_11048;
}
l9_10997.x=l9_11040;
l9_11007=l9_11043;
float l9_11051=l9_10997.y;
int l9_11052=l9_11000.y;
bool l9_11053=l9_11006;
float l9_11054=l9_11007;
if ((l9_11052==0)||(l9_11052==3))
{
float l9_11055=l9_11051;
float l9_11056=0.0;
float l9_11057=1.0;
bool l9_11058=l9_11053;
float l9_11059=l9_11054;
float l9_11060=fast::clamp(l9_11055,l9_11056,l9_11057);
float l9_11061=step(abs(l9_11055-l9_11060),9.9999997e-06);
l9_11059*=(l9_11061+((1.0-float(l9_11058))*(1.0-l9_11061)));
l9_11055=l9_11060;
l9_11051=l9_11055;
l9_11054=l9_11059;
}
l9_10997.y=l9_11051;
l9_11007=l9_11054;
float2 l9_11062=l9_10997;
int l9_11063=l9_10995;
int l9_11064=l9_10996;
float l9_11065=l9_11005;
float2 l9_11066=l9_11062;
int l9_11067=l9_11063;
int l9_11068=l9_11064;
float3 l9_11069=float3(0.0);
if (l9_11067==0)
{
l9_11069=float3(l9_11066,0.0);
}
else
{
if (l9_11067==1)
{
l9_11069=float3(l9_11066.x,(l9_11066.y*0.5)+(0.5-(float(l9_11068)*0.5)),0.0);
}
else
{
l9_11069=float3(l9_11066,float(l9_11068));
}
}
float3 l9_11070=l9_11069;
float3 l9_11071=l9_11070;
float4 l9_11072=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_11071.xy,level(l9_11065));
float4 l9_11073=l9_11072;
if (l9_11003)
{
l9_11073=mix(l9_11004,l9_11073,float4(l9_11007));
}
float4 l9_11074=l9_11073;
l9_10983=l9_11074.x;
float l9_11075=l9_10983;
float l9_11076=l9_11075;
float l9_11077;
if (N319_curvThickEnable)
{
l9_11077=N319_thicknessRad*l9_11076;
}
else
{
l9_11077=N319_thicknessRad;
}
float l9_11078=l9_11077;
float l9_11079=l9_9819;
float l9_11080=0.0;
float l9_11081=(*sc_set0.UserUniforms).Tweak_N293_curveData.x;
float l9_11082=(*sc_set0.UserUniforms).Tweak_N293_curveData.y;
float l9_11083=(*sc_set0.UserUniforms).Tweak_N293_curveData.z;
float l9_11084=(l9_11079-l9_11082)/(l9_11083-l9_11082);
float2 l9_11085=float2(l9_11084,l9_11081);
l9_11085=fast::clamp(l9_11085,float2(0.0),float2(1.0));
int l9_11086;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_11087=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_11087=0;
}
else
{
l9_11087=gl_InstanceIndex%2;
}
int l9_11088=l9_11087;
l9_11086=1-l9_11088;
}
else
{
int l9_11089=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_11089=0;
}
else
{
l9_11089=gl_InstanceIndex%2;
}
int l9_11090=l9_11089;
l9_11086=l9_11090;
}
int l9_11091=l9_11086;
int l9_11092=sc_CurveAtlasLayout_tmp;
int l9_11093=l9_11091;
float2 l9_11094=l9_11085;
bool l9_11095=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_11096=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_11097=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_11098=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_11099=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_11100=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_11101=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_11102=0.0;
bool l9_11103=l9_11100&&(!l9_11098);
float l9_11104=1.0;
float l9_11105=l9_11094.x;
int l9_11106=l9_11097.x;
if (l9_11106==1)
{
l9_11105=fract(l9_11105);
}
else
{
if (l9_11106==2)
{
float l9_11107=fract(l9_11105);
float l9_11108=l9_11105-l9_11107;
float l9_11109=step(0.25,fract(l9_11108*0.5));
l9_11105=mix(l9_11107,1.0-l9_11107,fast::clamp(l9_11109,0.0,1.0));
}
}
l9_11094.x=l9_11105;
float l9_11110=l9_11094.y;
int l9_11111=l9_11097.y;
if (l9_11111==1)
{
l9_11110=fract(l9_11110);
}
else
{
if (l9_11111==2)
{
float l9_11112=fract(l9_11110);
float l9_11113=l9_11110-l9_11112;
float l9_11114=step(0.25,fract(l9_11113*0.5));
l9_11110=mix(l9_11112,1.0-l9_11112,fast::clamp(l9_11114,0.0,1.0));
}
}
l9_11094.y=l9_11110;
if (l9_11098)
{
bool l9_11115=l9_11100;
bool l9_11116;
if (l9_11115)
{
l9_11116=l9_11097.x==3;
}
else
{
l9_11116=l9_11115;
}
float l9_11117=l9_11094.x;
float l9_11118=l9_11099.x;
float l9_11119=l9_11099.z;
bool l9_11120=l9_11116;
float l9_11121=l9_11104;
float l9_11122=fast::clamp(l9_11117,l9_11118,l9_11119);
float l9_11123=step(abs(l9_11117-l9_11122),9.9999997e-06);
l9_11121*=(l9_11123+((1.0-float(l9_11120))*(1.0-l9_11123)));
l9_11117=l9_11122;
l9_11094.x=l9_11117;
l9_11104=l9_11121;
bool l9_11124=l9_11100;
bool l9_11125;
if (l9_11124)
{
l9_11125=l9_11097.y==3;
}
else
{
l9_11125=l9_11124;
}
float l9_11126=l9_11094.y;
float l9_11127=l9_11099.y;
float l9_11128=l9_11099.w;
bool l9_11129=l9_11125;
float l9_11130=l9_11104;
float l9_11131=fast::clamp(l9_11126,l9_11127,l9_11128);
float l9_11132=step(abs(l9_11126-l9_11131),9.9999997e-06);
l9_11130*=(l9_11132+((1.0-float(l9_11129))*(1.0-l9_11132)));
l9_11126=l9_11131;
l9_11094.y=l9_11126;
l9_11104=l9_11130;
}
float2 l9_11133=l9_11094;
bool l9_11134=l9_11095;
float3x3 l9_11135=l9_11096;
if (l9_11134)
{
l9_11133=float2((l9_11135*float3(l9_11133,1.0)).xy);
}
float2 l9_11136=l9_11133;
l9_11094=l9_11136;
float l9_11137=l9_11094.x;
int l9_11138=l9_11097.x;
bool l9_11139=l9_11103;
float l9_11140=l9_11104;
if ((l9_11138==0)||(l9_11138==3))
{
float l9_11141=l9_11137;
float l9_11142=0.0;
float l9_11143=1.0;
bool l9_11144=l9_11139;
float l9_11145=l9_11140;
float l9_11146=fast::clamp(l9_11141,l9_11142,l9_11143);
float l9_11147=step(abs(l9_11141-l9_11146),9.9999997e-06);
l9_11145*=(l9_11147+((1.0-float(l9_11144))*(1.0-l9_11147)));
l9_11141=l9_11146;
l9_11137=l9_11141;
l9_11140=l9_11145;
}
l9_11094.x=l9_11137;
l9_11104=l9_11140;
float l9_11148=l9_11094.y;
int l9_11149=l9_11097.y;
bool l9_11150=l9_11103;
float l9_11151=l9_11104;
if ((l9_11149==0)||(l9_11149==3))
{
float l9_11152=l9_11148;
float l9_11153=0.0;
float l9_11154=1.0;
bool l9_11155=l9_11150;
float l9_11156=l9_11151;
float l9_11157=fast::clamp(l9_11152,l9_11153,l9_11154);
float l9_11158=step(abs(l9_11152-l9_11157),9.9999997e-06);
l9_11156*=(l9_11158+((1.0-float(l9_11155))*(1.0-l9_11158)));
l9_11152=l9_11157;
l9_11148=l9_11152;
l9_11151=l9_11156;
}
l9_11094.y=l9_11148;
l9_11104=l9_11151;
float2 l9_11159=l9_11094;
int l9_11160=l9_11092;
int l9_11161=l9_11093;
float l9_11162=l9_11102;
float2 l9_11163=l9_11159;
int l9_11164=l9_11160;
int l9_11165=l9_11161;
float3 l9_11166=float3(0.0);
if (l9_11164==0)
{
l9_11166=float3(l9_11163,0.0);
}
else
{
if (l9_11164==1)
{
l9_11166=float3(l9_11163.x,(l9_11163.y*0.5)+(0.5-(float(l9_11165)*0.5)),0.0);
}
else
{
l9_11166=float3(l9_11163,float(l9_11165));
}
}
float3 l9_11167=l9_11166;
float3 l9_11168=l9_11167;
float4 l9_11169=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_11168.xy,level(l9_11162));
float4 l9_11170=l9_11169;
if (l9_11100)
{
l9_11170=mix(l9_11101,l9_11170,float4(l9_11104));
}
float4 l9_11171=l9_11170;
l9_11080=l9_11171.x;
float l9_11172=l9_11080;
float l9_11173=l9_11172;
float l9_11174=l9_9819;
float l9_11175=0.0;
float l9_11176=(*sc_set0.UserUniforms).Tweak_N305_curveData.x;
float l9_11177=(*sc_set0.UserUniforms).Tweak_N305_curveData.y;
float l9_11178=(*sc_set0.UserUniforms).Tweak_N305_curveData.z;
float l9_11179=(l9_11174-l9_11177)/(l9_11178-l9_11177);
float2 l9_11180=float2(l9_11179,l9_11176);
l9_11180=fast::clamp(l9_11180,float2(0.0),float2(1.0));
int l9_11181;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_11182=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_11182=0;
}
else
{
l9_11182=gl_InstanceIndex%2;
}
int l9_11183=l9_11182;
l9_11181=1-l9_11183;
}
else
{
int l9_11184=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_11184=0;
}
else
{
l9_11184=gl_InstanceIndex%2;
}
int l9_11185=l9_11184;
l9_11181=l9_11185;
}
int l9_11186=l9_11181;
int l9_11187=sc_CurveAtlasLayout_tmp;
int l9_11188=l9_11186;
float2 l9_11189=l9_11180;
bool l9_11190=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_11191=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_11192=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_11193=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_11194=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_11195=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_11196=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_11197=0.0;
bool l9_11198=l9_11195&&(!l9_11193);
float l9_11199=1.0;
float l9_11200=l9_11189.x;
int l9_11201=l9_11192.x;
if (l9_11201==1)
{
l9_11200=fract(l9_11200);
}
else
{
if (l9_11201==2)
{
float l9_11202=fract(l9_11200);
float l9_11203=l9_11200-l9_11202;
float l9_11204=step(0.25,fract(l9_11203*0.5));
l9_11200=mix(l9_11202,1.0-l9_11202,fast::clamp(l9_11204,0.0,1.0));
}
}
l9_11189.x=l9_11200;
float l9_11205=l9_11189.y;
int l9_11206=l9_11192.y;
if (l9_11206==1)
{
l9_11205=fract(l9_11205);
}
else
{
if (l9_11206==2)
{
float l9_11207=fract(l9_11205);
float l9_11208=l9_11205-l9_11207;
float l9_11209=step(0.25,fract(l9_11208*0.5));
l9_11205=mix(l9_11207,1.0-l9_11207,fast::clamp(l9_11209,0.0,1.0));
}
}
l9_11189.y=l9_11205;
if (l9_11193)
{
bool l9_11210=l9_11195;
bool l9_11211;
if (l9_11210)
{
l9_11211=l9_11192.x==3;
}
else
{
l9_11211=l9_11210;
}
float l9_11212=l9_11189.x;
float l9_11213=l9_11194.x;
float l9_11214=l9_11194.z;
bool l9_11215=l9_11211;
float l9_11216=l9_11199;
float l9_11217=fast::clamp(l9_11212,l9_11213,l9_11214);
float l9_11218=step(abs(l9_11212-l9_11217),9.9999997e-06);
l9_11216*=(l9_11218+((1.0-float(l9_11215))*(1.0-l9_11218)));
l9_11212=l9_11217;
l9_11189.x=l9_11212;
l9_11199=l9_11216;
bool l9_11219=l9_11195;
bool l9_11220;
if (l9_11219)
{
l9_11220=l9_11192.y==3;
}
else
{
l9_11220=l9_11219;
}
float l9_11221=l9_11189.y;
float l9_11222=l9_11194.y;
float l9_11223=l9_11194.w;
bool l9_11224=l9_11220;
float l9_11225=l9_11199;
float l9_11226=fast::clamp(l9_11221,l9_11222,l9_11223);
float l9_11227=step(abs(l9_11221-l9_11226),9.9999997e-06);
l9_11225*=(l9_11227+((1.0-float(l9_11224))*(1.0-l9_11227)));
l9_11221=l9_11226;
l9_11189.y=l9_11221;
l9_11199=l9_11225;
}
float2 l9_11228=l9_11189;
bool l9_11229=l9_11190;
float3x3 l9_11230=l9_11191;
if (l9_11229)
{
l9_11228=float2((l9_11230*float3(l9_11228,1.0)).xy);
}
float2 l9_11231=l9_11228;
l9_11189=l9_11231;
float l9_11232=l9_11189.x;
int l9_11233=l9_11192.x;
bool l9_11234=l9_11198;
float l9_11235=l9_11199;
if ((l9_11233==0)||(l9_11233==3))
{
float l9_11236=l9_11232;
float l9_11237=0.0;
float l9_11238=1.0;
bool l9_11239=l9_11234;
float l9_11240=l9_11235;
float l9_11241=fast::clamp(l9_11236,l9_11237,l9_11238);
float l9_11242=step(abs(l9_11236-l9_11241),9.9999997e-06);
l9_11240*=(l9_11242+((1.0-float(l9_11239))*(1.0-l9_11242)));
l9_11236=l9_11241;
l9_11232=l9_11236;
l9_11235=l9_11240;
}
l9_11189.x=l9_11232;
l9_11199=l9_11235;
float l9_11243=l9_11189.y;
int l9_11244=l9_11192.y;
bool l9_11245=l9_11198;
float l9_11246=l9_11199;
if ((l9_11244==0)||(l9_11244==3))
{
float l9_11247=l9_11243;
float l9_11248=0.0;
float l9_11249=1.0;
bool l9_11250=l9_11245;
float l9_11251=l9_11246;
float l9_11252=fast::clamp(l9_11247,l9_11248,l9_11249);
float l9_11253=step(abs(l9_11247-l9_11252),9.9999997e-06);
l9_11251*=(l9_11253+((1.0-float(l9_11250))*(1.0-l9_11253)));
l9_11247=l9_11252;
l9_11243=l9_11247;
l9_11246=l9_11251;
}
l9_11189.y=l9_11243;
l9_11199=l9_11246;
float2 l9_11254=l9_11189;
int l9_11255=l9_11187;
int l9_11256=l9_11188;
float l9_11257=l9_11197;
float2 l9_11258=l9_11254;
int l9_11259=l9_11255;
int l9_11260=l9_11256;
float3 l9_11261=float3(0.0);
if (l9_11259==0)
{
l9_11261=float3(l9_11258,0.0);
}
else
{
if (l9_11259==1)
{
l9_11261=float3(l9_11258.x,(l9_11258.y*0.5)+(0.5-(float(l9_11260)*0.5)),0.0);
}
else
{
l9_11261=float3(l9_11258,float(l9_11260));
}
}
float3 l9_11262=l9_11261;
float3 l9_11263=l9_11262;
float4 l9_11264=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_11263.xy,level(l9_11257));
float4 l9_11265=l9_11264;
if (l9_11195)
{
l9_11265=mix(l9_11196,l9_11265,float4(l9_11199));
}
float4 l9_11266=l9_11265;
l9_11175=l9_11266.x;
float l9_11267=l9_11175;
float l9_11268=l9_11267;
float l9_11269=l9_9819;
float l9_11270=0.0;
float l9_11271=(*sc_set0.UserUniforms).Tweak_N297_curveData.x;
float l9_11272=(*sc_set0.UserUniforms).Tweak_N297_curveData.y;
float l9_11273=(*sc_set0.UserUniforms).Tweak_N297_curveData.z;
float l9_11274=(l9_11269-l9_11272)/(l9_11273-l9_11272);
float2 l9_11275=float2(l9_11274,l9_11271);
l9_11275=fast::clamp(l9_11275,float2(0.0),float2(1.0));
int l9_11276;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_11277=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_11277=0;
}
else
{
l9_11277=gl_InstanceIndex%2;
}
int l9_11278=l9_11277;
l9_11276=1-l9_11278;
}
else
{
int l9_11279=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_11279=0;
}
else
{
l9_11279=gl_InstanceIndex%2;
}
int l9_11280=l9_11279;
l9_11276=l9_11280;
}
int l9_11281=l9_11276;
int l9_11282=sc_CurveAtlasLayout_tmp;
int l9_11283=l9_11281;
float2 l9_11284=l9_11275;
bool l9_11285=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_11286=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_11287=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_11288=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_11289=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_11290=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_11291=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_11292=0.0;
bool l9_11293=l9_11290&&(!l9_11288);
float l9_11294=1.0;
float l9_11295=l9_11284.x;
int l9_11296=l9_11287.x;
if (l9_11296==1)
{
l9_11295=fract(l9_11295);
}
else
{
if (l9_11296==2)
{
float l9_11297=fract(l9_11295);
float l9_11298=l9_11295-l9_11297;
float l9_11299=step(0.25,fract(l9_11298*0.5));
l9_11295=mix(l9_11297,1.0-l9_11297,fast::clamp(l9_11299,0.0,1.0));
}
}
l9_11284.x=l9_11295;
float l9_11300=l9_11284.y;
int l9_11301=l9_11287.y;
if (l9_11301==1)
{
l9_11300=fract(l9_11300);
}
else
{
if (l9_11301==2)
{
float l9_11302=fract(l9_11300);
float l9_11303=l9_11300-l9_11302;
float l9_11304=step(0.25,fract(l9_11303*0.5));
l9_11300=mix(l9_11302,1.0-l9_11302,fast::clamp(l9_11304,0.0,1.0));
}
}
l9_11284.y=l9_11300;
if (l9_11288)
{
bool l9_11305=l9_11290;
bool l9_11306;
if (l9_11305)
{
l9_11306=l9_11287.x==3;
}
else
{
l9_11306=l9_11305;
}
float l9_11307=l9_11284.x;
float l9_11308=l9_11289.x;
float l9_11309=l9_11289.z;
bool l9_11310=l9_11306;
float l9_11311=l9_11294;
float l9_11312=fast::clamp(l9_11307,l9_11308,l9_11309);
float l9_11313=step(abs(l9_11307-l9_11312),9.9999997e-06);
l9_11311*=(l9_11313+((1.0-float(l9_11310))*(1.0-l9_11313)));
l9_11307=l9_11312;
l9_11284.x=l9_11307;
l9_11294=l9_11311;
bool l9_11314=l9_11290;
bool l9_11315;
if (l9_11314)
{
l9_11315=l9_11287.y==3;
}
else
{
l9_11315=l9_11314;
}
float l9_11316=l9_11284.y;
float l9_11317=l9_11289.y;
float l9_11318=l9_11289.w;
bool l9_11319=l9_11315;
float l9_11320=l9_11294;
float l9_11321=fast::clamp(l9_11316,l9_11317,l9_11318);
float l9_11322=step(abs(l9_11316-l9_11321),9.9999997e-06);
l9_11320*=(l9_11322+((1.0-float(l9_11319))*(1.0-l9_11322)));
l9_11316=l9_11321;
l9_11284.y=l9_11316;
l9_11294=l9_11320;
}
float2 l9_11323=l9_11284;
bool l9_11324=l9_11285;
float3x3 l9_11325=l9_11286;
if (l9_11324)
{
l9_11323=float2((l9_11325*float3(l9_11323,1.0)).xy);
}
float2 l9_11326=l9_11323;
l9_11284=l9_11326;
float l9_11327=l9_11284.x;
int l9_11328=l9_11287.x;
bool l9_11329=l9_11293;
float l9_11330=l9_11294;
if ((l9_11328==0)||(l9_11328==3))
{
float l9_11331=l9_11327;
float l9_11332=0.0;
float l9_11333=1.0;
bool l9_11334=l9_11329;
float l9_11335=l9_11330;
float l9_11336=fast::clamp(l9_11331,l9_11332,l9_11333);
float l9_11337=step(abs(l9_11331-l9_11336),9.9999997e-06);
l9_11335*=(l9_11337+((1.0-float(l9_11334))*(1.0-l9_11337)));
l9_11331=l9_11336;
l9_11327=l9_11331;
l9_11330=l9_11335;
}
l9_11284.x=l9_11327;
l9_11294=l9_11330;
float l9_11338=l9_11284.y;
int l9_11339=l9_11287.y;
bool l9_11340=l9_11293;
float l9_11341=l9_11294;
if ((l9_11339==0)||(l9_11339==3))
{
float l9_11342=l9_11338;
float l9_11343=0.0;
float l9_11344=1.0;
bool l9_11345=l9_11340;
float l9_11346=l9_11341;
float l9_11347=fast::clamp(l9_11342,l9_11343,l9_11344);
float l9_11348=step(abs(l9_11342-l9_11347),9.9999997e-06);
l9_11346*=(l9_11348+((1.0-float(l9_11345))*(1.0-l9_11348)));
l9_11342=l9_11347;
l9_11338=l9_11342;
l9_11341=l9_11346;
}
l9_11284.y=l9_11338;
l9_11294=l9_11341;
float2 l9_11349=l9_11284;
int l9_11350=l9_11282;
int l9_11351=l9_11283;
float l9_11352=l9_11292;
float2 l9_11353=l9_11349;
int l9_11354=l9_11350;
int l9_11355=l9_11351;
float3 l9_11356=float3(0.0);
if (l9_11354==0)
{
l9_11356=float3(l9_11353,0.0);
}
else
{
if (l9_11354==1)
{
l9_11356=float3(l9_11353.x,(l9_11353.y*0.5)+(0.5-(float(l9_11355)*0.5)),0.0);
}
else
{
l9_11356=float3(l9_11353,float(l9_11355));
}
}
float3 l9_11357=l9_11356;
float3 l9_11358=l9_11357;
float4 l9_11359=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_11358.xy,level(l9_11352));
float4 l9_11360=l9_11359;
if (l9_11290)
{
l9_11360=mix(l9_11291,l9_11360,float4(l9_11294));
}
float4 l9_11361=l9_11360;
l9_11270=l9_11361.x;
float l9_11362=l9_11270;
float3 l9_11363=float3(l9_11173,l9_11268,l9_11362)*N319_scaleXYZ;
float3 l9_11364=mix(l9_11363+(((l9_9812*cos(l9_9822))+(l9_9813*sin(l9_9822)))*l9_11078),l9_11363,float3(l9_9833*N319_VolumeFill));
float3 l9_11365;
if (l9_9819>1.0)
{
l9_11365=l9_11364/float3(0.0);
}
else
{
l9_11365=l9_11364;
}
l9_11364=l9_11365;
tempGlobals.N319_curveDirection=l9_9814;
N319_Result=l9_11364*N319_Scale;
l9_9810=N319_Result;
l9_9797=l9_9810;
l9_9146=l9_9797;
l9_9150=l9_9146;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==7)
{
float l9_11366=0.0;
float l9_11367=float((*sc_set0.UserUniforms).Tweak_N271);
l9_11366=l9_11367;
float l9_11368=0.0;
float l9_11369=(*sc_set0.UserUniforms).Tweak_N273;
l9_11368=l9_11369;
float2 l9_11370=float2(0.0);
float2 l9_11371=(*sc_set0.UserUniforms).Tweak_N270;
l9_11370=l9_11371;
float2 l9_11372=float2(0.0);
float2 l9_11373=(*sc_set0.UserUniforms).Tweak_N272;
l9_11372=l9_11373;
float l9_11374=0.0;
float l9_11375=(*sc_set0.UserUniforms).Tweak_N269;
l9_11374=l9_11375;
float l9_11376=0.0;
float l9_11377=(*sc_set0.UserUniforms).Tweak_N275;
l9_11376=l9_11377;
float l9_11378=0.0;
float l9_11379=float((*sc_set0.UserUniforms).Tweak_N161);
l9_11378=l9_11379;
float3 l9_11380=float3(0.0);
float l9_11381=l9_11366;
float l9_11382=l9_11368;
float2 l9_11383=l9_11370;
float2 l9_11384=l9_11372;
float l9_11385=l9_11374;
float l9_11386=l9_11376;
float l9_11387=l9_11378;
ssGlobals l9_11388=l9_9149;
tempGlobals=l9_11388;
float3 l9_11389=float3(0.0);
N267_Seed=int(l9_11381);
N267_Depth=l9_11382;
N267_Expand=l9_11383;
N267_Offset=l9_11384;
N267_Thickness=l9_11385;
N267_Push=l9_11386;
N267_pushMetod=int(l9_11387);
int l9_11390=0;
l9_11390=ssInstanceID;
int l9_11391=l9_11390;
float l9_11392=float(l9_11391+N267_Seed);
int l9_11393=int(l9_11392);
int l9_11394=l9_11393^(l9_11393*15299);
int l9_11395=l9_11394;
int l9_11396=l9_11395;
int l9_11397=((l9_11396*((l9_11396*1471343)+101146501))+1559861749)&2147483647;
int l9_11398=l9_11397;
int l9_11399=l9_11395*1399;
int l9_11400=((l9_11399*((l9_11399*1471343)+101146501))+1559861749)&2147483647;
int l9_11401=l9_11400;
int l9_11402=l9_11398;
float l9_11403=float(l9_11402)*4.6566129e-10;
int l9_11404=l9_11401;
float l9_11405=float(l9_11404)*4.6566129e-10;
float2 l9_11406=float2(l9_11403,l9_11405);
float2 l9_11407=l9_11406;
float2 l9_11408=l9_11407;
int l9_11409=0;
l9_11409=ssInstanceID;
int l9_11410=l9_11409;
float l9_11411=float(l9_11410);
int l9_11412=int(l9_11411);
int l9_11413=l9_11412^(l9_11412*15299);
int l9_11414=l9_11413;
int l9_11415=l9_11414;
int l9_11416=((l9_11415*((l9_11415*1471343)+101146501))+1559861749)&2147483647;
int l9_11417=l9_11416;
float l9_11418=float(l9_11417)*4.6566129e-10;
float l9_11419=l9_11418;
float l9_11420=l9_11419;
float l9_11421=l9_11420;
float2 l9_11422=(float2(0.5)-l9_11408)+N267_Offset;
float2 l9_11423=fast::clamp(normalize(l9_11422),float2(-0.5),float2(0.5));
float l9_11424=distance(l9_11422,float2(0.0));
float l9_11425=0.0+(((l9_11424-(N267_Push-0.1))*1.0)/((N267_Push-(N267_Push-0.1))+1e-06));
if (N267_pushMetod==1)
{
l9_11422=mix(l9_11423,l9_11422,float2(fast::clamp(l9_11425,0.0,1.0)));
}
else
{
if (N267_pushMetod==2)
{
l9_11422=mix(l9_11422,l9_11423,float2(N267_Push));
}
}
float l9_11426=(*sc_set0.UserUniforms).sc_Camera.aspect;
l9_11422.x*=l9_11426;
float l9_11427=tempGlobals.CameraFOV;
l9_11422*=(tan(radians(l9_11427)*0.5)*2.0);
float l9_11428=(N267_Depth*((l9_11421-0.5)*2.0))*N267_Thickness;
l9_11422*=(N267_Depth+l9_11428);
float3 l9_11429=float3(l9_11422*N267_Expand,(N267_Depth+l9_11428)*(-1.0));
N267_Result=l9_11429;
l9_11389=N267_Result;
l9_11380=l9_11389;
l9_9147=l9_11380;
l9_9150=l9_9147;
}
else
{
l9_9150=l9_9148;
}
}
}
}
}
}
}
}
l9_9139=l9_9150;
l9_9138=l9_9139;
float3 l9_11430=l9_9138;
N111_spawnLocation=l9_11430;
float3 l9_11431=float3(0.0);
float3 l9_11432=float3(0.0);
float3 l9_11433=(*sc_set0.UserUniforms).spawnBox;
l9_11432=l9_11433;
l9_11431=l9_11432;
float3 l9_11434=l9_11431;
N111_spawnBox=l9_11434;
float3 l9_11435=float3(0.0);
float3 l9_11436=float3(0.0);
float3 l9_11437=(*sc_set0.UserUniforms).spawnSphere;
l9_11436=l9_11437;
l9_11435=l9_11436;
float3 l9_11438=l9_11435;
N111_spawnSphere=l9_11438;
float3 l9_11439=float3(0.0);
float3 l9_11440=float3(0.0);
float3 l9_11441=(*sc_set0.UserUniforms).noiseMult;
l9_11440=l9_11441;
l9_11439=l9_11440;
float3 l9_11442=l9_11439;
N111_noiseMult=l9_11442;
float3 l9_11443=float3(0.0);
float3 l9_11444=float3(0.0);
float3 l9_11445=(*sc_set0.UserUniforms).noiseFrequency;
l9_11444=l9_11445;
l9_11443=l9_11444;
float3 l9_11446=l9_11443;
N111_noiseFrequency=l9_11446;
float3 l9_11447=float3(0.0);
float3 l9_11448=float3(0.0);
float3 l9_11449=(*sc_set0.UserUniforms).sNoiseMult;
l9_11448=l9_11449;
l9_11447=l9_11448;
float3 l9_11450=l9_11447;
N111_sNoiseMult=l9_11450;
float3 l9_11451=float3(0.0);
float3 l9_11452=float3(0.0);
float3 l9_11453=(*sc_set0.UserUniforms).sNoiseFrequency;
l9_11452=l9_11453;
l9_11451=l9_11452;
float3 l9_11454=l9_11451;
N111_sNoiseFrequency=l9_11454;
float3 l9_11455=float3(0.0);
float3 l9_11456=float3(0.0);
float3 l9_11457=(*sc_set0.UserUniforms).velocityMin;
l9_11456=l9_11457;
l9_11455=l9_11456;
float3 l9_11458=l9_11455;
N111_velocityMin=l9_11458;
float3 l9_11459=float3(0.0);
float3 l9_11460=float3(0.0);
float3 l9_11461=(*sc_set0.UserUniforms).velocityMax;
l9_11460=l9_11461;
l9_11459=l9_11460;
float3 l9_11462=l9_11459;
N111_velocityMax=l9_11462;
float3 l9_11463=float3(0.0);
float3 l9_11464=float3(0.0);
float3 l9_11465=(*sc_set0.UserUniforms).velocityDrag;
l9_11464=l9_11465;
l9_11463=l9_11464;
float3 l9_11466=l9_11463;
N111_velocityDrag=l9_11466;
float2 l9_11467=float2(0.0);
float2 l9_11468=float2(0.0);
float2 l9_11469=(*sc_set0.UserUniforms).sizeStart;
l9_11468=l9_11469;
l9_11467=l9_11468;
float2 l9_11470=l9_11467;
N111_sizeStart=l9_11470;
float2 l9_11471=float2(0.0);
float2 l9_11472=float2(0.0);
float2 l9_11473=(*sc_set0.UserUniforms).sizeEnd;
l9_11472=l9_11473;
l9_11471=l9_11472;
float2 l9_11474=l9_11471;
N111_sizeEnd=l9_11474;
float2 l9_11475=float2(0.0);
float2 l9_11476=float2(0.0);
float2 l9_11477=(*sc_set0.UserUniforms).sizeStartMax;
l9_11476=l9_11477;
l9_11475=l9_11476;
float2 l9_11478=l9_11475;
N111_sizeStartMax=l9_11478;
float2 l9_11479=float2(0.0);
float2 l9_11480=float2(0.0);
float2 l9_11481=(*sc_set0.UserUniforms).sizeEndMax;
l9_11480=l9_11481;
l9_11479=l9_11480;
float2 l9_11482=l9_11479;
N111_sizeEndMax=l9_11482;
float3 l9_11483=float3(0.0);
float3 l9_11484=float3(0.0);
float3 l9_11485=(*sc_set0.UserUniforms).sizeStart3D;
l9_11484=l9_11485;
l9_11483=l9_11484;
float3 l9_11486=l9_11483;
N111_sizeStart3D=l9_11486;
float3 l9_11487=float3(0.0);
float3 l9_11488=float3(0.0);
float3 l9_11489=(*sc_set0.UserUniforms).sizeEnd3D;
l9_11488=l9_11489;
l9_11487=l9_11488;
float3 l9_11490=l9_11487;
N111_sizeEnd3D=l9_11490;
float3 l9_11491=float3(0.0);
float3 l9_11492=float3(0.0);
float3 l9_11493=(*sc_set0.UserUniforms).sizeStartMax3D;
l9_11492=l9_11493;
l9_11491=l9_11492;
float3 l9_11494=l9_11491;
N111_sizeStartMax3D=l9_11494;
float3 l9_11495=float3(0.0);
float3 l9_11496=float3(0.0);
float3 l9_11497=(*sc_set0.UserUniforms).sizeEndMax3D;
l9_11496=l9_11497;
l9_11495=l9_11496;
float3 l9_11498=l9_11495;
N111_sizeEndMax3D=l9_11498;
float l9_11499=0.0;
float l9_11500=0.0;
float l9_11501=(*sc_set0.UserUniforms).sizeSpeed;
l9_11500=l9_11501;
l9_11499=l9_11500;
float l9_11502=l9_11499;
N111_sizeSpeed=l9_11502;
float l9_11503=0.0;
float l9_11504=0.0;
float l9_11505=(*sc_set0.UserUniforms).gravity;
l9_11504=l9_11505;
l9_11503=l9_11504;
float l9_11506=l9_11503;
N111_gravity=l9_11506;
float3 l9_11507=float3(0.0);
float3 l9_11508=float3(0.0);
float3 l9_11509=(*sc_set0.UserUniforms).localForce;
l9_11508=l9_11509;
l9_11507=l9_11508;
float3 l9_11510=l9_11507;
N111_localForce=l9_11510;
float3 l9_11511=float3(0.0);
l9_11511=tempGlobals.N111_ParticleSpawnPosition;
float l9_11512=0.0;
float l9_11513=(*sc_set0.UserUniforms).timeGlobal;
l9_11512=l9_11513;
float l9_11514=0.0;
float l9_11515=(*sc_set0.UserUniforms).externalTimeInput;
l9_11514=l9_11515;
float l9_11516=0.0;
float l9_11517=(*sc_set0.UserUniforms).externalSeed;
l9_11516=l9_11517;
float l9_11518=0.0;
float l9_11519=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_11518=l9_11519;
float2 l9_11520=float2(0.0);
float2 l9_11521=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_11520=l9_11521;
float l9_11522=0.0;
float l9_11523=(*sc_set0.UserUniforms).spawnDuration;
l9_11522=l9_11523;
float l9_11524=0.0;
float l9_11525;
if ((int(TRAILS_tmp)!=0))
{
l9_11525=1.001;
}
else
{
l9_11525=0.001;
}
l9_11525-=0.001;
l9_11524=l9_11525;
float l9_11526=0.0;
float l9_11527=(*sc_set0.UserUniforms).trailLength;
l9_11526=l9_11527;
float4 l9_11528=float4(0.0);
l9_11528=tempGlobals.VertexColor;
float l9_11529=0.0;
l9_11529=l9_11528.x;
float l9_11530=0.0;
float l9_11531=l9_11524;
bool l9_11532=(l9_11531*1.0)!=0.0;
bool l9_11533;
if (l9_11532)
{
l9_11533=(l9_11529*1.0)!=0.0;
}
else
{
l9_11533=l9_11532;
}
l9_11530=float(l9_11533);
float3 l9_11534=float3(0.0);
float l9_11535=0.0;
float l9_11536=l9_11512;
float l9_11537=l9_11514;
float l9_11538=l9_11516;
float l9_11539=l9_11518;
float2 l9_11540=l9_11520;
float l9_11541=l9_11522;
float l9_11542=l9_11526;
float l9_11543=l9_11530;
ssGlobals l9_11544=tempGlobals;
tempGlobals=l9_11544;
float3 l9_11545=float3(0.0);
float l9_11546=0.0;
N181_timeGlobal=l9_11536;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_11537;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_11538;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_11539;
N181_lifeTimeMinMax=l9_11540;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_11541;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_11542;
N181_isTrailCondition=l9_11543!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_11547=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_11548=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_11547=length(float4(1.0)*l9_11548);
}
N181_globalSeed=N181_externalSeed+l9_11547;
int l9_11549=0;
l9_11549=ssInstanceID;
int l9_11550=l9_11549;
float l9_11551=float(l9_11550);
int l9_11552=int(l9_11551);
int l9_11553=l9_11552^(l9_11552*15299);
int l9_11554=l9_11553;
int l9_11555=l9_11554;
int l9_11556=((l9_11555*((l9_11555*1471343)+101146501))+1559861749)&2147483647;
int l9_11557=l9_11556;
int l9_11558=l9_11554*1399;
int l9_11559=((l9_11558*((l9_11558*1471343)+101146501))+1559861749)&2147483647;
int l9_11560=l9_11559;
int l9_11561=l9_11554*7177;
int l9_11562=((l9_11561*((l9_11561*1471343)+101146501))+1559861749)&2147483647;
int l9_11563=l9_11562;
int l9_11564=l9_11557;
float l9_11565=float(l9_11564)*4.6566129e-10;
int l9_11566=l9_11560;
float l9_11567=float(l9_11566)*4.6566129e-10;
int l9_11568=l9_11563;
float l9_11569=float(l9_11568)*4.6566129e-10;
float3 l9_11570=float3(l9_11565,l9_11567,l9_11569);
float3 l9_11571=l9_11570;
N181_particleSeed=l9_11571;
float l9_11572=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_11573;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_11573=N181_lifeTimeMinMax;
}
else
{
l9_11573=float2(N181_lifeTimeConstant);
}
float2 l9_11574=l9_11573;
float l9_11575=fast::max(l9_11574.x,0.0099999998);
float l9_11576=fast::max(l9_11574.y,0.0099999998);
float l9_11577=tempGlobals.gTimeElapsed;
float l9_11578=l9_11577;
if (N181_ENABLE_EXTERNALTIME)
{
l9_11578=N181_externalTime;
}
float l9_11579=l9_11578;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_11579=N181_timeGlobal*l9_11578;
}
else
{
float l9_11580=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_11580=N181_trailLength;
}
}
float l9_11581=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_11582=0.0;
float l9_11583;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_11583=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_11583=0.0;
}
l9_11582=l9_11583;
float l9_11584=l9_11582;
int l9_11585=0;
l9_11585=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_11586=l9_11585;
l9_11581=fast::max(l9_11584*(1.0-(1.0/float(l9_11586))),0.0);
}
else
{
l9_11581=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_11587=fract(((l9_11578*N181_timeGlobal)*(1.0/(l9_11574.y+l9_11580)))+l9_11581);
l9_11579=l9_11587*(l9_11574.y+l9_11580);
}
float l9_11588=mix(l9_11579/l9_11575,l9_11579/l9_11576,l9_11572);
float l9_11589=fast::clamp(l9_11588,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_11579,l9_11589);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_11590=tempGlobals.Surface_UVCoord0;
l9_11579-=(l9_11590.y*N181_trailLength);
l9_11588=mix(l9_11579/l9_11575,l9_11579/l9_11576,l9_11572);
l9_11589=fast::clamp(l9_11588,0.0,1.0);
}
}
float l9_11591=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_11578-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_11591=1.0;
}
}
}
float l9_11592=l9_11588+l9_11591;
N181_particleAlive=1.0;
if ((l9_11592>0.99989998)||(l9_11579<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_11578*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_11574,l9_11579,l9_11589);
l9_11545=N181_particleSeed;
l9_11546=N181_isTrail;
l9_11534=l9_11545;
l9_11535=l9_11546;
float l9_11593=0.0;
float l9_11594=(*sc_set0.UserUniforms).attractRepelForceStrength;
l9_11593=l9_11594;
float3 l9_11595=float3(0.0);
float3 l9_11596=(*sc_set0.UserUniforms).customForceOrigin;
l9_11595=l9_11596;
float3 l9_11597=l9_11511;
float3 l9_11598=l9_11534;
float l9_11599=l9_11593;
float3 l9_11600=l9_11595;
ssGlobals l9_11601=tempGlobals;
tempGlobals=l9_11601;
N223_OnOff=(int(Tweak_N131_tmp)!=0);
N223_ParticleSpawnPosition=l9_11597;
N223_ParticleSeed=l9_11598;
N223_Strength=l9_11599;
N223_ForceOrigin=l9_11600;
N223_CustomForce=float3(0.0);
float4x4 l9_11602=(*sc_set0.UserUniforms).sc_ModelMatrix;
float4 l9_11603=l9_11602*float4(N223_ParticleSpawnPosition,1.0);
if (N223_OnOff)
{
float3 l9_11604=N223_ForceOrigin;
float3 l9_11605=l9_11603.xyz;
float l9_11606=N223_Strength;
float3 l9_11607=float3(0.0);
if (all(l9_11604==l9_11605))
{
int l9_11608=0;
l9_11608=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_11609=l9_11608;
float3 l9_11610=N223_ParticleSeed*float(l9_11609);
int l9_11611=int(l9_11610.x);
int l9_11612=int(l9_11610.y);
int l9_11613=int(l9_11610.z);
int l9_11614=((l9_11611*15299)^(l9_11612*30133))^(l9_11613*17539);
int l9_11615=l9_11614;
int l9_11616=l9_11615;
int l9_11617=((l9_11616*((l9_11616*1471343)+101146501))+1559861749)&2147483647;
int l9_11618=l9_11617;
int l9_11619=l9_11615*1399;
int l9_11620=((l9_11619*((l9_11619*1471343)+101146501))+1559861749)&2147483647;
int l9_11621=l9_11620;
int l9_11622=l9_11615*7177;
int l9_11623=((l9_11622*((l9_11622*1471343)+101146501))+1559861749)&2147483647;
int l9_11624=l9_11623;
int l9_11625=l9_11618;
float l9_11626=float(l9_11625)*4.6566129e-10;
int l9_11627=l9_11621;
float l9_11628=float(l9_11627)*4.6566129e-10;
int l9_11629=l9_11624;
float l9_11630=float(l9_11629)*4.6566129e-10;
float3 l9_11631=float3(l9_11626,l9_11628,l9_11630);
float3 l9_11632=l9_11631;
l9_11607=normalize((l9_11632-float3(0.5))*2.0);
}
else
{
l9_11607=normalize(l9_11604-l9_11605);
}
float3 l9_11633=l9_11607*l9_11606;
N223_CustomForce+=l9_11633;
}
float3 l9_11634=float3(0.0);
l9_11634=tempGlobals.N111_ParticleSpawnPosition;
float3 l9_11635=float3(0.0);
float3 l9_11636=(*sc_set0.UserUniforms).Tex3dScale;
l9_11635=l9_11636;
float3 l9_11637=float3(0.0);
float3 l9_11638=(*sc_set0.UserUniforms).Tex3dScrollSpeed;
l9_11637=l9_11638;
float3 l9_11639=float3(0.0);
float3 l9_11640=(*sc_set0.UserUniforms).Tex3dForceStrength;
l9_11639=l9_11640;
float3 l9_11641=l9_11634;
float3 l9_11642=l9_11635;
float3 l9_11643=l9_11637;
float3 l9_11644=l9_11639;
ssGlobals l9_11645=tempGlobals;
tempGlobals=l9_11645;
N202_OnOff=(int(Tweak_N133_tmp)!=0);
N202_ParticleSpawnPosition=l9_11641;
N202_ScaleTexture=l9_11642;
N202_ScrollSpeed=l9_11643;
N202_Strength=l9_11644;
N202_CustomForce=float3(0.0);
if (N202_OnOff)
{
float3 l9_11646=N202_ParticleSpawnPosition;
float3 l9_11647=N202_Strength;
float3 l9_11648=l9_11646;
float l9_11649=tempGlobals.gTimeElapsed;
float3 l9_11650=float3(l9_11649)*(N202_ScrollSpeed*0.1);
l9_11648/=(N202_ScaleTexture*2.0);
l9_11648+=l9_11650;
float3 l9_11651=l9_11648;
float4 l9_11652=float4(0.0);
float3 l9_11653=l9_11651;
float l9_11654=0.0;
float4 l9_11655=sc_set0.Tex3d.sample(sc_set0.Tex3dSmpSC,l9_11653,level(l9_11654));
l9_11652=l9_11655;
float4 l9_11656=l9_11652;
float3 l9_11657=l9_11656.xyz;
float3 l9_11658=(l9_11657*2.0)-float3(1.0);
l9_11658*=l9_11647;
float3 l9_11659=l9_11658;
N202_CustomForce+=l9_11659;
}
float3 l9_11660=float3(0.0);
l9_11660=tempGlobals.N155_helixDirection;
float3 l9_11661=float3(0.0);
l9_11661=tempGlobals.N319_curveDirection;
float3 l9_11662=float3(0.0);
float3 l9_11663=(*sc_set0.UserUniforms).Tweak_N314;
l9_11662=l9_11663;
float l9_11664=l9_11535;
float3 l9_11665=l9_11660;
float3 l9_11666=l9_11661;
float3 l9_11667=l9_11662;
ssGlobals l9_11668=tempGlobals;
tempGlobals=l9_11668;
N277_OnOff=(int(Tweak_N313_tmp)!=0);
N277_isTrail=l9_11664!=0.0;
N277_helixDir=l9_11665;
N277_curveDir=l9_11666;
N277_Strength=l9_11667;
N277_Path=NODE_248_DROPLIST_ITEM_tmp;
N277_DirectionForce=float3(0.0);
N277_Direction=float3(0.0);
if (N277_OnOff||N277_isTrail)
{
float3 l9_11669;
if (N277_Path==5)
{
l9_11669=N277_helixDir;
}
else
{
bool3 l9_11670=bool3(N277_Path==6);
l9_11669=float3(l9_11670.x ? N277_curveDir.x : float3(0.0).x,l9_11670.y ? N277_curveDir.y : float3(0.0).y,l9_11670.z ? N277_curveDir.z : float3(0.0).z);
}
float3 l9_11671=l9_11669;
float3 l9_11672=l9_11671;
float3 l9_11673=l9_11672;
if (N277_OnOff)
{
N277_DirectionForce+=(l9_11673*N277_Strength);
}
N277_Direction=l9_11673;
}
float l9_11674=0.0;
float l9_11675=0.0;
float l9_11676=(*sc_set0.UserUniforms).sizeVelScale;
l9_11675=l9_11676;
l9_11674=l9_11675;
float l9_11677=l9_11674;
N111_sizeVelScale=l9_11677;
float l9_11678=0.0;
float l9_11679=0.0;
float l9_11680=float((*sc_set0.UserUniforms).IGNOREVEL!=0);
l9_11679=l9_11680;
l9_11678=l9_11679;
bool l9_11681=l9_11678!=0.0;
N111_ENABLE_IGNOREVEL=l9_11681;
float l9_11682=0.0;
float l9_11683=0.0;
float l9_11684=float((*sc_set0.UserUniforms).NORMALIZESCALETOTRANSFORM!=0);
l9_11683=l9_11684;
l9_11682=l9_11683;
bool l9_11685=l9_11682!=0.0;
N111_ENABLE_IGNORETRANSFORMSCALE=l9_11685;
float2 l9_11686=float2(0.0);
float2 l9_11687=float2(0.0);
float2 l9_11688=(*sc_set0.UserUniforms).velScaleMinMax;
l9_11687=l9_11688;
l9_11686=l9_11687;
float2 l9_11689=l9_11686;
N111_velScaleMinMax=l9_11689;
float2 l9_11690=float2(0.0);
float2 l9_11691=float2(0.0);
float2 l9_11692=(*sc_set0.UserUniforms).rotationRandom;
l9_11691=l9_11692;
l9_11690=l9_11691;
float2 l9_11693=l9_11690;
N111_rotationRandom=l9_11693;
float2 l9_11694=float2(0.0);
float2 l9_11695=float2(0.0);
float2 l9_11696=(*sc_set0.UserUniforms).rotationRate;
l9_11695=l9_11696;
l9_11694=l9_11695;
float2 l9_11697=l9_11694;
N111_rotationRate=l9_11697;
float2 l9_11698=float2(0.0);
float2 l9_11699=float2(0.0);
float2 l9_11700=(*sc_set0.UserUniforms).rotationRandomX;
l9_11699=l9_11700;
l9_11698=l9_11699;
float2 l9_11701=l9_11698;
N111_rotationRandomX=l9_11701;
float2 l9_11702=float2(0.0);
float2 l9_11703=float2(0.0);
float2 l9_11704=(*sc_set0.UserUniforms).rotationRateX;
l9_11703=l9_11704;
l9_11702=l9_11703;
float2 l9_11705=l9_11702;
N111_rotationRateX=l9_11705;
float2 l9_11706=float2(0.0);
float2 l9_11707=float2(0.0);
float2 l9_11708=(*sc_set0.UserUniforms).randomRotationY;
l9_11707=l9_11708;
l9_11706=l9_11707;
float2 l9_11709=l9_11706;
N111_rotationRandomY=l9_11709;
float2 l9_11710=float2(0.0);
float2 l9_11711=float2(0.0);
float2 l9_11712=(*sc_set0.UserUniforms).rotationRateY;
l9_11711=l9_11712;
l9_11710=l9_11711;
float2 l9_11713=l9_11710;
N111_rotationRateY=l9_11713;
float2 l9_11714=float2(0.0);
float2 l9_11715=float2(0.0);
float2 l9_11716=(*sc_set0.UserUniforms).randomRotationZ;
l9_11715=l9_11716;
l9_11714=l9_11715;
float2 l9_11717=l9_11714;
N111_rotationRandomZ=l9_11717;
float2 l9_11718=float2(0.0);
float2 l9_11719=float2(0.0);
float2 l9_11720=(*sc_set0.UserUniforms).rotationRateZ;
l9_11719=l9_11720;
l9_11718=l9_11719;
float2 l9_11721=l9_11718;
N111_rotationRateZ=l9_11721;
float l9_11722=0.0;
float l9_11723=0.0;
float l9_11724=(*sc_set0.UserUniforms).rotationDrag;
l9_11723=l9_11724;
l9_11722=l9_11723;
float l9_11725=l9_11722;
N111_rotationDrag=l9_11725;
float l9_11726=0.0;
float l9_11727=0.0;
float l9_11728=float((*sc_set0.UserUniforms).CENTER_BBOX!=0);
l9_11727=l9_11728;
l9_11726=l9_11727;
bool l9_11729=l9_11726!=0.0;
N111_ENABLE_CENTER_IN_BBOX=l9_11729;
float3 l9_11730=float3(0.0);
float3 l9_11731=float3(0.0);
float3 l9_11732=(*sc_set0.UserUniforms).displaceScale;
l9_11731=l9_11732;
l9_11730=l9_11731;
float3 l9_11733=l9_11730;
N111_ScaleDisplace=l9_11733;
float3 l9_11734=float3(0.0);
float3 l9_11735=float3(0.0);
float3 l9_11736=(*sc_set0.UserUniforms).displaceSpeed;
l9_11735=l9_11736;
l9_11734=l9_11735;
float3 l9_11737=l9_11734;
N111_ScrollSpeedDisplace=l9_11737;
float3 l9_11738=float3(0.0);
float3 l9_11739=float3(0.0);
float3 l9_11740=(*sc_set0.UserUniforms).displaceStrength;
l9_11739=l9_11740;
l9_11738=l9_11739;
float3 l9_11741=l9_11738;
N111_DisplaceStrength=l9_11741;
float3 l9_11742=float3(0.0);
float3 l9_11743=float3(0.0);
float3 l9_11744=(*sc_set0.UserUniforms).orbitAxis;
l9_11743=l9_11744;
l9_11742=l9_11743;
float3 l9_11745=l9_11742;
N111_AxisOrbit=l9_11745;
float3 l9_11746=float3(0.0);
float3 l9_11747=float3(0.0);
float3 l9_11748=(*sc_set0.UserUniforms).orbitCenter;
l9_11747=l9_11748;
l9_11746=l9_11747;
float3 l9_11749=l9_11746;
N111_CenterOrbit=l9_11749;
float2 l9_11750=float2(0.0);
float2 l9_11751=float2(0.0);
float2 l9_11752=(*sc_set0.UserUniforms).orbitMinMaxAngle;
l9_11751=l9_11752;
l9_11750=l9_11751;
float2 l9_11753=l9_11750;
N111_MinMaxOrbitAngle=l9_11753;
float2 l9_11754=float2(0.0);
float2 l9_11755=float2(0.0);
float2 l9_11756=(*sc_set0.UserUniforms).orbitMinMaxSpeed;
l9_11755=l9_11756;
l9_11754=l9_11755;
float2 l9_11757=l9_11754;
N111_MinMaxOrbitSpeed=l9_11757;
float l9_11758=0.0;
float l9_11759=0.0;
float l9_11760=(*sc_set0.UserUniforms).fadeDistanceVisible;
l9_11759=l9_11760;
l9_11758=l9_11759;
float l9_11761=l9_11758;
N111_fadeDistanceVisible=l9_11761;
float l9_11762=0.0;
float l9_11763=0.0;
float l9_11764=(*sc_set0.UserUniforms).fadeDistanceInvisible;
l9_11763=l9_11764;
l9_11762=l9_11763;
float l9_11765=l9_11762;
N111_fadeDistanceInvisible=l9_11765;
float3 l9_11766=float3(0.0);
float l9_11767=0.0;
float l9_11768=(*sc_set0.UserUniforms).timeGlobal;
l9_11767=l9_11768;
float l9_11769=0.0;
float l9_11770=(*sc_set0.UserUniforms).externalTimeInput;
l9_11769=l9_11770;
float l9_11771=0.0;
float l9_11772=(*sc_set0.UserUniforms).externalSeed;
l9_11771=l9_11772;
float l9_11773=0.0;
float l9_11774=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_11773=l9_11774;
float2 l9_11775=float2(0.0);
float2 l9_11776=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_11775=l9_11776;
float l9_11777=0.0;
float l9_11778=(*sc_set0.UserUniforms).spawnDuration;
l9_11777=l9_11778;
float l9_11779=0.0;
float l9_11780;
if ((int(TRAILS_tmp)!=0))
{
l9_11780=1.001;
}
else
{
l9_11780=0.001;
}
l9_11780-=0.001;
l9_11779=l9_11780;
float l9_11781=0.0;
float l9_11782=(*sc_set0.UserUniforms).trailLength;
l9_11781=l9_11782;
float4 l9_11783=float4(0.0);
l9_11783=tempGlobals.VertexColor;
float l9_11784=0.0;
l9_11784=l9_11783.x;
float l9_11785=0.0;
float l9_11786=l9_11779;
bool l9_11787=(l9_11786*1.0)!=0.0;
bool l9_11788;
if (l9_11787)
{
l9_11788=(l9_11784*1.0)!=0.0;
}
else
{
l9_11788=l9_11787;
}
l9_11785=float(l9_11788);
float l9_11789=0.0;
float l9_11790=l9_11767;
float l9_11791=l9_11769;
float l9_11792=l9_11771;
float l9_11793=l9_11773;
float2 l9_11794=l9_11775;
float l9_11795=l9_11777;
float l9_11796=l9_11781;
float l9_11797=l9_11785;
ssGlobals l9_11798=tempGlobals;
tempGlobals=l9_11798;
float l9_11799=0.0;
N181_timeGlobal=l9_11790;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_11791;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_11792;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_11793;
N181_lifeTimeMinMax=l9_11794;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_11795;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_11796;
N181_isTrailCondition=l9_11797!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_11800=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_11801=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_11800=length(float4(1.0)*l9_11801);
}
N181_globalSeed=N181_externalSeed+l9_11800;
int l9_11802=0;
l9_11802=ssInstanceID;
int l9_11803=l9_11802;
float l9_11804=float(l9_11803);
int l9_11805=int(l9_11804);
int l9_11806=l9_11805^(l9_11805*15299);
int l9_11807=l9_11806;
int l9_11808=l9_11807;
int l9_11809=((l9_11808*((l9_11808*1471343)+101146501))+1559861749)&2147483647;
int l9_11810=l9_11809;
int l9_11811=l9_11807*1399;
int l9_11812=((l9_11811*((l9_11811*1471343)+101146501))+1559861749)&2147483647;
int l9_11813=l9_11812;
int l9_11814=l9_11807*7177;
int l9_11815=((l9_11814*((l9_11814*1471343)+101146501))+1559861749)&2147483647;
int l9_11816=l9_11815;
int l9_11817=l9_11810;
float l9_11818=float(l9_11817)*4.6566129e-10;
int l9_11819=l9_11813;
float l9_11820=float(l9_11819)*4.6566129e-10;
int l9_11821=l9_11816;
float l9_11822=float(l9_11821)*4.6566129e-10;
float3 l9_11823=float3(l9_11818,l9_11820,l9_11822);
float3 l9_11824=l9_11823;
N181_particleSeed=l9_11824;
float l9_11825=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_11826;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_11826=N181_lifeTimeMinMax;
}
else
{
l9_11826=float2(N181_lifeTimeConstant);
}
float2 l9_11827=l9_11826;
float l9_11828=fast::max(l9_11827.x,0.0099999998);
float l9_11829=fast::max(l9_11827.y,0.0099999998);
float l9_11830=tempGlobals.gTimeElapsed;
float l9_11831=l9_11830;
if (N181_ENABLE_EXTERNALTIME)
{
l9_11831=N181_externalTime;
}
float l9_11832=l9_11831;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_11832=N181_timeGlobal*l9_11831;
}
else
{
float l9_11833=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_11833=N181_trailLength;
}
}
float l9_11834=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_11835=0.0;
float l9_11836;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_11836=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_11836=0.0;
}
l9_11835=l9_11836;
float l9_11837=l9_11835;
int l9_11838=0;
l9_11838=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_11839=l9_11838;
l9_11834=fast::max(l9_11837*(1.0-(1.0/float(l9_11839))),0.0);
}
else
{
l9_11834=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_11840=fract(((l9_11831*N181_timeGlobal)*(1.0/(l9_11827.y+l9_11833)))+l9_11834);
l9_11832=l9_11840*(l9_11827.y+l9_11833);
}
float l9_11841=mix(l9_11832/l9_11828,l9_11832/l9_11829,l9_11825);
float l9_11842=fast::clamp(l9_11841,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_11832,l9_11842);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_11843=tempGlobals.Surface_UVCoord0;
l9_11832-=(l9_11843.y*N181_trailLength);
l9_11841=mix(l9_11832/l9_11828,l9_11832/l9_11829,l9_11825);
l9_11842=fast::clamp(l9_11841,0.0,1.0);
}
}
float l9_11844=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_11831-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_11844=1.0;
}
}
}
float l9_11845=l9_11841+l9_11844;
N181_particleAlive=1.0;
if ((l9_11845>0.99989998)||(l9_11832<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_11831*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_11827,l9_11832,l9_11842);
l9_11799=N181_isTrail;
l9_11789=l9_11799;
float3 l9_11846=float3(0.0);
l9_11846=tempGlobals.N155_helixDirection;
float3 l9_11847=float3(0.0);
l9_11847=tempGlobals.N319_curveDirection;
float3 l9_11848=float3(0.0);
float3 l9_11849=(*sc_set0.UserUniforms).Tweak_N314;
l9_11848=l9_11849;
float3 l9_11850=float3(0.0);
float l9_11851=l9_11789;
float3 l9_11852=l9_11846;
float3 l9_11853=l9_11847;
float3 l9_11854=l9_11848;
ssGlobals l9_11855=tempGlobals;
tempGlobals=l9_11855;
float3 l9_11856=float3(0.0);
N277_OnOff=(int(Tweak_N313_tmp)!=0);
N277_isTrail=l9_11851!=0.0;
N277_helixDir=l9_11852;
N277_curveDir=l9_11853;
N277_Strength=l9_11854;
N277_Path=NODE_248_DROPLIST_ITEM_tmp;
N277_DirectionForce=float3(0.0);
N277_Direction=float3(0.0);
if (N277_OnOff||N277_isTrail)
{
float3 l9_11857;
if (N277_Path==5)
{
l9_11857=N277_helixDir;
}
else
{
bool3 l9_11858=bool3(N277_Path==6);
l9_11857=float3(l9_11858.x ? N277_curveDir.x : float3(0.0).x,l9_11858.y ? N277_curveDir.y : float3(0.0).y,l9_11858.z ? N277_curveDir.z : float3(0.0).z);
}
float3 l9_11859=l9_11857;
float3 l9_11860=l9_11859;
float3 l9_11861=l9_11860;
if (N277_OnOff)
{
N277_DirectionForce+=(l9_11861*N277_Strength);
}
N277_Direction=l9_11861;
}
l9_11856=N277_Direction;
l9_11850=l9_11856;
l9_11766=l9_11850;
float3 l9_11862=l9_11766;
N111_tangentIN=l9_11862;
float3 l9_11863=float3(0.0);
N111_particleSeed=N111_particleSeedIn;
N111_globalSeed=N111_globalSeedIn;
float l9_11864=N111_particleSeed.x;
float l9_11865=N111_particleSeed.y;
float l9_11866=N111_particleSeed.z;
float3 l9_11867=fract((float3(l9_11864,l9_11865,l9_11866)*3048.28)+float3(N111_globalSeed))-float3(0.5);
float3 l9_11868=fract((N111_particleSeed*374.57129)+float3(N111_globalSeed))-float3(0.5);
float3 l9_11869=normalize(l9_11868+float3(1e-06));
float l9_11870=fract(N111_particleSeed.x+N111_globalSeed);
float l9_11871=l9_11870;
float l9_11872=0.33333334;
float l9_11873;
if (l9_11871<=0.0)
{
l9_11873=0.0;
}
else
{
l9_11873=pow(l9_11871,l9_11872);
}
float l9_11874=l9_11873;
float l9_11875=l9_11874;
l9_11869*=l9_11875;
l9_11869/=float3(2.0);
float l9_11876=fract((N111_particleSeed.x*334.59122)+N111_globalSeed);
float l9_11877=fract((N111_particleSeed.y*41.231232)+N111_globalSeed);
float l9_11878=fract((N111_particleSeed.z*18.984529)+N111_globalSeed);
float l9_11879=fract((N111_particleSeed.x*654.15588)+N111_globalSeed);
float l9_11880=fract((N111_particleSeed.y*45.722408)+N111_globalSeed);
float3 l9_11881=(float3(l9_11879,l9_11880,l9_11878)-float3(0.5))*2.0;
float3 l9_11882=float3(l9_11879,l9_11880,l9_11878);
float l9_11883=fract((N111_particleSeed.z*15.32451)+N111_globalSeed);
float2 l9_11884=fract((N111_particleSeed.xz*582.65741)+float2(N111_globalSeed));
float2 l9_11885=N111_timeValuesIn.xy;
float l9_11886=N111_timeValuesIn.z;
float l9_11887=N111_timeValuesIn.w;
N111_cameraFade_trailHeadTime_taper=float4(0.0);
float3 l9_11888=l9_11863;
float3 l9_11889=l9_11863;
float3 l9_11890=l9_11863;
if ((int(INILOCATION_tmp)!=0))
{
l9_11890=N111_spawnLocation;
}
if ((int(BOXSPAWN_tmp)!=0))
{
l9_11888=N111_spawnBox*l9_11867;
}
if ((int(SPHERESPAWN_tmp)!=0))
{
l9_11889=N111_spawnSphere*l9_11869;
}
float3 l9_11891=(l9_11890+l9_11889)+l9_11888;
float3 l9_11892=l9_11863;
if ((int(NOISE_tmp)!=0))
{
float3 l9_11893=N111_noiseFrequency;
float3 l9_11894=N111_noiseMult;
float3 l9_11895=l9_11881;
float l9_11896=l9_11887;
float l9_11897=sin(l9_11896*l9_11893.x);
float l9_11898=sin(l9_11896*l9_11893.y);
float l9_11899=sin(l9_11896*l9_11893.z);
float3 l9_11900=(float3(l9_11897,l9_11898,l9_11899)*l9_11894)*l9_11895;
float3 l9_11901=l9_11900;
l9_11892+=l9_11901;
}
if ((int(SNOISE_tmp)!=0))
{
float l9_11902=l9_11878;
float l9_11903=l9_11879;
float l9_11904=l9_11880;
float3 l9_11905=N111_sNoiseFrequency;
float3 l9_11906=N111_sNoiseMult;
float3 l9_11907=l9_11881;
float l9_11908=l9_11886;
float2 l9_11909=float2(l9_11902*l9_11908,l9_11905.x);
float2 l9_11910=floor(l9_11909+float2(dot(l9_11909,float2(0.36602542))));
float2 l9_11911=(l9_11909-l9_11910)+float2(dot(l9_11910,float2(0.21132487)));
float2 l9_11912=float2(0.0);
bool2 l9_11913=bool2(l9_11911.x>l9_11911.y);
l9_11912=float2(l9_11913.x ? float2(1.0,0.0).x : float2(0.0,1.0).x,l9_11913.y ? float2(1.0,0.0).y : float2(0.0,1.0).y);
float4 l9_11914=l9_11911.xyxy+float4(0.21132487,0.21132487,-0.57735026,-0.57735026);
float2 l9_11915=l9_11914.xy-l9_11912;
l9_11914=float4(l9_11915.x,l9_11915.y,l9_11914.z,l9_11914.w);
l9_11910=mod(l9_11910,float2(289.0));
float3 l9_11916=float3(l9_11910.y)+float3(0.0,l9_11912.y,1.0);
float3 l9_11917=mod(((l9_11916*34.0)+float3(1.0))*l9_11916,float3(289.0));
float3 l9_11918=(l9_11917+float3(l9_11910.x))+float3(0.0,l9_11912.x,1.0);
float3 l9_11919=mod(((l9_11918*34.0)+float3(1.0))*l9_11918,float3(289.0));
float3 l9_11920=l9_11919;
float3 l9_11921=fast::max(float3(0.5)-float3(dot(l9_11911,l9_11911),dot(l9_11914.xy,l9_11914.xy),dot(l9_11914.zw,l9_11914.zw)),float3(0.0));
l9_11921*=l9_11921;
l9_11921*=l9_11921;
float3 l9_11922=(fract(l9_11920*float3(0.024390243))*2.0)-float3(1.0);
float3 l9_11923=abs(l9_11922)-float3(0.5);
float3 l9_11924=floor(l9_11922+float3(0.5));
float3 l9_11925=l9_11922-l9_11924;
l9_11921*=(float3(1.7928429)-(((l9_11925*l9_11925)+(l9_11923*l9_11923))*0.85373473));
float3 l9_11926=float3(0.0);
l9_11926.x=(l9_11925.x*l9_11911.x)+(l9_11923.x*l9_11911.y);
float2 l9_11927=(l9_11925.yz*l9_11914.xz)+(l9_11923.yz*l9_11914.yw);
l9_11926=float3(l9_11926.x,l9_11927.x,l9_11927.y);
float l9_11928=130.0*dot(l9_11921,l9_11926);
float l9_11929=l9_11928;
float2 l9_11930=float2(l9_11903*l9_11908,l9_11905.y);
float2 l9_11931=floor(l9_11930+float2(dot(l9_11930,float2(0.36602542))));
float2 l9_11932=(l9_11930-l9_11931)+float2(dot(l9_11931,float2(0.21132487)));
float2 l9_11933=float2(0.0);
bool2 l9_11934=bool2(l9_11932.x>l9_11932.y);
l9_11933=float2(l9_11934.x ? float2(1.0,0.0).x : float2(0.0,1.0).x,l9_11934.y ? float2(1.0,0.0).y : float2(0.0,1.0).y);
float4 l9_11935=l9_11932.xyxy+float4(0.21132487,0.21132487,-0.57735026,-0.57735026);
float2 l9_11936=l9_11935.xy-l9_11933;
l9_11935=float4(l9_11936.x,l9_11936.y,l9_11935.z,l9_11935.w);
l9_11931=mod(l9_11931,float2(289.0));
float3 l9_11937=float3(l9_11931.y)+float3(0.0,l9_11933.y,1.0);
float3 l9_11938=mod(((l9_11937*34.0)+float3(1.0))*l9_11937,float3(289.0));
float3 l9_11939=(l9_11938+float3(l9_11931.x))+float3(0.0,l9_11933.x,1.0);
float3 l9_11940=mod(((l9_11939*34.0)+float3(1.0))*l9_11939,float3(289.0));
float3 l9_11941=l9_11940;
float3 l9_11942=fast::max(float3(0.5)-float3(dot(l9_11932,l9_11932),dot(l9_11935.xy,l9_11935.xy),dot(l9_11935.zw,l9_11935.zw)),float3(0.0));
l9_11942*=l9_11942;
l9_11942*=l9_11942;
float3 l9_11943=(fract(l9_11941*float3(0.024390243))*2.0)-float3(1.0);
float3 l9_11944=abs(l9_11943)-float3(0.5);
float3 l9_11945=floor(l9_11943+float3(0.5));
float3 l9_11946=l9_11943-l9_11945;
l9_11942*=(float3(1.7928429)-(((l9_11946*l9_11946)+(l9_11944*l9_11944))*0.85373473));
float3 l9_11947=float3(0.0);
l9_11947.x=(l9_11946.x*l9_11932.x)+(l9_11944.x*l9_11932.y);
float2 l9_11948=(l9_11946.yz*l9_11935.xz)+(l9_11944.yz*l9_11935.yw);
l9_11947=float3(l9_11947.x,l9_11948.x,l9_11948.y);
float l9_11949=130.0*dot(l9_11942,l9_11947);
float l9_11950=l9_11949;
float2 l9_11951=float2(l9_11904*l9_11908,l9_11905.z);
float2 l9_11952=floor(l9_11951+float2(dot(l9_11951,float2(0.36602542))));
float2 l9_11953=(l9_11951-l9_11952)+float2(dot(l9_11952,float2(0.21132487)));
float2 l9_11954=float2(0.0);
bool2 l9_11955=bool2(l9_11953.x>l9_11953.y);
l9_11954=float2(l9_11955.x ? float2(1.0,0.0).x : float2(0.0,1.0).x,l9_11955.y ? float2(1.0,0.0).y : float2(0.0,1.0).y);
float4 l9_11956=l9_11953.xyxy+float4(0.21132487,0.21132487,-0.57735026,-0.57735026);
float2 l9_11957=l9_11956.xy-l9_11954;
l9_11956=float4(l9_11957.x,l9_11957.y,l9_11956.z,l9_11956.w);
l9_11952=mod(l9_11952,float2(289.0));
float3 l9_11958=float3(l9_11952.y)+float3(0.0,l9_11954.y,1.0);
float3 l9_11959=mod(((l9_11958*34.0)+float3(1.0))*l9_11958,float3(289.0));
float3 l9_11960=(l9_11959+float3(l9_11952.x))+float3(0.0,l9_11954.x,1.0);
float3 l9_11961=mod(((l9_11960*34.0)+float3(1.0))*l9_11960,float3(289.0));
float3 l9_11962=l9_11961;
float3 l9_11963=fast::max(float3(0.5)-float3(dot(l9_11953,l9_11953),dot(l9_11956.xy,l9_11956.xy),dot(l9_11956.zw,l9_11956.zw)),float3(0.0));
l9_11963*=l9_11963;
l9_11963*=l9_11963;
float3 l9_11964=(fract(l9_11962*float3(0.024390243))*2.0)-float3(1.0);
float3 l9_11965=abs(l9_11964)-float3(0.5);
float3 l9_11966=floor(l9_11964+float3(0.5));
float3 l9_11967=l9_11964-l9_11966;
l9_11963*=(float3(1.7928429)-(((l9_11967*l9_11967)+(l9_11965*l9_11965))*0.85373473));
float3 l9_11968=float3(0.0);
l9_11968.x=(l9_11967.x*l9_11953.x)+(l9_11965.x*l9_11953.y);
float2 l9_11969=(l9_11967.yz*l9_11956.xz)+(l9_11965.yz*l9_11956.yw);
l9_11968=float3(l9_11968.x,l9_11969.x,l9_11969.y);
float l9_11970=130.0*dot(l9_11963,l9_11968);
float l9_11971=l9_11970;
float3 l9_11972=(float3(l9_11929,l9_11950,l9_11971)*l9_11906)*l9_11907;
l9_11892+=l9_11972;
}
float3 l9_11973=float3(0.0,((N111_gravity/2.0)*l9_11886)*l9_11886,0.0);
float3 l9_11974=l9_11863;
if ((int(FORCE_tmp)!=0))
{
l9_11974=((N111_localForce/float3(2.0))*l9_11886)*l9_11886;
}
float3 l9_11975=l9_11863;
if ((int(CUSTOMFORCE_tmp)!=0))
{
tempGlobals.N111_ParticleSpawnPosition=l9_11891;
float3 l9_11976=float3(0.0);
float3 l9_11977=float3(0.0);
l9_11977=tempGlobals.N111_ParticleSpawnPosition;
float l9_11978=0.0;
float l9_11979=(*sc_set0.UserUniforms).timeGlobal;
l9_11978=l9_11979;
float l9_11980=0.0;
float l9_11981=(*sc_set0.UserUniforms).externalTimeInput;
l9_11980=l9_11981;
float l9_11982=0.0;
float l9_11983=(*sc_set0.UserUniforms).externalSeed;
l9_11982=l9_11983;
float l9_11984=0.0;
float l9_11985=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_11984=l9_11985;
float2 l9_11986=float2(0.0);
float2 l9_11987=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_11986=l9_11987;
float l9_11988=0.0;
float l9_11989=(*sc_set0.UserUniforms).spawnDuration;
l9_11988=l9_11989;
float l9_11990=0.0;
float l9_11991;
if ((int(TRAILS_tmp)!=0))
{
l9_11991=1.001;
}
else
{
l9_11991=0.001;
}
l9_11991-=0.001;
l9_11990=l9_11991;
float l9_11992=0.0;
float l9_11993=(*sc_set0.UserUniforms).trailLength;
l9_11992=l9_11993;
float4 l9_11994=float4(0.0);
l9_11994=tempGlobals.VertexColor;
float l9_11995=0.0;
l9_11995=l9_11994.x;
float l9_11996=0.0;
float l9_11997=l9_11990;
bool l9_11998=(l9_11997*1.0)!=0.0;
bool l9_11999;
if (l9_11998)
{
l9_11999=(l9_11995*1.0)!=0.0;
}
else
{
l9_11999=l9_11998;
}
l9_11996=float(l9_11999);
float3 l9_12000=float3(0.0);
float l9_12001=0.0;
float l9_12002=l9_11978;
float l9_12003=l9_11980;
float l9_12004=l9_11982;
float l9_12005=l9_11984;
float2 l9_12006=l9_11986;
float l9_12007=l9_11988;
float l9_12008=l9_11992;
float l9_12009=l9_11996;
ssGlobals l9_12010=tempGlobals;
tempGlobals=l9_12010;
float3 l9_12011=float3(0.0);
float l9_12012=0.0;
N181_timeGlobal=l9_12002;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_12003;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_12004;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_12005;
N181_lifeTimeMinMax=l9_12006;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_12007;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_12008;
N181_isTrailCondition=l9_12009!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_12013=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_12014=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_12013=length(float4(1.0)*l9_12014);
}
N181_globalSeed=N181_externalSeed+l9_12013;
int l9_12015=0;
l9_12015=ssInstanceID;
int l9_12016=l9_12015;
float l9_12017=float(l9_12016);
int l9_12018=int(l9_12017);
int l9_12019=l9_12018^(l9_12018*15299);
int l9_12020=l9_12019;
int l9_12021=l9_12020;
int l9_12022=((l9_12021*((l9_12021*1471343)+101146501))+1559861749)&2147483647;
int l9_12023=l9_12022;
int l9_12024=l9_12020*1399;
int l9_12025=((l9_12024*((l9_12024*1471343)+101146501))+1559861749)&2147483647;
int l9_12026=l9_12025;
int l9_12027=l9_12020*7177;
int l9_12028=((l9_12027*((l9_12027*1471343)+101146501))+1559861749)&2147483647;
int l9_12029=l9_12028;
int l9_12030=l9_12023;
float l9_12031=float(l9_12030)*4.6566129e-10;
int l9_12032=l9_12026;
float l9_12033=float(l9_12032)*4.6566129e-10;
int l9_12034=l9_12029;
float l9_12035=float(l9_12034)*4.6566129e-10;
float3 l9_12036=float3(l9_12031,l9_12033,l9_12035);
float3 l9_12037=l9_12036;
N181_particleSeed=l9_12037;
float l9_12038=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_12039;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_12039=N181_lifeTimeMinMax;
}
else
{
l9_12039=float2(N181_lifeTimeConstant);
}
float2 l9_12040=l9_12039;
float l9_12041=fast::max(l9_12040.x,0.0099999998);
float l9_12042=fast::max(l9_12040.y,0.0099999998);
float l9_12043=tempGlobals.gTimeElapsed;
float l9_12044=l9_12043;
if (N181_ENABLE_EXTERNALTIME)
{
l9_12044=N181_externalTime;
}
float l9_12045=l9_12044;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_12045=N181_timeGlobal*l9_12044;
}
else
{
float l9_12046=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_12046=N181_trailLength;
}
}
float l9_12047=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_12048=0.0;
float l9_12049;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_12049=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_12049=0.0;
}
l9_12048=l9_12049;
float l9_12050=l9_12048;
int l9_12051=0;
l9_12051=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_12052=l9_12051;
l9_12047=fast::max(l9_12050*(1.0-(1.0/float(l9_12052))),0.0);
}
else
{
l9_12047=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_12053=fract(((l9_12044*N181_timeGlobal)*(1.0/(l9_12040.y+l9_12046)))+l9_12047);
l9_12045=l9_12053*(l9_12040.y+l9_12046);
}
float l9_12054=mix(l9_12045/l9_12041,l9_12045/l9_12042,l9_12038);
float l9_12055=fast::clamp(l9_12054,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_12045,l9_12055);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_12056=tempGlobals.Surface_UVCoord0;
l9_12045-=(l9_12056.y*N181_trailLength);
l9_12054=mix(l9_12045/l9_12041,l9_12045/l9_12042,l9_12038);
l9_12055=fast::clamp(l9_12054,0.0,1.0);
}
}
float l9_12057=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_12044-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_12057=1.0;
}
}
}
float l9_12058=l9_12054+l9_12057;
N181_particleAlive=1.0;
if ((l9_12058>0.99989998)||(l9_12045<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_12044*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_12040,l9_12045,l9_12055);
l9_12011=N181_particleSeed;
l9_12012=N181_isTrail;
l9_12000=l9_12011;
l9_12001=l9_12012;
float l9_12059=0.0;
float l9_12060=(*sc_set0.UserUniforms).attractRepelForceStrength;
l9_12059=l9_12060;
float3 l9_12061=float3(0.0);
float3 l9_12062=(*sc_set0.UserUniforms).customForceOrigin;
l9_12061=l9_12062;
float3 l9_12063=float3(0.0);
float3 l9_12064=l9_11977;
float3 l9_12065=l9_12000;
float l9_12066=l9_12059;
float3 l9_12067=l9_12061;
ssGlobals l9_12068=tempGlobals;
tempGlobals=l9_12068;
float3 l9_12069=float3(0.0);
N223_OnOff=(int(Tweak_N131_tmp)!=0);
N223_ParticleSpawnPosition=l9_12064;
N223_ParticleSeed=l9_12065;
N223_Strength=l9_12066;
N223_ForceOrigin=l9_12067;
N223_CustomForce=float3(0.0);
float4x4 l9_12070=(*sc_set0.UserUniforms).sc_ModelMatrix;
float4 l9_12071=l9_12070*float4(N223_ParticleSpawnPosition,1.0);
if (N223_OnOff)
{
float3 l9_12072=N223_ForceOrigin;
float3 l9_12073=l9_12071.xyz;
float l9_12074=N223_Strength;
float3 l9_12075=float3(0.0);
if (all(l9_12072==l9_12073))
{
int l9_12076=0;
l9_12076=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_12077=l9_12076;
float3 l9_12078=N223_ParticleSeed*float(l9_12077);
int l9_12079=int(l9_12078.x);
int l9_12080=int(l9_12078.y);
int l9_12081=int(l9_12078.z);
int l9_12082=((l9_12079*15299)^(l9_12080*30133))^(l9_12081*17539);
int l9_12083=l9_12082;
int l9_12084=l9_12083;
int l9_12085=((l9_12084*((l9_12084*1471343)+101146501))+1559861749)&2147483647;
int l9_12086=l9_12085;
int l9_12087=l9_12083*1399;
int l9_12088=((l9_12087*((l9_12087*1471343)+101146501))+1559861749)&2147483647;
int l9_12089=l9_12088;
int l9_12090=l9_12083*7177;
int l9_12091=((l9_12090*((l9_12090*1471343)+101146501))+1559861749)&2147483647;
int l9_12092=l9_12091;
int l9_12093=l9_12086;
float l9_12094=float(l9_12093)*4.6566129e-10;
int l9_12095=l9_12089;
float l9_12096=float(l9_12095)*4.6566129e-10;
int l9_12097=l9_12092;
float l9_12098=float(l9_12097)*4.6566129e-10;
float3 l9_12099=float3(l9_12094,l9_12096,l9_12098);
float3 l9_12100=l9_12099;
l9_12075=normalize((l9_12100-float3(0.5))*2.0);
}
else
{
l9_12075=normalize(l9_12072-l9_12073);
}
float3 l9_12101=l9_12075*l9_12074;
N223_CustomForce+=l9_12101;
}
l9_12069=N223_CustomForce;
l9_12063=l9_12069;
float3 l9_12102=float3(0.0);
l9_12102=tempGlobals.N111_ParticleSpawnPosition;
float3 l9_12103=float3(0.0);
float3 l9_12104=(*sc_set0.UserUniforms).Tex3dScale;
l9_12103=l9_12104;
float3 l9_12105=float3(0.0);
float3 l9_12106=(*sc_set0.UserUniforms).Tex3dScrollSpeed;
l9_12105=l9_12106;
float3 l9_12107=float3(0.0);
float3 l9_12108=(*sc_set0.UserUniforms).Tex3dForceStrength;
l9_12107=l9_12108;
float3 l9_12109=float3(0.0);
float3 l9_12110=l9_12102;
float3 l9_12111=l9_12103;
float3 l9_12112=l9_12105;
float3 l9_12113=l9_12107;
ssGlobals l9_12114=tempGlobals;
tempGlobals=l9_12114;
float3 l9_12115=float3(0.0);
N202_OnOff=(int(Tweak_N133_tmp)!=0);
N202_ParticleSpawnPosition=l9_12110;
N202_ScaleTexture=l9_12111;
N202_ScrollSpeed=l9_12112;
N202_Strength=l9_12113;
N202_CustomForce=float3(0.0);
if (N202_OnOff)
{
float3 l9_12116=N202_ParticleSpawnPosition;
float3 l9_12117=N202_Strength;
float3 l9_12118=l9_12116;
float l9_12119=tempGlobals.gTimeElapsed;
float3 l9_12120=float3(l9_12119)*(N202_ScrollSpeed*0.1);
l9_12118/=(N202_ScaleTexture*2.0);
l9_12118+=l9_12120;
float3 l9_12121=l9_12118;
float4 l9_12122=float4(0.0);
float3 l9_12123=l9_12121;
float l9_12124=0.0;
float4 l9_12125=sc_set0.Tex3d.sample(sc_set0.Tex3dSmpSC,l9_12123,level(l9_12124));
l9_12122=l9_12125;
float4 l9_12126=l9_12122;
float3 l9_12127=l9_12126.xyz;
float3 l9_12128=(l9_12127*2.0)-float3(1.0);
l9_12128*=l9_12117;
float3 l9_12129=l9_12128;
N202_CustomForce+=l9_12129;
}
l9_12115=N202_CustomForce;
l9_12109=l9_12115;
float3 l9_12130=float3(0.0);
l9_12130=tempGlobals.N155_helixDirection;
float3 l9_12131=float3(0.0);
l9_12131=tempGlobals.N319_curveDirection;
float3 l9_12132=float3(0.0);
float3 l9_12133=(*sc_set0.UserUniforms).Tweak_N314;
l9_12132=l9_12133;
float3 l9_12134=float3(0.0);
float l9_12135=l9_12001;
float3 l9_12136=l9_12130;
float3 l9_12137=l9_12131;
float3 l9_12138=l9_12132;
ssGlobals l9_12139=tempGlobals;
tempGlobals=l9_12139;
float3 l9_12140=float3(0.0);
N277_OnOff=(int(Tweak_N313_tmp)!=0);
N277_isTrail=l9_12135!=0.0;
N277_helixDir=l9_12136;
N277_curveDir=l9_12137;
N277_Strength=l9_12138;
N277_Path=NODE_248_DROPLIST_ITEM_tmp;
N277_DirectionForce=float3(0.0);
N277_Direction=float3(0.0);
if (N277_OnOff||N277_isTrail)
{
float3 l9_12141;
if (N277_Path==5)
{
l9_12141=N277_helixDir;
}
else
{
bool3 l9_12142=bool3(N277_Path==6);
l9_12141=float3(l9_12142.x ? N277_curveDir.x : float3(0.0).x,l9_12142.y ? N277_curveDir.y : float3(0.0).y,l9_12142.z ? N277_curveDir.z : float3(0.0).z);
}
float3 l9_12143=l9_12141;
float3 l9_12144=l9_12143;
float3 l9_12145=l9_12144;
if (N277_OnOff)
{
N277_DirectionForce+=(l9_12145*N277_Strength);
}
N277_Direction=l9_12145;
}
l9_12140=N277_DirectionForce;
l9_12134=l9_12140;
float3 l9_12146=float3(0.0);
l9_12146=(l9_12063+l9_12109)+l9_12134;
l9_11976=l9_12146;
float3 l9_12147=l9_11976;
l9_11975=((l9_12147/float3(2.0))*l9_11886)*l9_11886;
}
float3 l9_12148=l9_11863;
float3 l9_12149=N111_velocityMin+(((l9_11881+float3(1.0))/float3(2.0))*(N111_velocityMax-N111_velocityMin));
if ((int(VELRAMP_tmp)!=0))
{
l9_12149=mix(N111_velocityMin,N111_velocityMax,l9_11882);
}
float3 l9_12150=l9_12149;
float l9_12151=l9_11886;
float3 l9_12152=N111_velocityDrag;
float3 l9_12153=l9_11892;
float l9_12154=l9_11887;
float3 l9_12155=float3(l9_12151,l9_12151,l9_12151);
float3 l9_12156=l9_12152;
float l9_12157;
if (l9_12155.x<=0.0)
{
l9_12157=0.0;
}
else
{
l9_12157=pow(l9_12155.x,l9_12156.x);
}
float l9_12158=l9_12157;
float l9_12159;
if (l9_12155.y<=0.0)
{
l9_12159=0.0;
}
else
{
l9_12159=pow(l9_12155.y,l9_12156.y);
}
float l9_12160=l9_12159;
float l9_12161;
if (l9_12155.z<=0.0)
{
l9_12161=0.0;
}
else
{
l9_12161=pow(l9_12155.z,l9_12156.z);
}
float3 l9_12162=float3(l9_12158,l9_12160,l9_12161);
float3 l9_12163=l9_12162;
float3 l9_12164=(l9_12150+l9_12153)*l9_12163;
if ((int(VELRAMP_tmp)!=0))
{
float l9_12165=floor(l9_12154*10000.0)/10000.0;
float2 l9_12166=tempGlobals.Surface_UVCoord0;
float2 l9_12167=(l9_12166/float2(10000.0,1.0))+float2(l9_12165,0.0);
float2 l9_12168=l9_12167;
float4 l9_12169=float4(0.0);
int l9_12170;
if ((int(velRampTextureHasSwappedViews_tmp)!=0))
{
int l9_12171=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_12171=0;
}
else
{
l9_12171=gl_InstanceIndex%2;
}
int l9_12172=l9_12171;
l9_12170=1-l9_12172;
}
else
{
int l9_12173=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_12173=0;
}
else
{
l9_12173=gl_InstanceIndex%2;
}
int l9_12174=l9_12173;
l9_12170=l9_12174;
}
int l9_12175=l9_12170;
int l9_12176=velRampTextureLayout_tmp;
int l9_12177=l9_12175;
float2 l9_12178=l9_12168;
bool l9_12179=(int(SC_USE_UV_TRANSFORM_velRampTexture_tmp)!=0);
float3x3 l9_12180=(*sc_set0.UserUniforms).velRampTextureTransform;
int2 l9_12181=int2(SC_SOFTWARE_WRAP_MODE_U_velRampTexture_tmp,SC_SOFTWARE_WRAP_MODE_V_velRampTexture_tmp);
bool l9_12182=(int(SC_USE_UV_MIN_MAX_velRampTexture_tmp)!=0);
float4 l9_12183=(*sc_set0.UserUniforms).velRampTextureUvMinMax;
bool l9_12184=(int(SC_USE_CLAMP_TO_BORDER_velRampTexture_tmp)!=0);
float4 l9_12185=(*sc_set0.UserUniforms).velRampTextureBorderColor;
float l9_12186=0.0;
bool l9_12187=l9_12184&&(!l9_12182);
float l9_12188=1.0;
float l9_12189=l9_12178.x;
int l9_12190=l9_12181.x;
if (l9_12190==1)
{
l9_12189=fract(l9_12189);
}
else
{
if (l9_12190==2)
{
float l9_12191=fract(l9_12189);
float l9_12192=l9_12189-l9_12191;
float l9_12193=step(0.25,fract(l9_12192*0.5));
l9_12189=mix(l9_12191,1.0-l9_12191,fast::clamp(l9_12193,0.0,1.0));
}
}
l9_12178.x=l9_12189;
float l9_12194=l9_12178.y;
int l9_12195=l9_12181.y;
if (l9_12195==1)
{
l9_12194=fract(l9_12194);
}
else
{
if (l9_12195==2)
{
float l9_12196=fract(l9_12194);
float l9_12197=l9_12194-l9_12196;
float l9_12198=step(0.25,fract(l9_12197*0.5));
l9_12194=mix(l9_12196,1.0-l9_12196,fast::clamp(l9_12198,0.0,1.0));
}
}
l9_12178.y=l9_12194;
if (l9_12182)
{
bool l9_12199=l9_12184;
bool l9_12200;
if (l9_12199)
{
l9_12200=l9_12181.x==3;
}
else
{
l9_12200=l9_12199;
}
float l9_12201=l9_12178.x;
float l9_12202=l9_12183.x;
float l9_12203=l9_12183.z;
bool l9_12204=l9_12200;
float l9_12205=l9_12188;
float l9_12206=fast::clamp(l9_12201,l9_12202,l9_12203);
float l9_12207=step(abs(l9_12201-l9_12206),9.9999997e-06);
l9_12205*=(l9_12207+((1.0-float(l9_12204))*(1.0-l9_12207)));
l9_12201=l9_12206;
l9_12178.x=l9_12201;
l9_12188=l9_12205;
bool l9_12208=l9_12184;
bool l9_12209;
if (l9_12208)
{
l9_12209=l9_12181.y==3;
}
else
{
l9_12209=l9_12208;
}
float l9_12210=l9_12178.y;
float l9_12211=l9_12183.y;
float l9_12212=l9_12183.w;
bool l9_12213=l9_12209;
float l9_12214=l9_12188;
float l9_12215=fast::clamp(l9_12210,l9_12211,l9_12212);
float l9_12216=step(abs(l9_12210-l9_12215),9.9999997e-06);
l9_12214*=(l9_12216+((1.0-float(l9_12213))*(1.0-l9_12216)));
l9_12210=l9_12215;
l9_12178.y=l9_12210;
l9_12188=l9_12214;
}
float2 l9_12217=l9_12178;
bool l9_12218=l9_12179;
float3x3 l9_12219=l9_12180;
if (l9_12218)
{
l9_12217=float2((l9_12219*float3(l9_12217,1.0)).xy);
}
float2 l9_12220=l9_12217;
l9_12178=l9_12220;
float l9_12221=l9_12178.x;
int l9_12222=l9_12181.x;
bool l9_12223=l9_12187;
float l9_12224=l9_12188;
if ((l9_12222==0)||(l9_12222==3))
{
float l9_12225=l9_12221;
float l9_12226=0.0;
float l9_12227=1.0;
bool l9_12228=l9_12223;
float l9_12229=l9_12224;
float l9_12230=fast::clamp(l9_12225,l9_12226,l9_12227);
float l9_12231=step(abs(l9_12225-l9_12230),9.9999997e-06);
l9_12229*=(l9_12231+((1.0-float(l9_12228))*(1.0-l9_12231)));
l9_12225=l9_12230;
l9_12221=l9_12225;
l9_12224=l9_12229;
}
l9_12178.x=l9_12221;
l9_12188=l9_12224;
float l9_12232=l9_12178.y;
int l9_12233=l9_12181.y;
bool l9_12234=l9_12187;
float l9_12235=l9_12188;
if ((l9_12233==0)||(l9_12233==3))
{
float l9_12236=l9_12232;
float l9_12237=0.0;
float l9_12238=1.0;
bool l9_12239=l9_12234;
float l9_12240=l9_12235;
float l9_12241=fast::clamp(l9_12236,l9_12237,l9_12238);
float l9_12242=step(abs(l9_12236-l9_12241),9.9999997e-06);
l9_12240*=(l9_12242+((1.0-float(l9_12239))*(1.0-l9_12242)));
l9_12236=l9_12241;
l9_12232=l9_12236;
l9_12235=l9_12240;
}
l9_12178.y=l9_12232;
l9_12188=l9_12235;
float2 l9_12243=l9_12178;
int l9_12244=l9_12176;
int l9_12245=l9_12177;
float l9_12246=l9_12186;
float2 l9_12247=l9_12243;
int l9_12248=l9_12244;
int l9_12249=l9_12245;
float3 l9_12250=float3(0.0);
if (l9_12248==0)
{
l9_12250=float3(l9_12247,0.0);
}
else
{
if (l9_12248==1)
{
l9_12250=float3(l9_12247.x,(l9_12247.y*0.5)+(0.5-(float(l9_12249)*0.5)),0.0);
}
else
{
l9_12250=float3(l9_12247,float(l9_12249));
}
}
float3 l9_12251=l9_12250;
float3 l9_12252=l9_12251;
float4 l9_12253=sc_set0.velRampTexture.sample(sc_set0.velRampTextureSmpSC,l9_12252.xy,level(l9_12246));
float4 l9_12254=l9_12253;
if (l9_12184)
{
l9_12254=mix(l9_12185,l9_12254,float4(l9_12188));
}
float4 l9_12255=l9_12254;
l9_12169=l9_12255;
float4 l9_12256=l9_12169;
float3 l9_12257=l9_12256.xyz;
l9_12164=(l9_12150+l9_12153)*l9_12257;
if (!(SC_DEVICE_CLASS_tmp>=2))
{
l9_12164=l9_12150*l9_12163;
}
}
float3 l9_12258=l9_12164;
l9_12148=l9_12258;
if ((int(TRAILS_tmp)!=0))
{
if (N111_isTrail)
{
float2 l9_12259=tempGlobals.Surface_UVCoord0;
float2 l9_12260=l9_12259;
float l9_12261=mix(1.0,l9_12260.y,1.0-N111_taper.x);
l9_12261*=mix(1.0,1.0-l9_12260.y,1.0-N111_taper.y);
N111_cameraFade_trailHeadTime_taper=float4(N111_cameraFade_trailHeadTime_taper.x,N111_trailHeadTime.x,N111_trailHeadTime.y,N111_cameraFade_trailHeadTime_taper.w);
N111_cameraFade_trailHeadTime_taper.w=l9_12261;
}
}
float4x4 l9_12262=(*sc_set0.UserUniforms).sc_ModelMatrix;
float l9_12263=length(l9_12262[0].xyz);
float4x4 l9_12264=(*sc_set0.UserUniforms).sc_ModelMatrix;
float l9_12265=length(l9_12264[1].xyz);
float4x4 l9_12266=(*sc_set0.UserUniforms).sc_ModelMatrix;
float l9_12267=length(l9_12266[2].xyz);
float3 l9_12268=float3(l9_12263,l9_12265,l9_12267);
float4x4 l9_12269=(*sc_set0.UserUniforms).sc_ModelMatrix;
float4x4 l9_12270=l9_12269;
float4 l9_12271=l9_12270[0];
float4 l9_12272=l9_12270[1];
float4 l9_12273=l9_12270[2];
float3x3 l9_12274=float3x3(float3(float3(l9_12271.x,l9_12272.x,l9_12273.x)),float3(float3(l9_12271.y,l9_12272.y,l9_12273.y)),float3(float3(l9_12271.z,l9_12272.z,l9_12273.z)));
float3x3 l9_12275=l9_12274;
float3x3 l9_12276=l9_12275;
float3 l9_12277=float3(0.0);
if (rotationSpace_tmp==2)
{
l9_12277=(((l9_12148*l9_12276)+l9_11973)+l9_11974)+l9_11975;
}
else
{
if (rotationSpace_tmp==1)
{
l9_12277=(((l9_12148*l9_12268)+l9_11973)+l9_11974)+l9_11975;
}
else
{
l9_12277=(((l9_12148+l9_11973)+l9_11974)+l9_11975)*l9_12276;
}
}
float4x4 l9_12278=(*sc_set0.UserUniforms).sc_ModelMatrix;
float3 l9_12279=(l9_12278*float4(l9_11891,1.0)).xyz+l9_12277;
N111_particleSpawnPosition=l9_11891;
if ((int(Tweak_N282_tmp)!=0))
{
float3 l9_12280=l9_11891;
float3 l9_12281=N111_DisplaceStrength;
float3 l9_12282=N111_ScrollSpeedDisplace;
float3 l9_12283=N111_ScaleDisplace;
float3 l9_12284=l9_12280;
float l9_12285=tempGlobals.gTimeElapsed;
float3 l9_12286=float3(l9_12285)*(l9_12282*0.1);
l9_12284/=(l9_12283*2.0);
l9_12284+=l9_12286;
float3 l9_12287=l9_12284;
float4 l9_12288=float4(0.0);
float3 l9_12289=l9_12287;
float l9_12290=0.0;
float4 l9_12291=sc_set0.displace3dTex.sample(sc_set0.displace3dTexSmpSC,l9_12289,level(l9_12290));
l9_12288=l9_12291;
float4 l9_12292=l9_12288;
float3 l9_12293=l9_12292.xyz;
float3 l9_12294=(l9_12293*2.0)-float3(1.0);
l9_12294*=l9_12281;
float3 l9_12295=l9_12294;
float3 l9_12296=l9_12295;
if ((int(Tweak_N331_tmp)!=0))
{
float4x4 l9_12297=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_12296=float3x3(l9_12297[0].xyz,l9_12297[1].xyz,l9_12297[2].xyz)*l9_12296;
}
l9_12279+=l9_12296;
}
if ((int(Tweak_N228_tmp)!=0))
{
float3 l9_12298=N111_AxisOrbit;
float3 l9_12299=N111_CenterOrbit;
if ((int(Tweak_N332_tmp)!=0))
{
float4x4 l9_12300=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_12298=float3x3(l9_12300[0].xyz,l9_12300[1].xyz,l9_12300[2].xyz)*N111_AxisOrbit;
float4x4 l9_12301=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_12299=N111_CenterOrbit+l9_12301[3].xyz;
}
float3 l9_12302=l9_12279;
float3 l9_12303=l9_12298;
float2 l9_12304=N111_MinMaxOrbitAngle;
float2 l9_12305=N111_MinMaxOrbitSpeed;
float3 l9_12306=l9_12299;
float2 l9_12307=l9_11884;
float l9_12308=mix(l9_12304.x,l9_12304.y,l9_12307.x);
float l9_12309=tempGlobals.gTimeElapsed;
float l9_12310=l9_12309*mix(l9_12305.x,l9_12305.y,l9_12307.y);
l9_12308+=l9_12310;
float3 l9_12311=l9_12303;
float l9_12312=l9_12308;
float3 l9_12313=l9_12311;
float l9_12314=l9_12312;
float3 l9_12315=normalize(l9_12313);
float l9_12316=sin(radians(l9_12314));
float l9_12317=cos(radians(l9_12314));
float l9_12318=1.0-l9_12317;
float3x3 l9_12319=float3x3(float3(((l9_12318*l9_12315.x)*l9_12315.x)+l9_12317,((l9_12318*l9_12315.x)*l9_12315.y)-(l9_12315.z*l9_12316),((l9_12318*l9_12315.z)*l9_12315.x)+(l9_12315.y*l9_12316)),float3(((l9_12318*l9_12315.x)*l9_12315.y)+(l9_12315.z*l9_12316),((l9_12318*l9_12315.y)*l9_12315.y)+l9_12317,((l9_12318*l9_12315.y)*l9_12315.z)-(l9_12315.x*l9_12316)),float3(((l9_12318*l9_12315.z)*l9_12315.x)-(l9_12315.y*l9_12316),((l9_12318*l9_12315.y)*l9_12315.z)+(l9_12315.x*l9_12316),((l9_12318*l9_12315.z)*l9_12315.z)+l9_12317));
float3x3 l9_12320=l9_12319;
float3x3 l9_12321=l9_12320;
float3 l9_12322=l9_12321*(l9_12302-l9_12306);
float3 l9_12323=l9_12322+l9_12306;
l9_12279=l9_12323;
}
float l9_12324;
if (MESHTYPE_tmp==0)
{
l9_12324=mix(N111_rotationRandom.x,N111_rotationRandom.y,l9_11883);
}
else
{
l9_12324=mix(N111_rotationRandomZ.x,N111_rotationRandomZ.y,l9_11883);
}
float l9_12325=l9_12324;
float l9_12326=1.0;
if (!(int(ALIGNPARTICLES_tmp)!=0))
{
float l9_12327=1.0-l9_11887;
float l9_12328=N111_rotationDrag;
float l9_12329;
if (l9_12327<=0.0)
{
l9_12329=0.0;
}
else
{
l9_12329=pow(l9_12327,l9_12328);
}
float l9_12330=l9_12329;
l9_12326=l9_12330;
}
float l9_12331;
if (MESHTYPE_tmp==0)
{
l9_12331=mix(N111_rotationRate.x,N111_rotationRate.y,l9_11883);
}
else
{
l9_12331=mix(N111_rotationRateZ.x,N111_rotationRateZ.y,l9_11883);
}
float l9_12332=l9_12331;
float l9_12333=((l9_12332*l9_12326)*l9_11887)*2.0;
float l9_12334=3.1415927*((l9_12333+l9_12325)-0.5);
float l9_12335=1.0;
if ((int(SCREENFADE_tmp)!=0))
{
float3 l9_12336=(*sc_set0.UserUniforms).sc_Camera.position;
float3 l9_12337=l9_12336-l9_12279;
float l9_12338=dot(l9_12337,l9_12337);
float l9_12339=(N111_fadeDistanceInvisible+1e-06)*(N111_fadeDistanceInvisible+1e-06);
float l9_12340=N111_fadeDistanceVisible*N111_fadeDistanceVisible;
float l9_12341=fast::min(l9_12339,l9_12340);
float l9_12342=fast::max(l9_12339,l9_12340);
float l9_12343=smoothstep(l9_12341,l9_12342,l9_12338);
float l9_12344;
if (l9_12339>l9_12340)
{
l9_12344=1.0-l9_12343;
}
else
{
l9_12344=l9_12343;
}
l9_12343=l9_12344;
if (l9_12343<=1e-06)
{
l9_12335=0.0;
}
N111_cameraFade_trailHeadTime_taper.x=l9_12343;
}
if ((MESHTYPE_tmp==0)||(int(TRAILS_tmp)!=0))
{
if ((MESHTYPE_tmp==0)||N111_isTrail)
{
int l9_12345=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_12345=0;
}
else
{
l9_12345=gl_InstanceIndex%2;
}
int l9_12346=l9_12345;
float4x4 l9_12347=(*sc_set0.UserUniforms).sc_ViewMatrixInverseArray[l9_12346];
float3 l9_12348=normalize(l9_12347[2].xyz);
if (N111_isTrail)
{
l9_12348*=float3(-1.0);
}
float3 l9_12349=float3(0.0,1.0,0.0);
if (ALIGN_TO_CAMERA_tmp==1)
{
int l9_12350=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_12350=0;
}
else
{
l9_12350=gl_InstanceIndex%2;
}
int l9_12351=l9_12350;
float3 l9_12352=(*sc_set0.UserUniforms).sc_ViewMatrixInverseArray[l9_12351][1].xyz;
l9_12349=l9_12352;
}
float3 l9_12353=-normalize(cross(l9_12348,l9_12349));
float3 l9_12354=normalize(cross(l9_12353,l9_12348));
float l9_12355=1.0;
if ((int(ALIGNPARTICLES_tmp)!=0))
{
if (ALIGN_PARTICLES_TO_OPTION_tmp==1)
{
l9_12353=float3(0.0,0.0,1.0);
l9_12354=float3(0.0,1.0,0.0);
}
if (ALIGN_PARTICLES_TO_OPTION_tmp==2)
{
l9_12353=float3(1.0,0.0,0.0);
l9_12354=float3(0.0,0.0,1.0);
}
if (ALIGN_PARTICLES_TO_OPTION_tmp==3)
{
l9_12353=float3(1.0,0.0,0.0);
l9_12354=float3(0.0,1.0,0.0);
}
}
float2 l9_12356=float2(cos(l9_12334),sin(l9_12334));
float2 l9_12357=float2(-sin(l9_12334),cos(l9_12334));
float3 l9_12358=float3((l9_12353*l9_12356.x)+(l9_12354*l9_12356.y));
float3 l9_12359=float3((l9_12353*l9_12357.x)+(l9_12354*l9_12357.y));
if ((int(ALIGNPARTICLES_tmp)!=0))
{
if (ALIGN_PARTICLES_TO_OPTION_tmp==0)
{
if (!N111_isTrail)
{
float l9_12360=l9_12355;
float3 l9_12361=l9_12358;
float3 l9_12362=l9_12359;
float3 l9_12363=l9_12348;
float3 l9_12364=l9_12277;
float3 l9_12365=l9_11973;
float3 l9_12366=l9_11974;
float3 l9_12367=l9_11975;
float3 l9_12368=normalize((((l9_12364+l9_12365)+l9_12366)+l9_12367)+float3(1e-06));
float3 l9_12369=l9_12364*0.02;
l9_12361=l9_12368;
l9_12362=normalize(cross(l9_12361,l9_12363));
if (N111_ENABLE_IGNOREVEL)
{
l9_12360=fast::max(N111_sizeVelScale,1e-06);
}
else
{
if (N111_ENABLE_IGNORETRANSFORMSCALE)
{
float4x4 l9_12370=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_12360=(length(l9_12369)/length(l9_12370[0].xyz))*N111_sizeVelScale;
}
else
{
l9_12360=length(l9_12369)*N111_sizeVelScale;
}
l9_12360=fast::clamp(l9_12360,N111_velScaleMinMax.x,N111_velScaleMinMax.y);
}
l9_12355=l9_12360;
l9_12358=l9_12361;
l9_12359=l9_12362;
}
}
}
if ((int(TRAILS_tmp)!=0))
{
if (N111_isTrail)
{
float3 l9_12371=l9_12358;
float3 l9_12372=l9_12359;
float3 l9_12373=l9_12348;
float2 l9_12374=l9_12356;
float3 l9_12375=l9_12277;
float3 l9_12376=l9_11973;
float3 l9_12377=l9_11974;
float3 l9_12378=l9_11975;
float3 l9_12379=N111_tangentIN;
float3 l9_12380=(((((l9_12375*0.02)+l9_12376)+l9_12377)+l9_12378)+l9_12379)+float3(1e-06);
float3 l9_12381=normalize(l9_12380);
l9_12371=l9_12381;
l9_12372=normalize(cross(l9_12371,l9_12373));
if ((int(TRAILTWIST_tmp)!=0))
{
l9_12372=float3((l9_12371*l9_12374.x)+(l9_12372*l9_12374.y));
}
l9_12358=l9_12371;
l9_12359=l9_12372;
}
}
float4x4 l9_12382=(*sc_set0.UserUniforms).sc_ModelMatrix;
float l9_12383=length(l9_12382[0].xyz);
float2 l9_12384=tempGlobals.Surface_UVCoord0;
float l9_12385=l9_11876;
float l9_12386=l9_11877;
float l9_12387=l9_11887;
float l9_12388=N111_sizeSpeed;
float2 l9_12389=(((l9_12384-float2(0.5))*l9_12335)*N111_pSize(l9_12385,l9_12386,l9_12387,l9_12388,N111_isTrail,N111_trailHeadTime,N111_trailSizeMult,N111_sizeStart,N111_sizeEnd,N111_sizeStartMax,N111_sizeEndMax,N111_sizeStart3D,N111_sizeEnd3D,N111_sizeStartMax3D,N111_sizeEndMax3D,gl_InstanceIndex,(*sc_set0.UserUniforms),tempGlobals,sc_set0.trailSizeRampTex,sc_set0.trailSizeRampTexSmpSC,sc_set0.sizeRampTexture,sc_set0.sizeRampTextureSmpSC))*l9_12383;
float3 l9_12390=(l9_12279+(l9_12359*l9_12389.x))+(l9_12358*(l9_12389.y*l9_12355));
N111_position=l9_12390;
if ((N111_particleAlive<0.5)||(l9_12335<0.5))
{
N111_position/=float3(0.0);
}
N111_normal=l9_12348;
}
}
if (!(MESHTYPE_tmp==0))
{
if (!N111_isTrail)
{
N111_position=N111_positionObjectSpace;
if (N111_ENABLE_CENTER_IN_BBOX)
{
float3 l9_12391=(*sc_set0.UserUniforms).sc_LocalAabbMax;
float3 l9_12392=(*sc_set0.UserUniforms).sc_LocalAabbMin;
float3 l9_12393=(l9_12391+l9_12392)/float3(2.0);
N111_position-=l9_12393;
}
float l9_12394=l9_11876;
float l9_12395=l9_11877;
float l9_12396=l9_11887;
float l9_12397=N111_sizeSpeed;
N111_position=(N111_position*l9_12268)*N111_pSize3D(l9_12394,l9_12395,l9_12396,l9_12397,N111_sizeStart3D,N111_sizeEnd3D,N111_sizeStartMax3D,N111_sizeEndMax3D,gl_InstanceIndex,(*sc_set0.UserUniforms),tempGlobals,sc_set0.sizeRampTexture,sc_set0.sizeRampTextureSmpSC);
if ((N111_particleAlive<0.5)||(l9_12335<0.5))
{
N111_position.x=2.1474836e+09;
}
float3x3 l9_12398;
if ((int(ALIGNPARTICLES_tmp)!=0))
{
if (ALIGN_PARTICLES_TO_OPTION_tmp==3)
{
l9_12398=float3x3(float3(1.0,0.0,0.0),float3(0.0,1.0,0.0),float3(0.0,0.0,1.0));
}
else
{
float3 l9_12399=float3(0.0);
if (ALIGN_PARTICLES_TO_OPTION_tmp==1)
{
l9_12399=float3(1.0,0.0,0.0);
}
if (ALIGN_PARTICLES_TO_OPTION_tmp==2)
{
l9_12399=float3(0.0,1.0,0.0);
}
if (ALIGN_PARTICLES_TO_OPTION_tmp==0)
{
float l9_12400=0.001;
float3 l9_12401=l9_12149;
float l9_12402=l9_11886-l9_12400;
float3 l9_12403=N111_velocityDrag;
float3 l9_12404=l9_11892;
float l9_12405=l9_11887-l9_12400;
float3 l9_12406=float3(l9_12402,l9_12402,l9_12402);
float3 l9_12407=l9_12403;
float l9_12408;
if (l9_12406.x<=0.0)
{
l9_12408=0.0;
}
else
{
l9_12408=pow(l9_12406.x,l9_12407.x);
}
float l9_12409=l9_12408;
float l9_12410;
if (l9_12406.y<=0.0)
{
l9_12410=0.0;
}
else
{
l9_12410=pow(l9_12406.y,l9_12407.y);
}
float l9_12411=l9_12410;
float l9_12412;
if (l9_12406.z<=0.0)
{
l9_12412=0.0;
}
else
{
l9_12412=pow(l9_12406.z,l9_12407.z);
}
float3 l9_12413=float3(l9_12409,l9_12411,l9_12412);
float3 l9_12414=l9_12413;
float3 l9_12415=(l9_12401+l9_12404)*l9_12414;
if ((int(VELRAMP_tmp)!=0))
{
float l9_12416=floor(l9_12405*10000.0)/10000.0;
float2 l9_12417=tempGlobals.Surface_UVCoord0;
float2 l9_12418=(l9_12417/float2(10000.0,1.0))+float2(l9_12416,0.0);
float2 l9_12419=l9_12418;
float4 l9_12420=float4(0.0);
int l9_12421;
if ((int(velRampTextureHasSwappedViews_tmp)!=0))
{
int l9_12422=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_12422=0;
}
else
{
l9_12422=gl_InstanceIndex%2;
}
int l9_12423=l9_12422;
l9_12421=1-l9_12423;
}
else
{
int l9_12424=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_12424=0;
}
else
{
l9_12424=gl_InstanceIndex%2;
}
int l9_12425=l9_12424;
l9_12421=l9_12425;
}
int l9_12426=l9_12421;
int l9_12427=velRampTextureLayout_tmp;
int l9_12428=l9_12426;
float2 l9_12429=l9_12419;
bool l9_12430=(int(SC_USE_UV_TRANSFORM_velRampTexture_tmp)!=0);
float3x3 l9_12431=(*sc_set0.UserUniforms).velRampTextureTransform;
int2 l9_12432=int2(SC_SOFTWARE_WRAP_MODE_U_velRampTexture_tmp,SC_SOFTWARE_WRAP_MODE_V_velRampTexture_tmp);
bool l9_12433=(int(SC_USE_UV_MIN_MAX_velRampTexture_tmp)!=0);
float4 l9_12434=(*sc_set0.UserUniforms).velRampTextureUvMinMax;
bool l9_12435=(int(SC_USE_CLAMP_TO_BORDER_velRampTexture_tmp)!=0);
float4 l9_12436=(*sc_set0.UserUniforms).velRampTextureBorderColor;
float l9_12437=0.0;
bool l9_12438=l9_12435&&(!l9_12433);
float l9_12439=1.0;
float l9_12440=l9_12429.x;
int l9_12441=l9_12432.x;
if (l9_12441==1)
{
l9_12440=fract(l9_12440);
}
else
{
if (l9_12441==2)
{
float l9_12442=fract(l9_12440);
float l9_12443=l9_12440-l9_12442;
float l9_12444=step(0.25,fract(l9_12443*0.5));
l9_12440=mix(l9_12442,1.0-l9_12442,fast::clamp(l9_12444,0.0,1.0));
}
}
l9_12429.x=l9_12440;
float l9_12445=l9_12429.y;
int l9_12446=l9_12432.y;
if (l9_12446==1)
{
l9_12445=fract(l9_12445);
}
else
{
if (l9_12446==2)
{
float l9_12447=fract(l9_12445);
float l9_12448=l9_12445-l9_12447;
float l9_12449=step(0.25,fract(l9_12448*0.5));
l9_12445=mix(l9_12447,1.0-l9_12447,fast::clamp(l9_12449,0.0,1.0));
}
}
l9_12429.y=l9_12445;
if (l9_12433)
{
bool l9_12450=l9_12435;
bool l9_12451;
if (l9_12450)
{
l9_12451=l9_12432.x==3;
}
else
{
l9_12451=l9_12450;
}
float l9_12452=l9_12429.x;
float l9_12453=l9_12434.x;
float l9_12454=l9_12434.z;
bool l9_12455=l9_12451;
float l9_12456=l9_12439;
float l9_12457=fast::clamp(l9_12452,l9_12453,l9_12454);
float l9_12458=step(abs(l9_12452-l9_12457),9.9999997e-06);
l9_12456*=(l9_12458+((1.0-float(l9_12455))*(1.0-l9_12458)));
l9_12452=l9_12457;
l9_12429.x=l9_12452;
l9_12439=l9_12456;
bool l9_12459=l9_12435;
bool l9_12460;
if (l9_12459)
{
l9_12460=l9_12432.y==3;
}
else
{
l9_12460=l9_12459;
}
float l9_12461=l9_12429.y;
float l9_12462=l9_12434.y;
float l9_12463=l9_12434.w;
bool l9_12464=l9_12460;
float l9_12465=l9_12439;
float l9_12466=fast::clamp(l9_12461,l9_12462,l9_12463);
float l9_12467=step(abs(l9_12461-l9_12466),9.9999997e-06);
l9_12465*=(l9_12467+((1.0-float(l9_12464))*(1.0-l9_12467)));
l9_12461=l9_12466;
l9_12429.y=l9_12461;
l9_12439=l9_12465;
}
float2 l9_12468=l9_12429;
bool l9_12469=l9_12430;
float3x3 l9_12470=l9_12431;
if (l9_12469)
{
l9_12468=float2((l9_12470*float3(l9_12468,1.0)).xy);
}
float2 l9_12471=l9_12468;
l9_12429=l9_12471;
float l9_12472=l9_12429.x;
int l9_12473=l9_12432.x;
bool l9_12474=l9_12438;
float l9_12475=l9_12439;
if ((l9_12473==0)||(l9_12473==3))
{
float l9_12476=l9_12472;
float l9_12477=0.0;
float l9_12478=1.0;
bool l9_12479=l9_12474;
float l9_12480=l9_12475;
float l9_12481=fast::clamp(l9_12476,l9_12477,l9_12478);
float l9_12482=step(abs(l9_12476-l9_12481),9.9999997e-06);
l9_12480*=(l9_12482+((1.0-float(l9_12479))*(1.0-l9_12482)));
l9_12476=l9_12481;
l9_12472=l9_12476;
l9_12475=l9_12480;
}
l9_12429.x=l9_12472;
l9_12439=l9_12475;
float l9_12483=l9_12429.y;
int l9_12484=l9_12432.y;
bool l9_12485=l9_12438;
float l9_12486=l9_12439;
if ((l9_12484==0)||(l9_12484==3))
{
float l9_12487=l9_12483;
float l9_12488=0.0;
float l9_12489=1.0;
bool l9_12490=l9_12485;
float l9_12491=l9_12486;
float l9_12492=fast::clamp(l9_12487,l9_12488,l9_12489);
float l9_12493=step(abs(l9_12487-l9_12492),9.9999997e-06);
l9_12491*=(l9_12493+((1.0-float(l9_12490))*(1.0-l9_12493)));
l9_12487=l9_12492;
l9_12483=l9_12487;
l9_12486=l9_12491;
}
l9_12429.y=l9_12483;
l9_12439=l9_12486;
float2 l9_12494=l9_12429;
int l9_12495=l9_12427;
int l9_12496=l9_12428;
float l9_12497=l9_12437;
float2 l9_12498=l9_12494;
int l9_12499=l9_12495;
int l9_12500=l9_12496;
float3 l9_12501=float3(0.0);
if (l9_12499==0)
{
l9_12501=float3(l9_12498,0.0);
}
else
{
if (l9_12499==1)
{
l9_12501=float3(l9_12498.x,(l9_12498.y*0.5)+(0.5-(float(l9_12500)*0.5)),0.0);
}
else
{
l9_12501=float3(l9_12498,float(l9_12500));
}
}
float3 l9_12502=l9_12501;
float3 l9_12503=l9_12502;
float4 l9_12504=sc_set0.velRampTexture.sample(sc_set0.velRampTextureSmpSC,l9_12503.xy,level(l9_12497));
float4 l9_12505=l9_12504;
if (l9_12435)
{
l9_12505=mix(l9_12436,l9_12505,float4(l9_12439));
}
float4 l9_12506=l9_12505;
l9_12420=l9_12506;
float4 l9_12507=l9_12420;
float3 l9_12508=l9_12507.xyz;
l9_12415=(l9_12401+l9_12404)*l9_12508;
if (!(SC_DEVICE_CLASS_tmp>=2))
{
l9_12415=l9_12401*l9_12414;
}
}
float3 l9_12509=l9_12415;
float3 l9_12510=l9_12509;
float l9_12511=((N111_gravity/2.0)*(l9_11886-l9_12400))*(l9_11886-l9_12400);
l9_11973.y-=l9_12511;
if ((int(FORCE_tmp)!=0))
{
float3 l9_12512=float3(((N111_localForce/float3(2.0))*(l9_11886-l9_12400))*(l9_11886-l9_12400));
l9_11974-=l9_12512;
}
if ((int(CUSTOMFORCE_tmp)!=0))
{
tempGlobals.N111_ParticleSpawnPosition=l9_11891;
float3 l9_12513=float3(0.0);
float3 l9_12514=float3(0.0);
l9_12514=tempGlobals.N111_ParticleSpawnPosition;
float l9_12515=0.0;
float l9_12516=(*sc_set0.UserUniforms).timeGlobal;
l9_12515=l9_12516;
float l9_12517=0.0;
float l9_12518=(*sc_set0.UserUniforms).externalTimeInput;
l9_12517=l9_12518;
float l9_12519=0.0;
float l9_12520=(*sc_set0.UserUniforms).externalSeed;
l9_12519=l9_12520;
float l9_12521=0.0;
float l9_12522=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_12521=l9_12522;
float2 l9_12523=float2(0.0);
float2 l9_12524=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_12523=l9_12524;
float l9_12525=0.0;
float l9_12526=(*sc_set0.UserUniforms).spawnDuration;
l9_12525=l9_12526;
float l9_12527=0.0;
float l9_12528;
if ((int(TRAILS_tmp)!=0))
{
l9_12528=1.001;
}
else
{
l9_12528=0.001;
}
l9_12528-=0.001;
l9_12527=l9_12528;
float l9_12529=0.0;
float l9_12530=(*sc_set0.UserUniforms).trailLength;
l9_12529=l9_12530;
float4 l9_12531=float4(0.0);
l9_12531=tempGlobals.VertexColor;
float l9_12532=0.0;
l9_12532=l9_12531.x;
float l9_12533=0.0;
float l9_12534=l9_12527;
bool l9_12535=(l9_12534*1.0)!=0.0;
bool l9_12536;
if (l9_12535)
{
l9_12536=(l9_12532*1.0)!=0.0;
}
else
{
l9_12536=l9_12535;
}
l9_12533=float(l9_12536);
float3 l9_12537=float3(0.0);
float l9_12538=0.0;
float l9_12539=l9_12515;
float l9_12540=l9_12517;
float l9_12541=l9_12519;
float l9_12542=l9_12521;
float2 l9_12543=l9_12523;
float l9_12544=l9_12525;
float l9_12545=l9_12529;
float l9_12546=l9_12533;
ssGlobals l9_12547=tempGlobals;
tempGlobals=l9_12547;
float3 l9_12548=float3(0.0);
float l9_12549=0.0;
N181_timeGlobal=l9_12539;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_12540;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_12541;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_12542;
N181_lifeTimeMinMax=l9_12543;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_12544;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_12545;
N181_isTrailCondition=l9_12546!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_12550=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_12551=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_12550=length(float4(1.0)*l9_12551);
}
N181_globalSeed=N181_externalSeed+l9_12550;
int l9_12552=0;
l9_12552=ssInstanceID;
int l9_12553=l9_12552;
float l9_12554=float(l9_12553);
int l9_12555=int(l9_12554);
int l9_12556=l9_12555^(l9_12555*15299);
int l9_12557=l9_12556;
int l9_12558=l9_12557;
int l9_12559=((l9_12558*((l9_12558*1471343)+101146501))+1559861749)&2147483647;
int l9_12560=l9_12559;
int l9_12561=l9_12557*1399;
int l9_12562=((l9_12561*((l9_12561*1471343)+101146501))+1559861749)&2147483647;
int l9_12563=l9_12562;
int l9_12564=l9_12557*7177;
int l9_12565=((l9_12564*((l9_12564*1471343)+101146501))+1559861749)&2147483647;
int l9_12566=l9_12565;
int l9_12567=l9_12560;
float l9_12568=float(l9_12567)*4.6566129e-10;
int l9_12569=l9_12563;
float l9_12570=float(l9_12569)*4.6566129e-10;
int l9_12571=l9_12566;
float l9_12572=float(l9_12571)*4.6566129e-10;
float3 l9_12573=float3(l9_12568,l9_12570,l9_12572);
float3 l9_12574=l9_12573;
N181_particleSeed=l9_12574;
float l9_12575=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_12576;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_12576=N181_lifeTimeMinMax;
}
else
{
l9_12576=float2(N181_lifeTimeConstant);
}
float2 l9_12577=l9_12576;
float l9_12578=fast::max(l9_12577.x,0.0099999998);
float l9_12579=fast::max(l9_12577.y,0.0099999998);
float l9_12580=tempGlobals.gTimeElapsed;
float l9_12581=l9_12580;
if (N181_ENABLE_EXTERNALTIME)
{
l9_12581=N181_externalTime;
}
float l9_12582=l9_12581;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_12582=N181_timeGlobal*l9_12581;
}
else
{
float l9_12583=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_12583=N181_trailLength;
}
}
float l9_12584=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_12585=0.0;
float l9_12586;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_12586=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_12586=0.0;
}
l9_12585=l9_12586;
float l9_12587=l9_12585;
int l9_12588=0;
l9_12588=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_12589=l9_12588;
l9_12584=fast::max(l9_12587*(1.0-(1.0/float(l9_12589))),0.0);
}
else
{
l9_12584=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_12590=fract(((l9_12581*N181_timeGlobal)*(1.0/(l9_12577.y+l9_12583)))+l9_12584);
l9_12582=l9_12590*(l9_12577.y+l9_12583);
}
float l9_12591=mix(l9_12582/l9_12578,l9_12582/l9_12579,l9_12575);
float l9_12592=fast::clamp(l9_12591,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_12582,l9_12592);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_12593=tempGlobals.Surface_UVCoord0;
l9_12582-=(l9_12593.y*N181_trailLength);
l9_12591=mix(l9_12582/l9_12578,l9_12582/l9_12579,l9_12575);
l9_12592=fast::clamp(l9_12591,0.0,1.0);
}
}
float l9_12594=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_12581-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_12594=1.0;
}
}
}
float l9_12595=l9_12591+l9_12594;
N181_particleAlive=1.0;
if ((l9_12595>0.99989998)||(l9_12582<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_12581*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_12577,l9_12582,l9_12592);
l9_12548=N181_particleSeed;
l9_12549=N181_isTrail;
l9_12537=l9_12548;
l9_12538=l9_12549;
float l9_12596=0.0;
float l9_12597=(*sc_set0.UserUniforms).attractRepelForceStrength;
l9_12596=l9_12597;
float3 l9_12598=float3(0.0);
float3 l9_12599=(*sc_set0.UserUniforms).customForceOrigin;
l9_12598=l9_12599;
float3 l9_12600=float3(0.0);
float3 l9_12601=l9_12514;
float3 l9_12602=l9_12537;
float l9_12603=l9_12596;
float3 l9_12604=l9_12598;
ssGlobals l9_12605=tempGlobals;
tempGlobals=l9_12605;
float3 l9_12606=float3(0.0);
N223_OnOff=(int(Tweak_N131_tmp)!=0);
N223_ParticleSpawnPosition=l9_12601;
N223_ParticleSeed=l9_12602;
N223_Strength=l9_12603;
N223_ForceOrigin=l9_12604;
N223_CustomForce=float3(0.0);
float4x4 l9_12607=(*sc_set0.UserUniforms).sc_ModelMatrix;
float4 l9_12608=l9_12607*float4(N223_ParticleSpawnPosition,1.0);
if (N223_OnOff)
{
float3 l9_12609=N223_ForceOrigin;
float3 l9_12610=l9_12608.xyz;
float l9_12611=N223_Strength;
float3 l9_12612=float3(0.0);
if (all(l9_12609==l9_12610))
{
int l9_12613=0;
l9_12613=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_12614=l9_12613;
float3 l9_12615=N223_ParticleSeed*float(l9_12614);
int l9_12616=int(l9_12615.x);
int l9_12617=int(l9_12615.y);
int l9_12618=int(l9_12615.z);
int l9_12619=((l9_12616*15299)^(l9_12617*30133))^(l9_12618*17539);
int l9_12620=l9_12619;
int l9_12621=l9_12620;
int l9_12622=((l9_12621*((l9_12621*1471343)+101146501))+1559861749)&2147483647;
int l9_12623=l9_12622;
int l9_12624=l9_12620*1399;
int l9_12625=((l9_12624*((l9_12624*1471343)+101146501))+1559861749)&2147483647;
int l9_12626=l9_12625;
int l9_12627=l9_12620*7177;
int l9_12628=((l9_12627*((l9_12627*1471343)+101146501))+1559861749)&2147483647;
int l9_12629=l9_12628;
int l9_12630=l9_12623;
float l9_12631=float(l9_12630)*4.6566129e-10;
int l9_12632=l9_12626;
float l9_12633=float(l9_12632)*4.6566129e-10;
int l9_12634=l9_12629;
float l9_12635=float(l9_12634)*4.6566129e-10;
float3 l9_12636=float3(l9_12631,l9_12633,l9_12635);
float3 l9_12637=l9_12636;
l9_12612=normalize((l9_12637-float3(0.5))*2.0);
}
else
{
l9_12612=normalize(l9_12609-l9_12610);
}
float3 l9_12638=l9_12612*l9_12611;
N223_CustomForce+=l9_12638;
}
l9_12606=N223_CustomForce;
l9_12600=l9_12606;
float3 l9_12639=float3(0.0);
l9_12639=tempGlobals.N111_ParticleSpawnPosition;
float3 l9_12640=float3(0.0);
float3 l9_12641=(*sc_set0.UserUniforms).Tex3dScale;
l9_12640=l9_12641;
float3 l9_12642=float3(0.0);
float3 l9_12643=(*sc_set0.UserUniforms).Tex3dScrollSpeed;
l9_12642=l9_12643;
float3 l9_12644=float3(0.0);
float3 l9_12645=(*sc_set0.UserUniforms).Tex3dForceStrength;
l9_12644=l9_12645;
float3 l9_12646=float3(0.0);
float3 l9_12647=l9_12639;
float3 l9_12648=l9_12640;
float3 l9_12649=l9_12642;
float3 l9_12650=l9_12644;
ssGlobals l9_12651=tempGlobals;
tempGlobals=l9_12651;
float3 l9_12652=float3(0.0);
N202_OnOff=(int(Tweak_N133_tmp)!=0);
N202_ParticleSpawnPosition=l9_12647;
N202_ScaleTexture=l9_12648;
N202_ScrollSpeed=l9_12649;
N202_Strength=l9_12650;
N202_CustomForce=float3(0.0);
if (N202_OnOff)
{
float3 l9_12653=N202_ParticleSpawnPosition;
float3 l9_12654=N202_Strength;
float3 l9_12655=l9_12653;
float l9_12656=tempGlobals.gTimeElapsed;
float3 l9_12657=float3(l9_12656)*(N202_ScrollSpeed*0.1);
l9_12655/=(N202_ScaleTexture*2.0);
l9_12655+=l9_12657;
float3 l9_12658=l9_12655;
float4 l9_12659=float4(0.0);
float3 l9_12660=l9_12658;
float l9_12661=0.0;
float4 l9_12662=sc_set0.Tex3d.sample(sc_set0.Tex3dSmpSC,l9_12660,level(l9_12661));
l9_12659=l9_12662;
float4 l9_12663=l9_12659;
float3 l9_12664=l9_12663.xyz;
float3 l9_12665=(l9_12664*2.0)-float3(1.0);
l9_12665*=l9_12654;
float3 l9_12666=l9_12665;
N202_CustomForce+=l9_12666;
}
l9_12652=N202_CustomForce;
l9_12646=l9_12652;
float3 l9_12667=float3(0.0);
l9_12667=tempGlobals.N155_helixDirection;
float3 l9_12668=float3(0.0);
l9_12668=tempGlobals.N319_curveDirection;
float3 l9_12669=float3(0.0);
float3 l9_12670=(*sc_set0.UserUniforms).Tweak_N314;
l9_12669=l9_12670;
float3 l9_12671=float3(0.0);
float l9_12672=l9_12538;
float3 l9_12673=l9_12667;
float3 l9_12674=l9_12668;
float3 l9_12675=l9_12669;
ssGlobals l9_12676=tempGlobals;
tempGlobals=l9_12676;
float3 l9_12677=float3(0.0);
N277_OnOff=(int(Tweak_N313_tmp)!=0);
N277_isTrail=l9_12672!=0.0;
N277_helixDir=l9_12673;
N277_curveDir=l9_12674;
N277_Strength=l9_12675;
N277_Path=NODE_248_DROPLIST_ITEM_tmp;
N277_DirectionForce=float3(0.0);
N277_Direction=float3(0.0);
if (N277_OnOff||N277_isTrail)
{
float3 l9_12678;
if (N277_Path==5)
{
l9_12678=N277_helixDir;
}
else
{
bool3 l9_12679=bool3(N277_Path==6);
l9_12678=float3(l9_12679.x ? N277_curveDir.x : float3(0.0).x,l9_12679.y ? N277_curveDir.y : float3(0.0).y,l9_12679.z ? N277_curveDir.z : float3(0.0).z);
}
float3 l9_12680=l9_12678;
float3 l9_12681=l9_12680;
float3 l9_12682=l9_12681;
if (N277_OnOff)
{
N277_DirectionForce+=(l9_12682*N277_Strength);
}
N277_Direction=l9_12682;
}
l9_12677=N277_DirectionForce;
l9_12671=l9_12677;
float3 l9_12683=float3(0.0);
l9_12683=(l9_12600+l9_12646)+l9_12671;
l9_12513=l9_12683;
float3 l9_12684=l9_12513;
float3 l9_12685=((l9_12684/float3(2.0))*(l9_11886-l9_12400))*(l9_11886-l9_12400);
l9_11975-=l9_12685;
}
if (rotationSpace_tmp==2)
{
l9_12399=((((l9_12148-l9_12510)*l9_12276)+l9_11973)+l9_11974)+l9_11975;
}
else
{
if (rotationSpace_tmp==1)
{
l9_12399=(((l9_12148-l9_12510)+l9_11973)+l9_11974)+l9_11975;
}
else
{
l9_12399=((((l9_12148-l9_12510)+l9_11974)+l9_11973)+l9_11975)*l9_12276;
}
}
l9_12399=normalize(l9_12399+float3(1e-06));
}
float3 l9_12686=float3(0.0,0.0,1.0);
float3 l9_12687=cross(l9_12399,l9_12686);
float3 l9_12688=normalize(l9_12687);
float l9_12689=length(l9_12687);
float l9_12690=dot(l9_12686,l9_12399);
float l9_12691=1.0-l9_12690;
l9_12398=float3x3(float3(((l9_12691*l9_12688.x)*l9_12688.x)+l9_12690,((l9_12691*l9_12688.x)*l9_12688.y)-(l9_12688.z*l9_12689),((l9_12691*l9_12688.z)*l9_12688.x)+(l9_12688.y*l9_12689)),float3(((l9_12691*l9_12688.x)*l9_12688.y)+(l9_12688.z*l9_12689),((l9_12691*l9_12688.y)*l9_12688.y)+l9_12690,((l9_12691*l9_12688.y)*l9_12688.z)-(l9_12688.x*l9_12689)),float3(((l9_12691*l9_12688.z)*l9_12688.x)-(l9_12688.y*l9_12689),((l9_12691*l9_12688.y)*l9_12688.z)+(l9_12688.x*l9_12689),((l9_12691*l9_12688.z)*l9_12688.z)+l9_12690));
}
float3x3 l9_12692=float3x3(float3(cos(l9_12334),-sin(l9_12334),0.0),float3(sin(l9_12334),cos(l9_12334),0.0),float3(0.0,0.0,1.0));
l9_12398=l9_12398*l9_12692;
if ((int(ALIGNPARTICLES_tmp)!=0))
{
if (ALIGN_PARTICLES_TO_OPTION_tmp==0)
{
if (!N111_ENABLE_IGNOREVEL)
{
float l9_12693=fast::max(length(l9_12277*0.02),1.0)*fast::max(N111_sizeVelScale,1e-06);
l9_12693=fast::clamp(l9_12693,N111_velScaleMinMax.x,N111_velScaleMinMax.y);
N111_position.z*=l9_12693;
}
}
}
}
else
{
float l9_12694=fract((N111_particleSeed.x*92.653008)+N111_globalSeed);
float l9_12695=mix(N111_rotationRandomX.x,N111_rotationRandomX.y,l9_12694);
float l9_12696=mix(N111_rotationRateX.x,N111_rotationRateX.y,l9_12694);
float l9_12697=((l9_12696*l9_12326)*l9_11887)*2.0;
float l9_12698=fract((N111_particleSeed.y*6.7557559)+N111_globalSeed);
float l9_12699=mix(N111_rotationRandomY.x,N111_rotationRandomY.y,l9_12698);
float l9_12700=mix(N111_rotationRateY.x,N111_rotationRateY.y,l9_12698);
float l9_12701=((l9_12700*l9_12326)*l9_11887)*2.0;
float l9_12702=3.1415927*(l9_12697+l9_12695);
float l9_12703=3.1415927*(l9_12701+l9_12699);
float l9_12704=3.1415927*(l9_12333+l9_12325);
float3 l9_12705=float3(l9_12702,l9_12703,l9_12704);
float l9_12706=cos(l9_12705.x);
float l9_12707=sin(l9_12705.x);
float l9_12708=cos(l9_12705.y);
float l9_12709=sin(l9_12705.y);
float l9_12710=cos(l9_12705.z);
float l9_12711=sin(l9_12705.z);
l9_12398=float3x3(float3(l9_12708*l9_12710,(l9_12706*l9_12711)+((l9_12707*l9_12709)*l9_12710),(l9_12707*l9_12711)-((l9_12706*l9_12709)*l9_12710)),float3((-l9_12708)*l9_12711,(l9_12706*l9_12710)-((l9_12707*l9_12709)*l9_12711),(l9_12707*l9_12710)+((l9_12706*l9_12709)*l9_12711)),float3(l9_12709,(-l9_12707)*l9_12708,l9_12706*l9_12708));
}
if (!(rotationSpace_tmp==1))
{
if (!(int(ALIGNPARTICLES_tmp)!=0))
{
float4x4 l9_12712=(*sc_set0.UserUniforms).sc_ModelMatrix;
float4x4 l9_12713=(*sc_set0.UserUniforms).sc_ModelMatrix;
float4x4 l9_12714=(*sc_set0.UserUniforms).sc_ModelMatrix;
float3x3 l9_12715=float3x3(float3(l9_12712[0].xyz/float3(l9_12268.x)),float3(l9_12713[1].xyz/float3(l9_12268.y)),float3(l9_12714[2].xyz/float3(l9_12268.z)));
l9_12398=l9_12715*l9_12398;
}
}
N111_position=l9_12398*N111_position;
N111_normal=normalize(l9_12398*N111_normalObjectSpace);
N111_position+=l9_12279;
}
}
N111_timeValues=float4(l9_11885,l9_11886,l9_11887);
l9_8637=N111_timeValues;
l9_8635=l9_8637;
l9_8634=l9_8635;
out.Interpolator0.x=l9_8634.x;
out.Interpolator0.y=l9_8634.y;
out.Interpolator0.z=l9_8634.z;
out.Interpolator0.w=l9_8634.w;
ssGlobals param_30=Globals;
float4 l9_12716=float4(0.0);
float4 l9_12717=float4(0.0);
ssGlobals l9_12718=param_30;
tempGlobals=l9_12718;
float4 l9_12719=float4(0.0);
float3 l9_12720=float3(0.0);
float l9_12721=0.0;
float l9_12722=(*sc_set0.UserUniforms).timeGlobal;
l9_12721=l9_12722;
float l9_12723=0.0;
float l9_12724=(*sc_set0.UserUniforms).externalTimeInput;
l9_12723=l9_12724;
float l9_12725=0.0;
float l9_12726=(*sc_set0.UserUniforms).externalSeed;
l9_12725=l9_12726;
float l9_12727=0.0;
float l9_12728=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_12727=l9_12728;
float2 l9_12729=float2(0.0);
float2 l9_12730=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_12729=l9_12730;
float l9_12731=0.0;
float l9_12732=(*sc_set0.UserUniforms).spawnDuration;
l9_12731=l9_12732;
float l9_12733=0.0;
float l9_12734;
if ((int(TRAILS_tmp)!=0))
{
l9_12734=1.001;
}
else
{
l9_12734=0.001;
}
l9_12734-=0.001;
l9_12733=l9_12734;
float l9_12735=0.0;
float l9_12736=(*sc_set0.UserUniforms).trailLength;
l9_12735=l9_12736;
float4 l9_12737=float4(0.0);
l9_12737=tempGlobals.VertexColor;
float l9_12738=0.0;
l9_12738=l9_12737.x;
float l9_12739=0.0;
float l9_12740=l9_12733;
bool l9_12741=(l9_12740*1.0)!=0.0;
bool l9_12742;
if (l9_12741)
{
l9_12742=(l9_12738*1.0)!=0.0;
}
else
{
l9_12742=l9_12741;
}
l9_12739=float(l9_12742);
float3 l9_12743=float3(0.0);
float l9_12744=l9_12721;
float l9_12745=l9_12723;
float l9_12746=l9_12725;
float l9_12747=l9_12727;
float2 l9_12748=l9_12729;
float l9_12749=l9_12731;
float l9_12750=l9_12735;
float l9_12751=l9_12739;
ssGlobals l9_12752=tempGlobals;
tempGlobals=l9_12752;
float3 l9_12753=float3(0.0);
N181_timeGlobal=l9_12744;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_12745;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_12746;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_12747;
N181_lifeTimeMinMax=l9_12748;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_12749;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_12750;
N181_isTrailCondition=l9_12751!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_12754=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_12755=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_12754=length(float4(1.0)*l9_12755);
}
N181_globalSeed=N181_externalSeed+l9_12754;
int l9_12756=0;
l9_12756=ssInstanceID;
int l9_12757=l9_12756;
float l9_12758=float(l9_12757);
int l9_12759=int(l9_12758);
int l9_12760=l9_12759^(l9_12759*15299);
int l9_12761=l9_12760;
int l9_12762=l9_12761;
int l9_12763=((l9_12762*((l9_12762*1471343)+101146501))+1559861749)&2147483647;
int l9_12764=l9_12763;
int l9_12765=l9_12761*1399;
int l9_12766=((l9_12765*((l9_12765*1471343)+101146501))+1559861749)&2147483647;
int l9_12767=l9_12766;
int l9_12768=l9_12761*7177;
int l9_12769=((l9_12768*((l9_12768*1471343)+101146501))+1559861749)&2147483647;
int l9_12770=l9_12769;
int l9_12771=l9_12764;
float l9_12772=float(l9_12771)*4.6566129e-10;
int l9_12773=l9_12767;
float l9_12774=float(l9_12773)*4.6566129e-10;
int l9_12775=l9_12770;
float l9_12776=float(l9_12775)*4.6566129e-10;
float3 l9_12777=float3(l9_12772,l9_12774,l9_12776);
float3 l9_12778=l9_12777;
N181_particleSeed=l9_12778;
float l9_12779=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_12780;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_12780=N181_lifeTimeMinMax;
}
else
{
l9_12780=float2(N181_lifeTimeConstant);
}
float2 l9_12781=l9_12780;
float l9_12782=fast::max(l9_12781.x,0.0099999998);
float l9_12783=fast::max(l9_12781.y,0.0099999998);
float l9_12784=tempGlobals.gTimeElapsed;
float l9_12785=l9_12784;
if (N181_ENABLE_EXTERNALTIME)
{
l9_12785=N181_externalTime;
}
float l9_12786=l9_12785;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_12786=N181_timeGlobal*l9_12785;
}
else
{
float l9_12787=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_12787=N181_trailLength;
}
}
float l9_12788=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_12789=0.0;
float l9_12790;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_12790=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_12790=0.0;
}
l9_12789=l9_12790;
float l9_12791=l9_12789;
int l9_12792=0;
l9_12792=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_12793=l9_12792;
l9_12788=fast::max(l9_12791*(1.0-(1.0/float(l9_12793))),0.0);
}
else
{
l9_12788=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_12794=fract(((l9_12785*N181_timeGlobal)*(1.0/(l9_12781.y+l9_12787)))+l9_12788);
l9_12786=l9_12794*(l9_12781.y+l9_12787);
}
float l9_12795=mix(l9_12786/l9_12782,l9_12786/l9_12783,l9_12779);
float l9_12796=fast::clamp(l9_12795,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_12786,l9_12796);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_12797=tempGlobals.Surface_UVCoord0;
l9_12786-=(l9_12797.y*N181_trailLength);
l9_12795=mix(l9_12786/l9_12782,l9_12786/l9_12783,l9_12779);
l9_12796=fast::clamp(l9_12795,0.0,1.0);
}
}
float l9_12798=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_12785-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_12798=1.0;
}
}
}
float l9_12799=l9_12795+l9_12798;
N181_particleAlive=1.0;
if ((l9_12799>0.99989998)||(l9_12786<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_12785*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_12781,l9_12786,l9_12796);
l9_12753=N181_particleSeed;
l9_12743=l9_12753;
l9_12720=l9_12743;
float3 l9_12800=l9_12720;
N111_particleSeedIn=l9_12800;
float l9_12801=0.0;
float l9_12802=0.0;
float l9_12803=(*sc_set0.UserUniforms).timeGlobal;
l9_12802=l9_12803;
float l9_12804=0.0;
float l9_12805=(*sc_set0.UserUniforms).externalTimeInput;
l9_12804=l9_12805;
float l9_12806=0.0;
float l9_12807=(*sc_set0.UserUniforms).externalSeed;
l9_12806=l9_12807;
float l9_12808=0.0;
float l9_12809=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_12808=l9_12809;
float2 l9_12810=float2(0.0);
float2 l9_12811=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_12810=l9_12811;
float l9_12812=0.0;
float l9_12813=(*sc_set0.UserUniforms).spawnDuration;
l9_12812=l9_12813;
float l9_12814=0.0;
float l9_12815;
if ((int(TRAILS_tmp)!=0))
{
l9_12815=1.001;
}
else
{
l9_12815=0.001;
}
l9_12815-=0.001;
l9_12814=l9_12815;
float l9_12816=0.0;
float l9_12817=(*sc_set0.UserUniforms).trailLength;
l9_12816=l9_12817;
float4 l9_12818=float4(0.0);
l9_12818=tempGlobals.VertexColor;
float l9_12819=0.0;
l9_12819=l9_12818.x;
float l9_12820=0.0;
float l9_12821=l9_12814;
bool l9_12822=(l9_12821*1.0)!=0.0;
bool l9_12823;
if (l9_12822)
{
l9_12823=(l9_12819*1.0)!=0.0;
}
else
{
l9_12823=l9_12822;
}
l9_12820=float(l9_12823);
float l9_12824=0.0;
float l9_12825=l9_12802;
float l9_12826=l9_12804;
float l9_12827=l9_12806;
float l9_12828=l9_12808;
float2 l9_12829=l9_12810;
float l9_12830=l9_12812;
float l9_12831=l9_12816;
float l9_12832=l9_12820;
ssGlobals l9_12833=tempGlobals;
tempGlobals=l9_12833;
float l9_12834=0.0;
N181_timeGlobal=l9_12825;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_12826;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_12827;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_12828;
N181_lifeTimeMinMax=l9_12829;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_12830;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_12831;
N181_isTrailCondition=l9_12832!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_12835=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_12836=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_12835=length(float4(1.0)*l9_12836);
}
N181_globalSeed=N181_externalSeed+l9_12835;
int l9_12837=0;
l9_12837=ssInstanceID;
int l9_12838=l9_12837;
float l9_12839=float(l9_12838);
int l9_12840=int(l9_12839);
int l9_12841=l9_12840^(l9_12840*15299);
int l9_12842=l9_12841;
int l9_12843=l9_12842;
int l9_12844=((l9_12843*((l9_12843*1471343)+101146501))+1559861749)&2147483647;
int l9_12845=l9_12844;
int l9_12846=l9_12842*1399;
int l9_12847=((l9_12846*((l9_12846*1471343)+101146501))+1559861749)&2147483647;
int l9_12848=l9_12847;
int l9_12849=l9_12842*7177;
int l9_12850=((l9_12849*((l9_12849*1471343)+101146501))+1559861749)&2147483647;
int l9_12851=l9_12850;
int l9_12852=l9_12845;
float l9_12853=float(l9_12852)*4.6566129e-10;
int l9_12854=l9_12848;
float l9_12855=float(l9_12854)*4.6566129e-10;
int l9_12856=l9_12851;
float l9_12857=float(l9_12856)*4.6566129e-10;
float3 l9_12858=float3(l9_12853,l9_12855,l9_12857);
float3 l9_12859=l9_12858;
N181_particleSeed=l9_12859;
float l9_12860=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_12861;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_12861=N181_lifeTimeMinMax;
}
else
{
l9_12861=float2(N181_lifeTimeConstant);
}
float2 l9_12862=l9_12861;
float l9_12863=fast::max(l9_12862.x,0.0099999998);
float l9_12864=fast::max(l9_12862.y,0.0099999998);
float l9_12865=tempGlobals.gTimeElapsed;
float l9_12866=l9_12865;
if (N181_ENABLE_EXTERNALTIME)
{
l9_12866=N181_externalTime;
}
float l9_12867=l9_12866;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_12867=N181_timeGlobal*l9_12866;
}
else
{
float l9_12868=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_12868=N181_trailLength;
}
}
float l9_12869=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_12870=0.0;
float l9_12871;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_12871=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_12871=0.0;
}
l9_12870=l9_12871;
float l9_12872=l9_12870;
int l9_12873=0;
l9_12873=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_12874=l9_12873;
l9_12869=fast::max(l9_12872*(1.0-(1.0/float(l9_12874))),0.0);
}
else
{
l9_12869=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_12875=fract(((l9_12866*N181_timeGlobal)*(1.0/(l9_12862.y+l9_12868)))+l9_12869);
l9_12867=l9_12875*(l9_12862.y+l9_12868);
}
float l9_12876=mix(l9_12867/l9_12863,l9_12867/l9_12864,l9_12860);
float l9_12877=fast::clamp(l9_12876,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_12867,l9_12877);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_12878=tempGlobals.Surface_UVCoord0;
l9_12867-=(l9_12878.y*N181_trailLength);
l9_12876=mix(l9_12867/l9_12863,l9_12867/l9_12864,l9_12860);
l9_12877=fast::clamp(l9_12876,0.0,1.0);
}
}
float l9_12879=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_12866-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_12879=1.0;
}
}
}
float l9_12880=l9_12876+l9_12879;
N181_particleAlive=1.0;
if ((l9_12880>0.99989998)||(l9_12867<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_12866*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_12862,l9_12867,l9_12877);
l9_12834=N181_globalSeed;
l9_12824=l9_12834;
l9_12801=l9_12824;
float l9_12881=l9_12801;
N111_globalSeedIn=l9_12881;
float l9_12882=0.0;
float l9_12883=0.0;
float l9_12884=(*sc_set0.UserUniforms).timeGlobal;
l9_12883=l9_12884;
float l9_12885=0.0;
float l9_12886=(*sc_set0.UserUniforms).externalTimeInput;
l9_12885=l9_12886;
float l9_12887=0.0;
float l9_12888=(*sc_set0.UserUniforms).externalSeed;
l9_12887=l9_12888;
float l9_12889=0.0;
float l9_12890=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_12889=l9_12890;
float2 l9_12891=float2(0.0);
float2 l9_12892=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_12891=l9_12892;
float l9_12893=0.0;
float l9_12894=(*sc_set0.UserUniforms).spawnDuration;
l9_12893=l9_12894;
float l9_12895=0.0;
float l9_12896;
if ((int(TRAILS_tmp)!=0))
{
l9_12896=1.001;
}
else
{
l9_12896=0.001;
}
l9_12896-=0.001;
l9_12895=l9_12896;
float l9_12897=0.0;
float l9_12898=(*sc_set0.UserUniforms).trailLength;
l9_12897=l9_12898;
float4 l9_12899=float4(0.0);
l9_12899=tempGlobals.VertexColor;
float l9_12900=0.0;
l9_12900=l9_12899.x;
float l9_12901=0.0;
float l9_12902=l9_12895;
bool l9_12903=(l9_12902*1.0)!=0.0;
bool l9_12904;
if (l9_12903)
{
l9_12904=(l9_12900*1.0)!=0.0;
}
else
{
l9_12904=l9_12903;
}
l9_12901=float(l9_12904);
float l9_12905=0.0;
float l9_12906=l9_12883;
float l9_12907=l9_12885;
float l9_12908=l9_12887;
float l9_12909=l9_12889;
float2 l9_12910=l9_12891;
float l9_12911=l9_12893;
float l9_12912=l9_12897;
float l9_12913=l9_12901;
ssGlobals l9_12914=tempGlobals;
tempGlobals=l9_12914;
float l9_12915=0.0;
N181_timeGlobal=l9_12906;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_12907;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_12908;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_12909;
N181_lifeTimeMinMax=l9_12910;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_12911;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_12912;
N181_isTrailCondition=l9_12913!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_12916=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_12917=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_12916=length(float4(1.0)*l9_12917);
}
N181_globalSeed=N181_externalSeed+l9_12916;
int l9_12918=0;
l9_12918=ssInstanceID;
int l9_12919=l9_12918;
float l9_12920=float(l9_12919);
int l9_12921=int(l9_12920);
int l9_12922=l9_12921^(l9_12921*15299);
int l9_12923=l9_12922;
int l9_12924=l9_12923;
int l9_12925=((l9_12924*((l9_12924*1471343)+101146501))+1559861749)&2147483647;
int l9_12926=l9_12925;
int l9_12927=l9_12923*1399;
int l9_12928=((l9_12927*((l9_12927*1471343)+101146501))+1559861749)&2147483647;
int l9_12929=l9_12928;
int l9_12930=l9_12923*7177;
int l9_12931=((l9_12930*((l9_12930*1471343)+101146501))+1559861749)&2147483647;
int l9_12932=l9_12931;
int l9_12933=l9_12926;
float l9_12934=float(l9_12933)*4.6566129e-10;
int l9_12935=l9_12929;
float l9_12936=float(l9_12935)*4.6566129e-10;
int l9_12937=l9_12932;
float l9_12938=float(l9_12937)*4.6566129e-10;
float3 l9_12939=float3(l9_12934,l9_12936,l9_12938);
float3 l9_12940=l9_12939;
N181_particleSeed=l9_12940;
float l9_12941=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_12942;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_12942=N181_lifeTimeMinMax;
}
else
{
l9_12942=float2(N181_lifeTimeConstant);
}
float2 l9_12943=l9_12942;
float l9_12944=fast::max(l9_12943.x,0.0099999998);
float l9_12945=fast::max(l9_12943.y,0.0099999998);
float l9_12946=tempGlobals.gTimeElapsed;
float l9_12947=l9_12946;
if (N181_ENABLE_EXTERNALTIME)
{
l9_12947=N181_externalTime;
}
float l9_12948=l9_12947;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_12948=N181_timeGlobal*l9_12947;
}
else
{
float l9_12949=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_12949=N181_trailLength;
}
}
float l9_12950=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_12951=0.0;
float l9_12952;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_12952=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_12952=0.0;
}
l9_12951=l9_12952;
float l9_12953=l9_12951;
int l9_12954=0;
l9_12954=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_12955=l9_12954;
l9_12950=fast::max(l9_12953*(1.0-(1.0/float(l9_12955))),0.0);
}
else
{
l9_12950=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_12956=fract(((l9_12947*N181_timeGlobal)*(1.0/(l9_12943.y+l9_12949)))+l9_12950);
l9_12948=l9_12956*(l9_12943.y+l9_12949);
}
float l9_12957=mix(l9_12948/l9_12944,l9_12948/l9_12945,l9_12941);
float l9_12958=fast::clamp(l9_12957,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_12948,l9_12958);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_12959=tempGlobals.Surface_UVCoord0;
l9_12948-=(l9_12959.y*N181_trailLength);
l9_12957=mix(l9_12948/l9_12944,l9_12948/l9_12945,l9_12941);
l9_12958=fast::clamp(l9_12957,0.0,1.0);
}
}
float l9_12960=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_12947-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_12960=1.0;
}
}
}
float l9_12961=l9_12957+l9_12960;
N181_particleAlive=1.0;
if ((l9_12961>0.99989998)||(l9_12948<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_12947*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_12943,l9_12948,l9_12958);
l9_12915=N181_particleAlive;
l9_12905=l9_12915;
l9_12882=l9_12905;
float l9_12962=l9_12882;
N111_particleAlive=l9_12962;
float4 l9_12963=float4(0.0);
float l9_12964=0.0;
float l9_12965=(*sc_set0.UserUniforms).timeGlobal;
l9_12964=l9_12965;
float l9_12966=0.0;
float l9_12967=(*sc_set0.UserUniforms).externalTimeInput;
l9_12966=l9_12967;
float l9_12968=0.0;
float l9_12969=(*sc_set0.UserUniforms).externalSeed;
l9_12968=l9_12969;
float l9_12970=0.0;
float l9_12971=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_12970=l9_12971;
float2 l9_12972=float2(0.0);
float2 l9_12973=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_12972=l9_12973;
float l9_12974=0.0;
float l9_12975=(*sc_set0.UserUniforms).spawnDuration;
l9_12974=l9_12975;
float l9_12976=0.0;
float l9_12977;
if ((int(TRAILS_tmp)!=0))
{
l9_12977=1.001;
}
else
{
l9_12977=0.001;
}
l9_12977-=0.001;
l9_12976=l9_12977;
float l9_12978=0.0;
float l9_12979=(*sc_set0.UserUniforms).trailLength;
l9_12978=l9_12979;
float4 l9_12980=float4(0.0);
l9_12980=tempGlobals.VertexColor;
float l9_12981=0.0;
l9_12981=l9_12980.x;
float l9_12982=0.0;
float l9_12983=l9_12976;
bool l9_12984=(l9_12983*1.0)!=0.0;
bool l9_12985;
if (l9_12984)
{
l9_12985=(l9_12981*1.0)!=0.0;
}
else
{
l9_12985=l9_12984;
}
l9_12982=float(l9_12985);
float4 l9_12986=float4(0.0);
float l9_12987=l9_12964;
float l9_12988=l9_12966;
float l9_12989=l9_12968;
float l9_12990=l9_12970;
float2 l9_12991=l9_12972;
float l9_12992=l9_12974;
float l9_12993=l9_12978;
float l9_12994=l9_12982;
ssGlobals l9_12995=tempGlobals;
tempGlobals=l9_12995;
float4 l9_12996=float4(0.0);
N181_timeGlobal=l9_12987;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_12988;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_12989;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_12990;
N181_lifeTimeMinMax=l9_12991;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_12992;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_12993;
N181_isTrailCondition=l9_12994!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_12997=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_12998=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_12997=length(float4(1.0)*l9_12998);
}
N181_globalSeed=N181_externalSeed+l9_12997;
int l9_12999=0;
l9_12999=ssInstanceID;
int l9_13000=l9_12999;
float l9_13001=float(l9_13000);
int l9_13002=int(l9_13001);
int l9_13003=l9_13002^(l9_13002*15299);
int l9_13004=l9_13003;
int l9_13005=l9_13004;
int l9_13006=((l9_13005*((l9_13005*1471343)+101146501))+1559861749)&2147483647;
int l9_13007=l9_13006;
int l9_13008=l9_13004*1399;
int l9_13009=((l9_13008*((l9_13008*1471343)+101146501))+1559861749)&2147483647;
int l9_13010=l9_13009;
int l9_13011=l9_13004*7177;
int l9_13012=((l9_13011*((l9_13011*1471343)+101146501))+1559861749)&2147483647;
int l9_13013=l9_13012;
int l9_13014=l9_13007;
float l9_13015=float(l9_13014)*4.6566129e-10;
int l9_13016=l9_13010;
float l9_13017=float(l9_13016)*4.6566129e-10;
int l9_13018=l9_13013;
float l9_13019=float(l9_13018)*4.6566129e-10;
float3 l9_13020=float3(l9_13015,l9_13017,l9_13019);
float3 l9_13021=l9_13020;
N181_particleSeed=l9_13021;
float l9_13022=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_13023;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_13023=N181_lifeTimeMinMax;
}
else
{
l9_13023=float2(N181_lifeTimeConstant);
}
float2 l9_13024=l9_13023;
float l9_13025=fast::max(l9_13024.x,0.0099999998);
float l9_13026=fast::max(l9_13024.y,0.0099999998);
float l9_13027=tempGlobals.gTimeElapsed;
float l9_13028=l9_13027;
if (N181_ENABLE_EXTERNALTIME)
{
l9_13028=N181_externalTime;
}
float l9_13029=l9_13028;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_13029=N181_timeGlobal*l9_13028;
}
else
{
float l9_13030=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_13030=N181_trailLength;
}
}
float l9_13031=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_13032=0.0;
float l9_13033;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_13033=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_13033=0.0;
}
l9_13032=l9_13033;
float l9_13034=l9_13032;
int l9_13035=0;
l9_13035=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_13036=l9_13035;
l9_13031=fast::max(l9_13034*(1.0-(1.0/float(l9_13036))),0.0);
}
else
{
l9_13031=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_13037=fract(((l9_13028*N181_timeGlobal)*(1.0/(l9_13024.y+l9_13030)))+l9_13031);
l9_13029=l9_13037*(l9_13024.y+l9_13030);
}
float l9_13038=mix(l9_13029/l9_13025,l9_13029/l9_13026,l9_13022);
float l9_13039=fast::clamp(l9_13038,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_13029,l9_13039);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_13040=tempGlobals.Surface_UVCoord0;
l9_13029-=(l9_13040.y*N181_trailLength);
l9_13038=mix(l9_13029/l9_13025,l9_13029/l9_13026,l9_13022);
l9_13039=fast::clamp(l9_13038,0.0,1.0);
}
}
float l9_13041=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_13028-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_13041=1.0;
}
}
}
float l9_13042=l9_13038+l9_13041;
N181_particleAlive=1.0;
if ((l9_13042>0.99989998)||(l9_13029<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_13028*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_13024,l9_13029,l9_13039);
l9_12996=N181_timeValues;
l9_12986=l9_12996;
l9_12963=l9_12986;
float4 l9_13043=l9_12963;
N111_timeValuesIn=l9_13043;
float l9_13044=0.0;
float l9_13045=0.0;
float l9_13046=(*sc_set0.UserUniforms).timeGlobal;
l9_13045=l9_13046;
float l9_13047=0.0;
float l9_13048=(*sc_set0.UserUniforms).externalTimeInput;
l9_13047=l9_13048;
float l9_13049=0.0;
float l9_13050=(*sc_set0.UserUniforms).externalSeed;
l9_13049=l9_13050;
float l9_13051=0.0;
float l9_13052=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_13051=l9_13052;
float2 l9_13053=float2(0.0);
float2 l9_13054=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_13053=l9_13054;
float l9_13055=0.0;
float l9_13056=(*sc_set0.UserUniforms).spawnDuration;
l9_13055=l9_13056;
float l9_13057=0.0;
float l9_13058;
if ((int(TRAILS_tmp)!=0))
{
l9_13058=1.001;
}
else
{
l9_13058=0.001;
}
l9_13058-=0.001;
l9_13057=l9_13058;
float l9_13059=0.0;
float l9_13060=(*sc_set0.UserUniforms).trailLength;
l9_13059=l9_13060;
float4 l9_13061=float4(0.0);
l9_13061=tempGlobals.VertexColor;
float l9_13062=0.0;
l9_13062=l9_13061.x;
float l9_13063=0.0;
float l9_13064=l9_13057;
bool l9_13065=(l9_13064*1.0)!=0.0;
bool l9_13066;
if (l9_13065)
{
l9_13066=(l9_13062*1.0)!=0.0;
}
else
{
l9_13066=l9_13065;
}
l9_13063=float(l9_13066);
float l9_13067=0.0;
float l9_13068=l9_13045;
float l9_13069=l9_13047;
float l9_13070=l9_13049;
float l9_13071=l9_13051;
float2 l9_13072=l9_13053;
float l9_13073=l9_13055;
float l9_13074=l9_13059;
float l9_13075=l9_13063;
ssGlobals l9_13076=tempGlobals;
tempGlobals=l9_13076;
float l9_13077=0.0;
N181_timeGlobal=l9_13068;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_13069;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_13070;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_13071;
N181_lifeTimeMinMax=l9_13072;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_13073;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_13074;
N181_isTrailCondition=l9_13075!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_13078=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_13079=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_13078=length(float4(1.0)*l9_13079);
}
N181_globalSeed=N181_externalSeed+l9_13078;
int l9_13080=0;
l9_13080=ssInstanceID;
int l9_13081=l9_13080;
float l9_13082=float(l9_13081);
int l9_13083=int(l9_13082);
int l9_13084=l9_13083^(l9_13083*15299);
int l9_13085=l9_13084;
int l9_13086=l9_13085;
int l9_13087=((l9_13086*((l9_13086*1471343)+101146501))+1559861749)&2147483647;
int l9_13088=l9_13087;
int l9_13089=l9_13085*1399;
int l9_13090=((l9_13089*((l9_13089*1471343)+101146501))+1559861749)&2147483647;
int l9_13091=l9_13090;
int l9_13092=l9_13085*7177;
int l9_13093=((l9_13092*((l9_13092*1471343)+101146501))+1559861749)&2147483647;
int l9_13094=l9_13093;
int l9_13095=l9_13088;
float l9_13096=float(l9_13095)*4.6566129e-10;
int l9_13097=l9_13091;
float l9_13098=float(l9_13097)*4.6566129e-10;
int l9_13099=l9_13094;
float l9_13100=float(l9_13099)*4.6566129e-10;
float3 l9_13101=float3(l9_13096,l9_13098,l9_13100);
float3 l9_13102=l9_13101;
N181_particleSeed=l9_13102;
float l9_13103=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_13104;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_13104=N181_lifeTimeMinMax;
}
else
{
l9_13104=float2(N181_lifeTimeConstant);
}
float2 l9_13105=l9_13104;
float l9_13106=fast::max(l9_13105.x,0.0099999998);
float l9_13107=fast::max(l9_13105.y,0.0099999998);
float l9_13108=tempGlobals.gTimeElapsed;
float l9_13109=l9_13108;
if (N181_ENABLE_EXTERNALTIME)
{
l9_13109=N181_externalTime;
}
float l9_13110=l9_13109;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_13110=N181_timeGlobal*l9_13109;
}
else
{
float l9_13111=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_13111=N181_trailLength;
}
}
float l9_13112=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_13113=0.0;
float l9_13114;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_13114=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_13114=0.0;
}
l9_13113=l9_13114;
float l9_13115=l9_13113;
int l9_13116=0;
l9_13116=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_13117=l9_13116;
l9_13112=fast::max(l9_13115*(1.0-(1.0/float(l9_13117))),0.0);
}
else
{
l9_13112=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_13118=fract(((l9_13109*N181_timeGlobal)*(1.0/(l9_13105.y+l9_13111)))+l9_13112);
l9_13110=l9_13118*(l9_13105.y+l9_13111);
}
float l9_13119=mix(l9_13110/l9_13106,l9_13110/l9_13107,l9_13103);
float l9_13120=fast::clamp(l9_13119,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_13110,l9_13120);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_13121=tempGlobals.Surface_UVCoord0;
l9_13110-=(l9_13121.y*N181_trailLength);
l9_13119=mix(l9_13110/l9_13106,l9_13110/l9_13107,l9_13103);
l9_13120=fast::clamp(l9_13119,0.0,1.0);
}
}
float l9_13122=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_13109-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_13122=1.0;
}
}
}
float l9_13123=l9_13119+l9_13122;
N181_particleAlive=1.0;
if ((l9_13123>0.99989998)||(l9_13110<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_13109*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_13105,l9_13110,l9_13120);
l9_13077=N181_isTrail;
l9_13067=l9_13077;
l9_13044=l9_13067;
bool l9_13124=l9_13044!=0.0;
N111_isTrail=l9_13124;
float2 l9_13125=float2(0.0);
float l9_13126=0.0;
float l9_13127=(*sc_set0.UserUniforms).timeGlobal;
l9_13126=l9_13127;
float l9_13128=0.0;
float l9_13129=(*sc_set0.UserUniforms).externalTimeInput;
l9_13128=l9_13129;
float l9_13130=0.0;
float l9_13131=(*sc_set0.UserUniforms).externalSeed;
l9_13130=l9_13131;
float l9_13132=0.0;
float l9_13133=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_13132=l9_13133;
float2 l9_13134=float2(0.0);
float2 l9_13135=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_13134=l9_13135;
float l9_13136=0.0;
float l9_13137=(*sc_set0.UserUniforms).spawnDuration;
l9_13136=l9_13137;
float l9_13138=0.0;
float l9_13139;
if ((int(TRAILS_tmp)!=0))
{
l9_13139=1.001;
}
else
{
l9_13139=0.001;
}
l9_13139-=0.001;
l9_13138=l9_13139;
float l9_13140=0.0;
float l9_13141=(*sc_set0.UserUniforms).trailLength;
l9_13140=l9_13141;
float4 l9_13142=float4(0.0);
l9_13142=tempGlobals.VertexColor;
float l9_13143=0.0;
l9_13143=l9_13142.x;
float l9_13144=0.0;
float l9_13145=l9_13138;
bool l9_13146=(l9_13145*1.0)!=0.0;
bool l9_13147;
if (l9_13146)
{
l9_13147=(l9_13143*1.0)!=0.0;
}
else
{
l9_13147=l9_13146;
}
l9_13144=float(l9_13147);
float2 l9_13148=float2(0.0);
float l9_13149=l9_13126;
float l9_13150=l9_13128;
float l9_13151=l9_13130;
float l9_13152=l9_13132;
float2 l9_13153=l9_13134;
float l9_13154=l9_13136;
float l9_13155=l9_13140;
float l9_13156=l9_13144;
ssGlobals l9_13157=tempGlobals;
tempGlobals=l9_13157;
float2 l9_13158=float2(0.0);
N181_timeGlobal=l9_13149;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_13150;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_13151;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_13152;
N181_lifeTimeMinMax=l9_13153;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_13154;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_13155;
N181_isTrailCondition=l9_13156!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_13159=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_13160=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_13159=length(float4(1.0)*l9_13160);
}
N181_globalSeed=N181_externalSeed+l9_13159;
int l9_13161=0;
l9_13161=ssInstanceID;
int l9_13162=l9_13161;
float l9_13163=float(l9_13162);
int l9_13164=int(l9_13163);
int l9_13165=l9_13164^(l9_13164*15299);
int l9_13166=l9_13165;
int l9_13167=l9_13166;
int l9_13168=((l9_13167*((l9_13167*1471343)+101146501))+1559861749)&2147483647;
int l9_13169=l9_13168;
int l9_13170=l9_13166*1399;
int l9_13171=((l9_13170*((l9_13170*1471343)+101146501))+1559861749)&2147483647;
int l9_13172=l9_13171;
int l9_13173=l9_13166*7177;
int l9_13174=((l9_13173*((l9_13173*1471343)+101146501))+1559861749)&2147483647;
int l9_13175=l9_13174;
int l9_13176=l9_13169;
float l9_13177=float(l9_13176)*4.6566129e-10;
int l9_13178=l9_13172;
float l9_13179=float(l9_13178)*4.6566129e-10;
int l9_13180=l9_13175;
float l9_13181=float(l9_13180)*4.6566129e-10;
float3 l9_13182=float3(l9_13177,l9_13179,l9_13181);
float3 l9_13183=l9_13182;
N181_particleSeed=l9_13183;
float l9_13184=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_13185;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_13185=N181_lifeTimeMinMax;
}
else
{
l9_13185=float2(N181_lifeTimeConstant);
}
float2 l9_13186=l9_13185;
float l9_13187=fast::max(l9_13186.x,0.0099999998);
float l9_13188=fast::max(l9_13186.y,0.0099999998);
float l9_13189=tempGlobals.gTimeElapsed;
float l9_13190=l9_13189;
if (N181_ENABLE_EXTERNALTIME)
{
l9_13190=N181_externalTime;
}
float l9_13191=l9_13190;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_13191=N181_timeGlobal*l9_13190;
}
else
{
float l9_13192=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_13192=N181_trailLength;
}
}
float l9_13193=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_13194=0.0;
float l9_13195;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_13195=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_13195=0.0;
}
l9_13194=l9_13195;
float l9_13196=l9_13194;
int l9_13197=0;
l9_13197=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_13198=l9_13197;
l9_13193=fast::max(l9_13196*(1.0-(1.0/float(l9_13198))),0.0);
}
else
{
l9_13193=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_13199=fract(((l9_13190*N181_timeGlobal)*(1.0/(l9_13186.y+l9_13192)))+l9_13193);
l9_13191=l9_13199*(l9_13186.y+l9_13192);
}
float l9_13200=mix(l9_13191/l9_13187,l9_13191/l9_13188,l9_13184);
float l9_13201=fast::clamp(l9_13200,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_13191,l9_13201);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_13202=tempGlobals.Surface_UVCoord0;
l9_13191-=(l9_13202.y*N181_trailLength);
l9_13200=mix(l9_13191/l9_13187,l9_13191/l9_13188,l9_13184);
l9_13201=fast::clamp(l9_13200,0.0,1.0);
}
}
float l9_13203=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_13190-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_13203=1.0;
}
}
}
float l9_13204=l9_13200+l9_13203;
N181_particleAlive=1.0;
if ((l9_13204>0.99989998)||(l9_13191<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_13190*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_13186,l9_13191,l9_13201);
l9_13158=N181_trailHeadTime;
l9_13148=l9_13158;
l9_13125=l9_13148;
float2 l9_13205=l9_13125;
N111_trailHeadTime=l9_13205;
float2 l9_13206=float2(0.0);
float2 l9_13207=float2(0.0);
float2 l9_13208=(*sc_set0.UserUniforms).trailTaper;
l9_13207=l9_13208;
l9_13206=l9_13207;
float2 l9_13209=l9_13206;
N111_taper=l9_13209;
float l9_13210=0.0;
float l9_13211=0.0;
float l9_13212=(*sc_set0.UserUniforms).trailWidth;
l9_13211=l9_13212;
l9_13210=l9_13211;
float l9_13213=l9_13210;
N111_trailSizeMult=l9_13213;
float3 l9_13214=float3(0.0);
float3 l9_13215=float3(0.0);
l9_13215=tempGlobals.SurfacePosition_ObjectSpace;
l9_13214=l9_13215;
float3 l9_13216=l9_13214;
N111_positionObjectSpace=l9_13216;
float3 l9_13217=float3(0.0);
float3 l9_13218=float3(0.0);
l9_13218=tempGlobals.VertexNormal_ObjectSpace;
l9_13217=l9_13218;
float3 l9_13219=l9_13217;
N111_normalObjectSpace=l9_13219;
float3 l9_13220=float3(0.0);
float3 l9_13221=float3(0.0);
float3 l9_13222=float3(0.0);
float3 l9_13223=float3(0.0);
float3 l9_13224=float3(0.0);
float3 l9_13225=float3(0.0);
float3 l9_13226=float3(0.0);
float3 l9_13227=float3(0.0);
float3 l9_13228=float3(0.0);
float3 l9_13229=float3(0.0);
float3 l9_13230=(*sc_set0.UserUniforms).Port_Default_N247;
ssGlobals l9_13231=tempGlobals;
float3 l9_13232;
if (NODE_248_DROPLIST_ITEM_tmp==0)
{
float l9_13233=0.0;
float l9_13234=(*sc_set0.UserUniforms).Tweak_N255;
l9_13233=l9_13234;
float l9_13235=0.0;
float l9_13236=(*sc_set0.UserUniforms).Tweak_N254;
l9_13235=l9_13236;
float3 l9_13237=float3(0.0);
float3 l9_13238=(*sc_set0.UserUniforms).Tweak_N252;
l9_13237=l9_13238;
float3 l9_13239=float3(0.0);
float3 l9_13240=(*sc_set0.UserUniforms).Tweak_N253;
l9_13239=l9_13240;
float l9_13241=0.0;
float l9_13242=(*sc_set0.UserUniforms).Tweak_N224;
l9_13241=l9_13242;
float3 l9_13243=float3(0.0);
float l9_13244=l9_13233;
float l9_13245=l9_13235;
float3 l9_13246=l9_13237;
float3 l9_13247=l9_13239;
float l9_13248=l9_13241;
ssGlobals l9_13249=l9_13231;
tempGlobals=l9_13249;
float3 l9_13250=float3(0.0);
N128_SphereType=int(l9_13244);
N128_Radius=l9_13245;
N128_Scale=l9_13246;
N128_Center=l9_13247;
N128_VolumeFill=l9_13248;
int l9_13251=0;
l9_13251=ssInstanceID;
int l9_13252=l9_13251;
float l9_13253=float(l9_13252);
int l9_13254=int(l9_13253);
int l9_13255=l9_13254^(l9_13254*15299);
int l9_13256=l9_13255;
int l9_13257=l9_13256;
int l9_13258=((l9_13257*((l9_13257*1471343)+101146501))+1559861749)&2147483647;
int l9_13259=l9_13258;
int l9_13260=l9_13256*1399;
int l9_13261=((l9_13260*((l9_13260*1471343)+101146501))+1559861749)&2147483647;
int l9_13262=l9_13261;
int l9_13263=l9_13256*7177;
int l9_13264=((l9_13263*((l9_13263*1471343)+101146501))+1559861749)&2147483647;
int l9_13265=l9_13264;
int l9_13266=l9_13259;
float l9_13267=float(l9_13266)*4.6566129e-10;
int l9_13268=l9_13262;
float l9_13269=float(l9_13268)*4.6566129e-10;
int l9_13270=l9_13265;
float l9_13271=float(l9_13270)*4.6566129e-10;
float3 l9_13272=float3(l9_13267,l9_13269,l9_13271);
float3 l9_13273=l9_13272;
float3 l9_13274=l9_13273;
int l9_13275=0;
l9_13275=ssInstanceID;
int l9_13276=l9_13275;
float l9_13277=float(l9_13276+1);
int l9_13278=int(l9_13277);
int l9_13279=l9_13278^(l9_13278*15299);
int l9_13280=l9_13279;
int l9_13281=l9_13280;
int l9_13282=((l9_13281*((l9_13281*1471343)+101146501))+1559861749)&2147483647;
int l9_13283=l9_13282;
int l9_13284=l9_13280*1399;
int l9_13285=((l9_13284*((l9_13284*1471343)+101146501))+1559861749)&2147483647;
int l9_13286=l9_13285;
int l9_13287=l9_13280*7177;
int l9_13288=((l9_13287*((l9_13287*1471343)+101146501))+1559861749)&2147483647;
int l9_13289=l9_13288;
int l9_13290=l9_13283;
float l9_13291=float(l9_13290)*4.6566129e-10;
int l9_13292=l9_13286;
float l9_13293=float(l9_13292)*4.6566129e-10;
int l9_13294=l9_13289;
float l9_13295=float(l9_13294)*4.6566129e-10;
float3 l9_13296=float3(l9_13291,l9_13293,l9_13295);
float3 l9_13297=l9_13296;
float3 l9_13298=l9_13297;
float l9_13299=1.0-N128_VolumeFill;
float l9_13300=3.0;
float l9_13301;
if (l9_13299<=0.0)
{
l9_13301=0.0;
}
else
{
l9_13301=pow(l9_13299,l9_13300);
}
float l9_13302=l9_13301;
float l9_13303=l9_13302;
l9_13274=mix(float3(l9_13303),float3(1.0),l9_13274);
float3 l9_13304=l9_13274;
float l9_13305;
if (l9_13304.x<=0.0)
{
l9_13305=0.0;
}
else
{
l9_13305=sqrt(l9_13304.x);
}
float l9_13306=l9_13305;
float l9_13307;
if (l9_13304.y<=0.0)
{
l9_13307=0.0;
}
else
{
l9_13307=sqrt(l9_13304.y);
}
float l9_13308=l9_13307;
float l9_13309;
if (l9_13304.z<=0.0)
{
l9_13309=0.0;
}
else
{
l9_13309=sqrt(l9_13304.z);
}
float3 l9_13310=float3(l9_13306,l9_13308,l9_13309);
l9_13274=l9_13310;
l9_13298=mix(float3(-1.0),float3(1.0),l9_13298);
l9_13298/=float3(length(l9_13298+float3(9.9999997e-05)));
float3 l9_13311=((l9_13274*l9_13298)*N128_Scale)*(N128_Radius*0.5);
if (N128_SphereType==1)
{
l9_13311.x=abs(l9_13311.x);
}
else
{
if (N128_SphereType==2)
{
l9_13311.y=abs(l9_13311.y);
}
else
{
if (N128_SphereType==3)
{
l9_13311.z=abs(l9_13311.z);
}
}
}
l9_13311+=N128_Center;
N128_Result=l9_13311;
l9_13250=N128_Result;
l9_13243=l9_13250;
l9_13222=l9_13243;
l9_13232=l9_13222;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==1)
{
float3 l9_13312=float3(0.0);
float3 l9_13313=(*sc_set0.UserUniforms).Tweak_N250;
l9_13312=l9_13313;
float3 l9_13314=float3(0.0);
float3 l9_13315=(*sc_set0.UserUniforms).Tweak_N251;
l9_13314=l9_13315;
float l9_13316=0.0;
float l9_13317=(*sc_set0.UserUniforms).volumeFill;
l9_13316=l9_13317;
float3 l9_13318=float3(0.0);
float3 l9_13319=l9_13312;
float3 l9_13320=l9_13314;
float l9_13321=l9_13316;
ssGlobals l9_13322=l9_13231;
tempGlobals=l9_13322;
float3 l9_13323=float3(0.0);
N137_Scale=l9_13319;
N137_Center=l9_13320;
N137_VolumeFill=l9_13321;
int l9_13324=0;
l9_13324=ssInstanceID;
int l9_13325=l9_13324;
float l9_13326=float(l9_13325);
float l9_13327=mod(l9_13326,8.0);
float l9_13328=mod(l9_13326,3.0);
float l9_13329=l9_13326;
int l9_13330=int(l9_13329);
int l9_13331=l9_13330^(l9_13330*15299);
int l9_13332=l9_13331;
int l9_13333=l9_13332;
int l9_13334=((l9_13333*((l9_13333*1471343)+101146501))+1559861749)&2147483647;
int l9_13335=l9_13334;
int l9_13336=l9_13332*1399;
int l9_13337=((l9_13336*((l9_13336*1471343)+101146501))+1559861749)&2147483647;
int l9_13338=l9_13337;
int l9_13339=l9_13332*7177;
int l9_13340=((l9_13339*((l9_13339*1471343)+101146501))+1559861749)&2147483647;
int l9_13341=l9_13340;
int l9_13342=l9_13335;
float l9_13343=float(l9_13342)*4.6566129e-10;
int l9_13344=l9_13338;
float l9_13345=float(l9_13344)*4.6566129e-10;
int l9_13346=l9_13341;
float l9_13347=float(l9_13346)*4.6566129e-10;
float3 l9_13348=float3(l9_13343,l9_13345,l9_13347);
float3 l9_13349=l9_13348;
float3 l9_13350=l9_13349;
float l9_13351=1.0-N137_VolumeFill;
float l9_13352=3.0;
float l9_13353;
if (l9_13351<=0.0)
{
l9_13353=0.0;
}
else
{
l9_13353=pow(l9_13351,l9_13352);
}
float l9_13354=l9_13353;
float l9_13355=l9_13354;
float3 l9_13356;
if (l9_13328==0.0)
{
l9_13356=float3(l9_13355,0.0,0.0);
}
else
{
float3 l9_13357;
if (l9_13328==1.0)
{
l9_13357=float3(0.0,l9_13355,0.0);
}
else
{
l9_13357=float3(0.0,0.0,l9_13355);
}
l9_13356=l9_13357;
}
float3 l9_13358=l9_13356;
float3 l9_13359=mix(l9_13358,float3(1.0),l9_13350);
float3 l9_13360;
if (l9_13327==0.0)
{
l9_13360=l9_13359*float3(1.0);
}
else
{
float3 l9_13361;
if (l9_13327==1.0)
{
l9_13361=l9_13359*float3(-1.0,1.0,1.0);
}
else
{
float3 l9_13362;
if (l9_13327==2.0)
{
l9_13362=l9_13359*float3(-1.0,-1.0,1.0);
}
else
{
float3 l9_13363;
if (l9_13327==3.0)
{
l9_13363=l9_13359*float3(-1.0);
}
else
{
float3 l9_13364;
if (l9_13327==4.0)
{
l9_13364=l9_13359*float3(1.0,-1.0,-1.0);
}
else
{
float3 l9_13365;
if (l9_13327==5.0)
{
l9_13365=l9_13359*float3(1.0,1.0,-1.0);
}
else
{
float3 l9_13366;
if (l9_13327==6.0)
{
l9_13366=l9_13359*float3(-1.0,1.0,-1.0);
}
else
{
l9_13366=l9_13359*float3(1.0,-1.0,1.0);
}
l9_13365=l9_13366;
}
l9_13364=l9_13365;
}
l9_13363=l9_13364;
}
l9_13362=l9_13363;
}
l9_13361=l9_13362;
}
l9_13360=l9_13361;
}
float3 l9_13367=l9_13360;
float3 l9_13368=l9_13367;
float3 l9_13369=l9_13368*(N137_Scale*0.5);
l9_13369+=N137_Center;
N137_Result=l9_13369;
l9_13323=N137_Result;
l9_13318=l9_13323;
l9_13223=l9_13318;
l9_13232=l9_13223;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==2)
{
float l9_13370=0.0;
float l9_13371=(*sc_set0.UserUniforms).Tweak_N238;
l9_13370=l9_13371;
float l9_13372=0.0;
float l9_13373=(*sc_set0.UserUniforms).Tweak_N16;
l9_13372=l9_13373;
float l9_13374=0.0;
float l9_13375=(*sc_set0.UserUniforms).Tweak_N234;
l9_13374=l9_13375;
float l9_13376=0.0;
float l9_13377=(*sc_set0.UserUniforms).Tweak_N239;
l9_13376=l9_13377;
float2 l9_13378=float2(0.0);
float2 l9_13379=(*sc_set0.UserUniforms).Tweak_N240;
l9_13378=l9_13379;
float3 l9_13380=float3(0.0);
float3 l9_13381=(*sc_set0.UserUniforms).Tweak_N241;
l9_13380=l9_13381;
float3 l9_13382=float3(0.0);
float3 l9_13383=(*sc_set0.UserUniforms).Tweak_N242;
l9_13382=l9_13383;
float l9_13384=0.0;
float l9_13385=(*sc_set0.UserUniforms).Tweak_N226;
l9_13384=l9_13385;
float l9_13386=0.0;
float l9_13387=(*sc_set0.UserUniforms).Tweak_N243;
l9_13386=l9_13387;
float3 l9_13388=float3(0.0);
float l9_13389=l9_13370;
float l9_13390=l9_13372;
float l9_13391=l9_13374;
float l9_13392=l9_13376;
float2 l9_13393=l9_13378;
float3 l9_13394=l9_13380;
float3 l9_13395=l9_13382;
float l9_13396=l9_13384;
float l9_13397=l9_13386;
ssGlobals l9_13398=l9_13231;
tempGlobals=l9_13398;
float3 l9_13399=float3(0.0);
N144_Radius=l9_13389;
N144_startRad=l9_13390;
N144_endRad=l9_13391;
N144_Height=l9_13392;
N144_ArcAngles=l9_13393;
N144_Scale=l9_13394;
N144_Center=l9_13395;
N144_VolumeFill=l9_13396;
N144_OrientationAxis=int(l9_13397);
int l9_13400=0;
l9_13400=ssInstanceID;
int l9_13401=l9_13400;
float l9_13402=float(l9_13401);
int l9_13403=int(l9_13402);
int l9_13404=l9_13403^(l9_13403*15299);
int l9_13405=l9_13404;
int l9_13406=l9_13405;
int l9_13407=((l9_13406*((l9_13406*1471343)+101146501))+1559861749)&2147483647;
int l9_13408=l9_13407;
int l9_13409=l9_13405*1399;
int l9_13410=((l9_13409*((l9_13409*1471343)+101146501))+1559861749)&2147483647;
int l9_13411=l9_13410;
int l9_13412=l9_13405*7177;
int l9_13413=((l9_13412*((l9_13412*1471343)+101146501))+1559861749)&2147483647;
int l9_13414=l9_13413;
int l9_13415=l9_13408;
float l9_13416=float(l9_13415)*4.6566129e-10;
int l9_13417=l9_13411;
float l9_13418=float(l9_13417)*4.6566129e-10;
int l9_13419=l9_13414;
float l9_13420=float(l9_13419)*4.6566129e-10;
float3 l9_13421=float3(l9_13416,l9_13418,l9_13420);
float3 l9_13422=l9_13421;
float3 l9_13423=l9_13422;
float2 l9_13424=radians(N144_ArcAngles);
float l9_13425=1.0-N144_VolumeFill;
l9_13425*=l9_13425;
float l9_13426=mix(l9_13424.x,l9_13424.y,l9_13423.x);
float l9_13427=mix(-1.0,1.0,l9_13423.y);
float l9_13428=mix(l9_13425,1.0,l9_13423.z);
float l9_13429=l9_13428;
float l9_13430;
if (l9_13429<=0.0)
{
l9_13430=0.0;
}
else
{
l9_13430=sqrt(l9_13429);
}
float l9_13431=l9_13430;
l9_13428=l9_13431;
float3 l9_13432=float3(sin(l9_13426),cos(l9_13426),l9_13427);
float l9_13433=(N144_Radius*0.5)*mix(N144_startRad,N144_endRad,l9_13423.y);
l9_13432*=((N144_Scale*float3(l9_13433,l9_13433,N144_Height*0.5))*float3(l9_13428,l9_13428,1.0));
if (N144_OrientationAxis==0)
{
l9_13432=l9_13432.zxy;
}
else
{
if (N144_OrientationAxis==1)
{
l9_13432=l9_13432.xzy;
}
}
l9_13432+=N144_Center;
N144_Result=l9_13432;
l9_13399=N144_Result;
l9_13388=l9_13399;
l9_13224=l9_13388;
l9_13232=l9_13224;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==3)
{
float l9_13434=0.0;
float l9_13435=(*sc_set0.UserUniforms).Tweak_N257;
l9_13434=l9_13435;
float l9_13436=0.0;
float l9_13437=(*sc_set0.UserUniforms).Tweak_N258;
l9_13436=l9_13437;
float2 l9_13438=float2(0.0);
float2 l9_13439=(*sc_set0.UserUniforms).Tweak_N259;
l9_13438=l9_13439;
float3 l9_13440=float3(0.0);
float3 l9_13441=(*sc_set0.UserUniforms).Tweak_N260;
l9_13440=l9_13441;
float3 l9_13442=float3(0.0);
float3 l9_13443=(*sc_set0.UserUniforms).Tweak_N261;
l9_13442=l9_13443;
float l9_13444=0.0;
float l9_13445=(*sc_set0.UserUniforms).Tweak_N262;
l9_13444=l9_13445;
float l9_13446=0.0;
float l9_13447=(*sc_set0.UserUniforms).Tweak_N263;
l9_13446=l9_13447;
float3 l9_13448=float3(0.0);
float l9_13449=l9_13434;
float l9_13450=l9_13436;
float2 l9_13451=l9_13438;
float3 l9_13452=l9_13440;
float3 l9_13453=l9_13442;
float l9_13454=l9_13444;
float l9_13455=l9_13446;
ssGlobals l9_13456=l9_13231;
tempGlobals=l9_13456;
float3 l9_13457=float3(0.0);
N149_InnerRadius=l9_13449;
N149_OuterRadius=l9_13450;
N149_ArcAngles=l9_13451;
N149_Scale=l9_13452;
N149_Center=l9_13453;
N149_VolumeFill=l9_13454;
N149_Axis=int(l9_13455);
int l9_13458=0;
l9_13458=ssInstanceID;
int l9_13459=l9_13458;
float l9_13460=float(l9_13459);
int l9_13461=int(l9_13460);
int l9_13462=l9_13461^(l9_13461*15299);
int l9_13463=l9_13462;
int l9_13464=l9_13463;
int l9_13465=((l9_13464*((l9_13464*1471343)+101146501))+1559861749)&2147483647;
int l9_13466=l9_13465;
int l9_13467=l9_13463*1399;
int l9_13468=((l9_13467*((l9_13467*1471343)+101146501))+1559861749)&2147483647;
int l9_13469=l9_13468;
int l9_13470=l9_13463*7177;
int l9_13471=((l9_13470*((l9_13470*1471343)+101146501))+1559861749)&2147483647;
int l9_13472=l9_13471;
int l9_13473=l9_13466;
float l9_13474=float(l9_13473)*4.6566129e-10;
int l9_13475=l9_13469;
float l9_13476=float(l9_13475)*4.6566129e-10;
int l9_13477=l9_13472;
float l9_13478=float(l9_13477)*4.6566129e-10;
float3 l9_13479=float3(l9_13474,l9_13476,l9_13478);
float3 l9_13480=l9_13479;
float3 l9_13481=l9_13480;
float2 l9_13482=radians(N149_ArcAngles);
float l9_13483=mix(l9_13482.x,l9_13482.y,l9_13481.z);
float l9_13484=3.1415927;
float l9_13485=mix(0.0,l9_13484*2.0,l9_13481.y);
float l9_13486=mix(1.0-(N149_VolumeFill*N149_VolumeFill),1.0,l9_13481.x);
float l9_13487=l9_13486;
float l9_13488;
if (l9_13487<=0.0)
{
l9_13488=0.0;
}
else
{
l9_13488=sqrt(l9_13487);
}
float l9_13489=l9_13488;
l9_13486=l9_13489*(N149_InnerRadius*0.5);
float l9_13490=(cos(l9_13485)*l9_13486)+(N149_OuterRadius*0.5);
float3 l9_13491=float3(cos(l9_13483)*l9_13490,sin(l9_13483)*l9_13490,sin(l9_13485)*l9_13486);
if (N149_Axis==1)
{
l9_13491=l9_13491.yzx;
}
else
{
if (N149_Axis==2)
{
l9_13491=l9_13491.zyx;
}
}
l9_13491*=N149_Scale;
l9_13491+=N149_Center;
N149_Result=l9_13491;
l9_13457=N149_Result;
l9_13448=l9_13457;
l9_13225=l9_13448;
l9_13232=l9_13225;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==4)
{
float3 l9_13492=float3(0.0);
float3 l9_13493=(*sc_set0.UserUniforms).Tweak_N236;
l9_13492=l9_13493;
float3 l9_13494=float3(0.0);
float3 l9_13495=(*sc_set0.UserUniforms).Tweak_N237;
l9_13494=l9_13495;
float3 l9_13496=float3(0.0);
float3 l9_13497=(*sc_set0.UserUniforms).Tweak_N264;
l9_13496=l9_13497;
float3 l9_13498=float3(0.0);
float3 l9_13499=l9_13492;
float3 l9_13500=l9_13494;
float3 l9_13501=l9_13496;
ssGlobals l9_13502=l9_13231;
tempGlobals=l9_13502;
float3 l9_13503=float3(0.0);
N235_gridSize=l9_13499;
N235_gridDim=l9_13500;
N235_Offset=l9_13501;
int l9_13504=int((N235_gridDim.x*N235_gridDim.y)*N235_gridDim.z);
int l9_13505=0;
l9_13505=ssInstanceID;
int l9_13506=l9_13505;
int l9_13507=l9_13506;
int l9_13508=l9_13507%l9_13504;
int l9_13509=l9_13508;
float3 l9_13510=N235_gridDim;
float3 l9_13511=N235_gridSize;
int3 l9_13512=int3(l9_13510);
int l9_13513=l9_13512.x*l9_13512.y;
int l9_13514=l9_13509/l9_13513;
int l9_13515=l9_13509%l9_13513;
int l9_13516=l9_13515/l9_13512.x;
int l9_13517=l9_13515%l9_13512.x;
float l9_13518;
if (l9_13512.x>1)
{
l9_13518=l9_13511.x/(l9_13510.x-1.0);
}
else
{
l9_13518=0.0;
}
float l9_13519=l9_13518;
float l9_13520;
if (l9_13512.y>1)
{
l9_13520=l9_13511.y/(l9_13510.y-1.0);
}
else
{
l9_13520=0.0;
}
float l9_13521=l9_13520;
float l9_13522;
if (l9_13512.z>1)
{
l9_13522=l9_13511.z/(l9_13510.z-1.0);
}
else
{
l9_13522=0.0;
}
float3 l9_13523=float3(l9_13519,l9_13521,l9_13522);
float3 l9_13524=(l9_13510-float3(1.0))*l9_13523;
float3 l9_13525=(-l9_13524)*0.5;
float3 l9_13526=(float3(float(l9_13517),float(l9_13516),float(l9_13514))*l9_13523)+l9_13525;
N235_Result=l9_13526+N235_Offset;
l9_13503=N235_Result;
l9_13498=l9_13503;
l9_13226=l9_13498;
l9_13232=l9_13226;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==5)
{
float l9_13527=0.0;
float l9_13528=(*sc_set0.UserUniforms).Tweak_N232;
l9_13527=l9_13528;
float l9_13529=0.0;
float l9_13530=(*sc_set0.UserUniforms).Tweak_N233;
l9_13529=l9_13530;
float l9_13531=0.0;
float l9_13532=(*sc_set0.UserUniforms).Tweak_N231;
l9_13531=l9_13532;
float l9_13533=0.0;
float l9_13534=(*sc_set0.UserUniforms).Tweak_N304;
l9_13533=l9_13534;
float l9_13535=0.0;
float l9_13536=(*sc_set0.UserUniforms).Tweak_N229;
l9_13535=l9_13536;
float l9_13537=0.0;
float l9_13538=float((*sc_set0.UserUniforms).Tweak_N280!=0);
l9_13537=l9_13538;
float l9_13539=0.0;
float l9_13540=(*sc_set0.UserUniforms).Tweak_N285;
l9_13539=l9_13540;
float l9_13541=0.0;
float l9_13542=(*sc_set0.UserUniforms).Tweak_N245;
l9_13541=l9_13542;
float l9_13543=0.0;
float l9_13544=(*sc_set0.UserUniforms).Tweak_N230;
l9_13543=l9_13544;
float l9_13545=0.0;
float l9_13546=float((*sc_set0.UserUniforms).animated!=0);
l9_13545=l9_13546;
float l9_13547=0.0;
float l9_13548=(*sc_set0.UserUniforms).Tweak_N279;
l9_13547=l9_13548;
float l9_13549=0.0;
float l9_13550=float((*sc_set0.UserUniforms).Tweak_N303!=0);
l9_13549=l9_13550;
float2 l9_13551=float2(0.0);
float2 l9_13552=(*sc_set0.UserUniforms).Tweak_N336;
l9_13551=l9_13552;
float l9_13553=0.0;
float l9_13554=(*sc_set0.UserUniforms).timeGlobal;
l9_13553=l9_13554;
float l9_13555=0.0;
float l9_13556=(*sc_set0.UserUniforms).externalTimeInput;
l9_13555=l9_13556;
float l9_13557=0.0;
float l9_13558=(*sc_set0.UserUniforms).externalSeed;
l9_13557=l9_13558;
float l9_13559=0.0;
float l9_13560=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_13559=l9_13560;
float2 l9_13561=float2(0.0);
float2 l9_13562=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_13561=l9_13562;
float l9_13563=0.0;
float l9_13564=(*sc_set0.UserUniforms).spawnDuration;
l9_13563=l9_13564;
float l9_13565=0.0;
float l9_13566;
if ((int(TRAILS_tmp)!=0))
{
l9_13566=1.001;
}
else
{
l9_13566=0.001;
}
l9_13566-=0.001;
l9_13565=l9_13566;
float l9_13567=0.0;
float l9_13568=(*sc_set0.UserUniforms).trailLength;
l9_13567=l9_13568;
float4 l9_13569=float4(0.0);
l9_13569=l9_13231.VertexColor;
float l9_13570=0.0;
l9_13570=l9_13569.x;
float l9_13571=0.0;
float l9_13572=l9_13565;
bool l9_13573=(l9_13572*1.0)!=0.0;
bool l9_13574;
if (l9_13573)
{
l9_13574=(l9_13570*1.0)!=0.0;
}
else
{
l9_13574=l9_13573;
}
l9_13571=float(l9_13574);
float4 l9_13575=float4(0.0);
float l9_13576=l9_13553;
float l9_13577=l9_13555;
float l9_13578=l9_13557;
float l9_13579=l9_13559;
float2 l9_13580=l9_13561;
float l9_13581=l9_13563;
float l9_13582=l9_13567;
float l9_13583=l9_13571;
ssGlobals l9_13584=l9_13231;
tempGlobals=l9_13584;
float4 l9_13585=float4(0.0);
N181_timeGlobal=l9_13576;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_13577;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_13578;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_13579;
N181_lifeTimeMinMax=l9_13580;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_13581;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_13582;
N181_isTrailCondition=l9_13583!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_13586=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_13587=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_13586=length(float4(1.0)*l9_13587);
}
N181_globalSeed=N181_externalSeed+l9_13586;
int l9_13588=0;
l9_13588=ssInstanceID;
int l9_13589=l9_13588;
float l9_13590=float(l9_13589);
int l9_13591=int(l9_13590);
int l9_13592=l9_13591^(l9_13591*15299);
int l9_13593=l9_13592;
int l9_13594=l9_13593;
int l9_13595=((l9_13594*((l9_13594*1471343)+101146501))+1559861749)&2147483647;
int l9_13596=l9_13595;
int l9_13597=l9_13593*1399;
int l9_13598=((l9_13597*((l9_13597*1471343)+101146501))+1559861749)&2147483647;
int l9_13599=l9_13598;
int l9_13600=l9_13593*7177;
int l9_13601=((l9_13600*((l9_13600*1471343)+101146501))+1559861749)&2147483647;
int l9_13602=l9_13601;
int l9_13603=l9_13596;
float l9_13604=float(l9_13603)*4.6566129e-10;
int l9_13605=l9_13599;
float l9_13606=float(l9_13605)*4.6566129e-10;
int l9_13607=l9_13602;
float l9_13608=float(l9_13607)*4.6566129e-10;
float3 l9_13609=float3(l9_13604,l9_13606,l9_13608);
float3 l9_13610=l9_13609;
N181_particleSeed=l9_13610;
float l9_13611=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_13612;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_13612=N181_lifeTimeMinMax;
}
else
{
l9_13612=float2(N181_lifeTimeConstant);
}
float2 l9_13613=l9_13612;
float l9_13614=fast::max(l9_13613.x,0.0099999998);
float l9_13615=fast::max(l9_13613.y,0.0099999998);
float l9_13616=tempGlobals.gTimeElapsed;
float l9_13617=l9_13616;
if (N181_ENABLE_EXTERNALTIME)
{
l9_13617=N181_externalTime;
}
float l9_13618=l9_13617;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_13618=N181_timeGlobal*l9_13617;
}
else
{
float l9_13619=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_13619=N181_trailLength;
}
}
float l9_13620=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_13621=0.0;
float l9_13622;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_13622=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_13622=0.0;
}
l9_13621=l9_13622;
float l9_13623=l9_13621;
int l9_13624=0;
l9_13624=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_13625=l9_13624;
l9_13620=fast::max(l9_13623*(1.0-(1.0/float(l9_13625))),0.0);
}
else
{
l9_13620=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_13626=fract(((l9_13617*N181_timeGlobal)*(1.0/(l9_13613.y+l9_13619)))+l9_13620);
l9_13618=l9_13626*(l9_13613.y+l9_13619);
}
float l9_13627=mix(l9_13618/l9_13614,l9_13618/l9_13615,l9_13611);
float l9_13628=fast::clamp(l9_13627,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_13618,l9_13628);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_13629=tempGlobals.Surface_UVCoord0;
l9_13618-=(l9_13629.y*N181_trailLength);
l9_13627=mix(l9_13618/l9_13614,l9_13618/l9_13615,l9_13611);
l9_13628=fast::clamp(l9_13627,0.0,1.0);
}
}
float l9_13630=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_13617-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_13630=1.0;
}
}
}
float l9_13631=l9_13627+l9_13630;
N181_particleAlive=1.0;
if ((l9_13631>0.99989998)||(l9_13618<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_13617*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_13613,l9_13618,l9_13628);
l9_13585=N181_timeValues;
l9_13575=l9_13585;
float3 l9_13632=float3(0.0);
float l9_13633=l9_13527;
float l9_13634=l9_13529;
float l9_13635=l9_13531;
float l9_13636=l9_13533;
float l9_13637=l9_13535;
float l9_13638=l9_13537;
float l9_13639=l9_13539;
float l9_13640=l9_13541;
float l9_13641=l9_13543;
float l9_13642=l9_13545;
float l9_13643=l9_13547;
float l9_13644=l9_13549;
float2 l9_13645=l9_13551;
float4 l9_13646=l9_13575;
ssGlobals l9_13647=l9_13231;
tempGlobals=l9_13647;
float3 l9_13648=float3(0.0);
N155_startRad=l9_13633;
N155_endRad=l9_13634;
N155_heightPerTurn=l9_13635;
N155_alignHeight=int(l9_13636);
N155_thicknessRad=l9_13637;
N155_curvThickEnable=l9_13638!=0.0;
N155_VolumeFill=l9_13639;
N155_OrientationAxis=int(l9_13640);
N155_nTurns=l9_13641;
N155_animPath=l9_13642!=0.0;
N155_Speed=l9_13643;
N155_randSpeed=l9_13644!=0.0;
N155_SpeedMinMax=l9_13645;
N155_timeValuesIn=l9_13646;
float l9_13649=3.1415927;
float l9_13650=l9_13649*2.0;
float l9_13651=(N155_heightPerTurn/N155_nTurns)/l9_13650;
float l9_13652=N155_startRad*0.5;
float l9_13653=N155_endRad*0.5;
float l9_13654=N155_thicknessRad*0.5;
float l9_13655=0.0;
float l9_13656;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_13656=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_13656=0.0;
}
l9_13655=l9_13656;
float l9_13657=l9_13655;
float l9_13658=l9_13657;
int l9_13659=0;
l9_13659=ssInstanceID;
int l9_13660=l9_13659;
float l9_13661=float(l9_13660);
float l9_13662=l9_13661;
int l9_13663=int(l9_13662);
int l9_13664=l9_13663^(l9_13663*15299);
int l9_13665=l9_13664;
int l9_13666=l9_13665;
int l9_13667=((l9_13666*((l9_13666*1471343)+101146501))+1559861749)&2147483647;
int l9_13668=l9_13667;
float l9_13669=float(l9_13668)*4.6566129e-10;
float l9_13670=l9_13669;
float l9_13671=l9_13670;
float l9_13672=l9_13671;
if (N155_animPath)
{
if (N155_randSpeed)
{
l9_13658=mod(l9_13658+(N155_timeValuesIn.z*mix(N155_SpeedMinMax.x,N155_SpeedMinMax.y,l9_13672)),1.1);
}
else
{
l9_13658=mod(l9_13658+(N155_timeValuesIn.z*N155_Speed),1.1);
}
}
float l9_13673=(l9_13650*N155_nTurns)*l9_13658;
float l9_13674=mix(l9_13652,l9_13653,l9_13658);
float l9_13675=l9_13674*cos(l9_13673);
float l9_13676=l9_13674*sin(l9_13673);
float l9_13677=l9_13651*l9_13673;
if (N155_alignHeight==1)
{
l9_13677-=(((l9_13651*N155_nTurns)*l9_13650)*0.5);
}
else
{
if (N155_alignHeight==2)
{
l9_13677-=((l9_13651*N155_nTurns)*l9_13650);
}
}
float3 l9_13678=normalize(float3(-sin(l9_13673),cos(l9_13673),l9_13651/l9_13650));
float3 l9_13679=normalize(cross(l9_13678,float3(0.0,0.0,1.0)));
float3 l9_13680=cross(l9_13678,l9_13679);
float l9_13681=l9_13658;
float l9_13682=0.0;
float l9_13683=(*sc_set0.UserUniforms).Tweak_N157_curveData.x;
float l9_13684=(*sc_set0.UserUniforms).Tweak_N157_curveData.y;
float l9_13685=(*sc_set0.UserUniforms).Tweak_N157_curveData.z;
float l9_13686=(l9_13681-l9_13684)/(l9_13685-l9_13684);
float2 l9_13687=float2(l9_13686,l9_13683);
l9_13687=fast::clamp(l9_13687,float2(0.0),float2(1.0));
int l9_13688;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_13689=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_13689=0;
}
else
{
l9_13689=gl_InstanceIndex%2;
}
int l9_13690=l9_13689;
l9_13688=1-l9_13690;
}
else
{
int l9_13691=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_13691=0;
}
else
{
l9_13691=gl_InstanceIndex%2;
}
int l9_13692=l9_13691;
l9_13688=l9_13692;
}
int l9_13693=l9_13688;
int l9_13694=sc_CurveAtlasLayout_tmp;
int l9_13695=l9_13693;
float2 l9_13696=l9_13687;
bool l9_13697=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_13698=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_13699=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_13700=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_13701=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_13702=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_13703=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_13704=0.0;
bool l9_13705=l9_13702&&(!l9_13700);
float l9_13706=1.0;
float l9_13707=l9_13696.x;
int l9_13708=l9_13699.x;
if (l9_13708==1)
{
l9_13707=fract(l9_13707);
}
else
{
if (l9_13708==2)
{
float l9_13709=fract(l9_13707);
float l9_13710=l9_13707-l9_13709;
float l9_13711=step(0.25,fract(l9_13710*0.5));
l9_13707=mix(l9_13709,1.0-l9_13709,fast::clamp(l9_13711,0.0,1.0));
}
}
l9_13696.x=l9_13707;
float l9_13712=l9_13696.y;
int l9_13713=l9_13699.y;
if (l9_13713==1)
{
l9_13712=fract(l9_13712);
}
else
{
if (l9_13713==2)
{
float l9_13714=fract(l9_13712);
float l9_13715=l9_13712-l9_13714;
float l9_13716=step(0.25,fract(l9_13715*0.5));
l9_13712=mix(l9_13714,1.0-l9_13714,fast::clamp(l9_13716,0.0,1.0));
}
}
l9_13696.y=l9_13712;
if (l9_13700)
{
bool l9_13717=l9_13702;
bool l9_13718;
if (l9_13717)
{
l9_13718=l9_13699.x==3;
}
else
{
l9_13718=l9_13717;
}
float l9_13719=l9_13696.x;
float l9_13720=l9_13701.x;
float l9_13721=l9_13701.z;
bool l9_13722=l9_13718;
float l9_13723=l9_13706;
float l9_13724=fast::clamp(l9_13719,l9_13720,l9_13721);
float l9_13725=step(abs(l9_13719-l9_13724),9.9999997e-06);
l9_13723*=(l9_13725+((1.0-float(l9_13722))*(1.0-l9_13725)));
l9_13719=l9_13724;
l9_13696.x=l9_13719;
l9_13706=l9_13723;
bool l9_13726=l9_13702;
bool l9_13727;
if (l9_13726)
{
l9_13727=l9_13699.y==3;
}
else
{
l9_13727=l9_13726;
}
float l9_13728=l9_13696.y;
float l9_13729=l9_13701.y;
float l9_13730=l9_13701.w;
bool l9_13731=l9_13727;
float l9_13732=l9_13706;
float l9_13733=fast::clamp(l9_13728,l9_13729,l9_13730);
float l9_13734=step(abs(l9_13728-l9_13733),9.9999997e-06);
l9_13732*=(l9_13734+((1.0-float(l9_13731))*(1.0-l9_13734)));
l9_13728=l9_13733;
l9_13696.y=l9_13728;
l9_13706=l9_13732;
}
float2 l9_13735=l9_13696;
bool l9_13736=l9_13697;
float3x3 l9_13737=l9_13698;
if (l9_13736)
{
l9_13735=float2((l9_13737*float3(l9_13735,1.0)).xy);
}
float2 l9_13738=l9_13735;
l9_13696=l9_13738;
float l9_13739=l9_13696.x;
int l9_13740=l9_13699.x;
bool l9_13741=l9_13705;
float l9_13742=l9_13706;
if ((l9_13740==0)||(l9_13740==3))
{
float l9_13743=l9_13739;
float l9_13744=0.0;
float l9_13745=1.0;
bool l9_13746=l9_13741;
float l9_13747=l9_13742;
float l9_13748=fast::clamp(l9_13743,l9_13744,l9_13745);
float l9_13749=step(abs(l9_13743-l9_13748),9.9999997e-06);
l9_13747*=(l9_13749+((1.0-float(l9_13746))*(1.0-l9_13749)));
l9_13743=l9_13748;
l9_13739=l9_13743;
l9_13742=l9_13747;
}
l9_13696.x=l9_13739;
l9_13706=l9_13742;
float l9_13750=l9_13696.y;
int l9_13751=l9_13699.y;
bool l9_13752=l9_13705;
float l9_13753=l9_13706;
if ((l9_13751==0)||(l9_13751==3))
{
float l9_13754=l9_13750;
float l9_13755=0.0;
float l9_13756=1.0;
bool l9_13757=l9_13752;
float l9_13758=l9_13753;
float l9_13759=fast::clamp(l9_13754,l9_13755,l9_13756);
float l9_13760=step(abs(l9_13754-l9_13759),9.9999997e-06);
l9_13758*=(l9_13760+((1.0-float(l9_13757))*(1.0-l9_13760)));
l9_13754=l9_13759;
l9_13750=l9_13754;
l9_13753=l9_13758;
}
l9_13696.y=l9_13750;
l9_13706=l9_13753;
float2 l9_13761=l9_13696;
int l9_13762=l9_13694;
int l9_13763=l9_13695;
float l9_13764=l9_13704;
float2 l9_13765=l9_13761;
int l9_13766=l9_13762;
int l9_13767=l9_13763;
float3 l9_13768=float3(0.0);
if (l9_13766==0)
{
l9_13768=float3(l9_13765,0.0);
}
else
{
if (l9_13766==1)
{
l9_13768=float3(l9_13765.x,(l9_13765.y*0.5)+(0.5-(float(l9_13767)*0.5)),0.0);
}
else
{
l9_13768=float3(l9_13765,float(l9_13767));
}
}
float3 l9_13769=l9_13768;
float3 l9_13770=l9_13769;
float4 l9_13771=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_13770.xy,level(l9_13764));
float4 l9_13772=l9_13771;
if (l9_13702)
{
l9_13772=mix(l9_13703,l9_13772,float4(l9_13706));
}
float4 l9_13773=l9_13772;
l9_13682=l9_13773.x;
float l9_13774=l9_13682;
float l9_13775=l9_13774;
float l9_13776;
if (N155_curvThickEnable)
{
l9_13776=l9_13654*l9_13775;
}
else
{
l9_13776=l9_13654;
}
float l9_13777=l9_13776;
float3 l9_13778=mix(float3(l9_13675,l9_13676,l9_13677)+(((l9_13679*cos(l9_13661))+(l9_13680*sin(l9_13661)))*l9_13777),float3(l9_13675,l9_13676,l9_13677),float3(l9_13672*N155_VolumeFill));
float3 l9_13779;
if (l9_13658>1.0)
{
l9_13779=l9_13778/float3(0.0);
}
else
{
l9_13779=l9_13778;
}
l9_13778=l9_13779;
if (N155_OrientationAxis==0)
{
l9_13778=l9_13778.zxy;
l9_13678=l9_13678.zxy;
l9_13679=l9_13679.zxy;
l9_13680=l9_13680.zxy;
}
else
{
if (N155_OrientationAxis==1)
{
l9_13778=l9_13778.xzy;
l9_13678=l9_13678.xzy;
l9_13679=l9_13679.xzy;
l9_13680=l9_13680.xzy;
}
}
tempGlobals.N155_helixDirection=l9_13678;
N155_Result=l9_13778;
l9_13648=N155_Result;
l9_13632=l9_13648;
l9_13227=l9_13632;
l9_13232=l9_13227;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==6)
{
float l9_13780=0.0;
float l9_13781=(*sc_set0.UserUniforms).Tweak_N298;
l9_13780=l9_13781;
float3 l9_13782=float3(0.0);
float3 l9_13783=(*sc_set0.UserUniforms).Tweak_N330;
l9_13782=l9_13783;
float l9_13784=0.0;
float l9_13785=float((*sc_set0.UserUniforms).Tweak_N308!=0);
l9_13784=l9_13785;
float l9_13786=0.0;
float l9_13787=(*sc_set0.UserUniforms).timeGlobal;
l9_13786=l9_13787;
float l9_13788=0.0;
float l9_13789=(*sc_set0.UserUniforms).externalTimeInput;
l9_13788=l9_13789;
float l9_13790=0.0;
float l9_13791=(*sc_set0.UserUniforms).externalSeed;
l9_13790=l9_13791;
float l9_13792=0.0;
float l9_13793=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_13792=l9_13793;
float2 l9_13794=float2(0.0);
float2 l9_13795=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_13794=l9_13795;
float l9_13796=0.0;
float l9_13797=(*sc_set0.UserUniforms).spawnDuration;
l9_13796=l9_13797;
float l9_13798=0.0;
float l9_13799;
if ((int(TRAILS_tmp)!=0))
{
l9_13799=1.001;
}
else
{
l9_13799=0.001;
}
l9_13799-=0.001;
l9_13798=l9_13799;
float l9_13800=0.0;
float l9_13801=(*sc_set0.UserUniforms).trailLength;
l9_13800=l9_13801;
float4 l9_13802=float4(0.0);
l9_13802=l9_13231.VertexColor;
float l9_13803=0.0;
l9_13803=l9_13802.x;
float l9_13804=0.0;
float l9_13805=l9_13798;
bool l9_13806=(l9_13805*1.0)!=0.0;
bool l9_13807;
if (l9_13806)
{
l9_13807=(l9_13803*1.0)!=0.0;
}
else
{
l9_13807=l9_13806;
}
l9_13804=float(l9_13807);
float4 l9_13808=float4(0.0);
float l9_13809=l9_13786;
float l9_13810=l9_13788;
float l9_13811=l9_13790;
float l9_13812=l9_13792;
float2 l9_13813=l9_13794;
float l9_13814=l9_13796;
float l9_13815=l9_13800;
float l9_13816=l9_13804;
ssGlobals l9_13817=l9_13231;
tempGlobals=l9_13817;
float4 l9_13818=float4(0.0);
N181_timeGlobal=l9_13809;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_13810;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_13811;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_13812;
N181_lifeTimeMinMax=l9_13813;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_13814;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_13815;
N181_isTrailCondition=l9_13816!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_13819=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_13820=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_13819=length(float4(1.0)*l9_13820);
}
N181_globalSeed=N181_externalSeed+l9_13819;
int l9_13821=0;
l9_13821=ssInstanceID;
int l9_13822=l9_13821;
float l9_13823=float(l9_13822);
int l9_13824=int(l9_13823);
int l9_13825=l9_13824^(l9_13824*15299);
int l9_13826=l9_13825;
int l9_13827=l9_13826;
int l9_13828=((l9_13827*((l9_13827*1471343)+101146501))+1559861749)&2147483647;
int l9_13829=l9_13828;
int l9_13830=l9_13826*1399;
int l9_13831=((l9_13830*((l9_13830*1471343)+101146501))+1559861749)&2147483647;
int l9_13832=l9_13831;
int l9_13833=l9_13826*7177;
int l9_13834=((l9_13833*((l9_13833*1471343)+101146501))+1559861749)&2147483647;
int l9_13835=l9_13834;
int l9_13836=l9_13829;
float l9_13837=float(l9_13836)*4.6566129e-10;
int l9_13838=l9_13832;
float l9_13839=float(l9_13838)*4.6566129e-10;
int l9_13840=l9_13835;
float l9_13841=float(l9_13840)*4.6566129e-10;
float3 l9_13842=float3(l9_13837,l9_13839,l9_13841);
float3 l9_13843=l9_13842;
N181_particleSeed=l9_13843;
float l9_13844=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_13845;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_13845=N181_lifeTimeMinMax;
}
else
{
l9_13845=float2(N181_lifeTimeConstant);
}
float2 l9_13846=l9_13845;
float l9_13847=fast::max(l9_13846.x,0.0099999998);
float l9_13848=fast::max(l9_13846.y,0.0099999998);
float l9_13849=tempGlobals.gTimeElapsed;
float l9_13850=l9_13849;
if (N181_ENABLE_EXTERNALTIME)
{
l9_13850=N181_externalTime;
}
float l9_13851=l9_13850;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_13851=N181_timeGlobal*l9_13850;
}
else
{
float l9_13852=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_13852=N181_trailLength;
}
}
float l9_13853=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_13854=0.0;
float l9_13855;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_13855=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_13855=0.0;
}
l9_13854=l9_13855;
float l9_13856=l9_13854;
int l9_13857=0;
l9_13857=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_13858=l9_13857;
l9_13853=fast::max(l9_13856*(1.0-(1.0/float(l9_13858))),0.0);
}
else
{
l9_13853=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_13859=fract(((l9_13850*N181_timeGlobal)*(1.0/(l9_13846.y+l9_13852)))+l9_13853);
l9_13851=l9_13859*(l9_13846.y+l9_13852);
}
float l9_13860=mix(l9_13851/l9_13847,l9_13851/l9_13848,l9_13844);
float l9_13861=fast::clamp(l9_13860,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_13851,l9_13861);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_13862=tempGlobals.Surface_UVCoord0;
l9_13851-=(l9_13862.y*N181_trailLength);
l9_13860=mix(l9_13851/l9_13847,l9_13851/l9_13848,l9_13844);
l9_13861=fast::clamp(l9_13860,0.0,1.0);
}
}
float l9_13863=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_13850-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_13863=1.0;
}
}
}
float l9_13864=l9_13860+l9_13863;
N181_particleAlive=1.0;
if ((l9_13864>0.99989998)||(l9_13851<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_13850*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_13846,l9_13851,l9_13861);
l9_13818=N181_timeValues;
l9_13808=l9_13818;
float l9_13865=0.0;
float l9_13866=(*sc_set0.UserUniforms).Tweak_N294;
l9_13865=l9_13866;
float l9_13867=0.0;
float l9_13868=float((*sc_set0.UserUniforms).Tweak_N339!=0);
l9_13867=l9_13868;
float2 l9_13869=float2(0.0);
float2 l9_13870=(*sc_set0.UserUniforms).Tweak_N342;
l9_13869=l9_13870;
float l9_13871=0.0;
float l9_13872=(*sc_set0.UserUniforms).Tweak_N301;
l9_13871=l9_13872;
float l9_13873=0.0;
float l9_13874=float((*sc_set0.UserUniforms).Tweak_N274!=0);
l9_13873=l9_13874;
float l9_13875=0.0;
float l9_13876=(*sc_set0.UserUniforms).Tweak_N302;
l9_13875=l9_13876;
float l9_13877=0.0;
float l9_13878=(*sc_set0.UserUniforms).Tweak_N318;
l9_13877=l9_13878;
float3 l9_13879=float3(0.0);
float l9_13880=l9_13780;
float3 l9_13881=l9_13782;
float l9_13882=l9_13784;
float4 l9_13883=l9_13808;
float l9_13884=l9_13865;
float l9_13885=l9_13867;
float2 l9_13886=l9_13869;
float l9_13887=l9_13871;
float l9_13888=l9_13873;
float l9_13889=l9_13875;
float l9_13890=l9_13877;
ssGlobals l9_13891=l9_13231;
tempGlobals=l9_13891;
float3 l9_13892=float3(0.0);
N319_Scale=l9_13880;
N319_scaleXYZ=l9_13881;
N319_animPath=l9_13882!=0.0;
N319_timeValuesIn=l9_13883;
N319_Speed=l9_13884;
N319_randSpeed=l9_13885!=0.0;
N319_SpeedMinMax=l9_13886;
N319_thicknessRad=l9_13887;
N319_curvThickEnable=l9_13888!=0.0;
N319_VolumeFill=l9_13889;
N319_res=l9_13890;
float3 l9_13893=float3(0.0);
float3 l9_13894=float3(0.0);
float3 l9_13895=float3(0.0);
float3 l9_13896=float3(0.0);
float l9_13897=0.0;
float l9_13898;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_13898=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_13898=0.0;
}
l9_13897=l9_13898;
float l9_13899=l9_13897;
float l9_13900=l9_13899;
float l9_13901=l9_13900;
int l9_13902=0;
l9_13902=ssInstanceID;
int l9_13903=l9_13902;
float l9_13904=float(l9_13903);
float l9_13905=l9_13904;
int l9_13906=int(l9_13905);
int l9_13907=l9_13906^(l9_13906*15299);
int l9_13908=l9_13907;
int l9_13909=l9_13908;
int l9_13910=((l9_13909*((l9_13909*1471343)+101146501))+1559861749)&2147483647;
int l9_13911=l9_13910;
float l9_13912=float(l9_13911)*4.6566129e-10;
float l9_13913=l9_13912;
float l9_13914=l9_13913;
float l9_13915=l9_13914;
if (N319_animPath)
{
if (N319_randSpeed)
{
l9_13901=mod(l9_13900+(N319_timeValuesIn.z*mix(N319_SpeedMinMax.x,N319_SpeedMinMax.y,l9_13915)),1.1);
}
else
{
l9_13901=mod(l9_13900+(N319_timeValuesIn.z*N319_Speed),1.1);
}
}
float l9_13916=l9_13901;
float3 l9_13917=l9_13893;
float3 l9_13918=l9_13894;
float3 l9_13919=l9_13895;
float3 l9_13920=l9_13896;
int l9_13921=5;
float l9_13922=1.0/float(l9_13921);
int l9_13923;
int l9_13924;
int l9_13925;
int l9_13926;
int l9_13927;
int l9_13928;
int l9_13929=0;
for (int snapLoopIndex=0; snapLoopIndex==0; snapLoopIndex+=0)
{
if (l9_13929<l9_13921)
{
float l9_13930=float(l9_13929)*l9_13922;
float l9_13931=0.0;
float l9_13932=(*sc_set0.UserUniforms).Tweak_N293_curveData.x;
float l9_13933=(*sc_set0.UserUniforms).Tweak_N293_curveData.y;
float l9_13934=(*sc_set0.UserUniforms).Tweak_N293_curveData.z;
float l9_13935=(l9_13930-l9_13933)/(l9_13934-l9_13933);
float2 l9_13936=float2(l9_13935,l9_13932);
l9_13936=fast::clamp(l9_13936,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_13937=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_13937=0;
}
else
{
l9_13937=gl_InstanceIndex%2;
}
int l9_13938=l9_13937;
l9_13923=1-l9_13938;
}
else
{
int l9_13939=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_13939=0;
}
else
{
l9_13939=gl_InstanceIndex%2;
}
int l9_13940=l9_13939;
l9_13923=l9_13940;
}
int l9_13941=l9_13923;
int l9_13942=sc_CurveAtlasLayout_tmp;
int l9_13943=l9_13941;
float2 l9_13944=l9_13936;
bool l9_13945=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_13946=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_13947=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_13948=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_13949=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_13950=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_13951=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_13952=0.0;
bool l9_13953=l9_13950&&(!l9_13948);
float l9_13954=1.0;
float l9_13955=l9_13944.x;
int l9_13956=l9_13947.x;
if (l9_13956==1)
{
l9_13955=fract(l9_13955);
}
else
{
if (l9_13956==2)
{
float l9_13957=fract(l9_13955);
float l9_13958=l9_13955-l9_13957;
float l9_13959=step(0.25,fract(l9_13958*0.5));
l9_13955=mix(l9_13957,1.0-l9_13957,fast::clamp(l9_13959,0.0,1.0));
}
}
l9_13944.x=l9_13955;
float l9_13960=l9_13944.y;
int l9_13961=l9_13947.y;
if (l9_13961==1)
{
l9_13960=fract(l9_13960);
}
else
{
if (l9_13961==2)
{
float l9_13962=fract(l9_13960);
float l9_13963=l9_13960-l9_13962;
float l9_13964=step(0.25,fract(l9_13963*0.5));
l9_13960=mix(l9_13962,1.0-l9_13962,fast::clamp(l9_13964,0.0,1.0));
}
}
l9_13944.y=l9_13960;
if (l9_13948)
{
bool l9_13965=l9_13950;
bool l9_13966;
if (l9_13965)
{
l9_13966=l9_13947.x==3;
}
else
{
l9_13966=l9_13965;
}
float l9_13967=l9_13944.x;
float l9_13968=l9_13949.x;
float l9_13969=l9_13949.z;
bool l9_13970=l9_13966;
float l9_13971=l9_13954;
float l9_13972=fast::clamp(l9_13967,l9_13968,l9_13969);
float l9_13973=step(abs(l9_13967-l9_13972),9.9999997e-06);
l9_13971*=(l9_13973+((1.0-float(l9_13970))*(1.0-l9_13973)));
l9_13967=l9_13972;
l9_13944.x=l9_13967;
l9_13954=l9_13971;
bool l9_13974=l9_13950;
bool l9_13975;
if (l9_13974)
{
l9_13975=l9_13947.y==3;
}
else
{
l9_13975=l9_13974;
}
float l9_13976=l9_13944.y;
float l9_13977=l9_13949.y;
float l9_13978=l9_13949.w;
bool l9_13979=l9_13975;
float l9_13980=l9_13954;
float l9_13981=fast::clamp(l9_13976,l9_13977,l9_13978);
float l9_13982=step(abs(l9_13976-l9_13981),9.9999997e-06);
l9_13980*=(l9_13982+((1.0-float(l9_13979))*(1.0-l9_13982)));
l9_13976=l9_13981;
l9_13944.y=l9_13976;
l9_13954=l9_13980;
}
float2 l9_13983=l9_13944;
bool l9_13984=l9_13945;
float3x3 l9_13985=l9_13946;
if (l9_13984)
{
l9_13983=float2((l9_13985*float3(l9_13983,1.0)).xy);
}
float2 l9_13986=l9_13983;
l9_13944=l9_13986;
float l9_13987=l9_13944.x;
int l9_13988=l9_13947.x;
bool l9_13989=l9_13953;
float l9_13990=l9_13954;
if ((l9_13988==0)||(l9_13988==3))
{
float l9_13991=l9_13987;
float l9_13992=0.0;
float l9_13993=1.0;
bool l9_13994=l9_13989;
float l9_13995=l9_13990;
float l9_13996=fast::clamp(l9_13991,l9_13992,l9_13993);
float l9_13997=step(abs(l9_13991-l9_13996),9.9999997e-06);
l9_13995*=(l9_13997+((1.0-float(l9_13994))*(1.0-l9_13997)));
l9_13991=l9_13996;
l9_13987=l9_13991;
l9_13990=l9_13995;
}
l9_13944.x=l9_13987;
l9_13954=l9_13990;
float l9_13998=l9_13944.y;
int l9_13999=l9_13947.y;
bool l9_14000=l9_13953;
float l9_14001=l9_13954;
if ((l9_13999==0)||(l9_13999==3))
{
float l9_14002=l9_13998;
float l9_14003=0.0;
float l9_14004=1.0;
bool l9_14005=l9_14000;
float l9_14006=l9_14001;
float l9_14007=fast::clamp(l9_14002,l9_14003,l9_14004);
float l9_14008=step(abs(l9_14002-l9_14007),9.9999997e-06);
l9_14006*=(l9_14008+((1.0-float(l9_14005))*(1.0-l9_14008)));
l9_14002=l9_14007;
l9_13998=l9_14002;
l9_14001=l9_14006;
}
l9_13944.y=l9_13998;
l9_13954=l9_14001;
float2 l9_14009=l9_13944;
int l9_14010=l9_13942;
int l9_14011=l9_13943;
float l9_14012=l9_13952;
float2 l9_14013=l9_14009;
int l9_14014=l9_14010;
int l9_14015=l9_14011;
float3 l9_14016=float3(0.0);
if (l9_14014==0)
{
l9_14016=float3(l9_14013,0.0);
}
else
{
if (l9_14014==1)
{
l9_14016=float3(l9_14013.x,(l9_14013.y*0.5)+(0.5-(float(l9_14015)*0.5)),0.0);
}
else
{
l9_14016=float3(l9_14013,float(l9_14015));
}
}
float3 l9_14017=l9_14016;
float3 l9_14018=l9_14017;
float4 l9_14019=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_14018.xy,level(l9_14012));
float4 l9_14020=l9_14019;
if (l9_13950)
{
l9_14020=mix(l9_13951,l9_14020,float4(l9_13954));
}
float4 l9_14021=l9_14020;
l9_13931=l9_14021.x;
float l9_14022=l9_13931;
float l9_14023=l9_14022;
float l9_14024=float(l9_13929)*l9_13922;
float l9_14025=0.0;
float l9_14026=(*sc_set0.UserUniforms).Tweak_N305_curveData.x;
float l9_14027=(*sc_set0.UserUniforms).Tweak_N305_curveData.y;
float l9_14028=(*sc_set0.UserUniforms).Tweak_N305_curveData.z;
float l9_14029=(l9_14024-l9_14027)/(l9_14028-l9_14027);
float2 l9_14030=float2(l9_14029,l9_14026);
l9_14030=fast::clamp(l9_14030,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_14031=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_14031=0;
}
else
{
l9_14031=gl_InstanceIndex%2;
}
int l9_14032=l9_14031;
l9_13924=1-l9_14032;
}
else
{
int l9_14033=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_14033=0;
}
else
{
l9_14033=gl_InstanceIndex%2;
}
int l9_14034=l9_14033;
l9_13924=l9_14034;
}
int l9_14035=l9_13924;
int l9_14036=sc_CurveAtlasLayout_tmp;
int l9_14037=l9_14035;
float2 l9_14038=l9_14030;
bool l9_14039=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_14040=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_14041=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_14042=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_14043=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_14044=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_14045=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_14046=0.0;
bool l9_14047=l9_14044&&(!l9_14042);
float l9_14048=1.0;
float l9_14049=l9_14038.x;
int l9_14050=l9_14041.x;
if (l9_14050==1)
{
l9_14049=fract(l9_14049);
}
else
{
if (l9_14050==2)
{
float l9_14051=fract(l9_14049);
float l9_14052=l9_14049-l9_14051;
float l9_14053=step(0.25,fract(l9_14052*0.5));
l9_14049=mix(l9_14051,1.0-l9_14051,fast::clamp(l9_14053,0.0,1.0));
}
}
l9_14038.x=l9_14049;
float l9_14054=l9_14038.y;
int l9_14055=l9_14041.y;
if (l9_14055==1)
{
l9_14054=fract(l9_14054);
}
else
{
if (l9_14055==2)
{
float l9_14056=fract(l9_14054);
float l9_14057=l9_14054-l9_14056;
float l9_14058=step(0.25,fract(l9_14057*0.5));
l9_14054=mix(l9_14056,1.0-l9_14056,fast::clamp(l9_14058,0.0,1.0));
}
}
l9_14038.y=l9_14054;
if (l9_14042)
{
bool l9_14059=l9_14044;
bool l9_14060;
if (l9_14059)
{
l9_14060=l9_14041.x==3;
}
else
{
l9_14060=l9_14059;
}
float l9_14061=l9_14038.x;
float l9_14062=l9_14043.x;
float l9_14063=l9_14043.z;
bool l9_14064=l9_14060;
float l9_14065=l9_14048;
float l9_14066=fast::clamp(l9_14061,l9_14062,l9_14063);
float l9_14067=step(abs(l9_14061-l9_14066),9.9999997e-06);
l9_14065*=(l9_14067+((1.0-float(l9_14064))*(1.0-l9_14067)));
l9_14061=l9_14066;
l9_14038.x=l9_14061;
l9_14048=l9_14065;
bool l9_14068=l9_14044;
bool l9_14069;
if (l9_14068)
{
l9_14069=l9_14041.y==3;
}
else
{
l9_14069=l9_14068;
}
float l9_14070=l9_14038.y;
float l9_14071=l9_14043.y;
float l9_14072=l9_14043.w;
bool l9_14073=l9_14069;
float l9_14074=l9_14048;
float l9_14075=fast::clamp(l9_14070,l9_14071,l9_14072);
float l9_14076=step(abs(l9_14070-l9_14075),9.9999997e-06);
l9_14074*=(l9_14076+((1.0-float(l9_14073))*(1.0-l9_14076)));
l9_14070=l9_14075;
l9_14038.y=l9_14070;
l9_14048=l9_14074;
}
float2 l9_14077=l9_14038;
bool l9_14078=l9_14039;
float3x3 l9_14079=l9_14040;
if (l9_14078)
{
l9_14077=float2((l9_14079*float3(l9_14077,1.0)).xy);
}
float2 l9_14080=l9_14077;
l9_14038=l9_14080;
float l9_14081=l9_14038.x;
int l9_14082=l9_14041.x;
bool l9_14083=l9_14047;
float l9_14084=l9_14048;
if ((l9_14082==0)||(l9_14082==3))
{
float l9_14085=l9_14081;
float l9_14086=0.0;
float l9_14087=1.0;
bool l9_14088=l9_14083;
float l9_14089=l9_14084;
float l9_14090=fast::clamp(l9_14085,l9_14086,l9_14087);
float l9_14091=step(abs(l9_14085-l9_14090),9.9999997e-06);
l9_14089*=(l9_14091+((1.0-float(l9_14088))*(1.0-l9_14091)));
l9_14085=l9_14090;
l9_14081=l9_14085;
l9_14084=l9_14089;
}
l9_14038.x=l9_14081;
l9_14048=l9_14084;
float l9_14092=l9_14038.y;
int l9_14093=l9_14041.y;
bool l9_14094=l9_14047;
float l9_14095=l9_14048;
if ((l9_14093==0)||(l9_14093==3))
{
float l9_14096=l9_14092;
float l9_14097=0.0;
float l9_14098=1.0;
bool l9_14099=l9_14094;
float l9_14100=l9_14095;
float l9_14101=fast::clamp(l9_14096,l9_14097,l9_14098);
float l9_14102=step(abs(l9_14096-l9_14101),9.9999997e-06);
l9_14100*=(l9_14102+((1.0-float(l9_14099))*(1.0-l9_14102)));
l9_14096=l9_14101;
l9_14092=l9_14096;
l9_14095=l9_14100;
}
l9_14038.y=l9_14092;
l9_14048=l9_14095;
float2 l9_14103=l9_14038;
int l9_14104=l9_14036;
int l9_14105=l9_14037;
float l9_14106=l9_14046;
float2 l9_14107=l9_14103;
int l9_14108=l9_14104;
int l9_14109=l9_14105;
float3 l9_14110=float3(0.0);
if (l9_14108==0)
{
l9_14110=float3(l9_14107,0.0);
}
else
{
if (l9_14108==1)
{
l9_14110=float3(l9_14107.x,(l9_14107.y*0.5)+(0.5-(float(l9_14109)*0.5)),0.0);
}
else
{
l9_14110=float3(l9_14107,float(l9_14109));
}
}
float3 l9_14111=l9_14110;
float3 l9_14112=l9_14111;
float4 l9_14113=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_14112.xy,level(l9_14106));
float4 l9_14114=l9_14113;
if (l9_14044)
{
l9_14114=mix(l9_14045,l9_14114,float4(l9_14048));
}
float4 l9_14115=l9_14114;
l9_14025=l9_14115.x;
float l9_14116=l9_14025;
float l9_14117=l9_14116;
float l9_14118=float(l9_13929)*l9_13922;
float l9_14119=0.0;
float l9_14120=(*sc_set0.UserUniforms).Tweak_N297_curveData.x;
float l9_14121=(*sc_set0.UserUniforms).Tweak_N297_curveData.y;
float l9_14122=(*sc_set0.UserUniforms).Tweak_N297_curveData.z;
float l9_14123=(l9_14118-l9_14121)/(l9_14122-l9_14121);
float2 l9_14124=float2(l9_14123,l9_14120);
l9_14124=fast::clamp(l9_14124,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_14125=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_14125=0;
}
else
{
l9_14125=gl_InstanceIndex%2;
}
int l9_14126=l9_14125;
l9_13925=1-l9_14126;
}
else
{
int l9_14127=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_14127=0;
}
else
{
l9_14127=gl_InstanceIndex%2;
}
int l9_14128=l9_14127;
l9_13925=l9_14128;
}
int l9_14129=l9_13925;
int l9_14130=sc_CurveAtlasLayout_tmp;
int l9_14131=l9_14129;
float2 l9_14132=l9_14124;
bool l9_14133=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_14134=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_14135=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_14136=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_14137=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_14138=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_14139=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_14140=0.0;
bool l9_14141=l9_14138&&(!l9_14136);
float l9_14142=1.0;
float l9_14143=l9_14132.x;
int l9_14144=l9_14135.x;
if (l9_14144==1)
{
l9_14143=fract(l9_14143);
}
else
{
if (l9_14144==2)
{
float l9_14145=fract(l9_14143);
float l9_14146=l9_14143-l9_14145;
float l9_14147=step(0.25,fract(l9_14146*0.5));
l9_14143=mix(l9_14145,1.0-l9_14145,fast::clamp(l9_14147,0.0,1.0));
}
}
l9_14132.x=l9_14143;
float l9_14148=l9_14132.y;
int l9_14149=l9_14135.y;
if (l9_14149==1)
{
l9_14148=fract(l9_14148);
}
else
{
if (l9_14149==2)
{
float l9_14150=fract(l9_14148);
float l9_14151=l9_14148-l9_14150;
float l9_14152=step(0.25,fract(l9_14151*0.5));
l9_14148=mix(l9_14150,1.0-l9_14150,fast::clamp(l9_14152,0.0,1.0));
}
}
l9_14132.y=l9_14148;
if (l9_14136)
{
bool l9_14153=l9_14138;
bool l9_14154;
if (l9_14153)
{
l9_14154=l9_14135.x==3;
}
else
{
l9_14154=l9_14153;
}
float l9_14155=l9_14132.x;
float l9_14156=l9_14137.x;
float l9_14157=l9_14137.z;
bool l9_14158=l9_14154;
float l9_14159=l9_14142;
float l9_14160=fast::clamp(l9_14155,l9_14156,l9_14157);
float l9_14161=step(abs(l9_14155-l9_14160),9.9999997e-06);
l9_14159*=(l9_14161+((1.0-float(l9_14158))*(1.0-l9_14161)));
l9_14155=l9_14160;
l9_14132.x=l9_14155;
l9_14142=l9_14159;
bool l9_14162=l9_14138;
bool l9_14163;
if (l9_14162)
{
l9_14163=l9_14135.y==3;
}
else
{
l9_14163=l9_14162;
}
float l9_14164=l9_14132.y;
float l9_14165=l9_14137.y;
float l9_14166=l9_14137.w;
bool l9_14167=l9_14163;
float l9_14168=l9_14142;
float l9_14169=fast::clamp(l9_14164,l9_14165,l9_14166);
float l9_14170=step(abs(l9_14164-l9_14169),9.9999997e-06);
l9_14168*=(l9_14170+((1.0-float(l9_14167))*(1.0-l9_14170)));
l9_14164=l9_14169;
l9_14132.y=l9_14164;
l9_14142=l9_14168;
}
float2 l9_14171=l9_14132;
bool l9_14172=l9_14133;
float3x3 l9_14173=l9_14134;
if (l9_14172)
{
l9_14171=float2((l9_14173*float3(l9_14171,1.0)).xy);
}
float2 l9_14174=l9_14171;
l9_14132=l9_14174;
float l9_14175=l9_14132.x;
int l9_14176=l9_14135.x;
bool l9_14177=l9_14141;
float l9_14178=l9_14142;
if ((l9_14176==0)||(l9_14176==3))
{
float l9_14179=l9_14175;
float l9_14180=0.0;
float l9_14181=1.0;
bool l9_14182=l9_14177;
float l9_14183=l9_14178;
float l9_14184=fast::clamp(l9_14179,l9_14180,l9_14181);
float l9_14185=step(abs(l9_14179-l9_14184),9.9999997e-06);
l9_14183*=(l9_14185+((1.0-float(l9_14182))*(1.0-l9_14185)));
l9_14179=l9_14184;
l9_14175=l9_14179;
l9_14178=l9_14183;
}
l9_14132.x=l9_14175;
l9_14142=l9_14178;
float l9_14186=l9_14132.y;
int l9_14187=l9_14135.y;
bool l9_14188=l9_14141;
float l9_14189=l9_14142;
if ((l9_14187==0)||(l9_14187==3))
{
float l9_14190=l9_14186;
float l9_14191=0.0;
float l9_14192=1.0;
bool l9_14193=l9_14188;
float l9_14194=l9_14189;
float l9_14195=fast::clamp(l9_14190,l9_14191,l9_14192);
float l9_14196=step(abs(l9_14190-l9_14195),9.9999997e-06);
l9_14194*=(l9_14196+((1.0-float(l9_14193))*(1.0-l9_14196)));
l9_14190=l9_14195;
l9_14186=l9_14190;
l9_14189=l9_14194;
}
l9_14132.y=l9_14186;
l9_14142=l9_14189;
float2 l9_14197=l9_14132;
int l9_14198=l9_14130;
int l9_14199=l9_14131;
float l9_14200=l9_14140;
float2 l9_14201=l9_14197;
int l9_14202=l9_14198;
int l9_14203=l9_14199;
float3 l9_14204=float3(0.0);
if (l9_14202==0)
{
l9_14204=float3(l9_14201,0.0);
}
else
{
if (l9_14202==1)
{
l9_14204=float3(l9_14201.x,(l9_14201.y*0.5)+(0.5-(float(l9_14203)*0.5)),0.0);
}
else
{
l9_14204=float3(l9_14201,float(l9_14203));
}
}
float3 l9_14205=l9_14204;
float3 l9_14206=l9_14205;
float4 l9_14207=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_14206.xy,level(l9_14200));
float4 l9_14208=l9_14207;
if (l9_14138)
{
l9_14208=mix(l9_14139,l9_14208,float4(l9_14142));
}
float4 l9_14209=l9_14208;
l9_14119=l9_14209.x;
float l9_14210=l9_14119;
float3 l9_14211=float3(l9_14023,l9_14117,l9_14210);
float l9_14212=(float(l9_13929)*l9_13922)+N319_res;
float l9_14213=0.0;
float l9_14214=(*sc_set0.UserUniforms).Tweak_N293_curveData.x;
float l9_14215=(*sc_set0.UserUniforms).Tweak_N293_curveData.y;
float l9_14216=(*sc_set0.UserUniforms).Tweak_N293_curveData.z;
float l9_14217=(l9_14212-l9_14215)/(l9_14216-l9_14215);
float2 l9_14218=float2(l9_14217,l9_14214);
l9_14218=fast::clamp(l9_14218,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_14219=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_14219=0;
}
else
{
l9_14219=gl_InstanceIndex%2;
}
int l9_14220=l9_14219;
l9_13926=1-l9_14220;
}
else
{
int l9_14221=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_14221=0;
}
else
{
l9_14221=gl_InstanceIndex%2;
}
int l9_14222=l9_14221;
l9_13926=l9_14222;
}
int l9_14223=l9_13926;
int l9_14224=sc_CurveAtlasLayout_tmp;
int l9_14225=l9_14223;
float2 l9_14226=l9_14218;
bool l9_14227=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_14228=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_14229=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_14230=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_14231=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_14232=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_14233=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_14234=0.0;
bool l9_14235=l9_14232&&(!l9_14230);
float l9_14236=1.0;
float l9_14237=l9_14226.x;
int l9_14238=l9_14229.x;
if (l9_14238==1)
{
l9_14237=fract(l9_14237);
}
else
{
if (l9_14238==2)
{
float l9_14239=fract(l9_14237);
float l9_14240=l9_14237-l9_14239;
float l9_14241=step(0.25,fract(l9_14240*0.5));
l9_14237=mix(l9_14239,1.0-l9_14239,fast::clamp(l9_14241,0.0,1.0));
}
}
l9_14226.x=l9_14237;
float l9_14242=l9_14226.y;
int l9_14243=l9_14229.y;
if (l9_14243==1)
{
l9_14242=fract(l9_14242);
}
else
{
if (l9_14243==2)
{
float l9_14244=fract(l9_14242);
float l9_14245=l9_14242-l9_14244;
float l9_14246=step(0.25,fract(l9_14245*0.5));
l9_14242=mix(l9_14244,1.0-l9_14244,fast::clamp(l9_14246,0.0,1.0));
}
}
l9_14226.y=l9_14242;
if (l9_14230)
{
bool l9_14247=l9_14232;
bool l9_14248;
if (l9_14247)
{
l9_14248=l9_14229.x==3;
}
else
{
l9_14248=l9_14247;
}
float l9_14249=l9_14226.x;
float l9_14250=l9_14231.x;
float l9_14251=l9_14231.z;
bool l9_14252=l9_14248;
float l9_14253=l9_14236;
float l9_14254=fast::clamp(l9_14249,l9_14250,l9_14251);
float l9_14255=step(abs(l9_14249-l9_14254),9.9999997e-06);
l9_14253*=(l9_14255+((1.0-float(l9_14252))*(1.0-l9_14255)));
l9_14249=l9_14254;
l9_14226.x=l9_14249;
l9_14236=l9_14253;
bool l9_14256=l9_14232;
bool l9_14257;
if (l9_14256)
{
l9_14257=l9_14229.y==3;
}
else
{
l9_14257=l9_14256;
}
float l9_14258=l9_14226.y;
float l9_14259=l9_14231.y;
float l9_14260=l9_14231.w;
bool l9_14261=l9_14257;
float l9_14262=l9_14236;
float l9_14263=fast::clamp(l9_14258,l9_14259,l9_14260);
float l9_14264=step(abs(l9_14258-l9_14263),9.9999997e-06);
l9_14262*=(l9_14264+((1.0-float(l9_14261))*(1.0-l9_14264)));
l9_14258=l9_14263;
l9_14226.y=l9_14258;
l9_14236=l9_14262;
}
float2 l9_14265=l9_14226;
bool l9_14266=l9_14227;
float3x3 l9_14267=l9_14228;
if (l9_14266)
{
l9_14265=float2((l9_14267*float3(l9_14265,1.0)).xy);
}
float2 l9_14268=l9_14265;
l9_14226=l9_14268;
float l9_14269=l9_14226.x;
int l9_14270=l9_14229.x;
bool l9_14271=l9_14235;
float l9_14272=l9_14236;
if ((l9_14270==0)||(l9_14270==3))
{
float l9_14273=l9_14269;
float l9_14274=0.0;
float l9_14275=1.0;
bool l9_14276=l9_14271;
float l9_14277=l9_14272;
float l9_14278=fast::clamp(l9_14273,l9_14274,l9_14275);
float l9_14279=step(abs(l9_14273-l9_14278),9.9999997e-06);
l9_14277*=(l9_14279+((1.0-float(l9_14276))*(1.0-l9_14279)));
l9_14273=l9_14278;
l9_14269=l9_14273;
l9_14272=l9_14277;
}
l9_14226.x=l9_14269;
l9_14236=l9_14272;
float l9_14280=l9_14226.y;
int l9_14281=l9_14229.y;
bool l9_14282=l9_14235;
float l9_14283=l9_14236;
if ((l9_14281==0)||(l9_14281==3))
{
float l9_14284=l9_14280;
float l9_14285=0.0;
float l9_14286=1.0;
bool l9_14287=l9_14282;
float l9_14288=l9_14283;
float l9_14289=fast::clamp(l9_14284,l9_14285,l9_14286);
float l9_14290=step(abs(l9_14284-l9_14289),9.9999997e-06);
l9_14288*=(l9_14290+((1.0-float(l9_14287))*(1.0-l9_14290)));
l9_14284=l9_14289;
l9_14280=l9_14284;
l9_14283=l9_14288;
}
l9_14226.y=l9_14280;
l9_14236=l9_14283;
float2 l9_14291=l9_14226;
int l9_14292=l9_14224;
int l9_14293=l9_14225;
float l9_14294=l9_14234;
float2 l9_14295=l9_14291;
int l9_14296=l9_14292;
int l9_14297=l9_14293;
float3 l9_14298=float3(0.0);
if (l9_14296==0)
{
l9_14298=float3(l9_14295,0.0);
}
else
{
if (l9_14296==1)
{
l9_14298=float3(l9_14295.x,(l9_14295.y*0.5)+(0.5-(float(l9_14297)*0.5)),0.0);
}
else
{
l9_14298=float3(l9_14295,float(l9_14297));
}
}
float3 l9_14299=l9_14298;
float3 l9_14300=l9_14299;
float4 l9_14301=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_14300.xy,level(l9_14294));
float4 l9_14302=l9_14301;
if (l9_14232)
{
l9_14302=mix(l9_14233,l9_14302,float4(l9_14236));
}
float4 l9_14303=l9_14302;
l9_14213=l9_14303.x;
float l9_14304=l9_14213;
float l9_14305=l9_14304;
float l9_14306=(float(l9_13929)*l9_13922)+N319_res;
float l9_14307=0.0;
float l9_14308=(*sc_set0.UserUniforms).Tweak_N305_curveData.x;
float l9_14309=(*sc_set0.UserUniforms).Tweak_N305_curveData.y;
float l9_14310=(*sc_set0.UserUniforms).Tweak_N305_curveData.z;
float l9_14311=(l9_14306-l9_14309)/(l9_14310-l9_14309);
float2 l9_14312=float2(l9_14311,l9_14308);
l9_14312=fast::clamp(l9_14312,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_14313=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_14313=0;
}
else
{
l9_14313=gl_InstanceIndex%2;
}
int l9_14314=l9_14313;
l9_13927=1-l9_14314;
}
else
{
int l9_14315=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_14315=0;
}
else
{
l9_14315=gl_InstanceIndex%2;
}
int l9_14316=l9_14315;
l9_13927=l9_14316;
}
int l9_14317=l9_13927;
int l9_14318=sc_CurveAtlasLayout_tmp;
int l9_14319=l9_14317;
float2 l9_14320=l9_14312;
bool l9_14321=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_14322=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_14323=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_14324=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_14325=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_14326=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_14327=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_14328=0.0;
bool l9_14329=l9_14326&&(!l9_14324);
float l9_14330=1.0;
float l9_14331=l9_14320.x;
int l9_14332=l9_14323.x;
if (l9_14332==1)
{
l9_14331=fract(l9_14331);
}
else
{
if (l9_14332==2)
{
float l9_14333=fract(l9_14331);
float l9_14334=l9_14331-l9_14333;
float l9_14335=step(0.25,fract(l9_14334*0.5));
l9_14331=mix(l9_14333,1.0-l9_14333,fast::clamp(l9_14335,0.0,1.0));
}
}
l9_14320.x=l9_14331;
float l9_14336=l9_14320.y;
int l9_14337=l9_14323.y;
if (l9_14337==1)
{
l9_14336=fract(l9_14336);
}
else
{
if (l9_14337==2)
{
float l9_14338=fract(l9_14336);
float l9_14339=l9_14336-l9_14338;
float l9_14340=step(0.25,fract(l9_14339*0.5));
l9_14336=mix(l9_14338,1.0-l9_14338,fast::clamp(l9_14340,0.0,1.0));
}
}
l9_14320.y=l9_14336;
if (l9_14324)
{
bool l9_14341=l9_14326;
bool l9_14342;
if (l9_14341)
{
l9_14342=l9_14323.x==3;
}
else
{
l9_14342=l9_14341;
}
float l9_14343=l9_14320.x;
float l9_14344=l9_14325.x;
float l9_14345=l9_14325.z;
bool l9_14346=l9_14342;
float l9_14347=l9_14330;
float l9_14348=fast::clamp(l9_14343,l9_14344,l9_14345);
float l9_14349=step(abs(l9_14343-l9_14348),9.9999997e-06);
l9_14347*=(l9_14349+((1.0-float(l9_14346))*(1.0-l9_14349)));
l9_14343=l9_14348;
l9_14320.x=l9_14343;
l9_14330=l9_14347;
bool l9_14350=l9_14326;
bool l9_14351;
if (l9_14350)
{
l9_14351=l9_14323.y==3;
}
else
{
l9_14351=l9_14350;
}
float l9_14352=l9_14320.y;
float l9_14353=l9_14325.y;
float l9_14354=l9_14325.w;
bool l9_14355=l9_14351;
float l9_14356=l9_14330;
float l9_14357=fast::clamp(l9_14352,l9_14353,l9_14354);
float l9_14358=step(abs(l9_14352-l9_14357),9.9999997e-06);
l9_14356*=(l9_14358+((1.0-float(l9_14355))*(1.0-l9_14358)));
l9_14352=l9_14357;
l9_14320.y=l9_14352;
l9_14330=l9_14356;
}
float2 l9_14359=l9_14320;
bool l9_14360=l9_14321;
float3x3 l9_14361=l9_14322;
if (l9_14360)
{
l9_14359=float2((l9_14361*float3(l9_14359,1.0)).xy);
}
float2 l9_14362=l9_14359;
l9_14320=l9_14362;
float l9_14363=l9_14320.x;
int l9_14364=l9_14323.x;
bool l9_14365=l9_14329;
float l9_14366=l9_14330;
if ((l9_14364==0)||(l9_14364==3))
{
float l9_14367=l9_14363;
float l9_14368=0.0;
float l9_14369=1.0;
bool l9_14370=l9_14365;
float l9_14371=l9_14366;
float l9_14372=fast::clamp(l9_14367,l9_14368,l9_14369);
float l9_14373=step(abs(l9_14367-l9_14372),9.9999997e-06);
l9_14371*=(l9_14373+((1.0-float(l9_14370))*(1.0-l9_14373)));
l9_14367=l9_14372;
l9_14363=l9_14367;
l9_14366=l9_14371;
}
l9_14320.x=l9_14363;
l9_14330=l9_14366;
float l9_14374=l9_14320.y;
int l9_14375=l9_14323.y;
bool l9_14376=l9_14329;
float l9_14377=l9_14330;
if ((l9_14375==0)||(l9_14375==3))
{
float l9_14378=l9_14374;
float l9_14379=0.0;
float l9_14380=1.0;
bool l9_14381=l9_14376;
float l9_14382=l9_14377;
float l9_14383=fast::clamp(l9_14378,l9_14379,l9_14380);
float l9_14384=step(abs(l9_14378-l9_14383),9.9999997e-06);
l9_14382*=(l9_14384+((1.0-float(l9_14381))*(1.0-l9_14384)));
l9_14378=l9_14383;
l9_14374=l9_14378;
l9_14377=l9_14382;
}
l9_14320.y=l9_14374;
l9_14330=l9_14377;
float2 l9_14385=l9_14320;
int l9_14386=l9_14318;
int l9_14387=l9_14319;
float l9_14388=l9_14328;
float2 l9_14389=l9_14385;
int l9_14390=l9_14386;
int l9_14391=l9_14387;
float3 l9_14392=float3(0.0);
if (l9_14390==0)
{
l9_14392=float3(l9_14389,0.0);
}
else
{
if (l9_14390==1)
{
l9_14392=float3(l9_14389.x,(l9_14389.y*0.5)+(0.5-(float(l9_14391)*0.5)),0.0);
}
else
{
l9_14392=float3(l9_14389,float(l9_14391));
}
}
float3 l9_14393=l9_14392;
float3 l9_14394=l9_14393;
float4 l9_14395=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_14394.xy,level(l9_14388));
float4 l9_14396=l9_14395;
if (l9_14326)
{
l9_14396=mix(l9_14327,l9_14396,float4(l9_14330));
}
float4 l9_14397=l9_14396;
l9_14307=l9_14397.x;
float l9_14398=l9_14307;
float l9_14399=l9_14398;
float l9_14400=(float(l9_13929)*l9_13922)+N319_res;
float l9_14401=0.0;
float l9_14402=(*sc_set0.UserUniforms).Tweak_N297_curveData.x;
float l9_14403=(*sc_set0.UserUniforms).Tweak_N297_curveData.y;
float l9_14404=(*sc_set0.UserUniforms).Tweak_N297_curveData.z;
float l9_14405=(l9_14400-l9_14403)/(l9_14404-l9_14403);
float2 l9_14406=float2(l9_14405,l9_14402);
l9_14406=fast::clamp(l9_14406,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_14407=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_14407=0;
}
else
{
l9_14407=gl_InstanceIndex%2;
}
int l9_14408=l9_14407;
l9_13928=1-l9_14408;
}
else
{
int l9_14409=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_14409=0;
}
else
{
l9_14409=gl_InstanceIndex%2;
}
int l9_14410=l9_14409;
l9_13928=l9_14410;
}
int l9_14411=l9_13928;
int l9_14412=sc_CurveAtlasLayout_tmp;
int l9_14413=l9_14411;
float2 l9_14414=l9_14406;
bool l9_14415=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_14416=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_14417=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_14418=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_14419=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_14420=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_14421=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_14422=0.0;
bool l9_14423=l9_14420&&(!l9_14418);
float l9_14424=1.0;
float l9_14425=l9_14414.x;
int l9_14426=l9_14417.x;
if (l9_14426==1)
{
l9_14425=fract(l9_14425);
}
else
{
if (l9_14426==2)
{
float l9_14427=fract(l9_14425);
float l9_14428=l9_14425-l9_14427;
float l9_14429=step(0.25,fract(l9_14428*0.5));
l9_14425=mix(l9_14427,1.0-l9_14427,fast::clamp(l9_14429,0.0,1.0));
}
}
l9_14414.x=l9_14425;
float l9_14430=l9_14414.y;
int l9_14431=l9_14417.y;
if (l9_14431==1)
{
l9_14430=fract(l9_14430);
}
else
{
if (l9_14431==2)
{
float l9_14432=fract(l9_14430);
float l9_14433=l9_14430-l9_14432;
float l9_14434=step(0.25,fract(l9_14433*0.5));
l9_14430=mix(l9_14432,1.0-l9_14432,fast::clamp(l9_14434,0.0,1.0));
}
}
l9_14414.y=l9_14430;
if (l9_14418)
{
bool l9_14435=l9_14420;
bool l9_14436;
if (l9_14435)
{
l9_14436=l9_14417.x==3;
}
else
{
l9_14436=l9_14435;
}
float l9_14437=l9_14414.x;
float l9_14438=l9_14419.x;
float l9_14439=l9_14419.z;
bool l9_14440=l9_14436;
float l9_14441=l9_14424;
float l9_14442=fast::clamp(l9_14437,l9_14438,l9_14439);
float l9_14443=step(abs(l9_14437-l9_14442),9.9999997e-06);
l9_14441*=(l9_14443+((1.0-float(l9_14440))*(1.0-l9_14443)));
l9_14437=l9_14442;
l9_14414.x=l9_14437;
l9_14424=l9_14441;
bool l9_14444=l9_14420;
bool l9_14445;
if (l9_14444)
{
l9_14445=l9_14417.y==3;
}
else
{
l9_14445=l9_14444;
}
float l9_14446=l9_14414.y;
float l9_14447=l9_14419.y;
float l9_14448=l9_14419.w;
bool l9_14449=l9_14445;
float l9_14450=l9_14424;
float l9_14451=fast::clamp(l9_14446,l9_14447,l9_14448);
float l9_14452=step(abs(l9_14446-l9_14451),9.9999997e-06);
l9_14450*=(l9_14452+((1.0-float(l9_14449))*(1.0-l9_14452)));
l9_14446=l9_14451;
l9_14414.y=l9_14446;
l9_14424=l9_14450;
}
float2 l9_14453=l9_14414;
bool l9_14454=l9_14415;
float3x3 l9_14455=l9_14416;
if (l9_14454)
{
l9_14453=float2((l9_14455*float3(l9_14453,1.0)).xy);
}
float2 l9_14456=l9_14453;
l9_14414=l9_14456;
float l9_14457=l9_14414.x;
int l9_14458=l9_14417.x;
bool l9_14459=l9_14423;
float l9_14460=l9_14424;
if ((l9_14458==0)||(l9_14458==3))
{
float l9_14461=l9_14457;
float l9_14462=0.0;
float l9_14463=1.0;
bool l9_14464=l9_14459;
float l9_14465=l9_14460;
float l9_14466=fast::clamp(l9_14461,l9_14462,l9_14463);
float l9_14467=step(abs(l9_14461-l9_14466),9.9999997e-06);
l9_14465*=(l9_14467+((1.0-float(l9_14464))*(1.0-l9_14467)));
l9_14461=l9_14466;
l9_14457=l9_14461;
l9_14460=l9_14465;
}
l9_14414.x=l9_14457;
l9_14424=l9_14460;
float l9_14468=l9_14414.y;
int l9_14469=l9_14417.y;
bool l9_14470=l9_14423;
float l9_14471=l9_14424;
if ((l9_14469==0)||(l9_14469==3))
{
float l9_14472=l9_14468;
float l9_14473=0.0;
float l9_14474=1.0;
bool l9_14475=l9_14470;
float l9_14476=l9_14471;
float l9_14477=fast::clamp(l9_14472,l9_14473,l9_14474);
float l9_14478=step(abs(l9_14472-l9_14477),9.9999997e-06);
l9_14476*=(l9_14478+((1.0-float(l9_14475))*(1.0-l9_14478)));
l9_14472=l9_14477;
l9_14468=l9_14472;
l9_14471=l9_14476;
}
l9_14414.y=l9_14468;
l9_14424=l9_14471;
float2 l9_14479=l9_14414;
int l9_14480=l9_14412;
int l9_14481=l9_14413;
float l9_14482=l9_14422;
float2 l9_14483=l9_14479;
int l9_14484=l9_14480;
int l9_14485=l9_14481;
float3 l9_14486=float3(0.0);
if (l9_14484==0)
{
l9_14486=float3(l9_14483,0.0);
}
else
{
if (l9_14484==1)
{
l9_14486=float3(l9_14483.x,(l9_14483.y*0.5)+(0.5-(float(l9_14485)*0.5)),0.0);
}
else
{
l9_14486=float3(l9_14483,float(l9_14485));
}
}
float3 l9_14487=l9_14486;
float3 l9_14488=l9_14487;
float4 l9_14489=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_14488.xy,level(l9_14482));
float4 l9_14490=l9_14489;
if (l9_14420)
{
l9_14490=mix(l9_14421,l9_14490,float4(l9_14424));
}
float4 l9_14491=l9_14490;
l9_14401=l9_14491.x;
float l9_14492=l9_14401;
float3 l9_14493=float3(l9_14305,l9_14399,l9_14492);
l9_13917+=normalize(l9_14493-l9_14211);
l9_13929++;
continue;
}
else
{
break;
}
}
l9_13917=normalize(l9_13917);
l9_13918=normalize(cross(l9_13917,float3(0.0099990005,0.99990004,0.0099990005)));
l9_13919=normalize(cross(l9_13917,l9_13918));
float l9_14494=l9_13916;
float l9_14495=0.0;
float l9_14496=(*sc_set0.UserUniforms).Tweak_N293_curveData.x;
float l9_14497=(*sc_set0.UserUniforms).Tweak_N293_curveData.y;
float l9_14498=(*sc_set0.UserUniforms).Tweak_N293_curveData.z;
float l9_14499=(l9_14494-l9_14497)/(l9_14498-l9_14497);
float2 l9_14500=float2(l9_14499,l9_14496);
l9_14500=fast::clamp(l9_14500,float2(0.0),float2(1.0));
int l9_14501;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_14502=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_14502=0;
}
else
{
l9_14502=gl_InstanceIndex%2;
}
int l9_14503=l9_14502;
l9_14501=1-l9_14503;
}
else
{
int l9_14504=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_14504=0;
}
else
{
l9_14504=gl_InstanceIndex%2;
}
int l9_14505=l9_14504;
l9_14501=l9_14505;
}
int l9_14506=l9_14501;
int l9_14507=sc_CurveAtlasLayout_tmp;
int l9_14508=l9_14506;
float2 l9_14509=l9_14500;
bool l9_14510=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_14511=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_14512=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_14513=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_14514=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_14515=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_14516=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_14517=0.0;
bool l9_14518=l9_14515&&(!l9_14513);
float l9_14519=1.0;
float l9_14520=l9_14509.x;
int l9_14521=l9_14512.x;
if (l9_14521==1)
{
l9_14520=fract(l9_14520);
}
else
{
if (l9_14521==2)
{
float l9_14522=fract(l9_14520);
float l9_14523=l9_14520-l9_14522;
float l9_14524=step(0.25,fract(l9_14523*0.5));
l9_14520=mix(l9_14522,1.0-l9_14522,fast::clamp(l9_14524,0.0,1.0));
}
}
l9_14509.x=l9_14520;
float l9_14525=l9_14509.y;
int l9_14526=l9_14512.y;
if (l9_14526==1)
{
l9_14525=fract(l9_14525);
}
else
{
if (l9_14526==2)
{
float l9_14527=fract(l9_14525);
float l9_14528=l9_14525-l9_14527;
float l9_14529=step(0.25,fract(l9_14528*0.5));
l9_14525=mix(l9_14527,1.0-l9_14527,fast::clamp(l9_14529,0.0,1.0));
}
}
l9_14509.y=l9_14525;
if (l9_14513)
{
bool l9_14530=l9_14515;
bool l9_14531;
if (l9_14530)
{
l9_14531=l9_14512.x==3;
}
else
{
l9_14531=l9_14530;
}
float l9_14532=l9_14509.x;
float l9_14533=l9_14514.x;
float l9_14534=l9_14514.z;
bool l9_14535=l9_14531;
float l9_14536=l9_14519;
float l9_14537=fast::clamp(l9_14532,l9_14533,l9_14534);
float l9_14538=step(abs(l9_14532-l9_14537),9.9999997e-06);
l9_14536*=(l9_14538+((1.0-float(l9_14535))*(1.0-l9_14538)));
l9_14532=l9_14537;
l9_14509.x=l9_14532;
l9_14519=l9_14536;
bool l9_14539=l9_14515;
bool l9_14540;
if (l9_14539)
{
l9_14540=l9_14512.y==3;
}
else
{
l9_14540=l9_14539;
}
float l9_14541=l9_14509.y;
float l9_14542=l9_14514.y;
float l9_14543=l9_14514.w;
bool l9_14544=l9_14540;
float l9_14545=l9_14519;
float l9_14546=fast::clamp(l9_14541,l9_14542,l9_14543);
float l9_14547=step(abs(l9_14541-l9_14546),9.9999997e-06);
l9_14545*=(l9_14547+((1.0-float(l9_14544))*(1.0-l9_14547)));
l9_14541=l9_14546;
l9_14509.y=l9_14541;
l9_14519=l9_14545;
}
float2 l9_14548=l9_14509;
bool l9_14549=l9_14510;
float3x3 l9_14550=l9_14511;
if (l9_14549)
{
l9_14548=float2((l9_14550*float3(l9_14548,1.0)).xy);
}
float2 l9_14551=l9_14548;
l9_14509=l9_14551;
float l9_14552=l9_14509.x;
int l9_14553=l9_14512.x;
bool l9_14554=l9_14518;
float l9_14555=l9_14519;
if ((l9_14553==0)||(l9_14553==3))
{
float l9_14556=l9_14552;
float l9_14557=0.0;
float l9_14558=1.0;
bool l9_14559=l9_14554;
float l9_14560=l9_14555;
float l9_14561=fast::clamp(l9_14556,l9_14557,l9_14558);
float l9_14562=step(abs(l9_14556-l9_14561),9.9999997e-06);
l9_14560*=(l9_14562+((1.0-float(l9_14559))*(1.0-l9_14562)));
l9_14556=l9_14561;
l9_14552=l9_14556;
l9_14555=l9_14560;
}
l9_14509.x=l9_14552;
l9_14519=l9_14555;
float l9_14563=l9_14509.y;
int l9_14564=l9_14512.y;
bool l9_14565=l9_14518;
float l9_14566=l9_14519;
if ((l9_14564==0)||(l9_14564==3))
{
float l9_14567=l9_14563;
float l9_14568=0.0;
float l9_14569=1.0;
bool l9_14570=l9_14565;
float l9_14571=l9_14566;
float l9_14572=fast::clamp(l9_14567,l9_14568,l9_14569);
float l9_14573=step(abs(l9_14567-l9_14572),9.9999997e-06);
l9_14571*=(l9_14573+((1.0-float(l9_14570))*(1.0-l9_14573)));
l9_14567=l9_14572;
l9_14563=l9_14567;
l9_14566=l9_14571;
}
l9_14509.y=l9_14563;
l9_14519=l9_14566;
float2 l9_14574=l9_14509;
int l9_14575=l9_14507;
int l9_14576=l9_14508;
float l9_14577=l9_14517;
float2 l9_14578=l9_14574;
int l9_14579=l9_14575;
int l9_14580=l9_14576;
float3 l9_14581=float3(0.0);
if (l9_14579==0)
{
l9_14581=float3(l9_14578,0.0);
}
else
{
if (l9_14579==1)
{
l9_14581=float3(l9_14578.x,(l9_14578.y*0.5)+(0.5-(float(l9_14580)*0.5)),0.0);
}
else
{
l9_14581=float3(l9_14578,float(l9_14580));
}
}
float3 l9_14582=l9_14581;
float3 l9_14583=l9_14582;
float4 l9_14584=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_14583.xy,level(l9_14577));
float4 l9_14585=l9_14584;
if (l9_14515)
{
l9_14585=mix(l9_14516,l9_14585,float4(l9_14519));
}
float4 l9_14586=l9_14585;
l9_14495=l9_14586.x;
float l9_14587=l9_14495;
float l9_14588=l9_14587;
float l9_14589=l9_13916;
float l9_14590=0.0;
float l9_14591=(*sc_set0.UserUniforms).Tweak_N305_curveData.x;
float l9_14592=(*sc_set0.UserUniforms).Tweak_N305_curveData.y;
float l9_14593=(*sc_set0.UserUniforms).Tweak_N305_curveData.z;
float l9_14594=(l9_14589-l9_14592)/(l9_14593-l9_14592);
float2 l9_14595=float2(l9_14594,l9_14591);
l9_14595=fast::clamp(l9_14595,float2(0.0),float2(1.0));
int l9_14596;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_14597=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_14597=0;
}
else
{
l9_14597=gl_InstanceIndex%2;
}
int l9_14598=l9_14597;
l9_14596=1-l9_14598;
}
else
{
int l9_14599=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_14599=0;
}
else
{
l9_14599=gl_InstanceIndex%2;
}
int l9_14600=l9_14599;
l9_14596=l9_14600;
}
int l9_14601=l9_14596;
int l9_14602=sc_CurveAtlasLayout_tmp;
int l9_14603=l9_14601;
float2 l9_14604=l9_14595;
bool l9_14605=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_14606=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_14607=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_14608=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_14609=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_14610=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_14611=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_14612=0.0;
bool l9_14613=l9_14610&&(!l9_14608);
float l9_14614=1.0;
float l9_14615=l9_14604.x;
int l9_14616=l9_14607.x;
if (l9_14616==1)
{
l9_14615=fract(l9_14615);
}
else
{
if (l9_14616==2)
{
float l9_14617=fract(l9_14615);
float l9_14618=l9_14615-l9_14617;
float l9_14619=step(0.25,fract(l9_14618*0.5));
l9_14615=mix(l9_14617,1.0-l9_14617,fast::clamp(l9_14619,0.0,1.0));
}
}
l9_14604.x=l9_14615;
float l9_14620=l9_14604.y;
int l9_14621=l9_14607.y;
if (l9_14621==1)
{
l9_14620=fract(l9_14620);
}
else
{
if (l9_14621==2)
{
float l9_14622=fract(l9_14620);
float l9_14623=l9_14620-l9_14622;
float l9_14624=step(0.25,fract(l9_14623*0.5));
l9_14620=mix(l9_14622,1.0-l9_14622,fast::clamp(l9_14624,0.0,1.0));
}
}
l9_14604.y=l9_14620;
if (l9_14608)
{
bool l9_14625=l9_14610;
bool l9_14626;
if (l9_14625)
{
l9_14626=l9_14607.x==3;
}
else
{
l9_14626=l9_14625;
}
float l9_14627=l9_14604.x;
float l9_14628=l9_14609.x;
float l9_14629=l9_14609.z;
bool l9_14630=l9_14626;
float l9_14631=l9_14614;
float l9_14632=fast::clamp(l9_14627,l9_14628,l9_14629);
float l9_14633=step(abs(l9_14627-l9_14632),9.9999997e-06);
l9_14631*=(l9_14633+((1.0-float(l9_14630))*(1.0-l9_14633)));
l9_14627=l9_14632;
l9_14604.x=l9_14627;
l9_14614=l9_14631;
bool l9_14634=l9_14610;
bool l9_14635;
if (l9_14634)
{
l9_14635=l9_14607.y==3;
}
else
{
l9_14635=l9_14634;
}
float l9_14636=l9_14604.y;
float l9_14637=l9_14609.y;
float l9_14638=l9_14609.w;
bool l9_14639=l9_14635;
float l9_14640=l9_14614;
float l9_14641=fast::clamp(l9_14636,l9_14637,l9_14638);
float l9_14642=step(abs(l9_14636-l9_14641),9.9999997e-06);
l9_14640*=(l9_14642+((1.0-float(l9_14639))*(1.0-l9_14642)));
l9_14636=l9_14641;
l9_14604.y=l9_14636;
l9_14614=l9_14640;
}
float2 l9_14643=l9_14604;
bool l9_14644=l9_14605;
float3x3 l9_14645=l9_14606;
if (l9_14644)
{
l9_14643=float2((l9_14645*float3(l9_14643,1.0)).xy);
}
float2 l9_14646=l9_14643;
l9_14604=l9_14646;
float l9_14647=l9_14604.x;
int l9_14648=l9_14607.x;
bool l9_14649=l9_14613;
float l9_14650=l9_14614;
if ((l9_14648==0)||(l9_14648==3))
{
float l9_14651=l9_14647;
float l9_14652=0.0;
float l9_14653=1.0;
bool l9_14654=l9_14649;
float l9_14655=l9_14650;
float l9_14656=fast::clamp(l9_14651,l9_14652,l9_14653);
float l9_14657=step(abs(l9_14651-l9_14656),9.9999997e-06);
l9_14655*=(l9_14657+((1.0-float(l9_14654))*(1.0-l9_14657)));
l9_14651=l9_14656;
l9_14647=l9_14651;
l9_14650=l9_14655;
}
l9_14604.x=l9_14647;
l9_14614=l9_14650;
float l9_14658=l9_14604.y;
int l9_14659=l9_14607.y;
bool l9_14660=l9_14613;
float l9_14661=l9_14614;
if ((l9_14659==0)||(l9_14659==3))
{
float l9_14662=l9_14658;
float l9_14663=0.0;
float l9_14664=1.0;
bool l9_14665=l9_14660;
float l9_14666=l9_14661;
float l9_14667=fast::clamp(l9_14662,l9_14663,l9_14664);
float l9_14668=step(abs(l9_14662-l9_14667),9.9999997e-06);
l9_14666*=(l9_14668+((1.0-float(l9_14665))*(1.0-l9_14668)));
l9_14662=l9_14667;
l9_14658=l9_14662;
l9_14661=l9_14666;
}
l9_14604.y=l9_14658;
l9_14614=l9_14661;
float2 l9_14669=l9_14604;
int l9_14670=l9_14602;
int l9_14671=l9_14603;
float l9_14672=l9_14612;
float2 l9_14673=l9_14669;
int l9_14674=l9_14670;
int l9_14675=l9_14671;
float3 l9_14676=float3(0.0);
if (l9_14674==0)
{
l9_14676=float3(l9_14673,0.0);
}
else
{
if (l9_14674==1)
{
l9_14676=float3(l9_14673.x,(l9_14673.y*0.5)+(0.5-(float(l9_14675)*0.5)),0.0);
}
else
{
l9_14676=float3(l9_14673,float(l9_14675));
}
}
float3 l9_14677=l9_14676;
float3 l9_14678=l9_14677;
float4 l9_14679=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_14678.xy,level(l9_14672));
float4 l9_14680=l9_14679;
if (l9_14610)
{
l9_14680=mix(l9_14611,l9_14680,float4(l9_14614));
}
float4 l9_14681=l9_14680;
l9_14590=l9_14681.x;
float l9_14682=l9_14590;
float l9_14683=l9_14682;
float l9_14684=l9_13916;
float l9_14685=0.0;
float l9_14686=(*sc_set0.UserUniforms).Tweak_N297_curveData.x;
float l9_14687=(*sc_set0.UserUniforms).Tweak_N297_curveData.y;
float l9_14688=(*sc_set0.UserUniforms).Tweak_N297_curveData.z;
float l9_14689=(l9_14684-l9_14687)/(l9_14688-l9_14687);
float2 l9_14690=float2(l9_14689,l9_14686);
l9_14690=fast::clamp(l9_14690,float2(0.0),float2(1.0));
int l9_14691;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_14692=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_14692=0;
}
else
{
l9_14692=gl_InstanceIndex%2;
}
int l9_14693=l9_14692;
l9_14691=1-l9_14693;
}
else
{
int l9_14694=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_14694=0;
}
else
{
l9_14694=gl_InstanceIndex%2;
}
int l9_14695=l9_14694;
l9_14691=l9_14695;
}
int l9_14696=l9_14691;
int l9_14697=sc_CurveAtlasLayout_tmp;
int l9_14698=l9_14696;
float2 l9_14699=l9_14690;
bool l9_14700=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_14701=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_14702=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_14703=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_14704=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_14705=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_14706=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_14707=0.0;
bool l9_14708=l9_14705&&(!l9_14703);
float l9_14709=1.0;
float l9_14710=l9_14699.x;
int l9_14711=l9_14702.x;
if (l9_14711==1)
{
l9_14710=fract(l9_14710);
}
else
{
if (l9_14711==2)
{
float l9_14712=fract(l9_14710);
float l9_14713=l9_14710-l9_14712;
float l9_14714=step(0.25,fract(l9_14713*0.5));
l9_14710=mix(l9_14712,1.0-l9_14712,fast::clamp(l9_14714,0.0,1.0));
}
}
l9_14699.x=l9_14710;
float l9_14715=l9_14699.y;
int l9_14716=l9_14702.y;
if (l9_14716==1)
{
l9_14715=fract(l9_14715);
}
else
{
if (l9_14716==2)
{
float l9_14717=fract(l9_14715);
float l9_14718=l9_14715-l9_14717;
float l9_14719=step(0.25,fract(l9_14718*0.5));
l9_14715=mix(l9_14717,1.0-l9_14717,fast::clamp(l9_14719,0.0,1.0));
}
}
l9_14699.y=l9_14715;
if (l9_14703)
{
bool l9_14720=l9_14705;
bool l9_14721;
if (l9_14720)
{
l9_14721=l9_14702.x==3;
}
else
{
l9_14721=l9_14720;
}
float l9_14722=l9_14699.x;
float l9_14723=l9_14704.x;
float l9_14724=l9_14704.z;
bool l9_14725=l9_14721;
float l9_14726=l9_14709;
float l9_14727=fast::clamp(l9_14722,l9_14723,l9_14724);
float l9_14728=step(abs(l9_14722-l9_14727),9.9999997e-06);
l9_14726*=(l9_14728+((1.0-float(l9_14725))*(1.0-l9_14728)));
l9_14722=l9_14727;
l9_14699.x=l9_14722;
l9_14709=l9_14726;
bool l9_14729=l9_14705;
bool l9_14730;
if (l9_14729)
{
l9_14730=l9_14702.y==3;
}
else
{
l9_14730=l9_14729;
}
float l9_14731=l9_14699.y;
float l9_14732=l9_14704.y;
float l9_14733=l9_14704.w;
bool l9_14734=l9_14730;
float l9_14735=l9_14709;
float l9_14736=fast::clamp(l9_14731,l9_14732,l9_14733);
float l9_14737=step(abs(l9_14731-l9_14736),9.9999997e-06);
l9_14735*=(l9_14737+((1.0-float(l9_14734))*(1.0-l9_14737)));
l9_14731=l9_14736;
l9_14699.y=l9_14731;
l9_14709=l9_14735;
}
float2 l9_14738=l9_14699;
bool l9_14739=l9_14700;
float3x3 l9_14740=l9_14701;
if (l9_14739)
{
l9_14738=float2((l9_14740*float3(l9_14738,1.0)).xy);
}
float2 l9_14741=l9_14738;
l9_14699=l9_14741;
float l9_14742=l9_14699.x;
int l9_14743=l9_14702.x;
bool l9_14744=l9_14708;
float l9_14745=l9_14709;
if ((l9_14743==0)||(l9_14743==3))
{
float l9_14746=l9_14742;
float l9_14747=0.0;
float l9_14748=1.0;
bool l9_14749=l9_14744;
float l9_14750=l9_14745;
float l9_14751=fast::clamp(l9_14746,l9_14747,l9_14748);
float l9_14752=step(abs(l9_14746-l9_14751),9.9999997e-06);
l9_14750*=(l9_14752+((1.0-float(l9_14749))*(1.0-l9_14752)));
l9_14746=l9_14751;
l9_14742=l9_14746;
l9_14745=l9_14750;
}
l9_14699.x=l9_14742;
l9_14709=l9_14745;
float l9_14753=l9_14699.y;
int l9_14754=l9_14702.y;
bool l9_14755=l9_14708;
float l9_14756=l9_14709;
if ((l9_14754==0)||(l9_14754==3))
{
float l9_14757=l9_14753;
float l9_14758=0.0;
float l9_14759=1.0;
bool l9_14760=l9_14755;
float l9_14761=l9_14756;
float l9_14762=fast::clamp(l9_14757,l9_14758,l9_14759);
float l9_14763=step(abs(l9_14757-l9_14762),9.9999997e-06);
l9_14761*=(l9_14763+((1.0-float(l9_14760))*(1.0-l9_14763)));
l9_14757=l9_14762;
l9_14753=l9_14757;
l9_14756=l9_14761;
}
l9_14699.y=l9_14753;
l9_14709=l9_14756;
float2 l9_14764=l9_14699;
int l9_14765=l9_14697;
int l9_14766=l9_14698;
float l9_14767=l9_14707;
float2 l9_14768=l9_14764;
int l9_14769=l9_14765;
int l9_14770=l9_14766;
float3 l9_14771=float3(0.0);
if (l9_14769==0)
{
l9_14771=float3(l9_14768,0.0);
}
else
{
if (l9_14769==1)
{
l9_14771=float3(l9_14768.x,(l9_14768.y*0.5)+(0.5-(float(l9_14770)*0.5)),0.0);
}
else
{
l9_14771=float3(l9_14768,float(l9_14770));
}
}
float3 l9_14772=l9_14771;
float3 l9_14773=l9_14772;
float4 l9_14774=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_14773.xy,level(l9_14767));
float4 l9_14775=l9_14774;
if (l9_14705)
{
l9_14775=mix(l9_14706,l9_14775,float4(l9_14709));
}
float4 l9_14776=l9_14775;
l9_14685=l9_14776.x;
float l9_14777=l9_14685;
float3 l9_14778=float3(l9_14588,l9_14683,l9_14777);
float l9_14779=l9_13916+N319_res;
float l9_14780=0.0;
float l9_14781=(*sc_set0.UserUniforms).Tweak_N293_curveData.x;
float l9_14782=(*sc_set0.UserUniforms).Tweak_N293_curveData.y;
float l9_14783=(*sc_set0.UserUniforms).Tweak_N293_curveData.z;
float l9_14784=(l9_14779-l9_14782)/(l9_14783-l9_14782);
float2 l9_14785=float2(l9_14784,l9_14781);
l9_14785=fast::clamp(l9_14785,float2(0.0),float2(1.0));
int l9_14786;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_14787=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_14787=0;
}
else
{
l9_14787=gl_InstanceIndex%2;
}
int l9_14788=l9_14787;
l9_14786=1-l9_14788;
}
else
{
int l9_14789=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_14789=0;
}
else
{
l9_14789=gl_InstanceIndex%2;
}
int l9_14790=l9_14789;
l9_14786=l9_14790;
}
int l9_14791=l9_14786;
int l9_14792=sc_CurveAtlasLayout_tmp;
int l9_14793=l9_14791;
float2 l9_14794=l9_14785;
bool l9_14795=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_14796=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_14797=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_14798=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_14799=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_14800=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_14801=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_14802=0.0;
bool l9_14803=l9_14800&&(!l9_14798);
float l9_14804=1.0;
float l9_14805=l9_14794.x;
int l9_14806=l9_14797.x;
if (l9_14806==1)
{
l9_14805=fract(l9_14805);
}
else
{
if (l9_14806==2)
{
float l9_14807=fract(l9_14805);
float l9_14808=l9_14805-l9_14807;
float l9_14809=step(0.25,fract(l9_14808*0.5));
l9_14805=mix(l9_14807,1.0-l9_14807,fast::clamp(l9_14809,0.0,1.0));
}
}
l9_14794.x=l9_14805;
float l9_14810=l9_14794.y;
int l9_14811=l9_14797.y;
if (l9_14811==1)
{
l9_14810=fract(l9_14810);
}
else
{
if (l9_14811==2)
{
float l9_14812=fract(l9_14810);
float l9_14813=l9_14810-l9_14812;
float l9_14814=step(0.25,fract(l9_14813*0.5));
l9_14810=mix(l9_14812,1.0-l9_14812,fast::clamp(l9_14814,0.0,1.0));
}
}
l9_14794.y=l9_14810;
if (l9_14798)
{
bool l9_14815=l9_14800;
bool l9_14816;
if (l9_14815)
{
l9_14816=l9_14797.x==3;
}
else
{
l9_14816=l9_14815;
}
float l9_14817=l9_14794.x;
float l9_14818=l9_14799.x;
float l9_14819=l9_14799.z;
bool l9_14820=l9_14816;
float l9_14821=l9_14804;
float l9_14822=fast::clamp(l9_14817,l9_14818,l9_14819);
float l9_14823=step(abs(l9_14817-l9_14822),9.9999997e-06);
l9_14821*=(l9_14823+((1.0-float(l9_14820))*(1.0-l9_14823)));
l9_14817=l9_14822;
l9_14794.x=l9_14817;
l9_14804=l9_14821;
bool l9_14824=l9_14800;
bool l9_14825;
if (l9_14824)
{
l9_14825=l9_14797.y==3;
}
else
{
l9_14825=l9_14824;
}
float l9_14826=l9_14794.y;
float l9_14827=l9_14799.y;
float l9_14828=l9_14799.w;
bool l9_14829=l9_14825;
float l9_14830=l9_14804;
float l9_14831=fast::clamp(l9_14826,l9_14827,l9_14828);
float l9_14832=step(abs(l9_14826-l9_14831),9.9999997e-06);
l9_14830*=(l9_14832+((1.0-float(l9_14829))*(1.0-l9_14832)));
l9_14826=l9_14831;
l9_14794.y=l9_14826;
l9_14804=l9_14830;
}
float2 l9_14833=l9_14794;
bool l9_14834=l9_14795;
float3x3 l9_14835=l9_14796;
if (l9_14834)
{
l9_14833=float2((l9_14835*float3(l9_14833,1.0)).xy);
}
float2 l9_14836=l9_14833;
l9_14794=l9_14836;
float l9_14837=l9_14794.x;
int l9_14838=l9_14797.x;
bool l9_14839=l9_14803;
float l9_14840=l9_14804;
if ((l9_14838==0)||(l9_14838==3))
{
float l9_14841=l9_14837;
float l9_14842=0.0;
float l9_14843=1.0;
bool l9_14844=l9_14839;
float l9_14845=l9_14840;
float l9_14846=fast::clamp(l9_14841,l9_14842,l9_14843);
float l9_14847=step(abs(l9_14841-l9_14846),9.9999997e-06);
l9_14845*=(l9_14847+((1.0-float(l9_14844))*(1.0-l9_14847)));
l9_14841=l9_14846;
l9_14837=l9_14841;
l9_14840=l9_14845;
}
l9_14794.x=l9_14837;
l9_14804=l9_14840;
float l9_14848=l9_14794.y;
int l9_14849=l9_14797.y;
bool l9_14850=l9_14803;
float l9_14851=l9_14804;
if ((l9_14849==0)||(l9_14849==3))
{
float l9_14852=l9_14848;
float l9_14853=0.0;
float l9_14854=1.0;
bool l9_14855=l9_14850;
float l9_14856=l9_14851;
float l9_14857=fast::clamp(l9_14852,l9_14853,l9_14854);
float l9_14858=step(abs(l9_14852-l9_14857),9.9999997e-06);
l9_14856*=(l9_14858+((1.0-float(l9_14855))*(1.0-l9_14858)));
l9_14852=l9_14857;
l9_14848=l9_14852;
l9_14851=l9_14856;
}
l9_14794.y=l9_14848;
l9_14804=l9_14851;
float2 l9_14859=l9_14794;
int l9_14860=l9_14792;
int l9_14861=l9_14793;
float l9_14862=l9_14802;
float2 l9_14863=l9_14859;
int l9_14864=l9_14860;
int l9_14865=l9_14861;
float3 l9_14866=float3(0.0);
if (l9_14864==0)
{
l9_14866=float3(l9_14863,0.0);
}
else
{
if (l9_14864==1)
{
l9_14866=float3(l9_14863.x,(l9_14863.y*0.5)+(0.5-(float(l9_14865)*0.5)),0.0);
}
else
{
l9_14866=float3(l9_14863,float(l9_14865));
}
}
float3 l9_14867=l9_14866;
float3 l9_14868=l9_14867;
float4 l9_14869=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_14868.xy,level(l9_14862));
float4 l9_14870=l9_14869;
if (l9_14800)
{
l9_14870=mix(l9_14801,l9_14870,float4(l9_14804));
}
float4 l9_14871=l9_14870;
l9_14780=l9_14871.x;
float l9_14872=l9_14780;
float l9_14873=l9_14872;
float l9_14874=l9_13916+N319_res;
float l9_14875=0.0;
float l9_14876=(*sc_set0.UserUniforms).Tweak_N305_curveData.x;
float l9_14877=(*sc_set0.UserUniforms).Tweak_N305_curveData.y;
float l9_14878=(*sc_set0.UserUniforms).Tweak_N305_curveData.z;
float l9_14879=(l9_14874-l9_14877)/(l9_14878-l9_14877);
float2 l9_14880=float2(l9_14879,l9_14876);
l9_14880=fast::clamp(l9_14880,float2(0.0),float2(1.0));
int l9_14881;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_14882=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_14882=0;
}
else
{
l9_14882=gl_InstanceIndex%2;
}
int l9_14883=l9_14882;
l9_14881=1-l9_14883;
}
else
{
int l9_14884=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_14884=0;
}
else
{
l9_14884=gl_InstanceIndex%2;
}
int l9_14885=l9_14884;
l9_14881=l9_14885;
}
int l9_14886=l9_14881;
int l9_14887=sc_CurveAtlasLayout_tmp;
int l9_14888=l9_14886;
float2 l9_14889=l9_14880;
bool l9_14890=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_14891=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_14892=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_14893=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_14894=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_14895=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_14896=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_14897=0.0;
bool l9_14898=l9_14895&&(!l9_14893);
float l9_14899=1.0;
float l9_14900=l9_14889.x;
int l9_14901=l9_14892.x;
if (l9_14901==1)
{
l9_14900=fract(l9_14900);
}
else
{
if (l9_14901==2)
{
float l9_14902=fract(l9_14900);
float l9_14903=l9_14900-l9_14902;
float l9_14904=step(0.25,fract(l9_14903*0.5));
l9_14900=mix(l9_14902,1.0-l9_14902,fast::clamp(l9_14904,0.0,1.0));
}
}
l9_14889.x=l9_14900;
float l9_14905=l9_14889.y;
int l9_14906=l9_14892.y;
if (l9_14906==1)
{
l9_14905=fract(l9_14905);
}
else
{
if (l9_14906==2)
{
float l9_14907=fract(l9_14905);
float l9_14908=l9_14905-l9_14907;
float l9_14909=step(0.25,fract(l9_14908*0.5));
l9_14905=mix(l9_14907,1.0-l9_14907,fast::clamp(l9_14909,0.0,1.0));
}
}
l9_14889.y=l9_14905;
if (l9_14893)
{
bool l9_14910=l9_14895;
bool l9_14911;
if (l9_14910)
{
l9_14911=l9_14892.x==3;
}
else
{
l9_14911=l9_14910;
}
float l9_14912=l9_14889.x;
float l9_14913=l9_14894.x;
float l9_14914=l9_14894.z;
bool l9_14915=l9_14911;
float l9_14916=l9_14899;
float l9_14917=fast::clamp(l9_14912,l9_14913,l9_14914);
float l9_14918=step(abs(l9_14912-l9_14917),9.9999997e-06);
l9_14916*=(l9_14918+((1.0-float(l9_14915))*(1.0-l9_14918)));
l9_14912=l9_14917;
l9_14889.x=l9_14912;
l9_14899=l9_14916;
bool l9_14919=l9_14895;
bool l9_14920;
if (l9_14919)
{
l9_14920=l9_14892.y==3;
}
else
{
l9_14920=l9_14919;
}
float l9_14921=l9_14889.y;
float l9_14922=l9_14894.y;
float l9_14923=l9_14894.w;
bool l9_14924=l9_14920;
float l9_14925=l9_14899;
float l9_14926=fast::clamp(l9_14921,l9_14922,l9_14923);
float l9_14927=step(abs(l9_14921-l9_14926),9.9999997e-06);
l9_14925*=(l9_14927+((1.0-float(l9_14924))*(1.0-l9_14927)));
l9_14921=l9_14926;
l9_14889.y=l9_14921;
l9_14899=l9_14925;
}
float2 l9_14928=l9_14889;
bool l9_14929=l9_14890;
float3x3 l9_14930=l9_14891;
if (l9_14929)
{
l9_14928=float2((l9_14930*float3(l9_14928,1.0)).xy);
}
float2 l9_14931=l9_14928;
l9_14889=l9_14931;
float l9_14932=l9_14889.x;
int l9_14933=l9_14892.x;
bool l9_14934=l9_14898;
float l9_14935=l9_14899;
if ((l9_14933==0)||(l9_14933==3))
{
float l9_14936=l9_14932;
float l9_14937=0.0;
float l9_14938=1.0;
bool l9_14939=l9_14934;
float l9_14940=l9_14935;
float l9_14941=fast::clamp(l9_14936,l9_14937,l9_14938);
float l9_14942=step(abs(l9_14936-l9_14941),9.9999997e-06);
l9_14940*=(l9_14942+((1.0-float(l9_14939))*(1.0-l9_14942)));
l9_14936=l9_14941;
l9_14932=l9_14936;
l9_14935=l9_14940;
}
l9_14889.x=l9_14932;
l9_14899=l9_14935;
float l9_14943=l9_14889.y;
int l9_14944=l9_14892.y;
bool l9_14945=l9_14898;
float l9_14946=l9_14899;
if ((l9_14944==0)||(l9_14944==3))
{
float l9_14947=l9_14943;
float l9_14948=0.0;
float l9_14949=1.0;
bool l9_14950=l9_14945;
float l9_14951=l9_14946;
float l9_14952=fast::clamp(l9_14947,l9_14948,l9_14949);
float l9_14953=step(abs(l9_14947-l9_14952),9.9999997e-06);
l9_14951*=(l9_14953+((1.0-float(l9_14950))*(1.0-l9_14953)));
l9_14947=l9_14952;
l9_14943=l9_14947;
l9_14946=l9_14951;
}
l9_14889.y=l9_14943;
l9_14899=l9_14946;
float2 l9_14954=l9_14889;
int l9_14955=l9_14887;
int l9_14956=l9_14888;
float l9_14957=l9_14897;
float2 l9_14958=l9_14954;
int l9_14959=l9_14955;
int l9_14960=l9_14956;
float3 l9_14961=float3(0.0);
if (l9_14959==0)
{
l9_14961=float3(l9_14958,0.0);
}
else
{
if (l9_14959==1)
{
l9_14961=float3(l9_14958.x,(l9_14958.y*0.5)+(0.5-(float(l9_14960)*0.5)),0.0);
}
else
{
l9_14961=float3(l9_14958,float(l9_14960));
}
}
float3 l9_14962=l9_14961;
float3 l9_14963=l9_14962;
float4 l9_14964=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_14963.xy,level(l9_14957));
float4 l9_14965=l9_14964;
if (l9_14895)
{
l9_14965=mix(l9_14896,l9_14965,float4(l9_14899));
}
float4 l9_14966=l9_14965;
l9_14875=l9_14966.x;
float l9_14967=l9_14875;
float l9_14968=l9_14967;
float l9_14969=l9_13916+N319_res;
float l9_14970=0.0;
float l9_14971=(*sc_set0.UserUniforms).Tweak_N297_curveData.x;
float l9_14972=(*sc_set0.UserUniforms).Tweak_N297_curveData.y;
float l9_14973=(*sc_set0.UserUniforms).Tweak_N297_curveData.z;
float l9_14974=(l9_14969-l9_14972)/(l9_14973-l9_14972);
float2 l9_14975=float2(l9_14974,l9_14971);
l9_14975=fast::clamp(l9_14975,float2(0.0),float2(1.0));
int l9_14976;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_14977=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_14977=0;
}
else
{
l9_14977=gl_InstanceIndex%2;
}
int l9_14978=l9_14977;
l9_14976=1-l9_14978;
}
else
{
int l9_14979=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_14979=0;
}
else
{
l9_14979=gl_InstanceIndex%2;
}
int l9_14980=l9_14979;
l9_14976=l9_14980;
}
int l9_14981=l9_14976;
int l9_14982=sc_CurveAtlasLayout_tmp;
int l9_14983=l9_14981;
float2 l9_14984=l9_14975;
bool l9_14985=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_14986=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_14987=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_14988=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_14989=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_14990=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_14991=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_14992=0.0;
bool l9_14993=l9_14990&&(!l9_14988);
float l9_14994=1.0;
float l9_14995=l9_14984.x;
int l9_14996=l9_14987.x;
if (l9_14996==1)
{
l9_14995=fract(l9_14995);
}
else
{
if (l9_14996==2)
{
float l9_14997=fract(l9_14995);
float l9_14998=l9_14995-l9_14997;
float l9_14999=step(0.25,fract(l9_14998*0.5));
l9_14995=mix(l9_14997,1.0-l9_14997,fast::clamp(l9_14999,0.0,1.0));
}
}
l9_14984.x=l9_14995;
float l9_15000=l9_14984.y;
int l9_15001=l9_14987.y;
if (l9_15001==1)
{
l9_15000=fract(l9_15000);
}
else
{
if (l9_15001==2)
{
float l9_15002=fract(l9_15000);
float l9_15003=l9_15000-l9_15002;
float l9_15004=step(0.25,fract(l9_15003*0.5));
l9_15000=mix(l9_15002,1.0-l9_15002,fast::clamp(l9_15004,0.0,1.0));
}
}
l9_14984.y=l9_15000;
if (l9_14988)
{
bool l9_15005=l9_14990;
bool l9_15006;
if (l9_15005)
{
l9_15006=l9_14987.x==3;
}
else
{
l9_15006=l9_15005;
}
float l9_15007=l9_14984.x;
float l9_15008=l9_14989.x;
float l9_15009=l9_14989.z;
bool l9_15010=l9_15006;
float l9_15011=l9_14994;
float l9_15012=fast::clamp(l9_15007,l9_15008,l9_15009);
float l9_15013=step(abs(l9_15007-l9_15012),9.9999997e-06);
l9_15011*=(l9_15013+((1.0-float(l9_15010))*(1.0-l9_15013)));
l9_15007=l9_15012;
l9_14984.x=l9_15007;
l9_14994=l9_15011;
bool l9_15014=l9_14990;
bool l9_15015;
if (l9_15014)
{
l9_15015=l9_14987.y==3;
}
else
{
l9_15015=l9_15014;
}
float l9_15016=l9_14984.y;
float l9_15017=l9_14989.y;
float l9_15018=l9_14989.w;
bool l9_15019=l9_15015;
float l9_15020=l9_14994;
float l9_15021=fast::clamp(l9_15016,l9_15017,l9_15018);
float l9_15022=step(abs(l9_15016-l9_15021),9.9999997e-06);
l9_15020*=(l9_15022+((1.0-float(l9_15019))*(1.0-l9_15022)));
l9_15016=l9_15021;
l9_14984.y=l9_15016;
l9_14994=l9_15020;
}
float2 l9_15023=l9_14984;
bool l9_15024=l9_14985;
float3x3 l9_15025=l9_14986;
if (l9_15024)
{
l9_15023=float2((l9_15025*float3(l9_15023,1.0)).xy);
}
float2 l9_15026=l9_15023;
l9_14984=l9_15026;
float l9_15027=l9_14984.x;
int l9_15028=l9_14987.x;
bool l9_15029=l9_14993;
float l9_15030=l9_14994;
if ((l9_15028==0)||(l9_15028==3))
{
float l9_15031=l9_15027;
float l9_15032=0.0;
float l9_15033=1.0;
bool l9_15034=l9_15029;
float l9_15035=l9_15030;
float l9_15036=fast::clamp(l9_15031,l9_15032,l9_15033);
float l9_15037=step(abs(l9_15031-l9_15036),9.9999997e-06);
l9_15035*=(l9_15037+((1.0-float(l9_15034))*(1.0-l9_15037)));
l9_15031=l9_15036;
l9_15027=l9_15031;
l9_15030=l9_15035;
}
l9_14984.x=l9_15027;
l9_14994=l9_15030;
float l9_15038=l9_14984.y;
int l9_15039=l9_14987.y;
bool l9_15040=l9_14993;
float l9_15041=l9_14994;
if ((l9_15039==0)||(l9_15039==3))
{
float l9_15042=l9_15038;
float l9_15043=0.0;
float l9_15044=1.0;
bool l9_15045=l9_15040;
float l9_15046=l9_15041;
float l9_15047=fast::clamp(l9_15042,l9_15043,l9_15044);
float l9_15048=step(abs(l9_15042-l9_15047),9.9999997e-06);
l9_15046*=(l9_15048+((1.0-float(l9_15045))*(1.0-l9_15048)));
l9_15042=l9_15047;
l9_15038=l9_15042;
l9_15041=l9_15046;
}
l9_14984.y=l9_15038;
l9_14994=l9_15041;
float2 l9_15049=l9_14984;
int l9_15050=l9_14982;
int l9_15051=l9_14983;
float l9_15052=l9_14992;
float2 l9_15053=l9_15049;
int l9_15054=l9_15050;
int l9_15055=l9_15051;
float3 l9_15056=float3(0.0);
if (l9_15054==0)
{
l9_15056=float3(l9_15053,0.0);
}
else
{
if (l9_15054==1)
{
l9_15056=float3(l9_15053.x,(l9_15053.y*0.5)+(0.5-(float(l9_15055)*0.5)),0.0);
}
else
{
l9_15056=float3(l9_15053,float(l9_15055));
}
}
float3 l9_15057=l9_15056;
float3 l9_15058=l9_15057;
float4 l9_15059=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_15058.xy,level(l9_15052));
float4 l9_15060=l9_15059;
if (l9_14990)
{
l9_15060=mix(l9_14991,l9_15060,float4(l9_14994));
}
float4 l9_15061=l9_15060;
l9_14970=l9_15061.x;
float l9_15062=l9_14970;
float3 l9_15063=float3(l9_14873,l9_14968,l9_15062);
l9_13920=normalize(l9_15063-l9_14778);
l9_13893=l9_13917;
l9_13894=l9_13918;
l9_13895=l9_13919;
l9_13896=l9_13920;
float l9_15064=l9_13901;
float l9_15065=0.0;
float l9_15066=(*sc_set0.UserUniforms).Tweak_N299_curveData.x;
float l9_15067=(*sc_set0.UserUniforms).Tweak_N299_curveData.y;
float l9_15068=(*sc_set0.UserUniforms).Tweak_N299_curveData.z;
float l9_15069=(l9_15064-l9_15067)/(l9_15068-l9_15067);
float2 l9_15070=float2(l9_15069,l9_15066);
l9_15070=fast::clamp(l9_15070,float2(0.0),float2(1.0));
int l9_15071;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_15072=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_15072=0;
}
else
{
l9_15072=gl_InstanceIndex%2;
}
int l9_15073=l9_15072;
l9_15071=1-l9_15073;
}
else
{
int l9_15074=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_15074=0;
}
else
{
l9_15074=gl_InstanceIndex%2;
}
int l9_15075=l9_15074;
l9_15071=l9_15075;
}
int l9_15076=l9_15071;
int l9_15077=sc_CurveAtlasLayout_tmp;
int l9_15078=l9_15076;
float2 l9_15079=l9_15070;
bool l9_15080=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_15081=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_15082=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_15083=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_15084=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_15085=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_15086=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_15087=0.0;
bool l9_15088=l9_15085&&(!l9_15083);
float l9_15089=1.0;
float l9_15090=l9_15079.x;
int l9_15091=l9_15082.x;
if (l9_15091==1)
{
l9_15090=fract(l9_15090);
}
else
{
if (l9_15091==2)
{
float l9_15092=fract(l9_15090);
float l9_15093=l9_15090-l9_15092;
float l9_15094=step(0.25,fract(l9_15093*0.5));
l9_15090=mix(l9_15092,1.0-l9_15092,fast::clamp(l9_15094,0.0,1.0));
}
}
l9_15079.x=l9_15090;
float l9_15095=l9_15079.y;
int l9_15096=l9_15082.y;
if (l9_15096==1)
{
l9_15095=fract(l9_15095);
}
else
{
if (l9_15096==2)
{
float l9_15097=fract(l9_15095);
float l9_15098=l9_15095-l9_15097;
float l9_15099=step(0.25,fract(l9_15098*0.5));
l9_15095=mix(l9_15097,1.0-l9_15097,fast::clamp(l9_15099,0.0,1.0));
}
}
l9_15079.y=l9_15095;
if (l9_15083)
{
bool l9_15100=l9_15085;
bool l9_15101;
if (l9_15100)
{
l9_15101=l9_15082.x==3;
}
else
{
l9_15101=l9_15100;
}
float l9_15102=l9_15079.x;
float l9_15103=l9_15084.x;
float l9_15104=l9_15084.z;
bool l9_15105=l9_15101;
float l9_15106=l9_15089;
float l9_15107=fast::clamp(l9_15102,l9_15103,l9_15104);
float l9_15108=step(abs(l9_15102-l9_15107),9.9999997e-06);
l9_15106*=(l9_15108+((1.0-float(l9_15105))*(1.0-l9_15108)));
l9_15102=l9_15107;
l9_15079.x=l9_15102;
l9_15089=l9_15106;
bool l9_15109=l9_15085;
bool l9_15110;
if (l9_15109)
{
l9_15110=l9_15082.y==3;
}
else
{
l9_15110=l9_15109;
}
float l9_15111=l9_15079.y;
float l9_15112=l9_15084.y;
float l9_15113=l9_15084.w;
bool l9_15114=l9_15110;
float l9_15115=l9_15089;
float l9_15116=fast::clamp(l9_15111,l9_15112,l9_15113);
float l9_15117=step(abs(l9_15111-l9_15116),9.9999997e-06);
l9_15115*=(l9_15117+((1.0-float(l9_15114))*(1.0-l9_15117)));
l9_15111=l9_15116;
l9_15079.y=l9_15111;
l9_15089=l9_15115;
}
float2 l9_15118=l9_15079;
bool l9_15119=l9_15080;
float3x3 l9_15120=l9_15081;
if (l9_15119)
{
l9_15118=float2((l9_15120*float3(l9_15118,1.0)).xy);
}
float2 l9_15121=l9_15118;
l9_15079=l9_15121;
float l9_15122=l9_15079.x;
int l9_15123=l9_15082.x;
bool l9_15124=l9_15088;
float l9_15125=l9_15089;
if ((l9_15123==0)||(l9_15123==3))
{
float l9_15126=l9_15122;
float l9_15127=0.0;
float l9_15128=1.0;
bool l9_15129=l9_15124;
float l9_15130=l9_15125;
float l9_15131=fast::clamp(l9_15126,l9_15127,l9_15128);
float l9_15132=step(abs(l9_15126-l9_15131),9.9999997e-06);
l9_15130*=(l9_15132+((1.0-float(l9_15129))*(1.0-l9_15132)));
l9_15126=l9_15131;
l9_15122=l9_15126;
l9_15125=l9_15130;
}
l9_15079.x=l9_15122;
l9_15089=l9_15125;
float l9_15133=l9_15079.y;
int l9_15134=l9_15082.y;
bool l9_15135=l9_15088;
float l9_15136=l9_15089;
if ((l9_15134==0)||(l9_15134==3))
{
float l9_15137=l9_15133;
float l9_15138=0.0;
float l9_15139=1.0;
bool l9_15140=l9_15135;
float l9_15141=l9_15136;
float l9_15142=fast::clamp(l9_15137,l9_15138,l9_15139);
float l9_15143=step(abs(l9_15137-l9_15142),9.9999997e-06);
l9_15141*=(l9_15143+((1.0-float(l9_15140))*(1.0-l9_15143)));
l9_15137=l9_15142;
l9_15133=l9_15137;
l9_15136=l9_15141;
}
l9_15079.y=l9_15133;
l9_15089=l9_15136;
float2 l9_15144=l9_15079;
int l9_15145=l9_15077;
int l9_15146=l9_15078;
float l9_15147=l9_15087;
float2 l9_15148=l9_15144;
int l9_15149=l9_15145;
int l9_15150=l9_15146;
float3 l9_15151=float3(0.0);
if (l9_15149==0)
{
l9_15151=float3(l9_15148,0.0);
}
else
{
if (l9_15149==1)
{
l9_15151=float3(l9_15148.x,(l9_15148.y*0.5)+(0.5-(float(l9_15150)*0.5)),0.0);
}
else
{
l9_15151=float3(l9_15148,float(l9_15150));
}
}
float3 l9_15152=l9_15151;
float3 l9_15153=l9_15152;
float4 l9_15154=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_15153.xy,level(l9_15147));
float4 l9_15155=l9_15154;
if (l9_15085)
{
l9_15155=mix(l9_15086,l9_15155,float4(l9_15089));
}
float4 l9_15156=l9_15155;
l9_15065=l9_15156.x;
float l9_15157=l9_15065;
float l9_15158=l9_15157;
float l9_15159;
if (N319_curvThickEnable)
{
l9_15159=N319_thicknessRad*l9_15158;
}
else
{
l9_15159=N319_thicknessRad;
}
float l9_15160=l9_15159;
float l9_15161=l9_13901;
float l9_15162=0.0;
float l9_15163=(*sc_set0.UserUniforms).Tweak_N293_curveData.x;
float l9_15164=(*sc_set0.UserUniforms).Tweak_N293_curveData.y;
float l9_15165=(*sc_set0.UserUniforms).Tweak_N293_curveData.z;
float l9_15166=(l9_15161-l9_15164)/(l9_15165-l9_15164);
float2 l9_15167=float2(l9_15166,l9_15163);
l9_15167=fast::clamp(l9_15167,float2(0.0),float2(1.0));
int l9_15168;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_15169=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_15169=0;
}
else
{
l9_15169=gl_InstanceIndex%2;
}
int l9_15170=l9_15169;
l9_15168=1-l9_15170;
}
else
{
int l9_15171=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_15171=0;
}
else
{
l9_15171=gl_InstanceIndex%2;
}
int l9_15172=l9_15171;
l9_15168=l9_15172;
}
int l9_15173=l9_15168;
int l9_15174=sc_CurveAtlasLayout_tmp;
int l9_15175=l9_15173;
float2 l9_15176=l9_15167;
bool l9_15177=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_15178=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_15179=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_15180=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_15181=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_15182=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_15183=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_15184=0.0;
bool l9_15185=l9_15182&&(!l9_15180);
float l9_15186=1.0;
float l9_15187=l9_15176.x;
int l9_15188=l9_15179.x;
if (l9_15188==1)
{
l9_15187=fract(l9_15187);
}
else
{
if (l9_15188==2)
{
float l9_15189=fract(l9_15187);
float l9_15190=l9_15187-l9_15189;
float l9_15191=step(0.25,fract(l9_15190*0.5));
l9_15187=mix(l9_15189,1.0-l9_15189,fast::clamp(l9_15191,0.0,1.0));
}
}
l9_15176.x=l9_15187;
float l9_15192=l9_15176.y;
int l9_15193=l9_15179.y;
if (l9_15193==1)
{
l9_15192=fract(l9_15192);
}
else
{
if (l9_15193==2)
{
float l9_15194=fract(l9_15192);
float l9_15195=l9_15192-l9_15194;
float l9_15196=step(0.25,fract(l9_15195*0.5));
l9_15192=mix(l9_15194,1.0-l9_15194,fast::clamp(l9_15196,0.0,1.0));
}
}
l9_15176.y=l9_15192;
if (l9_15180)
{
bool l9_15197=l9_15182;
bool l9_15198;
if (l9_15197)
{
l9_15198=l9_15179.x==3;
}
else
{
l9_15198=l9_15197;
}
float l9_15199=l9_15176.x;
float l9_15200=l9_15181.x;
float l9_15201=l9_15181.z;
bool l9_15202=l9_15198;
float l9_15203=l9_15186;
float l9_15204=fast::clamp(l9_15199,l9_15200,l9_15201);
float l9_15205=step(abs(l9_15199-l9_15204),9.9999997e-06);
l9_15203*=(l9_15205+((1.0-float(l9_15202))*(1.0-l9_15205)));
l9_15199=l9_15204;
l9_15176.x=l9_15199;
l9_15186=l9_15203;
bool l9_15206=l9_15182;
bool l9_15207;
if (l9_15206)
{
l9_15207=l9_15179.y==3;
}
else
{
l9_15207=l9_15206;
}
float l9_15208=l9_15176.y;
float l9_15209=l9_15181.y;
float l9_15210=l9_15181.w;
bool l9_15211=l9_15207;
float l9_15212=l9_15186;
float l9_15213=fast::clamp(l9_15208,l9_15209,l9_15210);
float l9_15214=step(abs(l9_15208-l9_15213),9.9999997e-06);
l9_15212*=(l9_15214+((1.0-float(l9_15211))*(1.0-l9_15214)));
l9_15208=l9_15213;
l9_15176.y=l9_15208;
l9_15186=l9_15212;
}
float2 l9_15215=l9_15176;
bool l9_15216=l9_15177;
float3x3 l9_15217=l9_15178;
if (l9_15216)
{
l9_15215=float2((l9_15217*float3(l9_15215,1.0)).xy);
}
float2 l9_15218=l9_15215;
l9_15176=l9_15218;
float l9_15219=l9_15176.x;
int l9_15220=l9_15179.x;
bool l9_15221=l9_15185;
float l9_15222=l9_15186;
if ((l9_15220==0)||(l9_15220==3))
{
float l9_15223=l9_15219;
float l9_15224=0.0;
float l9_15225=1.0;
bool l9_15226=l9_15221;
float l9_15227=l9_15222;
float l9_15228=fast::clamp(l9_15223,l9_15224,l9_15225);
float l9_15229=step(abs(l9_15223-l9_15228),9.9999997e-06);
l9_15227*=(l9_15229+((1.0-float(l9_15226))*(1.0-l9_15229)));
l9_15223=l9_15228;
l9_15219=l9_15223;
l9_15222=l9_15227;
}
l9_15176.x=l9_15219;
l9_15186=l9_15222;
float l9_15230=l9_15176.y;
int l9_15231=l9_15179.y;
bool l9_15232=l9_15185;
float l9_15233=l9_15186;
if ((l9_15231==0)||(l9_15231==3))
{
float l9_15234=l9_15230;
float l9_15235=0.0;
float l9_15236=1.0;
bool l9_15237=l9_15232;
float l9_15238=l9_15233;
float l9_15239=fast::clamp(l9_15234,l9_15235,l9_15236);
float l9_15240=step(abs(l9_15234-l9_15239),9.9999997e-06);
l9_15238*=(l9_15240+((1.0-float(l9_15237))*(1.0-l9_15240)));
l9_15234=l9_15239;
l9_15230=l9_15234;
l9_15233=l9_15238;
}
l9_15176.y=l9_15230;
l9_15186=l9_15233;
float2 l9_15241=l9_15176;
int l9_15242=l9_15174;
int l9_15243=l9_15175;
float l9_15244=l9_15184;
float2 l9_15245=l9_15241;
int l9_15246=l9_15242;
int l9_15247=l9_15243;
float3 l9_15248=float3(0.0);
if (l9_15246==0)
{
l9_15248=float3(l9_15245,0.0);
}
else
{
if (l9_15246==1)
{
l9_15248=float3(l9_15245.x,(l9_15245.y*0.5)+(0.5-(float(l9_15247)*0.5)),0.0);
}
else
{
l9_15248=float3(l9_15245,float(l9_15247));
}
}
float3 l9_15249=l9_15248;
float3 l9_15250=l9_15249;
float4 l9_15251=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_15250.xy,level(l9_15244));
float4 l9_15252=l9_15251;
if (l9_15182)
{
l9_15252=mix(l9_15183,l9_15252,float4(l9_15186));
}
float4 l9_15253=l9_15252;
l9_15162=l9_15253.x;
float l9_15254=l9_15162;
float l9_15255=l9_15254;
float l9_15256=l9_13901;
float l9_15257=0.0;
float l9_15258=(*sc_set0.UserUniforms).Tweak_N305_curveData.x;
float l9_15259=(*sc_set0.UserUniforms).Tweak_N305_curveData.y;
float l9_15260=(*sc_set0.UserUniforms).Tweak_N305_curveData.z;
float l9_15261=(l9_15256-l9_15259)/(l9_15260-l9_15259);
float2 l9_15262=float2(l9_15261,l9_15258);
l9_15262=fast::clamp(l9_15262,float2(0.0),float2(1.0));
int l9_15263;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_15264=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_15264=0;
}
else
{
l9_15264=gl_InstanceIndex%2;
}
int l9_15265=l9_15264;
l9_15263=1-l9_15265;
}
else
{
int l9_15266=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_15266=0;
}
else
{
l9_15266=gl_InstanceIndex%2;
}
int l9_15267=l9_15266;
l9_15263=l9_15267;
}
int l9_15268=l9_15263;
int l9_15269=sc_CurveAtlasLayout_tmp;
int l9_15270=l9_15268;
float2 l9_15271=l9_15262;
bool l9_15272=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_15273=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_15274=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_15275=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_15276=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_15277=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_15278=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_15279=0.0;
bool l9_15280=l9_15277&&(!l9_15275);
float l9_15281=1.0;
float l9_15282=l9_15271.x;
int l9_15283=l9_15274.x;
if (l9_15283==1)
{
l9_15282=fract(l9_15282);
}
else
{
if (l9_15283==2)
{
float l9_15284=fract(l9_15282);
float l9_15285=l9_15282-l9_15284;
float l9_15286=step(0.25,fract(l9_15285*0.5));
l9_15282=mix(l9_15284,1.0-l9_15284,fast::clamp(l9_15286,0.0,1.0));
}
}
l9_15271.x=l9_15282;
float l9_15287=l9_15271.y;
int l9_15288=l9_15274.y;
if (l9_15288==1)
{
l9_15287=fract(l9_15287);
}
else
{
if (l9_15288==2)
{
float l9_15289=fract(l9_15287);
float l9_15290=l9_15287-l9_15289;
float l9_15291=step(0.25,fract(l9_15290*0.5));
l9_15287=mix(l9_15289,1.0-l9_15289,fast::clamp(l9_15291,0.0,1.0));
}
}
l9_15271.y=l9_15287;
if (l9_15275)
{
bool l9_15292=l9_15277;
bool l9_15293;
if (l9_15292)
{
l9_15293=l9_15274.x==3;
}
else
{
l9_15293=l9_15292;
}
float l9_15294=l9_15271.x;
float l9_15295=l9_15276.x;
float l9_15296=l9_15276.z;
bool l9_15297=l9_15293;
float l9_15298=l9_15281;
float l9_15299=fast::clamp(l9_15294,l9_15295,l9_15296);
float l9_15300=step(abs(l9_15294-l9_15299),9.9999997e-06);
l9_15298*=(l9_15300+((1.0-float(l9_15297))*(1.0-l9_15300)));
l9_15294=l9_15299;
l9_15271.x=l9_15294;
l9_15281=l9_15298;
bool l9_15301=l9_15277;
bool l9_15302;
if (l9_15301)
{
l9_15302=l9_15274.y==3;
}
else
{
l9_15302=l9_15301;
}
float l9_15303=l9_15271.y;
float l9_15304=l9_15276.y;
float l9_15305=l9_15276.w;
bool l9_15306=l9_15302;
float l9_15307=l9_15281;
float l9_15308=fast::clamp(l9_15303,l9_15304,l9_15305);
float l9_15309=step(abs(l9_15303-l9_15308),9.9999997e-06);
l9_15307*=(l9_15309+((1.0-float(l9_15306))*(1.0-l9_15309)));
l9_15303=l9_15308;
l9_15271.y=l9_15303;
l9_15281=l9_15307;
}
float2 l9_15310=l9_15271;
bool l9_15311=l9_15272;
float3x3 l9_15312=l9_15273;
if (l9_15311)
{
l9_15310=float2((l9_15312*float3(l9_15310,1.0)).xy);
}
float2 l9_15313=l9_15310;
l9_15271=l9_15313;
float l9_15314=l9_15271.x;
int l9_15315=l9_15274.x;
bool l9_15316=l9_15280;
float l9_15317=l9_15281;
if ((l9_15315==0)||(l9_15315==3))
{
float l9_15318=l9_15314;
float l9_15319=0.0;
float l9_15320=1.0;
bool l9_15321=l9_15316;
float l9_15322=l9_15317;
float l9_15323=fast::clamp(l9_15318,l9_15319,l9_15320);
float l9_15324=step(abs(l9_15318-l9_15323),9.9999997e-06);
l9_15322*=(l9_15324+((1.0-float(l9_15321))*(1.0-l9_15324)));
l9_15318=l9_15323;
l9_15314=l9_15318;
l9_15317=l9_15322;
}
l9_15271.x=l9_15314;
l9_15281=l9_15317;
float l9_15325=l9_15271.y;
int l9_15326=l9_15274.y;
bool l9_15327=l9_15280;
float l9_15328=l9_15281;
if ((l9_15326==0)||(l9_15326==3))
{
float l9_15329=l9_15325;
float l9_15330=0.0;
float l9_15331=1.0;
bool l9_15332=l9_15327;
float l9_15333=l9_15328;
float l9_15334=fast::clamp(l9_15329,l9_15330,l9_15331);
float l9_15335=step(abs(l9_15329-l9_15334),9.9999997e-06);
l9_15333*=(l9_15335+((1.0-float(l9_15332))*(1.0-l9_15335)));
l9_15329=l9_15334;
l9_15325=l9_15329;
l9_15328=l9_15333;
}
l9_15271.y=l9_15325;
l9_15281=l9_15328;
float2 l9_15336=l9_15271;
int l9_15337=l9_15269;
int l9_15338=l9_15270;
float l9_15339=l9_15279;
float2 l9_15340=l9_15336;
int l9_15341=l9_15337;
int l9_15342=l9_15338;
float3 l9_15343=float3(0.0);
if (l9_15341==0)
{
l9_15343=float3(l9_15340,0.0);
}
else
{
if (l9_15341==1)
{
l9_15343=float3(l9_15340.x,(l9_15340.y*0.5)+(0.5-(float(l9_15342)*0.5)),0.0);
}
else
{
l9_15343=float3(l9_15340,float(l9_15342));
}
}
float3 l9_15344=l9_15343;
float3 l9_15345=l9_15344;
float4 l9_15346=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_15345.xy,level(l9_15339));
float4 l9_15347=l9_15346;
if (l9_15277)
{
l9_15347=mix(l9_15278,l9_15347,float4(l9_15281));
}
float4 l9_15348=l9_15347;
l9_15257=l9_15348.x;
float l9_15349=l9_15257;
float l9_15350=l9_15349;
float l9_15351=l9_13901;
float l9_15352=0.0;
float l9_15353=(*sc_set0.UserUniforms).Tweak_N297_curveData.x;
float l9_15354=(*sc_set0.UserUniforms).Tweak_N297_curveData.y;
float l9_15355=(*sc_set0.UserUniforms).Tweak_N297_curveData.z;
float l9_15356=(l9_15351-l9_15354)/(l9_15355-l9_15354);
float2 l9_15357=float2(l9_15356,l9_15353);
l9_15357=fast::clamp(l9_15357,float2(0.0),float2(1.0));
int l9_15358;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_15359=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_15359=0;
}
else
{
l9_15359=gl_InstanceIndex%2;
}
int l9_15360=l9_15359;
l9_15358=1-l9_15360;
}
else
{
int l9_15361=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_15361=0;
}
else
{
l9_15361=gl_InstanceIndex%2;
}
int l9_15362=l9_15361;
l9_15358=l9_15362;
}
int l9_15363=l9_15358;
int l9_15364=sc_CurveAtlasLayout_tmp;
int l9_15365=l9_15363;
float2 l9_15366=l9_15357;
bool l9_15367=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_15368=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_15369=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_15370=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_15371=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_15372=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_15373=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_15374=0.0;
bool l9_15375=l9_15372&&(!l9_15370);
float l9_15376=1.0;
float l9_15377=l9_15366.x;
int l9_15378=l9_15369.x;
if (l9_15378==1)
{
l9_15377=fract(l9_15377);
}
else
{
if (l9_15378==2)
{
float l9_15379=fract(l9_15377);
float l9_15380=l9_15377-l9_15379;
float l9_15381=step(0.25,fract(l9_15380*0.5));
l9_15377=mix(l9_15379,1.0-l9_15379,fast::clamp(l9_15381,0.0,1.0));
}
}
l9_15366.x=l9_15377;
float l9_15382=l9_15366.y;
int l9_15383=l9_15369.y;
if (l9_15383==1)
{
l9_15382=fract(l9_15382);
}
else
{
if (l9_15383==2)
{
float l9_15384=fract(l9_15382);
float l9_15385=l9_15382-l9_15384;
float l9_15386=step(0.25,fract(l9_15385*0.5));
l9_15382=mix(l9_15384,1.0-l9_15384,fast::clamp(l9_15386,0.0,1.0));
}
}
l9_15366.y=l9_15382;
if (l9_15370)
{
bool l9_15387=l9_15372;
bool l9_15388;
if (l9_15387)
{
l9_15388=l9_15369.x==3;
}
else
{
l9_15388=l9_15387;
}
float l9_15389=l9_15366.x;
float l9_15390=l9_15371.x;
float l9_15391=l9_15371.z;
bool l9_15392=l9_15388;
float l9_15393=l9_15376;
float l9_15394=fast::clamp(l9_15389,l9_15390,l9_15391);
float l9_15395=step(abs(l9_15389-l9_15394),9.9999997e-06);
l9_15393*=(l9_15395+((1.0-float(l9_15392))*(1.0-l9_15395)));
l9_15389=l9_15394;
l9_15366.x=l9_15389;
l9_15376=l9_15393;
bool l9_15396=l9_15372;
bool l9_15397;
if (l9_15396)
{
l9_15397=l9_15369.y==3;
}
else
{
l9_15397=l9_15396;
}
float l9_15398=l9_15366.y;
float l9_15399=l9_15371.y;
float l9_15400=l9_15371.w;
bool l9_15401=l9_15397;
float l9_15402=l9_15376;
float l9_15403=fast::clamp(l9_15398,l9_15399,l9_15400);
float l9_15404=step(abs(l9_15398-l9_15403),9.9999997e-06);
l9_15402*=(l9_15404+((1.0-float(l9_15401))*(1.0-l9_15404)));
l9_15398=l9_15403;
l9_15366.y=l9_15398;
l9_15376=l9_15402;
}
float2 l9_15405=l9_15366;
bool l9_15406=l9_15367;
float3x3 l9_15407=l9_15368;
if (l9_15406)
{
l9_15405=float2((l9_15407*float3(l9_15405,1.0)).xy);
}
float2 l9_15408=l9_15405;
l9_15366=l9_15408;
float l9_15409=l9_15366.x;
int l9_15410=l9_15369.x;
bool l9_15411=l9_15375;
float l9_15412=l9_15376;
if ((l9_15410==0)||(l9_15410==3))
{
float l9_15413=l9_15409;
float l9_15414=0.0;
float l9_15415=1.0;
bool l9_15416=l9_15411;
float l9_15417=l9_15412;
float l9_15418=fast::clamp(l9_15413,l9_15414,l9_15415);
float l9_15419=step(abs(l9_15413-l9_15418),9.9999997e-06);
l9_15417*=(l9_15419+((1.0-float(l9_15416))*(1.0-l9_15419)));
l9_15413=l9_15418;
l9_15409=l9_15413;
l9_15412=l9_15417;
}
l9_15366.x=l9_15409;
l9_15376=l9_15412;
float l9_15420=l9_15366.y;
int l9_15421=l9_15369.y;
bool l9_15422=l9_15375;
float l9_15423=l9_15376;
if ((l9_15421==0)||(l9_15421==3))
{
float l9_15424=l9_15420;
float l9_15425=0.0;
float l9_15426=1.0;
bool l9_15427=l9_15422;
float l9_15428=l9_15423;
float l9_15429=fast::clamp(l9_15424,l9_15425,l9_15426);
float l9_15430=step(abs(l9_15424-l9_15429),9.9999997e-06);
l9_15428*=(l9_15430+((1.0-float(l9_15427))*(1.0-l9_15430)));
l9_15424=l9_15429;
l9_15420=l9_15424;
l9_15423=l9_15428;
}
l9_15366.y=l9_15420;
l9_15376=l9_15423;
float2 l9_15431=l9_15366;
int l9_15432=l9_15364;
int l9_15433=l9_15365;
float l9_15434=l9_15374;
float2 l9_15435=l9_15431;
int l9_15436=l9_15432;
int l9_15437=l9_15433;
float3 l9_15438=float3(0.0);
if (l9_15436==0)
{
l9_15438=float3(l9_15435,0.0);
}
else
{
if (l9_15436==1)
{
l9_15438=float3(l9_15435.x,(l9_15435.y*0.5)+(0.5-(float(l9_15437)*0.5)),0.0);
}
else
{
l9_15438=float3(l9_15435,float(l9_15437));
}
}
float3 l9_15439=l9_15438;
float3 l9_15440=l9_15439;
float4 l9_15441=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_15440.xy,level(l9_15434));
float4 l9_15442=l9_15441;
if (l9_15372)
{
l9_15442=mix(l9_15373,l9_15442,float4(l9_15376));
}
float4 l9_15443=l9_15442;
l9_15352=l9_15443.x;
float l9_15444=l9_15352;
float3 l9_15445=float3(l9_15255,l9_15350,l9_15444)*N319_scaleXYZ;
float3 l9_15446=mix(l9_15445+(((l9_13894*cos(l9_13904))+(l9_13895*sin(l9_13904)))*l9_15160),l9_15445,float3(l9_13915*N319_VolumeFill));
float3 l9_15447;
if (l9_13901>1.0)
{
l9_15447=l9_15446/float3(0.0);
}
else
{
l9_15447=l9_15446;
}
l9_15446=l9_15447;
tempGlobals.N319_curveDirection=l9_13896;
N319_Result=l9_15446*N319_Scale;
l9_13892=N319_Result;
l9_13879=l9_13892;
l9_13228=l9_13879;
l9_13232=l9_13228;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==7)
{
float l9_15448=0.0;
float l9_15449=float((*sc_set0.UserUniforms).Tweak_N271);
l9_15448=l9_15449;
float l9_15450=0.0;
float l9_15451=(*sc_set0.UserUniforms).Tweak_N273;
l9_15450=l9_15451;
float2 l9_15452=float2(0.0);
float2 l9_15453=(*sc_set0.UserUniforms).Tweak_N270;
l9_15452=l9_15453;
float2 l9_15454=float2(0.0);
float2 l9_15455=(*sc_set0.UserUniforms).Tweak_N272;
l9_15454=l9_15455;
float l9_15456=0.0;
float l9_15457=(*sc_set0.UserUniforms).Tweak_N269;
l9_15456=l9_15457;
float l9_15458=0.0;
float l9_15459=(*sc_set0.UserUniforms).Tweak_N275;
l9_15458=l9_15459;
float l9_15460=0.0;
float l9_15461=float((*sc_set0.UserUniforms).Tweak_N161);
l9_15460=l9_15461;
float3 l9_15462=float3(0.0);
float l9_15463=l9_15448;
float l9_15464=l9_15450;
float2 l9_15465=l9_15452;
float2 l9_15466=l9_15454;
float l9_15467=l9_15456;
float l9_15468=l9_15458;
float l9_15469=l9_15460;
ssGlobals l9_15470=l9_13231;
tempGlobals=l9_15470;
float3 l9_15471=float3(0.0);
N267_Seed=int(l9_15463);
N267_Depth=l9_15464;
N267_Expand=l9_15465;
N267_Offset=l9_15466;
N267_Thickness=l9_15467;
N267_Push=l9_15468;
N267_pushMetod=int(l9_15469);
int l9_15472=0;
l9_15472=ssInstanceID;
int l9_15473=l9_15472;
float l9_15474=float(l9_15473+N267_Seed);
int l9_15475=int(l9_15474);
int l9_15476=l9_15475^(l9_15475*15299);
int l9_15477=l9_15476;
int l9_15478=l9_15477;
int l9_15479=((l9_15478*((l9_15478*1471343)+101146501))+1559861749)&2147483647;
int l9_15480=l9_15479;
int l9_15481=l9_15477*1399;
int l9_15482=((l9_15481*((l9_15481*1471343)+101146501))+1559861749)&2147483647;
int l9_15483=l9_15482;
int l9_15484=l9_15480;
float l9_15485=float(l9_15484)*4.6566129e-10;
int l9_15486=l9_15483;
float l9_15487=float(l9_15486)*4.6566129e-10;
float2 l9_15488=float2(l9_15485,l9_15487);
float2 l9_15489=l9_15488;
float2 l9_15490=l9_15489;
int l9_15491=0;
l9_15491=ssInstanceID;
int l9_15492=l9_15491;
float l9_15493=float(l9_15492);
int l9_15494=int(l9_15493);
int l9_15495=l9_15494^(l9_15494*15299);
int l9_15496=l9_15495;
int l9_15497=l9_15496;
int l9_15498=((l9_15497*((l9_15497*1471343)+101146501))+1559861749)&2147483647;
int l9_15499=l9_15498;
float l9_15500=float(l9_15499)*4.6566129e-10;
float l9_15501=l9_15500;
float l9_15502=l9_15501;
float l9_15503=l9_15502;
float2 l9_15504=(float2(0.5)-l9_15490)+N267_Offset;
float2 l9_15505=fast::clamp(normalize(l9_15504),float2(-0.5),float2(0.5));
float l9_15506=distance(l9_15504,float2(0.0));
float l9_15507=0.0+(((l9_15506-(N267_Push-0.1))*1.0)/((N267_Push-(N267_Push-0.1))+1e-06));
if (N267_pushMetod==1)
{
l9_15504=mix(l9_15505,l9_15504,float2(fast::clamp(l9_15507,0.0,1.0)));
}
else
{
if (N267_pushMetod==2)
{
l9_15504=mix(l9_15504,l9_15505,float2(N267_Push));
}
}
float l9_15508=(*sc_set0.UserUniforms).sc_Camera.aspect;
l9_15504.x*=l9_15508;
float l9_15509=tempGlobals.CameraFOV;
l9_15504*=(tan(radians(l9_15509)*0.5)*2.0);
float l9_15510=(N267_Depth*((l9_15503-0.5)*2.0))*N267_Thickness;
l9_15504*=(N267_Depth+l9_15510);
float3 l9_15511=float3(l9_15504*N267_Expand,(N267_Depth+l9_15510)*(-1.0));
N267_Result=l9_15511;
l9_15471=N267_Result;
l9_15462=l9_15471;
l9_13229=l9_15462;
l9_13232=l9_13229;
}
else
{
l9_13232=l9_13230;
}
}
}
}
}
}
}
}
l9_13221=l9_13232;
l9_13220=l9_13221;
float3 l9_15512=l9_13220;
N111_spawnLocation=l9_15512;
float3 l9_15513=float3(0.0);
float3 l9_15514=float3(0.0);
float3 l9_15515=(*sc_set0.UserUniforms).spawnBox;
l9_15514=l9_15515;
l9_15513=l9_15514;
float3 l9_15516=l9_15513;
N111_spawnBox=l9_15516;
float3 l9_15517=float3(0.0);
float3 l9_15518=float3(0.0);
float3 l9_15519=(*sc_set0.UserUniforms).spawnSphere;
l9_15518=l9_15519;
l9_15517=l9_15518;
float3 l9_15520=l9_15517;
N111_spawnSphere=l9_15520;
float3 l9_15521=float3(0.0);
float3 l9_15522=float3(0.0);
float3 l9_15523=(*sc_set0.UserUniforms).noiseMult;
l9_15522=l9_15523;
l9_15521=l9_15522;
float3 l9_15524=l9_15521;
N111_noiseMult=l9_15524;
float3 l9_15525=float3(0.0);
float3 l9_15526=float3(0.0);
float3 l9_15527=(*sc_set0.UserUniforms).noiseFrequency;
l9_15526=l9_15527;
l9_15525=l9_15526;
float3 l9_15528=l9_15525;
N111_noiseFrequency=l9_15528;
float3 l9_15529=float3(0.0);
float3 l9_15530=float3(0.0);
float3 l9_15531=(*sc_set0.UserUniforms).sNoiseMult;
l9_15530=l9_15531;
l9_15529=l9_15530;
float3 l9_15532=l9_15529;
N111_sNoiseMult=l9_15532;
float3 l9_15533=float3(0.0);
float3 l9_15534=float3(0.0);
float3 l9_15535=(*sc_set0.UserUniforms).sNoiseFrequency;
l9_15534=l9_15535;
l9_15533=l9_15534;
float3 l9_15536=l9_15533;
N111_sNoiseFrequency=l9_15536;
float3 l9_15537=float3(0.0);
float3 l9_15538=float3(0.0);
float3 l9_15539=(*sc_set0.UserUniforms).velocityMin;
l9_15538=l9_15539;
l9_15537=l9_15538;
float3 l9_15540=l9_15537;
N111_velocityMin=l9_15540;
float3 l9_15541=float3(0.0);
float3 l9_15542=float3(0.0);
float3 l9_15543=(*sc_set0.UserUniforms).velocityMax;
l9_15542=l9_15543;
l9_15541=l9_15542;
float3 l9_15544=l9_15541;
N111_velocityMax=l9_15544;
float3 l9_15545=float3(0.0);
float3 l9_15546=float3(0.0);
float3 l9_15547=(*sc_set0.UserUniforms).velocityDrag;
l9_15546=l9_15547;
l9_15545=l9_15546;
float3 l9_15548=l9_15545;
N111_velocityDrag=l9_15548;
float2 l9_15549=float2(0.0);
float2 l9_15550=float2(0.0);
float2 l9_15551=(*sc_set0.UserUniforms).sizeStart;
l9_15550=l9_15551;
l9_15549=l9_15550;
float2 l9_15552=l9_15549;
N111_sizeStart=l9_15552;
float2 l9_15553=float2(0.0);
float2 l9_15554=float2(0.0);
float2 l9_15555=(*sc_set0.UserUniforms).sizeEnd;
l9_15554=l9_15555;
l9_15553=l9_15554;
float2 l9_15556=l9_15553;
N111_sizeEnd=l9_15556;
float2 l9_15557=float2(0.0);
float2 l9_15558=float2(0.0);
float2 l9_15559=(*sc_set0.UserUniforms).sizeStartMax;
l9_15558=l9_15559;
l9_15557=l9_15558;
float2 l9_15560=l9_15557;
N111_sizeStartMax=l9_15560;
float2 l9_15561=float2(0.0);
float2 l9_15562=float2(0.0);
float2 l9_15563=(*sc_set0.UserUniforms).sizeEndMax;
l9_15562=l9_15563;
l9_15561=l9_15562;
float2 l9_15564=l9_15561;
N111_sizeEndMax=l9_15564;
float3 l9_15565=float3(0.0);
float3 l9_15566=float3(0.0);
float3 l9_15567=(*sc_set0.UserUniforms).sizeStart3D;
l9_15566=l9_15567;
l9_15565=l9_15566;
float3 l9_15568=l9_15565;
N111_sizeStart3D=l9_15568;
float3 l9_15569=float3(0.0);
float3 l9_15570=float3(0.0);
float3 l9_15571=(*sc_set0.UserUniforms).sizeEnd3D;
l9_15570=l9_15571;
l9_15569=l9_15570;
float3 l9_15572=l9_15569;
N111_sizeEnd3D=l9_15572;
float3 l9_15573=float3(0.0);
float3 l9_15574=float3(0.0);
float3 l9_15575=(*sc_set0.UserUniforms).sizeStartMax3D;
l9_15574=l9_15575;
l9_15573=l9_15574;
float3 l9_15576=l9_15573;
N111_sizeStartMax3D=l9_15576;
float3 l9_15577=float3(0.0);
float3 l9_15578=float3(0.0);
float3 l9_15579=(*sc_set0.UserUniforms).sizeEndMax3D;
l9_15578=l9_15579;
l9_15577=l9_15578;
float3 l9_15580=l9_15577;
N111_sizeEndMax3D=l9_15580;
float l9_15581=0.0;
float l9_15582=0.0;
float l9_15583=(*sc_set0.UserUniforms).sizeSpeed;
l9_15582=l9_15583;
l9_15581=l9_15582;
float l9_15584=l9_15581;
N111_sizeSpeed=l9_15584;
float l9_15585=0.0;
float l9_15586=0.0;
float l9_15587=(*sc_set0.UserUniforms).gravity;
l9_15586=l9_15587;
l9_15585=l9_15586;
float l9_15588=l9_15585;
N111_gravity=l9_15588;
float3 l9_15589=float3(0.0);
float3 l9_15590=float3(0.0);
float3 l9_15591=(*sc_set0.UserUniforms).localForce;
l9_15590=l9_15591;
l9_15589=l9_15590;
float3 l9_15592=l9_15589;
N111_localForce=l9_15592;
float3 l9_15593=float3(0.0);
l9_15593=tempGlobals.N111_ParticleSpawnPosition;
float l9_15594=0.0;
float l9_15595=(*sc_set0.UserUniforms).timeGlobal;
l9_15594=l9_15595;
float l9_15596=0.0;
float l9_15597=(*sc_set0.UserUniforms).externalTimeInput;
l9_15596=l9_15597;
float l9_15598=0.0;
float l9_15599=(*sc_set0.UserUniforms).externalSeed;
l9_15598=l9_15599;
float l9_15600=0.0;
float l9_15601=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_15600=l9_15601;
float2 l9_15602=float2(0.0);
float2 l9_15603=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_15602=l9_15603;
float l9_15604=0.0;
float l9_15605=(*sc_set0.UserUniforms).spawnDuration;
l9_15604=l9_15605;
float l9_15606=0.0;
float l9_15607;
if ((int(TRAILS_tmp)!=0))
{
l9_15607=1.001;
}
else
{
l9_15607=0.001;
}
l9_15607-=0.001;
l9_15606=l9_15607;
float l9_15608=0.0;
float l9_15609=(*sc_set0.UserUniforms).trailLength;
l9_15608=l9_15609;
float4 l9_15610=float4(0.0);
l9_15610=tempGlobals.VertexColor;
float l9_15611=0.0;
l9_15611=l9_15610.x;
float l9_15612=0.0;
float l9_15613=l9_15606;
bool l9_15614=(l9_15613*1.0)!=0.0;
bool l9_15615;
if (l9_15614)
{
l9_15615=(l9_15611*1.0)!=0.0;
}
else
{
l9_15615=l9_15614;
}
l9_15612=float(l9_15615);
float3 l9_15616=float3(0.0);
float l9_15617=0.0;
float l9_15618=l9_15594;
float l9_15619=l9_15596;
float l9_15620=l9_15598;
float l9_15621=l9_15600;
float2 l9_15622=l9_15602;
float l9_15623=l9_15604;
float l9_15624=l9_15608;
float l9_15625=l9_15612;
ssGlobals l9_15626=tempGlobals;
tempGlobals=l9_15626;
float3 l9_15627=float3(0.0);
float l9_15628=0.0;
N181_timeGlobal=l9_15618;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_15619;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_15620;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_15621;
N181_lifeTimeMinMax=l9_15622;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_15623;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_15624;
N181_isTrailCondition=l9_15625!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_15629=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_15630=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_15629=length(float4(1.0)*l9_15630);
}
N181_globalSeed=N181_externalSeed+l9_15629;
int l9_15631=0;
l9_15631=ssInstanceID;
int l9_15632=l9_15631;
float l9_15633=float(l9_15632);
int l9_15634=int(l9_15633);
int l9_15635=l9_15634^(l9_15634*15299);
int l9_15636=l9_15635;
int l9_15637=l9_15636;
int l9_15638=((l9_15637*((l9_15637*1471343)+101146501))+1559861749)&2147483647;
int l9_15639=l9_15638;
int l9_15640=l9_15636*1399;
int l9_15641=((l9_15640*((l9_15640*1471343)+101146501))+1559861749)&2147483647;
int l9_15642=l9_15641;
int l9_15643=l9_15636*7177;
int l9_15644=((l9_15643*((l9_15643*1471343)+101146501))+1559861749)&2147483647;
int l9_15645=l9_15644;
int l9_15646=l9_15639;
float l9_15647=float(l9_15646)*4.6566129e-10;
int l9_15648=l9_15642;
float l9_15649=float(l9_15648)*4.6566129e-10;
int l9_15650=l9_15645;
float l9_15651=float(l9_15650)*4.6566129e-10;
float3 l9_15652=float3(l9_15647,l9_15649,l9_15651);
float3 l9_15653=l9_15652;
N181_particleSeed=l9_15653;
float l9_15654=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_15655;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_15655=N181_lifeTimeMinMax;
}
else
{
l9_15655=float2(N181_lifeTimeConstant);
}
float2 l9_15656=l9_15655;
float l9_15657=fast::max(l9_15656.x,0.0099999998);
float l9_15658=fast::max(l9_15656.y,0.0099999998);
float l9_15659=tempGlobals.gTimeElapsed;
float l9_15660=l9_15659;
if (N181_ENABLE_EXTERNALTIME)
{
l9_15660=N181_externalTime;
}
float l9_15661=l9_15660;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_15661=N181_timeGlobal*l9_15660;
}
else
{
float l9_15662=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_15662=N181_trailLength;
}
}
float l9_15663=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_15664=0.0;
float l9_15665;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_15665=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_15665=0.0;
}
l9_15664=l9_15665;
float l9_15666=l9_15664;
int l9_15667=0;
l9_15667=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_15668=l9_15667;
l9_15663=fast::max(l9_15666*(1.0-(1.0/float(l9_15668))),0.0);
}
else
{
l9_15663=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_15669=fract(((l9_15660*N181_timeGlobal)*(1.0/(l9_15656.y+l9_15662)))+l9_15663);
l9_15661=l9_15669*(l9_15656.y+l9_15662);
}
float l9_15670=mix(l9_15661/l9_15657,l9_15661/l9_15658,l9_15654);
float l9_15671=fast::clamp(l9_15670,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_15661,l9_15671);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_15672=tempGlobals.Surface_UVCoord0;
l9_15661-=(l9_15672.y*N181_trailLength);
l9_15670=mix(l9_15661/l9_15657,l9_15661/l9_15658,l9_15654);
l9_15671=fast::clamp(l9_15670,0.0,1.0);
}
}
float l9_15673=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_15660-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_15673=1.0;
}
}
}
float l9_15674=l9_15670+l9_15673;
N181_particleAlive=1.0;
if ((l9_15674>0.99989998)||(l9_15661<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_15660*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_15656,l9_15661,l9_15671);
l9_15627=N181_particleSeed;
l9_15628=N181_isTrail;
l9_15616=l9_15627;
l9_15617=l9_15628;
float l9_15675=0.0;
float l9_15676=(*sc_set0.UserUniforms).attractRepelForceStrength;
l9_15675=l9_15676;
float3 l9_15677=float3(0.0);
float3 l9_15678=(*sc_set0.UserUniforms).customForceOrigin;
l9_15677=l9_15678;
float3 l9_15679=l9_15593;
float3 l9_15680=l9_15616;
float l9_15681=l9_15675;
float3 l9_15682=l9_15677;
ssGlobals l9_15683=tempGlobals;
tempGlobals=l9_15683;
N223_OnOff=(int(Tweak_N131_tmp)!=0);
N223_ParticleSpawnPosition=l9_15679;
N223_ParticleSeed=l9_15680;
N223_Strength=l9_15681;
N223_ForceOrigin=l9_15682;
N223_CustomForce=float3(0.0);
float4x4 l9_15684=(*sc_set0.UserUniforms).sc_ModelMatrix;
float4 l9_15685=l9_15684*float4(N223_ParticleSpawnPosition,1.0);
if (N223_OnOff)
{
float3 l9_15686=N223_ForceOrigin;
float3 l9_15687=l9_15685.xyz;
float l9_15688=N223_Strength;
float3 l9_15689=float3(0.0);
if (all(l9_15686==l9_15687))
{
int l9_15690=0;
l9_15690=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_15691=l9_15690;
float3 l9_15692=N223_ParticleSeed*float(l9_15691);
int l9_15693=int(l9_15692.x);
int l9_15694=int(l9_15692.y);
int l9_15695=int(l9_15692.z);
int l9_15696=((l9_15693*15299)^(l9_15694*30133))^(l9_15695*17539);
int l9_15697=l9_15696;
int l9_15698=l9_15697;
int l9_15699=((l9_15698*((l9_15698*1471343)+101146501))+1559861749)&2147483647;
int l9_15700=l9_15699;
int l9_15701=l9_15697*1399;
int l9_15702=((l9_15701*((l9_15701*1471343)+101146501))+1559861749)&2147483647;
int l9_15703=l9_15702;
int l9_15704=l9_15697*7177;
int l9_15705=((l9_15704*((l9_15704*1471343)+101146501))+1559861749)&2147483647;
int l9_15706=l9_15705;
int l9_15707=l9_15700;
float l9_15708=float(l9_15707)*4.6566129e-10;
int l9_15709=l9_15703;
float l9_15710=float(l9_15709)*4.6566129e-10;
int l9_15711=l9_15706;
float l9_15712=float(l9_15711)*4.6566129e-10;
float3 l9_15713=float3(l9_15708,l9_15710,l9_15712);
float3 l9_15714=l9_15713;
l9_15689=normalize((l9_15714-float3(0.5))*2.0);
}
else
{
l9_15689=normalize(l9_15686-l9_15687);
}
float3 l9_15715=l9_15689*l9_15688;
N223_CustomForce+=l9_15715;
}
float3 l9_15716=float3(0.0);
l9_15716=tempGlobals.N111_ParticleSpawnPosition;
float3 l9_15717=float3(0.0);
float3 l9_15718=(*sc_set0.UserUniforms).Tex3dScale;
l9_15717=l9_15718;
float3 l9_15719=float3(0.0);
float3 l9_15720=(*sc_set0.UserUniforms).Tex3dScrollSpeed;
l9_15719=l9_15720;
float3 l9_15721=float3(0.0);
float3 l9_15722=(*sc_set0.UserUniforms).Tex3dForceStrength;
l9_15721=l9_15722;
float3 l9_15723=l9_15716;
float3 l9_15724=l9_15717;
float3 l9_15725=l9_15719;
float3 l9_15726=l9_15721;
ssGlobals l9_15727=tempGlobals;
tempGlobals=l9_15727;
N202_OnOff=(int(Tweak_N133_tmp)!=0);
N202_ParticleSpawnPosition=l9_15723;
N202_ScaleTexture=l9_15724;
N202_ScrollSpeed=l9_15725;
N202_Strength=l9_15726;
N202_CustomForce=float3(0.0);
if (N202_OnOff)
{
float3 l9_15728=N202_ParticleSpawnPosition;
float3 l9_15729=N202_Strength;
float3 l9_15730=l9_15728;
float l9_15731=tempGlobals.gTimeElapsed;
float3 l9_15732=float3(l9_15731)*(N202_ScrollSpeed*0.1);
l9_15730/=(N202_ScaleTexture*2.0);
l9_15730+=l9_15732;
float3 l9_15733=l9_15730;
float4 l9_15734=float4(0.0);
float3 l9_15735=l9_15733;
float l9_15736=0.0;
float4 l9_15737=sc_set0.Tex3d.sample(sc_set0.Tex3dSmpSC,l9_15735,level(l9_15736));
l9_15734=l9_15737;
float4 l9_15738=l9_15734;
float3 l9_15739=l9_15738.xyz;
float3 l9_15740=(l9_15739*2.0)-float3(1.0);
l9_15740*=l9_15729;
float3 l9_15741=l9_15740;
N202_CustomForce+=l9_15741;
}
float3 l9_15742=float3(0.0);
l9_15742=tempGlobals.N155_helixDirection;
float3 l9_15743=float3(0.0);
l9_15743=tempGlobals.N319_curveDirection;
float3 l9_15744=float3(0.0);
float3 l9_15745=(*sc_set0.UserUniforms).Tweak_N314;
l9_15744=l9_15745;
float l9_15746=l9_15617;
float3 l9_15747=l9_15742;
float3 l9_15748=l9_15743;
float3 l9_15749=l9_15744;
ssGlobals l9_15750=tempGlobals;
tempGlobals=l9_15750;
N277_OnOff=(int(Tweak_N313_tmp)!=0);
N277_isTrail=l9_15746!=0.0;
N277_helixDir=l9_15747;
N277_curveDir=l9_15748;
N277_Strength=l9_15749;
N277_Path=NODE_248_DROPLIST_ITEM_tmp;
N277_DirectionForce=float3(0.0);
N277_Direction=float3(0.0);
if (N277_OnOff||N277_isTrail)
{
float3 l9_15751;
if (N277_Path==5)
{
l9_15751=N277_helixDir;
}
else
{
bool3 l9_15752=bool3(N277_Path==6);
l9_15751=float3(l9_15752.x ? N277_curveDir.x : float3(0.0).x,l9_15752.y ? N277_curveDir.y : float3(0.0).y,l9_15752.z ? N277_curveDir.z : float3(0.0).z);
}
float3 l9_15753=l9_15751;
float3 l9_15754=l9_15753;
float3 l9_15755=l9_15754;
if (N277_OnOff)
{
N277_DirectionForce+=(l9_15755*N277_Strength);
}
N277_Direction=l9_15755;
}
float l9_15756=0.0;
float l9_15757=0.0;
float l9_15758=(*sc_set0.UserUniforms).sizeVelScale;
l9_15757=l9_15758;
l9_15756=l9_15757;
float l9_15759=l9_15756;
N111_sizeVelScale=l9_15759;
float l9_15760=0.0;
float l9_15761=0.0;
float l9_15762=float((*sc_set0.UserUniforms).IGNOREVEL!=0);
l9_15761=l9_15762;
l9_15760=l9_15761;
bool l9_15763=l9_15760!=0.0;
N111_ENABLE_IGNOREVEL=l9_15763;
float l9_15764=0.0;
float l9_15765=0.0;
float l9_15766=float((*sc_set0.UserUniforms).NORMALIZESCALETOTRANSFORM!=0);
l9_15765=l9_15766;
l9_15764=l9_15765;
bool l9_15767=l9_15764!=0.0;
N111_ENABLE_IGNORETRANSFORMSCALE=l9_15767;
float2 l9_15768=float2(0.0);
float2 l9_15769=float2(0.0);
float2 l9_15770=(*sc_set0.UserUniforms).velScaleMinMax;
l9_15769=l9_15770;
l9_15768=l9_15769;
float2 l9_15771=l9_15768;
N111_velScaleMinMax=l9_15771;
float2 l9_15772=float2(0.0);
float2 l9_15773=float2(0.0);
float2 l9_15774=(*sc_set0.UserUniforms).rotationRandom;
l9_15773=l9_15774;
l9_15772=l9_15773;
float2 l9_15775=l9_15772;
N111_rotationRandom=l9_15775;
float2 l9_15776=float2(0.0);
float2 l9_15777=float2(0.0);
float2 l9_15778=(*sc_set0.UserUniforms).rotationRate;
l9_15777=l9_15778;
l9_15776=l9_15777;
float2 l9_15779=l9_15776;
N111_rotationRate=l9_15779;
float2 l9_15780=float2(0.0);
float2 l9_15781=float2(0.0);
float2 l9_15782=(*sc_set0.UserUniforms).rotationRandomX;
l9_15781=l9_15782;
l9_15780=l9_15781;
float2 l9_15783=l9_15780;
N111_rotationRandomX=l9_15783;
float2 l9_15784=float2(0.0);
float2 l9_15785=float2(0.0);
float2 l9_15786=(*sc_set0.UserUniforms).rotationRateX;
l9_15785=l9_15786;
l9_15784=l9_15785;
float2 l9_15787=l9_15784;
N111_rotationRateX=l9_15787;
float2 l9_15788=float2(0.0);
float2 l9_15789=float2(0.0);
float2 l9_15790=(*sc_set0.UserUniforms).randomRotationY;
l9_15789=l9_15790;
l9_15788=l9_15789;
float2 l9_15791=l9_15788;
N111_rotationRandomY=l9_15791;
float2 l9_15792=float2(0.0);
float2 l9_15793=float2(0.0);
float2 l9_15794=(*sc_set0.UserUniforms).rotationRateY;
l9_15793=l9_15794;
l9_15792=l9_15793;
float2 l9_15795=l9_15792;
N111_rotationRateY=l9_15795;
float2 l9_15796=float2(0.0);
float2 l9_15797=float2(0.0);
float2 l9_15798=(*sc_set0.UserUniforms).randomRotationZ;
l9_15797=l9_15798;
l9_15796=l9_15797;
float2 l9_15799=l9_15796;
N111_rotationRandomZ=l9_15799;
float2 l9_15800=float2(0.0);
float2 l9_15801=float2(0.0);
float2 l9_15802=(*sc_set0.UserUniforms).rotationRateZ;
l9_15801=l9_15802;
l9_15800=l9_15801;
float2 l9_15803=l9_15800;
N111_rotationRateZ=l9_15803;
float l9_15804=0.0;
float l9_15805=0.0;
float l9_15806=(*sc_set0.UserUniforms).rotationDrag;
l9_15805=l9_15806;
l9_15804=l9_15805;
float l9_15807=l9_15804;
N111_rotationDrag=l9_15807;
float l9_15808=0.0;
float l9_15809=0.0;
float l9_15810=float((*sc_set0.UserUniforms).CENTER_BBOX!=0);
l9_15809=l9_15810;
l9_15808=l9_15809;
bool l9_15811=l9_15808!=0.0;
N111_ENABLE_CENTER_IN_BBOX=l9_15811;
float3 l9_15812=float3(0.0);
float3 l9_15813=float3(0.0);
float3 l9_15814=(*sc_set0.UserUniforms).displaceScale;
l9_15813=l9_15814;
l9_15812=l9_15813;
float3 l9_15815=l9_15812;
N111_ScaleDisplace=l9_15815;
float3 l9_15816=float3(0.0);
float3 l9_15817=float3(0.0);
float3 l9_15818=(*sc_set0.UserUniforms).displaceSpeed;
l9_15817=l9_15818;
l9_15816=l9_15817;
float3 l9_15819=l9_15816;
N111_ScrollSpeedDisplace=l9_15819;
float3 l9_15820=float3(0.0);
float3 l9_15821=float3(0.0);
float3 l9_15822=(*sc_set0.UserUniforms).displaceStrength;
l9_15821=l9_15822;
l9_15820=l9_15821;
float3 l9_15823=l9_15820;
N111_DisplaceStrength=l9_15823;
float3 l9_15824=float3(0.0);
float3 l9_15825=float3(0.0);
float3 l9_15826=(*sc_set0.UserUniforms).orbitAxis;
l9_15825=l9_15826;
l9_15824=l9_15825;
float3 l9_15827=l9_15824;
N111_AxisOrbit=l9_15827;
float3 l9_15828=float3(0.0);
float3 l9_15829=float3(0.0);
float3 l9_15830=(*sc_set0.UserUniforms).orbitCenter;
l9_15829=l9_15830;
l9_15828=l9_15829;
float3 l9_15831=l9_15828;
N111_CenterOrbit=l9_15831;
float2 l9_15832=float2(0.0);
float2 l9_15833=float2(0.0);
float2 l9_15834=(*sc_set0.UserUniforms).orbitMinMaxAngle;
l9_15833=l9_15834;
l9_15832=l9_15833;
float2 l9_15835=l9_15832;
N111_MinMaxOrbitAngle=l9_15835;
float2 l9_15836=float2(0.0);
float2 l9_15837=float2(0.0);
float2 l9_15838=(*sc_set0.UserUniforms).orbitMinMaxSpeed;
l9_15837=l9_15838;
l9_15836=l9_15837;
float2 l9_15839=l9_15836;
N111_MinMaxOrbitSpeed=l9_15839;
float l9_15840=0.0;
float l9_15841=0.0;
float l9_15842=(*sc_set0.UserUniforms).fadeDistanceVisible;
l9_15841=l9_15842;
l9_15840=l9_15841;
float l9_15843=l9_15840;
N111_fadeDistanceVisible=l9_15843;
float l9_15844=0.0;
float l9_15845=0.0;
float l9_15846=(*sc_set0.UserUniforms).fadeDistanceInvisible;
l9_15845=l9_15846;
l9_15844=l9_15845;
float l9_15847=l9_15844;
N111_fadeDistanceInvisible=l9_15847;
float3 l9_15848=float3(0.0);
float l9_15849=0.0;
float l9_15850=(*sc_set0.UserUniforms).timeGlobal;
l9_15849=l9_15850;
float l9_15851=0.0;
float l9_15852=(*sc_set0.UserUniforms).externalTimeInput;
l9_15851=l9_15852;
float l9_15853=0.0;
float l9_15854=(*sc_set0.UserUniforms).externalSeed;
l9_15853=l9_15854;
float l9_15855=0.0;
float l9_15856=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_15855=l9_15856;
float2 l9_15857=float2(0.0);
float2 l9_15858=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_15857=l9_15858;
float l9_15859=0.0;
float l9_15860=(*sc_set0.UserUniforms).spawnDuration;
l9_15859=l9_15860;
float l9_15861=0.0;
float l9_15862;
if ((int(TRAILS_tmp)!=0))
{
l9_15862=1.001;
}
else
{
l9_15862=0.001;
}
l9_15862-=0.001;
l9_15861=l9_15862;
float l9_15863=0.0;
float l9_15864=(*sc_set0.UserUniforms).trailLength;
l9_15863=l9_15864;
float4 l9_15865=float4(0.0);
l9_15865=tempGlobals.VertexColor;
float l9_15866=0.0;
l9_15866=l9_15865.x;
float l9_15867=0.0;
float l9_15868=l9_15861;
bool l9_15869=(l9_15868*1.0)!=0.0;
bool l9_15870;
if (l9_15869)
{
l9_15870=(l9_15866*1.0)!=0.0;
}
else
{
l9_15870=l9_15869;
}
l9_15867=float(l9_15870);
float l9_15871=0.0;
float l9_15872=l9_15849;
float l9_15873=l9_15851;
float l9_15874=l9_15853;
float l9_15875=l9_15855;
float2 l9_15876=l9_15857;
float l9_15877=l9_15859;
float l9_15878=l9_15863;
float l9_15879=l9_15867;
ssGlobals l9_15880=tempGlobals;
tempGlobals=l9_15880;
float l9_15881=0.0;
N181_timeGlobal=l9_15872;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_15873;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_15874;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_15875;
N181_lifeTimeMinMax=l9_15876;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_15877;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_15878;
N181_isTrailCondition=l9_15879!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_15882=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_15883=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_15882=length(float4(1.0)*l9_15883);
}
N181_globalSeed=N181_externalSeed+l9_15882;
int l9_15884=0;
l9_15884=ssInstanceID;
int l9_15885=l9_15884;
float l9_15886=float(l9_15885);
int l9_15887=int(l9_15886);
int l9_15888=l9_15887^(l9_15887*15299);
int l9_15889=l9_15888;
int l9_15890=l9_15889;
int l9_15891=((l9_15890*((l9_15890*1471343)+101146501))+1559861749)&2147483647;
int l9_15892=l9_15891;
int l9_15893=l9_15889*1399;
int l9_15894=((l9_15893*((l9_15893*1471343)+101146501))+1559861749)&2147483647;
int l9_15895=l9_15894;
int l9_15896=l9_15889*7177;
int l9_15897=((l9_15896*((l9_15896*1471343)+101146501))+1559861749)&2147483647;
int l9_15898=l9_15897;
int l9_15899=l9_15892;
float l9_15900=float(l9_15899)*4.6566129e-10;
int l9_15901=l9_15895;
float l9_15902=float(l9_15901)*4.6566129e-10;
int l9_15903=l9_15898;
float l9_15904=float(l9_15903)*4.6566129e-10;
float3 l9_15905=float3(l9_15900,l9_15902,l9_15904);
float3 l9_15906=l9_15905;
N181_particleSeed=l9_15906;
float l9_15907=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_15908;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_15908=N181_lifeTimeMinMax;
}
else
{
l9_15908=float2(N181_lifeTimeConstant);
}
float2 l9_15909=l9_15908;
float l9_15910=fast::max(l9_15909.x,0.0099999998);
float l9_15911=fast::max(l9_15909.y,0.0099999998);
float l9_15912=tempGlobals.gTimeElapsed;
float l9_15913=l9_15912;
if (N181_ENABLE_EXTERNALTIME)
{
l9_15913=N181_externalTime;
}
float l9_15914=l9_15913;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_15914=N181_timeGlobal*l9_15913;
}
else
{
float l9_15915=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_15915=N181_trailLength;
}
}
float l9_15916=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_15917=0.0;
float l9_15918;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_15918=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_15918=0.0;
}
l9_15917=l9_15918;
float l9_15919=l9_15917;
int l9_15920=0;
l9_15920=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_15921=l9_15920;
l9_15916=fast::max(l9_15919*(1.0-(1.0/float(l9_15921))),0.0);
}
else
{
l9_15916=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_15922=fract(((l9_15913*N181_timeGlobal)*(1.0/(l9_15909.y+l9_15915)))+l9_15916);
l9_15914=l9_15922*(l9_15909.y+l9_15915);
}
float l9_15923=mix(l9_15914/l9_15910,l9_15914/l9_15911,l9_15907);
float l9_15924=fast::clamp(l9_15923,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_15914,l9_15924);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_15925=tempGlobals.Surface_UVCoord0;
l9_15914-=(l9_15925.y*N181_trailLength);
l9_15923=mix(l9_15914/l9_15910,l9_15914/l9_15911,l9_15907);
l9_15924=fast::clamp(l9_15923,0.0,1.0);
}
}
float l9_15926=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_15913-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_15926=1.0;
}
}
}
float l9_15927=l9_15923+l9_15926;
N181_particleAlive=1.0;
if ((l9_15927>0.99989998)||(l9_15914<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_15913*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_15909,l9_15914,l9_15924);
l9_15881=N181_isTrail;
l9_15871=l9_15881;
float3 l9_15928=float3(0.0);
l9_15928=tempGlobals.N155_helixDirection;
float3 l9_15929=float3(0.0);
l9_15929=tempGlobals.N319_curveDirection;
float3 l9_15930=float3(0.0);
float3 l9_15931=(*sc_set0.UserUniforms).Tweak_N314;
l9_15930=l9_15931;
float3 l9_15932=float3(0.0);
float l9_15933=l9_15871;
float3 l9_15934=l9_15928;
float3 l9_15935=l9_15929;
float3 l9_15936=l9_15930;
ssGlobals l9_15937=tempGlobals;
tempGlobals=l9_15937;
float3 l9_15938=float3(0.0);
N277_OnOff=(int(Tweak_N313_tmp)!=0);
N277_isTrail=l9_15933!=0.0;
N277_helixDir=l9_15934;
N277_curveDir=l9_15935;
N277_Strength=l9_15936;
N277_Path=NODE_248_DROPLIST_ITEM_tmp;
N277_DirectionForce=float3(0.0);
N277_Direction=float3(0.0);
if (N277_OnOff||N277_isTrail)
{
float3 l9_15939;
if (N277_Path==5)
{
l9_15939=N277_helixDir;
}
else
{
bool3 l9_15940=bool3(N277_Path==6);
l9_15939=float3(l9_15940.x ? N277_curveDir.x : float3(0.0).x,l9_15940.y ? N277_curveDir.y : float3(0.0).y,l9_15940.z ? N277_curveDir.z : float3(0.0).z);
}
float3 l9_15941=l9_15939;
float3 l9_15942=l9_15941;
float3 l9_15943=l9_15942;
if (N277_OnOff)
{
N277_DirectionForce+=(l9_15943*N277_Strength);
}
N277_Direction=l9_15943;
}
l9_15938=N277_Direction;
l9_15932=l9_15938;
l9_15848=l9_15932;
float3 l9_15944=l9_15848;
N111_tangentIN=l9_15944;
float3 l9_15945=float3(0.0);
N111_particleSeed=N111_particleSeedIn;
N111_globalSeed=N111_globalSeedIn;
float l9_15946=N111_particleSeed.x;
float l9_15947=N111_particleSeed.y;
float l9_15948=N111_particleSeed.z;
float3 l9_15949=fract((float3(l9_15946,l9_15947,l9_15948)*3048.28)+float3(N111_globalSeed))-float3(0.5);
float3 l9_15950=fract((N111_particleSeed*374.57129)+float3(N111_globalSeed))-float3(0.5);
float3 l9_15951=normalize(l9_15950+float3(1e-06));
float l9_15952=fract(N111_particleSeed.x+N111_globalSeed);
float l9_15953=l9_15952;
float l9_15954=0.33333334;
float l9_15955;
if (l9_15953<=0.0)
{
l9_15955=0.0;
}
else
{
l9_15955=pow(l9_15953,l9_15954);
}
float l9_15956=l9_15955;
float l9_15957=l9_15956;
l9_15951*=l9_15957;
l9_15951/=float3(2.0);
float l9_15958=fract((N111_particleSeed.x*334.59122)+N111_globalSeed);
float l9_15959=fract((N111_particleSeed.y*41.231232)+N111_globalSeed);
float l9_15960=fract((N111_particleSeed.z*18.984529)+N111_globalSeed);
float l9_15961=fract((N111_particleSeed.x*654.15588)+N111_globalSeed);
float l9_15962=fract((N111_particleSeed.y*45.722408)+N111_globalSeed);
float3 l9_15963=(float3(l9_15961,l9_15962,l9_15960)-float3(0.5))*2.0;
float3 l9_15964=float3(l9_15961,l9_15962,l9_15960);
float l9_15965=fract((N111_particleSeed.z*15.32451)+N111_globalSeed);
float2 l9_15966=fract((N111_particleSeed.xz*582.65741)+float2(N111_globalSeed));
float2 l9_15967=N111_timeValuesIn.xy;
float l9_15968=N111_timeValuesIn.z;
float l9_15969=N111_timeValuesIn.w;
N111_cameraFade_trailHeadTime_taper=float4(0.0);
float3 l9_15970=l9_15945;
float3 l9_15971=l9_15945;
float3 l9_15972=l9_15945;
if ((int(INILOCATION_tmp)!=0))
{
l9_15972=N111_spawnLocation;
}
if ((int(BOXSPAWN_tmp)!=0))
{
l9_15970=N111_spawnBox*l9_15949;
}
if ((int(SPHERESPAWN_tmp)!=0))
{
l9_15971=N111_spawnSphere*l9_15951;
}
float3 l9_15973=(l9_15972+l9_15971)+l9_15970;
float3 l9_15974=l9_15945;
if ((int(NOISE_tmp)!=0))
{
float3 l9_15975=N111_noiseFrequency;
float3 l9_15976=N111_noiseMult;
float3 l9_15977=l9_15963;
float l9_15978=l9_15969;
float l9_15979=sin(l9_15978*l9_15975.x);
float l9_15980=sin(l9_15978*l9_15975.y);
float l9_15981=sin(l9_15978*l9_15975.z);
float3 l9_15982=(float3(l9_15979,l9_15980,l9_15981)*l9_15976)*l9_15977;
float3 l9_15983=l9_15982;
l9_15974+=l9_15983;
}
if ((int(SNOISE_tmp)!=0))
{
float l9_15984=l9_15960;
float l9_15985=l9_15961;
float l9_15986=l9_15962;
float3 l9_15987=N111_sNoiseFrequency;
float3 l9_15988=N111_sNoiseMult;
float3 l9_15989=l9_15963;
float l9_15990=l9_15968;
float2 l9_15991=float2(l9_15984*l9_15990,l9_15987.x);
float2 l9_15992=floor(l9_15991+float2(dot(l9_15991,float2(0.36602542))));
float2 l9_15993=(l9_15991-l9_15992)+float2(dot(l9_15992,float2(0.21132487)));
float2 l9_15994=float2(0.0);
bool2 l9_15995=bool2(l9_15993.x>l9_15993.y);
l9_15994=float2(l9_15995.x ? float2(1.0,0.0).x : float2(0.0,1.0).x,l9_15995.y ? float2(1.0,0.0).y : float2(0.0,1.0).y);
float4 l9_15996=l9_15993.xyxy+float4(0.21132487,0.21132487,-0.57735026,-0.57735026);
float2 l9_15997=l9_15996.xy-l9_15994;
l9_15996=float4(l9_15997.x,l9_15997.y,l9_15996.z,l9_15996.w);
l9_15992=mod(l9_15992,float2(289.0));
float3 l9_15998=float3(l9_15992.y)+float3(0.0,l9_15994.y,1.0);
float3 l9_15999=mod(((l9_15998*34.0)+float3(1.0))*l9_15998,float3(289.0));
float3 l9_16000=(l9_15999+float3(l9_15992.x))+float3(0.0,l9_15994.x,1.0);
float3 l9_16001=mod(((l9_16000*34.0)+float3(1.0))*l9_16000,float3(289.0));
float3 l9_16002=l9_16001;
float3 l9_16003=fast::max(float3(0.5)-float3(dot(l9_15993,l9_15993),dot(l9_15996.xy,l9_15996.xy),dot(l9_15996.zw,l9_15996.zw)),float3(0.0));
l9_16003*=l9_16003;
l9_16003*=l9_16003;
float3 l9_16004=(fract(l9_16002*float3(0.024390243))*2.0)-float3(1.0);
float3 l9_16005=abs(l9_16004)-float3(0.5);
float3 l9_16006=floor(l9_16004+float3(0.5));
float3 l9_16007=l9_16004-l9_16006;
l9_16003*=(float3(1.7928429)-(((l9_16007*l9_16007)+(l9_16005*l9_16005))*0.85373473));
float3 l9_16008=float3(0.0);
l9_16008.x=(l9_16007.x*l9_15993.x)+(l9_16005.x*l9_15993.y);
float2 l9_16009=(l9_16007.yz*l9_15996.xz)+(l9_16005.yz*l9_15996.yw);
l9_16008=float3(l9_16008.x,l9_16009.x,l9_16009.y);
float l9_16010=130.0*dot(l9_16003,l9_16008);
float l9_16011=l9_16010;
float2 l9_16012=float2(l9_15985*l9_15990,l9_15987.y);
float2 l9_16013=floor(l9_16012+float2(dot(l9_16012,float2(0.36602542))));
float2 l9_16014=(l9_16012-l9_16013)+float2(dot(l9_16013,float2(0.21132487)));
float2 l9_16015=float2(0.0);
bool2 l9_16016=bool2(l9_16014.x>l9_16014.y);
l9_16015=float2(l9_16016.x ? float2(1.0,0.0).x : float2(0.0,1.0).x,l9_16016.y ? float2(1.0,0.0).y : float2(0.0,1.0).y);
float4 l9_16017=l9_16014.xyxy+float4(0.21132487,0.21132487,-0.57735026,-0.57735026);
float2 l9_16018=l9_16017.xy-l9_16015;
l9_16017=float4(l9_16018.x,l9_16018.y,l9_16017.z,l9_16017.w);
l9_16013=mod(l9_16013,float2(289.0));
float3 l9_16019=float3(l9_16013.y)+float3(0.0,l9_16015.y,1.0);
float3 l9_16020=mod(((l9_16019*34.0)+float3(1.0))*l9_16019,float3(289.0));
float3 l9_16021=(l9_16020+float3(l9_16013.x))+float3(0.0,l9_16015.x,1.0);
float3 l9_16022=mod(((l9_16021*34.0)+float3(1.0))*l9_16021,float3(289.0));
float3 l9_16023=l9_16022;
float3 l9_16024=fast::max(float3(0.5)-float3(dot(l9_16014,l9_16014),dot(l9_16017.xy,l9_16017.xy),dot(l9_16017.zw,l9_16017.zw)),float3(0.0));
l9_16024*=l9_16024;
l9_16024*=l9_16024;
float3 l9_16025=(fract(l9_16023*float3(0.024390243))*2.0)-float3(1.0);
float3 l9_16026=abs(l9_16025)-float3(0.5);
float3 l9_16027=floor(l9_16025+float3(0.5));
float3 l9_16028=l9_16025-l9_16027;
l9_16024*=(float3(1.7928429)-(((l9_16028*l9_16028)+(l9_16026*l9_16026))*0.85373473));
float3 l9_16029=float3(0.0);
l9_16029.x=(l9_16028.x*l9_16014.x)+(l9_16026.x*l9_16014.y);
float2 l9_16030=(l9_16028.yz*l9_16017.xz)+(l9_16026.yz*l9_16017.yw);
l9_16029=float3(l9_16029.x,l9_16030.x,l9_16030.y);
float l9_16031=130.0*dot(l9_16024,l9_16029);
float l9_16032=l9_16031;
float2 l9_16033=float2(l9_15986*l9_15990,l9_15987.z);
float2 l9_16034=floor(l9_16033+float2(dot(l9_16033,float2(0.36602542))));
float2 l9_16035=(l9_16033-l9_16034)+float2(dot(l9_16034,float2(0.21132487)));
float2 l9_16036=float2(0.0);
bool2 l9_16037=bool2(l9_16035.x>l9_16035.y);
l9_16036=float2(l9_16037.x ? float2(1.0,0.0).x : float2(0.0,1.0).x,l9_16037.y ? float2(1.0,0.0).y : float2(0.0,1.0).y);
float4 l9_16038=l9_16035.xyxy+float4(0.21132487,0.21132487,-0.57735026,-0.57735026);
float2 l9_16039=l9_16038.xy-l9_16036;
l9_16038=float4(l9_16039.x,l9_16039.y,l9_16038.z,l9_16038.w);
l9_16034=mod(l9_16034,float2(289.0));
float3 l9_16040=float3(l9_16034.y)+float3(0.0,l9_16036.y,1.0);
float3 l9_16041=mod(((l9_16040*34.0)+float3(1.0))*l9_16040,float3(289.0));
float3 l9_16042=(l9_16041+float3(l9_16034.x))+float3(0.0,l9_16036.x,1.0);
float3 l9_16043=mod(((l9_16042*34.0)+float3(1.0))*l9_16042,float3(289.0));
float3 l9_16044=l9_16043;
float3 l9_16045=fast::max(float3(0.5)-float3(dot(l9_16035,l9_16035),dot(l9_16038.xy,l9_16038.xy),dot(l9_16038.zw,l9_16038.zw)),float3(0.0));
l9_16045*=l9_16045;
l9_16045*=l9_16045;
float3 l9_16046=(fract(l9_16044*float3(0.024390243))*2.0)-float3(1.0);
float3 l9_16047=abs(l9_16046)-float3(0.5);
float3 l9_16048=floor(l9_16046+float3(0.5));
float3 l9_16049=l9_16046-l9_16048;
l9_16045*=(float3(1.7928429)-(((l9_16049*l9_16049)+(l9_16047*l9_16047))*0.85373473));
float3 l9_16050=float3(0.0);
l9_16050.x=(l9_16049.x*l9_16035.x)+(l9_16047.x*l9_16035.y);
float2 l9_16051=(l9_16049.yz*l9_16038.xz)+(l9_16047.yz*l9_16038.yw);
l9_16050=float3(l9_16050.x,l9_16051.x,l9_16051.y);
float l9_16052=130.0*dot(l9_16045,l9_16050);
float l9_16053=l9_16052;
float3 l9_16054=(float3(l9_16011,l9_16032,l9_16053)*l9_15988)*l9_15989;
l9_15974+=l9_16054;
}
float3 l9_16055=float3(0.0,((N111_gravity/2.0)*l9_15968)*l9_15968,0.0);
float3 l9_16056=l9_15945;
if ((int(FORCE_tmp)!=0))
{
l9_16056=((N111_localForce/float3(2.0))*l9_15968)*l9_15968;
}
float3 l9_16057=l9_15945;
if ((int(CUSTOMFORCE_tmp)!=0))
{
tempGlobals.N111_ParticleSpawnPosition=l9_15973;
float3 l9_16058=float3(0.0);
float3 l9_16059=float3(0.0);
l9_16059=tempGlobals.N111_ParticleSpawnPosition;
float l9_16060=0.0;
float l9_16061=(*sc_set0.UserUniforms).timeGlobal;
l9_16060=l9_16061;
float l9_16062=0.0;
float l9_16063=(*sc_set0.UserUniforms).externalTimeInput;
l9_16062=l9_16063;
float l9_16064=0.0;
float l9_16065=(*sc_set0.UserUniforms).externalSeed;
l9_16064=l9_16065;
float l9_16066=0.0;
float l9_16067=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_16066=l9_16067;
float2 l9_16068=float2(0.0);
float2 l9_16069=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_16068=l9_16069;
float l9_16070=0.0;
float l9_16071=(*sc_set0.UserUniforms).spawnDuration;
l9_16070=l9_16071;
float l9_16072=0.0;
float l9_16073;
if ((int(TRAILS_tmp)!=0))
{
l9_16073=1.001;
}
else
{
l9_16073=0.001;
}
l9_16073-=0.001;
l9_16072=l9_16073;
float l9_16074=0.0;
float l9_16075=(*sc_set0.UserUniforms).trailLength;
l9_16074=l9_16075;
float4 l9_16076=float4(0.0);
l9_16076=tempGlobals.VertexColor;
float l9_16077=0.0;
l9_16077=l9_16076.x;
float l9_16078=0.0;
float l9_16079=l9_16072;
bool l9_16080=(l9_16079*1.0)!=0.0;
bool l9_16081;
if (l9_16080)
{
l9_16081=(l9_16077*1.0)!=0.0;
}
else
{
l9_16081=l9_16080;
}
l9_16078=float(l9_16081);
float3 l9_16082=float3(0.0);
float l9_16083=0.0;
float l9_16084=l9_16060;
float l9_16085=l9_16062;
float l9_16086=l9_16064;
float l9_16087=l9_16066;
float2 l9_16088=l9_16068;
float l9_16089=l9_16070;
float l9_16090=l9_16074;
float l9_16091=l9_16078;
ssGlobals l9_16092=tempGlobals;
tempGlobals=l9_16092;
float3 l9_16093=float3(0.0);
float l9_16094=0.0;
N181_timeGlobal=l9_16084;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_16085;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_16086;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_16087;
N181_lifeTimeMinMax=l9_16088;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_16089;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_16090;
N181_isTrailCondition=l9_16091!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_16095=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_16096=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_16095=length(float4(1.0)*l9_16096);
}
N181_globalSeed=N181_externalSeed+l9_16095;
int l9_16097=0;
l9_16097=ssInstanceID;
int l9_16098=l9_16097;
float l9_16099=float(l9_16098);
int l9_16100=int(l9_16099);
int l9_16101=l9_16100^(l9_16100*15299);
int l9_16102=l9_16101;
int l9_16103=l9_16102;
int l9_16104=((l9_16103*((l9_16103*1471343)+101146501))+1559861749)&2147483647;
int l9_16105=l9_16104;
int l9_16106=l9_16102*1399;
int l9_16107=((l9_16106*((l9_16106*1471343)+101146501))+1559861749)&2147483647;
int l9_16108=l9_16107;
int l9_16109=l9_16102*7177;
int l9_16110=((l9_16109*((l9_16109*1471343)+101146501))+1559861749)&2147483647;
int l9_16111=l9_16110;
int l9_16112=l9_16105;
float l9_16113=float(l9_16112)*4.6566129e-10;
int l9_16114=l9_16108;
float l9_16115=float(l9_16114)*4.6566129e-10;
int l9_16116=l9_16111;
float l9_16117=float(l9_16116)*4.6566129e-10;
float3 l9_16118=float3(l9_16113,l9_16115,l9_16117);
float3 l9_16119=l9_16118;
N181_particleSeed=l9_16119;
float l9_16120=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_16121;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_16121=N181_lifeTimeMinMax;
}
else
{
l9_16121=float2(N181_lifeTimeConstant);
}
float2 l9_16122=l9_16121;
float l9_16123=fast::max(l9_16122.x,0.0099999998);
float l9_16124=fast::max(l9_16122.y,0.0099999998);
float l9_16125=tempGlobals.gTimeElapsed;
float l9_16126=l9_16125;
if (N181_ENABLE_EXTERNALTIME)
{
l9_16126=N181_externalTime;
}
float l9_16127=l9_16126;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_16127=N181_timeGlobal*l9_16126;
}
else
{
float l9_16128=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_16128=N181_trailLength;
}
}
float l9_16129=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_16130=0.0;
float l9_16131;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_16131=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_16131=0.0;
}
l9_16130=l9_16131;
float l9_16132=l9_16130;
int l9_16133=0;
l9_16133=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_16134=l9_16133;
l9_16129=fast::max(l9_16132*(1.0-(1.0/float(l9_16134))),0.0);
}
else
{
l9_16129=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_16135=fract(((l9_16126*N181_timeGlobal)*(1.0/(l9_16122.y+l9_16128)))+l9_16129);
l9_16127=l9_16135*(l9_16122.y+l9_16128);
}
float l9_16136=mix(l9_16127/l9_16123,l9_16127/l9_16124,l9_16120);
float l9_16137=fast::clamp(l9_16136,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_16127,l9_16137);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_16138=tempGlobals.Surface_UVCoord0;
l9_16127-=(l9_16138.y*N181_trailLength);
l9_16136=mix(l9_16127/l9_16123,l9_16127/l9_16124,l9_16120);
l9_16137=fast::clamp(l9_16136,0.0,1.0);
}
}
float l9_16139=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_16126-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_16139=1.0;
}
}
}
float l9_16140=l9_16136+l9_16139;
N181_particleAlive=1.0;
if ((l9_16140>0.99989998)||(l9_16127<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_16126*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_16122,l9_16127,l9_16137);
l9_16093=N181_particleSeed;
l9_16094=N181_isTrail;
l9_16082=l9_16093;
l9_16083=l9_16094;
float l9_16141=0.0;
float l9_16142=(*sc_set0.UserUniforms).attractRepelForceStrength;
l9_16141=l9_16142;
float3 l9_16143=float3(0.0);
float3 l9_16144=(*sc_set0.UserUniforms).customForceOrigin;
l9_16143=l9_16144;
float3 l9_16145=float3(0.0);
float3 l9_16146=l9_16059;
float3 l9_16147=l9_16082;
float l9_16148=l9_16141;
float3 l9_16149=l9_16143;
ssGlobals l9_16150=tempGlobals;
tempGlobals=l9_16150;
float3 l9_16151=float3(0.0);
N223_OnOff=(int(Tweak_N131_tmp)!=0);
N223_ParticleSpawnPosition=l9_16146;
N223_ParticleSeed=l9_16147;
N223_Strength=l9_16148;
N223_ForceOrigin=l9_16149;
N223_CustomForce=float3(0.0);
float4x4 l9_16152=(*sc_set0.UserUniforms).sc_ModelMatrix;
float4 l9_16153=l9_16152*float4(N223_ParticleSpawnPosition,1.0);
if (N223_OnOff)
{
float3 l9_16154=N223_ForceOrigin;
float3 l9_16155=l9_16153.xyz;
float l9_16156=N223_Strength;
float3 l9_16157=float3(0.0);
if (all(l9_16154==l9_16155))
{
int l9_16158=0;
l9_16158=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_16159=l9_16158;
float3 l9_16160=N223_ParticleSeed*float(l9_16159);
int l9_16161=int(l9_16160.x);
int l9_16162=int(l9_16160.y);
int l9_16163=int(l9_16160.z);
int l9_16164=((l9_16161*15299)^(l9_16162*30133))^(l9_16163*17539);
int l9_16165=l9_16164;
int l9_16166=l9_16165;
int l9_16167=((l9_16166*((l9_16166*1471343)+101146501))+1559861749)&2147483647;
int l9_16168=l9_16167;
int l9_16169=l9_16165*1399;
int l9_16170=((l9_16169*((l9_16169*1471343)+101146501))+1559861749)&2147483647;
int l9_16171=l9_16170;
int l9_16172=l9_16165*7177;
int l9_16173=((l9_16172*((l9_16172*1471343)+101146501))+1559861749)&2147483647;
int l9_16174=l9_16173;
int l9_16175=l9_16168;
float l9_16176=float(l9_16175)*4.6566129e-10;
int l9_16177=l9_16171;
float l9_16178=float(l9_16177)*4.6566129e-10;
int l9_16179=l9_16174;
float l9_16180=float(l9_16179)*4.6566129e-10;
float3 l9_16181=float3(l9_16176,l9_16178,l9_16180);
float3 l9_16182=l9_16181;
l9_16157=normalize((l9_16182-float3(0.5))*2.0);
}
else
{
l9_16157=normalize(l9_16154-l9_16155);
}
float3 l9_16183=l9_16157*l9_16156;
N223_CustomForce+=l9_16183;
}
l9_16151=N223_CustomForce;
l9_16145=l9_16151;
float3 l9_16184=float3(0.0);
l9_16184=tempGlobals.N111_ParticleSpawnPosition;
float3 l9_16185=float3(0.0);
float3 l9_16186=(*sc_set0.UserUniforms).Tex3dScale;
l9_16185=l9_16186;
float3 l9_16187=float3(0.0);
float3 l9_16188=(*sc_set0.UserUniforms).Tex3dScrollSpeed;
l9_16187=l9_16188;
float3 l9_16189=float3(0.0);
float3 l9_16190=(*sc_set0.UserUniforms).Tex3dForceStrength;
l9_16189=l9_16190;
float3 l9_16191=float3(0.0);
float3 l9_16192=l9_16184;
float3 l9_16193=l9_16185;
float3 l9_16194=l9_16187;
float3 l9_16195=l9_16189;
ssGlobals l9_16196=tempGlobals;
tempGlobals=l9_16196;
float3 l9_16197=float3(0.0);
N202_OnOff=(int(Tweak_N133_tmp)!=0);
N202_ParticleSpawnPosition=l9_16192;
N202_ScaleTexture=l9_16193;
N202_ScrollSpeed=l9_16194;
N202_Strength=l9_16195;
N202_CustomForce=float3(0.0);
if (N202_OnOff)
{
float3 l9_16198=N202_ParticleSpawnPosition;
float3 l9_16199=N202_Strength;
float3 l9_16200=l9_16198;
float l9_16201=tempGlobals.gTimeElapsed;
float3 l9_16202=float3(l9_16201)*(N202_ScrollSpeed*0.1);
l9_16200/=(N202_ScaleTexture*2.0);
l9_16200+=l9_16202;
float3 l9_16203=l9_16200;
float4 l9_16204=float4(0.0);
float3 l9_16205=l9_16203;
float l9_16206=0.0;
float4 l9_16207=sc_set0.Tex3d.sample(sc_set0.Tex3dSmpSC,l9_16205,level(l9_16206));
l9_16204=l9_16207;
float4 l9_16208=l9_16204;
float3 l9_16209=l9_16208.xyz;
float3 l9_16210=(l9_16209*2.0)-float3(1.0);
l9_16210*=l9_16199;
float3 l9_16211=l9_16210;
N202_CustomForce+=l9_16211;
}
l9_16197=N202_CustomForce;
l9_16191=l9_16197;
float3 l9_16212=float3(0.0);
l9_16212=tempGlobals.N155_helixDirection;
float3 l9_16213=float3(0.0);
l9_16213=tempGlobals.N319_curveDirection;
float3 l9_16214=float3(0.0);
float3 l9_16215=(*sc_set0.UserUniforms).Tweak_N314;
l9_16214=l9_16215;
float3 l9_16216=float3(0.0);
float l9_16217=l9_16083;
float3 l9_16218=l9_16212;
float3 l9_16219=l9_16213;
float3 l9_16220=l9_16214;
ssGlobals l9_16221=tempGlobals;
tempGlobals=l9_16221;
float3 l9_16222=float3(0.0);
N277_OnOff=(int(Tweak_N313_tmp)!=0);
N277_isTrail=l9_16217!=0.0;
N277_helixDir=l9_16218;
N277_curveDir=l9_16219;
N277_Strength=l9_16220;
N277_Path=NODE_248_DROPLIST_ITEM_tmp;
N277_DirectionForce=float3(0.0);
N277_Direction=float3(0.0);
if (N277_OnOff||N277_isTrail)
{
float3 l9_16223;
if (N277_Path==5)
{
l9_16223=N277_helixDir;
}
else
{
bool3 l9_16224=bool3(N277_Path==6);
l9_16223=float3(l9_16224.x ? N277_curveDir.x : float3(0.0).x,l9_16224.y ? N277_curveDir.y : float3(0.0).y,l9_16224.z ? N277_curveDir.z : float3(0.0).z);
}
float3 l9_16225=l9_16223;
float3 l9_16226=l9_16225;
float3 l9_16227=l9_16226;
if (N277_OnOff)
{
N277_DirectionForce+=(l9_16227*N277_Strength);
}
N277_Direction=l9_16227;
}
l9_16222=N277_DirectionForce;
l9_16216=l9_16222;
float3 l9_16228=float3(0.0);
l9_16228=(l9_16145+l9_16191)+l9_16216;
l9_16058=l9_16228;
float3 l9_16229=l9_16058;
l9_16057=((l9_16229/float3(2.0))*l9_15968)*l9_15968;
}
float3 l9_16230=l9_15945;
float3 l9_16231=N111_velocityMin+(((l9_15963+float3(1.0))/float3(2.0))*(N111_velocityMax-N111_velocityMin));
if ((int(VELRAMP_tmp)!=0))
{
l9_16231=mix(N111_velocityMin,N111_velocityMax,l9_15964);
}
float3 l9_16232=l9_16231;
float l9_16233=l9_15968;
float3 l9_16234=N111_velocityDrag;
float3 l9_16235=l9_15974;
float l9_16236=l9_15969;
float3 l9_16237=float3(l9_16233,l9_16233,l9_16233);
float3 l9_16238=l9_16234;
float l9_16239;
if (l9_16237.x<=0.0)
{
l9_16239=0.0;
}
else
{
l9_16239=pow(l9_16237.x,l9_16238.x);
}
float l9_16240=l9_16239;
float l9_16241;
if (l9_16237.y<=0.0)
{
l9_16241=0.0;
}
else
{
l9_16241=pow(l9_16237.y,l9_16238.y);
}
float l9_16242=l9_16241;
float l9_16243;
if (l9_16237.z<=0.0)
{
l9_16243=0.0;
}
else
{
l9_16243=pow(l9_16237.z,l9_16238.z);
}
float3 l9_16244=float3(l9_16240,l9_16242,l9_16243);
float3 l9_16245=l9_16244;
float3 l9_16246=(l9_16232+l9_16235)*l9_16245;
if ((int(VELRAMP_tmp)!=0))
{
float l9_16247=floor(l9_16236*10000.0)/10000.0;
float2 l9_16248=tempGlobals.Surface_UVCoord0;
float2 l9_16249=(l9_16248/float2(10000.0,1.0))+float2(l9_16247,0.0);
float2 l9_16250=l9_16249;
float4 l9_16251=float4(0.0);
int l9_16252;
if ((int(velRampTextureHasSwappedViews_tmp)!=0))
{
int l9_16253=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_16253=0;
}
else
{
l9_16253=gl_InstanceIndex%2;
}
int l9_16254=l9_16253;
l9_16252=1-l9_16254;
}
else
{
int l9_16255=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_16255=0;
}
else
{
l9_16255=gl_InstanceIndex%2;
}
int l9_16256=l9_16255;
l9_16252=l9_16256;
}
int l9_16257=l9_16252;
int l9_16258=velRampTextureLayout_tmp;
int l9_16259=l9_16257;
float2 l9_16260=l9_16250;
bool l9_16261=(int(SC_USE_UV_TRANSFORM_velRampTexture_tmp)!=0);
float3x3 l9_16262=(*sc_set0.UserUniforms).velRampTextureTransform;
int2 l9_16263=int2(SC_SOFTWARE_WRAP_MODE_U_velRampTexture_tmp,SC_SOFTWARE_WRAP_MODE_V_velRampTexture_tmp);
bool l9_16264=(int(SC_USE_UV_MIN_MAX_velRampTexture_tmp)!=0);
float4 l9_16265=(*sc_set0.UserUniforms).velRampTextureUvMinMax;
bool l9_16266=(int(SC_USE_CLAMP_TO_BORDER_velRampTexture_tmp)!=0);
float4 l9_16267=(*sc_set0.UserUniforms).velRampTextureBorderColor;
float l9_16268=0.0;
bool l9_16269=l9_16266&&(!l9_16264);
float l9_16270=1.0;
float l9_16271=l9_16260.x;
int l9_16272=l9_16263.x;
if (l9_16272==1)
{
l9_16271=fract(l9_16271);
}
else
{
if (l9_16272==2)
{
float l9_16273=fract(l9_16271);
float l9_16274=l9_16271-l9_16273;
float l9_16275=step(0.25,fract(l9_16274*0.5));
l9_16271=mix(l9_16273,1.0-l9_16273,fast::clamp(l9_16275,0.0,1.0));
}
}
l9_16260.x=l9_16271;
float l9_16276=l9_16260.y;
int l9_16277=l9_16263.y;
if (l9_16277==1)
{
l9_16276=fract(l9_16276);
}
else
{
if (l9_16277==2)
{
float l9_16278=fract(l9_16276);
float l9_16279=l9_16276-l9_16278;
float l9_16280=step(0.25,fract(l9_16279*0.5));
l9_16276=mix(l9_16278,1.0-l9_16278,fast::clamp(l9_16280,0.0,1.0));
}
}
l9_16260.y=l9_16276;
if (l9_16264)
{
bool l9_16281=l9_16266;
bool l9_16282;
if (l9_16281)
{
l9_16282=l9_16263.x==3;
}
else
{
l9_16282=l9_16281;
}
float l9_16283=l9_16260.x;
float l9_16284=l9_16265.x;
float l9_16285=l9_16265.z;
bool l9_16286=l9_16282;
float l9_16287=l9_16270;
float l9_16288=fast::clamp(l9_16283,l9_16284,l9_16285);
float l9_16289=step(abs(l9_16283-l9_16288),9.9999997e-06);
l9_16287*=(l9_16289+((1.0-float(l9_16286))*(1.0-l9_16289)));
l9_16283=l9_16288;
l9_16260.x=l9_16283;
l9_16270=l9_16287;
bool l9_16290=l9_16266;
bool l9_16291;
if (l9_16290)
{
l9_16291=l9_16263.y==3;
}
else
{
l9_16291=l9_16290;
}
float l9_16292=l9_16260.y;
float l9_16293=l9_16265.y;
float l9_16294=l9_16265.w;
bool l9_16295=l9_16291;
float l9_16296=l9_16270;
float l9_16297=fast::clamp(l9_16292,l9_16293,l9_16294);
float l9_16298=step(abs(l9_16292-l9_16297),9.9999997e-06);
l9_16296*=(l9_16298+((1.0-float(l9_16295))*(1.0-l9_16298)));
l9_16292=l9_16297;
l9_16260.y=l9_16292;
l9_16270=l9_16296;
}
float2 l9_16299=l9_16260;
bool l9_16300=l9_16261;
float3x3 l9_16301=l9_16262;
if (l9_16300)
{
l9_16299=float2((l9_16301*float3(l9_16299,1.0)).xy);
}
float2 l9_16302=l9_16299;
l9_16260=l9_16302;
float l9_16303=l9_16260.x;
int l9_16304=l9_16263.x;
bool l9_16305=l9_16269;
float l9_16306=l9_16270;
if ((l9_16304==0)||(l9_16304==3))
{
float l9_16307=l9_16303;
float l9_16308=0.0;
float l9_16309=1.0;
bool l9_16310=l9_16305;
float l9_16311=l9_16306;
float l9_16312=fast::clamp(l9_16307,l9_16308,l9_16309);
float l9_16313=step(abs(l9_16307-l9_16312),9.9999997e-06);
l9_16311*=(l9_16313+((1.0-float(l9_16310))*(1.0-l9_16313)));
l9_16307=l9_16312;
l9_16303=l9_16307;
l9_16306=l9_16311;
}
l9_16260.x=l9_16303;
l9_16270=l9_16306;
float l9_16314=l9_16260.y;
int l9_16315=l9_16263.y;
bool l9_16316=l9_16269;
float l9_16317=l9_16270;
if ((l9_16315==0)||(l9_16315==3))
{
float l9_16318=l9_16314;
float l9_16319=0.0;
float l9_16320=1.0;
bool l9_16321=l9_16316;
float l9_16322=l9_16317;
float l9_16323=fast::clamp(l9_16318,l9_16319,l9_16320);
float l9_16324=step(abs(l9_16318-l9_16323),9.9999997e-06);
l9_16322*=(l9_16324+((1.0-float(l9_16321))*(1.0-l9_16324)));
l9_16318=l9_16323;
l9_16314=l9_16318;
l9_16317=l9_16322;
}
l9_16260.y=l9_16314;
l9_16270=l9_16317;
float2 l9_16325=l9_16260;
int l9_16326=l9_16258;
int l9_16327=l9_16259;
float l9_16328=l9_16268;
float2 l9_16329=l9_16325;
int l9_16330=l9_16326;
int l9_16331=l9_16327;
float3 l9_16332=float3(0.0);
if (l9_16330==0)
{
l9_16332=float3(l9_16329,0.0);
}
else
{
if (l9_16330==1)
{
l9_16332=float3(l9_16329.x,(l9_16329.y*0.5)+(0.5-(float(l9_16331)*0.5)),0.0);
}
else
{
l9_16332=float3(l9_16329,float(l9_16331));
}
}
float3 l9_16333=l9_16332;
float3 l9_16334=l9_16333;
float4 l9_16335=sc_set0.velRampTexture.sample(sc_set0.velRampTextureSmpSC,l9_16334.xy,level(l9_16328));
float4 l9_16336=l9_16335;
if (l9_16266)
{
l9_16336=mix(l9_16267,l9_16336,float4(l9_16270));
}
float4 l9_16337=l9_16336;
l9_16251=l9_16337;
float4 l9_16338=l9_16251;
float3 l9_16339=l9_16338.xyz;
l9_16246=(l9_16232+l9_16235)*l9_16339;
if (!(SC_DEVICE_CLASS_tmp>=2))
{
l9_16246=l9_16232*l9_16245;
}
}
float3 l9_16340=l9_16246;
l9_16230=l9_16340;
if ((int(TRAILS_tmp)!=0))
{
if (N111_isTrail)
{
float2 l9_16341=tempGlobals.Surface_UVCoord0;
float2 l9_16342=l9_16341;
float l9_16343=mix(1.0,l9_16342.y,1.0-N111_taper.x);
l9_16343*=mix(1.0,1.0-l9_16342.y,1.0-N111_taper.y);
N111_cameraFade_trailHeadTime_taper=float4(N111_cameraFade_trailHeadTime_taper.x,N111_trailHeadTime.x,N111_trailHeadTime.y,N111_cameraFade_trailHeadTime_taper.w);
N111_cameraFade_trailHeadTime_taper.w=l9_16343;
}
}
float4x4 l9_16344=(*sc_set0.UserUniforms).sc_ModelMatrix;
float l9_16345=length(l9_16344[0].xyz);
float4x4 l9_16346=(*sc_set0.UserUniforms).sc_ModelMatrix;
float l9_16347=length(l9_16346[1].xyz);
float4x4 l9_16348=(*sc_set0.UserUniforms).sc_ModelMatrix;
float l9_16349=length(l9_16348[2].xyz);
float3 l9_16350=float3(l9_16345,l9_16347,l9_16349);
float4x4 l9_16351=(*sc_set0.UserUniforms).sc_ModelMatrix;
float4x4 l9_16352=l9_16351;
float4 l9_16353=l9_16352[0];
float4 l9_16354=l9_16352[1];
float4 l9_16355=l9_16352[2];
float3x3 l9_16356=float3x3(float3(float3(l9_16353.x,l9_16354.x,l9_16355.x)),float3(float3(l9_16353.y,l9_16354.y,l9_16355.y)),float3(float3(l9_16353.z,l9_16354.z,l9_16355.z)));
float3x3 l9_16357=l9_16356;
float3x3 l9_16358=l9_16357;
float3 l9_16359=float3(0.0);
if (rotationSpace_tmp==2)
{
l9_16359=(((l9_16230*l9_16358)+l9_16055)+l9_16056)+l9_16057;
}
else
{
if (rotationSpace_tmp==1)
{
l9_16359=(((l9_16230*l9_16350)+l9_16055)+l9_16056)+l9_16057;
}
else
{
l9_16359=(((l9_16230+l9_16055)+l9_16056)+l9_16057)*l9_16358;
}
}
float4x4 l9_16360=(*sc_set0.UserUniforms).sc_ModelMatrix;
float3 l9_16361=(l9_16360*float4(l9_15973,1.0)).xyz+l9_16359;
N111_particleSpawnPosition=l9_15973;
if ((int(Tweak_N282_tmp)!=0))
{
float3 l9_16362=l9_15973;
float3 l9_16363=N111_DisplaceStrength;
float3 l9_16364=N111_ScrollSpeedDisplace;
float3 l9_16365=N111_ScaleDisplace;
float3 l9_16366=l9_16362;
float l9_16367=tempGlobals.gTimeElapsed;
float3 l9_16368=float3(l9_16367)*(l9_16364*0.1);
l9_16366/=(l9_16365*2.0);
l9_16366+=l9_16368;
float3 l9_16369=l9_16366;
float4 l9_16370=float4(0.0);
float3 l9_16371=l9_16369;
float l9_16372=0.0;
float4 l9_16373=sc_set0.displace3dTex.sample(sc_set0.displace3dTexSmpSC,l9_16371,level(l9_16372));
l9_16370=l9_16373;
float4 l9_16374=l9_16370;
float3 l9_16375=l9_16374.xyz;
float3 l9_16376=(l9_16375*2.0)-float3(1.0);
l9_16376*=l9_16363;
float3 l9_16377=l9_16376;
float3 l9_16378=l9_16377;
if ((int(Tweak_N331_tmp)!=0))
{
float4x4 l9_16379=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_16378=float3x3(l9_16379[0].xyz,l9_16379[1].xyz,l9_16379[2].xyz)*l9_16378;
}
l9_16361+=l9_16378;
}
if ((int(Tweak_N228_tmp)!=0))
{
float3 l9_16380=N111_AxisOrbit;
float3 l9_16381=N111_CenterOrbit;
if ((int(Tweak_N332_tmp)!=0))
{
float4x4 l9_16382=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_16380=float3x3(l9_16382[0].xyz,l9_16382[1].xyz,l9_16382[2].xyz)*N111_AxisOrbit;
float4x4 l9_16383=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_16381=N111_CenterOrbit+l9_16383[3].xyz;
}
float3 l9_16384=l9_16361;
float3 l9_16385=l9_16380;
float2 l9_16386=N111_MinMaxOrbitAngle;
float2 l9_16387=N111_MinMaxOrbitSpeed;
float3 l9_16388=l9_16381;
float2 l9_16389=l9_15966;
float l9_16390=mix(l9_16386.x,l9_16386.y,l9_16389.x);
float l9_16391=tempGlobals.gTimeElapsed;
float l9_16392=l9_16391*mix(l9_16387.x,l9_16387.y,l9_16389.y);
l9_16390+=l9_16392;
float3 l9_16393=l9_16385;
float l9_16394=l9_16390;
float3 l9_16395=l9_16393;
float l9_16396=l9_16394;
float3 l9_16397=normalize(l9_16395);
float l9_16398=sin(radians(l9_16396));
float l9_16399=cos(radians(l9_16396));
float l9_16400=1.0-l9_16399;
float3x3 l9_16401=float3x3(float3(((l9_16400*l9_16397.x)*l9_16397.x)+l9_16399,((l9_16400*l9_16397.x)*l9_16397.y)-(l9_16397.z*l9_16398),((l9_16400*l9_16397.z)*l9_16397.x)+(l9_16397.y*l9_16398)),float3(((l9_16400*l9_16397.x)*l9_16397.y)+(l9_16397.z*l9_16398),((l9_16400*l9_16397.y)*l9_16397.y)+l9_16399,((l9_16400*l9_16397.y)*l9_16397.z)-(l9_16397.x*l9_16398)),float3(((l9_16400*l9_16397.z)*l9_16397.x)-(l9_16397.y*l9_16398),((l9_16400*l9_16397.y)*l9_16397.z)+(l9_16397.x*l9_16398),((l9_16400*l9_16397.z)*l9_16397.z)+l9_16399));
float3x3 l9_16402=l9_16401;
float3x3 l9_16403=l9_16402;
float3 l9_16404=l9_16403*(l9_16384-l9_16388);
float3 l9_16405=l9_16404+l9_16388;
l9_16361=l9_16405;
}
float l9_16406;
if (MESHTYPE_tmp==0)
{
l9_16406=mix(N111_rotationRandom.x,N111_rotationRandom.y,l9_15965);
}
else
{
l9_16406=mix(N111_rotationRandomZ.x,N111_rotationRandomZ.y,l9_15965);
}
float l9_16407=l9_16406;
float l9_16408=1.0;
if (!(int(ALIGNPARTICLES_tmp)!=0))
{
float l9_16409=1.0-l9_15969;
float l9_16410=N111_rotationDrag;
float l9_16411;
if (l9_16409<=0.0)
{
l9_16411=0.0;
}
else
{
l9_16411=pow(l9_16409,l9_16410);
}
float l9_16412=l9_16411;
l9_16408=l9_16412;
}
float l9_16413;
if (MESHTYPE_tmp==0)
{
l9_16413=mix(N111_rotationRate.x,N111_rotationRate.y,l9_15965);
}
else
{
l9_16413=mix(N111_rotationRateZ.x,N111_rotationRateZ.y,l9_15965);
}
float l9_16414=l9_16413;
float l9_16415=((l9_16414*l9_16408)*l9_15969)*2.0;
float l9_16416=3.1415927*((l9_16415+l9_16407)-0.5);
float l9_16417=1.0;
if ((int(SCREENFADE_tmp)!=0))
{
float3 l9_16418=(*sc_set0.UserUniforms).sc_Camera.position;
float3 l9_16419=l9_16418-l9_16361;
float l9_16420=dot(l9_16419,l9_16419);
float l9_16421=(N111_fadeDistanceInvisible+1e-06)*(N111_fadeDistanceInvisible+1e-06);
float l9_16422=N111_fadeDistanceVisible*N111_fadeDistanceVisible;
float l9_16423=fast::min(l9_16421,l9_16422);
float l9_16424=fast::max(l9_16421,l9_16422);
float l9_16425=smoothstep(l9_16423,l9_16424,l9_16420);
float l9_16426;
if (l9_16421>l9_16422)
{
l9_16426=1.0-l9_16425;
}
else
{
l9_16426=l9_16425;
}
l9_16425=l9_16426;
if (l9_16425<=1e-06)
{
l9_16417=0.0;
}
N111_cameraFade_trailHeadTime_taper.x=l9_16425;
}
if ((MESHTYPE_tmp==0)||(int(TRAILS_tmp)!=0))
{
if ((MESHTYPE_tmp==0)||N111_isTrail)
{
int l9_16427=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_16427=0;
}
else
{
l9_16427=gl_InstanceIndex%2;
}
int l9_16428=l9_16427;
float4x4 l9_16429=(*sc_set0.UserUniforms).sc_ViewMatrixInverseArray[l9_16428];
float3 l9_16430=normalize(l9_16429[2].xyz);
if (N111_isTrail)
{
l9_16430*=float3(-1.0);
}
float3 l9_16431=float3(0.0,1.0,0.0);
if (ALIGN_TO_CAMERA_tmp==1)
{
int l9_16432=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_16432=0;
}
else
{
l9_16432=gl_InstanceIndex%2;
}
int l9_16433=l9_16432;
float3 l9_16434=(*sc_set0.UserUniforms).sc_ViewMatrixInverseArray[l9_16433][1].xyz;
l9_16431=l9_16434;
}
float3 l9_16435=-normalize(cross(l9_16430,l9_16431));
float3 l9_16436=normalize(cross(l9_16435,l9_16430));
float l9_16437=1.0;
if ((int(ALIGNPARTICLES_tmp)!=0))
{
if (ALIGN_PARTICLES_TO_OPTION_tmp==1)
{
l9_16435=float3(0.0,0.0,1.0);
l9_16436=float3(0.0,1.0,0.0);
}
if (ALIGN_PARTICLES_TO_OPTION_tmp==2)
{
l9_16435=float3(1.0,0.0,0.0);
l9_16436=float3(0.0,0.0,1.0);
}
if (ALIGN_PARTICLES_TO_OPTION_tmp==3)
{
l9_16435=float3(1.0,0.0,0.0);
l9_16436=float3(0.0,1.0,0.0);
}
}
float2 l9_16438=float2(cos(l9_16416),sin(l9_16416));
float2 l9_16439=float2(-sin(l9_16416),cos(l9_16416));
float3 l9_16440=float3((l9_16435*l9_16438.x)+(l9_16436*l9_16438.y));
float3 l9_16441=float3((l9_16435*l9_16439.x)+(l9_16436*l9_16439.y));
if ((int(ALIGNPARTICLES_tmp)!=0))
{
if (ALIGN_PARTICLES_TO_OPTION_tmp==0)
{
if (!N111_isTrail)
{
float l9_16442=l9_16437;
float3 l9_16443=l9_16440;
float3 l9_16444=l9_16441;
float3 l9_16445=l9_16430;
float3 l9_16446=l9_16359;
float3 l9_16447=l9_16055;
float3 l9_16448=l9_16056;
float3 l9_16449=l9_16057;
float3 l9_16450=normalize((((l9_16446+l9_16447)+l9_16448)+l9_16449)+float3(1e-06));
float3 l9_16451=l9_16446*0.02;
l9_16443=l9_16450;
l9_16444=normalize(cross(l9_16443,l9_16445));
if (N111_ENABLE_IGNOREVEL)
{
l9_16442=fast::max(N111_sizeVelScale,1e-06);
}
else
{
if (N111_ENABLE_IGNORETRANSFORMSCALE)
{
float4x4 l9_16452=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_16442=(length(l9_16451)/length(l9_16452[0].xyz))*N111_sizeVelScale;
}
else
{
l9_16442=length(l9_16451)*N111_sizeVelScale;
}
l9_16442=fast::clamp(l9_16442,N111_velScaleMinMax.x,N111_velScaleMinMax.y);
}
l9_16437=l9_16442;
l9_16440=l9_16443;
l9_16441=l9_16444;
}
}
}
if ((int(TRAILS_tmp)!=0))
{
if (N111_isTrail)
{
float3 l9_16453=l9_16440;
float3 l9_16454=l9_16441;
float3 l9_16455=l9_16430;
float2 l9_16456=l9_16438;
float3 l9_16457=l9_16359;
float3 l9_16458=l9_16055;
float3 l9_16459=l9_16056;
float3 l9_16460=l9_16057;
float3 l9_16461=N111_tangentIN;
float3 l9_16462=(((((l9_16457*0.02)+l9_16458)+l9_16459)+l9_16460)+l9_16461)+float3(1e-06);
float3 l9_16463=normalize(l9_16462);
l9_16453=l9_16463;
l9_16454=normalize(cross(l9_16453,l9_16455));
if ((int(TRAILTWIST_tmp)!=0))
{
l9_16454=float3((l9_16453*l9_16456.x)+(l9_16454*l9_16456.y));
}
l9_16440=l9_16453;
l9_16441=l9_16454;
}
}
float4x4 l9_16464=(*sc_set0.UserUniforms).sc_ModelMatrix;
float l9_16465=length(l9_16464[0].xyz);
float2 l9_16466=tempGlobals.Surface_UVCoord0;
float l9_16467=l9_15958;
float l9_16468=l9_15959;
float l9_16469=l9_15969;
float l9_16470=N111_sizeSpeed;
float2 l9_16471=(((l9_16466-float2(0.5))*l9_16417)*N111_pSize(l9_16467,l9_16468,l9_16469,l9_16470,N111_isTrail,N111_trailHeadTime,N111_trailSizeMult,N111_sizeStart,N111_sizeEnd,N111_sizeStartMax,N111_sizeEndMax,N111_sizeStart3D,N111_sizeEnd3D,N111_sizeStartMax3D,N111_sizeEndMax3D,gl_InstanceIndex,(*sc_set0.UserUniforms),tempGlobals,sc_set0.trailSizeRampTex,sc_set0.trailSizeRampTexSmpSC,sc_set0.sizeRampTexture,sc_set0.sizeRampTextureSmpSC))*l9_16465;
float3 l9_16472=(l9_16361+(l9_16441*l9_16471.x))+(l9_16440*(l9_16471.y*l9_16437));
N111_position=l9_16472;
if ((N111_particleAlive<0.5)||(l9_16417<0.5))
{
N111_position/=float3(0.0);
}
N111_normal=l9_16430;
}
}
if (!(MESHTYPE_tmp==0))
{
if (!N111_isTrail)
{
N111_position=N111_positionObjectSpace;
if (N111_ENABLE_CENTER_IN_BBOX)
{
float3 l9_16473=(*sc_set0.UserUniforms).sc_LocalAabbMax;
float3 l9_16474=(*sc_set0.UserUniforms).sc_LocalAabbMin;
float3 l9_16475=(l9_16473+l9_16474)/float3(2.0);
N111_position-=l9_16475;
}
float l9_16476=l9_15958;
float l9_16477=l9_15959;
float l9_16478=l9_15969;
float l9_16479=N111_sizeSpeed;
N111_position=(N111_position*l9_16350)*N111_pSize3D(l9_16476,l9_16477,l9_16478,l9_16479,N111_sizeStart3D,N111_sizeEnd3D,N111_sizeStartMax3D,N111_sizeEndMax3D,gl_InstanceIndex,(*sc_set0.UserUniforms),tempGlobals,sc_set0.sizeRampTexture,sc_set0.sizeRampTextureSmpSC);
if ((N111_particleAlive<0.5)||(l9_16417<0.5))
{
N111_position.x=2.1474836e+09;
}
float3x3 l9_16480;
if ((int(ALIGNPARTICLES_tmp)!=0))
{
if (ALIGN_PARTICLES_TO_OPTION_tmp==3)
{
l9_16480=float3x3(float3(1.0,0.0,0.0),float3(0.0,1.0,0.0),float3(0.0,0.0,1.0));
}
else
{
float3 l9_16481=float3(0.0);
if (ALIGN_PARTICLES_TO_OPTION_tmp==1)
{
l9_16481=float3(1.0,0.0,0.0);
}
if (ALIGN_PARTICLES_TO_OPTION_tmp==2)
{
l9_16481=float3(0.0,1.0,0.0);
}
if (ALIGN_PARTICLES_TO_OPTION_tmp==0)
{
float l9_16482=0.001;
float3 l9_16483=l9_16231;
float l9_16484=l9_15968-l9_16482;
float3 l9_16485=N111_velocityDrag;
float3 l9_16486=l9_15974;
float l9_16487=l9_15969-l9_16482;
float3 l9_16488=float3(l9_16484,l9_16484,l9_16484);
float3 l9_16489=l9_16485;
float l9_16490;
if (l9_16488.x<=0.0)
{
l9_16490=0.0;
}
else
{
l9_16490=pow(l9_16488.x,l9_16489.x);
}
float l9_16491=l9_16490;
float l9_16492;
if (l9_16488.y<=0.0)
{
l9_16492=0.0;
}
else
{
l9_16492=pow(l9_16488.y,l9_16489.y);
}
float l9_16493=l9_16492;
float l9_16494;
if (l9_16488.z<=0.0)
{
l9_16494=0.0;
}
else
{
l9_16494=pow(l9_16488.z,l9_16489.z);
}
float3 l9_16495=float3(l9_16491,l9_16493,l9_16494);
float3 l9_16496=l9_16495;
float3 l9_16497=(l9_16483+l9_16486)*l9_16496;
if ((int(VELRAMP_tmp)!=0))
{
float l9_16498=floor(l9_16487*10000.0)/10000.0;
float2 l9_16499=tempGlobals.Surface_UVCoord0;
float2 l9_16500=(l9_16499/float2(10000.0,1.0))+float2(l9_16498,0.0);
float2 l9_16501=l9_16500;
float4 l9_16502=float4(0.0);
int l9_16503;
if ((int(velRampTextureHasSwappedViews_tmp)!=0))
{
int l9_16504=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_16504=0;
}
else
{
l9_16504=gl_InstanceIndex%2;
}
int l9_16505=l9_16504;
l9_16503=1-l9_16505;
}
else
{
int l9_16506=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_16506=0;
}
else
{
l9_16506=gl_InstanceIndex%2;
}
int l9_16507=l9_16506;
l9_16503=l9_16507;
}
int l9_16508=l9_16503;
int l9_16509=velRampTextureLayout_tmp;
int l9_16510=l9_16508;
float2 l9_16511=l9_16501;
bool l9_16512=(int(SC_USE_UV_TRANSFORM_velRampTexture_tmp)!=0);
float3x3 l9_16513=(*sc_set0.UserUniforms).velRampTextureTransform;
int2 l9_16514=int2(SC_SOFTWARE_WRAP_MODE_U_velRampTexture_tmp,SC_SOFTWARE_WRAP_MODE_V_velRampTexture_tmp);
bool l9_16515=(int(SC_USE_UV_MIN_MAX_velRampTexture_tmp)!=0);
float4 l9_16516=(*sc_set0.UserUniforms).velRampTextureUvMinMax;
bool l9_16517=(int(SC_USE_CLAMP_TO_BORDER_velRampTexture_tmp)!=0);
float4 l9_16518=(*sc_set0.UserUniforms).velRampTextureBorderColor;
float l9_16519=0.0;
bool l9_16520=l9_16517&&(!l9_16515);
float l9_16521=1.0;
float l9_16522=l9_16511.x;
int l9_16523=l9_16514.x;
if (l9_16523==1)
{
l9_16522=fract(l9_16522);
}
else
{
if (l9_16523==2)
{
float l9_16524=fract(l9_16522);
float l9_16525=l9_16522-l9_16524;
float l9_16526=step(0.25,fract(l9_16525*0.5));
l9_16522=mix(l9_16524,1.0-l9_16524,fast::clamp(l9_16526,0.0,1.0));
}
}
l9_16511.x=l9_16522;
float l9_16527=l9_16511.y;
int l9_16528=l9_16514.y;
if (l9_16528==1)
{
l9_16527=fract(l9_16527);
}
else
{
if (l9_16528==2)
{
float l9_16529=fract(l9_16527);
float l9_16530=l9_16527-l9_16529;
float l9_16531=step(0.25,fract(l9_16530*0.5));
l9_16527=mix(l9_16529,1.0-l9_16529,fast::clamp(l9_16531,0.0,1.0));
}
}
l9_16511.y=l9_16527;
if (l9_16515)
{
bool l9_16532=l9_16517;
bool l9_16533;
if (l9_16532)
{
l9_16533=l9_16514.x==3;
}
else
{
l9_16533=l9_16532;
}
float l9_16534=l9_16511.x;
float l9_16535=l9_16516.x;
float l9_16536=l9_16516.z;
bool l9_16537=l9_16533;
float l9_16538=l9_16521;
float l9_16539=fast::clamp(l9_16534,l9_16535,l9_16536);
float l9_16540=step(abs(l9_16534-l9_16539),9.9999997e-06);
l9_16538*=(l9_16540+((1.0-float(l9_16537))*(1.0-l9_16540)));
l9_16534=l9_16539;
l9_16511.x=l9_16534;
l9_16521=l9_16538;
bool l9_16541=l9_16517;
bool l9_16542;
if (l9_16541)
{
l9_16542=l9_16514.y==3;
}
else
{
l9_16542=l9_16541;
}
float l9_16543=l9_16511.y;
float l9_16544=l9_16516.y;
float l9_16545=l9_16516.w;
bool l9_16546=l9_16542;
float l9_16547=l9_16521;
float l9_16548=fast::clamp(l9_16543,l9_16544,l9_16545);
float l9_16549=step(abs(l9_16543-l9_16548),9.9999997e-06);
l9_16547*=(l9_16549+((1.0-float(l9_16546))*(1.0-l9_16549)));
l9_16543=l9_16548;
l9_16511.y=l9_16543;
l9_16521=l9_16547;
}
float2 l9_16550=l9_16511;
bool l9_16551=l9_16512;
float3x3 l9_16552=l9_16513;
if (l9_16551)
{
l9_16550=float2((l9_16552*float3(l9_16550,1.0)).xy);
}
float2 l9_16553=l9_16550;
l9_16511=l9_16553;
float l9_16554=l9_16511.x;
int l9_16555=l9_16514.x;
bool l9_16556=l9_16520;
float l9_16557=l9_16521;
if ((l9_16555==0)||(l9_16555==3))
{
float l9_16558=l9_16554;
float l9_16559=0.0;
float l9_16560=1.0;
bool l9_16561=l9_16556;
float l9_16562=l9_16557;
float l9_16563=fast::clamp(l9_16558,l9_16559,l9_16560);
float l9_16564=step(abs(l9_16558-l9_16563),9.9999997e-06);
l9_16562*=(l9_16564+((1.0-float(l9_16561))*(1.0-l9_16564)));
l9_16558=l9_16563;
l9_16554=l9_16558;
l9_16557=l9_16562;
}
l9_16511.x=l9_16554;
l9_16521=l9_16557;
float l9_16565=l9_16511.y;
int l9_16566=l9_16514.y;
bool l9_16567=l9_16520;
float l9_16568=l9_16521;
if ((l9_16566==0)||(l9_16566==3))
{
float l9_16569=l9_16565;
float l9_16570=0.0;
float l9_16571=1.0;
bool l9_16572=l9_16567;
float l9_16573=l9_16568;
float l9_16574=fast::clamp(l9_16569,l9_16570,l9_16571);
float l9_16575=step(abs(l9_16569-l9_16574),9.9999997e-06);
l9_16573*=(l9_16575+((1.0-float(l9_16572))*(1.0-l9_16575)));
l9_16569=l9_16574;
l9_16565=l9_16569;
l9_16568=l9_16573;
}
l9_16511.y=l9_16565;
l9_16521=l9_16568;
float2 l9_16576=l9_16511;
int l9_16577=l9_16509;
int l9_16578=l9_16510;
float l9_16579=l9_16519;
float2 l9_16580=l9_16576;
int l9_16581=l9_16577;
int l9_16582=l9_16578;
float3 l9_16583=float3(0.0);
if (l9_16581==0)
{
l9_16583=float3(l9_16580,0.0);
}
else
{
if (l9_16581==1)
{
l9_16583=float3(l9_16580.x,(l9_16580.y*0.5)+(0.5-(float(l9_16582)*0.5)),0.0);
}
else
{
l9_16583=float3(l9_16580,float(l9_16582));
}
}
float3 l9_16584=l9_16583;
float3 l9_16585=l9_16584;
float4 l9_16586=sc_set0.velRampTexture.sample(sc_set0.velRampTextureSmpSC,l9_16585.xy,level(l9_16579));
float4 l9_16587=l9_16586;
if (l9_16517)
{
l9_16587=mix(l9_16518,l9_16587,float4(l9_16521));
}
float4 l9_16588=l9_16587;
l9_16502=l9_16588;
float4 l9_16589=l9_16502;
float3 l9_16590=l9_16589.xyz;
l9_16497=(l9_16483+l9_16486)*l9_16590;
if (!(SC_DEVICE_CLASS_tmp>=2))
{
l9_16497=l9_16483*l9_16496;
}
}
float3 l9_16591=l9_16497;
float3 l9_16592=l9_16591;
float l9_16593=((N111_gravity/2.0)*(l9_15968-l9_16482))*(l9_15968-l9_16482);
l9_16055.y-=l9_16593;
if ((int(FORCE_tmp)!=0))
{
float3 l9_16594=float3(((N111_localForce/float3(2.0))*(l9_15968-l9_16482))*(l9_15968-l9_16482));
l9_16056-=l9_16594;
}
if ((int(CUSTOMFORCE_tmp)!=0))
{
tempGlobals.N111_ParticleSpawnPosition=l9_15973;
float3 l9_16595=float3(0.0);
float3 l9_16596=float3(0.0);
l9_16596=tempGlobals.N111_ParticleSpawnPosition;
float l9_16597=0.0;
float l9_16598=(*sc_set0.UserUniforms).timeGlobal;
l9_16597=l9_16598;
float l9_16599=0.0;
float l9_16600=(*sc_set0.UserUniforms).externalTimeInput;
l9_16599=l9_16600;
float l9_16601=0.0;
float l9_16602=(*sc_set0.UserUniforms).externalSeed;
l9_16601=l9_16602;
float l9_16603=0.0;
float l9_16604=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_16603=l9_16604;
float2 l9_16605=float2(0.0);
float2 l9_16606=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_16605=l9_16606;
float l9_16607=0.0;
float l9_16608=(*sc_set0.UserUniforms).spawnDuration;
l9_16607=l9_16608;
float l9_16609=0.0;
float l9_16610;
if ((int(TRAILS_tmp)!=0))
{
l9_16610=1.001;
}
else
{
l9_16610=0.001;
}
l9_16610-=0.001;
l9_16609=l9_16610;
float l9_16611=0.0;
float l9_16612=(*sc_set0.UserUniforms).trailLength;
l9_16611=l9_16612;
float4 l9_16613=float4(0.0);
l9_16613=tempGlobals.VertexColor;
float l9_16614=0.0;
l9_16614=l9_16613.x;
float l9_16615=0.0;
float l9_16616=l9_16609;
bool l9_16617=(l9_16616*1.0)!=0.0;
bool l9_16618;
if (l9_16617)
{
l9_16618=(l9_16614*1.0)!=0.0;
}
else
{
l9_16618=l9_16617;
}
l9_16615=float(l9_16618);
float3 l9_16619=float3(0.0);
float l9_16620=0.0;
float l9_16621=l9_16597;
float l9_16622=l9_16599;
float l9_16623=l9_16601;
float l9_16624=l9_16603;
float2 l9_16625=l9_16605;
float l9_16626=l9_16607;
float l9_16627=l9_16611;
float l9_16628=l9_16615;
ssGlobals l9_16629=tempGlobals;
tempGlobals=l9_16629;
float3 l9_16630=float3(0.0);
float l9_16631=0.0;
N181_timeGlobal=l9_16621;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_16622;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_16623;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_16624;
N181_lifeTimeMinMax=l9_16625;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_PREWARM=(int(PREWARMSPAWN_tmp)!=0);
N181_spawnDuration=l9_16626;
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_16627;
N181_isTrailCondition=l9_16628!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_16632=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_16633=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_16632=length(float4(1.0)*l9_16633);
}
N181_globalSeed=N181_externalSeed+l9_16632;
int l9_16634=0;
l9_16634=ssInstanceID;
int l9_16635=l9_16634;
float l9_16636=float(l9_16635);
int l9_16637=int(l9_16636);
int l9_16638=l9_16637^(l9_16637*15299);
int l9_16639=l9_16638;
int l9_16640=l9_16639;
int l9_16641=((l9_16640*((l9_16640*1471343)+101146501))+1559861749)&2147483647;
int l9_16642=l9_16641;
int l9_16643=l9_16639*1399;
int l9_16644=((l9_16643*((l9_16643*1471343)+101146501))+1559861749)&2147483647;
int l9_16645=l9_16644;
int l9_16646=l9_16639*7177;
int l9_16647=((l9_16646*((l9_16646*1471343)+101146501))+1559861749)&2147483647;
int l9_16648=l9_16647;
int l9_16649=l9_16642;
float l9_16650=float(l9_16649)*4.6566129e-10;
int l9_16651=l9_16645;
float l9_16652=float(l9_16651)*4.6566129e-10;
int l9_16653=l9_16648;
float l9_16654=float(l9_16653)*4.6566129e-10;
float3 l9_16655=float3(l9_16650,l9_16652,l9_16654);
float3 l9_16656=l9_16655;
N181_particleSeed=l9_16656;
float l9_16657=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_16658;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_16658=N181_lifeTimeMinMax;
}
else
{
l9_16658=float2(N181_lifeTimeConstant);
}
float2 l9_16659=l9_16658;
float l9_16660=fast::max(l9_16659.x,0.0099999998);
float l9_16661=fast::max(l9_16659.y,0.0099999998);
float l9_16662=tempGlobals.gTimeElapsed;
float l9_16663=l9_16662;
if (N181_ENABLE_EXTERNALTIME)
{
l9_16663=N181_externalTime;
}
float l9_16664=l9_16663;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_16664=N181_timeGlobal*l9_16663;
}
else
{
float l9_16665=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_16665=N181_trailLength;
}
}
float l9_16666=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_16667=0.0;
float l9_16668;
if ((*sc_set0.UserUniforms).sc_GeometryInfo.y>1.0)
{
l9_16668=float(ssInstanceID)/((*sc_set0.UserUniforms).sc_GeometryInfo.y-1.0);
}
else
{
l9_16668=0.0;
}
l9_16667=l9_16668;
float l9_16669=l9_16667;
int l9_16670=0;
l9_16670=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_16671=l9_16670;
l9_16666=fast::max(l9_16669*(1.0-(1.0/float(l9_16671))),0.0);
}
else
{
l9_16666=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_16672=fract(((l9_16663*N181_timeGlobal)*(1.0/(l9_16659.y+l9_16665)))+l9_16666);
l9_16664=l9_16672*(l9_16659.y+l9_16665);
}
float l9_16673=mix(l9_16664/l9_16660,l9_16664/l9_16661,l9_16657);
float l9_16674=fast::clamp(l9_16673,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_16664,l9_16674);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_16675=tempGlobals.Surface_UVCoord0;
l9_16664-=(l9_16675.y*N181_trailLength);
l9_16673=mix(l9_16664/l9_16660,l9_16664/l9_16661,l9_16657);
l9_16674=fast::clamp(l9_16673,0.0,1.0);
}
}
float l9_16676=0.0;
if (!N181_ENABLE_INSTANTSPAWN)
{
if (N181_spawnDuration>0.0)
{
if (((l9_16663-N181_spawnDuration)*N181_timeGlobal)>=N181_trailHeadTime.x)
{
l9_16676=1.0;
}
}
}
float l9_16677=l9_16673+l9_16676;
N181_particleAlive=1.0;
if ((l9_16677>0.99989998)||(l9_16664<=0.0))
{
N181_particleAlive=0.0;
}
if (!N181_ENABLE_PREWARM)
{
N181_particleAlive*=step(N181_trailHeadTime.x,(l9_16663*N181_timeGlobal)-9.9999997e-05);
}
N181_timeValues=float4(l9_16659,l9_16664,l9_16674);
l9_16630=N181_particleSeed;
l9_16631=N181_isTrail;
l9_16619=l9_16630;
l9_16620=l9_16631;
float l9_16678=0.0;
float l9_16679=(*sc_set0.UserUniforms).attractRepelForceStrength;
l9_16678=l9_16679;
float3 l9_16680=float3(0.0);
float3 l9_16681=(*sc_set0.UserUniforms).customForceOrigin;
l9_16680=l9_16681;
float3 l9_16682=float3(0.0);
float3 l9_16683=l9_16596;
float3 l9_16684=l9_16619;
float l9_16685=l9_16678;
float3 l9_16686=l9_16680;
ssGlobals l9_16687=tempGlobals;
tempGlobals=l9_16687;
float3 l9_16688=float3(0.0);
N223_OnOff=(int(Tweak_N131_tmp)!=0);
N223_ParticleSpawnPosition=l9_16683;
N223_ParticleSeed=l9_16684;
N223_Strength=l9_16685;
N223_ForceOrigin=l9_16686;
N223_CustomForce=float3(0.0);
float4x4 l9_16689=(*sc_set0.UserUniforms).sc_ModelMatrix;
float4 l9_16690=l9_16689*float4(N223_ParticleSpawnPosition,1.0);
if (N223_OnOff)
{
float3 l9_16691=N223_ForceOrigin;
float3 l9_16692=l9_16690.xyz;
float l9_16693=N223_Strength;
float3 l9_16694=float3(0.0);
if (all(l9_16691==l9_16692))
{
int l9_16695=0;
l9_16695=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_16696=l9_16695;
float3 l9_16697=N223_ParticleSeed*float(l9_16696);
int l9_16698=int(l9_16697.x);
int l9_16699=int(l9_16697.y);
int l9_16700=int(l9_16697.z);
int l9_16701=((l9_16698*15299)^(l9_16699*30133))^(l9_16700*17539);
int l9_16702=l9_16701;
int l9_16703=l9_16702;
int l9_16704=((l9_16703*((l9_16703*1471343)+101146501))+1559861749)&2147483647;
int l9_16705=l9_16704;
int l9_16706=l9_16702*1399;
int l9_16707=((l9_16706*((l9_16706*1471343)+101146501))+1559861749)&2147483647;
int l9_16708=l9_16707;
int l9_16709=l9_16702*7177;
int l9_16710=((l9_16709*((l9_16709*1471343)+101146501))+1559861749)&2147483647;
int l9_16711=l9_16710;
int l9_16712=l9_16705;
float l9_16713=float(l9_16712)*4.6566129e-10;
int l9_16714=l9_16708;
float l9_16715=float(l9_16714)*4.6566129e-10;
int l9_16716=l9_16711;
float l9_16717=float(l9_16716)*4.6566129e-10;
float3 l9_16718=float3(l9_16713,l9_16715,l9_16717);
float3 l9_16719=l9_16718;
l9_16694=normalize((l9_16719-float3(0.5))*2.0);
}
else
{
l9_16694=normalize(l9_16691-l9_16692);
}
float3 l9_16720=l9_16694*l9_16693;
N223_CustomForce+=l9_16720;
}
l9_16688=N223_CustomForce;
l9_16682=l9_16688;
float3 l9_16721=float3(0.0);
l9_16721=tempGlobals.N111_ParticleSpawnPosition;
float3 l9_16722=float3(0.0);
float3 l9_16723=(*sc_set0.UserUniforms).Tex3dScale;
l9_16722=l9_16723;
float3 l9_16724=float3(0.0);
float3 l9_16725=(*sc_set0.UserUniforms).Tex3dScrollSpeed;
l9_16724=l9_16725;
float3 l9_16726=float3(0.0);
float3 l9_16727=(*sc_set0.UserUniforms).Tex3dForceStrength;
l9_16726=l9_16727;
float3 l9_16728=float3(0.0);
float3 l9_16729=l9_16721;
float3 l9_16730=l9_16722;
float3 l9_16731=l9_16724;
float3 l9_16732=l9_16726;
ssGlobals l9_16733=tempGlobals;
tempGlobals=l9_16733;
float3 l9_16734=float3(0.0);
N202_OnOff=(int(Tweak_N133_tmp)!=0);
N202_ParticleSpawnPosition=l9_16729;
N202_ScaleTexture=l9_16730;
N202_ScrollSpeed=l9_16731;
N202_Strength=l9_16732;
N202_CustomForce=float3(0.0);
if (N202_OnOff)
{
float3 l9_16735=N202_ParticleSpawnPosition;
float3 l9_16736=N202_Strength;
float3 l9_16737=l9_16735;
float l9_16738=tempGlobals.gTimeElapsed;
float3 l9_16739=float3(l9_16738)*(N202_ScrollSpeed*0.1);
l9_16737/=(N202_ScaleTexture*2.0);
l9_16737+=l9_16739;
float3 l9_16740=l9_16737;
float4 l9_16741=float4(0.0);
float3 l9_16742=l9_16740;
float l9_16743=0.0;
float4 l9_16744=sc_set0.Tex3d.sample(sc_set0.Tex3dSmpSC,l9_16742,level(l9_16743));
l9_16741=l9_16744;
float4 l9_16745=l9_16741;
float3 l9_16746=l9_16745.xyz;
float3 l9_16747=(l9_16746*2.0)-float3(1.0);
l9_16747*=l9_16736;
float3 l9_16748=l9_16747;
N202_CustomForce+=l9_16748;
}
l9_16734=N202_CustomForce;
l9_16728=l9_16734;
float3 l9_16749=float3(0.0);
l9_16749=tempGlobals.N155_helixDirection;
float3 l9_16750=float3(0.0);
l9_16750=tempGlobals.N319_curveDirection;
float3 l9_16751=float3(0.0);
float3 l9_16752=(*sc_set0.UserUniforms).Tweak_N314;
l9_16751=l9_16752;
float3 l9_16753=float3(0.0);
float l9_16754=l9_16620;
float3 l9_16755=l9_16749;
float3 l9_16756=l9_16750;
float3 l9_16757=l9_16751;
ssGlobals l9_16758=tempGlobals;
tempGlobals=l9_16758;
float3 l9_16759=float3(0.0);
N277_OnOff=(int(Tweak_N313_tmp)!=0);
N277_isTrail=l9_16754!=0.0;
N277_helixDir=l9_16755;
N277_curveDir=l9_16756;
N277_Strength=l9_16757;
N277_Path=NODE_248_DROPLIST_ITEM_tmp;
N277_DirectionForce=float3(0.0);
N277_Direction=float3(0.0);
if (N277_OnOff||N277_isTrail)
{
float3 l9_16760;
if (N277_Path==5)
{
l9_16760=N277_helixDir;
}
else
{
bool3 l9_16761=bool3(N277_Path==6);
l9_16760=float3(l9_16761.x ? N277_curveDir.x : float3(0.0).x,l9_16761.y ? N277_curveDir.y : float3(0.0).y,l9_16761.z ? N277_curveDir.z : float3(0.0).z);
}
float3 l9_16762=l9_16760;
float3 l9_16763=l9_16762;
float3 l9_16764=l9_16763;
if (N277_OnOff)
{
N277_DirectionForce+=(l9_16764*N277_Strength);
}
N277_Direction=l9_16764;
}
l9_16759=N277_DirectionForce;
l9_16753=l9_16759;
float3 l9_16765=float3(0.0);
l9_16765=(l9_16682+l9_16728)+l9_16753;
l9_16595=l9_16765;
float3 l9_16766=l9_16595;
float3 l9_16767=((l9_16766/float3(2.0))*(l9_15968-l9_16482))*(l9_15968-l9_16482);
l9_16057-=l9_16767;
}
if (rotationSpace_tmp==2)
{
l9_16481=((((l9_16230-l9_16592)*l9_16358)+l9_16055)+l9_16056)+l9_16057;
}
else
{
if (rotationSpace_tmp==1)
{
l9_16481=(((l9_16230-l9_16592)+l9_16055)+l9_16056)+l9_16057;
}
else
{
l9_16481=((((l9_16230-l9_16592)+l9_16056)+l9_16055)+l9_16057)*l9_16358;
}
}
l9_16481=normalize(l9_16481+float3(1e-06));
}
float3 l9_16768=float3(0.0,0.0,1.0);
float3 l9_16769=cross(l9_16481,l9_16768);
float3 l9_16770=normalize(l9_16769);
float l9_16771=length(l9_16769);
float l9_16772=dot(l9_16768,l9_16481);
float l9_16773=1.0-l9_16772;
l9_16480=float3x3(float3(((l9_16773*l9_16770.x)*l9_16770.x)+l9_16772,((l9_16773*l9_16770.x)*l9_16770.y)-(l9_16770.z*l9_16771),((l9_16773*l9_16770.z)*l9_16770.x)+(l9_16770.y*l9_16771)),float3(((l9_16773*l9_16770.x)*l9_16770.y)+(l9_16770.z*l9_16771),((l9_16773*l9_16770.y)*l9_16770.y)+l9_16772,((l9_16773*l9_16770.y)*l9_16770.z)-(l9_16770.x*l9_16771)),float3(((l9_16773*l9_16770.z)*l9_16770.x)-(l9_16770.y*l9_16771),((l9_16773*l9_16770.y)*l9_16770.z)+(l9_16770.x*l9_16771),((l9_16773*l9_16770.z)*l9_16770.z)+l9_16772));
}
float3x3 l9_16774=float3x3(float3(cos(l9_16416),-sin(l9_16416),0.0),float3(sin(l9_16416),cos(l9_16416),0.0),float3(0.0,0.0,1.0));
l9_16480=l9_16480*l9_16774;
if ((int(ALIGNPARTICLES_tmp)!=0))
{
if (ALIGN_PARTICLES_TO_OPTION_tmp==0)
{
if (!N111_ENABLE_IGNOREVEL)
{
float l9_16775=fast::max(length(l9_16359*0.02),1.0)*fast::max(N111_sizeVelScale,1e-06);
l9_16775=fast::clamp(l9_16775,N111_velScaleMinMax.x,N111_velScaleMinMax.y);
N111_position.z*=l9_16775;
}
}
}
}
else
{
float l9_16776=fract((N111_particleSeed.x*92.653008)+N111_globalSeed);
float l9_16777=mix(N111_rotationRandomX.x,N111_rotationRandomX.y,l9_16776);
float l9_16778=mix(N111_rotationRateX.x,N111_rotationRateX.y,l9_16776);
float l9_16779=((l9_16778*l9_16408)*l9_15969)*2.0;
float l9_16780=fract((N111_particleSeed.y*6.7557559)+N111_globalSeed);
float l9_16781=mix(N111_rotationRandomY.x,N111_rotationRandomY.y,l9_16780);
float l9_16782=mix(N111_rotationRateY.x,N111_rotationRateY.y,l9_16780);
float l9_16783=((l9_16782*l9_16408)*l9_15969)*2.0;
float l9_16784=3.1415927*(l9_16779+l9_16777);
float l9_16785=3.1415927*(l9_16783+l9_16781);
float l9_16786=3.1415927*(l9_16415+l9_16407);
float3 l9_16787=float3(l9_16784,l9_16785,l9_16786);
float l9_16788=cos(l9_16787.x);
float l9_16789=sin(l9_16787.x);
float l9_16790=cos(l9_16787.y);
float l9_16791=sin(l9_16787.y);
float l9_16792=cos(l9_16787.z);
float l9_16793=sin(l9_16787.z);
l9_16480=float3x3(float3(l9_16790*l9_16792,(l9_16788*l9_16793)+((l9_16789*l9_16791)*l9_16792),(l9_16789*l9_16793)-((l9_16788*l9_16791)*l9_16792)),float3((-l9_16790)*l9_16793,(l9_16788*l9_16792)-((l9_16789*l9_16791)*l9_16793),(l9_16789*l9_16792)+((l9_16788*l9_16791)*l9_16793)),float3(l9_16791,(-l9_16789)*l9_16790,l9_16788*l9_16790));
}
if (!(rotationSpace_tmp==1))
{
if (!(int(ALIGNPARTICLES_tmp)!=0))
{
float4x4 l9_16794=(*sc_set0.UserUniforms).sc_ModelMatrix;
float4x4 l9_16795=(*sc_set0.UserUniforms).sc_ModelMatrix;
float4x4 l9_16796=(*sc_set0.UserUniforms).sc_ModelMatrix;
float3x3 l9_16797=float3x3(float3(l9_16794[0].xyz/float3(l9_16350.x)),float3(l9_16795[1].xyz/float3(l9_16350.y)),float3(l9_16796[2].xyz/float3(l9_16350.z)));
l9_16480=l9_16797*l9_16480;
}
}
N111_position=l9_16480*N111_position;
N111_normal=normalize(l9_16480*N111_normalObjectSpace);
N111_position+=l9_16361;
}
}
N111_timeValues=float4(l9_15967,l9_15968,l9_15969);
l9_12719=N111_cameraFade_trailHeadTime_taper;
l9_12717=l9_12719;
l9_12716=l9_12717;
out.Interpolator1.x=l9_12716.x;
out.Interpolator1.y=l9_12716.y;
out.Interpolator1.z=l9_12716.z;
out.Interpolator1.w=l9_12716.w;
out.Interpolator_gInstanceRatio=Globals.gInstanceRatio;
float3 param_31=out.varPosAndMotion.xyz;
if ((int(sc_MotionVectorsPass_tmp)!=0))
{
float4 l9_16798=((*sc_set0.UserUniforms).sc_PrevFrameModelMatrix*(*sc_set0.UserUniforms).sc_ModelMatrixInverse)*float4(param_31,1.0);
float3 l9_16799=param_31;
float3 l9_16800=l9_16798.xyz;
if ((int(sc_MotionVectorsPass_tmp)!=0))
{
int l9_16801=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_16801=0;
}
else
{
l9_16801=gl_InstanceIndex%2;
}
int l9_16802=l9_16801;
float4 l9_16803=(*sc_set0.UserUniforms).sc_ViewProjectionMatrixArray[l9_16802]*float4(l9_16799,1.0);
float2 l9_16804=l9_16803.xy/float2(l9_16803.w);
l9_16803=float4(l9_16804.x,l9_16804.y,l9_16803.z,l9_16803.w);
int l9_16805=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_16805=0;
}
else
{
l9_16805=gl_InstanceIndex%2;
}
int l9_16806=l9_16805;
float4 l9_16807=(*sc_set0.UserUniforms).sc_PrevFrameViewProjectionMatrixArray[l9_16806]*float4(l9_16800,1.0);
float2 l9_16808=l9_16807.xy/float2(l9_16807.w);
l9_16807=float4(l9_16808.x,l9_16808.y,l9_16807.z,l9_16807.w);
float2 l9_16809=(l9_16803.xy-l9_16807.xy)*0.5;
out.varPosAndMotion.w=l9_16809.x;
out.varNormalAndMotion.w=l9_16809.y;
}
}
if (PreviewInfo.Saved)
{
out.PreviewVertexColor=float4(PreviewInfo.Color.xyz,1.0);
out.PreviewVertexSaved=1.0;
}
return out;
}
} // VERTEX SHADER


namespace SNAP_FS {
struct SurfaceProperties
{
float3 albedo;
float opacity;
float3 normal;
float3 positionWS;
float3 viewDirWS;
float metallic;
float roughness;
float3 emissive;
float3 ao;
float3 specularAo;
float3 bakedShadows;
float3 specColor;
};
struct LightingComponents
{
float3 directDiffuse;
float3 directSpecular;
float3 indirectDiffuse;
float3 indirectSpecular;
float3 emitted;
float3 transmitted;
};
struct LightProperties
{
float3 direction;
float3 color;
float attenuation;
};
struct sc_SphericalGaussianLight_t
{
float3 color;
float sharpness;
float3 axis;
};
struct ssGlobals
{
float gTimeElapsed;
float gTimeDelta;
float gTimeElapsedShifted;
float3 N155_helixDirection;
float3 N319_curveDirection;
float3 N111_ParticleSpawnPosition;
float3 SurfacePosition_WorldSpace;
float CameraFOV;
float2 Surface_UVCoord0;
float4 VertexColor;
float gInstanceID;
float3 BumpedNormal;
float3 ViewDirWS;
float3 PositionWS;
float3 VertexTangent_WorldSpace;
float3 VertexNormal_WorldSpace;
float3 VertexBinormal_WorldSpace;
float2 gScreenCoord;
float gInstanceRatio;
float3 SurfacePosition_ObjectSpace;
float3 VertexNormal_ObjectSpace;
};
struct sc_PointLight_t
{
int falloffEnabled;
float falloffEndDistance;
float negRcpFalloffEndDistance4;
float angleScale;
float angleOffset;
float3 direction;
float3 position;
float4 color;
};
struct sc_DirectionalLight_t
{
float3 direction;
float4 color;
};
struct sc_AmbientLight_t
{
float3 color;
float intensity;
};
struct sc_LightEstimationData_t
{
sc_SphericalGaussianLight_t sg[12];
float3 ambientLight;
};
struct sc_Camera_t
{
float3 position;
float aspect;
float2 clipPlanes;
};
struct userUniformsObj
{
sc_PointLight_t sc_PointLights[3];
sc_DirectionalLight_t sc_DirectionalLights[5];
sc_AmbientLight_t sc_AmbientLights[3];
sc_LightEstimationData_t sc_LightEstimationData;
float4 sc_EnvmapDiffuseSize;
float4 sc_EnvmapDiffuseDims;
float4 sc_EnvmapDiffuseView;
float4 sc_EnvmapSpecularSize;
float4 sc_EnvmapSpecularDims;
float4 sc_EnvmapSpecularView;
float3 sc_EnvmapRotation;
float sc_EnvmapExposure;
float3 sc_Sh[9];
float sc_ShIntensity;
float4 sc_Time;
float4 sc_UniformConstants;
float4 sc_GeometryInfo;
float4x4 sc_ModelViewProjectionMatrixArray[2];
float4x4 sc_ModelViewProjectionMatrixInverseArray[2];
float4x4 sc_ViewProjectionMatrixArray[2];
float4x4 sc_ViewProjectionMatrixInverseArray[2];
float4x4 sc_ModelViewMatrixArray[2];
float4x4 sc_ModelViewMatrixInverseArray[2];
float3x3 sc_ViewNormalMatrixArray[2];
float3x3 sc_ViewNormalMatrixInverseArray[2];
float4x4 sc_ProjectionMatrixArray[2];
float4x4 sc_ProjectionMatrixInverseArray[2];
float4x4 sc_ViewMatrixArray[2];
float4x4 sc_ViewMatrixInverseArray[2];
float4x4 sc_PrevFrameViewProjectionMatrixArray[2];
float4x4 sc_ModelMatrix;
float4x4 sc_ModelMatrixInverse;
float3x3 sc_NormalMatrix;
float3x3 sc_NormalMatrixInverse;
float4x4 sc_PrevFrameModelMatrix;
float4x4 sc_PrevFrameModelMatrixInverse;
float3 sc_LocalAabbMin;
float3 sc_LocalAabbMax;
float3 sc_WorldAabbMin;
float3 sc_WorldAabbMax;
float4 sc_WindowToViewportTransform;
float4 sc_CurrentRenderTargetDims;
sc_Camera_t sc_Camera;
float sc_ShadowDensity;
float4 sc_ShadowColor;
float4x4 sc_ProjectorMatrix;
float shaderComplexityValue;
float4 weights0;
float4 weights1;
float4 weights2;
float4 sc_StereoClipPlanes[2];
int sc_FallbackInstanceID;
float2 sc_TAAJitterOffset;
float strandWidth;
float strandTaper;
float4 sc_StrandDataMapTextureSize;
float clumpInstanceCount;
float clumpRadius;
float clumpTipScale;
float hairstyleInstanceCount;
float hairstyleNoise;
float4 sc_ScreenTextureSize;
float4 sc_ScreenTextureDims;
float4 sc_ScreenTextureView;
int sc_RayTracingReceiverEffectsMask;
float4 sc_RayTracingReflectionsSize;
float4 sc_RayTracingReflectionsDims;
float4 sc_RayTracingReflectionsView;
float4 sc_RayTracingGlobalIlluminationSize;
float4 sc_RayTracingGlobalIlluminationDims;
float4 sc_RayTracingGlobalIlluminationView;
float4 sc_RayTracingShadowsSize;
float4 sc_RayTracingShadowsDims;
float4 sc_RayTracingShadowsView;
float3 sc_RayTracingOriginScale;
uint sc_RayTracingReceiverMask;
float3 sc_RayTracingOriginScaleInv;
float3 sc_RayTracingOriginOffset;
uint sc_RayTracingReceiverId;
float4 voxelization_params_0;
float4 voxelization_params_frustum_lrbt;
float4 voxelization_params_frustum_nf;
float3 voxelization_params_camera_pos;
float4x4 sc_ModelMatrixVoxelization;
float correctedIntensity;
float4 intensityTextureSize;
float4 intensityTextureDims;
float4 intensityTextureView;
float3x3 intensityTextureTransform;
float4 intensityTextureUvMinMax;
float4 intensityTextureBorderColor;
float reflBlurWidth;
float reflBlurMinRough;
float reflBlurMaxRough;
int overrideTimeEnabled;
float overrideTimeElapsed[32];
float overrideTimeDelta;
int PreviewEnabled;
int PreviewNodeID;
float alphaTestThreshold;
float timeGlobal;
float externalTimeInput;
float externalSeed;
float lifeTimeConstant;
float2 lifeTimeMinMax;
float spawnDuration;
float trailLength;
float2 trailTaper;
float trailWidth;
float4 trailSizeRampTexSize;
float4 trailSizeRampTexDims;
float4 trailSizeRampTexView;
float3x3 trailSizeRampTexTransform;
float4 trailSizeRampTexUvMinMax;
float4 trailSizeRampTexBorderColor;
float Tweak_N255;
float Tweak_N254;
float3 Tweak_N252;
float3 Tweak_N253;
float Tweak_N224;
float3 Tweak_N250;
float3 Tweak_N251;
float volumeFill;
float Tweak_N238;
float Tweak_N16;
float Tweak_N234;
float Tweak_N239;
float2 Tweak_N240;
float3 Tweak_N241;
float3 Tweak_N242;
float Tweak_N226;
float Tweak_N243;
float Tweak_N257;
float Tweak_N258;
float2 Tweak_N259;
float3 Tweak_N260;
float3 Tweak_N261;
float Tweak_N262;
float Tweak_N263;
float3 Tweak_N236;
float3 Tweak_N237;
float3 Tweak_N264;
float Tweak_N232;
float Tweak_N233;
float Tweak_N231;
float Tweak_N304;
float Tweak_N229;
int Tweak_N280;
float3 Tweak_N157_curveData;
float4 sc_CurveAtlasSize;
float4 sc_CurveAtlasDims;
float4 sc_CurveAtlasView;
float3x3 sc_CurveAtlasTransform;
float4 sc_CurveAtlasUvMinMax;
float4 sc_CurveAtlasBorderColor;
float Tweak_N285;
float Tweak_N245;
float Tweak_N230;
int animated;
float Tweak_N279;
int Tweak_N303;
float2 Tweak_N336;
float3 Tweak_N293_curveData;
float3 Tweak_N305_curveData;
float3 Tweak_N297_curveData;
float Tweak_N298;
float3 Tweak_N330;
int Tweak_N308;
float Tweak_N294;
int Tweak_N339;
float2 Tweak_N342;
float Tweak_N301;
int Tweak_N274;
float3 Tweak_N299_curveData;
float Tweak_N302;
float Tweak_N318;
int Tweak_N271;
float Tweak_N273;
float2 Tweak_N270;
float2 Tweak_N272;
float Tweak_N269;
float Tweak_N275;
int Tweak_N161;
float3 spawnBox;
float3 spawnSphere;
float3 noiseMult;
float3 noiseFrequency;
float3 sNoiseMult;
float3 sNoiseFrequency;
float3 velocityMin;
float3 velocityMax;
float3 velocityDrag;
float4 velRampTextureSize;
float4 velRampTextureDims;
float4 velRampTextureView;
float3x3 velRampTextureTransform;
float4 velRampTextureUvMinMax;
float4 velRampTextureBorderColor;
float2 sizeStart;
float2 sizeEnd;
float2 sizeStartMax;
float2 sizeEndMax;
float3 sizeStart3D;
float3 sizeEnd3D;
float3 sizeStartMax3D;
float3 sizeEndMax3D;
float sizeSpeed;
float4 sizeRampTextureSize;
float4 sizeRampTextureDims;
float4 sizeRampTextureView;
float3x3 sizeRampTextureTransform;
float4 sizeRampTextureUvMinMax;
float4 sizeRampTextureBorderColor;
float gravity;
float3 localForce;
float attractRepelForceStrength;
float3 customForceOrigin;
float4 Tex3dSize;
float2 Tex3dDepth;
float3 Tex3dScale;
float3 Tex3dScrollSpeed;
float3 Tex3dForceStrength;
float3 Tweak_N314;
float sizeVelScale;
int IGNOREVEL;
int NORMALIZESCALETOTRANSFORM;
float2 velScaleMinMax;
float2 rotationRandom;
float2 rotationRate;
float2 rotationRandomX;
float2 rotationRateX;
float2 randomRotationY;
float2 rotationRateY;
float2 randomRotationZ;
float2 rotationRateZ;
float rotationDrag;
int CENTER_BBOX;
float4 displace3dTexSize;
float2 displace3dTexDepth;
float3 displaceScale;
float3 displaceSpeed;
float3 displaceStrength;
float3 orbitAxis;
float3 orbitCenter;
float2 orbitMinMaxAngle;
float2 orbitMinMaxSpeed;
float fadeDistanceVisible;
float fadeDistanceInvisible;
int circularMask;
int squareMask;
float maskTreshold;
float maskFeather;
float4 trailTexSize;
float4 trailTexDims;
float4 trailTexView;
float3x3 trailTexTransform;
float4 trailTexUvMinMax;
float4 trailTexBorderColor;
float4 trailColorRampTexSize;
float4 trailColorRampTexDims;
float4 trailColorRampTexView;
float3x3 trailColorRampTexTransform;
float4 trailColorRampTexUvMinMax;
float4 trailColorRampTexBorderColor;
float2 trailFadeStartEnd;
float2 trailFadeInOut;
float3 colorStart;
float3 colorEnd;
float3 colorMinStart;
float3 colorMinEnd;
float3 colorMaxStart;
float3 colorMaxEnd;
float alphaStart;
float alphaEnd;
float alphaMinStart;
float alphaMinEnd;
float alphaMaxStart;
float alphaMaxEnd;
float alphaDissolveMult;
float numValidFrames;
float2 gridSize;
float flipBookSpeedMult;
float flipBookRandomStart;
float4 colorRampTextureSize;
float4 colorRampTextureDims;
float4 colorRampTextureView;
float3x3 colorRampTextureTransform;
float4 colorRampTextureUvMinMax;
float4 colorRampTextureBorderColor;
float4 colorRampMult;
float4 mainTextureSize;
float4 mainTextureDims;
float4 mainTextureView;
float3x3 mainTextureTransform;
float4 mainTextureUvMinMax;
float4 mainTextureBorderColor;
float4 normalTexPBRSize;
float4 normalTexPBRDims;
float4 normalTexPBRView;
float3x3 normalTexPBRTransform;
float4 normalTexPBRUvMinMax;
float4 normalTexPBRBorderColor;
float metallic;
float roughness;
float intensityMatcap;
float4 matcapTexSize;
float4 matcapTexDims;
float4 matcapTexView;
float3x3 matcapTexTransform;
float4 matcapTexUvMinMax;
float4 matcapTexBorderColor;
float4 normalTexMatcapSize;
float4 normalTexMatcapDims;
float4 normalTexMatcapView;
float3x3 normalTexMatcapTransform;
float4 normalTexMatcapUvMinMax;
float4 normalTexMatcapBorderColor;
float4 depthMapSize;
float4 depthMapDims;
float4 depthMapView;
float3x3 depthMapTransform;
float4 depthMapUvMinMax;
float4 depthMapBorderColor;
float4 depthMapProjectionMatrixTerms;
float startFade;
float endFade;
float exponentFade;
int texMask;
int texMaskInvert;
float4 segTexSize;
float4 segTexDims;
float4 segTexView;
float3x3 segTexTransform;
float4 segTexUvMinMax;
float4 segTexBorderColor;
float Port_Input1_N119;
float3 Port_Default_N247;
float Port_Input1_N069;
float Port_Input1_N068;
float Port_Input1_N216;
float3 Port_Emissive_N014;
float3 Port_AO_N014;
float3 Port_SpecularAO_N014;
float Port_Import_N283;
float3 Port_Import_N286;
};
struct sc_PointLight_t_1
{
bool falloffEnabled;
float falloffEndDistance;
float negRcpFalloffEndDistance4;
float angleScale;
float angleOffset;
float3 direction;
float3 position;
float4 color;
};
struct ssPreviewInfo
{
float4 Color;
bool Saved;
};
struct sc_Bone_t
{
float4 boneMatrix[3];
float4 normalMatrix[3];
};
struct sc_Bones_obj
{
sc_Bone_t sc_Bones[1];
};
struct sc_Set0
{
constant sc_Bones_obj* sc_BonesUBO [[id(0)]];
texture3d<float> Tex3d [[id(1)]];
texture2d<float> colorRampTexture [[id(2)]];
texture2d<float> depthMap [[id(3)]];
texture3d<float> displace3dTex [[id(4)]];
texture2d<float> intensityTexture [[id(5)]];
texture2d<float> mainTexture [[id(6)]];
texture2d<float> matcapTex [[id(7)]];
texture2d<float> normalTexMatcap [[id(8)]];
texture2d<float> normalTexPBR [[id(9)]];
texture2d<float> sc_CurveAtlas [[id(10)]];
texture2d<float> sc_EnvmapDiffuse [[id(11)]];
texture2d<float> sc_EnvmapSpecular [[id(12)]];
texture2d<float> sc_RayTracingGlobalIllumination [[id(21)]];
texture2d<float> sc_RayTracingReflections [[id(22)]];
texture2d<float> sc_RayTracingShadows [[id(23)]];
texture2d<float> sc_SSAOTexture [[id(24)]];
texture2d<float> sc_ScreenTexture [[id(25)]];
texture2d<float> sc_ShadowTexture [[id(26)]];
texture2d<float> segTex [[id(28)]];
texture2d<float> sizeRampTexture [[id(29)]];
texture2d<float> trailColorRampTex [[id(30)]];
texture2d<float> trailSizeRampTex [[id(31)]];
texture2d<float> trailTex [[id(32)]];
texture2d<float> velRampTexture [[id(33)]];
sampler Tex3dSmpSC [[id(34)]];
sampler colorRampTextureSmpSC [[id(35)]];
sampler depthMapSmpSC [[id(36)]];
sampler displace3dTexSmpSC [[id(37)]];
sampler intensityTextureSmpSC [[id(38)]];
sampler mainTextureSmpSC [[id(39)]];
sampler matcapTexSmpSC [[id(40)]];
sampler normalTexMatcapSmpSC [[id(41)]];
sampler normalTexPBRSmpSC [[id(42)]];
sampler sc_CurveAtlasSmpSC [[id(43)]];
sampler sc_EnvmapDiffuseSmpSC [[id(44)]];
sampler sc_EnvmapSpecularSmpSC [[id(45)]];
sampler sc_RayTracingGlobalIlluminationSmpSC [[id(47)]];
sampler sc_RayTracingReflectionsSmpSC [[id(48)]];
sampler sc_RayTracingShadowsSmpSC [[id(49)]];
sampler sc_SSAOTextureSmpSC [[id(50)]];
sampler sc_ScreenTextureSmpSC [[id(51)]];
sampler sc_ShadowTextureSmpSC [[id(52)]];
sampler segTexSmpSC [[id(54)]];
sampler sizeRampTextureSmpSC [[id(55)]];
sampler trailColorRampTexSmpSC [[id(56)]];
sampler trailSizeRampTexSmpSC [[id(57)]];
sampler trailTexSmpSC [[id(58)]];
sampler velRampTextureSmpSC [[id(59)]];
constant userUniformsObj* UserUniforms [[id(60)]];
};
struct main_frag_out
{
float4 sc_FragData0 [[color(0)]];
};
struct main_frag_in
{
float4 varPosAndMotion [[user(locn0)]];
float4 varNormalAndMotion [[user(locn1)]];
float4 varTangent [[user(locn2)]];
float4 varTex01 [[user(locn3)]];
float4 varScreenPos [[user(locn4)]];
float2 varScreenTexturePos [[user(locn5)]];
float varViewSpaceDepth [[user(locn6)]];
float2 varShadowTex [[user(locn7)]];
int varStereoViewID [[user(locn8)]];
float varClipDistance [[user(locn9)]];
float4 varColor [[user(locn10)]];
float4 PreviewVertexColor [[user(locn11)]];
float PreviewVertexSaved [[user(locn12)]];
float Interpolator_gInstanceID [[user(locn13)]];
float4 Interpolator0 [[user(locn14)]];
float4 Interpolator1 [[user(locn15)]];
float Interpolator_gInstanceRatio [[user(locn16)]];
};
// Implementation of the GLSL mod() function,which is slightly different than Metal fmod()
template<typename Tx,typename Ty>
Tx mod(Tx x,Ty y)
{
return x-y*floor(x/y);
}
// Implementation of the GLSL radians() function
template<typename T>
T radians(T d)
{
return d*T(0.01745329251);
}
float3 evaluateSSAO(thread const float3& positionWS,thread int& varStereoViewID,constant userUniformsObj& UserUniforms,thread texture2d<float> sc_SSAOTexture,thread sampler sc_SSAOTextureSmpSC)
{
if ((int(sc_SSAOEnabled_tmp)!=0))
{
int l9_0=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_0=0;
}
else
{
l9_0=varStereoViewID;
}
int l9_1=l9_0;
float4 clipSpaceCoord=UserUniforms.sc_ViewProjectionMatrixArray[l9_1]*float4(positionWS,1.0);
float3 l9_2=clipSpaceCoord.xyz/float3(clipSpaceCoord.w);
clipSpaceCoord=float4(l9_2.x,l9_2.y,l9_2.z,clipSpaceCoord.w);
float4 shadowSample=sc_SSAOTexture.sample(sc_SSAOTextureSmpSC,((clipSpaceCoord.xy*0.5)+float2(0.5)));
return float3(shadowSample.x);
}
else
{
return float3(1.0);
}
}
float3 calculateDirectSpecular(thread const SurfaceProperties& surfaceProperties,thread const float3& L,thread const float3& V)
{
float r=fast::max(surfaceProperties.roughness,0.029999999);
float3 F0=surfaceProperties.specColor;
float3 N=surfaceProperties.normal;
float3 H=normalize(L+V);
float param=dot(N,L);
float l9_0=fast::clamp(param,0.0,1.0);
float NdotL=l9_0;
float param_1=dot(N,V);
float l9_1=fast::clamp(param_1,0.0,1.0);
float NdotV=l9_1;
float param_2=dot(N,H);
float l9_2=fast::clamp(param_2,0.0,1.0);
float NdotH=l9_2;
float param_3=dot(V,H);
float l9_3=fast::clamp(param_3,0.0,1.0);
float VdotH=l9_3;
if (SC_DEVICE_CLASS_tmp>=2)
{
float param_4=NdotH;
float param_5=r;
float l9_4=param_5*param_5;
float l9_5=l9_4*l9_4;
float l9_6=param_4*param_4;
float l9_7=(l9_6*(l9_5-1.0))+1.0;
float l9_8=l9_7*l9_7;
float l9_9=9.9999999e-09;
float l9_10=l9_5/(l9_8+l9_9);
float param_6=NdotL;
float param_7=NdotV;
float param_8=r;
float l9_11=param_6;
float l9_12=param_8;
float l9_13=l9_12+1.0;
l9_13=(l9_13*l9_13)*0.125;
float l9_14=(l9_11*(1.0-l9_13))+l9_13;
float l9_15=param_7;
float l9_16=param_8;
float l9_17=l9_16+1.0;
l9_17=(l9_17*l9_17)*0.125;
float l9_18=(l9_15*(1.0-l9_17))+l9_17;
float l9_19=1.0/(l9_14*l9_18);
float param_9=VdotH;
float3 param_10=F0;
float l9_20=param_9;
float3 l9_21=param_10;
float3 l9_22=float3(1.0);
float l9_23=1.0-l9_20;
float l9_24=l9_23*l9_23;
float l9_25=(l9_24*l9_24)*l9_23;
float3 l9_26=l9_21+((l9_22-l9_21)*l9_25);
float3 l9_27=l9_26;
return l9_27*(((l9_10*l9_19)*0.25)*NdotL);
}
else
{
float specPower=exp2(11.0-(10.0*r));
float param_11=VdotH;
float3 param_12=F0;
float l9_28=param_11;
float3 l9_29=param_12;
float3 l9_30=float3(1.0);
float l9_31=1.0-l9_28;
float l9_32=l9_31*l9_31;
float l9_33=(l9_32*l9_32)*l9_31;
float3 l9_34=l9_29+((l9_30-l9_29)*l9_33);
float3 l9_35=l9_34;
return ((l9_35*((specPower*0.125)+0.25))*pow(NdotH,specPower))*NdotL;
}
}
float computeDistanceAttenuation(thread const float& distanceToLight,thread const float& falloffEndDistance)
{
float distanceToLightSquared=distanceToLight*distanceToLight;
if (falloffEndDistance==0.0)
{
return 1.0/distanceToLightSquared;
}
float distanceToLightToTheFourth=distanceToLightSquared*distanceToLightSquared;
float falloffEndDistanceToTheFourth=pow(falloffEndDistance,4.0);
return fast::max(fast::min(1.0-(distanceToLightToTheFourth/falloffEndDistanceToTheFourth),1.0),0.0)/distanceToLightSquared;
}
float2 calcSeamlessPanoramicUvsForSampling(thread const float2& uv,thread const float2& topMipRes,thread const float& lod)
{
if (SC_DEVICE_CLASS_tmp>=2)
{
float2 thisMipRes=fast::max(float2(1.0),topMipRes/float2(exp2(lod)));
return ((uv*(thisMipRes-float2(1.0)))/thisMipRes)+(float2(0.5)/thisMipRes);
}
else
{
return uv;
}
}
float3 getSpecularDominantDir(thread const float3& N,thread const float3& R,thread const float& roughness)
{
if (SC_DEVICE_CLASS_tmp>=2)
{
float lerpFactor=(roughness*roughness)*roughness;
return normalize(mix(R,N,float3(lerpFactor)));
}
else
{
return R;
}
}
float3 envBRDFApprox(thread const SurfaceProperties& surfaceProperties,thread const float& NdotV)
{
if (SC_DEVICE_CLASS_tmp>=2)
{
float param=surfaceProperties.roughness;
float param_1=NdotV;
float4 l9_0=(float4(-1.0,-0.0275,-0.57200003,0.022)*param)+float4(1.0,0.0425,1.04,-0.039999999);
float l9_1=(fast::min(l9_0.x*l9_0.x,exp2((-9.2799997)*param_1))*l9_0.x)+l9_0.y;
float2 l9_2=(float2(-1.04,1.04)*l9_1)+l9_0.zw;
float2 l9_3=l9_2;
float2 AB=l9_3;
return fast::max((surfaceProperties.specColor*AB.x)+float3(AB.y),float3(0.0));
}
else
{
float3 fresnelMax=fast::max(float3(1.0-surfaceProperties.roughness),surfaceProperties.specColor);
float param_2=NdotV;
float3 param_3=surfaceProperties.specColor;
float3 param_4=fresnelMax;
float l9_4=1.0-param_2;
float l9_5=l9_4*l9_4;
float l9_6=(l9_5*l9_5)*l9_4;
float3 l9_7=param_3+((param_4-param_3)*l9_6);
return l9_7;
}
}
float srgbToLinear(thread const float& x)
{
if (SC_DEVICE_CLASS_tmp>=2)
{
return pow(x,2.2);
}
else
{
return x*x;
}
}
float linearToSrgb(thread const float& x)
{
if (SC_DEVICE_CLASS_tmp>=2)
{
return pow(x,0.45454547);
}
else
{
return sqrt(x);
}
}
float2 N111_pSize(thread const float& random1,thread const float& random2,thread const float& timeIn,thread const float& N111_sizeSpeed,thread bool& N111_isTrail,thread float2& N111_trailHeadTime,thread float& N111_trailSizeMult,thread float2& N111_sizeStart,thread float2& N111_sizeEnd,thread float2& N111_sizeStartMax,thread float2& N111_sizeEndMax,thread float3& N111_sizeStart3D,thread float3& N111_sizeEnd3D,thread float3& N111_sizeStartMax3D,thread float3& N111_sizeEndMax3D,thread int& varStereoViewID,constant userUniformsObj& UserUniforms,thread ssGlobals& tempGlobals,thread texture2d<float> trailSizeRampTex,thread sampler trailSizeRampTexSmpSC,thread texture2d<float> sizeRampTexture,thread sampler sizeRampTextureSmpSC)
{
float2 psizeStart=float2(0.0);
float2 psizeEnd=float2(0.0);
float normTime=timeIn;
if ((int(TRAILS_tmp)!=0))
{
if (!(TRAILBEHAVIOR_tmp!=0))
{
normTime=N111_trailHeadTime.y;
}
}
float param=normTime;
float param_1=N111_sizeSpeed;
float l9_0;
if (param<=0.0)
{
l9_0=0.0;
}
else
{
l9_0=pow(param,param_1);
}
float l9_1=l9_0;
float sizePow=l9_1;
if ((int(SIZEMINMAX_tmp)!=0))
{
if (MESHTYPE_tmp==0)
{
psizeStart=mix(N111_sizeStart,N111_sizeStartMax,float2(random1));
}
else
{
psizeStart=mix(N111_sizeStart3D.xy,N111_sizeStartMax3D.xy,float2(random1));
}
if ((int(SIZERAMP_tmp)!=0))
{
if ((int(ENABLE_SIZERAMPSTARTENDASBOUNDS_tmp)!=0))
{
if (MESHTYPE_tmp==0)
{
psizeEnd=mix(N111_sizeEnd,N111_sizeEndMax,float2(random2));
}
else
{
psizeEnd=mix(N111_sizeEnd3D.xy,N111_sizeEndMax3D.xy,float2(random1));
}
}
}
else
{
if (MESHTYPE_tmp==0)
{
psizeEnd=mix(N111_sizeEnd,N111_sizeEndMax,float2(random2));
}
else
{
psizeEnd=mix(N111_sizeEnd3D.xy,N111_sizeEndMax3D.xy,float2(random1));
}
}
}
else
{
if (MESHTYPE_tmp==0)
{
psizeStart=N111_sizeStart;
}
else
{
psizeStart=N111_sizeStart3D.xy;
}
if ((int(SIZERAMP_tmp)!=0))
{
if ((int(ENABLE_SIZERAMPSTARTENDASBOUNDS_tmp)!=0))
{
if (MESHTYPE_tmp==0)
{
psizeEnd=N111_sizeEnd;
}
else
{
psizeEnd=N111_sizeEnd3D.xy;
}
}
}
else
{
if (MESHTYPE_tmp==0)
{
psizeEnd=N111_sizeEnd;
}
else
{
psizeEnd=N111_sizeEnd3D.xy;
}
}
}
float2 sizeLife=mix(psizeStart,psizeEnd,float2(sizePow));
if (!(SC_DEVICE_CLASS_tmp>=2))
{
return sizeLife;
}
if ((int(SIZERAMP_tmp)!=0))
{
float sizeRampPanning=ceil(normTime*10000.0)/10000.0;
float2 l9_2=tempGlobals.Surface_UVCoord0;
float2 sizeRampUV=(l9_2/float2(10000.0,1.0))+float2(sizeRampPanning,0.0);
float2 param_2=sizeRampUV;
float4 l9_3=float4(0.0);
int l9_4;
if ((int(sizeRampTextureHasSwappedViews_tmp)!=0))
{
int l9_5=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_5=0;
}
else
{
l9_5=varStereoViewID;
}
int l9_6=l9_5;
l9_4=1-l9_6;
}
else
{
int l9_7=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_7=0;
}
else
{
l9_7=varStereoViewID;
}
int l9_8=l9_7;
l9_4=l9_8;
}
int l9_9=l9_4;
int l9_10=sizeRampTextureLayout_tmp;
int l9_11=l9_9;
float2 l9_12=param_2;
bool l9_13=(int(SC_USE_UV_TRANSFORM_sizeRampTexture_tmp)!=0);
float3x3 l9_14=UserUniforms.sizeRampTextureTransform;
int2 l9_15=int2(SC_SOFTWARE_WRAP_MODE_U_sizeRampTexture_tmp,SC_SOFTWARE_WRAP_MODE_V_sizeRampTexture_tmp);
bool l9_16=(int(SC_USE_UV_MIN_MAX_sizeRampTexture_tmp)!=0);
float4 l9_17=UserUniforms.sizeRampTextureUvMinMax;
bool l9_18=(int(SC_USE_CLAMP_TO_BORDER_sizeRampTexture_tmp)!=0);
float4 l9_19=UserUniforms.sizeRampTextureBorderColor;
float l9_20=0.0;
bool l9_21=l9_18&&(!l9_16);
float l9_22=1.0;
float l9_23=l9_12.x;
int l9_24=l9_15.x;
if (l9_24==1)
{
l9_23=fract(l9_23);
}
else
{
if (l9_24==2)
{
float l9_25=fract(l9_23);
float l9_26=l9_23-l9_25;
float l9_27=step(0.25,fract(l9_26*0.5));
l9_23=mix(l9_25,1.0-l9_25,fast::clamp(l9_27,0.0,1.0));
}
}
l9_12.x=l9_23;
float l9_28=l9_12.y;
int l9_29=l9_15.y;
if (l9_29==1)
{
l9_28=fract(l9_28);
}
else
{
if (l9_29==2)
{
float l9_30=fract(l9_28);
float l9_31=l9_28-l9_30;
float l9_32=step(0.25,fract(l9_31*0.5));
l9_28=mix(l9_30,1.0-l9_30,fast::clamp(l9_32,0.0,1.0));
}
}
l9_12.y=l9_28;
if (l9_16)
{
bool l9_33=l9_18;
bool l9_34;
if (l9_33)
{
l9_34=l9_15.x==3;
}
else
{
l9_34=l9_33;
}
float l9_35=l9_12.x;
float l9_36=l9_17.x;
float l9_37=l9_17.z;
bool l9_38=l9_34;
float l9_39=l9_22;
float l9_40=fast::clamp(l9_35,l9_36,l9_37);
float l9_41=step(abs(l9_35-l9_40),9.9999997e-06);
l9_39*=(l9_41+((1.0-float(l9_38))*(1.0-l9_41)));
l9_35=l9_40;
l9_12.x=l9_35;
l9_22=l9_39;
bool l9_42=l9_18;
bool l9_43;
if (l9_42)
{
l9_43=l9_15.y==3;
}
else
{
l9_43=l9_42;
}
float l9_44=l9_12.y;
float l9_45=l9_17.y;
float l9_46=l9_17.w;
bool l9_47=l9_43;
float l9_48=l9_22;
float l9_49=fast::clamp(l9_44,l9_45,l9_46);
float l9_50=step(abs(l9_44-l9_49),9.9999997e-06);
l9_48*=(l9_50+((1.0-float(l9_47))*(1.0-l9_50)));
l9_44=l9_49;
l9_12.y=l9_44;
l9_22=l9_48;
}
float2 l9_51=l9_12;
bool l9_52=l9_13;
float3x3 l9_53=l9_14;
if (l9_52)
{
l9_51=float2((l9_53*float3(l9_51,1.0)).xy);
}
float2 l9_54=l9_51;
l9_12=l9_54;
float l9_55=l9_12.x;
int l9_56=l9_15.x;
bool l9_57=l9_21;
float l9_58=l9_22;
if ((l9_56==0)||(l9_56==3))
{
float l9_59=l9_55;
float l9_60=0.0;
float l9_61=1.0;
bool l9_62=l9_57;
float l9_63=l9_58;
float l9_64=fast::clamp(l9_59,l9_60,l9_61);
float l9_65=step(abs(l9_59-l9_64),9.9999997e-06);
l9_63*=(l9_65+((1.0-float(l9_62))*(1.0-l9_65)));
l9_59=l9_64;
l9_55=l9_59;
l9_58=l9_63;
}
l9_12.x=l9_55;
l9_22=l9_58;
float l9_66=l9_12.y;
int l9_67=l9_15.y;
bool l9_68=l9_21;
float l9_69=l9_22;
if ((l9_67==0)||(l9_67==3))
{
float l9_70=l9_66;
float l9_71=0.0;
float l9_72=1.0;
bool l9_73=l9_68;
float l9_74=l9_69;
float l9_75=fast::clamp(l9_70,l9_71,l9_72);
float l9_76=step(abs(l9_70-l9_75),9.9999997e-06);
l9_74*=(l9_76+((1.0-float(l9_73))*(1.0-l9_76)));
l9_70=l9_75;
l9_66=l9_70;
l9_69=l9_74;
}
l9_12.y=l9_66;
l9_22=l9_69;
float2 l9_77=l9_12;
int l9_78=l9_10;
int l9_79=l9_11;
float l9_80=l9_20;
float2 l9_81=l9_77;
int l9_82=l9_78;
int l9_83=l9_79;
float3 l9_84=float3(0.0);
if (l9_82==0)
{
l9_84=float3(l9_81,0.0);
}
else
{
if (l9_82==1)
{
l9_84=float3(l9_81.x,(l9_81.y*0.5)+(0.5-(float(l9_83)*0.5)),0.0);
}
else
{
l9_84=float3(l9_81,float(l9_83));
}
}
float3 l9_85=l9_84;
float3 l9_86=l9_85;
float4 l9_87=sizeRampTexture.sample(sizeRampTextureSmpSC,l9_86.xy,bias(l9_80));
float4 l9_88=l9_87;
if (l9_18)
{
l9_88=mix(l9_19,l9_88,float4(l9_22));
}
float4 l9_89=l9_88;
l9_3=l9_89;
float4 l9_90=l9_3;
float2 sizeRampTex=l9_90.xy;
sizeLife=sizeRampTex*psizeStart;
if ((int(ENABLE_SIZERAMPSTARTENDASBOUNDS_tmp)!=0))
{
sizeLife=mix(psizeEnd,psizeStart,sizeRampTex);
}
}
if ((int(TRAILS_tmp)!=0))
{
if (N111_isTrail)
{
if ((int(TRAILSIZERAMP_tmp)!=0))
{
normTime=timeIn;
float sizeRampPanning_1=ceil(normTime*10000.0)/10000.0;
float2 l9_91=tempGlobals.Surface_UVCoord0;
float2 sizeRampUV_1=(l9_91/float2(10000.0,1.0))+float2(sizeRampPanning_1,0.0);
float2 param_3=sizeRampUV_1;
float4 l9_92=float4(0.0);
int l9_93;
if ((int(trailSizeRampTexHasSwappedViews_tmp)!=0))
{
int l9_94=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_94=0;
}
else
{
l9_94=varStereoViewID;
}
int l9_95=l9_94;
l9_93=1-l9_95;
}
else
{
int l9_96=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_96=0;
}
else
{
l9_96=varStereoViewID;
}
int l9_97=l9_96;
l9_93=l9_97;
}
int l9_98=l9_93;
int l9_99=trailSizeRampTexLayout_tmp;
int l9_100=l9_98;
float2 l9_101=param_3;
bool l9_102=(int(SC_USE_UV_TRANSFORM_trailSizeRampTex_tmp)!=0);
float3x3 l9_103=UserUniforms.trailSizeRampTexTransform;
int2 l9_104=int2(SC_SOFTWARE_WRAP_MODE_U_trailSizeRampTex_tmp,SC_SOFTWARE_WRAP_MODE_V_trailSizeRampTex_tmp);
bool l9_105=(int(SC_USE_UV_MIN_MAX_trailSizeRampTex_tmp)!=0);
float4 l9_106=UserUniforms.trailSizeRampTexUvMinMax;
bool l9_107=(int(SC_USE_CLAMP_TO_BORDER_trailSizeRampTex_tmp)!=0);
float4 l9_108=UserUniforms.trailSizeRampTexBorderColor;
float l9_109=0.0;
bool l9_110=l9_107&&(!l9_105);
float l9_111=1.0;
float l9_112=l9_101.x;
int l9_113=l9_104.x;
if (l9_113==1)
{
l9_112=fract(l9_112);
}
else
{
if (l9_113==2)
{
float l9_114=fract(l9_112);
float l9_115=l9_112-l9_114;
float l9_116=step(0.25,fract(l9_115*0.5));
l9_112=mix(l9_114,1.0-l9_114,fast::clamp(l9_116,0.0,1.0));
}
}
l9_101.x=l9_112;
float l9_117=l9_101.y;
int l9_118=l9_104.y;
if (l9_118==1)
{
l9_117=fract(l9_117);
}
else
{
if (l9_118==2)
{
float l9_119=fract(l9_117);
float l9_120=l9_117-l9_119;
float l9_121=step(0.25,fract(l9_120*0.5));
l9_117=mix(l9_119,1.0-l9_119,fast::clamp(l9_121,0.0,1.0));
}
}
l9_101.y=l9_117;
if (l9_105)
{
bool l9_122=l9_107;
bool l9_123;
if (l9_122)
{
l9_123=l9_104.x==3;
}
else
{
l9_123=l9_122;
}
float l9_124=l9_101.x;
float l9_125=l9_106.x;
float l9_126=l9_106.z;
bool l9_127=l9_123;
float l9_128=l9_111;
float l9_129=fast::clamp(l9_124,l9_125,l9_126);
float l9_130=step(abs(l9_124-l9_129),9.9999997e-06);
l9_128*=(l9_130+((1.0-float(l9_127))*(1.0-l9_130)));
l9_124=l9_129;
l9_101.x=l9_124;
l9_111=l9_128;
bool l9_131=l9_107;
bool l9_132;
if (l9_131)
{
l9_132=l9_104.y==3;
}
else
{
l9_132=l9_131;
}
float l9_133=l9_101.y;
float l9_134=l9_106.y;
float l9_135=l9_106.w;
bool l9_136=l9_132;
float l9_137=l9_111;
float l9_138=fast::clamp(l9_133,l9_134,l9_135);
float l9_139=step(abs(l9_133-l9_138),9.9999997e-06);
l9_137*=(l9_139+((1.0-float(l9_136))*(1.0-l9_139)));
l9_133=l9_138;
l9_101.y=l9_133;
l9_111=l9_137;
}
float2 l9_140=l9_101;
bool l9_141=l9_102;
float3x3 l9_142=l9_103;
if (l9_141)
{
l9_140=float2((l9_142*float3(l9_140,1.0)).xy);
}
float2 l9_143=l9_140;
l9_101=l9_143;
float l9_144=l9_101.x;
int l9_145=l9_104.x;
bool l9_146=l9_110;
float l9_147=l9_111;
if ((l9_145==0)||(l9_145==3))
{
float l9_148=l9_144;
float l9_149=0.0;
float l9_150=1.0;
bool l9_151=l9_146;
float l9_152=l9_147;
float l9_153=fast::clamp(l9_148,l9_149,l9_150);
float l9_154=step(abs(l9_148-l9_153),9.9999997e-06);
l9_152*=(l9_154+((1.0-float(l9_151))*(1.0-l9_154)));
l9_148=l9_153;
l9_144=l9_148;
l9_147=l9_152;
}
l9_101.x=l9_144;
l9_111=l9_147;
float l9_155=l9_101.y;
int l9_156=l9_104.y;
bool l9_157=l9_110;
float l9_158=l9_111;
if ((l9_156==0)||(l9_156==3))
{
float l9_159=l9_155;
float l9_160=0.0;
float l9_161=1.0;
bool l9_162=l9_157;
float l9_163=l9_158;
float l9_164=fast::clamp(l9_159,l9_160,l9_161);
float l9_165=step(abs(l9_159-l9_164),9.9999997e-06);
l9_163*=(l9_165+((1.0-float(l9_162))*(1.0-l9_165)));
l9_159=l9_164;
l9_155=l9_159;
l9_158=l9_163;
}
l9_101.y=l9_155;
l9_111=l9_158;
float2 l9_166=l9_101;
int l9_167=l9_99;
int l9_168=l9_100;
float l9_169=l9_109;
float2 l9_170=l9_166;
int l9_171=l9_167;
int l9_172=l9_168;
float3 l9_173=float3(0.0);
if (l9_171==0)
{
l9_173=float3(l9_170,0.0);
}
else
{
if (l9_171==1)
{
l9_173=float3(l9_170.x,(l9_170.y*0.5)+(0.5-(float(l9_172)*0.5)),0.0);
}
else
{
l9_173=float3(l9_170,float(l9_172));
}
}
float3 l9_174=l9_173;
float3 l9_175=l9_174;
float4 l9_176=trailSizeRampTex.sample(trailSizeRampTexSmpSC,l9_175.xy,bias(l9_169));
float4 l9_177=l9_176;
if (l9_107)
{
l9_177=mix(l9_108,l9_177,float4(l9_111));
}
float4 l9_178=l9_177;
l9_92=l9_178;
float4 l9_179=l9_92;
float sizeRampTex_1=l9_179.x;
sizeLife.x=sizeRampTex_1*psizeStart.x;
if ((int(TRAILSIZERAMPSTARTENDASBOUNDS_tmp)!=0))
{
sizeLife.x=mix(psizeEnd.x,psizeStart.x,sizeRampTex_1);
}
}
sizeLife.x*=N111_trailSizeMult;
sizeLife.y=0.0;
}
}
return sizeLife;
}
float3 N111_pSize3D(thread const float& random1,thread const float& random2,thread const float& normTime,thread const float& N111_sizeSpeed,thread float3& N111_sizeStart3D,thread float3& N111_sizeEnd3D,thread float3& N111_sizeStartMax3D,thread float3& N111_sizeEndMax3D,thread int& varStereoViewID,constant userUniformsObj& UserUniforms,thread ssGlobals& tempGlobals,thread texture2d<float> sizeRampTexture,thread sampler sizeRampTextureSmpSC)
{
float3 psizeStart=float3(0.0);
float3 psizeEnd=float3(0.0);
float param=normTime;
float param_1=N111_sizeSpeed;
float l9_0;
if (param<=0.0)
{
l9_0=0.0;
}
else
{
l9_0=pow(param,param_1);
}
float l9_1=l9_0;
float sizePow=l9_1;
if ((int(SIZEMINMAX_tmp)!=0))
{
psizeStart=mix(N111_sizeStart3D,N111_sizeStartMax3D,float3(random1));
if ((int(SIZERAMP_tmp)!=0))
{
if ((int(ENABLE_SIZERAMPSTARTENDASBOUNDS_tmp)!=0))
{
psizeEnd=mix(N111_sizeEnd3D,N111_sizeEndMax3D,float3(random2));
}
}
else
{
psizeEnd=mix(N111_sizeEnd3D,N111_sizeEndMax3D,float3(random2));
}
}
else
{
psizeStart=N111_sizeStart3D;
if ((int(SIZERAMP_tmp)!=0))
{
if ((int(ENABLE_SIZERAMPSTARTENDASBOUNDS_tmp)!=0))
{
psizeEnd=N111_sizeEnd3D;
}
}
else
{
psizeEnd=N111_sizeEnd3D;
}
}
float3 sizeLife=mix(psizeStart,psizeEnd,float3(sizePow));
if (!(SC_DEVICE_CLASS_tmp>=2))
{
return sizeLife;
}
if ((int(SIZERAMP_tmp)!=0))
{
float sizeRampPanning=ceil(normTime*10000.0)/10000.0;
float2 l9_2=tempGlobals.Surface_UVCoord0;
float2 sizeRampUV=(l9_2/float2(10000.0,1.0))+float2(sizeRampPanning,0.0);
float2 param_2=sizeRampUV;
float4 l9_3=float4(0.0);
int l9_4;
if ((int(sizeRampTextureHasSwappedViews_tmp)!=0))
{
int l9_5=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_5=0;
}
else
{
l9_5=varStereoViewID;
}
int l9_6=l9_5;
l9_4=1-l9_6;
}
else
{
int l9_7=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_7=0;
}
else
{
l9_7=varStereoViewID;
}
int l9_8=l9_7;
l9_4=l9_8;
}
int l9_9=l9_4;
int l9_10=sizeRampTextureLayout_tmp;
int l9_11=l9_9;
float2 l9_12=param_2;
bool l9_13=(int(SC_USE_UV_TRANSFORM_sizeRampTexture_tmp)!=0);
float3x3 l9_14=UserUniforms.sizeRampTextureTransform;
int2 l9_15=int2(SC_SOFTWARE_WRAP_MODE_U_sizeRampTexture_tmp,SC_SOFTWARE_WRAP_MODE_V_sizeRampTexture_tmp);
bool l9_16=(int(SC_USE_UV_MIN_MAX_sizeRampTexture_tmp)!=0);
float4 l9_17=UserUniforms.sizeRampTextureUvMinMax;
bool l9_18=(int(SC_USE_CLAMP_TO_BORDER_sizeRampTexture_tmp)!=0);
float4 l9_19=UserUniforms.sizeRampTextureBorderColor;
float l9_20=0.0;
bool l9_21=l9_18&&(!l9_16);
float l9_22=1.0;
float l9_23=l9_12.x;
int l9_24=l9_15.x;
if (l9_24==1)
{
l9_23=fract(l9_23);
}
else
{
if (l9_24==2)
{
float l9_25=fract(l9_23);
float l9_26=l9_23-l9_25;
float l9_27=step(0.25,fract(l9_26*0.5));
l9_23=mix(l9_25,1.0-l9_25,fast::clamp(l9_27,0.0,1.0));
}
}
l9_12.x=l9_23;
float l9_28=l9_12.y;
int l9_29=l9_15.y;
if (l9_29==1)
{
l9_28=fract(l9_28);
}
else
{
if (l9_29==2)
{
float l9_30=fract(l9_28);
float l9_31=l9_28-l9_30;
float l9_32=step(0.25,fract(l9_31*0.5));
l9_28=mix(l9_30,1.0-l9_30,fast::clamp(l9_32,0.0,1.0));
}
}
l9_12.y=l9_28;
if (l9_16)
{
bool l9_33=l9_18;
bool l9_34;
if (l9_33)
{
l9_34=l9_15.x==3;
}
else
{
l9_34=l9_33;
}
float l9_35=l9_12.x;
float l9_36=l9_17.x;
float l9_37=l9_17.z;
bool l9_38=l9_34;
float l9_39=l9_22;
float l9_40=fast::clamp(l9_35,l9_36,l9_37);
float l9_41=step(abs(l9_35-l9_40),9.9999997e-06);
l9_39*=(l9_41+((1.0-float(l9_38))*(1.0-l9_41)));
l9_35=l9_40;
l9_12.x=l9_35;
l9_22=l9_39;
bool l9_42=l9_18;
bool l9_43;
if (l9_42)
{
l9_43=l9_15.y==3;
}
else
{
l9_43=l9_42;
}
float l9_44=l9_12.y;
float l9_45=l9_17.y;
float l9_46=l9_17.w;
bool l9_47=l9_43;
float l9_48=l9_22;
float l9_49=fast::clamp(l9_44,l9_45,l9_46);
float l9_50=step(abs(l9_44-l9_49),9.9999997e-06);
l9_48*=(l9_50+((1.0-float(l9_47))*(1.0-l9_50)));
l9_44=l9_49;
l9_12.y=l9_44;
l9_22=l9_48;
}
float2 l9_51=l9_12;
bool l9_52=l9_13;
float3x3 l9_53=l9_14;
if (l9_52)
{
l9_51=float2((l9_53*float3(l9_51,1.0)).xy);
}
float2 l9_54=l9_51;
l9_12=l9_54;
float l9_55=l9_12.x;
int l9_56=l9_15.x;
bool l9_57=l9_21;
float l9_58=l9_22;
if ((l9_56==0)||(l9_56==3))
{
float l9_59=l9_55;
float l9_60=0.0;
float l9_61=1.0;
bool l9_62=l9_57;
float l9_63=l9_58;
float l9_64=fast::clamp(l9_59,l9_60,l9_61);
float l9_65=step(abs(l9_59-l9_64),9.9999997e-06);
l9_63*=(l9_65+((1.0-float(l9_62))*(1.0-l9_65)));
l9_59=l9_64;
l9_55=l9_59;
l9_58=l9_63;
}
l9_12.x=l9_55;
l9_22=l9_58;
float l9_66=l9_12.y;
int l9_67=l9_15.y;
bool l9_68=l9_21;
float l9_69=l9_22;
if ((l9_67==0)||(l9_67==3))
{
float l9_70=l9_66;
float l9_71=0.0;
float l9_72=1.0;
bool l9_73=l9_68;
float l9_74=l9_69;
float l9_75=fast::clamp(l9_70,l9_71,l9_72);
float l9_76=step(abs(l9_70-l9_75),9.9999997e-06);
l9_74*=(l9_76+((1.0-float(l9_73))*(1.0-l9_76)));
l9_70=l9_75;
l9_66=l9_70;
l9_69=l9_74;
}
l9_12.y=l9_66;
l9_22=l9_69;
float2 l9_77=l9_12;
int l9_78=l9_10;
int l9_79=l9_11;
float l9_80=l9_20;
float2 l9_81=l9_77;
int l9_82=l9_78;
int l9_83=l9_79;
float3 l9_84=float3(0.0);
if (l9_82==0)
{
l9_84=float3(l9_81,0.0);
}
else
{
if (l9_82==1)
{
l9_84=float3(l9_81.x,(l9_81.y*0.5)+(0.5-(float(l9_83)*0.5)),0.0);
}
else
{
l9_84=float3(l9_81,float(l9_83));
}
}
float3 l9_85=l9_84;
float3 l9_86=l9_85;
float4 l9_87=sizeRampTexture.sample(sizeRampTextureSmpSC,l9_86.xy,bias(l9_80));
float4 l9_88=l9_87;
if (l9_18)
{
l9_88=mix(l9_19,l9_88,float4(l9_22));
}
float4 l9_89=l9_88;
l9_3=l9_89;
float4 l9_90=l9_3;
float3 sizeRampTex=l9_90.xyz;
sizeLife=sizeRampTex*psizeStart;
if ((int(ENABLE_SIZERAMPSTARTENDASBOUNDS_tmp)!=0))
{
sizeLife=mix(psizeEnd,psizeStart,sizeRampTex);
}
}
return sizeLife;
}
float transformSingleColor(thread const float& original,thread const float& intMap,thread const float& target)
{
if (((int(BLEND_MODE_REALISTIC_tmp)!=0)||(int(BLEND_MODE_FORGRAY_tmp)!=0))||(int(BLEND_MODE_NOTBRIGHT_tmp)!=0))
{
return original/pow(1.0-target,intMap);
}
else
{
if ((int(BLEND_MODE_DIVISION_tmp)!=0))
{
return original/(1.0-target);
}
else
{
if ((int(BLEND_MODE_BRIGHT_tmp)!=0))
{
return original/pow(1.0-target,2.0-(2.0*original));
}
}
}
return 0.0;
}
float3 transformColor(thread const float& yValue,thread const float3& original,thread const float3& target,thread const float& weight,thread const float& intMap)
{
if ((int(BLEND_MODE_INTENSE_tmp)!=0))
{
float3 param=original;
float3 l9_0=param;
float4 l9_1;
if (l9_0.y<l9_0.z)
{
l9_1=float4(l9_0.zy,-1.0,0.66666669);
}
else
{
l9_1=float4(l9_0.yz,0.0,-0.33333334);
}
float4 l9_2=l9_1;
float4 l9_3;
if (l9_0.x<l9_2.x)
{
l9_3=float4(l9_2.xyw,l9_0.x);
}
else
{
l9_3=float4(l9_0.x,l9_2.yzx);
}
float4 l9_4=l9_3;
float l9_5=l9_4.x-fast::min(l9_4.w,l9_4.y);
float l9_6=abs(((l9_4.w-l9_4.y)/((6.0*l9_5)+1e-07))+l9_4.z);
float l9_7=l9_4.x;
float3 l9_8=float3(l9_6,l9_5,l9_7);
float3 l9_9=l9_8;
float l9_10=l9_9.z-(l9_9.y*0.5);
float l9_11=l9_9.y/((1.0-abs((2.0*l9_10)-1.0))+1e-07);
float3 l9_12=float3(l9_9.x,l9_11,l9_10);
float3 hslOrig=l9_12;
float3 res=float3(0.0);
res.x=target.x;
res.y=target.y;
res.z=hslOrig.z;
float3 param_1=res;
float l9_13=param_1.x;
float l9_14=abs((6.0*l9_13)-3.0)-1.0;
float l9_15=2.0-abs((6.0*l9_13)-2.0);
float l9_16=2.0-abs((6.0*l9_13)-4.0);
float3 l9_17=fast::clamp(float3(l9_14,l9_15,l9_16),float3(0.0),float3(1.0));
float3 l9_18=l9_17;
float l9_19=(1.0-abs((2.0*param_1.z)-1.0))*param_1.y;
l9_18=((l9_18-float3(0.5))*l9_19)+float3(param_1.z);
float3 l9_20=l9_18;
res=l9_20;
float3 resColor=mix(original,res,float3(weight));
return resColor;
}
else
{
float3 tmpColor=float3(0.0);
float param_2=yValue;
float param_3=intMap;
float param_4=target.x;
tmpColor.x=transformSingleColor(param_2,param_3,param_4);
float param_5=yValue;
float param_6=intMap;
float param_7=target.y;
tmpColor.y=transformSingleColor(param_5,param_6,param_7);
float param_8=yValue;
float param_9=intMap;
float param_10=target.z;
tmpColor.z=transformSingleColor(param_8,param_9,param_10);
tmpColor=fast::clamp(tmpColor,float3(0.0),float3(1.0));
float3 resColor_1=mix(original,tmpColor,float3(weight));
return resColor_1;
}
}
float3 definedBlend(thread const float3& a,thread const float3& b,thread int& varStereoViewID,constant userUniformsObj& UserUniforms,thread texture2d<float> intensityTexture,thread sampler intensityTextureSmpSC)
{
if ((int(BLEND_MODE_LIGHTEN_tmp)!=0))
{
return fast::max(a,b);
}
else
{
if ((int(BLEND_MODE_DARKEN_tmp)!=0))
{
return fast::min(a,b);
}
else
{
if ((int(BLEND_MODE_DIVIDE_tmp)!=0))
{
return b/a;
}
else
{
if ((int(BLEND_MODE_AVERAGE_tmp)!=0))
{
return (a+b)*0.5;
}
else
{
if ((int(BLEND_MODE_SUBTRACT_tmp)!=0))
{
return fast::max((a+b)-float3(1.0),float3(0.0));
}
else
{
if ((int(BLEND_MODE_DIFFERENCE_tmp)!=0))
{
return abs(a-b);
}
else
{
if ((int(BLEND_MODE_NEGATION_tmp)!=0))
{
return float3(1.0)-abs((float3(1.0)-a)-b);
}
else
{
if ((int(BLEND_MODE_EXCLUSION_tmp)!=0))
{
return (a+b)-((a*2.0)*b);
}
else
{
if ((int(BLEND_MODE_OVERLAY_tmp)!=0))
{
float l9_0;
if (a.x<0.5)
{
l9_0=(2.0*a.x)*b.x;
}
else
{
l9_0=1.0-((2.0*(1.0-a.x))*(1.0-b.x));
}
float l9_1=l9_0;
float l9_2;
if (a.y<0.5)
{
l9_2=(2.0*a.y)*b.y;
}
else
{
l9_2=1.0-((2.0*(1.0-a.y))*(1.0-b.y));
}
float l9_3=l9_2;
float l9_4;
if (a.z<0.5)
{
l9_4=(2.0*a.z)*b.z;
}
else
{
l9_4=1.0-((2.0*(1.0-a.z))*(1.0-b.z));
}
return float3(l9_1,l9_3,l9_4);
}
else
{
if ((int(BLEND_MODE_SOFT_LIGHT_tmp)!=0))
{
return (((float3(1.0)-(b*2.0))*a)*a)+((a*2.0)*b);
}
else
{
if ((int(BLEND_MODE_HARD_LIGHT_tmp)!=0))
{
float l9_5;
if (b.x<0.5)
{
l9_5=(2.0*b.x)*a.x;
}
else
{
l9_5=1.0-((2.0*(1.0-b.x))*(1.0-a.x));
}
float l9_6=l9_5;
float l9_7;
if (b.y<0.5)
{
l9_7=(2.0*b.y)*a.y;
}
else
{
l9_7=1.0-((2.0*(1.0-b.y))*(1.0-a.y));
}
float l9_8=l9_7;
float l9_9;
if (b.z<0.5)
{
l9_9=(2.0*b.z)*a.z;
}
else
{
l9_9=1.0-((2.0*(1.0-b.z))*(1.0-a.z));
}
return float3(l9_6,l9_8,l9_9);
}
else
{
if ((int(BLEND_MODE_COLOR_DODGE_tmp)!=0))
{
float l9_10;
if (b.x==1.0)
{
l9_10=b.x;
}
else
{
l9_10=fast::min(a.x/(1.0-b.x),1.0);
}
float l9_11=l9_10;
float l9_12;
if (b.y==1.0)
{
l9_12=b.y;
}
else
{
l9_12=fast::min(a.y/(1.0-b.y),1.0);
}
float l9_13=l9_12;
float l9_14;
if (b.z==1.0)
{
l9_14=b.z;
}
else
{
l9_14=fast::min(a.z/(1.0-b.z),1.0);
}
return float3(l9_11,l9_13,l9_14);
}
else
{
if ((int(BLEND_MODE_COLOR_BURN_tmp)!=0))
{
float l9_15;
if (b.x==0.0)
{
l9_15=b.x;
}
else
{
l9_15=fast::max(1.0-((1.0-a.x)/b.x),0.0);
}
float l9_16=l9_15;
float l9_17;
if (b.y==0.0)
{
l9_17=b.y;
}
else
{
l9_17=fast::max(1.0-((1.0-a.y)/b.y),0.0);
}
float l9_18=l9_17;
float l9_19;
if (b.z==0.0)
{
l9_19=b.z;
}
else
{
l9_19=fast::max(1.0-((1.0-a.z)/b.z),0.0);
}
return float3(l9_16,l9_18,l9_19);
}
else
{
if ((int(BLEND_MODE_LINEAR_LIGHT_tmp)!=0))
{
float l9_20;
if (b.x<0.5)
{
l9_20=fast::max((a.x+(2.0*b.x))-1.0,0.0);
}
else
{
l9_20=fast::min(a.x+(2.0*(b.x-0.5)),1.0);
}
float l9_21=l9_20;
float l9_22;
if (b.y<0.5)
{
l9_22=fast::max((a.y+(2.0*b.y))-1.0,0.0);
}
else
{
l9_22=fast::min(a.y+(2.0*(b.y-0.5)),1.0);
}
float l9_23=l9_22;
float l9_24;
if (b.z<0.5)
{
l9_24=fast::max((a.z+(2.0*b.z))-1.0,0.0);
}
else
{
l9_24=fast::min(a.z+(2.0*(b.z-0.5)),1.0);
}
return float3(l9_21,l9_23,l9_24);
}
else
{
if ((int(BLEND_MODE_VIVID_LIGHT_tmp)!=0))
{
float l9_25;
if (b.x<0.5)
{
float l9_26;
if ((2.0*b.x)==0.0)
{
l9_26=2.0*b.x;
}
else
{
l9_26=fast::max(1.0-((1.0-a.x)/(2.0*b.x)),0.0);
}
l9_25=l9_26;
}
else
{
float l9_27;
if ((2.0*(b.x-0.5))==1.0)
{
l9_27=2.0*(b.x-0.5);
}
else
{
l9_27=fast::min(a.x/(1.0-(2.0*(b.x-0.5))),1.0);
}
l9_25=l9_27;
}
float l9_28=l9_25;
float l9_29;
if (b.y<0.5)
{
float l9_30;
if ((2.0*b.y)==0.0)
{
l9_30=2.0*b.y;
}
else
{
l9_30=fast::max(1.0-((1.0-a.y)/(2.0*b.y)),0.0);
}
l9_29=l9_30;
}
else
{
float l9_31;
if ((2.0*(b.y-0.5))==1.0)
{
l9_31=2.0*(b.y-0.5);
}
else
{
l9_31=fast::min(a.y/(1.0-(2.0*(b.y-0.5))),1.0);
}
l9_29=l9_31;
}
float l9_32=l9_29;
float l9_33;
if (b.z<0.5)
{
float l9_34;
if ((2.0*b.z)==0.0)
{
l9_34=2.0*b.z;
}
else
{
l9_34=fast::max(1.0-((1.0-a.z)/(2.0*b.z)),0.0);
}
l9_33=l9_34;
}
else
{
float l9_35;
if ((2.0*(b.z-0.5))==1.0)
{
l9_35=2.0*(b.z-0.5);
}
else
{
l9_35=fast::min(a.z/(1.0-(2.0*(b.z-0.5))),1.0);
}
l9_33=l9_35;
}
return float3(l9_28,l9_32,l9_33);
}
else
{
if ((int(BLEND_MODE_PIN_LIGHT_tmp)!=0))
{
float l9_36;
if (b.x<0.5)
{
l9_36=fast::min(a.x,2.0*b.x);
}
else
{
l9_36=fast::max(a.x,2.0*(b.x-0.5));
}
float l9_37=l9_36;
float l9_38;
if (b.y<0.5)
{
l9_38=fast::min(a.y,2.0*b.y);
}
else
{
l9_38=fast::max(a.y,2.0*(b.y-0.5));
}
float l9_39=l9_38;
float l9_40;
if (b.z<0.5)
{
l9_40=fast::min(a.z,2.0*b.z);
}
else
{
l9_40=fast::max(a.z,2.0*(b.z-0.5));
}
return float3(l9_37,l9_39,l9_40);
}
else
{
if ((int(BLEND_MODE_HARD_MIX_tmp)!=0))
{
float l9_41;
if (b.x<0.5)
{
float l9_42;
if ((2.0*b.x)==0.0)
{
l9_42=2.0*b.x;
}
else
{
l9_42=fast::max(1.0-((1.0-a.x)/(2.0*b.x)),0.0);
}
l9_41=l9_42;
}
else
{
float l9_43;
if ((2.0*(b.x-0.5))==1.0)
{
l9_43=2.0*(b.x-0.5);
}
else
{
l9_43=fast::min(a.x/(1.0-(2.0*(b.x-0.5))),1.0);
}
l9_41=l9_43;
}
float l9_44=l9_41;
float l9_45;
if (b.y<0.5)
{
float l9_46;
if ((2.0*b.y)==0.0)
{
l9_46=2.0*b.y;
}
else
{
l9_46=fast::max(1.0-((1.0-a.y)/(2.0*b.y)),0.0);
}
l9_45=l9_46;
}
else
{
float l9_47;
if ((2.0*(b.y-0.5))==1.0)
{
l9_47=2.0*(b.y-0.5);
}
else
{
l9_47=fast::min(a.y/(1.0-(2.0*(b.y-0.5))),1.0);
}
l9_45=l9_47;
}
float l9_48=l9_45;
float l9_49;
if (b.z<0.5)
{
float l9_50;
if ((2.0*b.z)==0.0)
{
l9_50=2.0*b.z;
}
else
{
l9_50=fast::max(1.0-((1.0-a.z)/(2.0*b.z)),0.0);
}
l9_49=l9_50;
}
else
{
float l9_51;
if ((2.0*(b.z-0.5))==1.0)
{
l9_51=2.0*(b.z-0.5);
}
else
{
l9_51=fast::min(a.z/(1.0-(2.0*(b.z-0.5))),1.0);
}
l9_49=l9_51;
}
return float3((l9_44<0.5) ? 0.0 : 1.0,(l9_48<0.5) ? 0.0 : 1.0,(l9_49<0.5) ? 0.0 : 1.0);
}
else
{
if ((int(BLEND_MODE_HARD_REFLECT_tmp)!=0))
{
float l9_52;
if (b.x==1.0)
{
l9_52=b.x;
}
else
{
l9_52=fast::min((a.x*a.x)/(1.0-b.x),1.0);
}
float l9_53=l9_52;
float l9_54;
if (b.y==1.0)
{
l9_54=b.y;
}
else
{
l9_54=fast::min((a.y*a.y)/(1.0-b.y),1.0);
}
float l9_55=l9_54;
float l9_56;
if (b.z==1.0)
{
l9_56=b.z;
}
else
{
l9_56=fast::min((a.z*a.z)/(1.0-b.z),1.0);
}
return float3(l9_53,l9_55,l9_56);
}
else
{
if ((int(BLEND_MODE_HARD_GLOW_tmp)!=0))
{
float l9_57;
if (a.x==1.0)
{
l9_57=a.x;
}
else
{
l9_57=fast::min((b.x*b.x)/(1.0-a.x),1.0);
}
float l9_58=l9_57;
float l9_59;
if (a.y==1.0)
{
l9_59=a.y;
}
else
{
l9_59=fast::min((b.y*b.y)/(1.0-a.y),1.0);
}
float l9_60=l9_59;
float l9_61;
if (a.z==1.0)
{
l9_61=a.z;
}
else
{
l9_61=fast::min((b.z*b.z)/(1.0-a.z),1.0);
}
return float3(l9_58,l9_60,l9_61);
}
else
{
if ((int(BLEND_MODE_HARD_PHOENIX_tmp)!=0))
{
return (fast::min(a,b)-fast::max(a,b))+float3(1.0);
}
else
{
if ((int(BLEND_MODE_HUE_tmp)!=0))
{
float3 param=a;
float3 param_1=b;
float3 l9_62=param;
float3 l9_63=l9_62;
float4 l9_64;
if (l9_63.y<l9_63.z)
{
l9_64=float4(l9_63.zy,-1.0,0.66666669);
}
else
{
l9_64=float4(l9_63.yz,0.0,-0.33333334);
}
float4 l9_65=l9_64;
float4 l9_66;
if (l9_63.x<l9_65.x)
{
l9_66=float4(l9_65.xyw,l9_63.x);
}
else
{
l9_66=float4(l9_63.x,l9_65.yzx);
}
float4 l9_67=l9_66;
float l9_68=l9_67.x-fast::min(l9_67.w,l9_67.y);
float l9_69=abs(((l9_67.w-l9_67.y)/((6.0*l9_68)+1e-07))+l9_67.z);
float l9_70=l9_67.x;
float3 l9_71=float3(l9_69,l9_68,l9_70);
float3 l9_72=l9_71;
float l9_73=l9_72.z-(l9_72.y*0.5);
float l9_74=l9_72.y/((1.0-abs((2.0*l9_73)-1.0))+1e-07);
float3 l9_75=float3(l9_72.x,l9_74,l9_73);
float3 l9_76=l9_75;
float3 l9_77=param_1;
float3 l9_78=l9_77;
float4 l9_79;
if (l9_78.y<l9_78.z)
{
l9_79=float4(l9_78.zy,-1.0,0.66666669);
}
else
{
l9_79=float4(l9_78.yz,0.0,-0.33333334);
}
float4 l9_80=l9_79;
float4 l9_81;
if (l9_78.x<l9_80.x)
{
l9_81=float4(l9_80.xyw,l9_78.x);
}
else
{
l9_81=float4(l9_78.x,l9_80.yzx);
}
float4 l9_82=l9_81;
float l9_83=l9_82.x-fast::min(l9_82.w,l9_82.y);
float l9_84=abs(((l9_82.w-l9_82.y)/((6.0*l9_83)+1e-07))+l9_82.z);
float l9_85=l9_82.x;
float3 l9_86=float3(l9_84,l9_83,l9_85);
float3 l9_87=l9_86;
float l9_88=l9_87.z-(l9_87.y*0.5);
float l9_89=l9_87.y/((1.0-abs((2.0*l9_88)-1.0))+1e-07);
float3 l9_90=float3(l9_87.x,l9_89,l9_88);
float3 l9_91=float3(l9_90.x,l9_76.y,l9_76.z);
float l9_92=l9_91.x;
float l9_93=abs((6.0*l9_92)-3.0)-1.0;
float l9_94=2.0-abs((6.0*l9_92)-2.0);
float l9_95=2.0-abs((6.0*l9_92)-4.0);
float3 l9_96=fast::clamp(float3(l9_93,l9_94,l9_95),float3(0.0),float3(1.0));
float3 l9_97=l9_96;
float l9_98=(1.0-abs((2.0*l9_91.z)-1.0))*l9_91.y;
l9_97=((l9_97-float3(0.5))*l9_98)+float3(l9_91.z);
float3 l9_99=l9_97;
float3 l9_100=l9_99;
return l9_100;
}
else
{
if ((int(BLEND_MODE_SATURATION_tmp)!=0))
{
float3 param_2=a;
float3 param_3=b;
float3 l9_101=param_2;
float3 l9_102=l9_101;
float4 l9_103;
if (l9_102.y<l9_102.z)
{
l9_103=float4(l9_102.zy,-1.0,0.66666669);
}
else
{
l9_103=float4(l9_102.yz,0.0,-0.33333334);
}
float4 l9_104=l9_103;
float4 l9_105;
if (l9_102.x<l9_104.x)
{
l9_105=float4(l9_104.xyw,l9_102.x);
}
else
{
l9_105=float4(l9_102.x,l9_104.yzx);
}
float4 l9_106=l9_105;
float l9_107=l9_106.x-fast::min(l9_106.w,l9_106.y);
float l9_108=abs(((l9_106.w-l9_106.y)/((6.0*l9_107)+1e-07))+l9_106.z);
float l9_109=l9_106.x;
float3 l9_110=float3(l9_108,l9_107,l9_109);
float3 l9_111=l9_110;
float l9_112=l9_111.z-(l9_111.y*0.5);
float l9_113=l9_111.y/((1.0-abs((2.0*l9_112)-1.0))+1e-07);
float3 l9_114=float3(l9_111.x,l9_113,l9_112);
float3 l9_115=l9_114;
float l9_116=l9_115.x;
float3 l9_117=param_3;
float3 l9_118=l9_117;
float4 l9_119;
if (l9_118.y<l9_118.z)
{
l9_119=float4(l9_118.zy,-1.0,0.66666669);
}
else
{
l9_119=float4(l9_118.yz,0.0,-0.33333334);
}
float4 l9_120=l9_119;
float4 l9_121;
if (l9_118.x<l9_120.x)
{
l9_121=float4(l9_120.xyw,l9_118.x);
}
else
{
l9_121=float4(l9_118.x,l9_120.yzx);
}
float4 l9_122=l9_121;
float l9_123=l9_122.x-fast::min(l9_122.w,l9_122.y);
float l9_124=abs(((l9_122.w-l9_122.y)/((6.0*l9_123)+1e-07))+l9_122.z);
float l9_125=l9_122.x;
float3 l9_126=float3(l9_124,l9_123,l9_125);
float3 l9_127=l9_126;
float l9_128=l9_127.z-(l9_127.y*0.5);
float l9_129=l9_127.y/((1.0-abs((2.0*l9_128)-1.0))+1e-07);
float3 l9_130=float3(l9_127.x,l9_129,l9_128);
float3 l9_131=float3(l9_116,l9_130.y,l9_115.z);
float l9_132=l9_131.x;
float l9_133=abs((6.0*l9_132)-3.0)-1.0;
float l9_134=2.0-abs((6.0*l9_132)-2.0);
float l9_135=2.0-abs((6.0*l9_132)-4.0);
float3 l9_136=fast::clamp(float3(l9_133,l9_134,l9_135),float3(0.0),float3(1.0));
float3 l9_137=l9_136;
float l9_138=(1.0-abs((2.0*l9_131.z)-1.0))*l9_131.y;
l9_137=((l9_137-float3(0.5))*l9_138)+float3(l9_131.z);
float3 l9_139=l9_137;
float3 l9_140=l9_139;
return l9_140;
}
else
{
if ((int(BLEND_MODE_COLOR_tmp)!=0))
{
float3 param_4=a;
float3 param_5=b;
float3 l9_141=param_5;
float3 l9_142=l9_141;
float4 l9_143;
if (l9_142.y<l9_142.z)
{
l9_143=float4(l9_142.zy,-1.0,0.66666669);
}
else
{
l9_143=float4(l9_142.yz,0.0,-0.33333334);
}
float4 l9_144=l9_143;
float4 l9_145;
if (l9_142.x<l9_144.x)
{
l9_145=float4(l9_144.xyw,l9_142.x);
}
else
{
l9_145=float4(l9_142.x,l9_144.yzx);
}
float4 l9_146=l9_145;
float l9_147=l9_146.x-fast::min(l9_146.w,l9_146.y);
float l9_148=abs(((l9_146.w-l9_146.y)/((6.0*l9_147)+1e-07))+l9_146.z);
float l9_149=l9_146.x;
float3 l9_150=float3(l9_148,l9_147,l9_149);
float3 l9_151=l9_150;
float l9_152=l9_151.z-(l9_151.y*0.5);
float l9_153=l9_151.y/((1.0-abs((2.0*l9_152)-1.0))+1e-07);
float3 l9_154=float3(l9_151.x,l9_153,l9_152);
float3 l9_155=l9_154;
float l9_156=l9_155.x;
float l9_157=l9_155.y;
float3 l9_158=param_4;
float3 l9_159=l9_158;
float4 l9_160;
if (l9_159.y<l9_159.z)
{
l9_160=float4(l9_159.zy,-1.0,0.66666669);
}
else
{
l9_160=float4(l9_159.yz,0.0,-0.33333334);
}
float4 l9_161=l9_160;
float4 l9_162;
if (l9_159.x<l9_161.x)
{
l9_162=float4(l9_161.xyw,l9_159.x);
}
else
{
l9_162=float4(l9_159.x,l9_161.yzx);
}
float4 l9_163=l9_162;
float l9_164=l9_163.x-fast::min(l9_163.w,l9_163.y);
float l9_165=abs(((l9_163.w-l9_163.y)/((6.0*l9_164)+1e-07))+l9_163.z);
float l9_166=l9_163.x;
float3 l9_167=float3(l9_165,l9_164,l9_166);
float3 l9_168=l9_167;
float l9_169=l9_168.z-(l9_168.y*0.5);
float l9_170=l9_168.y/((1.0-abs((2.0*l9_169)-1.0))+1e-07);
float3 l9_171=float3(l9_168.x,l9_170,l9_169);
float3 l9_172=float3(l9_156,l9_157,l9_171.z);
float l9_173=l9_172.x;
float l9_174=abs((6.0*l9_173)-3.0)-1.0;
float l9_175=2.0-abs((6.0*l9_173)-2.0);
float l9_176=2.0-abs((6.0*l9_173)-4.0);
float3 l9_177=fast::clamp(float3(l9_174,l9_175,l9_176),float3(0.0),float3(1.0));
float3 l9_178=l9_177;
float l9_179=(1.0-abs((2.0*l9_172.z)-1.0))*l9_172.y;
l9_178=((l9_178-float3(0.5))*l9_179)+float3(l9_172.z);
float3 l9_180=l9_178;
float3 l9_181=l9_180;
return l9_181;
}
else
{
if ((int(BLEND_MODE_LUMINOSITY_tmp)!=0))
{
float3 param_6=a;
float3 param_7=b;
float3 l9_182=param_6;
float3 l9_183=l9_182;
float4 l9_184;
if (l9_183.y<l9_183.z)
{
l9_184=float4(l9_183.zy,-1.0,0.66666669);
}
else
{
l9_184=float4(l9_183.yz,0.0,-0.33333334);
}
float4 l9_185=l9_184;
float4 l9_186;
if (l9_183.x<l9_185.x)
{
l9_186=float4(l9_185.xyw,l9_183.x);
}
else
{
l9_186=float4(l9_183.x,l9_185.yzx);
}
float4 l9_187=l9_186;
float l9_188=l9_187.x-fast::min(l9_187.w,l9_187.y);
float l9_189=abs(((l9_187.w-l9_187.y)/((6.0*l9_188)+1e-07))+l9_187.z);
float l9_190=l9_187.x;
float3 l9_191=float3(l9_189,l9_188,l9_190);
float3 l9_192=l9_191;
float l9_193=l9_192.z-(l9_192.y*0.5);
float l9_194=l9_192.y/((1.0-abs((2.0*l9_193)-1.0))+1e-07);
float3 l9_195=float3(l9_192.x,l9_194,l9_193);
float3 l9_196=l9_195;
float l9_197=l9_196.x;
float l9_198=l9_196.y;
float3 l9_199=param_7;
float3 l9_200=l9_199;
float4 l9_201;
if (l9_200.y<l9_200.z)
{
l9_201=float4(l9_200.zy,-1.0,0.66666669);
}
else
{
l9_201=float4(l9_200.yz,0.0,-0.33333334);
}
float4 l9_202=l9_201;
float4 l9_203;
if (l9_200.x<l9_202.x)
{
l9_203=float4(l9_202.xyw,l9_200.x);
}
else
{
l9_203=float4(l9_200.x,l9_202.yzx);
}
float4 l9_204=l9_203;
float l9_205=l9_204.x-fast::min(l9_204.w,l9_204.y);
float l9_206=abs(((l9_204.w-l9_204.y)/((6.0*l9_205)+1e-07))+l9_204.z);
float l9_207=l9_204.x;
float3 l9_208=float3(l9_206,l9_205,l9_207);
float3 l9_209=l9_208;
float l9_210=l9_209.z-(l9_209.y*0.5);
float l9_211=l9_209.y/((1.0-abs((2.0*l9_210)-1.0))+1e-07);
float3 l9_212=float3(l9_209.x,l9_211,l9_210);
float3 l9_213=float3(l9_197,l9_198,l9_212.z);
float l9_214=l9_213.x;
float l9_215=abs((6.0*l9_214)-3.0)-1.0;
float l9_216=2.0-abs((6.0*l9_214)-2.0);
float l9_217=2.0-abs((6.0*l9_214)-4.0);
float3 l9_218=fast::clamp(float3(l9_215,l9_216,l9_217),float3(0.0),float3(1.0));
float3 l9_219=l9_218;
float l9_220=(1.0-abs((2.0*l9_213.z)-1.0))*l9_213.y;
l9_219=((l9_219-float3(0.5))*l9_220)+float3(l9_213.z);
float3 l9_221=l9_219;
float3 l9_222=l9_221;
return l9_222;
}
else
{
float3 param_8=a;
float3 param_9=b;
float3 l9_223=param_8;
float l9_224=((0.29899999*l9_223.x)+(0.58700001*l9_223.y))+(0.114*l9_223.z);
float l9_225=l9_224;
float l9_226=1.0;
float l9_227=pow(l9_225,1.0/UserUniforms.correctedIntensity);
int l9_228;
if ((int(intensityTextureHasSwappedViews_tmp)!=0))
{
int l9_229=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_229=0;
}
else
{
l9_229=varStereoViewID;
}
int l9_230=l9_229;
l9_228=1-l9_230;
}
else
{
int l9_231=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_231=0;
}
else
{
l9_231=varStereoViewID;
}
int l9_232=l9_231;
l9_228=l9_232;
}
int l9_233=l9_228;
int l9_234=intensityTextureLayout_tmp;
int l9_235=l9_233;
float2 l9_236=float2(l9_227,0.5);
bool l9_237=(int(SC_USE_UV_TRANSFORM_intensityTexture_tmp)!=0);
float3x3 l9_238=UserUniforms.intensityTextureTransform;
int2 l9_239=int2(SC_SOFTWARE_WRAP_MODE_U_intensityTexture_tmp,SC_SOFTWARE_WRAP_MODE_V_intensityTexture_tmp);
bool l9_240=(int(SC_USE_UV_MIN_MAX_intensityTexture_tmp)!=0);
float4 l9_241=UserUniforms.intensityTextureUvMinMax;
bool l9_242=(int(SC_USE_CLAMP_TO_BORDER_intensityTexture_tmp)!=0);
float4 l9_243=UserUniforms.intensityTextureBorderColor;
float l9_244=0.0;
bool l9_245=l9_242&&(!l9_240);
float l9_246=1.0;
float l9_247=l9_236.x;
int l9_248=l9_239.x;
if (l9_248==1)
{
l9_247=fract(l9_247);
}
else
{
if (l9_248==2)
{
float l9_249=fract(l9_247);
float l9_250=l9_247-l9_249;
float l9_251=step(0.25,fract(l9_250*0.5));
l9_247=mix(l9_249,1.0-l9_249,fast::clamp(l9_251,0.0,1.0));
}
}
l9_236.x=l9_247;
float l9_252=l9_236.y;
int l9_253=l9_239.y;
if (l9_253==1)
{
l9_252=fract(l9_252);
}
else
{
if (l9_253==2)
{
float l9_254=fract(l9_252);
float l9_255=l9_252-l9_254;
float l9_256=step(0.25,fract(l9_255*0.5));
l9_252=mix(l9_254,1.0-l9_254,fast::clamp(l9_256,0.0,1.0));
}
}
l9_236.y=l9_252;
if (l9_240)
{
bool l9_257=l9_242;
bool l9_258;
if (l9_257)
{
l9_258=l9_239.x==3;
}
else
{
l9_258=l9_257;
}
float l9_259=l9_236.x;
float l9_260=l9_241.x;
float l9_261=l9_241.z;
bool l9_262=l9_258;
float l9_263=l9_246;
float l9_264=fast::clamp(l9_259,l9_260,l9_261);
float l9_265=step(abs(l9_259-l9_264),9.9999997e-06);
l9_263*=(l9_265+((1.0-float(l9_262))*(1.0-l9_265)));
l9_259=l9_264;
l9_236.x=l9_259;
l9_246=l9_263;
bool l9_266=l9_242;
bool l9_267;
if (l9_266)
{
l9_267=l9_239.y==3;
}
else
{
l9_267=l9_266;
}
float l9_268=l9_236.y;
float l9_269=l9_241.y;
float l9_270=l9_241.w;
bool l9_271=l9_267;
float l9_272=l9_246;
float l9_273=fast::clamp(l9_268,l9_269,l9_270);
float l9_274=step(abs(l9_268-l9_273),9.9999997e-06);
l9_272*=(l9_274+((1.0-float(l9_271))*(1.0-l9_274)));
l9_268=l9_273;
l9_236.y=l9_268;
l9_246=l9_272;
}
float2 l9_275=l9_236;
bool l9_276=l9_237;
float3x3 l9_277=l9_238;
if (l9_276)
{
l9_275=float2((l9_277*float3(l9_275,1.0)).xy);
}
float2 l9_278=l9_275;
l9_236=l9_278;
float l9_279=l9_236.x;
int l9_280=l9_239.x;
bool l9_281=l9_245;
float l9_282=l9_246;
if ((l9_280==0)||(l9_280==3))
{
float l9_283=l9_279;
float l9_284=0.0;
float l9_285=1.0;
bool l9_286=l9_281;
float l9_287=l9_282;
float l9_288=fast::clamp(l9_283,l9_284,l9_285);
float l9_289=step(abs(l9_283-l9_288),9.9999997e-06);
l9_287*=(l9_289+((1.0-float(l9_286))*(1.0-l9_289)));
l9_283=l9_288;
l9_279=l9_283;
l9_282=l9_287;
}
l9_236.x=l9_279;
l9_246=l9_282;
float l9_290=l9_236.y;
int l9_291=l9_239.y;
bool l9_292=l9_245;
float l9_293=l9_246;
if ((l9_291==0)||(l9_291==3))
{
float l9_294=l9_290;
float l9_295=0.0;
float l9_296=1.0;
bool l9_297=l9_292;
float l9_298=l9_293;
float l9_299=fast::clamp(l9_294,l9_295,l9_296);
float l9_300=step(abs(l9_294-l9_299),9.9999997e-06);
l9_298*=(l9_300+((1.0-float(l9_297))*(1.0-l9_300)));
l9_294=l9_299;
l9_290=l9_294;
l9_293=l9_298;
}
l9_236.y=l9_290;
l9_246=l9_293;
float2 l9_301=l9_236;
int l9_302=l9_234;
int l9_303=l9_235;
float l9_304=l9_244;
float2 l9_305=l9_301;
int l9_306=l9_302;
int l9_307=l9_303;
float3 l9_308=float3(0.0);
if (l9_306==0)
{
l9_308=float3(l9_305,0.0);
}
else
{
if (l9_306==1)
{
l9_308=float3(l9_305.x,(l9_305.y*0.5)+(0.5-(float(l9_307)*0.5)),0.0);
}
else
{
l9_308=float3(l9_305,float(l9_307));
}
}
float3 l9_309=l9_308;
float3 l9_310=l9_309;
float4 l9_311=intensityTexture.sample(intensityTextureSmpSC,l9_310.xy,bias(l9_304));
float4 l9_312=l9_311;
if (l9_242)
{
l9_312=mix(l9_243,l9_312,float4(l9_246));
}
float4 l9_313=l9_312;
float3 l9_314=l9_313.xyz;
float3 l9_315=l9_314;
float l9_316=16.0;
float l9_317=((((l9_315.x*256.0)+l9_315.y)+(l9_315.z/256.0))/257.00391)*l9_316;
float l9_318=l9_317;
if ((int(BLEND_MODE_FORGRAY_tmp)!=0))
{
l9_318=fast::max(l9_318,1.0);
}
if ((int(BLEND_MODE_NOTBRIGHT_tmp)!=0))
{
l9_318=fast::min(l9_318,1.0);
}
float l9_319=l9_225;
float3 l9_320=param_8;
float3 l9_321=param_9;
float l9_322=l9_226;
float l9_323=l9_318;
float3 l9_324=transformColor(l9_319,l9_320,l9_321,l9_322,l9_323);
return l9_324;
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
float4 sc_OutputMotionVectorIfNeeded(thread const float4& finalColor,thread float4& varPosAndMotion,thread float4& varNormalAndMotion)
{
if ((int(sc_MotionVectorsPass_tmp)!=0))
{
float2 param=float2(varPosAndMotion.w,varNormalAndMotion.w);
float l9_0=(param.x*5.0)+0.5;
float l9_1=floor(l9_0*65535.0);
float l9_2=floor(l9_1*0.00390625);
float2 l9_3=float2(l9_2/255.0,(l9_1-(l9_2*256.0))/255.0);
float l9_4=(param.y*5.0)+0.5;
float l9_5=floor(l9_4*65535.0);
float l9_6=floor(l9_5*0.00390625);
float2 l9_7=float2(l9_6/255.0,(l9_5-(l9_6*256.0))/255.0);
float4 l9_8=float4(l9_3,l9_7);
return l9_8;
}
else
{
return finalColor;
}
}
fragment main_frag_out main_frag(main_frag_in in [[stage_in]],constant sc_Set0& sc_set0 [[buffer(0)]],float4 gl_FragCoord [[position]])
{
main_frag_out out={};
bool N338_texMask=false;
bool N338_texMaskInvert=false;
float4 N338_ColorIn=float4(0.0);
float2 N338_screenUV=float2(0.0);
float4 N338_ColorOut=float4(0.0);
bool N322_SoftOccluder=false;
float4 N322_ColorIn=float4(0.0);
float2 N322_ScreenUV=float2(0.0);
float N322_StartFade=0.0;
float N322_EndFade=0.0;
float N322_Exponent=0.0;
float4 N322_ColorOut=float4(0.0);
int N112_MESHTYPE=0;
float4 N112_ParticleColor=float4(0.0);
bool N112_DO_PBR=false;
bool N112_DO_MATCAP=false;
float4 N112_PBRColor=float4(0.0);
float4 N112_MatcapColor=float4(0.0);
float4 N112_Result=float4(0.0);
bool N2_isTrailCondition=false;
bool N2_ENABLE_TRAILS=false;
bool N2_ENABLE_INDEPENDENTTRAIL=false;
bool N2_ENABLE_TRAILTEXTURE=false;
bool N2_ENABLE_TRAILCOLORRAMP=false;
float4 N2_fadeInOut=float4(0.0);
float3 N2_colorStart=float3(0.0);
float3 N2_colorEnd=float3(0.0);
bool N2_ENABLE_COLORMINMAX=false;
float3 N2_colorMinStart=float3(0.0);
float3 N2_colorMinEnd=float3(0.0);
float3 N2_colorMaxStart=float3(0.0);
float3 N2_colorMaxEnd=float3(0.0);
bool N2_ENABLE_COLORMONOMIN=false;
float N2_alphaStart=0.0;
float N2_alphaEnd=0.0;
bool N2_ENABLE_ALPHAMINMAX=false;
float N2_alphaMinStart=0.0;
float N2_alphaMinEnd=0.0;
float N2_alphaMaxStart=0.0;
float N2_alphaMaxEnd=0.0;
bool N2_ENABLE_ALPHADISSOLVE=false;
float N2_alphaDissolveMult=0.0;
bool N2_ENABLE_PREMULTIPLIEDCOLOR=false;
bool N2_ENABLE_BLACKASALPHA=false;
bool N2_ENABLE_SCREENFADE=false;
bool N2_ENABLE_FLIPBOOK=false;
float N2_numValidFrames=0.0;
float2 N2_gridSize=float2(0.0);
float N2_flipBookSpeedMult=0.0;
float N2_flipBookRandomStart=0.0;
bool N2_ENABLE_FLIPBOOKBLEND=false;
bool N2_ENABLE_FLIPBOOKBYLIFE=false;
bool N2_ENABLE_COLORRAMP=false;
float2 N2_texSize=float2(0.0);
float4 N2_colorRampMult=float4(0.0);
bool N2_ENABLE_NORANDOFFSET=false;
bool N2_QUANTIZE=false;
bool N2_ENABLE_BASETEXTURE=false;
bool N2_ENABLE_WORLDPOSSEED=false;
float N2_externalSeed=0.0;
float4 N2_timeValuesIn=float4(0.0);
float4 N2_cameraFade_trailHeadTime_taper=float4(0.0);
float3 N2_particleSeed=float3(0.0);
float N2_globalSeed=0.0;
float4 N2_result=float4(0.0);
float2 N2_uv=float2(0.0);
float N2_isTrail=0.0;
float2 N2_trailHeadTime=float2(0.0);
int N113_MESHTYPE=0;
bool N113_USENORMALMAP=false;
float3 N113_NormalFromTex=float3(0.0);
float3 N113_Normal_TangentSpace=float3(0.0);
int N288_NormalSpace=0;
float3 N288_Normal=float3(0.0);
float2 N288_ReflectionUV=float2(0.0);
int N297_MESHTYPE=0;
bool N297_USENORMALMAP=false;
float3 N297_NormalFromTex=float3(0.0);
float3 N297_Normal_TangentSpace=float3(0.0);
float3 N340_particlePosition=float3(0.0);
float2 N340_ScreenUV=float2(0.0);
bool N181_isTrailCondition=false;
float N181_timeGlobal=0.0;
bool N181_ENABLE_EXTERNALTIME=false;
float N181_externalTime=0.0;
bool N181_ENABLE_WORLDPOSSEED=false;
float N181_externalSeed=0.0;
bool N181_ENABLE_LIFETIMEMINMAX=false;
float N181_lifeTimeConstant=0.0;
float2 N181_lifeTimeMinMax=float2(0.0);
bool N181_ENABLE_INSTANTSPAWN=false;
bool N181_ENABLE_CONSTANTSPAWN=false;
bool N181_ENABLE_TRAILS=false;
float N181_trailLength=0.0;
bool N181_ENABLE_INDEPENDENTTRAIL=false;
float3 N181_particleSeed=float3(0.0);
float N181_globalSeed=0.0;
float4 N181_timeValues=float4(0.0);
float N181_isTrail=0.0;
float2 N181_trailHeadTime=float2(0.0);
int N128_SphereType=0;
float N128_Radius=0.0;
float3 N128_Scale=float3(0.0);
float3 N128_Center=float3(0.0);
float N128_VolumeFill=0.0;
float3 N128_Result=float3(0.0);
float3 N137_Scale=float3(0.0);
float3 N137_Center=float3(0.0);
float N137_VolumeFill=0.0;
float3 N137_Result=float3(0.0);
int N144_OrientationAxis=0;
float N144_Radius=0.0;
float N144_startRad=0.0;
float N144_endRad=0.0;
float N144_Height=0.0;
float2 N144_ArcAngles=float2(0.0);
float3 N144_Scale=float3(0.0);
float3 N144_Center=float3(0.0);
float N144_VolumeFill=0.0;
float3 N144_Result=float3(0.0);
int N149_Axis=0;
float N149_InnerRadius=0.0;
float N149_OuterRadius=0.0;
float2 N149_ArcAngles=float2(0.0);
float3 N149_Scale=float3(0.0);
float3 N149_Center=float3(0.0);
float N149_VolumeFill=0.0;
float3 N149_Result=float3(0.0);
float3 N235_gridSize=float3(0.0);
float3 N235_gridDim=float3(0.0);
float3 N235_Offset=float3(0.0);
float3 N235_Result=float3(0.0);
int N155_alignHeight=0;
bool N155_curvThickEnable=false;
int N155_OrientationAxis=0;
bool N155_animPath=false;
bool N155_randSpeed=false;
float N155_startRad=0.0;
float N155_endRad=0.0;
float N155_heightPerTurn=0.0;
float N155_thicknessRad=0.0;
float N155_VolumeFill=0.0;
float N155_nTurns=0.0;
float N155_Speed=0.0;
float2 N155_SpeedMinMax=float2(0.0);
float4 N155_timeValuesIn=float4(0.0);
float3 N155_Result=float3(0.0);
bool N319_animPath=false;
bool N319_randSpeed=false;
bool N319_curvThickEnable=false;
float N319_Scale=0.0;
float3 N319_scaleXYZ=float3(0.0);
float4 N319_timeValuesIn=float4(0.0);
float N319_Speed=0.0;
float2 N319_SpeedMinMax=float2(0.0);
float N319_thicknessRad=0.0;
float N319_VolumeFill=0.0;
float N319_res=0.0;
float3 N319_Result=float3(0.0);
int N267_Seed=0;
int N267_pushMetod=0;
float N267_Depth=0.0;
float2 N267_Expand=float2(0.0);
float2 N267_Offset=float2(0.0);
float N267_Thickness=0.0;
float N267_Push=0.0;
float3 N267_Result=float3(0.0);
bool N223_OnOff=false;
float3 N223_ParticleSpawnPosition=float3(0.0);
float3 N223_ParticleSeed=float3(0.0);
float N223_Strength=0.0;
float3 N223_ForceOrigin=float3(0.0);
float3 N223_CustomForce=float3(0.0);
bool N202_OnOff=false;
float3 N202_ParticleSpawnPosition=float3(0.0);
float3 N202_ScaleTexture=float3(0.0);
float3 N202_ScrollSpeed=float3(0.0);
float3 N202_Strength=float3(0.0);
float3 N202_CustomForce=float3(0.0);
bool N277_isTrail=false;
bool N277_OnOff=false;
float3 N277_helixDir=float3(0.0);
float3 N277_curveDir=float3(0.0);
float3 N277_Strength=float3(0.0);
int N277_Path=0;
float3 N277_DirectionForce=float3(0.0);
bool N111_isTrail=false;
float3 N111_particleSeedIn=float3(0.0);
float N111_globalSeedIn=0.0;
float4 N111_timeValuesIn=float4(0.0);
float2 N111_trailHeadTime=float2(0.0);
float N111_trailSizeMult=0.0;
float3 N111_spawnLocation=float3(0.0);
float3 N111_spawnBox=float3(0.0);
float3 N111_spawnSphere=float3(0.0);
float3 N111_noiseMult=float3(0.0);
float3 N111_noiseFrequency=float3(0.0);
float3 N111_sNoiseMult=float3(0.0);
float3 N111_sNoiseFrequency=float3(0.0);
float3 N111_velocityMin=float3(0.0);
float3 N111_velocityMax=float3(0.0);
float3 N111_velocityDrag=float3(0.0);
float2 N111_sizeStart=float2(0.0);
float2 N111_sizeEnd=float2(0.0);
float2 N111_sizeStartMax=float2(0.0);
float2 N111_sizeEndMax=float2(0.0);
float3 N111_sizeStart3D=float3(0.0);
float3 N111_sizeEnd3D=float3(0.0);
float3 N111_sizeStartMax3D=float3(0.0);
float3 N111_sizeEndMax3D=float3(0.0);
float N111_sizeSpeed=0.0;
float N111_gravity=0.0;
float3 N111_localForce=float3(0.0);
float3 N111_ScaleDisplace=float3(0.0);
float3 N111_ScrollSpeedDisplace=float3(0.0);
float3 N111_DisplaceStrength=float3(0.0);
float3 N111_AxisOrbit=float3(0.0);
float3 N111_CenterOrbit=float3(0.0);
float2 N111_MinMaxOrbitAngle=float2(0.0);
float2 N111_MinMaxOrbitSpeed=float2(0.0);
float3 N111_particleSeed=float3(0.0);
float N111_globalSeed=0.0;
float3 N111_particlePositionO=float3(0.0);
ssGlobals tempGlobals;
if ((int(sc_DepthOnly_tmp)!=0))
{
return out;
}
if ((sc_StereoRenderingMode_tmp==1)&&(sc_StereoRendering_IsClipDistanceEnabled_tmp==0))
{
if (in.varClipDistance<0.0)
{
discard_fragment();
}
}
ssPreviewInfo PreviewInfo;
PreviewInfo.Color=in.PreviewVertexColor;
PreviewInfo.Saved=((in.PreviewVertexSaved*1.0)!=0.0) ? true : false;
float4 FinalColor=float4(1.0);
ssGlobals Globals;
Globals.gTimeElapsed=(*sc_set0.UserUniforms).sc_Time.x;
Globals.gTimeDelta=(*sc_set0.UserUniforms).sc_Time.y;
Globals.SurfacePosition_WorldSpace=in.varPosAndMotion.xyz;
int l9_0=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_0=0;
}
else
{
l9_0=in.varStereoViewID;
}
int l9_1=l9_0;
Globals.CameraFOV=(atan(1.0/(*sc_set0.UserUniforms).sc_ProjectionMatrixArray[l9_1][1].y)*2.0)*57.29578;
Globals.Surface_UVCoord0=in.varTex01.xy;
Globals.VertexColor=in.varColor;
Globals.gInstanceID=in.Interpolator_gInstanceID;
Globals.BumpedNormal=float3(0.0);
Globals.ViewDirWS=normalize((*sc_set0.UserUniforms).sc_Camera.position-in.varPosAndMotion.xyz);
Globals.PositionWS=in.varPosAndMotion.xyz;
Globals.VertexTangent_WorldSpace=normalize(in.varTangent.xyz);
Globals.VertexNormal_WorldSpace=normalize(in.varNormalAndMotion.xyz);
Globals.VertexBinormal_WorldSpace=cross(Globals.VertexNormal_WorldSpace,Globals.VertexTangent_WorldSpace)*in.varTangent.w;
Globals.ViewDirWS=normalize((*sc_set0.UserUniforms).sc_Camera.position-Globals.SurfacePosition_WorldSpace);
float4 l9_2=gl_FragCoord;
float2 l9_3=l9_2.xy*(*sc_set0.UserUniforms).sc_CurrentRenderTargetDims.zw;
float2 l9_4=l9_3;
float2 l9_5=float2(0.0);
if (sc_StereoRenderingMode_tmp==1)
{
int l9_6=1;
int l9_7=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_7=0;
}
else
{
l9_7=in.varStereoViewID;
}
int l9_8=l9_7;
int l9_9=l9_8;
float3 l9_10=float3(l9_4,0.0);
int l9_11=l9_6;
int l9_12=l9_9;
if (l9_11==1)
{
l9_10.y=((2.0*l9_10.y)+float(l9_12))-1.0;
}
float2 l9_13=l9_10.xy;
l9_5=l9_13;
}
else
{
l9_5=l9_4;
}
float2 l9_14=l9_5;
float2 l9_15=l9_14;
Globals.gScreenCoord=l9_15;
Globals.gInstanceRatio=in.Interpolator_gInstanceRatio;
Globals.SurfacePosition_ObjectSpace=((*sc_set0.UserUniforms).sc_ModelMatrixInverse*float4(in.varPosAndMotion.xyz,1.0)).xyz;
Globals.VertexNormal_ObjectSpace=normalize(((*sc_set0.UserUniforms).sc_ModelMatrixInverse*float4(Globals.VertexNormal_WorldSpace,0.0)).xyz);
float Output_N13=0.0;
Output_N13=float(MESHTYPE_tmp);
float Output_N192=0.0;
float param;
if ((int(TRAILS_tmp)!=0))
{
param=1.001;
}
else
{
param=0.001;
}
param-=0.001;
Output_N192=param;
float4 Color_N168=float4(0.0);
Color_N168=Globals.VertexColor;
float Output_N217=0.0;
Output_N217=Color_N168.x;
float Result_N218=0.0;
float l9_16=Output_N192;
bool l9_17=(l9_16*1.0)!=0.0;
bool l9_18;
if (l9_17)
{
l9_18=(Output_N217*1.0)!=0.0;
}
else
{
l9_18=l9_17;
}
Result_N218=float(l9_18);
float2 Output_N203=float2(0.0);
float2 param_1=(*sc_set0.UserUniforms).trailFadeStartEnd;
Output_N203=param_1;
float2 Output_N216=float2(0.0);
float param_2=(*sc_set0.UserUniforms).Port_Input1_N216;
float2 param_3=float2(0.0);
float2 param_4;
if (TRAILBEHAVIOR_tmp!=0)
{
param_4=float2(param_2);
}
else
{
float2 l9_19=float2(0.0);
float2 l9_20=(*sc_set0.UserUniforms).trailFadeInOut;
l9_19=l9_20;
param_3=l9_19;
param_4=param_3;
}
Output_N216=param_4;
float4 Value_N194=float4(0.0);
Value_N194=float4(Output_N203.x,Output_N203.y,Value_N194.z,Value_N194.w);
Value_N194=float4(Value_N194.x,Value_N194.y,Output_N216.x,Output_N216.y);
float3 Output_N82=float3(0.0);
float3 param_5=(*sc_set0.UserUniforms).colorStart;
Output_N82=param_5;
float3 Output_N83=float3(0.0);
float3 param_6=(*sc_set0.UserUniforms).colorEnd;
Output_N83=param_6;
float3 Output_N78=float3(0.0);
float3 param_7=(*sc_set0.UserUniforms).colorMinStart;
Output_N78=param_7;
float3 Output_N80=float3(0.0);
float3 param_8=(*sc_set0.UserUniforms).colorMinEnd;
Output_N80=param_8;
float3 Output_N79=float3(0.0);
float3 param_9=(*sc_set0.UserUniforms).colorMaxStart;
Output_N79=param_9;
float3 Output_N81=float3(0.0);
float3 param_10=(*sc_set0.UserUniforms).colorMaxEnd;
Output_N81=param_10;
float Output_N89=0.0;
float param_11=(*sc_set0.UserUniforms).alphaStart;
Output_N89=param_11;
float Output_N90=0.0;
float param_12=(*sc_set0.UserUniforms).alphaEnd;
Output_N90=param_12;
float Output_N85=0.0;
float param_13=(*sc_set0.UserUniforms).alphaMinStart;
Output_N85=param_13;
float Output_N86=0.0;
float param_14=(*sc_set0.UserUniforms).alphaMinEnd;
Output_N86=param_14;
float Output_N87=0.0;
float param_15=(*sc_set0.UserUniforms).alphaMaxStart;
Output_N87=param_15;
float Output_N88=0.0;
float param_16=(*sc_set0.UserUniforms).alphaMaxEnd;
Output_N88=param_16;
float Output_N73=0.0;
float param_17=(*sc_set0.UserUniforms).alphaDissolveMult;
Output_N73=param_17;
float Output_N63=0.0;
float param_18=(*sc_set0.UserUniforms).numValidFrames;
Output_N63=param_18;
float2 Output_N64=float2(0.0);
float2 param_19=(*sc_set0.UserUniforms).gridSize;
Output_N64=param_19;
float Output_N65=0.0;
float param_20=(*sc_set0.UserUniforms).flipBookSpeedMult;
Output_N65=param_20;
float Output_N66=0.0;
float param_21=(*sc_set0.UserUniforms).flipBookRandomStart;
Output_N66=param_21;
float2 TextureSize_N21=float2(0.0);
float2 param_22=(*sc_set0.UserUniforms).colorRampTextureSize.xy;
TextureSize_N21=param_22;
float4 Output_N30=float4(0.0);
float4 param_23=(*sc_set0.UserUniforms).colorRampMult;
Output_N30=param_23;
float Output_N333=0.0;
float param_24;
if ((int(QUANTIZE_tmp)!=0))
{
param_24=1.001;
}
else
{
param_24=0.001;
}
param_24-=0.001;
Output_N333=param_24;
float Output_N7=0.0;
float param_25=(*sc_set0.UserUniforms).externalSeed;
Output_N7=param_25;
float4 Output_N169=float4(0.0);
float4 param_26;
param_26.x=in.Interpolator0.x;
param_26.y=in.Interpolator0.y;
param_26.z=in.Interpolator0.z;
param_26.w=in.Interpolator0.w;
Output_N169=param_26;
float4 Output_N179=float4(0.0);
float4 param_27;
param_27.x=in.Interpolator1.x;
param_27.y=in.Interpolator1.y;
param_27.z=in.Interpolator1.z;
param_27.w=in.Interpolator1.w;
Output_N179=param_27;
float4 result_N2=float4(0.0);
float2 uv_N2=float2(0.0);
float param_28=Result_N218;
float4 param_29=Value_N194;
float3 param_30=Output_N82;
float3 param_31=Output_N83;
float3 param_32=Output_N78;
float3 param_33=Output_N80;
float3 param_34=Output_N79;
float3 param_35=Output_N81;
float param_36=Output_N89;
float param_37=Output_N90;
float param_38=Output_N85;
float param_39=Output_N86;
float param_40=Output_N87;
float param_41=Output_N88;
float param_42=Output_N73;
float param_43=Output_N63;
float2 param_44=Output_N64;
float param_45=Output_N65;
float param_46=Output_N66;
float2 param_47=TextureSize_N21;
float4 param_48=Output_N30;
float param_49=Output_N333;
float param_50=Output_N7;
float4 param_51=Output_N169;
float4 param_52=Output_N179;
ssGlobals param_55=Globals;
tempGlobals=param_55;
float4 param_53=float4(0.0);
float2 param_54=float2(0.0);
N2_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N2_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
N2_isTrailCondition=param_28!=0.0;
N2_ENABLE_TRAILTEXTURE=(int(TRAILTEXTURE_tmp)!=0);
N2_ENABLE_TRAILCOLORRAMP=(int(TRAILCOLORRAMP_tmp)!=0);
N2_fadeInOut=param_29;
N2_colorStart=param_30;
N2_colorEnd=param_31;
N2_ENABLE_COLORMINMAX=(int(COLORMINMAX_tmp)!=0);
N2_colorMinStart=param_32;
N2_colorMinEnd=param_33;
N2_colorMaxStart=param_34;
N2_colorMaxEnd=param_35;
N2_ENABLE_COLORMONOMIN=(int(COLORMONOMIN_tmp)!=0);
N2_alphaStart=param_36;
N2_alphaEnd=param_37;
N2_ENABLE_ALPHAMINMAX=(int(ALPHAMINMAX_tmp)!=0);
N2_alphaMinStart=param_38;
N2_alphaMinEnd=param_39;
N2_alphaMaxStart=param_40;
N2_alphaMaxEnd=param_41;
N2_ENABLE_ALPHADISSOLVE=(int(ALPHADISSOLVE_tmp)!=0);
N2_alphaDissolveMult=param_42;
N2_ENABLE_PREMULTIPLIEDCOLOR=(int(PREMULTIPLIEDCOLOR_tmp)!=0);
N2_ENABLE_BLACKASALPHA=(int(BLACKASALPHA_tmp)!=0);
N2_ENABLE_SCREENFADE=(int(SCREENFADE_tmp)!=0);
N2_ENABLE_FLIPBOOK=(int(FLIPBOOK_tmp)!=0);
N2_numValidFrames=param_43;
N2_gridSize=param_44;
N2_flipBookSpeedMult=param_45;
N2_flipBookRandomStart=param_46;
N2_ENABLE_FLIPBOOKBLEND=(int(FLIPBOOKBLEND_tmp)!=0);
N2_ENABLE_FLIPBOOKBYLIFE=(int(FLIPBOOKBYLIFE_tmp)!=0);
N2_ENABLE_COLORRAMP=(int(COLORRAMP_tmp)!=0);
N2_texSize=param_47;
N2_colorRampMult=param_48;
N2_ENABLE_NORANDOFFSET=(int(NORANDOFFSET_tmp)!=0);
N2_QUANTIZE=param_49!=0.0;
N2_ENABLE_BASETEXTURE=(int(BASETEXTURE_tmp)!=0);
N2_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N2_externalSeed=param_50;
N2_timeValuesIn=param_51;
N2_cameraFade_trailHeadTime_taper=param_52;
float l9_21=0.0;
if (N2_ENABLE_WORLDPOSSEED)
{
float4x4 l9_22=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_21=length(float4(1.0)*l9_22);
}
N2_globalSeed=N2_externalSeed+l9_21;
int l9_23=0;
l9_23=int(tempGlobals.gInstanceID+0.5);
int l9_24=l9_23;
float l9_25=float(l9_24);
int l9_26=int(l9_25);
int l9_27=l9_26^(l9_26*15299);
int l9_28=l9_27;
int l9_29=l9_28;
int l9_30=((l9_29*((l9_29*1471343)+101146501))+1559861749)&2147483647;
int l9_31=l9_30;
int l9_32=l9_28*1399;
int l9_33=((l9_32*((l9_32*1471343)+101146501))+1559861749)&2147483647;
int l9_34=l9_33;
int l9_35=l9_28*7177;
int l9_36=((l9_35*((l9_35*1471343)+101146501))+1559861749)&2147483647;
int l9_37=l9_36;
int l9_38=l9_31;
float l9_39=float(l9_38)*4.6566129e-10;
int l9_40=l9_34;
float l9_41=float(l9_40)*4.6566129e-10;
int l9_42=l9_37;
float l9_43=float(l9_42)*4.6566129e-10;
float3 l9_44=float3(l9_39,l9_41,l9_43);
float3 l9_45=l9_44;
N2_particleSeed=l9_45;
float l9_46=N2_timeValuesIn.w;
float l9_47=N2_particleSeed.x;
float l9_48=N2_particleSeed.y;
float l9_49=N2_particleSeed.z;
float3 l9_50=fract((float3(l9_47,l9_48,l9_49)*27.21883)+float3(N2_globalSeed));
if (N2_ENABLE_COLORMONOMIN)
{
l9_50=fract((float3(l9_47,l9_47,l9_47)*27.21883)+float3(N2_globalSeed));
}
float l9_51=fract((N2_particleSeed.x*3121.3333)+N2_globalSeed);
float l9_52=fract((N2_particleSeed.y*13.2234)+N2_globalSeed);
float l9_53=fract((N2_particleSeed.z*3.5358)+N2_globalSeed);
N2_isTrail=0.0;
float l9_54=1.0;
N2_trailHeadTime=N2_cameraFade_trailHeadTime_taper.yz;
float4 l9_55=float4(1.0);
float2 l9_56=tempGlobals.Surface_UVCoord0;
N2_uv=l9_56;
if (N2_ENABLE_TRAILS)
{
if (N2_isTrailCondition)
{
N2_isTrail=1.0;
float l9_57=N2_cameraFade_trailHeadTime_taper.w;
float2 l9_58=float2(0.5-(l9_57/2.0),0.5+(l9_57/2.0));
float l9_59=N2_uv.x;
float l9_60=l9_58.x;
bool l9_61=l9_59<l9_60;
bool l9_62;
if (!l9_61)
{
l9_62=N2_uv.x>l9_58.y;
}
else
{
l9_62=l9_61;
}
if (l9_62)
{
discard_fragment();
}
N2_uv=float2(0.0+(((N2_uv.x-l9_58.x)*1.0)/((l9_58.y-l9_58.x)+1e-06)),N2_uv.y);
if (N2_ENABLE_TRAILTEXTURE)
{
float2 l9_63=float2(N2_uv.x,1.0-N2_uv.y);
float4 l9_64=float4(0.0);
int l9_65;
if ((int(trailTexHasSwappedViews_tmp)!=0))
{
int l9_66=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_66=0;
}
else
{
l9_66=in.varStereoViewID;
}
int l9_67=l9_66;
l9_65=1-l9_67;
}
else
{
int l9_68=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_68=0;
}
else
{
l9_68=in.varStereoViewID;
}
int l9_69=l9_68;
l9_65=l9_69;
}
int l9_70=l9_65;
int l9_71=trailTexLayout_tmp;
int l9_72=l9_70;
float2 l9_73=l9_63;
bool l9_74=(int(SC_USE_UV_TRANSFORM_trailTex_tmp)!=0);
float3x3 l9_75=(*sc_set0.UserUniforms).trailTexTransform;
int2 l9_76=int2(SC_SOFTWARE_WRAP_MODE_U_trailTex_tmp,SC_SOFTWARE_WRAP_MODE_V_trailTex_tmp);
bool l9_77=(int(SC_USE_UV_MIN_MAX_trailTex_tmp)!=0);
float4 l9_78=(*sc_set0.UserUniforms).trailTexUvMinMax;
bool l9_79=(int(SC_USE_CLAMP_TO_BORDER_trailTex_tmp)!=0);
float4 l9_80=(*sc_set0.UserUniforms).trailTexBorderColor;
float l9_81=0.0;
bool l9_82=l9_79&&(!l9_77);
float l9_83=1.0;
float l9_84=l9_73.x;
int l9_85=l9_76.x;
if (l9_85==1)
{
l9_84=fract(l9_84);
}
else
{
if (l9_85==2)
{
float l9_86=fract(l9_84);
float l9_87=l9_84-l9_86;
float l9_88=step(0.25,fract(l9_87*0.5));
l9_84=mix(l9_86,1.0-l9_86,fast::clamp(l9_88,0.0,1.0));
}
}
l9_73.x=l9_84;
float l9_89=l9_73.y;
int l9_90=l9_76.y;
if (l9_90==1)
{
l9_89=fract(l9_89);
}
else
{
if (l9_90==2)
{
float l9_91=fract(l9_89);
float l9_92=l9_89-l9_91;
float l9_93=step(0.25,fract(l9_92*0.5));
l9_89=mix(l9_91,1.0-l9_91,fast::clamp(l9_93,0.0,1.0));
}
}
l9_73.y=l9_89;
if (l9_77)
{
bool l9_94=l9_79;
bool l9_95;
if (l9_94)
{
l9_95=l9_76.x==3;
}
else
{
l9_95=l9_94;
}
float l9_96=l9_73.x;
float l9_97=l9_78.x;
float l9_98=l9_78.z;
bool l9_99=l9_95;
float l9_100=l9_83;
float l9_101=fast::clamp(l9_96,l9_97,l9_98);
float l9_102=step(abs(l9_96-l9_101),9.9999997e-06);
l9_100*=(l9_102+((1.0-float(l9_99))*(1.0-l9_102)));
l9_96=l9_101;
l9_73.x=l9_96;
l9_83=l9_100;
bool l9_103=l9_79;
bool l9_104;
if (l9_103)
{
l9_104=l9_76.y==3;
}
else
{
l9_104=l9_103;
}
float l9_105=l9_73.y;
float l9_106=l9_78.y;
float l9_107=l9_78.w;
bool l9_108=l9_104;
float l9_109=l9_83;
float l9_110=fast::clamp(l9_105,l9_106,l9_107);
float l9_111=step(abs(l9_105-l9_110),9.9999997e-06);
l9_109*=(l9_111+((1.0-float(l9_108))*(1.0-l9_111)));
l9_105=l9_110;
l9_73.y=l9_105;
l9_83=l9_109;
}
float2 l9_112=l9_73;
bool l9_113=l9_74;
float3x3 l9_114=l9_75;
if (l9_113)
{
l9_112=float2((l9_114*float3(l9_112,1.0)).xy);
}
float2 l9_115=l9_112;
l9_73=l9_115;
float l9_116=l9_73.x;
int l9_117=l9_76.x;
bool l9_118=l9_82;
float l9_119=l9_83;
if ((l9_117==0)||(l9_117==3))
{
float l9_120=l9_116;
float l9_121=0.0;
float l9_122=1.0;
bool l9_123=l9_118;
float l9_124=l9_119;
float l9_125=fast::clamp(l9_120,l9_121,l9_122);
float l9_126=step(abs(l9_120-l9_125),9.9999997e-06);
l9_124*=(l9_126+((1.0-float(l9_123))*(1.0-l9_126)));
l9_120=l9_125;
l9_116=l9_120;
l9_119=l9_124;
}
l9_73.x=l9_116;
l9_83=l9_119;
float l9_127=l9_73.y;
int l9_128=l9_76.y;
bool l9_129=l9_82;
float l9_130=l9_83;
if ((l9_128==0)||(l9_128==3))
{
float l9_131=l9_127;
float l9_132=0.0;
float l9_133=1.0;
bool l9_134=l9_129;
float l9_135=l9_130;
float l9_136=fast::clamp(l9_131,l9_132,l9_133);
float l9_137=step(abs(l9_131-l9_136),9.9999997e-06);
l9_135*=(l9_137+((1.0-float(l9_134))*(1.0-l9_137)));
l9_131=l9_136;
l9_127=l9_131;
l9_130=l9_135;
}
l9_73.y=l9_127;
l9_83=l9_130;
float2 l9_138=l9_73;
int l9_139=l9_71;
int l9_140=l9_72;
float l9_141=l9_81;
float2 l9_142=l9_138;
int l9_143=l9_139;
int l9_144=l9_140;
float3 l9_145=float3(0.0);
if (l9_143==0)
{
l9_145=float3(l9_142,0.0);
}
else
{
if (l9_143==1)
{
l9_145=float3(l9_142.x,(l9_142.y*0.5)+(0.5-(float(l9_144)*0.5)),0.0);
}
else
{
l9_145=float3(l9_142,float(l9_144));
}
}
float3 l9_146=l9_145;
float3 l9_147=l9_146;
float4 l9_148=sc_set0.trailTex.sample(sc_set0.trailTexSmpSC,l9_147.xy,bias(l9_141));
float4 l9_149=l9_148;
if (l9_79)
{
l9_149=mix(l9_80,l9_149,float4(l9_83));
}
float4 l9_150=l9_149;
l9_64=l9_150;
float4 l9_151=l9_64;
l9_55=l9_151;
}
float l9_152=fast::max(1e-06,N2_fadeInOut.x);
float l9_153=N2_timeValuesIn.w;
l9_54*=mix(0.0,1.0,fast::clamp(l9_153,0.0,l9_152)/l9_152);
l9_152=fast::max(1e-06,N2_fadeInOut.y);
l9_54*=mix(0.0,1.0,fast::clamp(1.0-l9_153,0.0,l9_152)/l9_152);
if (!N2_ENABLE_INDEPENDENTTRAIL)
{
l9_46=N2_trailHeadTime.y;
l9_152=fast::max(1e-06,N2_fadeInOut.z);
l9_54*=mix(0.0,1.0,fast::clamp(l9_46,0.0,l9_152)/l9_152);
l9_152=fast::max(1e-06,N2_fadeInOut.w);
l9_54*=mix(0.0,1.0,fast::clamp(1.0-l9_46,0.0,l9_152)/l9_152);
}
if (N2_ENABLE_TRAILCOLORRAMP)
{
float2 l9_154=float2(0.0);
l9_154=(*sc_set0.UserUniforms).trailColorRampTexSize.xy;
float2 l9_155=l9_154;
float2 l9_156=float2(0.0);
l9_156=(*sc_set0.UserUniforms).trailColorRampTexSize.xy;
float2 l9_157=l9_156;
float l9_158=ceil(l9_46*l9_155.x)/l9_157.x;
float2 l9_159=float2(l9_158,0.5);
float4 l9_160=float4(0.0);
int l9_161;
if ((int(trailColorRampTexHasSwappedViews_tmp)!=0))
{
int l9_162=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_162=0;
}
else
{
l9_162=in.varStereoViewID;
}
int l9_163=l9_162;
l9_161=1-l9_163;
}
else
{
int l9_164=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_164=0;
}
else
{
l9_164=in.varStereoViewID;
}
int l9_165=l9_164;
l9_161=l9_165;
}
int l9_166=l9_161;
int l9_167=trailColorRampTexLayout_tmp;
int l9_168=l9_166;
float2 l9_169=l9_159;
bool l9_170=(int(SC_USE_UV_TRANSFORM_trailColorRampTex_tmp)!=0);
float3x3 l9_171=(*sc_set0.UserUniforms).trailColorRampTexTransform;
int2 l9_172=int2(SC_SOFTWARE_WRAP_MODE_U_trailColorRampTex_tmp,SC_SOFTWARE_WRAP_MODE_V_trailColorRampTex_tmp);
bool l9_173=(int(SC_USE_UV_MIN_MAX_trailColorRampTex_tmp)!=0);
float4 l9_174=(*sc_set0.UserUniforms).trailColorRampTexUvMinMax;
bool l9_175=(int(SC_USE_CLAMP_TO_BORDER_trailColorRampTex_tmp)!=0);
float4 l9_176=(*sc_set0.UserUniforms).trailColorRampTexBorderColor;
float l9_177=0.0;
bool l9_178=l9_175&&(!l9_173);
float l9_179=1.0;
float l9_180=l9_169.x;
int l9_181=l9_172.x;
if (l9_181==1)
{
l9_180=fract(l9_180);
}
else
{
if (l9_181==2)
{
float l9_182=fract(l9_180);
float l9_183=l9_180-l9_182;
float l9_184=step(0.25,fract(l9_183*0.5));
l9_180=mix(l9_182,1.0-l9_182,fast::clamp(l9_184,0.0,1.0));
}
}
l9_169.x=l9_180;
float l9_185=l9_169.y;
int l9_186=l9_172.y;
if (l9_186==1)
{
l9_185=fract(l9_185);
}
else
{
if (l9_186==2)
{
float l9_187=fract(l9_185);
float l9_188=l9_185-l9_187;
float l9_189=step(0.25,fract(l9_188*0.5));
l9_185=mix(l9_187,1.0-l9_187,fast::clamp(l9_189,0.0,1.0));
}
}
l9_169.y=l9_185;
if (l9_173)
{
bool l9_190=l9_175;
bool l9_191;
if (l9_190)
{
l9_191=l9_172.x==3;
}
else
{
l9_191=l9_190;
}
float l9_192=l9_169.x;
float l9_193=l9_174.x;
float l9_194=l9_174.z;
bool l9_195=l9_191;
float l9_196=l9_179;
float l9_197=fast::clamp(l9_192,l9_193,l9_194);
float l9_198=step(abs(l9_192-l9_197),9.9999997e-06);
l9_196*=(l9_198+((1.0-float(l9_195))*(1.0-l9_198)));
l9_192=l9_197;
l9_169.x=l9_192;
l9_179=l9_196;
bool l9_199=l9_175;
bool l9_200;
if (l9_199)
{
l9_200=l9_172.y==3;
}
else
{
l9_200=l9_199;
}
float l9_201=l9_169.y;
float l9_202=l9_174.y;
float l9_203=l9_174.w;
bool l9_204=l9_200;
float l9_205=l9_179;
float l9_206=fast::clamp(l9_201,l9_202,l9_203);
float l9_207=step(abs(l9_201-l9_206),9.9999997e-06);
l9_205*=(l9_207+((1.0-float(l9_204))*(1.0-l9_207)));
l9_201=l9_206;
l9_169.y=l9_201;
l9_179=l9_205;
}
float2 l9_208=l9_169;
bool l9_209=l9_170;
float3x3 l9_210=l9_171;
if (l9_209)
{
l9_208=float2((l9_210*float3(l9_208,1.0)).xy);
}
float2 l9_211=l9_208;
l9_169=l9_211;
float l9_212=l9_169.x;
int l9_213=l9_172.x;
bool l9_214=l9_178;
float l9_215=l9_179;
if ((l9_213==0)||(l9_213==3))
{
float l9_216=l9_212;
float l9_217=0.0;
float l9_218=1.0;
bool l9_219=l9_214;
float l9_220=l9_215;
float l9_221=fast::clamp(l9_216,l9_217,l9_218);
float l9_222=step(abs(l9_216-l9_221),9.9999997e-06);
l9_220*=(l9_222+((1.0-float(l9_219))*(1.0-l9_222)));
l9_216=l9_221;
l9_212=l9_216;
l9_215=l9_220;
}
l9_169.x=l9_212;
l9_179=l9_215;
float l9_223=l9_169.y;
int l9_224=l9_172.y;
bool l9_225=l9_178;
float l9_226=l9_179;
if ((l9_224==0)||(l9_224==3))
{
float l9_227=l9_223;
float l9_228=0.0;
float l9_229=1.0;
bool l9_230=l9_225;
float l9_231=l9_226;
float l9_232=fast::clamp(l9_227,l9_228,l9_229);
float l9_233=step(abs(l9_227-l9_232),9.9999997e-06);
l9_231*=(l9_233+((1.0-float(l9_230))*(1.0-l9_233)));
l9_227=l9_232;
l9_223=l9_227;
l9_226=l9_231;
}
l9_169.y=l9_223;
l9_179=l9_226;
float2 l9_234=l9_169;
int l9_235=l9_167;
int l9_236=l9_168;
float l9_237=l9_177;
float2 l9_238=l9_234;
int l9_239=l9_235;
int l9_240=l9_236;
float3 l9_241=float3(0.0);
if (l9_239==0)
{
l9_241=float3(l9_238,0.0);
}
else
{
if (l9_239==1)
{
l9_241=float3(l9_238.x,(l9_238.y*0.5)+(0.5-(float(l9_240)*0.5)),0.0);
}
else
{
l9_241=float3(l9_238,float(l9_240));
}
}
float3 l9_242=l9_241;
float3 l9_243=l9_242;
float4 l9_244=sc_set0.trailColorRampTex.sample(sc_set0.trailColorRampTexSmpSC,l9_243.xy,bias(l9_237));
float4 l9_245=l9_244;
if (l9_175)
{
l9_245=mix(l9_176,l9_245,float4(l9_179));
}
float4 l9_246=l9_245;
l9_160=l9_246;
float4 l9_247=l9_160;
l9_55*=l9_247;
}
}
}
float4 l9_248=float4(0.0);
float3 l9_249=float3(0.0);
float3 l9_250=float3(0.0);
float l9_251=0.0;
float l9_252=0.0;
if (N2_ENABLE_COLORMINMAX)
{
l9_249=mix(N2_colorMinStart,N2_colorMaxStart,l9_50);
l9_250=mix(N2_colorMinEnd,N2_colorMaxEnd,l9_50);
}
else
{
l9_249=N2_colorStart;
l9_250=N2_colorEnd;
}
if (N2_ENABLE_ALPHAMINMAX)
{
l9_251=mix(N2_alphaMinStart,N2_alphaMaxStart,l9_51);
l9_252=mix(N2_alphaMinEnd,N2_alphaMaxEnd,l9_51);
}
else
{
l9_251=N2_alphaStart;
l9_252=N2_alphaEnd;
}
l9_249=mix(l9_249,l9_250,float3(l9_46));
l9_251=mix(l9_251,l9_252,l9_46);
l9_248=float4(l9_249,l9_251);
float4 l9_253=float4(0.0);
float2 l9_254=float2(0.0);
if (N2_ENABLE_BASETEXTURE)
{
if (N2_ENABLE_FLIPBOOK)
{
float2 l9_255=tempGlobals.Surface_UVCoord0;
l9_254=l9_255;
float2 l9_256=l9_254;
float l9_257=fast::max(N2_timeValuesIn.x,1e-06);
float l9_258=fast::max(N2_timeValuesIn.y,1e-06);
float l9_259=N2_timeValuesIn.z;
if (N2_ENABLE_FLIPBOOKBYLIFE)
{
float l9_260=mix(l9_257,l9_258,l9_53);
l9_259/=l9_260;
}
float l9_261=floor((N2_flipBookRandomStart+1.0)*l9_52);
float2 l9_262=l9_254;
float2 l9_263=N2_gridSize;
float l9_264=N2_numValidFrames;
float l9_265=l9_261;
float l9_266=N2_flipBookSpeedMult;
float l9_267=l9_259;
float l9_268=floor(l9_263.x);
float l9_269=floor(l9_263.y);
float l9_270=1.0/l9_268;
float l9_271=1.0/l9_269;
float l9_272=fast::min(l9_268*l9_269,floor(l9_264));
float l9_273=floor(mod((l9_267*l9_266)+floor(l9_265),l9_272));
float l9_274=floor(l9_273/l9_268);
float l9_275=mod(l9_273,l9_268);
float2 l9_276=float2((l9_270*l9_262.x)+(l9_275*l9_270),((1.0-l9_271)-(l9_274*l9_271))+(l9_271*l9_262.y));
l9_254=l9_276;
float2 l9_277=l9_254;
float4 l9_278=float4(0.0);
int l9_279;
if ((int(mainTextureHasSwappedViews_tmp)!=0))
{
int l9_280=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_280=0;
}
else
{
l9_280=in.varStereoViewID;
}
int l9_281=l9_280;
l9_279=1-l9_281;
}
else
{
int l9_282=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_282=0;
}
else
{
l9_282=in.varStereoViewID;
}
int l9_283=l9_282;
l9_279=l9_283;
}
int l9_284=l9_279;
int l9_285=mainTextureLayout_tmp;
int l9_286=l9_284;
float2 l9_287=l9_277;
bool l9_288=(int(SC_USE_UV_TRANSFORM_mainTexture_tmp)!=0);
float3x3 l9_289=(*sc_set0.UserUniforms).mainTextureTransform;
int2 l9_290=int2(SC_SOFTWARE_WRAP_MODE_U_mainTexture_tmp,SC_SOFTWARE_WRAP_MODE_V_mainTexture_tmp);
bool l9_291=(int(SC_USE_UV_MIN_MAX_mainTexture_tmp)!=0);
float4 l9_292=(*sc_set0.UserUniforms).mainTextureUvMinMax;
bool l9_293=(int(SC_USE_CLAMP_TO_BORDER_mainTexture_tmp)!=0);
float4 l9_294=(*sc_set0.UserUniforms).mainTextureBorderColor;
float l9_295=0.0;
bool l9_296=l9_293&&(!l9_291);
float l9_297=1.0;
float l9_298=l9_287.x;
int l9_299=l9_290.x;
if (l9_299==1)
{
l9_298=fract(l9_298);
}
else
{
if (l9_299==2)
{
float l9_300=fract(l9_298);
float l9_301=l9_298-l9_300;
float l9_302=step(0.25,fract(l9_301*0.5));
l9_298=mix(l9_300,1.0-l9_300,fast::clamp(l9_302,0.0,1.0));
}
}
l9_287.x=l9_298;
float l9_303=l9_287.y;
int l9_304=l9_290.y;
if (l9_304==1)
{
l9_303=fract(l9_303);
}
else
{
if (l9_304==2)
{
float l9_305=fract(l9_303);
float l9_306=l9_303-l9_305;
float l9_307=step(0.25,fract(l9_306*0.5));
l9_303=mix(l9_305,1.0-l9_305,fast::clamp(l9_307,0.0,1.0));
}
}
l9_287.y=l9_303;
if (l9_291)
{
bool l9_308=l9_293;
bool l9_309;
if (l9_308)
{
l9_309=l9_290.x==3;
}
else
{
l9_309=l9_308;
}
float l9_310=l9_287.x;
float l9_311=l9_292.x;
float l9_312=l9_292.z;
bool l9_313=l9_309;
float l9_314=l9_297;
float l9_315=fast::clamp(l9_310,l9_311,l9_312);
float l9_316=step(abs(l9_310-l9_315),9.9999997e-06);
l9_314*=(l9_316+((1.0-float(l9_313))*(1.0-l9_316)));
l9_310=l9_315;
l9_287.x=l9_310;
l9_297=l9_314;
bool l9_317=l9_293;
bool l9_318;
if (l9_317)
{
l9_318=l9_290.y==3;
}
else
{
l9_318=l9_317;
}
float l9_319=l9_287.y;
float l9_320=l9_292.y;
float l9_321=l9_292.w;
bool l9_322=l9_318;
float l9_323=l9_297;
float l9_324=fast::clamp(l9_319,l9_320,l9_321);
float l9_325=step(abs(l9_319-l9_324),9.9999997e-06);
l9_323*=(l9_325+((1.0-float(l9_322))*(1.0-l9_325)));
l9_319=l9_324;
l9_287.y=l9_319;
l9_297=l9_323;
}
float2 l9_326=l9_287;
bool l9_327=l9_288;
float3x3 l9_328=l9_289;
if (l9_327)
{
l9_326=float2((l9_328*float3(l9_326,1.0)).xy);
}
float2 l9_329=l9_326;
l9_287=l9_329;
float l9_330=l9_287.x;
int l9_331=l9_290.x;
bool l9_332=l9_296;
float l9_333=l9_297;
if ((l9_331==0)||(l9_331==3))
{
float l9_334=l9_330;
float l9_335=0.0;
float l9_336=1.0;
bool l9_337=l9_332;
float l9_338=l9_333;
float l9_339=fast::clamp(l9_334,l9_335,l9_336);
float l9_340=step(abs(l9_334-l9_339),9.9999997e-06);
l9_338*=(l9_340+((1.0-float(l9_337))*(1.0-l9_340)));
l9_334=l9_339;
l9_330=l9_334;
l9_333=l9_338;
}
l9_287.x=l9_330;
l9_297=l9_333;
float l9_341=l9_287.y;
int l9_342=l9_290.y;
bool l9_343=l9_296;
float l9_344=l9_297;
if ((l9_342==0)||(l9_342==3))
{
float l9_345=l9_341;
float l9_346=0.0;
float l9_347=1.0;
bool l9_348=l9_343;
float l9_349=l9_344;
float l9_350=fast::clamp(l9_345,l9_346,l9_347);
float l9_351=step(abs(l9_345-l9_350),9.9999997e-06);
l9_349*=(l9_351+((1.0-float(l9_348))*(1.0-l9_351)));
l9_345=l9_350;
l9_341=l9_345;
l9_344=l9_349;
}
l9_287.y=l9_341;
l9_297=l9_344;
float2 l9_352=l9_287;
int l9_353=l9_285;
int l9_354=l9_286;
float l9_355=l9_295;
float2 l9_356=l9_352;
int l9_357=l9_353;
int l9_358=l9_354;
float3 l9_359=float3(0.0);
if (l9_357==0)
{
l9_359=float3(l9_356,0.0);
}
else
{
if (l9_357==1)
{
l9_359=float3(l9_356.x,(l9_356.y*0.5)+(0.5-(float(l9_358)*0.5)),0.0);
}
else
{
l9_359=float3(l9_356,float(l9_358));
}
}
float3 l9_360=l9_359;
float3 l9_361=l9_360;
float4 l9_362=sc_set0.mainTexture.sample(sc_set0.mainTextureSmpSC,l9_361.xy,bias(l9_355));
float4 l9_363=l9_362;
if (l9_293)
{
l9_363=mix(l9_294,l9_363,float4(l9_297));
}
float4 l9_364=l9_363;
l9_278=l9_364;
float4 l9_365=l9_278;
l9_253=l9_365;
if (N2_ENABLE_FLIPBOOKBLEND)
{
float2 l9_366=l9_256;
float2 l9_367=N2_gridSize;
float l9_368=N2_numValidFrames;
float l9_369=floor(mod(l9_261+1.0,N2_numValidFrames));
float l9_370=N2_flipBookSpeedMult;
float l9_371=l9_259;
float l9_372=floor(l9_367.x);
float l9_373=floor(l9_367.y);
float l9_374=1.0/l9_372;
float l9_375=1.0/l9_373;
float l9_376=fast::min(l9_372*l9_373,floor(l9_368));
float l9_377=floor(mod((l9_371*l9_370)+floor(l9_369),l9_376));
float l9_378=floor(l9_377/l9_372);
float l9_379=mod(l9_377,l9_372);
float2 l9_380=float2((l9_374*l9_366.x)+(l9_379*l9_374),((1.0-l9_375)-(l9_378*l9_375))+(l9_375*l9_366.y));
l9_256=l9_380;
float4 l9_381=l9_253;
float2 l9_382=l9_256;
float4 l9_383=float4(0.0);
int l9_384;
if ((int(mainTextureHasSwappedViews_tmp)!=0))
{
int l9_385=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_385=0;
}
else
{
l9_385=in.varStereoViewID;
}
int l9_386=l9_385;
l9_384=1-l9_386;
}
else
{
int l9_387=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_387=0;
}
else
{
l9_387=in.varStereoViewID;
}
int l9_388=l9_387;
l9_384=l9_388;
}
int l9_389=l9_384;
int l9_390=mainTextureLayout_tmp;
int l9_391=l9_389;
float2 l9_392=l9_382;
bool l9_393=(int(SC_USE_UV_TRANSFORM_mainTexture_tmp)!=0);
float3x3 l9_394=(*sc_set0.UserUniforms).mainTextureTransform;
int2 l9_395=int2(SC_SOFTWARE_WRAP_MODE_U_mainTexture_tmp,SC_SOFTWARE_WRAP_MODE_V_mainTexture_tmp);
bool l9_396=(int(SC_USE_UV_MIN_MAX_mainTexture_tmp)!=0);
float4 l9_397=(*sc_set0.UserUniforms).mainTextureUvMinMax;
bool l9_398=(int(SC_USE_CLAMP_TO_BORDER_mainTexture_tmp)!=0);
float4 l9_399=(*sc_set0.UserUniforms).mainTextureBorderColor;
float l9_400=0.0;
bool l9_401=l9_398&&(!l9_396);
float l9_402=1.0;
float l9_403=l9_392.x;
int l9_404=l9_395.x;
if (l9_404==1)
{
l9_403=fract(l9_403);
}
else
{
if (l9_404==2)
{
float l9_405=fract(l9_403);
float l9_406=l9_403-l9_405;
float l9_407=step(0.25,fract(l9_406*0.5));
l9_403=mix(l9_405,1.0-l9_405,fast::clamp(l9_407,0.0,1.0));
}
}
l9_392.x=l9_403;
float l9_408=l9_392.y;
int l9_409=l9_395.y;
if (l9_409==1)
{
l9_408=fract(l9_408);
}
else
{
if (l9_409==2)
{
float l9_410=fract(l9_408);
float l9_411=l9_408-l9_410;
float l9_412=step(0.25,fract(l9_411*0.5));
l9_408=mix(l9_410,1.0-l9_410,fast::clamp(l9_412,0.0,1.0));
}
}
l9_392.y=l9_408;
if (l9_396)
{
bool l9_413=l9_398;
bool l9_414;
if (l9_413)
{
l9_414=l9_395.x==3;
}
else
{
l9_414=l9_413;
}
float l9_415=l9_392.x;
float l9_416=l9_397.x;
float l9_417=l9_397.z;
bool l9_418=l9_414;
float l9_419=l9_402;
float l9_420=fast::clamp(l9_415,l9_416,l9_417);
float l9_421=step(abs(l9_415-l9_420),9.9999997e-06);
l9_419*=(l9_421+((1.0-float(l9_418))*(1.0-l9_421)));
l9_415=l9_420;
l9_392.x=l9_415;
l9_402=l9_419;
bool l9_422=l9_398;
bool l9_423;
if (l9_422)
{
l9_423=l9_395.y==3;
}
else
{
l9_423=l9_422;
}
float l9_424=l9_392.y;
float l9_425=l9_397.y;
float l9_426=l9_397.w;
bool l9_427=l9_423;
float l9_428=l9_402;
float l9_429=fast::clamp(l9_424,l9_425,l9_426);
float l9_430=step(abs(l9_424-l9_429),9.9999997e-06);
l9_428*=(l9_430+((1.0-float(l9_427))*(1.0-l9_430)));
l9_424=l9_429;
l9_392.y=l9_424;
l9_402=l9_428;
}
float2 l9_431=l9_392;
bool l9_432=l9_393;
float3x3 l9_433=l9_394;
if (l9_432)
{
l9_431=float2((l9_433*float3(l9_431,1.0)).xy);
}
float2 l9_434=l9_431;
l9_392=l9_434;
float l9_435=l9_392.x;
int l9_436=l9_395.x;
bool l9_437=l9_401;
float l9_438=l9_402;
if ((l9_436==0)||(l9_436==3))
{
float l9_439=l9_435;
float l9_440=0.0;
float l9_441=1.0;
bool l9_442=l9_437;
float l9_443=l9_438;
float l9_444=fast::clamp(l9_439,l9_440,l9_441);
float l9_445=step(abs(l9_439-l9_444),9.9999997e-06);
l9_443*=(l9_445+((1.0-float(l9_442))*(1.0-l9_445)));
l9_439=l9_444;
l9_435=l9_439;
l9_438=l9_443;
}
l9_392.x=l9_435;
l9_402=l9_438;
float l9_446=l9_392.y;
int l9_447=l9_395.y;
bool l9_448=l9_401;
float l9_449=l9_402;
if ((l9_447==0)||(l9_447==3))
{
float l9_450=l9_446;
float l9_451=0.0;
float l9_452=1.0;
bool l9_453=l9_448;
float l9_454=l9_449;
float l9_455=fast::clamp(l9_450,l9_451,l9_452);
float l9_456=step(abs(l9_450-l9_455),9.9999997e-06);
l9_454*=(l9_456+((1.0-float(l9_453))*(1.0-l9_456)));
l9_450=l9_455;
l9_446=l9_450;
l9_449=l9_454;
}
l9_392.y=l9_446;
l9_402=l9_449;
float2 l9_457=l9_392;
int l9_458=l9_390;
int l9_459=l9_391;
float l9_460=l9_400;
float2 l9_461=l9_457;
int l9_462=l9_458;
int l9_463=l9_459;
float3 l9_464=float3(0.0);
if (l9_462==0)
{
l9_464=float3(l9_461,0.0);
}
else
{
if (l9_462==1)
{
l9_464=float3(l9_461.x,(l9_461.y*0.5)+(0.5-(float(l9_463)*0.5)),0.0);
}
else
{
l9_464=float3(l9_461,float(l9_463));
}
}
float3 l9_465=l9_464;
float3 l9_466=l9_465;
float4 l9_467=sc_set0.mainTexture.sample(sc_set0.mainTextureSmpSC,l9_466.xy,bias(l9_460));
float4 l9_468=l9_467;
if (l9_398)
{
l9_468=mix(l9_399,l9_468,float4(l9_402));
}
float4 l9_469=l9_468;
l9_383=l9_469;
float4 l9_470=l9_383;
l9_253=mix(l9_381,l9_470,float4(fract((l9_259*N2_flipBookSpeedMult)+l9_261)));
}
}
}
float4 l9_471=float4(1.0);
if (N2_ENABLE_COLORRAMP)
{
float l9_472=0.0;
if (N2_QUANTIZE)
{
l9_472=ceil(l9_46*N2_texSize.x)/N2_texSize.x;
}
else
{
l9_472=l9_46;
}
float l9_473=l9_472;
if (N2_ENABLE_NORANDOFFSET)
{
float2 l9_474=tempGlobals.Surface_UVCoord0;
l9_473+=(l9_474.x/N2_texSize.x);
}
float2 l9_475=float2(l9_473,0.5);
float4 l9_476=float4(0.0);
int l9_477;
if ((int(colorRampTextureHasSwappedViews_tmp)!=0))
{
int l9_478=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_478=0;
}
else
{
l9_478=in.varStereoViewID;
}
int l9_479=l9_478;
l9_477=1-l9_479;
}
else
{
int l9_480=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_480=0;
}
else
{
l9_480=in.varStereoViewID;
}
int l9_481=l9_480;
l9_477=l9_481;
}
int l9_482=l9_477;
int l9_483=colorRampTextureLayout_tmp;
int l9_484=l9_482;
float2 l9_485=l9_475;
bool l9_486=(int(SC_USE_UV_TRANSFORM_colorRampTexture_tmp)!=0);
float3x3 l9_487=(*sc_set0.UserUniforms).colorRampTextureTransform;
int2 l9_488=int2(SC_SOFTWARE_WRAP_MODE_U_colorRampTexture_tmp,SC_SOFTWARE_WRAP_MODE_V_colorRampTexture_tmp);
bool l9_489=(int(SC_USE_UV_MIN_MAX_colorRampTexture_tmp)!=0);
float4 l9_490=(*sc_set0.UserUniforms).colorRampTextureUvMinMax;
bool l9_491=(int(SC_USE_CLAMP_TO_BORDER_colorRampTexture_tmp)!=0);
float4 l9_492=(*sc_set0.UserUniforms).colorRampTextureBorderColor;
float l9_493=0.0;
bool l9_494=l9_491&&(!l9_489);
float l9_495=1.0;
float l9_496=l9_485.x;
int l9_497=l9_488.x;
if (l9_497==1)
{
l9_496=fract(l9_496);
}
else
{
if (l9_497==2)
{
float l9_498=fract(l9_496);
float l9_499=l9_496-l9_498;
float l9_500=step(0.25,fract(l9_499*0.5));
l9_496=mix(l9_498,1.0-l9_498,fast::clamp(l9_500,0.0,1.0));
}
}
l9_485.x=l9_496;
float l9_501=l9_485.y;
int l9_502=l9_488.y;
if (l9_502==1)
{
l9_501=fract(l9_501);
}
else
{
if (l9_502==2)
{
float l9_503=fract(l9_501);
float l9_504=l9_501-l9_503;
float l9_505=step(0.25,fract(l9_504*0.5));
l9_501=mix(l9_503,1.0-l9_503,fast::clamp(l9_505,0.0,1.0));
}
}
l9_485.y=l9_501;
if (l9_489)
{
bool l9_506=l9_491;
bool l9_507;
if (l9_506)
{
l9_507=l9_488.x==3;
}
else
{
l9_507=l9_506;
}
float l9_508=l9_485.x;
float l9_509=l9_490.x;
float l9_510=l9_490.z;
bool l9_511=l9_507;
float l9_512=l9_495;
float l9_513=fast::clamp(l9_508,l9_509,l9_510);
float l9_514=step(abs(l9_508-l9_513),9.9999997e-06);
l9_512*=(l9_514+((1.0-float(l9_511))*(1.0-l9_514)));
l9_508=l9_513;
l9_485.x=l9_508;
l9_495=l9_512;
bool l9_515=l9_491;
bool l9_516;
if (l9_515)
{
l9_516=l9_488.y==3;
}
else
{
l9_516=l9_515;
}
float l9_517=l9_485.y;
float l9_518=l9_490.y;
float l9_519=l9_490.w;
bool l9_520=l9_516;
float l9_521=l9_495;
float l9_522=fast::clamp(l9_517,l9_518,l9_519);
float l9_523=step(abs(l9_517-l9_522),9.9999997e-06);
l9_521*=(l9_523+((1.0-float(l9_520))*(1.0-l9_523)));
l9_517=l9_522;
l9_485.y=l9_517;
l9_495=l9_521;
}
float2 l9_524=l9_485;
bool l9_525=l9_486;
float3x3 l9_526=l9_487;
if (l9_525)
{
l9_524=float2((l9_526*float3(l9_524,1.0)).xy);
}
float2 l9_527=l9_524;
l9_485=l9_527;
float l9_528=l9_485.x;
int l9_529=l9_488.x;
bool l9_530=l9_494;
float l9_531=l9_495;
if ((l9_529==0)||(l9_529==3))
{
float l9_532=l9_528;
float l9_533=0.0;
float l9_534=1.0;
bool l9_535=l9_530;
float l9_536=l9_531;
float l9_537=fast::clamp(l9_532,l9_533,l9_534);
float l9_538=step(abs(l9_532-l9_537),9.9999997e-06);
l9_536*=(l9_538+((1.0-float(l9_535))*(1.0-l9_538)));
l9_532=l9_537;
l9_528=l9_532;
l9_531=l9_536;
}
l9_485.x=l9_528;
l9_495=l9_531;
float l9_539=l9_485.y;
int l9_540=l9_488.y;
bool l9_541=l9_494;
float l9_542=l9_495;
if ((l9_540==0)||(l9_540==3))
{
float l9_543=l9_539;
float l9_544=0.0;
float l9_545=1.0;
bool l9_546=l9_541;
float l9_547=l9_542;
float l9_548=fast::clamp(l9_543,l9_544,l9_545);
float l9_549=step(abs(l9_543-l9_548),9.9999997e-06);
l9_547*=(l9_549+((1.0-float(l9_546))*(1.0-l9_549)));
l9_543=l9_548;
l9_539=l9_543;
l9_542=l9_547;
}
l9_485.y=l9_539;
l9_495=l9_542;
float2 l9_550=l9_485;
int l9_551=l9_483;
int l9_552=l9_484;
float l9_553=l9_493;
float2 l9_554=l9_550;
int l9_555=l9_551;
int l9_556=l9_552;
float3 l9_557=float3(0.0);
if (l9_555==0)
{
l9_557=float3(l9_554,0.0);
}
else
{
if (l9_555==1)
{
l9_557=float3(l9_554.x,(l9_554.y*0.5)+(0.5-(float(l9_556)*0.5)),0.0);
}
else
{
l9_557=float3(l9_554,float(l9_556));
}
}
float3 l9_558=l9_557;
float3 l9_559=l9_558;
float4 l9_560=sc_set0.colorRampTexture.sample(sc_set0.colorRampTextureSmpSC,l9_559.xy,bias(l9_553));
float4 l9_561=l9_560;
if (l9_491)
{
l9_561=mix(l9_492,l9_561,float4(l9_495));
}
float4 l9_562=l9_561;
l9_476=l9_562;
float4 l9_563=l9_476;
l9_471=l9_563*N2_colorRampMult;
}
float4 l9_564=float4(1.0);
float4 l9_565=float4(1.0);
if (N2_ENABLE_BASETEXTURE)
{
if (N2_ENABLE_FLIPBOOK)
{
N2_uv=l9_254;
l9_564=l9_253;
}
else
{
float2 l9_566=N2_uv;
float4 l9_567=float4(0.0);
int l9_568;
if ((int(mainTextureHasSwappedViews_tmp)!=0))
{
int l9_569=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_569=0;
}
else
{
l9_569=in.varStereoViewID;
}
int l9_570=l9_569;
l9_568=1-l9_570;
}
else
{
int l9_571=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_571=0;
}
else
{
l9_571=in.varStereoViewID;
}
int l9_572=l9_571;
l9_568=l9_572;
}
int l9_573=l9_568;
int l9_574=mainTextureLayout_tmp;
int l9_575=l9_573;
float2 l9_576=l9_566;
bool l9_577=(int(SC_USE_UV_TRANSFORM_mainTexture_tmp)!=0);
float3x3 l9_578=(*sc_set0.UserUniforms).mainTextureTransform;
int2 l9_579=int2(SC_SOFTWARE_WRAP_MODE_U_mainTexture_tmp,SC_SOFTWARE_WRAP_MODE_V_mainTexture_tmp);
bool l9_580=(int(SC_USE_UV_MIN_MAX_mainTexture_tmp)!=0);
float4 l9_581=(*sc_set0.UserUniforms).mainTextureUvMinMax;
bool l9_582=(int(SC_USE_CLAMP_TO_BORDER_mainTexture_tmp)!=0);
float4 l9_583=(*sc_set0.UserUniforms).mainTextureBorderColor;
float l9_584=0.0;
bool l9_585=l9_582&&(!l9_580);
float l9_586=1.0;
float l9_587=l9_576.x;
int l9_588=l9_579.x;
if (l9_588==1)
{
l9_587=fract(l9_587);
}
else
{
if (l9_588==2)
{
float l9_589=fract(l9_587);
float l9_590=l9_587-l9_589;
float l9_591=step(0.25,fract(l9_590*0.5));
l9_587=mix(l9_589,1.0-l9_589,fast::clamp(l9_591,0.0,1.0));
}
}
l9_576.x=l9_587;
float l9_592=l9_576.y;
int l9_593=l9_579.y;
if (l9_593==1)
{
l9_592=fract(l9_592);
}
else
{
if (l9_593==2)
{
float l9_594=fract(l9_592);
float l9_595=l9_592-l9_594;
float l9_596=step(0.25,fract(l9_595*0.5));
l9_592=mix(l9_594,1.0-l9_594,fast::clamp(l9_596,0.0,1.0));
}
}
l9_576.y=l9_592;
if (l9_580)
{
bool l9_597=l9_582;
bool l9_598;
if (l9_597)
{
l9_598=l9_579.x==3;
}
else
{
l9_598=l9_597;
}
float l9_599=l9_576.x;
float l9_600=l9_581.x;
float l9_601=l9_581.z;
bool l9_602=l9_598;
float l9_603=l9_586;
float l9_604=fast::clamp(l9_599,l9_600,l9_601);
float l9_605=step(abs(l9_599-l9_604),9.9999997e-06);
l9_603*=(l9_605+((1.0-float(l9_602))*(1.0-l9_605)));
l9_599=l9_604;
l9_576.x=l9_599;
l9_586=l9_603;
bool l9_606=l9_582;
bool l9_607;
if (l9_606)
{
l9_607=l9_579.y==3;
}
else
{
l9_607=l9_606;
}
float l9_608=l9_576.y;
float l9_609=l9_581.y;
float l9_610=l9_581.w;
bool l9_611=l9_607;
float l9_612=l9_586;
float l9_613=fast::clamp(l9_608,l9_609,l9_610);
float l9_614=step(abs(l9_608-l9_613),9.9999997e-06);
l9_612*=(l9_614+((1.0-float(l9_611))*(1.0-l9_614)));
l9_608=l9_613;
l9_576.y=l9_608;
l9_586=l9_612;
}
float2 l9_615=l9_576;
bool l9_616=l9_577;
float3x3 l9_617=l9_578;
if (l9_616)
{
l9_615=float2((l9_617*float3(l9_615,1.0)).xy);
}
float2 l9_618=l9_615;
l9_576=l9_618;
float l9_619=l9_576.x;
int l9_620=l9_579.x;
bool l9_621=l9_585;
float l9_622=l9_586;
if ((l9_620==0)||(l9_620==3))
{
float l9_623=l9_619;
float l9_624=0.0;
float l9_625=1.0;
bool l9_626=l9_621;
float l9_627=l9_622;
float l9_628=fast::clamp(l9_623,l9_624,l9_625);
float l9_629=step(abs(l9_623-l9_628),9.9999997e-06);
l9_627*=(l9_629+((1.0-float(l9_626))*(1.0-l9_629)));
l9_623=l9_628;
l9_619=l9_623;
l9_622=l9_627;
}
l9_576.x=l9_619;
l9_586=l9_622;
float l9_630=l9_576.y;
int l9_631=l9_579.y;
bool l9_632=l9_585;
float l9_633=l9_586;
if ((l9_631==0)||(l9_631==3))
{
float l9_634=l9_630;
float l9_635=0.0;
float l9_636=1.0;
bool l9_637=l9_632;
float l9_638=l9_633;
float l9_639=fast::clamp(l9_634,l9_635,l9_636);
float l9_640=step(abs(l9_634-l9_639),9.9999997e-06);
l9_638*=(l9_640+((1.0-float(l9_637))*(1.0-l9_640)));
l9_634=l9_639;
l9_630=l9_634;
l9_633=l9_638;
}
l9_576.y=l9_630;
l9_586=l9_633;
float2 l9_641=l9_576;
int l9_642=l9_574;
int l9_643=l9_575;
float l9_644=l9_584;
float2 l9_645=l9_641;
int l9_646=l9_642;
int l9_647=l9_643;
float3 l9_648=float3(0.0);
if (l9_646==0)
{
l9_648=float3(l9_645,0.0);
}
else
{
if (l9_646==1)
{
l9_648=float3(l9_645.x,(l9_645.y*0.5)+(0.5-(float(l9_647)*0.5)),0.0);
}
else
{
l9_648=float3(l9_645,float(l9_647));
}
}
float3 l9_649=l9_648;
float3 l9_650=l9_649;
float4 l9_651=sc_set0.mainTexture.sample(sc_set0.mainTextureSmpSC,l9_650.xy,bias(l9_644));
float4 l9_652=l9_651;
if (l9_582)
{
l9_652=mix(l9_583,l9_652,float4(l9_586));
}
float4 l9_653=l9_652;
l9_567=l9_653;
float4 l9_654=l9_567;
l9_564=l9_654;
}
}
if (N2_ENABLE_COLORRAMP)
{
if (!(!(SC_DEVICE_CLASS_tmp>=2)))
{
l9_565=l9_471;
}
}
N2_result=(l9_564*l9_248)*l9_565;
if (N2_ENABLE_TRAILS)
{
if (N2_isTrail>0.0)
{
N2_result=(l9_55*l9_248)*l9_565;
N2_result.w*=l9_54;
}
}
if (N2_ENABLE_SCREENFADE)
{
N2_result.w*=N2_cameraFade_trailHeadTime_taper.x;
}
if (N2_ENABLE_ALPHADISSOLVE)
{
float l9_655=l9_46*N2_alphaDissolveMult;
N2_result.w=fast::clamp(N2_result.w-l9_655,0.0,1.0);
}
if (N2_ENABLE_BLACKASALPHA)
{
float l9_656=length(N2_result.xyz);
N2_result.w=l9_656;
if (N2_ENABLE_TRAILS)
{
N2_result.w*=l9_54;
}
}
if (N2_ENABLE_PREMULTIPLIEDCOLOR)
{
float3 l9_657=N2_result.xyz*N2_result.w;
N2_result=float4(l9_657.x,l9_657.y,l9_657.z,N2_result.w);
}
param_53=N2_result;
param_54=N2_uv;
result_N2=param_53;
uv_N2=param_54;
float3 Value1_N221=float3(0.0);
float Value2_N221=0.0;
float4 param_56=result_N2;
float3 param_57=param_56.xyz;
float param_58=param_56.w;
Value1_N221=param_57;
Value2_N221=param_58;
float4 Output_N166=float4(0.0);
float2 param_59=uv_N2;
int l9_658;
if ((int(normalTexPBRHasSwappedViews_tmp)!=0))
{
int l9_659=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_659=0;
}
else
{
l9_659=in.varStereoViewID;
}
int l9_660=l9_659;
l9_658=1-l9_660;
}
else
{
int l9_661=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_661=0;
}
else
{
l9_661=in.varStereoViewID;
}
int l9_662=l9_661;
l9_658=l9_662;
}
int l9_663=l9_658;
int l9_664=normalTexPBRLayout_tmp;
int l9_665=l9_663;
float2 l9_666=param_59;
bool l9_667=(int(SC_USE_UV_TRANSFORM_normalTexPBR_tmp)!=0);
float3x3 l9_668=(*sc_set0.UserUniforms).normalTexPBRTransform;
int2 l9_669=int2(SC_SOFTWARE_WRAP_MODE_U_normalTexPBR_tmp,SC_SOFTWARE_WRAP_MODE_V_normalTexPBR_tmp);
bool l9_670=(int(SC_USE_UV_MIN_MAX_normalTexPBR_tmp)!=0);
float4 l9_671=(*sc_set0.UserUniforms).normalTexPBRUvMinMax;
bool l9_672=(int(SC_USE_CLAMP_TO_BORDER_normalTexPBR_tmp)!=0);
float4 l9_673=(*sc_set0.UserUniforms).normalTexPBRBorderColor;
float l9_674=0.0;
bool l9_675=l9_672&&(!l9_670);
float l9_676=1.0;
float l9_677=l9_666.x;
int l9_678=l9_669.x;
if (l9_678==1)
{
l9_677=fract(l9_677);
}
else
{
if (l9_678==2)
{
float l9_679=fract(l9_677);
float l9_680=l9_677-l9_679;
float l9_681=step(0.25,fract(l9_680*0.5));
l9_677=mix(l9_679,1.0-l9_679,fast::clamp(l9_681,0.0,1.0));
}
}
l9_666.x=l9_677;
float l9_682=l9_666.y;
int l9_683=l9_669.y;
if (l9_683==1)
{
l9_682=fract(l9_682);
}
else
{
if (l9_683==2)
{
float l9_684=fract(l9_682);
float l9_685=l9_682-l9_684;
float l9_686=step(0.25,fract(l9_685*0.5));
l9_682=mix(l9_684,1.0-l9_684,fast::clamp(l9_686,0.0,1.0));
}
}
l9_666.y=l9_682;
if (l9_670)
{
bool l9_687=l9_672;
bool l9_688;
if (l9_687)
{
l9_688=l9_669.x==3;
}
else
{
l9_688=l9_687;
}
float l9_689=l9_666.x;
float l9_690=l9_671.x;
float l9_691=l9_671.z;
bool l9_692=l9_688;
float l9_693=l9_676;
float l9_694=fast::clamp(l9_689,l9_690,l9_691);
float l9_695=step(abs(l9_689-l9_694),9.9999997e-06);
l9_693*=(l9_695+((1.0-float(l9_692))*(1.0-l9_695)));
l9_689=l9_694;
l9_666.x=l9_689;
l9_676=l9_693;
bool l9_696=l9_672;
bool l9_697;
if (l9_696)
{
l9_697=l9_669.y==3;
}
else
{
l9_697=l9_696;
}
float l9_698=l9_666.y;
float l9_699=l9_671.y;
float l9_700=l9_671.w;
bool l9_701=l9_697;
float l9_702=l9_676;
float l9_703=fast::clamp(l9_698,l9_699,l9_700);
float l9_704=step(abs(l9_698-l9_703),9.9999997e-06);
l9_702*=(l9_704+((1.0-float(l9_701))*(1.0-l9_704)));
l9_698=l9_703;
l9_666.y=l9_698;
l9_676=l9_702;
}
float2 l9_705=l9_666;
bool l9_706=l9_667;
float3x3 l9_707=l9_668;
if (l9_706)
{
l9_705=float2((l9_707*float3(l9_705,1.0)).xy);
}
float2 l9_708=l9_705;
l9_666=l9_708;
float l9_709=l9_666.x;
int l9_710=l9_669.x;
bool l9_711=l9_675;
float l9_712=l9_676;
if ((l9_710==0)||(l9_710==3))
{
float l9_713=l9_709;
float l9_714=0.0;
float l9_715=1.0;
bool l9_716=l9_711;
float l9_717=l9_712;
float l9_718=fast::clamp(l9_713,l9_714,l9_715);
float l9_719=step(abs(l9_713-l9_718),9.9999997e-06);
l9_717*=(l9_719+((1.0-float(l9_716))*(1.0-l9_719)));
l9_713=l9_718;
l9_709=l9_713;
l9_712=l9_717;
}
l9_666.x=l9_709;
l9_676=l9_712;
float l9_720=l9_666.y;
int l9_721=l9_669.y;
bool l9_722=l9_675;
float l9_723=l9_676;
if ((l9_721==0)||(l9_721==3))
{
float l9_724=l9_720;
float l9_725=0.0;
float l9_726=1.0;
bool l9_727=l9_722;
float l9_728=l9_723;
float l9_729=fast::clamp(l9_724,l9_725,l9_726);
float l9_730=step(abs(l9_724-l9_729),9.9999997e-06);
l9_728*=(l9_730+((1.0-float(l9_727))*(1.0-l9_730)));
l9_724=l9_729;
l9_720=l9_724;
l9_723=l9_728;
}
l9_666.y=l9_720;
l9_676=l9_723;
float2 l9_731=l9_666;
int l9_732=l9_664;
int l9_733=l9_665;
float l9_734=l9_674;
float2 l9_735=l9_731;
int l9_736=l9_732;
int l9_737=l9_733;
float3 l9_738=float3(0.0);
if (l9_736==0)
{
l9_738=float3(l9_735,0.0);
}
else
{
if (l9_736==1)
{
l9_738=float3(l9_735.x,(l9_735.y*0.5)+(0.5-(float(l9_737)*0.5)),0.0);
}
else
{
l9_738=float3(l9_735,float(l9_737));
}
}
float3 l9_739=l9_738;
float3 l9_740=l9_739;
float4 l9_741=sc_set0.normalTexPBR.sample(sc_set0.normalTexPBRSmpSC,l9_740.xy,bias(l9_734));
float4 l9_742=l9_741;
if (l9_672)
{
l9_742=mix(l9_673,l9_742,float4(l9_676));
}
float4 l9_743=l9_742;
float4 param_60=l9_743;
float3 l9_744=(param_60.xyz*1.9921875)-float3(1.0);
param_60=float4(l9_744.x,l9_744.y,l9_744.z,param_60.w);
Output_N166=param_60;
float3 Normal_TangentSpace_N113=float3(0.0);
float param_61=Output_N13;
float3 param_62=Output_N166.xyz;
ssGlobals param_64=Globals;
tempGlobals=param_64;
float3 param_63=float3(0.0);
N113_MESHTYPE=int(param_61);
N113_USENORMALMAP=(int(PBRNORMALTEX_tmp)!=0);
N113_NormalFromTex=param_62;
N113_Normal_TangentSpace=float3(0.0,0.0,1.0);
if (N113_MESHTYPE==1)
{
if (N113_USENORMALMAP)
{
N113_Normal_TangentSpace=N113_NormalFromTex;
}
}
param_63=N113_Normal_TangentSpace;
Normal_TangentSpace_N113=param_63;
float Output_N163=0.0;
float param_65=(*sc_set0.UserUniforms).metallic;
Output_N163=param_65;
float Output_N164=0.0;
float param_66=(*sc_set0.UserUniforms).roughness;
Output_N164=param_66;
float4 Output_N14=float4(0.0);
float3 param_67=Value1_N221;
float param_68=Value2_N221;
float3 param_69=Normal_TangentSpace_N113;
float3 param_70=(*sc_set0.UserUniforms).Port_Emissive_N014;
float param_71=Output_N163;
float param_72=Output_N164;
float3 param_73=(*sc_set0.UserUniforms).Port_AO_N014;
float3 param_74=(*sc_set0.UserUniforms).Port_SpecularAO_N014;
ssGlobals param_76=Globals;
if (!(int(sc_ProjectiveShadowsCaster_tmp)!=0))
{
param_76.BumpedNormal=float3x3(float3(param_76.VertexTangent_WorldSpace),float3(param_76.VertexBinormal_WorldSpace),float3(param_76.VertexNormal_WorldSpace))*param_69;
}
param_68=fast::clamp(param_68,0.0,1.0);
float l9_745=param_68;
if ((int(sc_BlendMode_AlphaTest_tmp)!=0))
{
if (l9_745<(*sc_set0.UserUniforms).alphaTestThreshold)
{
discard_fragment();
}
}
if ((int(ENABLE_STIPPLE_PATTERN_TEST_tmp)!=0))
{
float4 l9_746=gl_FragCoord;
float2 l9_747=floor(mod(l9_746.xy,float2(4.0)));
float l9_748=(mod(dot(l9_747,float2(4.0,1.0))*9.0,16.0)+1.0)/17.0;
if (l9_745<l9_748)
{
discard_fragment();
}
}
param_67=fast::max(param_67,float3(0.0));
float4 param_75;
if ((int(sc_ProjectiveShadowsCaster_tmp)!=0))
{
param_75=float4(param_67,param_68);
}
else
{
param_71=fast::clamp(param_71,0.0,1.0);
param_72=fast::clamp(param_72,0.0,1.0);
float3 l9_749=param_67;
float l9_750=param_68;
float3 l9_751=param_76.BumpedNormal;
float3 l9_752=param_76.PositionWS;
float3 l9_753=param_76.ViewDirWS;
float3 l9_754=param_70;
float l9_755=param_71;
float l9_756=param_72;
float3 l9_757=param_73;
float3 l9_758=param_74;
SurfaceProperties l9_759;
l9_759.albedo=float3(0.0);
l9_759.opacity=1.0;
l9_759.normal=float3(0.0);
l9_759.positionWS=float3(0.0);
l9_759.viewDirWS=float3(0.0);
l9_759.metallic=0.0;
l9_759.roughness=0.0;
l9_759.emissive=float3(0.0);
l9_759.ao=float3(1.0);
l9_759.specularAo=float3(1.0);
l9_759.bakedShadows=float3(1.0);
SurfaceProperties l9_760=l9_759;
SurfaceProperties l9_761=l9_760;
l9_761.opacity=l9_750;
float3 l9_762=l9_749;
float3 l9_763;
if (SC_DEVICE_CLASS_tmp>=2)
{
l9_763=float3(pow(l9_762.x,2.2),pow(l9_762.y,2.2),pow(l9_762.z,2.2));
}
else
{
l9_763=l9_762*l9_762;
}
float3 l9_764=l9_763;
l9_761.albedo=l9_764;
l9_761.normal=normalize(l9_751);
l9_761.positionWS=l9_752;
l9_761.viewDirWS=l9_753;
float3 l9_765=l9_754;
float3 l9_766;
if (SC_DEVICE_CLASS_tmp>=2)
{
l9_766=float3(pow(l9_765.x,2.2),pow(l9_765.y,2.2),pow(l9_765.z,2.2));
}
else
{
l9_766=l9_765*l9_765;
}
float3 l9_767=l9_766;
l9_761.emissive=l9_767;
l9_761.metallic=l9_755;
l9_761.roughness=l9_756;
l9_761.ao=l9_757;
l9_761.specularAo=l9_758;
if ((int(sc_SSAOEnabled_tmp)!=0))
{
float3 l9_768=l9_761.positionWS;
l9_761.ao=evaluateSSAO(l9_768,in.varStereoViewID,(*sc_set0.UserUniforms),sc_set0.sc_SSAOTexture,sc_set0.sc_SSAOTextureSmpSC);
}
SurfaceProperties l9_769=l9_761;
SurfaceProperties l9_770=l9_769;
float3 l9_771=mix(float3(0.039999999),l9_770.albedo*l9_770.metallic,float3(l9_770.metallic));
float3 l9_772=mix(l9_770.albedo*(1.0-l9_770.metallic),float3(0.0),float3(l9_770.metallic));
l9_769.albedo=l9_772;
l9_769.specColor=l9_771;
SurfaceProperties l9_773=l9_769;
l9_761=l9_773;
SurfaceProperties l9_774=l9_761;
LightingComponents l9_775;
l9_775.directDiffuse=float3(0.0);
l9_775.directSpecular=float3(0.0);
l9_775.indirectDiffuse=float3(1.0);
l9_775.indirectSpecular=float3(0.0);
l9_775.emitted=float3(0.0);
l9_775.transmitted=float3(0.0);
LightingComponents l9_776=l9_775;
LightingComponents l9_777=l9_776;
float3 l9_778=l9_774.viewDirWS;
int l9_779=0;
float4 l9_780=float4(l9_774.bakedShadows,1.0);
if (sc_DirectionalLightsCount_tmp>0)
{
sc_DirectionalLight_t l9_781;
LightProperties l9_782;
int l9_783=0;
for (int snapLoopIndex=0; snapLoopIndex==0; snapLoopIndex+=0)
{
if (l9_783<sc_DirectionalLightsCount_tmp)
{
l9_781.direction=(*sc_set0.UserUniforms).sc_DirectionalLights[l9_783].direction;
l9_781.color=(*sc_set0.UserUniforms).sc_DirectionalLights[l9_783].color;
l9_782.direction=l9_781.direction;
l9_782.color=l9_781.color.xyz;
l9_782.attenuation=l9_781.color.w;
l9_782.attenuation*=l9_780[(l9_779<3) ? l9_779 : 3];
l9_779++;
LightingComponents l9_784=l9_777;
LightProperties l9_785=l9_782;
SurfaceProperties l9_786=l9_774;
float3 l9_787=l9_778;
SurfaceProperties l9_788=l9_786;
float3 l9_789=l9_785.direction;
float l9_790=dot(l9_788.normal,l9_789);
float l9_791=fast::clamp(l9_790,0.0,1.0);
float3 l9_792=float3(l9_791);
l9_784.directDiffuse+=((l9_792*l9_785.color)*l9_785.attenuation);
SurfaceProperties l9_793=l9_786;
float3 l9_794=l9_785.direction;
float3 l9_795=l9_787;
l9_784.directSpecular+=((calculateDirectSpecular(l9_793,l9_794,l9_795)*l9_785.color)*l9_785.attenuation);
LightingComponents l9_796=l9_784;
l9_777=l9_796;
l9_783++;
continue;
}
else
{
break;
}
}
}
if (sc_PointLightsCount_tmp>0)
{
sc_PointLight_t_1 l9_797;
LightProperties l9_798;
int l9_799=0;
for (int snapLoopIndex=0; snapLoopIndex==0; snapLoopIndex+=0)
{
if (l9_799<sc_PointLightsCount_tmp)
{
l9_797.falloffEnabled=(*sc_set0.UserUniforms).sc_PointLights[l9_799].falloffEnabled!=0;
l9_797.falloffEndDistance=(*sc_set0.UserUniforms).sc_PointLights[l9_799].falloffEndDistance;
l9_797.negRcpFalloffEndDistance4=(*sc_set0.UserUniforms).sc_PointLights[l9_799].negRcpFalloffEndDistance4;
l9_797.angleScale=(*sc_set0.UserUniforms).sc_PointLights[l9_799].angleScale;
l9_797.angleOffset=(*sc_set0.UserUniforms).sc_PointLights[l9_799].angleOffset;
l9_797.direction=(*sc_set0.UserUniforms).sc_PointLights[l9_799].direction;
l9_797.position=(*sc_set0.UserUniforms).sc_PointLights[l9_799].position;
l9_797.color=(*sc_set0.UserUniforms).sc_PointLights[l9_799].color;
float3 l9_800=l9_797.position-l9_774.positionWS;
l9_798.direction=normalize(l9_800);
l9_798.color=l9_797.color.xyz;
l9_798.attenuation=l9_797.color.w;
l9_798.attenuation*=l9_780[(l9_779<3) ? l9_779 : 3];
float3 l9_801=l9_798.direction;
float3 l9_802=l9_797.direction;
float l9_803=l9_797.angleScale;
float l9_804=l9_797.angleOffset;
float l9_805=dot(l9_801,l9_802);
float l9_806=fast::clamp((l9_805*l9_803)+l9_804,0.0,1.0);
float l9_807=l9_806*l9_806;
l9_798.attenuation*=l9_807;
if (l9_797.falloffEnabled)
{
float l9_808=length(l9_800);
float l9_809=l9_797.falloffEndDistance;
l9_798.attenuation*=computeDistanceAttenuation(l9_808,l9_809);
}
l9_779++;
LightingComponents l9_810=l9_777;
LightProperties l9_811=l9_798;
SurfaceProperties l9_812=l9_774;
float3 l9_813=l9_778;
SurfaceProperties l9_814=l9_812;
float3 l9_815=l9_811.direction;
float l9_816=dot(l9_814.normal,l9_815);
float l9_817=fast::clamp(l9_816,0.0,1.0);
float3 l9_818=float3(l9_817);
l9_810.directDiffuse+=((l9_818*l9_811.color)*l9_811.attenuation);
SurfaceProperties l9_819=l9_812;
float3 l9_820=l9_811.direction;
float3 l9_821=l9_813;
l9_810.directSpecular+=((calculateDirectSpecular(l9_819,l9_820,l9_821)*l9_811.color)*l9_811.attenuation);
LightingComponents l9_822=l9_810;
l9_777=l9_822;
l9_799++;
continue;
}
else
{
break;
}
}
}
if ((int(sc_ProjectiveShadowsReceiver_tmp)!=0))
{
float3 l9_823=float3(0.0);
if ((int(sc_ProjectiveShadowsReceiver_tmp)!=0))
{
float2 l9_824=abs(in.varShadowTex-float2(0.5));
float l9_825=fast::max(l9_824.x,l9_824.y);
float l9_826=step(l9_825,0.5);
float4 l9_827=sc_set0.sc_ShadowTexture.sample(sc_set0.sc_ShadowTextureSmpSC,in.varShadowTex)*l9_826;
float3 l9_828=mix((*sc_set0.UserUniforms).sc_ShadowColor.xyz,(*sc_set0.UserUniforms).sc_ShadowColor.xyz*l9_827.xyz,float3((*sc_set0.UserUniforms).sc_ShadowColor.w));
float l9_829=l9_827.w*(*sc_set0.UserUniforms).sc_ShadowDensity;
l9_823=mix(float3(1.0),l9_828,float3(l9_829));
}
else
{
l9_823=float3(1.0);
}
float3 l9_830=l9_823;
float3 l9_831=l9_830;
l9_777.directDiffuse*=l9_831;
l9_777.directSpecular*=l9_831;
}
if (((*sc_set0.UserUniforms).sc_RayTracingReceiverEffectsMask&4)!=0)
{
float4 l9_832=gl_FragCoord;
float2 l9_833=l9_832.xy*(*sc_set0.UserUniforms).sc_CurrentRenderTargetDims.zw;
float2 l9_834=l9_833;
float2 l9_835=l9_834;
float l9_836=0.0;
int l9_837;
if ((int(sc_RayTracingShadowsHasSwappedViews_tmp)!=0))
{
int l9_838=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_838=0;
}
else
{
l9_838=in.varStereoViewID;
}
int l9_839=l9_838;
l9_837=1-l9_839;
}
else
{
int l9_840=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_840=0;
}
else
{
l9_840=in.varStereoViewID;
}
int l9_841=l9_840;
l9_837=l9_841;
}
int l9_842=l9_837;
float2 l9_843=l9_835;
int l9_844=sc_RayTracingShadowsLayout_tmp;
int l9_845=l9_842;
float l9_846=l9_836;
float2 l9_847=l9_843;
int l9_848=l9_844;
int l9_849=l9_845;
float3 l9_850=float3(0.0);
if (l9_848==0)
{
l9_850=float3(l9_847,0.0);
}
else
{
if (l9_848==1)
{
l9_850=float3(l9_847.x,(l9_847.y*0.5)+(0.5-(float(l9_849)*0.5)),0.0);
}
else
{
l9_850=float3(l9_847,float(l9_849));
}
}
float3 l9_851=l9_850;
float3 l9_852=l9_851;
float4 l9_853=sc_set0.sc_RayTracingShadows.sample(sc_set0.sc_RayTracingShadowsSmpSC,l9_852.xy,bias(l9_846));
float4 l9_854=l9_853;
float4 l9_855=l9_854;
float l9_856=l9_855.x;
float l9_857=1.0-l9_856;
l9_777.directDiffuse*=l9_857;
l9_777.directSpecular*=l9_857;
}
SurfaceProperties l9_858=l9_774;
float3 l9_859=l9_858.normal;
float3 l9_860=float3(0.0);
if ((sc_EnvLightMode_tmp==sc_AmbientLightMode_EnvironmentMap_tmp)||(sc_EnvLightMode_tmp==sc_AmbientLightMode_FromCamera_tmp))
{
float3 l9_861=l9_859;
float3 l9_862=l9_861;
float l9_863=(*sc_set0.UserUniforms).sc_EnvmapRotation.y;
float2 l9_864=float2(0.0);
float l9_865=l9_862.x;
float l9_866=-l9_862.z;
float l9_867=(l9_865<0.0) ? (-1.0) : 1.0;
float l9_868=l9_867*acos(fast::clamp(l9_866/length(float2(l9_865,l9_866)),-1.0,1.0));
l9_864.x=l9_868-1.5707964;
l9_864.y=acos(l9_862.y);
l9_864/=float2(6.2831855,3.1415927);
l9_864.y=1.0-l9_864.y;
l9_864.x+=(l9_863/360.0);
l9_864.x=fract((l9_864.x+floor(l9_864.x))+1.0);
float2 l9_869=l9_864;
float2 l9_870=l9_869;
float4 l9_871=float4(0.0);
if (sc_EnvLightMode_tmp==sc_AmbientLightMode_FromCamera_tmp)
{
if (SC_DEVICE_CLASS_tmp>=2)
{
float2 l9_872=l9_870;
float2 l9_873=(*sc_set0.UserUniforms).sc_EnvmapSpecularSize.xy;
float l9_874=5.0;
l9_870=calcSeamlessPanoramicUvsForSampling(l9_872,l9_873,l9_874);
}
float2 l9_875=l9_870;
float l9_876=13.0;
int l9_877;
if ((int(sc_EnvmapSpecularHasSwappedViews_tmp)!=0))
{
int l9_878=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_878=0;
}
else
{
l9_878=in.varStereoViewID;
}
int l9_879=l9_878;
l9_877=1-l9_879;
}
else
{
int l9_880=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_880=0;
}
else
{
l9_880=in.varStereoViewID;
}
int l9_881=l9_880;
l9_877=l9_881;
}
int l9_882=l9_877;
float2 l9_883=l9_875;
int l9_884=sc_EnvmapSpecularLayout_tmp;
int l9_885=l9_882;
float l9_886=l9_876;
float2 l9_887=l9_883;
int l9_888=l9_884;
int l9_889=l9_885;
float3 l9_890=float3(0.0);
if (l9_888==0)
{
l9_890=float3(l9_887,0.0);
}
else
{
if (l9_888==1)
{
l9_890=float3(l9_887.x,(l9_887.y*0.5)+(0.5-(float(l9_889)*0.5)),0.0);
}
else
{
l9_890=float3(l9_887,float(l9_889));
}
}
float3 l9_891=l9_890;
float3 l9_892=l9_891;
float4 l9_893=sc_set0.sc_EnvmapSpecular.sample(sc_set0.sc_EnvmapSpecularSmpSC,l9_892.xy,bias(l9_886));
float4 l9_894=l9_893;
l9_871=l9_894;
}
else
{
if ((int(sc_HasDiffuseEnvmap_tmp)!=0))
{
float2 l9_895=l9_870;
float2 l9_896=(*sc_set0.UserUniforms).sc_EnvmapDiffuseSize.xy;
float l9_897=0.0;
l9_870=calcSeamlessPanoramicUvsForSampling(l9_895,l9_896,l9_897);
float2 l9_898=l9_870;
float l9_899=-13.0;
int l9_900;
if ((int(sc_EnvmapDiffuseHasSwappedViews_tmp)!=0))
{
int l9_901=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_901=0;
}
else
{
l9_901=in.varStereoViewID;
}
int l9_902=l9_901;
l9_900=1-l9_902;
}
else
{
int l9_903=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_903=0;
}
else
{
l9_903=in.varStereoViewID;
}
int l9_904=l9_903;
l9_900=l9_904;
}
int l9_905=l9_900;
float2 l9_906=l9_898;
int l9_907=sc_EnvmapDiffuseLayout_tmp;
int l9_908=l9_905;
float l9_909=l9_899;
float2 l9_910=l9_906;
int l9_911=l9_907;
int l9_912=l9_908;
float3 l9_913=float3(0.0);
if (l9_911==0)
{
l9_913=float3(l9_910,0.0);
}
else
{
if (l9_911==1)
{
l9_913=float3(l9_910.x,(l9_910.y*0.5)+(0.5-(float(l9_912)*0.5)),0.0);
}
else
{
l9_913=float3(l9_910,float(l9_912));
}
}
float3 l9_914=l9_913;
float3 l9_915=l9_914;
float4 l9_916=sc_set0.sc_EnvmapDiffuse.sample(sc_set0.sc_EnvmapDiffuseSmpSC,l9_915.xy,bias(l9_909));
float4 l9_917=l9_916;
l9_871=l9_917;
}
else
{
float2 l9_918=l9_870;
float l9_919=13.0;
int l9_920;
if ((int(sc_EnvmapSpecularHasSwappedViews_tmp)!=0))
{
int l9_921=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_921=0;
}
else
{
l9_921=in.varStereoViewID;
}
int l9_922=l9_921;
l9_920=1-l9_922;
}
else
{
int l9_923=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_923=0;
}
else
{
l9_923=in.varStereoViewID;
}
int l9_924=l9_923;
l9_920=l9_924;
}
int l9_925=l9_920;
float2 l9_926=l9_918;
int l9_927=sc_EnvmapSpecularLayout_tmp;
int l9_928=l9_925;
float l9_929=l9_919;
float2 l9_930=l9_926;
int l9_931=l9_927;
int l9_932=l9_928;
float3 l9_933=float3(0.0);
if (l9_931==0)
{
l9_933=float3(l9_930,0.0);
}
else
{
if (l9_931==1)
{
l9_933=float3(l9_930.x,(l9_930.y*0.5)+(0.5-(float(l9_932)*0.5)),0.0);
}
else
{
l9_933=float3(l9_930,float(l9_932));
}
}
float3 l9_934=l9_933;
float3 l9_935=l9_934;
float4 l9_936=sc_set0.sc_EnvmapSpecular.sample(sc_set0.sc_EnvmapSpecularSmpSC,l9_935.xy,bias(l9_929));
float4 l9_937=l9_936;
l9_871=l9_937;
}
}
float4 l9_938=l9_871;
float3 l9_939=l9_938.xyz*(1.0/l9_938.w);
float3 l9_940=l9_939*(*sc_set0.UserUniforms).sc_EnvmapExposure;
l9_860=l9_940;
}
else
{
if (sc_EnvLightMode_tmp==sc_AmbientLightMode_SphericalHarmonics_tmp)
{
float3 l9_941=(*sc_set0.UserUniforms).sc_Sh[0];
float3 l9_942=(*sc_set0.UserUniforms).sc_Sh[1];
float3 l9_943=(*sc_set0.UserUniforms).sc_Sh[2];
float3 l9_944=(*sc_set0.UserUniforms).sc_Sh[3];
float3 l9_945=(*sc_set0.UserUniforms).sc_Sh[4];
float3 l9_946=(*sc_set0.UserUniforms).sc_Sh[5];
float3 l9_947=(*sc_set0.UserUniforms).sc_Sh[6];
float3 l9_948=(*sc_set0.UserUniforms).sc_Sh[7];
float3 l9_949=(*sc_set0.UserUniforms).sc_Sh[8];
float3 l9_950=-l9_859;
float l9_951=0.0;
l9_951=l9_950.x;
float l9_952=l9_950.y;
float l9_953=l9_950.z;
float l9_954=l9_951*l9_951;
float l9_955=l9_952*l9_952;
float l9_956=l9_953*l9_953;
float l9_957=l9_951*l9_952;
float l9_958=l9_952*l9_953;
float l9_959=l9_951*l9_953;
float3 l9_960=((((((l9_949*0.42904299)*(l9_954-l9_955))+((l9_947*0.74312502)*l9_956))+(l9_941*0.88622701))-(l9_947*0.24770799))+((((l9_945*l9_957)+(l9_948*l9_959))+(l9_946*l9_958))*0.85808599))+((((l9_944*l9_951)+(l9_942*l9_952))+(l9_943*l9_953))*1.0233279);
l9_860=l9_960*(*sc_set0.UserUniforms).sc_ShIntensity;
}
}
if (((*sc_set0.UserUniforms).sc_RayTracingReceiverEffectsMask&2)!=0)
{
float4 l9_961=gl_FragCoord;
float2 l9_962=l9_961.xy*(*sc_set0.UserUniforms).sc_CurrentRenderTargetDims.zw;
float2 l9_963=l9_962;
float2 l9_964=l9_963;
float l9_965=0.0;
int l9_966;
if ((int(sc_RayTracingGlobalIlluminationHasSwappedViews_tmp)!=0))
{
int l9_967=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_967=0;
}
else
{
l9_967=in.varStereoViewID;
}
int l9_968=l9_967;
l9_966=1-l9_968;
}
else
{
int l9_969=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_969=0;
}
else
{
l9_969=in.varStereoViewID;
}
int l9_970=l9_969;
l9_966=l9_970;
}
int l9_971=l9_966;
float2 l9_972=l9_964;
int l9_973=sc_RayTracingGlobalIlluminationLayout_tmp;
int l9_974=l9_971;
float l9_975=l9_965;
float2 l9_976=l9_972;
int l9_977=l9_973;
int l9_978=l9_974;
float3 l9_979=float3(0.0);
if (l9_977==0)
{
l9_979=float3(l9_976,0.0);
}
else
{
if (l9_977==1)
{
l9_979=float3(l9_976.x,(l9_976.y*0.5)+(0.5-(float(l9_978)*0.5)),0.0);
}
else
{
l9_979=float3(l9_976,float(l9_978));
}
}
float3 l9_980=l9_979;
float3 l9_981=l9_980;
float4 l9_982=sc_set0.sc_RayTracingGlobalIllumination.sample(sc_set0.sc_RayTracingGlobalIlluminationSmpSC,l9_981.xy,bias(l9_975));
float4 l9_983=l9_982;
float4 l9_984=l9_983;
float4 l9_985=l9_984;
l9_860=mix(l9_860,l9_985.xyz,float3(l9_985.w));
}
if (sc_AmbientLightsCount_tmp>0)
{
if (sc_AmbientLightMode0_tmp==sc_AmbientLightMode_Constant_tmp)
{
l9_860+=((*sc_set0.UserUniforms).sc_AmbientLights[0].color*(*sc_set0.UserUniforms).sc_AmbientLights[0].intensity);
}
else
{
l9_860.x+=(1e-06*(*sc_set0.UserUniforms).sc_AmbientLights[0].color.x);
}
}
if (sc_AmbientLightsCount_tmp>1)
{
if (sc_AmbientLightMode1_tmp==sc_AmbientLightMode_Constant_tmp)
{
l9_860+=((*sc_set0.UserUniforms).sc_AmbientLights[1].color*(*sc_set0.UserUniforms).sc_AmbientLights[1].intensity);
}
else
{
l9_860.x+=(1e-06*(*sc_set0.UserUniforms).sc_AmbientLights[1].color.x);
}
}
if (sc_AmbientLightsCount_tmp>2)
{
if (sc_AmbientLightMode2_tmp==sc_AmbientLightMode_Constant_tmp)
{
l9_860+=((*sc_set0.UserUniforms).sc_AmbientLights[2].color*(*sc_set0.UserUniforms).sc_AmbientLights[2].intensity);
}
else
{
l9_860.x+=(1e-06*(*sc_set0.UserUniforms).sc_AmbientLights[2].color.x);
}
}
if ((int(sc_LightEstimation_tmp)!=0))
{
float3 l9_986=l9_859;
float3 l9_987=(*sc_set0.UserUniforms).sc_LightEstimationData.ambientLight;
sc_SphericalGaussianLight_t l9_988;
float l9_989;
int l9_990=0;
for (int snapLoopIndex=0; snapLoopIndex==0; snapLoopIndex+=0)
{
if (l9_990<sc_LightEstimationSGCount_tmp)
{
l9_988.color=(*sc_set0.UserUniforms).sc_LightEstimationData.sg[l9_990].color;
l9_988.sharpness=(*sc_set0.UserUniforms).sc_LightEstimationData.sg[l9_990].sharpness;
l9_988.axis=(*sc_set0.UserUniforms).sc_LightEstimationData.sg[l9_990].axis;
float3 l9_991=l9_986;
float l9_992=dot(l9_988.axis,l9_991);
float l9_993=l9_988.sharpness;
float l9_994=0.36000001;
float l9_995=1.0/(4.0*l9_994);
float l9_996=exp(-l9_993);
float l9_997=l9_996*l9_996;
float l9_998=1.0/l9_993;
float l9_999=(1.0+(2.0*l9_997))-l9_998;
float l9_1000=((l9_996-l9_997)*l9_998)-l9_997;
float l9_1001=sqrt(1.0-l9_999);
float l9_1002=l9_994*l9_992;
float l9_1003=l9_995*l9_1001;
float l9_1004=l9_1002+l9_1003;
float l9_1005=l9_992;
float l9_1006=fast::clamp(l9_1005,0.0,1.0);
float l9_1007=l9_1006;
if (step(abs(l9_1002),l9_1003)>0.5)
{
l9_989=(l9_1004*l9_1004)/l9_1001;
}
else
{
l9_989=l9_1007;
}
l9_1007=l9_989;
float l9_1008=(l9_999*l9_1007)+l9_1000;
sc_SphericalGaussianLight_t l9_1009=l9_988;
float3 l9_1010=(l9_1009.color/float3(l9_1009.sharpness))*6.2831855;
float3 l9_1011=(l9_1010*l9_1008)/float3(3.1415927);
l9_987+=l9_1011;
l9_990++;
continue;
}
else
{
break;
}
}
float3 l9_1012=l9_987;
l9_860+=l9_1012;
}
float3 l9_1013=l9_860;
float3 l9_1014=l9_1013;
l9_777.indirectDiffuse=l9_1014;
SurfaceProperties l9_1015=l9_774;
float3 l9_1016=l9_778;
float3 l9_1017=float3(0.0);
if ((sc_EnvLightMode_tmp==sc_AmbientLightMode_EnvironmentMap_tmp)||(sc_EnvLightMode_tmp==sc_AmbientLightMode_FromCamera_tmp))
{
SurfaceProperties l9_1018=l9_1015;
float3 l9_1019=l9_1016;
float3 l9_1020=l9_1018.normal;
float3 l9_1021=reflect(-l9_1019,l9_1020);
float3 l9_1022=l9_1020;
float3 l9_1023=l9_1021;
float l9_1024=l9_1018.roughness;
l9_1021=getSpecularDominantDir(l9_1022,l9_1023,l9_1024);
float l9_1025=l9_1018.roughness;
float l9_1026=pow(l9_1025,0.66666669);
float l9_1027=fast::clamp(l9_1026,0.0,1.0);
float l9_1028=l9_1027*5.0;
float l9_1029=l9_1028;
float l9_1030=l9_1029;
float3 l9_1031=l9_1021;
float l9_1032=l9_1030;
float3 l9_1033=l9_1031;
float l9_1034=l9_1032;
float4 l9_1035=float4(0.0);
float3 l9_1036=l9_1033;
float l9_1037=(*sc_set0.UserUniforms).sc_EnvmapRotation.y;
float2 l9_1038=float2(0.0);
float l9_1039=l9_1036.x;
float l9_1040=-l9_1036.z;
float l9_1041=(l9_1039<0.0) ? (-1.0) : 1.0;
float l9_1042=l9_1041*acos(fast::clamp(l9_1040/length(float2(l9_1039,l9_1040)),-1.0,1.0));
l9_1038.x=l9_1042-1.5707964;
l9_1038.y=acos(l9_1036.y);
l9_1038/=float2(6.2831855,3.1415927);
l9_1038.y=1.0-l9_1038.y;
l9_1038.x+=(l9_1037/360.0);
l9_1038.x=fract((l9_1038.x+floor(l9_1038.x))+1.0);
float2 l9_1043=l9_1038;
float2 l9_1044=l9_1043;
if (SC_DEVICE_CLASS_tmp>=2)
{
float l9_1045=floor(l9_1034);
float l9_1046=ceil(l9_1034);
float l9_1047=l9_1034-l9_1045;
float2 l9_1048=l9_1044;
float2 l9_1049=(*sc_set0.UserUniforms).sc_EnvmapSpecularSize.xy;
float l9_1050=l9_1045;
float2 l9_1051=calcSeamlessPanoramicUvsForSampling(l9_1048,l9_1049,l9_1050);
float2 l9_1052=l9_1051;
float l9_1053=l9_1045;
float2 l9_1054=l9_1052;
float l9_1055=l9_1053;
int l9_1056;
if ((int(sc_EnvmapSpecularHasSwappedViews_tmp)!=0))
{
int l9_1057=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1057=0;
}
else
{
l9_1057=in.varStereoViewID;
}
int l9_1058=l9_1057;
l9_1056=1-l9_1058;
}
else
{
int l9_1059=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1059=0;
}
else
{
l9_1059=in.varStereoViewID;
}
int l9_1060=l9_1059;
l9_1056=l9_1060;
}
int l9_1061=l9_1056;
float2 l9_1062=l9_1054;
int l9_1063=sc_EnvmapSpecularLayout_tmp;
int l9_1064=l9_1061;
float l9_1065=l9_1055;
float2 l9_1066=l9_1062;
int l9_1067=l9_1063;
int l9_1068=l9_1064;
float3 l9_1069=float3(0.0);
if (l9_1067==0)
{
l9_1069=float3(l9_1066,0.0);
}
else
{
if (l9_1067==1)
{
l9_1069=float3(l9_1066.x,(l9_1066.y*0.5)+(0.5-(float(l9_1068)*0.5)),0.0);
}
else
{
l9_1069=float3(l9_1066,float(l9_1068));
}
}
float3 l9_1070=l9_1069;
float3 l9_1071=l9_1070;
float4 l9_1072=sc_set0.sc_EnvmapSpecular.sample(sc_set0.sc_EnvmapSpecularSmpSC,l9_1071.xy,level(l9_1065));
float4 l9_1073=l9_1072;
float4 l9_1074=l9_1073;
float4 l9_1075=l9_1074;
float2 l9_1076=l9_1044;
float2 l9_1077=(*sc_set0.UserUniforms).sc_EnvmapSpecularSize.xy;
float l9_1078=l9_1046;
float2 l9_1079=calcSeamlessPanoramicUvsForSampling(l9_1076,l9_1077,l9_1078);
float2 l9_1080=l9_1079;
float l9_1081=l9_1046;
float2 l9_1082=l9_1080;
float l9_1083=l9_1081;
int l9_1084;
if ((int(sc_EnvmapSpecularHasSwappedViews_tmp)!=0))
{
int l9_1085=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1085=0;
}
else
{
l9_1085=in.varStereoViewID;
}
int l9_1086=l9_1085;
l9_1084=1-l9_1086;
}
else
{
int l9_1087=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1087=0;
}
else
{
l9_1087=in.varStereoViewID;
}
int l9_1088=l9_1087;
l9_1084=l9_1088;
}
int l9_1089=l9_1084;
float2 l9_1090=l9_1082;
int l9_1091=sc_EnvmapSpecularLayout_tmp;
int l9_1092=l9_1089;
float l9_1093=l9_1083;
float2 l9_1094=l9_1090;
int l9_1095=l9_1091;
int l9_1096=l9_1092;
float3 l9_1097=float3(0.0);
if (l9_1095==0)
{
l9_1097=float3(l9_1094,0.0);
}
else
{
if (l9_1095==1)
{
l9_1097=float3(l9_1094.x,(l9_1094.y*0.5)+(0.5-(float(l9_1096)*0.5)),0.0);
}
else
{
l9_1097=float3(l9_1094,float(l9_1096));
}
}
float3 l9_1098=l9_1097;
float3 l9_1099=l9_1098;
float4 l9_1100=sc_set0.sc_EnvmapSpecular.sample(sc_set0.sc_EnvmapSpecularSmpSC,l9_1099.xy,level(l9_1093));
float4 l9_1101=l9_1100;
float4 l9_1102=l9_1101;
float4 l9_1103=l9_1102;
l9_1035=mix(l9_1075,l9_1103,float4(l9_1047));
}
else
{
float2 l9_1104=l9_1044;
float l9_1105=l9_1034;
float2 l9_1106=l9_1104;
float l9_1107=l9_1105;
int l9_1108;
if ((int(sc_EnvmapSpecularHasSwappedViews_tmp)!=0))
{
int l9_1109=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1109=0;
}
else
{
l9_1109=in.varStereoViewID;
}
int l9_1110=l9_1109;
l9_1108=1-l9_1110;
}
else
{
int l9_1111=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1111=0;
}
else
{
l9_1111=in.varStereoViewID;
}
int l9_1112=l9_1111;
l9_1108=l9_1112;
}
int l9_1113=l9_1108;
float2 l9_1114=l9_1106;
int l9_1115=sc_EnvmapSpecularLayout_tmp;
int l9_1116=l9_1113;
float l9_1117=l9_1107;
float2 l9_1118=l9_1114;
int l9_1119=l9_1115;
int l9_1120=l9_1116;
float3 l9_1121=float3(0.0);
if (l9_1119==0)
{
l9_1121=float3(l9_1118,0.0);
}
else
{
if (l9_1119==1)
{
l9_1121=float3(l9_1118.x,(l9_1118.y*0.5)+(0.5-(float(l9_1120)*0.5)),0.0);
}
else
{
l9_1121=float3(l9_1118,float(l9_1120));
}
}
float3 l9_1122=l9_1121;
float3 l9_1123=l9_1122;
float4 l9_1124=sc_set0.sc_EnvmapSpecular.sample(sc_set0.sc_EnvmapSpecularSmpSC,l9_1123.xy,level(l9_1117));
float4 l9_1125=l9_1124;
float4 l9_1126=l9_1125;
l9_1035=l9_1126;
}
float4 l9_1127=l9_1035;
float3 l9_1128=l9_1127.xyz*(1.0/l9_1127.w);
float3 l9_1129=l9_1128;
float3 l9_1130=l9_1129*(*sc_set0.UserUniforms).sc_EnvmapExposure;
l9_1130+=float3(1e-06);
float3 l9_1131=l9_1130;
float3 l9_1132=l9_1131;
if (((*sc_set0.UserUniforms).sc_RayTracingReceiverEffectsMask&1)!=0)
{
float4 l9_1133=gl_FragCoord;
float2 l9_1134=l9_1133.xy*(*sc_set0.UserUniforms).sc_CurrentRenderTargetDims.zw;
float2 l9_1135=l9_1134;
float2 l9_1136=l9_1135;
float l9_1137=0.0;
int l9_1138;
if ((int(sc_RayTracingReflectionsHasSwappedViews_tmp)!=0))
{
int l9_1139=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1139=0;
}
else
{
l9_1139=in.varStereoViewID;
}
int l9_1140=l9_1139;
l9_1138=1-l9_1140;
}
else
{
int l9_1141=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1141=0;
}
else
{
l9_1141=in.varStereoViewID;
}
int l9_1142=l9_1141;
l9_1138=l9_1142;
}
int l9_1143=l9_1138;
float2 l9_1144=l9_1136;
int l9_1145=sc_RayTracingReflectionsLayout_tmp;
int l9_1146=l9_1143;
float l9_1147=l9_1137;
float2 l9_1148=l9_1144;
int l9_1149=l9_1145;
int l9_1150=l9_1146;
float3 l9_1151=float3(0.0);
if (l9_1149==0)
{
l9_1151=float3(l9_1148,0.0);
}
else
{
if (l9_1149==1)
{
l9_1151=float3(l9_1148.x,(l9_1148.y*0.5)+(0.5-(float(l9_1150)*0.5)),0.0);
}
else
{
l9_1151=float3(l9_1148,float(l9_1150));
}
}
float3 l9_1152=l9_1151;
float3 l9_1153=l9_1152;
float4 l9_1154=sc_set0.sc_RayTracingReflections.sample(sc_set0.sc_RayTracingReflectionsSmpSC,l9_1153.xy,bias(l9_1147));
float4 l9_1155=l9_1154;
float4 l9_1156=l9_1155;
float4 l9_1157=l9_1156;
l9_1132=mix(l9_1132,l9_1157.xyz,float3(l9_1157.w));
}
float l9_1158=abs(dot(l9_1020,l9_1019));
SurfaceProperties l9_1159=l9_1018;
float l9_1160=l9_1158;
float3 l9_1161=l9_1132*envBRDFApprox(l9_1159,l9_1160);
l9_1017+=l9_1161;
}
if ((int(sc_LightEstimation_tmp)!=0))
{
SurfaceProperties l9_1162=l9_1015;
float3 l9_1163=l9_1016;
float l9_1164=fast::clamp(l9_1162.roughness*l9_1162.roughness,0.0099999998,1.0);
float3 l9_1165=(*sc_set0.UserUniforms).sc_LightEstimationData.ambientLight*l9_1162.specColor;
sc_SphericalGaussianLight_t l9_1166;
sc_SphericalGaussianLight_t l9_1167;
sc_SphericalGaussianLight_t l9_1168;
int l9_1169=0;
for (int snapLoopIndex=0; snapLoopIndex==0; snapLoopIndex+=0)
{
if (l9_1169<sc_LightEstimationSGCount_tmp)
{
l9_1166.color=(*sc_set0.UserUniforms).sc_LightEstimationData.sg[l9_1169].color;
l9_1166.sharpness=(*sc_set0.UserUniforms).sc_LightEstimationData.sg[l9_1169].sharpness;
l9_1166.axis=(*sc_set0.UserUniforms).sc_LightEstimationData.sg[l9_1169].axis;
float3 l9_1170=l9_1162.normal;
float l9_1171=l9_1164;
float3 l9_1172=l9_1163;
float3 l9_1173=l9_1162.specColor;
float3 l9_1174=l9_1170;
float l9_1175=l9_1171;
l9_1167.axis=l9_1174;
float l9_1176=l9_1175*l9_1175;
l9_1167.sharpness=2.0/l9_1176;
l9_1167.color=float3(1.0/(3.1415927*l9_1176));
sc_SphericalGaussianLight_t l9_1177=l9_1167;
sc_SphericalGaussianLight_t l9_1178=l9_1177;
sc_SphericalGaussianLight_t l9_1179=l9_1178;
float3 l9_1180=l9_1172;
l9_1168.axis=reflect(-l9_1180,l9_1179.axis);
l9_1168.color=l9_1179.color;
l9_1168.sharpness=l9_1179.sharpness;
l9_1168.sharpness/=(4.0*fast::max(dot(l9_1179.axis,l9_1180),9.9999997e-05));
sc_SphericalGaussianLight_t l9_1181=l9_1168;
sc_SphericalGaussianLight_t l9_1182=l9_1181;
sc_SphericalGaussianLight_t l9_1183=l9_1182;
sc_SphericalGaussianLight_t l9_1184=l9_1166;
float l9_1185=length((l9_1183.axis*l9_1183.sharpness)+(l9_1184.axis*l9_1184.sharpness));
float3 l9_1186=(l9_1183.color*exp((l9_1185-l9_1183.sharpness)-l9_1184.sharpness))*l9_1184.color;
float l9_1187=1.0-exp((-2.0)*l9_1185);
float3 l9_1188=((l9_1186*6.2831855)*l9_1187)/float3(l9_1185);
float3 l9_1189=l9_1188;
float3 l9_1190=l9_1182.axis;
float l9_1191=l9_1171*l9_1171;
float l9_1192=dot(l9_1170,l9_1190);
float l9_1193=fast::clamp(l9_1192,0.0,1.0);
float l9_1194=l9_1193;
float l9_1195=dot(l9_1170,l9_1172);
float l9_1196=fast::clamp(l9_1195,0.0,1.0);
float l9_1197=l9_1196;
float3 l9_1198=normalize(l9_1182.axis+l9_1172);
float l9_1199=l9_1191;
float l9_1200=l9_1194;
float l9_1201=1.0/(l9_1200+sqrt(l9_1199+(((1.0-l9_1199)*l9_1200)*l9_1200)));
float l9_1202=l9_1191;
float l9_1203=l9_1197;
float l9_1204=1.0/(l9_1203+sqrt(l9_1202+(((1.0-l9_1202)*l9_1203)*l9_1203)));
l9_1189*=(l9_1201*l9_1204);
float l9_1205=dot(l9_1190,l9_1198);
float l9_1206=fast::clamp(l9_1205,0.0,1.0);
float l9_1207=pow(1.0-l9_1206,5.0);
l9_1189*=(l9_1173+((float3(1.0)-l9_1173)*l9_1207));
l9_1189*=l9_1194;
float3 l9_1208=l9_1189;
l9_1165+=l9_1208;
l9_1169++;
continue;
}
else
{
break;
}
}
float3 l9_1209=l9_1165;
l9_1017+=l9_1209;
}
float3 l9_1210=l9_1017;
l9_777.indirectSpecular=l9_1210;
LightingComponents l9_1211=l9_777;
LightingComponents l9_1212=l9_1211;
if ((int(sc_BlendMode_ColoredGlass_tmp)!=0))
{
l9_1212.directDiffuse=float3(0.0);
l9_1212.indirectDiffuse=float3(0.0);
float4 l9_1213=float4(0.0);
if ((int(sc_FramebufferFetch_tmp)!=0))
{
float4 l9_1214=out.sc_FragData0;
l9_1213=l9_1214;
}
else
{
float4 l9_1215=gl_FragCoord;
float2 l9_1216=l9_1215.xy*(*sc_set0.UserUniforms).sc_CurrentRenderTargetDims.zw;
float2 l9_1217=l9_1216;
float2 l9_1218=float2(0.0);
if (sc_StereoRenderingMode_tmp==1)
{
int l9_1219=1;
int l9_1220=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1220=0;
}
else
{
l9_1220=in.varStereoViewID;
}
int l9_1221=l9_1220;
int l9_1222=l9_1221;
float3 l9_1223=float3(l9_1217,0.0);
int l9_1224=l9_1219;
int l9_1225=l9_1222;
if (l9_1224==1)
{
l9_1223.y=((2.0*l9_1223.y)+float(l9_1225))-1.0;
}
float2 l9_1226=l9_1223.xy;
l9_1218=l9_1226;
}
else
{
l9_1218=l9_1217;
}
float2 l9_1227=l9_1218;
float2 l9_1228=l9_1227;
float2 l9_1229=l9_1228;
float2 l9_1230=l9_1229;
float l9_1231=0.0;
int l9_1232;
if ((int(sc_ScreenTextureHasSwappedViews_tmp)!=0))
{
int l9_1233=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1233=0;
}
else
{
l9_1233=in.varStereoViewID;
}
int l9_1234=l9_1233;
l9_1232=1-l9_1234;
}
else
{
int l9_1235=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1235=0;
}
else
{
l9_1235=in.varStereoViewID;
}
int l9_1236=l9_1235;
l9_1232=l9_1236;
}
int l9_1237=l9_1232;
float2 l9_1238=l9_1230;
int l9_1239=sc_ScreenTextureLayout_tmp;
int l9_1240=l9_1237;
float l9_1241=l9_1231;
float2 l9_1242=l9_1238;
int l9_1243=l9_1239;
int l9_1244=l9_1240;
float3 l9_1245=float3(0.0);
if (l9_1243==0)
{
l9_1245=float3(l9_1242,0.0);
}
else
{
if (l9_1243==1)
{
l9_1245=float3(l9_1242.x,(l9_1242.y*0.5)+(0.5-(float(l9_1244)*0.5)),0.0);
}
else
{
l9_1245=float3(l9_1242,float(l9_1244));
}
}
float3 l9_1246=l9_1245;
float3 l9_1247=l9_1246;
float4 l9_1248=sc_set0.sc_ScreenTexture.sample(sc_set0.sc_ScreenTextureSmpSC,l9_1247.xy,bias(l9_1241));
float4 l9_1249=l9_1248;
float4 l9_1250=l9_1249;
l9_1213=l9_1250;
}
float4 l9_1251=l9_1213;
float3 l9_1252=l9_1251.xyz;
float3 l9_1253;
if (SC_DEVICE_CLASS_tmp>=2)
{
l9_1253=float3(pow(l9_1252.x,2.2),pow(l9_1252.y,2.2),pow(l9_1252.z,2.2));
}
else
{
l9_1253=l9_1252*l9_1252;
}
float3 l9_1254=l9_1253;
float3 l9_1255=l9_1254;
l9_1212.transmitted=l9_1255*mix(float3(1.0),l9_761.albedo,float3(l9_761.opacity));
l9_761.opacity=1.0;
}
bool l9_1256=false;
if ((int(sc_BlendMode_PremultipliedAlpha_tmp)!=0))
{
l9_1256=true;
}
SurfaceProperties l9_1257=l9_761;
LightingComponents l9_1258=l9_1212;
bool l9_1259=l9_1256;
float3 l9_1260=l9_1257.albedo*(l9_1258.directDiffuse+(l9_1258.indirectDiffuse*l9_1257.ao));
float3 l9_1261=l9_1258.directSpecular+(l9_1258.indirectSpecular*l9_1257.specularAo);
float3 l9_1262=l9_1257.emissive;
float3 l9_1263=l9_1258.transmitted;
if (l9_1259)
{
float l9_1264=l9_1257.opacity;
l9_1260*=srgbToLinear(l9_1264);
}
float3 l9_1265=((l9_1260+l9_1261)+l9_1262)+l9_1263;
float3 l9_1266=l9_1265;
float4 l9_1267=float4(l9_1266,l9_761.opacity);
if ((int(sc_IsEditor_tmp)!=0))
{
l9_1267.x+=((l9_761.ao.x*l9_761.specularAo.x)*9.9999997e-06);
}
if (!(int(sc_BlendMode_Multiply_tmp)!=0))
{
float3 l9_1268=l9_1267.xyz;
float l9_1269=1.8;
float l9_1270=1.4;
float l9_1271=0.5;
float l9_1272=1.5;
float3 l9_1273=(l9_1268*((l9_1268*l9_1269)+float3(l9_1270)))/((l9_1268*((l9_1268*l9_1269)+float3(l9_1271)))+float3(l9_1272));
l9_1267=float4(l9_1273.x,l9_1273.y,l9_1273.z,l9_1267.w);
}
float3 l9_1274=l9_1267.xyz;
float l9_1275=l9_1274.x;
float l9_1276=l9_1274.y;
float l9_1277=l9_1274.z;
float3 l9_1278=float3(linearToSrgb(l9_1275),linearToSrgb(l9_1276),linearToSrgb(l9_1277));
l9_1267=float4(l9_1278.x,l9_1278.y,l9_1278.z,l9_1267.w);
float4 l9_1279=l9_1267;
param_75=l9_1279;
}
param_75=fast::max(param_75,float4(0.0));
Output_N14=param_75;
float Output_N299=0.0;
float param_77=(*sc_set0.UserUniforms).intensityMatcap;
Output_N299=param_77;
float Value_N283=0.0;
Value_N283=Output_N299;
float Value_N287=0.0;
Value_N287=1.0;
float4 Output_N295=float4(0.0);
float2 param_78=uv_N2;
int l9_1280;
if ((int(normalTexMatcapHasSwappedViews_tmp)!=0))
{
int l9_1281=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1281=0;
}
else
{
l9_1281=in.varStereoViewID;
}
int l9_1282=l9_1281;
l9_1280=1-l9_1282;
}
else
{
int l9_1283=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1283=0;
}
else
{
l9_1283=in.varStereoViewID;
}
int l9_1284=l9_1283;
l9_1280=l9_1284;
}
int l9_1285=l9_1280;
int l9_1286=normalTexMatcapLayout_tmp;
int l9_1287=l9_1285;
float2 l9_1288=param_78;
bool l9_1289=(int(SC_USE_UV_TRANSFORM_normalTexMatcap_tmp)!=0);
float3x3 l9_1290=(*sc_set0.UserUniforms).normalTexMatcapTransform;
int2 l9_1291=int2(SC_SOFTWARE_WRAP_MODE_U_normalTexMatcap_tmp,SC_SOFTWARE_WRAP_MODE_V_normalTexMatcap_tmp);
bool l9_1292=(int(SC_USE_UV_MIN_MAX_normalTexMatcap_tmp)!=0);
float4 l9_1293=(*sc_set0.UserUniforms).normalTexMatcapUvMinMax;
bool l9_1294=(int(SC_USE_CLAMP_TO_BORDER_normalTexMatcap_tmp)!=0);
float4 l9_1295=(*sc_set0.UserUniforms).normalTexMatcapBorderColor;
float l9_1296=0.0;
bool l9_1297=l9_1294&&(!l9_1292);
float l9_1298=1.0;
float l9_1299=l9_1288.x;
int l9_1300=l9_1291.x;
if (l9_1300==1)
{
l9_1299=fract(l9_1299);
}
else
{
if (l9_1300==2)
{
float l9_1301=fract(l9_1299);
float l9_1302=l9_1299-l9_1301;
float l9_1303=step(0.25,fract(l9_1302*0.5));
l9_1299=mix(l9_1301,1.0-l9_1301,fast::clamp(l9_1303,0.0,1.0));
}
}
l9_1288.x=l9_1299;
float l9_1304=l9_1288.y;
int l9_1305=l9_1291.y;
if (l9_1305==1)
{
l9_1304=fract(l9_1304);
}
else
{
if (l9_1305==2)
{
float l9_1306=fract(l9_1304);
float l9_1307=l9_1304-l9_1306;
float l9_1308=step(0.25,fract(l9_1307*0.5));
l9_1304=mix(l9_1306,1.0-l9_1306,fast::clamp(l9_1308,0.0,1.0));
}
}
l9_1288.y=l9_1304;
if (l9_1292)
{
bool l9_1309=l9_1294;
bool l9_1310;
if (l9_1309)
{
l9_1310=l9_1291.x==3;
}
else
{
l9_1310=l9_1309;
}
float l9_1311=l9_1288.x;
float l9_1312=l9_1293.x;
float l9_1313=l9_1293.z;
bool l9_1314=l9_1310;
float l9_1315=l9_1298;
float l9_1316=fast::clamp(l9_1311,l9_1312,l9_1313);
float l9_1317=step(abs(l9_1311-l9_1316),9.9999997e-06);
l9_1315*=(l9_1317+((1.0-float(l9_1314))*(1.0-l9_1317)));
l9_1311=l9_1316;
l9_1288.x=l9_1311;
l9_1298=l9_1315;
bool l9_1318=l9_1294;
bool l9_1319;
if (l9_1318)
{
l9_1319=l9_1291.y==3;
}
else
{
l9_1319=l9_1318;
}
float l9_1320=l9_1288.y;
float l9_1321=l9_1293.y;
float l9_1322=l9_1293.w;
bool l9_1323=l9_1319;
float l9_1324=l9_1298;
float l9_1325=fast::clamp(l9_1320,l9_1321,l9_1322);
float l9_1326=step(abs(l9_1320-l9_1325),9.9999997e-06);
l9_1324*=(l9_1326+((1.0-float(l9_1323))*(1.0-l9_1326)));
l9_1320=l9_1325;
l9_1288.y=l9_1320;
l9_1298=l9_1324;
}
float2 l9_1327=l9_1288;
bool l9_1328=l9_1289;
float3x3 l9_1329=l9_1290;
if (l9_1328)
{
l9_1327=float2((l9_1329*float3(l9_1327,1.0)).xy);
}
float2 l9_1330=l9_1327;
l9_1288=l9_1330;
float l9_1331=l9_1288.x;
int l9_1332=l9_1291.x;
bool l9_1333=l9_1297;
float l9_1334=l9_1298;
if ((l9_1332==0)||(l9_1332==3))
{
float l9_1335=l9_1331;
float l9_1336=0.0;
float l9_1337=1.0;
bool l9_1338=l9_1333;
float l9_1339=l9_1334;
float l9_1340=fast::clamp(l9_1335,l9_1336,l9_1337);
float l9_1341=step(abs(l9_1335-l9_1340),9.9999997e-06);
l9_1339*=(l9_1341+((1.0-float(l9_1338))*(1.0-l9_1341)));
l9_1335=l9_1340;
l9_1331=l9_1335;
l9_1334=l9_1339;
}
l9_1288.x=l9_1331;
l9_1298=l9_1334;
float l9_1342=l9_1288.y;
int l9_1343=l9_1291.y;
bool l9_1344=l9_1297;
float l9_1345=l9_1298;
if ((l9_1343==0)||(l9_1343==3))
{
float l9_1346=l9_1342;
float l9_1347=0.0;
float l9_1348=1.0;
bool l9_1349=l9_1344;
float l9_1350=l9_1345;
float l9_1351=fast::clamp(l9_1346,l9_1347,l9_1348);
float l9_1352=step(abs(l9_1346-l9_1351),9.9999997e-06);
l9_1350*=(l9_1352+((1.0-float(l9_1349))*(1.0-l9_1352)));
l9_1346=l9_1351;
l9_1342=l9_1346;
l9_1345=l9_1350;
}
l9_1288.y=l9_1342;
l9_1298=l9_1345;
float2 l9_1353=l9_1288;
int l9_1354=l9_1286;
int l9_1355=l9_1287;
float l9_1356=l9_1296;
float2 l9_1357=l9_1353;
int l9_1358=l9_1354;
int l9_1359=l9_1355;
float3 l9_1360=float3(0.0);
if (l9_1358==0)
{
l9_1360=float3(l9_1357,0.0);
}
else
{
if (l9_1358==1)
{
l9_1360=float3(l9_1357.x,(l9_1357.y*0.5)+(0.5-(float(l9_1359)*0.5)),0.0);
}
else
{
l9_1360=float3(l9_1357,float(l9_1359));
}
}
float3 l9_1361=l9_1360;
float3 l9_1362=l9_1361;
float4 l9_1363=sc_set0.normalTexMatcap.sample(sc_set0.normalTexMatcapSmpSC,l9_1362.xy,bias(l9_1356));
float4 l9_1364=l9_1363;
if (l9_1294)
{
l9_1364=mix(l9_1295,l9_1364,float4(l9_1298));
}
float4 l9_1365=l9_1364;
float4 param_79=l9_1365;
float3 l9_1366=(param_79.xyz*1.9921875)-float3(1.0);
param_79=float4(l9_1366.x,l9_1366.y,l9_1366.z,param_79.w);
Output_N295=param_79;
float3 Normal_TangentSpace_N297=float3(0.0);
float param_80=Output_N13;
float3 param_81=Output_N295.xyz;
ssGlobals param_83=Globals;
tempGlobals=param_83;
float3 param_82=float3(0.0);
N297_MESHTYPE=int(param_80);
N297_USENORMALMAP=(int(Tweak_N296_tmp)!=0);
N297_NormalFromTex=param_81;
N297_Normal_TangentSpace=float3(0.0,0.0,1.0);
if (N297_MESHTYPE==1)
{
if (N297_USENORMALMAP)
{
N297_Normal_TangentSpace=N297_NormalFromTex;
}
}
param_82=N297_Normal_TangentSpace;
Normal_TangentSpace_N297=param_82;
float3 Value_N286=float3(0.0);
Value_N286=Normal_TangentSpace_N297;
float2 ReflectionUV_N288=float2(0.0);
float param_84=Value_N287;
float3 param_85=Value_N286;
ssGlobals param_87=Globals;
tempGlobals=param_87;
float2 param_86=float2(0.0);
N288_NormalSpace=int(param_84);
N288_Normal=param_85;
float3 l9_1367=N288_Normal;
if (N288_NormalSpace==1)
{
float3 l9_1368=tempGlobals.VertexTangent_WorldSpace;
float3 l9_1369=tempGlobals.VertexBinormal_WorldSpace;
float3 l9_1370=tempGlobals.VertexNormal_WorldSpace;
float3x3 l9_1371=float3x3(float3(l9_1368),float3(l9_1369),float3(l9_1370));
l9_1367=normalize(l9_1371*l9_1367);
}
float3 l9_1372=tempGlobals.ViewDirWS;
float3 l9_1373=normalize(-l9_1372);
float3 l9_1374=l9_1373;
int l9_1375=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1375=0;
}
else
{
l9_1375=in.varStereoViewID;
}
int l9_1376=l9_1375;
float3 l9_1377=(*sc_set0.UserUniforms).sc_ViewMatrixInverseArray[l9_1376][1].xyz;
float3 l9_1378=normalize(cross(l9_1374,l9_1377));
float3 l9_1379=cross(l9_1378,l9_1373);
float3x3 l9_1380=float3x3(float3(l9_1378.x,l9_1379.x,l9_1373.x),float3(l9_1378.y,l9_1379.y,l9_1373.y),float3(l9_1378.z,l9_1379.z,l9_1373.z));
l9_1367=l9_1380*l9_1367;
N288_ReflectionUV=(l9_1367.xy*0.5)+float2(0.5);
param_86=N288_ReflectionUV;
ReflectionUV_N288=param_86;
float4 Color_N289=float4(0.0);
int l9_1381;
if ((int(matcapTexHasSwappedViews_tmp)!=0))
{
int l9_1382=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1382=0;
}
else
{
l9_1382=in.varStereoViewID;
}
int l9_1383=l9_1382;
l9_1381=1-l9_1383;
}
else
{
int l9_1384=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1384=0;
}
else
{
l9_1384=in.varStereoViewID;
}
int l9_1385=l9_1384;
l9_1381=l9_1385;
}
int l9_1386=l9_1381;
int param_88=matcapTexLayout_tmp;
int param_89=l9_1386;
float2 param_90=ReflectionUV_N288;
bool param_91=(int(SC_USE_UV_TRANSFORM_matcapTex_tmp)!=0);
float3x3 param_92=(*sc_set0.UserUniforms).matcapTexTransform;
int2 param_93=int2(SC_SOFTWARE_WRAP_MODE_U_matcapTex_tmp,SC_SOFTWARE_WRAP_MODE_V_matcapTex_tmp);
bool param_94=(int(SC_USE_UV_MIN_MAX_matcapTex_tmp)!=0);
float4 param_95=(*sc_set0.UserUniforms).matcapTexUvMinMax;
bool param_96=(int(SC_USE_CLAMP_TO_BORDER_matcapTex_tmp)!=0);
float4 param_97=(*sc_set0.UserUniforms).matcapTexBorderColor;
float param_98=0.0;
bool l9_1387=param_96&&(!param_94);
float l9_1388=1.0;
float l9_1389=param_90.x;
int l9_1390=param_93.x;
if (l9_1390==1)
{
l9_1389=fract(l9_1389);
}
else
{
if (l9_1390==2)
{
float l9_1391=fract(l9_1389);
float l9_1392=l9_1389-l9_1391;
float l9_1393=step(0.25,fract(l9_1392*0.5));
l9_1389=mix(l9_1391,1.0-l9_1391,fast::clamp(l9_1393,0.0,1.0));
}
}
param_90.x=l9_1389;
float l9_1394=param_90.y;
int l9_1395=param_93.y;
if (l9_1395==1)
{
l9_1394=fract(l9_1394);
}
else
{
if (l9_1395==2)
{
float l9_1396=fract(l9_1394);
float l9_1397=l9_1394-l9_1396;
float l9_1398=step(0.25,fract(l9_1397*0.5));
l9_1394=mix(l9_1396,1.0-l9_1396,fast::clamp(l9_1398,0.0,1.0));
}
}
param_90.y=l9_1394;
if (param_94)
{
bool l9_1399=param_96;
bool l9_1400;
if (l9_1399)
{
l9_1400=param_93.x==3;
}
else
{
l9_1400=l9_1399;
}
float l9_1401=param_90.x;
float l9_1402=param_95.x;
float l9_1403=param_95.z;
bool l9_1404=l9_1400;
float l9_1405=l9_1388;
float l9_1406=fast::clamp(l9_1401,l9_1402,l9_1403);
float l9_1407=step(abs(l9_1401-l9_1406),9.9999997e-06);
l9_1405*=(l9_1407+((1.0-float(l9_1404))*(1.0-l9_1407)));
l9_1401=l9_1406;
param_90.x=l9_1401;
l9_1388=l9_1405;
bool l9_1408=param_96;
bool l9_1409;
if (l9_1408)
{
l9_1409=param_93.y==3;
}
else
{
l9_1409=l9_1408;
}
float l9_1410=param_90.y;
float l9_1411=param_95.y;
float l9_1412=param_95.w;
bool l9_1413=l9_1409;
float l9_1414=l9_1388;
float l9_1415=fast::clamp(l9_1410,l9_1411,l9_1412);
float l9_1416=step(abs(l9_1410-l9_1415),9.9999997e-06);
l9_1414*=(l9_1416+((1.0-float(l9_1413))*(1.0-l9_1416)));
l9_1410=l9_1415;
param_90.y=l9_1410;
l9_1388=l9_1414;
}
float2 l9_1417=param_90;
bool l9_1418=param_91;
float3x3 l9_1419=param_92;
if (l9_1418)
{
l9_1417=float2((l9_1419*float3(l9_1417,1.0)).xy);
}
float2 l9_1420=l9_1417;
param_90=l9_1420;
float l9_1421=param_90.x;
int l9_1422=param_93.x;
bool l9_1423=l9_1387;
float l9_1424=l9_1388;
if ((l9_1422==0)||(l9_1422==3))
{
float l9_1425=l9_1421;
float l9_1426=0.0;
float l9_1427=1.0;
bool l9_1428=l9_1423;
float l9_1429=l9_1424;
float l9_1430=fast::clamp(l9_1425,l9_1426,l9_1427);
float l9_1431=step(abs(l9_1425-l9_1430),9.9999997e-06);
l9_1429*=(l9_1431+((1.0-float(l9_1428))*(1.0-l9_1431)));
l9_1425=l9_1430;
l9_1421=l9_1425;
l9_1424=l9_1429;
}
param_90.x=l9_1421;
l9_1388=l9_1424;
float l9_1432=param_90.y;
int l9_1433=param_93.y;
bool l9_1434=l9_1387;
float l9_1435=l9_1388;
if ((l9_1433==0)||(l9_1433==3))
{
float l9_1436=l9_1432;
float l9_1437=0.0;
float l9_1438=1.0;
bool l9_1439=l9_1434;
float l9_1440=l9_1435;
float l9_1441=fast::clamp(l9_1436,l9_1437,l9_1438);
float l9_1442=step(abs(l9_1436-l9_1441),9.9999997e-06);
l9_1440*=(l9_1442+((1.0-float(l9_1439))*(1.0-l9_1442)));
l9_1436=l9_1441;
l9_1432=l9_1436;
l9_1435=l9_1440;
}
param_90.y=l9_1432;
l9_1388=l9_1435;
float2 l9_1443=param_90;
int l9_1444=param_88;
int l9_1445=param_89;
float l9_1446=param_98;
float2 l9_1447=l9_1443;
int l9_1448=l9_1444;
int l9_1449=l9_1445;
float3 l9_1450=float3(0.0);
if (l9_1448==0)
{
l9_1450=float3(l9_1447,0.0);
}
else
{
if (l9_1448==1)
{
l9_1450=float3(l9_1447.x,(l9_1447.y*0.5)+(0.5-(float(l9_1449)*0.5)),0.0);
}
else
{
l9_1450=float3(l9_1447,float(l9_1449));
}
}
float3 l9_1451=l9_1450;
float3 l9_1452=l9_1451;
float4 l9_1453=sc_set0.matcapTex.sample(sc_set0.matcapTexSmpSC,l9_1452.xy,bias(l9_1446));
float4 l9_1454=l9_1453;
if (param_96)
{
l9_1454=mix(param_97,l9_1454,float4(l9_1388));
}
float4 l9_1455=l9_1454;
Color_N289=l9_1455;
float4 Output_N290=float4(0.0);
Output_N290=float4(Value_N283)*Color_N289;
float4 Export_N291=float4(0.0);
Export_N291=Output_N290;
float4 Output_N292=float4(0.0);
Output_N292=result_N2+Export_N291;
float4 Result_N112=float4(0.0);
float param_99=Output_N13;
float4 param_100=result_N2;
float4 param_101=Output_N14;
float4 param_102=Output_N292;
ssGlobals param_104=Globals;
tempGlobals=param_104;
float4 param_103=float4(0.0);
N112_MESHTYPE=int(param_99);
N112_ParticleColor=param_100;
N112_DO_PBR=(int(PBR_tmp)!=0);
N112_DO_MATCAP=(int(matcap_tmp)!=0);
N112_PBRColor=param_101;
N112_MatcapColor=param_102;
N112_Result=N112_ParticleColor;
if (N112_MESHTYPE==1)
{
if (N112_DO_PBR)
{
N112_Result=N112_PBRColor;
}
else
{
if (N112_DO_MATCAP)
{
N112_Result=N112_MatcapColor;
}
}
}
param_103=N112_Result;
Result_N112=param_103;
float2 ScreenCoord_N324=float2(0.0);
ScreenCoord_N324=Globals.gScreenCoord;
float Output_N326=0.0;
float param_105=(*sc_set0.UserUniforms).startFade;
Output_N326=param_105;
float Output_N327=0.0;
float param_106=(*sc_set0.UserUniforms).endFade;
Output_N327=param_106;
float Output_N328=0.0;
float param_107=(*sc_set0.UserUniforms).exponentFade;
Output_N328=param_107;
float4 ColorOut_N322=float4(0.0);
float4 param_108=Result_N112;
float2 param_109=ScreenCoord_N324;
float param_110=Output_N326;
float param_111=Output_N327;
float param_112=Output_N328;
ssGlobals param_114=Globals;
tempGlobals=param_114;
float4 param_113=float4(0.0);
N322_SoftOccluder=(int(Tweak_N323_tmp)!=0);
N322_ColorIn=param_108;
N322_ScreenUV=param_109;
N322_StartFade=param_110;
N322_EndFade=param_111;
N322_Exponent=param_112;
float4 l9_1456=N322_ColorIn;
float2 l9_1457=N322_ScreenUV;
float4 l9_1458=float4(0.0);
int l9_1459;
if ((int(depthMapHasSwappedViews_tmp)!=0))
{
int l9_1460=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1460=0;
}
else
{
l9_1460=in.varStereoViewID;
}
int l9_1461=l9_1460;
l9_1459=1-l9_1461;
}
else
{
int l9_1462=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1462=0;
}
else
{
l9_1462=in.varStereoViewID;
}
int l9_1463=l9_1462;
l9_1459=l9_1463;
}
int l9_1464=l9_1459;
int l9_1465=depthMapLayout_tmp;
int l9_1466=l9_1464;
float2 l9_1467=l9_1457;
bool l9_1468=(int(SC_USE_UV_TRANSFORM_depthMap_tmp)!=0);
float3x3 l9_1469=(*sc_set0.UserUniforms).depthMapTransform;
int2 l9_1470=int2(SC_SOFTWARE_WRAP_MODE_U_depthMap_tmp,SC_SOFTWARE_WRAP_MODE_V_depthMap_tmp);
bool l9_1471=(int(SC_USE_UV_MIN_MAX_depthMap_tmp)!=0);
float4 l9_1472=(*sc_set0.UserUniforms).depthMapUvMinMax;
bool l9_1473=(int(SC_USE_CLAMP_TO_BORDER_depthMap_tmp)!=0);
float4 l9_1474=(*sc_set0.UserUniforms).depthMapBorderColor;
float l9_1475=0.0;
bool l9_1476=l9_1473&&(!l9_1471);
float l9_1477=1.0;
float l9_1478=l9_1467.x;
int l9_1479=l9_1470.x;
if (l9_1479==1)
{
l9_1478=fract(l9_1478);
}
else
{
if (l9_1479==2)
{
float l9_1480=fract(l9_1478);
float l9_1481=l9_1478-l9_1480;
float l9_1482=step(0.25,fract(l9_1481*0.5));
l9_1478=mix(l9_1480,1.0-l9_1480,fast::clamp(l9_1482,0.0,1.0));
}
}
l9_1467.x=l9_1478;
float l9_1483=l9_1467.y;
int l9_1484=l9_1470.y;
if (l9_1484==1)
{
l9_1483=fract(l9_1483);
}
else
{
if (l9_1484==2)
{
float l9_1485=fract(l9_1483);
float l9_1486=l9_1483-l9_1485;
float l9_1487=step(0.25,fract(l9_1486*0.5));
l9_1483=mix(l9_1485,1.0-l9_1485,fast::clamp(l9_1487,0.0,1.0));
}
}
l9_1467.y=l9_1483;
if (l9_1471)
{
bool l9_1488=l9_1473;
bool l9_1489;
if (l9_1488)
{
l9_1489=l9_1470.x==3;
}
else
{
l9_1489=l9_1488;
}
float l9_1490=l9_1467.x;
float l9_1491=l9_1472.x;
float l9_1492=l9_1472.z;
bool l9_1493=l9_1489;
float l9_1494=l9_1477;
float l9_1495=fast::clamp(l9_1490,l9_1491,l9_1492);
float l9_1496=step(abs(l9_1490-l9_1495),9.9999997e-06);
l9_1494*=(l9_1496+((1.0-float(l9_1493))*(1.0-l9_1496)));
l9_1490=l9_1495;
l9_1467.x=l9_1490;
l9_1477=l9_1494;
bool l9_1497=l9_1473;
bool l9_1498;
if (l9_1497)
{
l9_1498=l9_1470.y==3;
}
else
{
l9_1498=l9_1497;
}
float l9_1499=l9_1467.y;
float l9_1500=l9_1472.y;
float l9_1501=l9_1472.w;
bool l9_1502=l9_1498;
float l9_1503=l9_1477;
float l9_1504=fast::clamp(l9_1499,l9_1500,l9_1501);
float l9_1505=step(abs(l9_1499-l9_1504),9.9999997e-06);
l9_1503*=(l9_1505+((1.0-float(l9_1502))*(1.0-l9_1505)));
l9_1499=l9_1504;
l9_1467.y=l9_1499;
l9_1477=l9_1503;
}
float2 l9_1506=l9_1467;
bool l9_1507=l9_1468;
float3x3 l9_1508=l9_1469;
if (l9_1507)
{
l9_1506=float2((l9_1508*float3(l9_1506,1.0)).xy);
}
float2 l9_1509=l9_1506;
l9_1467=l9_1509;
float l9_1510=l9_1467.x;
int l9_1511=l9_1470.x;
bool l9_1512=l9_1476;
float l9_1513=l9_1477;
if ((l9_1511==0)||(l9_1511==3))
{
float l9_1514=l9_1510;
float l9_1515=0.0;
float l9_1516=1.0;
bool l9_1517=l9_1512;
float l9_1518=l9_1513;
float l9_1519=fast::clamp(l9_1514,l9_1515,l9_1516);
float l9_1520=step(abs(l9_1514-l9_1519),9.9999997e-06);
l9_1518*=(l9_1520+((1.0-float(l9_1517))*(1.0-l9_1520)));
l9_1514=l9_1519;
l9_1510=l9_1514;
l9_1513=l9_1518;
}
l9_1467.x=l9_1510;
l9_1477=l9_1513;
float l9_1521=l9_1467.y;
int l9_1522=l9_1470.y;
bool l9_1523=l9_1476;
float l9_1524=l9_1477;
if ((l9_1522==0)||(l9_1522==3))
{
float l9_1525=l9_1521;
float l9_1526=0.0;
float l9_1527=1.0;
bool l9_1528=l9_1523;
float l9_1529=l9_1524;
float l9_1530=fast::clamp(l9_1525,l9_1526,l9_1527);
float l9_1531=step(abs(l9_1525-l9_1530),9.9999997e-06);
l9_1529*=(l9_1531+((1.0-float(l9_1528))*(1.0-l9_1531)));
l9_1525=l9_1530;
l9_1521=l9_1525;
l9_1524=l9_1529;
}
l9_1467.y=l9_1521;
l9_1477=l9_1524;
float2 l9_1532=l9_1467;
int l9_1533=l9_1465;
int l9_1534=l9_1466;
float l9_1535=l9_1475;
float2 l9_1536=l9_1532;
int l9_1537=l9_1533;
int l9_1538=l9_1534;
float3 l9_1539=float3(0.0);
if (l9_1537==0)
{
l9_1539=float3(l9_1536,0.0);
}
else
{
if (l9_1537==1)
{
l9_1539=float3(l9_1536.x,(l9_1536.y*0.5)+(0.5-(float(l9_1538)*0.5)),0.0);
}
else
{
l9_1539=float3(l9_1536,float(l9_1538));
}
}
float3 l9_1540=l9_1539;
float3 l9_1541=l9_1540;
float4 l9_1542=sc_set0.depthMap.sample(sc_set0.depthMapSmpSC,l9_1541.xy,bias(l9_1535));
float4 l9_1543=l9_1542;
if (l9_1473)
{
l9_1543=mix(l9_1474,l9_1543,float4(l9_1477));
}
float4 l9_1544=l9_1543;
float l9_1545=l9_1544.x;
float4 l9_1546=(*sc_set0.UserUniforms).depthMapProjectionMatrixTerms;
float l9_1547=l9_1546.x;
float l9_1548=l9_1546.y;
bool l9_1549=l9_1546.z==0.0;
l9_1545=(l9_1545*2.0)-1.0;
float l9_1550;
if (l9_1549)
{
l9_1550=(l9_1545-l9_1548)/l9_1547;
}
else
{
l9_1550=l9_1548/((-l9_1545)-l9_1547);
}
float l9_1551=l9_1550;
float l9_1552=l9_1551;
l9_1458=float4(l9_1552);
float4 l9_1553=l9_1458;
float l9_1554=l9_1553.x;
float l9_1555=l9_1554;
float2 l9_1556=N322_ScreenUV;
float2 l9_1557=float2(0.5)-l9_1556;
l9_1557*=l9_1555;
float l9_1558=(*sc_set0.UserUniforms).sc_Camera.aspect;
l9_1557*=float2(l9_1558,1.0);
float l9_1559=tempGlobals.CameraFOV;
l9_1557*=(tan(radians(l9_1559)*0.5)*2.0);
int l9_1560=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1560=0;
}
else
{
l9_1560=in.varStereoViewID;
}
int l9_1561=l9_1560;
float4x4 l9_1562=(*sc_set0.UserUniforms).sc_ViewMatrixInverseArray[l9_1561];
float3 l9_1563=(l9_1562*float4(l9_1557,l9_1555,1.0)).xyz;
float3 l9_1564=l9_1563;
float3 l9_1565=tempGlobals.SurfacePosition_WorldSpace;
float l9_1566=distance(l9_1565,l9_1564);
float l9_1567=0.0+(((l9_1566-N322_EndFade)*1.0)/((N322_StartFade-N322_EndFade)+1e-06));
float l9_1568=N322_Exponent;
float l9_1569;
if (l9_1567<=0.0)
{
l9_1569=0.0;
}
else
{
l9_1569=pow(l9_1567,l9_1568);
}
float l9_1570=l9_1569;
float l9_1571=fast::clamp(l9_1570,0.0,1.0);
if (N322_SoftOccluder)
{
l9_1456.w*=l9_1571;
}
N322_ColorOut=l9_1456;
param_113=N322_ColorOut;
ColorOut_N322=param_113;
float Output_N151=0.0;
float param_115=float((*sc_set0.UserUniforms).texMask!=0);
Output_N151=param_115;
float Output_N337=0.0;
float param_116=float((*sc_set0.UserUniforms).texMaskInvert!=0);
Output_N337=param_116;
float3 particlePositionO_N111=float3(0.0);
ssGlobals param_118=Globals;
tempGlobals=param_118;
float3 param_117=float3(0.0);
float3 l9_1572=float3(0.0);
float l9_1573=0.0;
float l9_1574=(*sc_set0.UserUniforms).timeGlobal;
l9_1573=l9_1574;
float l9_1575=0.0;
float l9_1576=(*sc_set0.UserUniforms).externalTimeInput;
l9_1575=l9_1576;
float l9_1577=0.0;
float l9_1578=(*sc_set0.UserUniforms).externalSeed;
l9_1577=l9_1578;
float l9_1579=0.0;
float l9_1580=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_1579=l9_1580;
float2 l9_1581=float2(0.0);
float2 l9_1582=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_1581=l9_1582;
float l9_1583=0.0;
float l9_1584;
if ((int(TRAILS_tmp)!=0))
{
l9_1584=1.001;
}
else
{
l9_1584=0.001;
}
l9_1584-=0.001;
l9_1583=l9_1584;
float l9_1585=0.0;
float l9_1586=(*sc_set0.UserUniforms).trailLength;
l9_1585=l9_1586;
float4 l9_1587=float4(0.0);
l9_1587=tempGlobals.VertexColor;
float l9_1588=0.0;
l9_1588=l9_1587.x;
float l9_1589=0.0;
float l9_1590=l9_1583;
bool l9_1591=(l9_1590*1.0)!=0.0;
bool l9_1592;
if (l9_1591)
{
l9_1592=(l9_1588*1.0)!=0.0;
}
else
{
l9_1592=l9_1591;
}
l9_1589=float(l9_1592);
float3 l9_1593=float3(0.0);
float l9_1594=l9_1573;
float l9_1595=l9_1575;
float l9_1596=l9_1577;
float l9_1597=l9_1579;
float2 l9_1598=l9_1581;
float l9_1599=l9_1585;
float l9_1600=l9_1589;
ssGlobals l9_1601=tempGlobals;
tempGlobals=l9_1601;
float3 l9_1602=float3(0.0);
N181_timeGlobal=l9_1594;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_1595;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_1596;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_1597;
N181_lifeTimeMinMax=l9_1598;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_1599;
N181_isTrailCondition=l9_1600!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_1603=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_1604=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_1603=length(float4(1.0)*l9_1604);
}
N181_globalSeed=N181_externalSeed+l9_1603;
int l9_1605=0;
l9_1605=int(tempGlobals.gInstanceID+0.5);
int l9_1606=l9_1605;
float l9_1607=float(l9_1606);
int l9_1608=int(l9_1607);
int l9_1609=l9_1608^(l9_1608*15299);
int l9_1610=l9_1609;
int l9_1611=l9_1610;
int l9_1612=((l9_1611*((l9_1611*1471343)+101146501))+1559861749)&2147483647;
int l9_1613=l9_1612;
int l9_1614=l9_1610*1399;
int l9_1615=((l9_1614*((l9_1614*1471343)+101146501))+1559861749)&2147483647;
int l9_1616=l9_1615;
int l9_1617=l9_1610*7177;
int l9_1618=((l9_1617*((l9_1617*1471343)+101146501))+1559861749)&2147483647;
int l9_1619=l9_1618;
int l9_1620=l9_1613;
float l9_1621=float(l9_1620)*4.6566129e-10;
int l9_1622=l9_1616;
float l9_1623=float(l9_1622)*4.6566129e-10;
int l9_1624=l9_1619;
float l9_1625=float(l9_1624)*4.6566129e-10;
float3 l9_1626=float3(l9_1621,l9_1623,l9_1625);
float3 l9_1627=l9_1626;
N181_particleSeed=l9_1627;
float l9_1628=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_1629;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_1629=N181_lifeTimeMinMax;
}
else
{
l9_1629=float2(N181_lifeTimeConstant);
}
float2 l9_1630=l9_1629;
float l9_1631=fast::max(l9_1630.x,0.0099999998);
float l9_1632=fast::max(l9_1630.y,0.0099999998);
float l9_1633=tempGlobals.gTimeElapsed;
float l9_1634=l9_1633;
if (N181_ENABLE_EXTERNALTIME)
{
l9_1634=N181_externalTime;
}
float l9_1635=l9_1634;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_1635=N181_timeGlobal*l9_1634;
}
else
{
float l9_1636=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_1636=N181_trailLength;
}
}
float l9_1637=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_1638=0.0;
l9_1638=tempGlobals.gInstanceRatio;
float l9_1639=l9_1638;
int l9_1640=0;
l9_1640=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_1641=l9_1640;
l9_1637=fast::max(l9_1639*(1.0-(1.0/float(l9_1641))),0.0);
}
else
{
l9_1637=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_1642=fract(((l9_1634*N181_timeGlobal)*(1.0/(l9_1630.y+l9_1636)))+l9_1637);
l9_1635=l9_1642*(l9_1630.y+l9_1636);
}
float l9_1643=mix(l9_1635/l9_1631,l9_1635/l9_1632,l9_1628);
float l9_1644=fast::clamp(l9_1643,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_1635,l9_1644);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_1645=tempGlobals.Surface_UVCoord0;
l9_1635-=(l9_1645.y*N181_trailLength);
l9_1643=mix(l9_1635/l9_1631,l9_1635/l9_1632,l9_1628);
l9_1644=fast::clamp(l9_1643,0.0,1.0);
}
}
N181_timeValues=float4(l9_1630,l9_1635,l9_1644);
l9_1602=N181_particleSeed;
l9_1593=l9_1602;
l9_1572=l9_1593;
float3 l9_1646=l9_1572;
N111_particleSeedIn=l9_1646;
float l9_1647=0.0;
float l9_1648=0.0;
float l9_1649=(*sc_set0.UserUniforms).timeGlobal;
l9_1648=l9_1649;
float l9_1650=0.0;
float l9_1651=(*sc_set0.UserUniforms).externalTimeInput;
l9_1650=l9_1651;
float l9_1652=0.0;
float l9_1653=(*sc_set0.UserUniforms).externalSeed;
l9_1652=l9_1653;
float l9_1654=0.0;
float l9_1655=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_1654=l9_1655;
float2 l9_1656=float2(0.0);
float2 l9_1657=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_1656=l9_1657;
float l9_1658=0.0;
float l9_1659;
if ((int(TRAILS_tmp)!=0))
{
l9_1659=1.001;
}
else
{
l9_1659=0.001;
}
l9_1659-=0.001;
l9_1658=l9_1659;
float l9_1660=0.0;
float l9_1661=(*sc_set0.UserUniforms).trailLength;
l9_1660=l9_1661;
float4 l9_1662=float4(0.0);
l9_1662=tempGlobals.VertexColor;
float l9_1663=0.0;
l9_1663=l9_1662.x;
float l9_1664=0.0;
float l9_1665=l9_1658;
bool l9_1666=(l9_1665*1.0)!=0.0;
bool l9_1667;
if (l9_1666)
{
l9_1667=(l9_1663*1.0)!=0.0;
}
else
{
l9_1667=l9_1666;
}
l9_1664=float(l9_1667);
float l9_1668=0.0;
float l9_1669=l9_1648;
float l9_1670=l9_1650;
float l9_1671=l9_1652;
float l9_1672=l9_1654;
float2 l9_1673=l9_1656;
float l9_1674=l9_1660;
float l9_1675=l9_1664;
ssGlobals l9_1676=tempGlobals;
tempGlobals=l9_1676;
float l9_1677=0.0;
N181_timeGlobal=l9_1669;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_1670;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_1671;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_1672;
N181_lifeTimeMinMax=l9_1673;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_1674;
N181_isTrailCondition=l9_1675!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_1678=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_1679=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_1678=length(float4(1.0)*l9_1679);
}
N181_globalSeed=N181_externalSeed+l9_1678;
int l9_1680=0;
l9_1680=int(tempGlobals.gInstanceID+0.5);
int l9_1681=l9_1680;
float l9_1682=float(l9_1681);
int l9_1683=int(l9_1682);
int l9_1684=l9_1683^(l9_1683*15299);
int l9_1685=l9_1684;
int l9_1686=l9_1685;
int l9_1687=((l9_1686*((l9_1686*1471343)+101146501))+1559861749)&2147483647;
int l9_1688=l9_1687;
int l9_1689=l9_1685*1399;
int l9_1690=((l9_1689*((l9_1689*1471343)+101146501))+1559861749)&2147483647;
int l9_1691=l9_1690;
int l9_1692=l9_1685*7177;
int l9_1693=((l9_1692*((l9_1692*1471343)+101146501))+1559861749)&2147483647;
int l9_1694=l9_1693;
int l9_1695=l9_1688;
float l9_1696=float(l9_1695)*4.6566129e-10;
int l9_1697=l9_1691;
float l9_1698=float(l9_1697)*4.6566129e-10;
int l9_1699=l9_1694;
float l9_1700=float(l9_1699)*4.6566129e-10;
float3 l9_1701=float3(l9_1696,l9_1698,l9_1700);
float3 l9_1702=l9_1701;
N181_particleSeed=l9_1702;
float l9_1703=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_1704;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_1704=N181_lifeTimeMinMax;
}
else
{
l9_1704=float2(N181_lifeTimeConstant);
}
float2 l9_1705=l9_1704;
float l9_1706=fast::max(l9_1705.x,0.0099999998);
float l9_1707=fast::max(l9_1705.y,0.0099999998);
float l9_1708=tempGlobals.gTimeElapsed;
float l9_1709=l9_1708;
if (N181_ENABLE_EXTERNALTIME)
{
l9_1709=N181_externalTime;
}
float l9_1710=l9_1709;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_1710=N181_timeGlobal*l9_1709;
}
else
{
float l9_1711=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_1711=N181_trailLength;
}
}
float l9_1712=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_1713=0.0;
l9_1713=tempGlobals.gInstanceRatio;
float l9_1714=l9_1713;
int l9_1715=0;
l9_1715=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_1716=l9_1715;
l9_1712=fast::max(l9_1714*(1.0-(1.0/float(l9_1716))),0.0);
}
else
{
l9_1712=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_1717=fract(((l9_1709*N181_timeGlobal)*(1.0/(l9_1705.y+l9_1711)))+l9_1712);
l9_1710=l9_1717*(l9_1705.y+l9_1711);
}
float l9_1718=mix(l9_1710/l9_1706,l9_1710/l9_1707,l9_1703);
float l9_1719=fast::clamp(l9_1718,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_1710,l9_1719);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_1720=tempGlobals.Surface_UVCoord0;
l9_1710-=(l9_1720.y*N181_trailLength);
l9_1718=mix(l9_1710/l9_1706,l9_1710/l9_1707,l9_1703);
l9_1719=fast::clamp(l9_1718,0.0,1.0);
}
}
N181_timeValues=float4(l9_1705,l9_1710,l9_1719);
l9_1677=N181_globalSeed;
l9_1668=l9_1677;
l9_1647=l9_1668;
float l9_1721=l9_1647;
N111_globalSeedIn=l9_1721;
float l9_1722=0.0;
float l9_1723=(*sc_set0.UserUniforms).timeGlobal;
l9_1722=l9_1723;
float l9_1724=0.0;
float l9_1725=(*sc_set0.UserUniforms).externalTimeInput;
l9_1724=l9_1725;
float l9_1726=0.0;
float l9_1727=(*sc_set0.UserUniforms).externalSeed;
l9_1726=l9_1727;
float l9_1728=0.0;
float l9_1729=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_1728=l9_1729;
float2 l9_1730=float2(0.0);
float2 l9_1731=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_1730=l9_1731;
float l9_1732=0.0;
float l9_1733;
if ((int(TRAILS_tmp)!=0))
{
l9_1733=1.001;
}
else
{
l9_1733=0.001;
}
l9_1733-=0.001;
l9_1732=l9_1733;
float l9_1734=0.0;
float l9_1735=(*sc_set0.UserUniforms).trailLength;
l9_1734=l9_1735;
float4 l9_1736=float4(0.0);
l9_1736=tempGlobals.VertexColor;
float l9_1737=0.0;
l9_1737=l9_1736.x;
float l9_1738=0.0;
float l9_1739=l9_1732;
bool l9_1740=(l9_1739*1.0)!=0.0;
bool l9_1741;
if (l9_1740)
{
l9_1741=(l9_1737*1.0)!=0.0;
}
else
{
l9_1741=l9_1740;
}
l9_1738=float(l9_1741);
float l9_1742=l9_1722;
float l9_1743=l9_1724;
float l9_1744=l9_1726;
float l9_1745=l9_1728;
float2 l9_1746=l9_1730;
float l9_1747=l9_1734;
float l9_1748=l9_1738;
ssGlobals l9_1749=tempGlobals;
tempGlobals=l9_1749;
N181_timeGlobal=l9_1742;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_1743;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_1744;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_1745;
N181_lifeTimeMinMax=l9_1746;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_1747;
N181_isTrailCondition=l9_1748!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_1750=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_1751=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_1750=length(float4(1.0)*l9_1751);
}
N181_globalSeed=N181_externalSeed+l9_1750;
int l9_1752=0;
l9_1752=int(tempGlobals.gInstanceID+0.5);
int l9_1753=l9_1752;
float l9_1754=float(l9_1753);
int l9_1755=int(l9_1754);
int l9_1756=l9_1755^(l9_1755*15299);
int l9_1757=l9_1756;
int l9_1758=l9_1757;
int l9_1759=((l9_1758*((l9_1758*1471343)+101146501))+1559861749)&2147483647;
int l9_1760=l9_1759;
int l9_1761=l9_1757*1399;
int l9_1762=((l9_1761*((l9_1761*1471343)+101146501))+1559861749)&2147483647;
int l9_1763=l9_1762;
int l9_1764=l9_1757*7177;
int l9_1765=((l9_1764*((l9_1764*1471343)+101146501))+1559861749)&2147483647;
int l9_1766=l9_1765;
int l9_1767=l9_1760;
float l9_1768=float(l9_1767)*4.6566129e-10;
int l9_1769=l9_1763;
float l9_1770=float(l9_1769)*4.6566129e-10;
int l9_1771=l9_1766;
float l9_1772=float(l9_1771)*4.6566129e-10;
float3 l9_1773=float3(l9_1768,l9_1770,l9_1772);
float3 l9_1774=l9_1773;
N181_particleSeed=l9_1774;
float l9_1775=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_1776;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_1776=N181_lifeTimeMinMax;
}
else
{
l9_1776=float2(N181_lifeTimeConstant);
}
float2 l9_1777=l9_1776;
float l9_1778=fast::max(l9_1777.x,0.0099999998);
float l9_1779=fast::max(l9_1777.y,0.0099999998);
float l9_1780=tempGlobals.gTimeElapsed;
float l9_1781=l9_1780;
if (N181_ENABLE_EXTERNALTIME)
{
l9_1781=N181_externalTime;
}
float l9_1782=l9_1781;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_1782=N181_timeGlobal*l9_1781;
}
else
{
float l9_1783=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_1783=N181_trailLength;
}
}
float l9_1784=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_1785=0.0;
l9_1785=tempGlobals.gInstanceRatio;
float l9_1786=l9_1785;
int l9_1787=0;
l9_1787=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_1788=l9_1787;
l9_1784=fast::max(l9_1786*(1.0-(1.0/float(l9_1788))),0.0);
}
else
{
l9_1784=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_1789=fract(((l9_1781*N181_timeGlobal)*(1.0/(l9_1777.y+l9_1783)))+l9_1784);
l9_1782=l9_1789*(l9_1777.y+l9_1783);
}
float l9_1790=mix(l9_1782/l9_1778,l9_1782/l9_1779,l9_1775);
float l9_1791=fast::clamp(l9_1790,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_1782,l9_1791);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_1792=tempGlobals.Surface_UVCoord0;
l9_1782-=(l9_1792.y*N181_trailLength);
l9_1790=mix(l9_1782/l9_1778,l9_1782/l9_1779,l9_1775);
l9_1791=fast::clamp(l9_1790,0.0,1.0);
}
}
N181_timeValues=float4(l9_1777,l9_1782,l9_1791);
float4 l9_1793=float4(0.0);
float l9_1794=0.0;
float l9_1795=(*sc_set0.UserUniforms).timeGlobal;
l9_1794=l9_1795;
float l9_1796=0.0;
float l9_1797=(*sc_set0.UserUniforms).externalTimeInput;
l9_1796=l9_1797;
float l9_1798=0.0;
float l9_1799=(*sc_set0.UserUniforms).externalSeed;
l9_1798=l9_1799;
float l9_1800=0.0;
float l9_1801=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_1800=l9_1801;
float2 l9_1802=float2(0.0);
float2 l9_1803=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_1802=l9_1803;
float l9_1804=0.0;
float l9_1805;
if ((int(TRAILS_tmp)!=0))
{
l9_1805=1.001;
}
else
{
l9_1805=0.001;
}
l9_1805-=0.001;
l9_1804=l9_1805;
float l9_1806=0.0;
float l9_1807=(*sc_set0.UserUniforms).trailLength;
l9_1806=l9_1807;
float4 l9_1808=float4(0.0);
l9_1808=tempGlobals.VertexColor;
float l9_1809=0.0;
l9_1809=l9_1808.x;
float l9_1810=0.0;
float l9_1811=l9_1804;
bool l9_1812=(l9_1811*1.0)!=0.0;
bool l9_1813;
if (l9_1812)
{
l9_1813=(l9_1809*1.0)!=0.0;
}
else
{
l9_1813=l9_1812;
}
l9_1810=float(l9_1813);
float4 l9_1814=float4(0.0);
float l9_1815=l9_1794;
float l9_1816=l9_1796;
float l9_1817=l9_1798;
float l9_1818=l9_1800;
float2 l9_1819=l9_1802;
float l9_1820=l9_1806;
float l9_1821=l9_1810;
ssGlobals l9_1822=tempGlobals;
tempGlobals=l9_1822;
float4 l9_1823=float4(0.0);
N181_timeGlobal=l9_1815;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_1816;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_1817;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_1818;
N181_lifeTimeMinMax=l9_1819;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_1820;
N181_isTrailCondition=l9_1821!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_1824=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_1825=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_1824=length(float4(1.0)*l9_1825);
}
N181_globalSeed=N181_externalSeed+l9_1824;
int l9_1826=0;
l9_1826=int(tempGlobals.gInstanceID+0.5);
int l9_1827=l9_1826;
float l9_1828=float(l9_1827);
int l9_1829=int(l9_1828);
int l9_1830=l9_1829^(l9_1829*15299);
int l9_1831=l9_1830;
int l9_1832=l9_1831;
int l9_1833=((l9_1832*((l9_1832*1471343)+101146501))+1559861749)&2147483647;
int l9_1834=l9_1833;
int l9_1835=l9_1831*1399;
int l9_1836=((l9_1835*((l9_1835*1471343)+101146501))+1559861749)&2147483647;
int l9_1837=l9_1836;
int l9_1838=l9_1831*7177;
int l9_1839=((l9_1838*((l9_1838*1471343)+101146501))+1559861749)&2147483647;
int l9_1840=l9_1839;
int l9_1841=l9_1834;
float l9_1842=float(l9_1841)*4.6566129e-10;
int l9_1843=l9_1837;
float l9_1844=float(l9_1843)*4.6566129e-10;
int l9_1845=l9_1840;
float l9_1846=float(l9_1845)*4.6566129e-10;
float3 l9_1847=float3(l9_1842,l9_1844,l9_1846);
float3 l9_1848=l9_1847;
N181_particleSeed=l9_1848;
float l9_1849=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_1850;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_1850=N181_lifeTimeMinMax;
}
else
{
l9_1850=float2(N181_lifeTimeConstant);
}
float2 l9_1851=l9_1850;
float l9_1852=fast::max(l9_1851.x,0.0099999998);
float l9_1853=fast::max(l9_1851.y,0.0099999998);
float l9_1854=tempGlobals.gTimeElapsed;
float l9_1855=l9_1854;
if (N181_ENABLE_EXTERNALTIME)
{
l9_1855=N181_externalTime;
}
float l9_1856=l9_1855;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_1856=N181_timeGlobal*l9_1855;
}
else
{
float l9_1857=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_1857=N181_trailLength;
}
}
float l9_1858=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_1859=0.0;
l9_1859=tempGlobals.gInstanceRatio;
float l9_1860=l9_1859;
int l9_1861=0;
l9_1861=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_1862=l9_1861;
l9_1858=fast::max(l9_1860*(1.0-(1.0/float(l9_1862))),0.0);
}
else
{
l9_1858=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_1863=fract(((l9_1855*N181_timeGlobal)*(1.0/(l9_1851.y+l9_1857)))+l9_1858);
l9_1856=l9_1863*(l9_1851.y+l9_1857);
}
float l9_1864=mix(l9_1856/l9_1852,l9_1856/l9_1853,l9_1849);
float l9_1865=fast::clamp(l9_1864,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_1856,l9_1865);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_1866=tempGlobals.Surface_UVCoord0;
l9_1856-=(l9_1866.y*N181_trailLength);
l9_1864=mix(l9_1856/l9_1852,l9_1856/l9_1853,l9_1849);
l9_1865=fast::clamp(l9_1864,0.0,1.0);
}
}
N181_timeValues=float4(l9_1851,l9_1856,l9_1865);
l9_1823=N181_timeValues;
l9_1814=l9_1823;
l9_1793=l9_1814;
float4 l9_1867=l9_1793;
N111_timeValuesIn=l9_1867;
float l9_1868=0.0;
float l9_1869=0.0;
float l9_1870=(*sc_set0.UserUniforms).timeGlobal;
l9_1869=l9_1870;
float l9_1871=0.0;
float l9_1872=(*sc_set0.UserUniforms).externalTimeInput;
l9_1871=l9_1872;
float l9_1873=0.0;
float l9_1874=(*sc_set0.UserUniforms).externalSeed;
l9_1873=l9_1874;
float l9_1875=0.0;
float l9_1876=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_1875=l9_1876;
float2 l9_1877=float2(0.0);
float2 l9_1878=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_1877=l9_1878;
float l9_1879=0.0;
float l9_1880;
if ((int(TRAILS_tmp)!=0))
{
l9_1880=1.001;
}
else
{
l9_1880=0.001;
}
l9_1880-=0.001;
l9_1879=l9_1880;
float l9_1881=0.0;
float l9_1882=(*sc_set0.UserUniforms).trailLength;
l9_1881=l9_1882;
float4 l9_1883=float4(0.0);
l9_1883=tempGlobals.VertexColor;
float l9_1884=0.0;
l9_1884=l9_1883.x;
float l9_1885=0.0;
float l9_1886=l9_1879;
bool l9_1887=(l9_1886*1.0)!=0.0;
bool l9_1888;
if (l9_1887)
{
l9_1888=(l9_1884*1.0)!=0.0;
}
else
{
l9_1888=l9_1887;
}
l9_1885=float(l9_1888);
float l9_1889=0.0;
float l9_1890=l9_1869;
float l9_1891=l9_1871;
float l9_1892=l9_1873;
float l9_1893=l9_1875;
float2 l9_1894=l9_1877;
float l9_1895=l9_1881;
float l9_1896=l9_1885;
ssGlobals l9_1897=tempGlobals;
tempGlobals=l9_1897;
float l9_1898=0.0;
N181_timeGlobal=l9_1890;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_1891;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_1892;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_1893;
N181_lifeTimeMinMax=l9_1894;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_1895;
N181_isTrailCondition=l9_1896!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_1899=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_1900=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_1899=length(float4(1.0)*l9_1900);
}
N181_globalSeed=N181_externalSeed+l9_1899;
int l9_1901=0;
l9_1901=int(tempGlobals.gInstanceID+0.5);
int l9_1902=l9_1901;
float l9_1903=float(l9_1902);
int l9_1904=int(l9_1903);
int l9_1905=l9_1904^(l9_1904*15299);
int l9_1906=l9_1905;
int l9_1907=l9_1906;
int l9_1908=((l9_1907*((l9_1907*1471343)+101146501))+1559861749)&2147483647;
int l9_1909=l9_1908;
int l9_1910=l9_1906*1399;
int l9_1911=((l9_1910*((l9_1910*1471343)+101146501))+1559861749)&2147483647;
int l9_1912=l9_1911;
int l9_1913=l9_1906*7177;
int l9_1914=((l9_1913*((l9_1913*1471343)+101146501))+1559861749)&2147483647;
int l9_1915=l9_1914;
int l9_1916=l9_1909;
float l9_1917=float(l9_1916)*4.6566129e-10;
int l9_1918=l9_1912;
float l9_1919=float(l9_1918)*4.6566129e-10;
int l9_1920=l9_1915;
float l9_1921=float(l9_1920)*4.6566129e-10;
float3 l9_1922=float3(l9_1917,l9_1919,l9_1921);
float3 l9_1923=l9_1922;
N181_particleSeed=l9_1923;
float l9_1924=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_1925;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_1925=N181_lifeTimeMinMax;
}
else
{
l9_1925=float2(N181_lifeTimeConstant);
}
float2 l9_1926=l9_1925;
float l9_1927=fast::max(l9_1926.x,0.0099999998);
float l9_1928=fast::max(l9_1926.y,0.0099999998);
float l9_1929=tempGlobals.gTimeElapsed;
float l9_1930=l9_1929;
if (N181_ENABLE_EXTERNALTIME)
{
l9_1930=N181_externalTime;
}
float l9_1931=l9_1930;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_1931=N181_timeGlobal*l9_1930;
}
else
{
float l9_1932=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_1932=N181_trailLength;
}
}
float l9_1933=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_1934=0.0;
l9_1934=tempGlobals.gInstanceRatio;
float l9_1935=l9_1934;
int l9_1936=0;
l9_1936=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_1937=l9_1936;
l9_1933=fast::max(l9_1935*(1.0-(1.0/float(l9_1937))),0.0);
}
else
{
l9_1933=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_1938=fract(((l9_1930*N181_timeGlobal)*(1.0/(l9_1926.y+l9_1932)))+l9_1933);
l9_1931=l9_1938*(l9_1926.y+l9_1932);
}
float l9_1939=mix(l9_1931/l9_1927,l9_1931/l9_1928,l9_1924);
float l9_1940=fast::clamp(l9_1939,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_1931,l9_1940);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_1941=tempGlobals.Surface_UVCoord0;
l9_1931-=(l9_1941.y*N181_trailLength);
l9_1939=mix(l9_1931/l9_1927,l9_1931/l9_1928,l9_1924);
l9_1940=fast::clamp(l9_1939,0.0,1.0);
}
}
N181_timeValues=float4(l9_1926,l9_1931,l9_1940);
l9_1898=N181_isTrail;
l9_1889=l9_1898;
l9_1868=l9_1889;
bool l9_1942=l9_1868!=0.0;
N111_isTrail=l9_1942;
float2 l9_1943=float2(0.0);
float l9_1944=0.0;
float l9_1945=(*sc_set0.UserUniforms).timeGlobal;
l9_1944=l9_1945;
float l9_1946=0.0;
float l9_1947=(*sc_set0.UserUniforms).externalTimeInput;
l9_1946=l9_1947;
float l9_1948=0.0;
float l9_1949=(*sc_set0.UserUniforms).externalSeed;
l9_1948=l9_1949;
float l9_1950=0.0;
float l9_1951=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_1950=l9_1951;
float2 l9_1952=float2(0.0);
float2 l9_1953=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_1952=l9_1953;
float l9_1954=0.0;
float l9_1955;
if ((int(TRAILS_tmp)!=0))
{
l9_1955=1.001;
}
else
{
l9_1955=0.001;
}
l9_1955-=0.001;
l9_1954=l9_1955;
float l9_1956=0.0;
float l9_1957=(*sc_set0.UserUniforms).trailLength;
l9_1956=l9_1957;
float4 l9_1958=float4(0.0);
l9_1958=tempGlobals.VertexColor;
float l9_1959=0.0;
l9_1959=l9_1958.x;
float l9_1960=0.0;
float l9_1961=l9_1954;
bool l9_1962=(l9_1961*1.0)!=0.0;
bool l9_1963;
if (l9_1962)
{
l9_1963=(l9_1959*1.0)!=0.0;
}
else
{
l9_1963=l9_1962;
}
l9_1960=float(l9_1963);
float2 l9_1964=float2(0.0);
float l9_1965=l9_1944;
float l9_1966=l9_1946;
float l9_1967=l9_1948;
float l9_1968=l9_1950;
float2 l9_1969=l9_1952;
float l9_1970=l9_1956;
float l9_1971=l9_1960;
ssGlobals l9_1972=tempGlobals;
tempGlobals=l9_1972;
float2 l9_1973=float2(0.0);
N181_timeGlobal=l9_1965;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_1966;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_1967;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_1968;
N181_lifeTimeMinMax=l9_1969;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_1970;
N181_isTrailCondition=l9_1971!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_1974=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_1975=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_1974=length(float4(1.0)*l9_1975);
}
N181_globalSeed=N181_externalSeed+l9_1974;
int l9_1976=0;
l9_1976=int(tempGlobals.gInstanceID+0.5);
int l9_1977=l9_1976;
float l9_1978=float(l9_1977);
int l9_1979=int(l9_1978);
int l9_1980=l9_1979^(l9_1979*15299);
int l9_1981=l9_1980;
int l9_1982=l9_1981;
int l9_1983=((l9_1982*((l9_1982*1471343)+101146501))+1559861749)&2147483647;
int l9_1984=l9_1983;
int l9_1985=l9_1981*1399;
int l9_1986=((l9_1985*((l9_1985*1471343)+101146501))+1559861749)&2147483647;
int l9_1987=l9_1986;
int l9_1988=l9_1981*7177;
int l9_1989=((l9_1988*((l9_1988*1471343)+101146501))+1559861749)&2147483647;
int l9_1990=l9_1989;
int l9_1991=l9_1984;
float l9_1992=float(l9_1991)*4.6566129e-10;
int l9_1993=l9_1987;
float l9_1994=float(l9_1993)*4.6566129e-10;
int l9_1995=l9_1990;
float l9_1996=float(l9_1995)*4.6566129e-10;
float3 l9_1997=float3(l9_1992,l9_1994,l9_1996);
float3 l9_1998=l9_1997;
N181_particleSeed=l9_1998;
float l9_1999=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_2000;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_2000=N181_lifeTimeMinMax;
}
else
{
l9_2000=float2(N181_lifeTimeConstant);
}
float2 l9_2001=l9_2000;
float l9_2002=fast::max(l9_2001.x,0.0099999998);
float l9_2003=fast::max(l9_2001.y,0.0099999998);
float l9_2004=tempGlobals.gTimeElapsed;
float l9_2005=l9_2004;
if (N181_ENABLE_EXTERNALTIME)
{
l9_2005=N181_externalTime;
}
float l9_2006=l9_2005;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_2006=N181_timeGlobal*l9_2005;
}
else
{
float l9_2007=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_2007=N181_trailLength;
}
}
float l9_2008=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_2009=0.0;
l9_2009=tempGlobals.gInstanceRatio;
float l9_2010=l9_2009;
int l9_2011=0;
l9_2011=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_2012=l9_2011;
l9_2008=fast::max(l9_2010*(1.0-(1.0/float(l9_2012))),0.0);
}
else
{
l9_2008=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_2013=fract(((l9_2005*N181_timeGlobal)*(1.0/(l9_2001.y+l9_2007)))+l9_2008);
l9_2006=l9_2013*(l9_2001.y+l9_2007);
}
float l9_2014=mix(l9_2006/l9_2002,l9_2006/l9_2003,l9_1999);
float l9_2015=fast::clamp(l9_2014,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_2006,l9_2015);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_2016=tempGlobals.Surface_UVCoord0;
l9_2006-=(l9_2016.y*N181_trailLength);
l9_2014=mix(l9_2006/l9_2002,l9_2006/l9_2003,l9_1999);
l9_2015=fast::clamp(l9_2014,0.0,1.0);
}
}
N181_timeValues=float4(l9_2001,l9_2006,l9_2015);
l9_1973=N181_trailHeadTime;
l9_1964=l9_1973;
l9_1943=l9_1964;
float2 l9_2017=l9_1943;
N111_trailHeadTime=l9_2017;
float l9_2018=0.0;
float l9_2019=0.0;
float l9_2020=(*sc_set0.UserUniforms).trailWidth;
l9_2019=l9_2020;
l9_2018=l9_2019;
float l9_2021=l9_2018;
N111_trailSizeMult=l9_2021;
float3 l9_2022=float3(0.0);
float3 l9_2023=float3(0.0);
float3 l9_2024=float3(0.0);
float3 l9_2025=float3(0.0);
float3 l9_2026=float3(0.0);
float3 l9_2027=float3(0.0);
float3 l9_2028=float3(0.0);
float3 l9_2029=float3(0.0);
float3 l9_2030=float3(0.0);
float3 l9_2031=float3(0.0);
float3 l9_2032=(*sc_set0.UserUniforms).Port_Default_N247;
ssGlobals l9_2033=tempGlobals;
float3 l9_2034;
if (NODE_248_DROPLIST_ITEM_tmp==0)
{
float l9_2035=0.0;
float l9_2036=(*sc_set0.UserUniforms).Tweak_N255;
l9_2035=l9_2036;
float l9_2037=0.0;
float l9_2038=(*sc_set0.UserUniforms).Tweak_N254;
l9_2037=l9_2038;
float3 l9_2039=float3(0.0);
float3 l9_2040=(*sc_set0.UserUniforms).Tweak_N252;
l9_2039=l9_2040;
float3 l9_2041=float3(0.0);
float3 l9_2042=(*sc_set0.UserUniforms).Tweak_N253;
l9_2041=l9_2042;
float l9_2043=0.0;
float l9_2044=(*sc_set0.UserUniforms).Tweak_N224;
l9_2043=l9_2044;
float3 l9_2045=float3(0.0);
float l9_2046=l9_2035;
float l9_2047=l9_2037;
float3 l9_2048=l9_2039;
float3 l9_2049=l9_2041;
float l9_2050=l9_2043;
ssGlobals l9_2051=l9_2033;
tempGlobals=l9_2051;
float3 l9_2052=float3(0.0);
N128_SphereType=int(l9_2046);
N128_Radius=l9_2047;
N128_Scale=l9_2048;
N128_Center=l9_2049;
N128_VolumeFill=l9_2050;
int l9_2053=0;
l9_2053=int(tempGlobals.gInstanceID+0.5);
int l9_2054=l9_2053;
float l9_2055=float(l9_2054);
int l9_2056=int(l9_2055);
int l9_2057=l9_2056^(l9_2056*15299);
int l9_2058=l9_2057;
int l9_2059=l9_2058;
int l9_2060=((l9_2059*((l9_2059*1471343)+101146501))+1559861749)&2147483647;
int l9_2061=l9_2060;
int l9_2062=l9_2058*1399;
int l9_2063=((l9_2062*((l9_2062*1471343)+101146501))+1559861749)&2147483647;
int l9_2064=l9_2063;
int l9_2065=l9_2058*7177;
int l9_2066=((l9_2065*((l9_2065*1471343)+101146501))+1559861749)&2147483647;
int l9_2067=l9_2066;
int l9_2068=l9_2061;
float l9_2069=float(l9_2068)*4.6566129e-10;
int l9_2070=l9_2064;
float l9_2071=float(l9_2070)*4.6566129e-10;
int l9_2072=l9_2067;
float l9_2073=float(l9_2072)*4.6566129e-10;
float3 l9_2074=float3(l9_2069,l9_2071,l9_2073);
float3 l9_2075=l9_2074;
float3 l9_2076=l9_2075;
int l9_2077=0;
l9_2077=int(tempGlobals.gInstanceID+0.5);
int l9_2078=l9_2077;
float l9_2079=float(l9_2078+1);
int l9_2080=int(l9_2079);
int l9_2081=l9_2080^(l9_2080*15299);
int l9_2082=l9_2081;
int l9_2083=l9_2082;
int l9_2084=((l9_2083*((l9_2083*1471343)+101146501))+1559861749)&2147483647;
int l9_2085=l9_2084;
int l9_2086=l9_2082*1399;
int l9_2087=((l9_2086*((l9_2086*1471343)+101146501))+1559861749)&2147483647;
int l9_2088=l9_2087;
int l9_2089=l9_2082*7177;
int l9_2090=((l9_2089*((l9_2089*1471343)+101146501))+1559861749)&2147483647;
int l9_2091=l9_2090;
int l9_2092=l9_2085;
float l9_2093=float(l9_2092)*4.6566129e-10;
int l9_2094=l9_2088;
float l9_2095=float(l9_2094)*4.6566129e-10;
int l9_2096=l9_2091;
float l9_2097=float(l9_2096)*4.6566129e-10;
float3 l9_2098=float3(l9_2093,l9_2095,l9_2097);
float3 l9_2099=l9_2098;
float3 l9_2100=l9_2099;
float l9_2101=1.0-N128_VolumeFill;
float l9_2102=3.0;
float l9_2103;
if (l9_2101<=0.0)
{
l9_2103=0.0;
}
else
{
l9_2103=pow(l9_2101,l9_2102);
}
float l9_2104=l9_2103;
float l9_2105=l9_2104;
l9_2076=mix(float3(l9_2105),float3(1.0),l9_2076);
float3 l9_2106=l9_2076;
float l9_2107;
if (l9_2106.x<=0.0)
{
l9_2107=0.0;
}
else
{
l9_2107=sqrt(l9_2106.x);
}
float l9_2108=l9_2107;
float l9_2109;
if (l9_2106.y<=0.0)
{
l9_2109=0.0;
}
else
{
l9_2109=sqrt(l9_2106.y);
}
float l9_2110=l9_2109;
float l9_2111;
if (l9_2106.z<=0.0)
{
l9_2111=0.0;
}
else
{
l9_2111=sqrt(l9_2106.z);
}
float3 l9_2112=float3(l9_2108,l9_2110,l9_2111);
l9_2076=l9_2112;
l9_2100=mix(float3(-1.0),float3(1.0),l9_2100);
l9_2100/=float3(length(l9_2100+float3(9.9999997e-05)));
float3 l9_2113=((l9_2076*l9_2100)*N128_Scale)*(N128_Radius*0.5);
if (N128_SphereType==1)
{
l9_2113.x=abs(l9_2113.x);
}
else
{
if (N128_SphereType==2)
{
l9_2113.y=abs(l9_2113.y);
}
else
{
if (N128_SphereType==3)
{
l9_2113.z=abs(l9_2113.z);
}
}
}
l9_2113+=N128_Center;
N128_Result=l9_2113;
l9_2052=N128_Result;
l9_2045=l9_2052;
l9_2024=l9_2045;
l9_2034=l9_2024;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==1)
{
float3 l9_2114=float3(0.0);
float3 l9_2115=(*sc_set0.UserUniforms).Tweak_N250;
l9_2114=l9_2115;
float3 l9_2116=float3(0.0);
float3 l9_2117=(*sc_set0.UserUniforms).Tweak_N251;
l9_2116=l9_2117;
float l9_2118=0.0;
float l9_2119=(*sc_set0.UserUniforms).volumeFill;
l9_2118=l9_2119;
float3 l9_2120=float3(0.0);
float3 l9_2121=l9_2114;
float3 l9_2122=l9_2116;
float l9_2123=l9_2118;
ssGlobals l9_2124=l9_2033;
tempGlobals=l9_2124;
float3 l9_2125=float3(0.0);
N137_Scale=l9_2121;
N137_Center=l9_2122;
N137_VolumeFill=l9_2123;
int l9_2126=0;
l9_2126=int(tempGlobals.gInstanceID+0.5);
int l9_2127=l9_2126;
float l9_2128=float(l9_2127);
float l9_2129=mod(l9_2128,8.0);
float l9_2130=mod(l9_2128,3.0);
float l9_2131=l9_2128;
int l9_2132=int(l9_2131);
int l9_2133=l9_2132^(l9_2132*15299);
int l9_2134=l9_2133;
int l9_2135=l9_2134;
int l9_2136=((l9_2135*((l9_2135*1471343)+101146501))+1559861749)&2147483647;
int l9_2137=l9_2136;
int l9_2138=l9_2134*1399;
int l9_2139=((l9_2138*((l9_2138*1471343)+101146501))+1559861749)&2147483647;
int l9_2140=l9_2139;
int l9_2141=l9_2134*7177;
int l9_2142=((l9_2141*((l9_2141*1471343)+101146501))+1559861749)&2147483647;
int l9_2143=l9_2142;
int l9_2144=l9_2137;
float l9_2145=float(l9_2144)*4.6566129e-10;
int l9_2146=l9_2140;
float l9_2147=float(l9_2146)*4.6566129e-10;
int l9_2148=l9_2143;
float l9_2149=float(l9_2148)*4.6566129e-10;
float3 l9_2150=float3(l9_2145,l9_2147,l9_2149);
float3 l9_2151=l9_2150;
float3 l9_2152=l9_2151;
float l9_2153=1.0-N137_VolumeFill;
float l9_2154=3.0;
float l9_2155;
if (l9_2153<=0.0)
{
l9_2155=0.0;
}
else
{
l9_2155=pow(l9_2153,l9_2154);
}
float l9_2156=l9_2155;
float l9_2157=l9_2156;
float3 l9_2158;
if (l9_2130==0.0)
{
l9_2158=float3(l9_2157,0.0,0.0);
}
else
{
float3 l9_2159;
if (l9_2130==1.0)
{
l9_2159=float3(0.0,l9_2157,0.0);
}
else
{
l9_2159=float3(0.0,0.0,l9_2157);
}
l9_2158=l9_2159;
}
float3 l9_2160=l9_2158;
float3 l9_2161=mix(l9_2160,float3(1.0),l9_2152);
float3 l9_2162;
if (l9_2129==0.0)
{
l9_2162=l9_2161*float3(1.0);
}
else
{
float3 l9_2163;
if (l9_2129==1.0)
{
l9_2163=l9_2161*float3(-1.0,1.0,1.0);
}
else
{
float3 l9_2164;
if (l9_2129==2.0)
{
l9_2164=l9_2161*float3(-1.0,-1.0,1.0);
}
else
{
float3 l9_2165;
if (l9_2129==3.0)
{
l9_2165=l9_2161*float3(-1.0);
}
else
{
float3 l9_2166;
if (l9_2129==4.0)
{
l9_2166=l9_2161*float3(1.0,-1.0,-1.0);
}
else
{
float3 l9_2167;
if (l9_2129==5.0)
{
l9_2167=l9_2161*float3(1.0,1.0,-1.0);
}
else
{
float3 l9_2168;
if (l9_2129==6.0)
{
l9_2168=l9_2161*float3(-1.0,1.0,-1.0);
}
else
{
l9_2168=l9_2161*float3(1.0,-1.0,1.0);
}
l9_2167=l9_2168;
}
l9_2166=l9_2167;
}
l9_2165=l9_2166;
}
l9_2164=l9_2165;
}
l9_2163=l9_2164;
}
l9_2162=l9_2163;
}
float3 l9_2169=l9_2162;
float3 l9_2170=l9_2169;
float3 l9_2171=l9_2170*(N137_Scale*0.5);
l9_2171+=N137_Center;
N137_Result=l9_2171;
l9_2125=N137_Result;
l9_2120=l9_2125;
l9_2025=l9_2120;
l9_2034=l9_2025;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==2)
{
float l9_2172=0.0;
float l9_2173=(*sc_set0.UserUniforms).Tweak_N238;
l9_2172=l9_2173;
float l9_2174=0.0;
float l9_2175=(*sc_set0.UserUniforms).Tweak_N16;
l9_2174=l9_2175;
float l9_2176=0.0;
float l9_2177=(*sc_set0.UserUniforms).Tweak_N234;
l9_2176=l9_2177;
float l9_2178=0.0;
float l9_2179=(*sc_set0.UserUniforms).Tweak_N239;
l9_2178=l9_2179;
float2 l9_2180=float2(0.0);
float2 l9_2181=(*sc_set0.UserUniforms).Tweak_N240;
l9_2180=l9_2181;
float3 l9_2182=float3(0.0);
float3 l9_2183=(*sc_set0.UserUniforms).Tweak_N241;
l9_2182=l9_2183;
float3 l9_2184=float3(0.0);
float3 l9_2185=(*sc_set0.UserUniforms).Tweak_N242;
l9_2184=l9_2185;
float l9_2186=0.0;
float l9_2187=(*sc_set0.UserUniforms).Tweak_N226;
l9_2186=l9_2187;
float l9_2188=0.0;
float l9_2189=(*sc_set0.UserUniforms).Tweak_N243;
l9_2188=l9_2189;
float3 l9_2190=float3(0.0);
float l9_2191=l9_2172;
float l9_2192=l9_2174;
float l9_2193=l9_2176;
float l9_2194=l9_2178;
float2 l9_2195=l9_2180;
float3 l9_2196=l9_2182;
float3 l9_2197=l9_2184;
float l9_2198=l9_2186;
float l9_2199=l9_2188;
ssGlobals l9_2200=l9_2033;
tempGlobals=l9_2200;
float3 l9_2201=float3(0.0);
N144_Radius=l9_2191;
N144_startRad=l9_2192;
N144_endRad=l9_2193;
N144_Height=l9_2194;
N144_ArcAngles=l9_2195;
N144_Scale=l9_2196;
N144_Center=l9_2197;
N144_VolumeFill=l9_2198;
N144_OrientationAxis=int(l9_2199);
int l9_2202=0;
l9_2202=int(tempGlobals.gInstanceID+0.5);
int l9_2203=l9_2202;
float l9_2204=float(l9_2203);
int l9_2205=int(l9_2204);
int l9_2206=l9_2205^(l9_2205*15299);
int l9_2207=l9_2206;
int l9_2208=l9_2207;
int l9_2209=((l9_2208*((l9_2208*1471343)+101146501))+1559861749)&2147483647;
int l9_2210=l9_2209;
int l9_2211=l9_2207*1399;
int l9_2212=((l9_2211*((l9_2211*1471343)+101146501))+1559861749)&2147483647;
int l9_2213=l9_2212;
int l9_2214=l9_2207*7177;
int l9_2215=((l9_2214*((l9_2214*1471343)+101146501))+1559861749)&2147483647;
int l9_2216=l9_2215;
int l9_2217=l9_2210;
float l9_2218=float(l9_2217)*4.6566129e-10;
int l9_2219=l9_2213;
float l9_2220=float(l9_2219)*4.6566129e-10;
int l9_2221=l9_2216;
float l9_2222=float(l9_2221)*4.6566129e-10;
float3 l9_2223=float3(l9_2218,l9_2220,l9_2222);
float3 l9_2224=l9_2223;
float3 l9_2225=l9_2224;
float2 l9_2226=radians(N144_ArcAngles);
float l9_2227=1.0-N144_VolumeFill;
l9_2227*=l9_2227;
float l9_2228=mix(l9_2226.x,l9_2226.y,l9_2225.x);
float l9_2229=mix(-1.0,1.0,l9_2225.y);
float l9_2230=mix(l9_2227,1.0,l9_2225.z);
float l9_2231=l9_2230;
float l9_2232;
if (l9_2231<=0.0)
{
l9_2232=0.0;
}
else
{
l9_2232=sqrt(l9_2231);
}
float l9_2233=l9_2232;
l9_2230=l9_2233;
float3 l9_2234=float3(sin(l9_2228),cos(l9_2228),l9_2229);
float l9_2235=(N144_Radius*0.5)*mix(N144_startRad,N144_endRad,l9_2225.y);
l9_2234*=((N144_Scale*float3(l9_2235,l9_2235,N144_Height*0.5))*float3(l9_2230,l9_2230,1.0));
if (N144_OrientationAxis==0)
{
l9_2234=l9_2234.zxy;
}
else
{
if (N144_OrientationAxis==1)
{
l9_2234=l9_2234.xzy;
}
}
l9_2234+=N144_Center;
N144_Result=l9_2234;
l9_2201=N144_Result;
l9_2190=l9_2201;
l9_2026=l9_2190;
l9_2034=l9_2026;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==3)
{
float l9_2236=0.0;
float l9_2237=(*sc_set0.UserUniforms).Tweak_N257;
l9_2236=l9_2237;
float l9_2238=0.0;
float l9_2239=(*sc_set0.UserUniforms).Tweak_N258;
l9_2238=l9_2239;
float2 l9_2240=float2(0.0);
float2 l9_2241=(*sc_set0.UserUniforms).Tweak_N259;
l9_2240=l9_2241;
float3 l9_2242=float3(0.0);
float3 l9_2243=(*sc_set0.UserUniforms).Tweak_N260;
l9_2242=l9_2243;
float3 l9_2244=float3(0.0);
float3 l9_2245=(*sc_set0.UserUniforms).Tweak_N261;
l9_2244=l9_2245;
float l9_2246=0.0;
float l9_2247=(*sc_set0.UserUniforms).Tweak_N262;
l9_2246=l9_2247;
float l9_2248=0.0;
float l9_2249=(*sc_set0.UserUniforms).Tweak_N263;
l9_2248=l9_2249;
float3 l9_2250=float3(0.0);
float l9_2251=l9_2236;
float l9_2252=l9_2238;
float2 l9_2253=l9_2240;
float3 l9_2254=l9_2242;
float3 l9_2255=l9_2244;
float l9_2256=l9_2246;
float l9_2257=l9_2248;
ssGlobals l9_2258=l9_2033;
tempGlobals=l9_2258;
float3 l9_2259=float3(0.0);
N149_InnerRadius=l9_2251;
N149_OuterRadius=l9_2252;
N149_ArcAngles=l9_2253;
N149_Scale=l9_2254;
N149_Center=l9_2255;
N149_VolumeFill=l9_2256;
N149_Axis=int(l9_2257);
int l9_2260=0;
l9_2260=int(tempGlobals.gInstanceID+0.5);
int l9_2261=l9_2260;
float l9_2262=float(l9_2261);
int l9_2263=int(l9_2262);
int l9_2264=l9_2263^(l9_2263*15299);
int l9_2265=l9_2264;
int l9_2266=l9_2265;
int l9_2267=((l9_2266*((l9_2266*1471343)+101146501))+1559861749)&2147483647;
int l9_2268=l9_2267;
int l9_2269=l9_2265*1399;
int l9_2270=((l9_2269*((l9_2269*1471343)+101146501))+1559861749)&2147483647;
int l9_2271=l9_2270;
int l9_2272=l9_2265*7177;
int l9_2273=((l9_2272*((l9_2272*1471343)+101146501))+1559861749)&2147483647;
int l9_2274=l9_2273;
int l9_2275=l9_2268;
float l9_2276=float(l9_2275)*4.6566129e-10;
int l9_2277=l9_2271;
float l9_2278=float(l9_2277)*4.6566129e-10;
int l9_2279=l9_2274;
float l9_2280=float(l9_2279)*4.6566129e-10;
float3 l9_2281=float3(l9_2276,l9_2278,l9_2280);
float3 l9_2282=l9_2281;
float3 l9_2283=l9_2282;
float2 l9_2284=radians(N149_ArcAngles);
float l9_2285=mix(l9_2284.x,l9_2284.y,l9_2283.z);
float l9_2286=3.1415927;
float l9_2287=mix(0.0,l9_2286*2.0,l9_2283.y);
float l9_2288=mix(1.0-(N149_VolumeFill*N149_VolumeFill),1.0,l9_2283.x);
float l9_2289=l9_2288;
float l9_2290;
if (l9_2289<=0.0)
{
l9_2290=0.0;
}
else
{
l9_2290=sqrt(l9_2289);
}
float l9_2291=l9_2290;
l9_2288=l9_2291*(N149_InnerRadius*0.5);
float l9_2292=(cos(l9_2287)*l9_2288)+(N149_OuterRadius*0.5);
float3 l9_2293=float3(cos(l9_2285)*l9_2292,sin(l9_2285)*l9_2292,sin(l9_2287)*l9_2288);
if (N149_Axis==1)
{
l9_2293=l9_2293.yzx;
}
else
{
if (N149_Axis==2)
{
l9_2293=l9_2293.zyx;
}
}
l9_2293*=N149_Scale;
l9_2293+=N149_Center;
N149_Result=l9_2293;
l9_2259=N149_Result;
l9_2250=l9_2259;
l9_2027=l9_2250;
l9_2034=l9_2027;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==4)
{
float3 l9_2294=float3(0.0);
float3 l9_2295=(*sc_set0.UserUniforms).Tweak_N236;
l9_2294=l9_2295;
float3 l9_2296=float3(0.0);
float3 l9_2297=(*sc_set0.UserUniforms).Tweak_N237;
l9_2296=l9_2297;
float3 l9_2298=float3(0.0);
float3 l9_2299=(*sc_set0.UserUniforms).Tweak_N264;
l9_2298=l9_2299;
float3 l9_2300=float3(0.0);
float3 l9_2301=l9_2294;
float3 l9_2302=l9_2296;
float3 l9_2303=l9_2298;
ssGlobals l9_2304=l9_2033;
tempGlobals=l9_2304;
float3 l9_2305=float3(0.0);
N235_gridSize=l9_2301;
N235_gridDim=l9_2302;
N235_Offset=l9_2303;
int l9_2306=int((N235_gridDim.x*N235_gridDim.y)*N235_gridDim.z);
int l9_2307=0;
l9_2307=int(tempGlobals.gInstanceID+0.5);
int l9_2308=l9_2307;
int l9_2309=l9_2308;
int l9_2310=l9_2309%l9_2306;
int l9_2311=l9_2310;
float3 l9_2312=N235_gridDim;
float3 l9_2313=N235_gridSize;
int3 l9_2314=int3(l9_2312);
int l9_2315=l9_2314.x*l9_2314.y;
int l9_2316=l9_2311/l9_2315;
int l9_2317=l9_2311%l9_2315;
int l9_2318=l9_2317/l9_2314.x;
int l9_2319=l9_2317%l9_2314.x;
float l9_2320;
if (l9_2314.x>1)
{
l9_2320=l9_2313.x/(l9_2312.x-1.0);
}
else
{
l9_2320=0.0;
}
float l9_2321=l9_2320;
float l9_2322;
if (l9_2314.y>1)
{
l9_2322=l9_2313.y/(l9_2312.y-1.0);
}
else
{
l9_2322=0.0;
}
float l9_2323=l9_2322;
float l9_2324;
if (l9_2314.z>1)
{
l9_2324=l9_2313.z/(l9_2312.z-1.0);
}
else
{
l9_2324=0.0;
}
float3 l9_2325=float3(l9_2321,l9_2323,l9_2324);
float3 l9_2326=(l9_2312-float3(1.0))*l9_2325;
float3 l9_2327=(-l9_2326)*0.5;
float3 l9_2328=(float3(float(l9_2319),float(l9_2318),float(l9_2316))*l9_2325)+l9_2327;
N235_Result=l9_2328+N235_Offset;
l9_2305=N235_Result;
l9_2300=l9_2305;
l9_2028=l9_2300;
l9_2034=l9_2028;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==5)
{
float l9_2329=0.0;
float l9_2330=(*sc_set0.UserUniforms).Tweak_N232;
l9_2329=l9_2330;
float l9_2331=0.0;
float l9_2332=(*sc_set0.UserUniforms).Tweak_N233;
l9_2331=l9_2332;
float l9_2333=0.0;
float l9_2334=(*sc_set0.UserUniforms).Tweak_N231;
l9_2333=l9_2334;
float l9_2335=0.0;
float l9_2336=(*sc_set0.UserUniforms).Tweak_N304;
l9_2335=l9_2336;
float l9_2337=0.0;
float l9_2338=(*sc_set0.UserUniforms).Tweak_N229;
l9_2337=l9_2338;
float l9_2339=0.0;
float l9_2340=float((*sc_set0.UserUniforms).Tweak_N280!=0);
l9_2339=l9_2340;
float l9_2341=0.0;
float l9_2342=(*sc_set0.UserUniforms).Tweak_N285;
l9_2341=l9_2342;
float l9_2343=0.0;
float l9_2344=(*sc_set0.UserUniforms).Tweak_N245;
l9_2343=l9_2344;
float l9_2345=0.0;
float l9_2346=(*sc_set0.UserUniforms).Tweak_N230;
l9_2345=l9_2346;
float l9_2347=0.0;
float l9_2348=float((*sc_set0.UserUniforms).animated!=0);
l9_2347=l9_2348;
float l9_2349=0.0;
float l9_2350=(*sc_set0.UserUniforms).Tweak_N279;
l9_2349=l9_2350;
float l9_2351=0.0;
float l9_2352=float((*sc_set0.UserUniforms).Tweak_N303!=0);
l9_2351=l9_2352;
float2 l9_2353=float2(0.0);
float2 l9_2354=(*sc_set0.UserUniforms).Tweak_N336;
l9_2353=l9_2354;
float l9_2355=0.0;
float l9_2356=(*sc_set0.UserUniforms).timeGlobal;
l9_2355=l9_2356;
float l9_2357=0.0;
float l9_2358=(*sc_set0.UserUniforms).externalTimeInput;
l9_2357=l9_2358;
float l9_2359=0.0;
float l9_2360=(*sc_set0.UserUniforms).externalSeed;
l9_2359=l9_2360;
float l9_2361=0.0;
float l9_2362=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_2361=l9_2362;
float2 l9_2363=float2(0.0);
float2 l9_2364=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_2363=l9_2364;
float l9_2365=0.0;
float l9_2366;
if ((int(TRAILS_tmp)!=0))
{
l9_2366=1.001;
}
else
{
l9_2366=0.001;
}
l9_2366-=0.001;
l9_2365=l9_2366;
float l9_2367=0.0;
float l9_2368=(*sc_set0.UserUniforms).trailLength;
l9_2367=l9_2368;
float4 l9_2369=float4(0.0);
l9_2369=l9_2033.VertexColor;
float l9_2370=0.0;
l9_2370=l9_2369.x;
float l9_2371=0.0;
float l9_2372=l9_2365;
bool l9_2373=(l9_2372*1.0)!=0.0;
bool l9_2374;
if (l9_2373)
{
l9_2374=(l9_2370*1.0)!=0.0;
}
else
{
l9_2374=l9_2373;
}
l9_2371=float(l9_2374);
float4 l9_2375=float4(0.0);
float l9_2376=l9_2355;
float l9_2377=l9_2357;
float l9_2378=l9_2359;
float l9_2379=l9_2361;
float2 l9_2380=l9_2363;
float l9_2381=l9_2367;
float l9_2382=l9_2371;
ssGlobals l9_2383=l9_2033;
tempGlobals=l9_2383;
float4 l9_2384=float4(0.0);
N181_timeGlobal=l9_2376;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_2377;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_2378;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_2379;
N181_lifeTimeMinMax=l9_2380;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_2381;
N181_isTrailCondition=l9_2382!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_2385=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_2386=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_2385=length(float4(1.0)*l9_2386);
}
N181_globalSeed=N181_externalSeed+l9_2385;
int l9_2387=0;
l9_2387=int(tempGlobals.gInstanceID+0.5);
int l9_2388=l9_2387;
float l9_2389=float(l9_2388);
int l9_2390=int(l9_2389);
int l9_2391=l9_2390^(l9_2390*15299);
int l9_2392=l9_2391;
int l9_2393=l9_2392;
int l9_2394=((l9_2393*((l9_2393*1471343)+101146501))+1559861749)&2147483647;
int l9_2395=l9_2394;
int l9_2396=l9_2392*1399;
int l9_2397=((l9_2396*((l9_2396*1471343)+101146501))+1559861749)&2147483647;
int l9_2398=l9_2397;
int l9_2399=l9_2392*7177;
int l9_2400=((l9_2399*((l9_2399*1471343)+101146501))+1559861749)&2147483647;
int l9_2401=l9_2400;
int l9_2402=l9_2395;
float l9_2403=float(l9_2402)*4.6566129e-10;
int l9_2404=l9_2398;
float l9_2405=float(l9_2404)*4.6566129e-10;
int l9_2406=l9_2401;
float l9_2407=float(l9_2406)*4.6566129e-10;
float3 l9_2408=float3(l9_2403,l9_2405,l9_2407);
float3 l9_2409=l9_2408;
N181_particleSeed=l9_2409;
float l9_2410=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_2411;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_2411=N181_lifeTimeMinMax;
}
else
{
l9_2411=float2(N181_lifeTimeConstant);
}
float2 l9_2412=l9_2411;
float l9_2413=fast::max(l9_2412.x,0.0099999998);
float l9_2414=fast::max(l9_2412.y,0.0099999998);
float l9_2415=tempGlobals.gTimeElapsed;
float l9_2416=l9_2415;
if (N181_ENABLE_EXTERNALTIME)
{
l9_2416=N181_externalTime;
}
float l9_2417=l9_2416;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_2417=N181_timeGlobal*l9_2416;
}
else
{
float l9_2418=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_2418=N181_trailLength;
}
}
float l9_2419=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_2420=0.0;
l9_2420=tempGlobals.gInstanceRatio;
float l9_2421=l9_2420;
int l9_2422=0;
l9_2422=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_2423=l9_2422;
l9_2419=fast::max(l9_2421*(1.0-(1.0/float(l9_2423))),0.0);
}
else
{
l9_2419=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_2424=fract(((l9_2416*N181_timeGlobal)*(1.0/(l9_2412.y+l9_2418)))+l9_2419);
l9_2417=l9_2424*(l9_2412.y+l9_2418);
}
float l9_2425=mix(l9_2417/l9_2413,l9_2417/l9_2414,l9_2410);
float l9_2426=fast::clamp(l9_2425,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_2417,l9_2426);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_2427=tempGlobals.Surface_UVCoord0;
l9_2417-=(l9_2427.y*N181_trailLength);
l9_2425=mix(l9_2417/l9_2413,l9_2417/l9_2414,l9_2410);
l9_2426=fast::clamp(l9_2425,0.0,1.0);
}
}
N181_timeValues=float4(l9_2412,l9_2417,l9_2426);
l9_2384=N181_timeValues;
l9_2375=l9_2384;
float3 l9_2428=float3(0.0);
float l9_2429=l9_2329;
float l9_2430=l9_2331;
float l9_2431=l9_2333;
float l9_2432=l9_2335;
float l9_2433=l9_2337;
float l9_2434=l9_2339;
float l9_2435=l9_2341;
float l9_2436=l9_2343;
float l9_2437=l9_2345;
float l9_2438=l9_2347;
float l9_2439=l9_2349;
float l9_2440=l9_2351;
float2 l9_2441=l9_2353;
float4 l9_2442=l9_2375;
ssGlobals l9_2443=l9_2033;
tempGlobals=l9_2443;
float3 l9_2444=float3(0.0);
N155_startRad=l9_2429;
N155_endRad=l9_2430;
N155_heightPerTurn=l9_2431;
N155_alignHeight=int(l9_2432);
N155_thicknessRad=l9_2433;
N155_curvThickEnable=l9_2434!=0.0;
N155_VolumeFill=l9_2435;
N155_OrientationAxis=int(l9_2436);
N155_nTurns=l9_2437;
N155_animPath=l9_2438!=0.0;
N155_Speed=l9_2439;
N155_randSpeed=l9_2440!=0.0;
N155_SpeedMinMax=l9_2441;
N155_timeValuesIn=l9_2442;
float l9_2445=3.1415927;
float l9_2446=l9_2445*2.0;
float l9_2447=(N155_heightPerTurn/N155_nTurns)/l9_2446;
float l9_2448=N155_startRad*0.5;
float l9_2449=N155_endRad*0.5;
float l9_2450=N155_thicknessRad*0.5;
float l9_2451=0.0;
l9_2451=tempGlobals.gInstanceRatio;
float l9_2452=l9_2451;
float l9_2453=l9_2452;
int l9_2454=0;
l9_2454=int(tempGlobals.gInstanceID+0.5);
int l9_2455=l9_2454;
float l9_2456=float(l9_2455);
float l9_2457=l9_2456;
int l9_2458=int(l9_2457);
int l9_2459=l9_2458^(l9_2458*15299);
int l9_2460=l9_2459;
int l9_2461=l9_2460;
int l9_2462=((l9_2461*((l9_2461*1471343)+101146501))+1559861749)&2147483647;
int l9_2463=l9_2462;
float l9_2464=float(l9_2463)*4.6566129e-10;
float l9_2465=l9_2464;
float l9_2466=l9_2465;
float l9_2467=l9_2466;
if (N155_animPath)
{
if (N155_randSpeed)
{
l9_2453=mod(l9_2453+(N155_timeValuesIn.z*mix(N155_SpeedMinMax.x,N155_SpeedMinMax.y,l9_2467)),1.1);
}
else
{
l9_2453=mod(l9_2453+(N155_timeValuesIn.z*N155_Speed),1.1);
}
}
float l9_2468=(l9_2446*N155_nTurns)*l9_2453;
float l9_2469=mix(l9_2448,l9_2449,l9_2453);
float l9_2470=l9_2469*cos(l9_2468);
float l9_2471=l9_2469*sin(l9_2468);
float l9_2472=l9_2447*l9_2468;
if (N155_alignHeight==1)
{
l9_2472-=(((l9_2447*N155_nTurns)*l9_2446)*0.5);
}
else
{
if (N155_alignHeight==2)
{
l9_2472-=((l9_2447*N155_nTurns)*l9_2446);
}
}
float3 l9_2473=normalize(float3(-sin(l9_2468),cos(l9_2468),l9_2447/l9_2446));
float3 l9_2474=normalize(cross(l9_2473,float3(0.0,0.0,1.0)));
float3 l9_2475=cross(l9_2473,l9_2474);
float l9_2476=l9_2453;
float l9_2477=0.0;
float l9_2478=(*sc_set0.UserUniforms).Tweak_N157_curveData.x;
float l9_2479=(*sc_set0.UserUniforms).Tweak_N157_curveData.y;
float l9_2480=(*sc_set0.UserUniforms).Tweak_N157_curveData.z;
float l9_2481=(l9_2476-l9_2479)/(l9_2480-l9_2479);
float2 l9_2482=float2(l9_2481,l9_2478);
l9_2482=fast::clamp(l9_2482,float2(0.0),float2(1.0));
int l9_2483;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_2484=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2484=0;
}
else
{
l9_2484=in.varStereoViewID;
}
int l9_2485=l9_2484;
l9_2483=1-l9_2485;
}
else
{
int l9_2486=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2486=0;
}
else
{
l9_2486=in.varStereoViewID;
}
int l9_2487=l9_2486;
l9_2483=l9_2487;
}
int l9_2488=l9_2483;
int l9_2489=sc_CurveAtlasLayout_tmp;
int l9_2490=l9_2488;
float2 l9_2491=l9_2482;
bool l9_2492=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_2493=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_2494=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_2495=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_2496=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_2497=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_2498=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_2499=0.0;
bool l9_2500=l9_2497&&(!l9_2495);
float l9_2501=1.0;
float l9_2502=l9_2491.x;
int l9_2503=l9_2494.x;
if (l9_2503==1)
{
l9_2502=fract(l9_2502);
}
else
{
if (l9_2503==2)
{
float l9_2504=fract(l9_2502);
float l9_2505=l9_2502-l9_2504;
float l9_2506=step(0.25,fract(l9_2505*0.5));
l9_2502=mix(l9_2504,1.0-l9_2504,fast::clamp(l9_2506,0.0,1.0));
}
}
l9_2491.x=l9_2502;
float l9_2507=l9_2491.y;
int l9_2508=l9_2494.y;
if (l9_2508==1)
{
l9_2507=fract(l9_2507);
}
else
{
if (l9_2508==2)
{
float l9_2509=fract(l9_2507);
float l9_2510=l9_2507-l9_2509;
float l9_2511=step(0.25,fract(l9_2510*0.5));
l9_2507=mix(l9_2509,1.0-l9_2509,fast::clamp(l9_2511,0.0,1.0));
}
}
l9_2491.y=l9_2507;
if (l9_2495)
{
bool l9_2512=l9_2497;
bool l9_2513;
if (l9_2512)
{
l9_2513=l9_2494.x==3;
}
else
{
l9_2513=l9_2512;
}
float l9_2514=l9_2491.x;
float l9_2515=l9_2496.x;
float l9_2516=l9_2496.z;
bool l9_2517=l9_2513;
float l9_2518=l9_2501;
float l9_2519=fast::clamp(l9_2514,l9_2515,l9_2516);
float l9_2520=step(abs(l9_2514-l9_2519),9.9999997e-06);
l9_2518*=(l9_2520+((1.0-float(l9_2517))*(1.0-l9_2520)));
l9_2514=l9_2519;
l9_2491.x=l9_2514;
l9_2501=l9_2518;
bool l9_2521=l9_2497;
bool l9_2522;
if (l9_2521)
{
l9_2522=l9_2494.y==3;
}
else
{
l9_2522=l9_2521;
}
float l9_2523=l9_2491.y;
float l9_2524=l9_2496.y;
float l9_2525=l9_2496.w;
bool l9_2526=l9_2522;
float l9_2527=l9_2501;
float l9_2528=fast::clamp(l9_2523,l9_2524,l9_2525);
float l9_2529=step(abs(l9_2523-l9_2528),9.9999997e-06);
l9_2527*=(l9_2529+((1.0-float(l9_2526))*(1.0-l9_2529)));
l9_2523=l9_2528;
l9_2491.y=l9_2523;
l9_2501=l9_2527;
}
float2 l9_2530=l9_2491;
bool l9_2531=l9_2492;
float3x3 l9_2532=l9_2493;
if (l9_2531)
{
l9_2530=float2((l9_2532*float3(l9_2530,1.0)).xy);
}
float2 l9_2533=l9_2530;
l9_2491=l9_2533;
float l9_2534=l9_2491.x;
int l9_2535=l9_2494.x;
bool l9_2536=l9_2500;
float l9_2537=l9_2501;
if ((l9_2535==0)||(l9_2535==3))
{
float l9_2538=l9_2534;
float l9_2539=0.0;
float l9_2540=1.0;
bool l9_2541=l9_2536;
float l9_2542=l9_2537;
float l9_2543=fast::clamp(l9_2538,l9_2539,l9_2540);
float l9_2544=step(abs(l9_2538-l9_2543),9.9999997e-06);
l9_2542*=(l9_2544+((1.0-float(l9_2541))*(1.0-l9_2544)));
l9_2538=l9_2543;
l9_2534=l9_2538;
l9_2537=l9_2542;
}
l9_2491.x=l9_2534;
l9_2501=l9_2537;
float l9_2545=l9_2491.y;
int l9_2546=l9_2494.y;
bool l9_2547=l9_2500;
float l9_2548=l9_2501;
if ((l9_2546==0)||(l9_2546==3))
{
float l9_2549=l9_2545;
float l9_2550=0.0;
float l9_2551=1.0;
bool l9_2552=l9_2547;
float l9_2553=l9_2548;
float l9_2554=fast::clamp(l9_2549,l9_2550,l9_2551);
float l9_2555=step(abs(l9_2549-l9_2554),9.9999997e-06);
l9_2553*=(l9_2555+((1.0-float(l9_2552))*(1.0-l9_2555)));
l9_2549=l9_2554;
l9_2545=l9_2549;
l9_2548=l9_2553;
}
l9_2491.y=l9_2545;
l9_2501=l9_2548;
float2 l9_2556=l9_2491;
int l9_2557=l9_2489;
int l9_2558=l9_2490;
float l9_2559=l9_2499;
float2 l9_2560=l9_2556;
int l9_2561=l9_2557;
int l9_2562=l9_2558;
float3 l9_2563=float3(0.0);
if (l9_2561==0)
{
l9_2563=float3(l9_2560,0.0);
}
else
{
if (l9_2561==1)
{
l9_2563=float3(l9_2560.x,(l9_2560.y*0.5)+(0.5-(float(l9_2562)*0.5)),0.0);
}
else
{
l9_2563=float3(l9_2560,float(l9_2562));
}
}
float3 l9_2564=l9_2563;
float3 l9_2565=l9_2564;
float4 l9_2566=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_2565.xy,level(l9_2559));
float4 l9_2567=l9_2566;
if (l9_2497)
{
l9_2567=mix(l9_2498,l9_2567,float4(l9_2501));
}
float4 l9_2568=l9_2567;
l9_2477=l9_2568.x;
float l9_2569=l9_2477;
float l9_2570=l9_2569;
float l9_2571;
if (N155_curvThickEnable)
{
l9_2571=l9_2450*l9_2570;
}
else
{
l9_2571=l9_2450;
}
float l9_2572=l9_2571;
float3 l9_2573=mix(float3(l9_2470,l9_2471,l9_2472)+(((l9_2474*cos(l9_2456))+(l9_2475*sin(l9_2456)))*l9_2572),float3(l9_2470,l9_2471,l9_2472),float3(l9_2467*N155_VolumeFill));
float3 l9_2574;
if (l9_2453>1.0)
{
l9_2574=l9_2573/float3(0.0);
}
else
{
l9_2574=l9_2573;
}
l9_2573=l9_2574;
if (N155_OrientationAxis==0)
{
l9_2573=l9_2573.zxy;
l9_2473=l9_2473.zxy;
l9_2474=l9_2474.zxy;
l9_2475=l9_2475.zxy;
}
else
{
if (N155_OrientationAxis==1)
{
l9_2573=l9_2573.xzy;
l9_2473=l9_2473.xzy;
l9_2474=l9_2474.xzy;
l9_2475=l9_2475.xzy;
}
}
tempGlobals.N155_helixDirection=l9_2473;
N155_Result=l9_2573;
l9_2444=N155_Result;
l9_2428=l9_2444;
l9_2029=l9_2428;
l9_2034=l9_2029;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==6)
{
float l9_2575=0.0;
float l9_2576=(*sc_set0.UserUniforms).Tweak_N298;
l9_2575=l9_2576;
float3 l9_2577=float3(0.0);
float3 l9_2578=(*sc_set0.UserUniforms).Tweak_N330;
l9_2577=l9_2578;
float l9_2579=0.0;
float l9_2580=float((*sc_set0.UserUniforms).Tweak_N308!=0);
l9_2579=l9_2580;
float l9_2581=0.0;
float l9_2582=(*sc_set0.UserUniforms).timeGlobal;
l9_2581=l9_2582;
float l9_2583=0.0;
float l9_2584=(*sc_set0.UserUniforms).externalTimeInput;
l9_2583=l9_2584;
float l9_2585=0.0;
float l9_2586=(*sc_set0.UserUniforms).externalSeed;
l9_2585=l9_2586;
float l9_2587=0.0;
float l9_2588=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_2587=l9_2588;
float2 l9_2589=float2(0.0);
float2 l9_2590=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_2589=l9_2590;
float l9_2591=0.0;
float l9_2592;
if ((int(TRAILS_tmp)!=0))
{
l9_2592=1.001;
}
else
{
l9_2592=0.001;
}
l9_2592-=0.001;
l9_2591=l9_2592;
float l9_2593=0.0;
float l9_2594=(*sc_set0.UserUniforms).trailLength;
l9_2593=l9_2594;
float4 l9_2595=float4(0.0);
l9_2595=l9_2033.VertexColor;
float l9_2596=0.0;
l9_2596=l9_2595.x;
float l9_2597=0.0;
float l9_2598=l9_2591;
bool l9_2599=(l9_2598*1.0)!=0.0;
bool l9_2600;
if (l9_2599)
{
l9_2600=(l9_2596*1.0)!=0.0;
}
else
{
l9_2600=l9_2599;
}
l9_2597=float(l9_2600);
float4 l9_2601=float4(0.0);
float l9_2602=l9_2581;
float l9_2603=l9_2583;
float l9_2604=l9_2585;
float l9_2605=l9_2587;
float2 l9_2606=l9_2589;
float l9_2607=l9_2593;
float l9_2608=l9_2597;
ssGlobals l9_2609=l9_2033;
tempGlobals=l9_2609;
float4 l9_2610=float4(0.0);
N181_timeGlobal=l9_2602;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_2603;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_2604;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_2605;
N181_lifeTimeMinMax=l9_2606;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_2607;
N181_isTrailCondition=l9_2608!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_2611=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_2612=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_2611=length(float4(1.0)*l9_2612);
}
N181_globalSeed=N181_externalSeed+l9_2611;
int l9_2613=0;
l9_2613=int(tempGlobals.gInstanceID+0.5);
int l9_2614=l9_2613;
float l9_2615=float(l9_2614);
int l9_2616=int(l9_2615);
int l9_2617=l9_2616^(l9_2616*15299);
int l9_2618=l9_2617;
int l9_2619=l9_2618;
int l9_2620=((l9_2619*((l9_2619*1471343)+101146501))+1559861749)&2147483647;
int l9_2621=l9_2620;
int l9_2622=l9_2618*1399;
int l9_2623=((l9_2622*((l9_2622*1471343)+101146501))+1559861749)&2147483647;
int l9_2624=l9_2623;
int l9_2625=l9_2618*7177;
int l9_2626=((l9_2625*((l9_2625*1471343)+101146501))+1559861749)&2147483647;
int l9_2627=l9_2626;
int l9_2628=l9_2621;
float l9_2629=float(l9_2628)*4.6566129e-10;
int l9_2630=l9_2624;
float l9_2631=float(l9_2630)*4.6566129e-10;
int l9_2632=l9_2627;
float l9_2633=float(l9_2632)*4.6566129e-10;
float3 l9_2634=float3(l9_2629,l9_2631,l9_2633);
float3 l9_2635=l9_2634;
N181_particleSeed=l9_2635;
float l9_2636=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_2637;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_2637=N181_lifeTimeMinMax;
}
else
{
l9_2637=float2(N181_lifeTimeConstant);
}
float2 l9_2638=l9_2637;
float l9_2639=fast::max(l9_2638.x,0.0099999998);
float l9_2640=fast::max(l9_2638.y,0.0099999998);
float l9_2641=tempGlobals.gTimeElapsed;
float l9_2642=l9_2641;
if (N181_ENABLE_EXTERNALTIME)
{
l9_2642=N181_externalTime;
}
float l9_2643=l9_2642;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_2643=N181_timeGlobal*l9_2642;
}
else
{
float l9_2644=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_2644=N181_trailLength;
}
}
float l9_2645=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_2646=0.0;
l9_2646=tempGlobals.gInstanceRatio;
float l9_2647=l9_2646;
int l9_2648=0;
l9_2648=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_2649=l9_2648;
l9_2645=fast::max(l9_2647*(1.0-(1.0/float(l9_2649))),0.0);
}
else
{
l9_2645=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_2650=fract(((l9_2642*N181_timeGlobal)*(1.0/(l9_2638.y+l9_2644)))+l9_2645);
l9_2643=l9_2650*(l9_2638.y+l9_2644);
}
float l9_2651=mix(l9_2643/l9_2639,l9_2643/l9_2640,l9_2636);
float l9_2652=fast::clamp(l9_2651,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_2643,l9_2652);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_2653=tempGlobals.Surface_UVCoord0;
l9_2643-=(l9_2653.y*N181_trailLength);
l9_2651=mix(l9_2643/l9_2639,l9_2643/l9_2640,l9_2636);
l9_2652=fast::clamp(l9_2651,0.0,1.0);
}
}
N181_timeValues=float4(l9_2638,l9_2643,l9_2652);
l9_2610=N181_timeValues;
l9_2601=l9_2610;
float l9_2654=0.0;
float l9_2655=(*sc_set0.UserUniforms).Tweak_N294;
l9_2654=l9_2655;
float l9_2656=0.0;
float l9_2657=float((*sc_set0.UserUniforms).Tweak_N339!=0);
l9_2656=l9_2657;
float2 l9_2658=float2(0.0);
float2 l9_2659=(*sc_set0.UserUniforms).Tweak_N342;
l9_2658=l9_2659;
float l9_2660=0.0;
float l9_2661=(*sc_set0.UserUniforms).Tweak_N301;
l9_2660=l9_2661;
float l9_2662=0.0;
float l9_2663=float((*sc_set0.UserUniforms).Tweak_N274!=0);
l9_2662=l9_2663;
float l9_2664=0.0;
float l9_2665=(*sc_set0.UserUniforms).Tweak_N302;
l9_2664=l9_2665;
float l9_2666=0.0;
float l9_2667=(*sc_set0.UserUniforms).Tweak_N318;
l9_2666=l9_2667;
float3 l9_2668=float3(0.0);
float l9_2669=l9_2575;
float3 l9_2670=l9_2577;
float l9_2671=l9_2579;
float4 l9_2672=l9_2601;
float l9_2673=l9_2654;
float l9_2674=l9_2656;
float2 l9_2675=l9_2658;
float l9_2676=l9_2660;
float l9_2677=l9_2662;
float l9_2678=l9_2664;
float l9_2679=l9_2666;
ssGlobals l9_2680=l9_2033;
tempGlobals=l9_2680;
float3 l9_2681=float3(0.0);
N319_Scale=l9_2669;
N319_scaleXYZ=l9_2670;
N319_animPath=l9_2671!=0.0;
N319_timeValuesIn=l9_2672;
N319_Speed=l9_2673;
N319_randSpeed=l9_2674!=0.0;
N319_SpeedMinMax=l9_2675;
N319_thicknessRad=l9_2676;
N319_curvThickEnable=l9_2677!=0.0;
N319_VolumeFill=l9_2678;
N319_res=l9_2679;
float3 l9_2682=float3(0.0);
float3 l9_2683=float3(0.0);
float3 l9_2684=float3(0.0);
float3 l9_2685=float3(0.0);
float l9_2686=0.0;
l9_2686=tempGlobals.gInstanceRatio;
float l9_2687=l9_2686;
float l9_2688=l9_2687;
float l9_2689=l9_2688;
int l9_2690=0;
l9_2690=int(tempGlobals.gInstanceID+0.5);
int l9_2691=l9_2690;
float l9_2692=float(l9_2691);
float l9_2693=l9_2692;
int l9_2694=int(l9_2693);
int l9_2695=l9_2694^(l9_2694*15299);
int l9_2696=l9_2695;
int l9_2697=l9_2696;
int l9_2698=((l9_2697*((l9_2697*1471343)+101146501))+1559861749)&2147483647;
int l9_2699=l9_2698;
float l9_2700=float(l9_2699)*4.6566129e-10;
float l9_2701=l9_2700;
float l9_2702=l9_2701;
float l9_2703=l9_2702;
if (N319_animPath)
{
if (N319_randSpeed)
{
l9_2689=mod(l9_2688+(N319_timeValuesIn.z*mix(N319_SpeedMinMax.x,N319_SpeedMinMax.y,l9_2703)),1.1);
}
else
{
l9_2689=mod(l9_2688+(N319_timeValuesIn.z*N319_Speed),1.1);
}
}
float l9_2704=l9_2689;
float3 l9_2705=l9_2682;
float3 l9_2706=l9_2683;
float3 l9_2707=l9_2684;
float3 l9_2708=l9_2685;
int l9_2709=5;
float l9_2710=1.0/float(l9_2709);
int l9_2711;
int l9_2712;
int l9_2713;
int l9_2714;
int l9_2715;
int l9_2716;
int l9_2717=0;
for (int snapLoopIndex=0; snapLoopIndex==0; snapLoopIndex+=0)
{
if (l9_2717<l9_2709)
{
float l9_2718=float(l9_2717)*l9_2710;
float l9_2719=0.0;
float l9_2720=(*sc_set0.UserUniforms).Tweak_N293_curveData.x;
float l9_2721=(*sc_set0.UserUniforms).Tweak_N293_curveData.y;
float l9_2722=(*sc_set0.UserUniforms).Tweak_N293_curveData.z;
float l9_2723=(l9_2718-l9_2721)/(l9_2722-l9_2721);
float2 l9_2724=float2(l9_2723,l9_2720);
l9_2724=fast::clamp(l9_2724,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_2725=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2725=0;
}
else
{
l9_2725=in.varStereoViewID;
}
int l9_2726=l9_2725;
l9_2711=1-l9_2726;
}
else
{
int l9_2727=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2727=0;
}
else
{
l9_2727=in.varStereoViewID;
}
int l9_2728=l9_2727;
l9_2711=l9_2728;
}
int l9_2729=l9_2711;
int l9_2730=sc_CurveAtlasLayout_tmp;
int l9_2731=l9_2729;
float2 l9_2732=l9_2724;
bool l9_2733=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_2734=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_2735=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_2736=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_2737=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_2738=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_2739=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_2740=0.0;
bool l9_2741=l9_2738&&(!l9_2736);
float l9_2742=1.0;
float l9_2743=l9_2732.x;
int l9_2744=l9_2735.x;
if (l9_2744==1)
{
l9_2743=fract(l9_2743);
}
else
{
if (l9_2744==2)
{
float l9_2745=fract(l9_2743);
float l9_2746=l9_2743-l9_2745;
float l9_2747=step(0.25,fract(l9_2746*0.5));
l9_2743=mix(l9_2745,1.0-l9_2745,fast::clamp(l9_2747,0.0,1.0));
}
}
l9_2732.x=l9_2743;
float l9_2748=l9_2732.y;
int l9_2749=l9_2735.y;
if (l9_2749==1)
{
l9_2748=fract(l9_2748);
}
else
{
if (l9_2749==2)
{
float l9_2750=fract(l9_2748);
float l9_2751=l9_2748-l9_2750;
float l9_2752=step(0.25,fract(l9_2751*0.5));
l9_2748=mix(l9_2750,1.0-l9_2750,fast::clamp(l9_2752,0.0,1.0));
}
}
l9_2732.y=l9_2748;
if (l9_2736)
{
bool l9_2753=l9_2738;
bool l9_2754;
if (l9_2753)
{
l9_2754=l9_2735.x==3;
}
else
{
l9_2754=l9_2753;
}
float l9_2755=l9_2732.x;
float l9_2756=l9_2737.x;
float l9_2757=l9_2737.z;
bool l9_2758=l9_2754;
float l9_2759=l9_2742;
float l9_2760=fast::clamp(l9_2755,l9_2756,l9_2757);
float l9_2761=step(abs(l9_2755-l9_2760),9.9999997e-06);
l9_2759*=(l9_2761+((1.0-float(l9_2758))*(1.0-l9_2761)));
l9_2755=l9_2760;
l9_2732.x=l9_2755;
l9_2742=l9_2759;
bool l9_2762=l9_2738;
bool l9_2763;
if (l9_2762)
{
l9_2763=l9_2735.y==3;
}
else
{
l9_2763=l9_2762;
}
float l9_2764=l9_2732.y;
float l9_2765=l9_2737.y;
float l9_2766=l9_2737.w;
bool l9_2767=l9_2763;
float l9_2768=l9_2742;
float l9_2769=fast::clamp(l9_2764,l9_2765,l9_2766);
float l9_2770=step(abs(l9_2764-l9_2769),9.9999997e-06);
l9_2768*=(l9_2770+((1.0-float(l9_2767))*(1.0-l9_2770)));
l9_2764=l9_2769;
l9_2732.y=l9_2764;
l9_2742=l9_2768;
}
float2 l9_2771=l9_2732;
bool l9_2772=l9_2733;
float3x3 l9_2773=l9_2734;
if (l9_2772)
{
l9_2771=float2((l9_2773*float3(l9_2771,1.0)).xy);
}
float2 l9_2774=l9_2771;
l9_2732=l9_2774;
float l9_2775=l9_2732.x;
int l9_2776=l9_2735.x;
bool l9_2777=l9_2741;
float l9_2778=l9_2742;
if ((l9_2776==0)||(l9_2776==3))
{
float l9_2779=l9_2775;
float l9_2780=0.0;
float l9_2781=1.0;
bool l9_2782=l9_2777;
float l9_2783=l9_2778;
float l9_2784=fast::clamp(l9_2779,l9_2780,l9_2781);
float l9_2785=step(abs(l9_2779-l9_2784),9.9999997e-06);
l9_2783*=(l9_2785+((1.0-float(l9_2782))*(1.0-l9_2785)));
l9_2779=l9_2784;
l9_2775=l9_2779;
l9_2778=l9_2783;
}
l9_2732.x=l9_2775;
l9_2742=l9_2778;
float l9_2786=l9_2732.y;
int l9_2787=l9_2735.y;
bool l9_2788=l9_2741;
float l9_2789=l9_2742;
if ((l9_2787==0)||(l9_2787==3))
{
float l9_2790=l9_2786;
float l9_2791=0.0;
float l9_2792=1.0;
bool l9_2793=l9_2788;
float l9_2794=l9_2789;
float l9_2795=fast::clamp(l9_2790,l9_2791,l9_2792);
float l9_2796=step(abs(l9_2790-l9_2795),9.9999997e-06);
l9_2794*=(l9_2796+((1.0-float(l9_2793))*(1.0-l9_2796)));
l9_2790=l9_2795;
l9_2786=l9_2790;
l9_2789=l9_2794;
}
l9_2732.y=l9_2786;
l9_2742=l9_2789;
float2 l9_2797=l9_2732;
int l9_2798=l9_2730;
int l9_2799=l9_2731;
float l9_2800=l9_2740;
float2 l9_2801=l9_2797;
int l9_2802=l9_2798;
int l9_2803=l9_2799;
float3 l9_2804=float3(0.0);
if (l9_2802==0)
{
l9_2804=float3(l9_2801,0.0);
}
else
{
if (l9_2802==1)
{
l9_2804=float3(l9_2801.x,(l9_2801.y*0.5)+(0.5-(float(l9_2803)*0.5)),0.0);
}
else
{
l9_2804=float3(l9_2801,float(l9_2803));
}
}
float3 l9_2805=l9_2804;
float3 l9_2806=l9_2805;
float4 l9_2807=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_2806.xy,level(l9_2800));
float4 l9_2808=l9_2807;
if (l9_2738)
{
l9_2808=mix(l9_2739,l9_2808,float4(l9_2742));
}
float4 l9_2809=l9_2808;
l9_2719=l9_2809.x;
float l9_2810=l9_2719;
float l9_2811=l9_2810;
float l9_2812=float(l9_2717)*l9_2710;
float l9_2813=0.0;
float l9_2814=(*sc_set0.UserUniforms).Tweak_N305_curveData.x;
float l9_2815=(*sc_set0.UserUniforms).Tweak_N305_curveData.y;
float l9_2816=(*sc_set0.UserUniforms).Tweak_N305_curveData.z;
float l9_2817=(l9_2812-l9_2815)/(l9_2816-l9_2815);
float2 l9_2818=float2(l9_2817,l9_2814);
l9_2818=fast::clamp(l9_2818,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_2819=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2819=0;
}
else
{
l9_2819=in.varStereoViewID;
}
int l9_2820=l9_2819;
l9_2712=1-l9_2820;
}
else
{
int l9_2821=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2821=0;
}
else
{
l9_2821=in.varStereoViewID;
}
int l9_2822=l9_2821;
l9_2712=l9_2822;
}
int l9_2823=l9_2712;
int l9_2824=sc_CurveAtlasLayout_tmp;
int l9_2825=l9_2823;
float2 l9_2826=l9_2818;
bool l9_2827=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_2828=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_2829=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_2830=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_2831=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_2832=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_2833=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_2834=0.0;
bool l9_2835=l9_2832&&(!l9_2830);
float l9_2836=1.0;
float l9_2837=l9_2826.x;
int l9_2838=l9_2829.x;
if (l9_2838==1)
{
l9_2837=fract(l9_2837);
}
else
{
if (l9_2838==2)
{
float l9_2839=fract(l9_2837);
float l9_2840=l9_2837-l9_2839;
float l9_2841=step(0.25,fract(l9_2840*0.5));
l9_2837=mix(l9_2839,1.0-l9_2839,fast::clamp(l9_2841,0.0,1.0));
}
}
l9_2826.x=l9_2837;
float l9_2842=l9_2826.y;
int l9_2843=l9_2829.y;
if (l9_2843==1)
{
l9_2842=fract(l9_2842);
}
else
{
if (l9_2843==2)
{
float l9_2844=fract(l9_2842);
float l9_2845=l9_2842-l9_2844;
float l9_2846=step(0.25,fract(l9_2845*0.5));
l9_2842=mix(l9_2844,1.0-l9_2844,fast::clamp(l9_2846,0.0,1.0));
}
}
l9_2826.y=l9_2842;
if (l9_2830)
{
bool l9_2847=l9_2832;
bool l9_2848;
if (l9_2847)
{
l9_2848=l9_2829.x==3;
}
else
{
l9_2848=l9_2847;
}
float l9_2849=l9_2826.x;
float l9_2850=l9_2831.x;
float l9_2851=l9_2831.z;
bool l9_2852=l9_2848;
float l9_2853=l9_2836;
float l9_2854=fast::clamp(l9_2849,l9_2850,l9_2851);
float l9_2855=step(abs(l9_2849-l9_2854),9.9999997e-06);
l9_2853*=(l9_2855+((1.0-float(l9_2852))*(1.0-l9_2855)));
l9_2849=l9_2854;
l9_2826.x=l9_2849;
l9_2836=l9_2853;
bool l9_2856=l9_2832;
bool l9_2857;
if (l9_2856)
{
l9_2857=l9_2829.y==3;
}
else
{
l9_2857=l9_2856;
}
float l9_2858=l9_2826.y;
float l9_2859=l9_2831.y;
float l9_2860=l9_2831.w;
bool l9_2861=l9_2857;
float l9_2862=l9_2836;
float l9_2863=fast::clamp(l9_2858,l9_2859,l9_2860);
float l9_2864=step(abs(l9_2858-l9_2863),9.9999997e-06);
l9_2862*=(l9_2864+((1.0-float(l9_2861))*(1.0-l9_2864)));
l9_2858=l9_2863;
l9_2826.y=l9_2858;
l9_2836=l9_2862;
}
float2 l9_2865=l9_2826;
bool l9_2866=l9_2827;
float3x3 l9_2867=l9_2828;
if (l9_2866)
{
l9_2865=float2((l9_2867*float3(l9_2865,1.0)).xy);
}
float2 l9_2868=l9_2865;
l9_2826=l9_2868;
float l9_2869=l9_2826.x;
int l9_2870=l9_2829.x;
bool l9_2871=l9_2835;
float l9_2872=l9_2836;
if ((l9_2870==0)||(l9_2870==3))
{
float l9_2873=l9_2869;
float l9_2874=0.0;
float l9_2875=1.0;
bool l9_2876=l9_2871;
float l9_2877=l9_2872;
float l9_2878=fast::clamp(l9_2873,l9_2874,l9_2875);
float l9_2879=step(abs(l9_2873-l9_2878),9.9999997e-06);
l9_2877*=(l9_2879+((1.0-float(l9_2876))*(1.0-l9_2879)));
l9_2873=l9_2878;
l9_2869=l9_2873;
l9_2872=l9_2877;
}
l9_2826.x=l9_2869;
l9_2836=l9_2872;
float l9_2880=l9_2826.y;
int l9_2881=l9_2829.y;
bool l9_2882=l9_2835;
float l9_2883=l9_2836;
if ((l9_2881==0)||(l9_2881==3))
{
float l9_2884=l9_2880;
float l9_2885=0.0;
float l9_2886=1.0;
bool l9_2887=l9_2882;
float l9_2888=l9_2883;
float l9_2889=fast::clamp(l9_2884,l9_2885,l9_2886);
float l9_2890=step(abs(l9_2884-l9_2889),9.9999997e-06);
l9_2888*=(l9_2890+((1.0-float(l9_2887))*(1.0-l9_2890)));
l9_2884=l9_2889;
l9_2880=l9_2884;
l9_2883=l9_2888;
}
l9_2826.y=l9_2880;
l9_2836=l9_2883;
float2 l9_2891=l9_2826;
int l9_2892=l9_2824;
int l9_2893=l9_2825;
float l9_2894=l9_2834;
float2 l9_2895=l9_2891;
int l9_2896=l9_2892;
int l9_2897=l9_2893;
float3 l9_2898=float3(0.0);
if (l9_2896==0)
{
l9_2898=float3(l9_2895,0.0);
}
else
{
if (l9_2896==1)
{
l9_2898=float3(l9_2895.x,(l9_2895.y*0.5)+(0.5-(float(l9_2897)*0.5)),0.0);
}
else
{
l9_2898=float3(l9_2895,float(l9_2897));
}
}
float3 l9_2899=l9_2898;
float3 l9_2900=l9_2899;
float4 l9_2901=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_2900.xy,level(l9_2894));
float4 l9_2902=l9_2901;
if (l9_2832)
{
l9_2902=mix(l9_2833,l9_2902,float4(l9_2836));
}
float4 l9_2903=l9_2902;
l9_2813=l9_2903.x;
float l9_2904=l9_2813;
float l9_2905=l9_2904;
float l9_2906=float(l9_2717)*l9_2710;
float l9_2907=0.0;
float l9_2908=(*sc_set0.UserUniforms).Tweak_N297_curveData.x;
float l9_2909=(*sc_set0.UserUniforms).Tweak_N297_curveData.y;
float l9_2910=(*sc_set0.UserUniforms).Tweak_N297_curveData.z;
float l9_2911=(l9_2906-l9_2909)/(l9_2910-l9_2909);
float2 l9_2912=float2(l9_2911,l9_2908);
l9_2912=fast::clamp(l9_2912,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_2913=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2913=0;
}
else
{
l9_2913=in.varStereoViewID;
}
int l9_2914=l9_2913;
l9_2713=1-l9_2914;
}
else
{
int l9_2915=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2915=0;
}
else
{
l9_2915=in.varStereoViewID;
}
int l9_2916=l9_2915;
l9_2713=l9_2916;
}
int l9_2917=l9_2713;
int l9_2918=sc_CurveAtlasLayout_tmp;
int l9_2919=l9_2917;
float2 l9_2920=l9_2912;
bool l9_2921=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_2922=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_2923=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_2924=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_2925=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_2926=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_2927=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_2928=0.0;
bool l9_2929=l9_2926&&(!l9_2924);
float l9_2930=1.0;
float l9_2931=l9_2920.x;
int l9_2932=l9_2923.x;
if (l9_2932==1)
{
l9_2931=fract(l9_2931);
}
else
{
if (l9_2932==2)
{
float l9_2933=fract(l9_2931);
float l9_2934=l9_2931-l9_2933;
float l9_2935=step(0.25,fract(l9_2934*0.5));
l9_2931=mix(l9_2933,1.0-l9_2933,fast::clamp(l9_2935,0.0,1.0));
}
}
l9_2920.x=l9_2931;
float l9_2936=l9_2920.y;
int l9_2937=l9_2923.y;
if (l9_2937==1)
{
l9_2936=fract(l9_2936);
}
else
{
if (l9_2937==2)
{
float l9_2938=fract(l9_2936);
float l9_2939=l9_2936-l9_2938;
float l9_2940=step(0.25,fract(l9_2939*0.5));
l9_2936=mix(l9_2938,1.0-l9_2938,fast::clamp(l9_2940,0.0,1.0));
}
}
l9_2920.y=l9_2936;
if (l9_2924)
{
bool l9_2941=l9_2926;
bool l9_2942;
if (l9_2941)
{
l9_2942=l9_2923.x==3;
}
else
{
l9_2942=l9_2941;
}
float l9_2943=l9_2920.x;
float l9_2944=l9_2925.x;
float l9_2945=l9_2925.z;
bool l9_2946=l9_2942;
float l9_2947=l9_2930;
float l9_2948=fast::clamp(l9_2943,l9_2944,l9_2945);
float l9_2949=step(abs(l9_2943-l9_2948),9.9999997e-06);
l9_2947*=(l9_2949+((1.0-float(l9_2946))*(1.0-l9_2949)));
l9_2943=l9_2948;
l9_2920.x=l9_2943;
l9_2930=l9_2947;
bool l9_2950=l9_2926;
bool l9_2951;
if (l9_2950)
{
l9_2951=l9_2923.y==3;
}
else
{
l9_2951=l9_2950;
}
float l9_2952=l9_2920.y;
float l9_2953=l9_2925.y;
float l9_2954=l9_2925.w;
bool l9_2955=l9_2951;
float l9_2956=l9_2930;
float l9_2957=fast::clamp(l9_2952,l9_2953,l9_2954);
float l9_2958=step(abs(l9_2952-l9_2957),9.9999997e-06);
l9_2956*=(l9_2958+((1.0-float(l9_2955))*(1.0-l9_2958)));
l9_2952=l9_2957;
l9_2920.y=l9_2952;
l9_2930=l9_2956;
}
float2 l9_2959=l9_2920;
bool l9_2960=l9_2921;
float3x3 l9_2961=l9_2922;
if (l9_2960)
{
l9_2959=float2((l9_2961*float3(l9_2959,1.0)).xy);
}
float2 l9_2962=l9_2959;
l9_2920=l9_2962;
float l9_2963=l9_2920.x;
int l9_2964=l9_2923.x;
bool l9_2965=l9_2929;
float l9_2966=l9_2930;
if ((l9_2964==0)||(l9_2964==3))
{
float l9_2967=l9_2963;
float l9_2968=0.0;
float l9_2969=1.0;
bool l9_2970=l9_2965;
float l9_2971=l9_2966;
float l9_2972=fast::clamp(l9_2967,l9_2968,l9_2969);
float l9_2973=step(abs(l9_2967-l9_2972),9.9999997e-06);
l9_2971*=(l9_2973+((1.0-float(l9_2970))*(1.0-l9_2973)));
l9_2967=l9_2972;
l9_2963=l9_2967;
l9_2966=l9_2971;
}
l9_2920.x=l9_2963;
l9_2930=l9_2966;
float l9_2974=l9_2920.y;
int l9_2975=l9_2923.y;
bool l9_2976=l9_2929;
float l9_2977=l9_2930;
if ((l9_2975==0)||(l9_2975==3))
{
float l9_2978=l9_2974;
float l9_2979=0.0;
float l9_2980=1.0;
bool l9_2981=l9_2976;
float l9_2982=l9_2977;
float l9_2983=fast::clamp(l9_2978,l9_2979,l9_2980);
float l9_2984=step(abs(l9_2978-l9_2983),9.9999997e-06);
l9_2982*=(l9_2984+((1.0-float(l9_2981))*(1.0-l9_2984)));
l9_2978=l9_2983;
l9_2974=l9_2978;
l9_2977=l9_2982;
}
l9_2920.y=l9_2974;
l9_2930=l9_2977;
float2 l9_2985=l9_2920;
int l9_2986=l9_2918;
int l9_2987=l9_2919;
float l9_2988=l9_2928;
float2 l9_2989=l9_2985;
int l9_2990=l9_2986;
int l9_2991=l9_2987;
float3 l9_2992=float3(0.0);
if (l9_2990==0)
{
l9_2992=float3(l9_2989,0.0);
}
else
{
if (l9_2990==1)
{
l9_2992=float3(l9_2989.x,(l9_2989.y*0.5)+(0.5-(float(l9_2991)*0.5)),0.0);
}
else
{
l9_2992=float3(l9_2989,float(l9_2991));
}
}
float3 l9_2993=l9_2992;
float3 l9_2994=l9_2993;
float4 l9_2995=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_2994.xy,level(l9_2988));
float4 l9_2996=l9_2995;
if (l9_2926)
{
l9_2996=mix(l9_2927,l9_2996,float4(l9_2930));
}
float4 l9_2997=l9_2996;
l9_2907=l9_2997.x;
float l9_2998=l9_2907;
float3 l9_2999=float3(l9_2811,l9_2905,l9_2998);
float l9_3000=(float(l9_2717)*l9_2710)+N319_res;
float l9_3001=0.0;
float l9_3002=(*sc_set0.UserUniforms).Tweak_N293_curveData.x;
float l9_3003=(*sc_set0.UserUniforms).Tweak_N293_curveData.y;
float l9_3004=(*sc_set0.UserUniforms).Tweak_N293_curveData.z;
float l9_3005=(l9_3000-l9_3003)/(l9_3004-l9_3003);
float2 l9_3006=float2(l9_3005,l9_3002);
l9_3006=fast::clamp(l9_3006,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_3007=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3007=0;
}
else
{
l9_3007=in.varStereoViewID;
}
int l9_3008=l9_3007;
l9_2714=1-l9_3008;
}
else
{
int l9_3009=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3009=0;
}
else
{
l9_3009=in.varStereoViewID;
}
int l9_3010=l9_3009;
l9_2714=l9_3010;
}
int l9_3011=l9_2714;
int l9_3012=sc_CurveAtlasLayout_tmp;
int l9_3013=l9_3011;
float2 l9_3014=l9_3006;
bool l9_3015=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_3016=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_3017=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_3018=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_3019=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_3020=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_3021=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_3022=0.0;
bool l9_3023=l9_3020&&(!l9_3018);
float l9_3024=1.0;
float l9_3025=l9_3014.x;
int l9_3026=l9_3017.x;
if (l9_3026==1)
{
l9_3025=fract(l9_3025);
}
else
{
if (l9_3026==2)
{
float l9_3027=fract(l9_3025);
float l9_3028=l9_3025-l9_3027;
float l9_3029=step(0.25,fract(l9_3028*0.5));
l9_3025=mix(l9_3027,1.0-l9_3027,fast::clamp(l9_3029,0.0,1.0));
}
}
l9_3014.x=l9_3025;
float l9_3030=l9_3014.y;
int l9_3031=l9_3017.y;
if (l9_3031==1)
{
l9_3030=fract(l9_3030);
}
else
{
if (l9_3031==2)
{
float l9_3032=fract(l9_3030);
float l9_3033=l9_3030-l9_3032;
float l9_3034=step(0.25,fract(l9_3033*0.5));
l9_3030=mix(l9_3032,1.0-l9_3032,fast::clamp(l9_3034,0.0,1.0));
}
}
l9_3014.y=l9_3030;
if (l9_3018)
{
bool l9_3035=l9_3020;
bool l9_3036;
if (l9_3035)
{
l9_3036=l9_3017.x==3;
}
else
{
l9_3036=l9_3035;
}
float l9_3037=l9_3014.x;
float l9_3038=l9_3019.x;
float l9_3039=l9_3019.z;
bool l9_3040=l9_3036;
float l9_3041=l9_3024;
float l9_3042=fast::clamp(l9_3037,l9_3038,l9_3039);
float l9_3043=step(abs(l9_3037-l9_3042),9.9999997e-06);
l9_3041*=(l9_3043+((1.0-float(l9_3040))*(1.0-l9_3043)));
l9_3037=l9_3042;
l9_3014.x=l9_3037;
l9_3024=l9_3041;
bool l9_3044=l9_3020;
bool l9_3045;
if (l9_3044)
{
l9_3045=l9_3017.y==3;
}
else
{
l9_3045=l9_3044;
}
float l9_3046=l9_3014.y;
float l9_3047=l9_3019.y;
float l9_3048=l9_3019.w;
bool l9_3049=l9_3045;
float l9_3050=l9_3024;
float l9_3051=fast::clamp(l9_3046,l9_3047,l9_3048);
float l9_3052=step(abs(l9_3046-l9_3051),9.9999997e-06);
l9_3050*=(l9_3052+((1.0-float(l9_3049))*(1.0-l9_3052)));
l9_3046=l9_3051;
l9_3014.y=l9_3046;
l9_3024=l9_3050;
}
float2 l9_3053=l9_3014;
bool l9_3054=l9_3015;
float3x3 l9_3055=l9_3016;
if (l9_3054)
{
l9_3053=float2((l9_3055*float3(l9_3053,1.0)).xy);
}
float2 l9_3056=l9_3053;
l9_3014=l9_3056;
float l9_3057=l9_3014.x;
int l9_3058=l9_3017.x;
bool l9_3059=l9_3023;
float l9_3060=l9_3024;
if ((l9_3058==0)||(l9_3058==3))
{
float l9_3061=l9_3057;
float l9_3062=0.0;
float l9_3063=1.0;
bool l9_3064=l9_3059;
float l9_3065=l9_3060;
float l9_3066=fast::clamp(l9_3061,l9_3062,l9_3063);
float l9_3067=step(abs(l9_3061-l9_3066),9.9999997e-06);
l9_3065*=(l9_3067+((1.0-float(l9_3064))*(1.0-l9_3067)));
l9_3061=l9_3066;
l9_3057=l9_3061;
l9_3060=l9_3065;
}
l9_3014.x=l9_3057;
l9_3024=l9_3060;
float l9_3068=l9_3014.y;
int l9_3069=l9_3017.y;
bool l9_3070=l9_3023;
float l9_3071=l9_3024;
if ((l9_3069==0)||(l9_3069==3))
{
float l9_3072=l9_3068;
float l9_3073=0.0;
float l9_3074=1.0;
bool l9_3075=l9_3070;
float l9_3076=l9_3071;
float l9_3077=fast::clamp(l9_3072,l9_3073,l9_3074);
float l9_3078=step(abs(l9_3072-l9_3077),9.9999997e-06);
l9_3076*=(l9_3078+((1.0-float(l9_3075))*(1.0-l9_3078)));
l9_3072=l9_3077;
l9_3068=l9_3072;
l9_3071=l9_3076;
}
l9_3014.y=l9_3068;
l9_3024=l9_3071;
float2 l9_3079=l9_3014;
int l9_3080=l9_3012;
int l9_3081=l9_3013;
float l9_3082=l9_3022;
float2 l9_3083=l9_3079;
int l9_3084=l9_3080;
int l9_3085=l9_3081;
float3 l9_3086=float3(0.0);
if (l9_3084==0)
{
l9_3086=float3(l9_3083,0.0);
}
else
{
if (l9_3084==1)
{
l9_3086=float3(l9_3083.x,(l9_3083.y*0.5)+(0.5-(float(l9_3085)*0.5)),0.0);
}
else
{
l9_3086=float3(l9_3083,float(l9_3085));
}
}
float3 l9_3087=l9_3086;
float3 l9_3088=l9_3087;
float4 l9_3089=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_3088.xy,level(l9_3082));
float4 l9_3090=l9_3089;
if (l9_3020)
{
l9_3090=mix(l9_3021,l9_3090,float4(l9_3024));
}
float4 l9_3091=l9_3090;
l9_3001=l9_3091.x;
float l9_3092=l9_3001;
float l9_3093=l9_3092;
float l9_3094=(float(l9_2717)*l9_2710)+N319_res;
float l9_3095=0.0;
float l9_3096=(*sc_set0.UserUniforms).Tweak_N305_curveData.x;
float l9_3097=(*sc_set0.UserUniforms).Tweak_N305_curveData.y;
float l9_3098=(*sc_set0.UserUniforms).Tweak_N305_curveData.z;
float l9_3099=(l9_3094-l9_3097)/(l9_3098-l9_3097);
float2 l9_3100=float2(l9_3099,l9_3096);
l9_3100=fast::clamp(l9_3100,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_3101=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3101=0;
}
else
{
l9_3101=in.varStereoViewID;
}
int l9_3102=l9_3101;
l9_2715=1-l9_3102;
}
else
{
int l9_3103=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3103=0;
}
else
{
l9_3103=in.varStereoViewID;
}
int l9_3104=l9_3103;
l9_2715=l9_3104;
}
int l9_3105=l9_2715;
int l9_3106=sc_CurveAtlasLayout_tmp;
int l9_3107=l9_3105;
float2 l9_3108=l9_3100;
bool l9_3109=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_3110=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_3111=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_3112=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_3113=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_3114=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_3115=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_3116=0.0;
bool l9_3117=l9_3114&&(!l9_3112);
float l9_3118=1.0;
float l9_3119=l9_3108.x;
int l9_3120=l9_3111.x;
if (l9_3120==1)
{
l9_3119=fract(l9_3119);
}
else
{
if (l9_3120==2)
{
float l9_3121=fract(l9_3119);
float l9_3122=l9_3119-l9_3121;
float l9_3123=step(0.25,fract(l9_3122*0.5));
l9_3119=mix(l9_3121,1.0-l9_3121,fast::clamp(l9_3123,0.0,1.0));
}
}
l9_3108.x=l9_3119;
float l9_3124=l9_3108.y;
int l9_3125=l9_3111.y;
if (l9_3125==1)
{
l9_3124=fract(l9_3124);
}
else
{
if (l9_3125==2)
{
float l9_3126=fract(l9_3124);
float l9_3127=l9_3124-l9_3126;
float l9_3128=step(0.25,fract(l9_3127*0.5));
l9_3124=mix(l9_3126,1.0-l9_3126,fast::clamp(l9_3128,0.0,1.0));
}
}
l9_3108.y=l9_3124;
if (l9_3112)
{
bool l9_3129=l9_3114;
bool l9_3130;
if (l9_3129)
{
l9_3130=l9_3111.x==3;
}
else
{
l9_3130=l9_3129;
}
float l9_3131=l9_3108.x;
float l9_3132=l9_3113.x;
float l9_3133=l9_3113.z;
bool l9_3134=l9_3130;
float l9_3135=l9_3118;
float l9_3136=fast::clamp(l9_3131,l9_3132,l9_3133);
float l9_3137=step(abs(l9_3131-l9_3136),9.9999997e-06);
l9_3135*=(l9_3137+((1.0-float(l9_3134))*(1.0-l9_3137)));
l9_3131=l9_3136;
l9_3108.x=l9_3131;
l9_3118=l9_3135;
bool l9_3138=l9_3114;
bool l9_3139;
if (l9_3138)
{
l9_3139=l9_3111.y==3;
}
else
{
l9_3139=l9_3138;
}
float l9_3140=l9_3108.y;
float l9_3141=l9_3113.y;
float l9_3142=l9_3113.w;
bool l9_3143=l9_3139;
float l9_3144=l9_3118;
float l9_3145=fast::clamp(l9_3140,l9_3141,l9_3142);
float l9_3146=step(abs(l9_3140-l9_3145),9.9999997e-06);
l9_3144*=(l9_3146+((1.0-float(l9_3143))*(1.0-l9_3146)));
l9_3140=l9_3145;
l9_3108.y=l9_3140;
l9_3118=l9_3144;
}
float2 l9_3147=l9_3108;
bool l9_3148=l9_3109;
float3x3 l9_3149=l9_3110;
if (l9_3148)
{
l9_3147=float2((l9_3149*float3(l9_3147,1.0)).xy);
}
float2 l9_3150=l9_3147;
l9_3108=l9_3150;
float l9_3151=l9_3108.x;
int l9_3152=l9_3111.x;
bool l9_3153=l9_3117;
float l9_3154=l9_3118;
if ((l9_3152==0)||(l9_3152==3))
{
float l9_3155=l9_3151;
float l9_3156=0.0;
float l9_3157=1.0;
bool l9_3158=l9_3153;
float l9_3159=l9_3154;
float l9_3160=fast::clamp(l9_3155,l9_3156,l9_3157);
float l9_3161=step(abs(l9_3155-l9_3160),9.9999997e-06);
l9_3159*=(l9_3161+((1.0-float(l9_3158))*(1.0-l9_3161)));
l9_3155=l9_3160;
l9_3151=l9_3155;
l9_3154=l9_3159;
}
l9_3108.x=l9_3151;
l9_3118=l9_3154;
float l9_3162=l9_3108.y;
int l9_3163=l9_3111.y;
bool l9_3164=l9_3117;
float l9_3165=l9_3118;
if ((l9_3163==0)||(l9_3163==3))
{
float l9_3166=l9_3162;
float l9_3167=0.0;
float l9_3168=1.0;
bool l9_3169=l9_3164;
float l9_3170=l9_3165;
float l9_3171=fast::clamp(l9_3166,l9_3167,l9_3168);
float l9_3172=step(abs(l9_3166-l9_3171),9.9999997e-06);
l9_3170*=(l9_3172+((1.0-float(l9_3169))*(1.0-l9_3172)));
l9_3166=l9_3171;
l9_3162=l9_3166;
l9_3165=l9_3170;
}
l9_3108.y=l9_3162;
l9_3118=l9_3165;
float2 l9_3173=l9_3108;
int l9_3174=l9_3106;
int l9_3175=l9_3107;
float l9_3176=l9_3116;
float2 l9_3177=l9_3173;
int l9_3178=l9_3174;
int l9_3179=l9_3175;
float3 l9_3180=float3(0.0);
if (l9_3178==0)
{
l9_3180=float3(l9_3177,0.0);
}
else
{
if (l9_3178==1)
{
l9_3180=float3(l9_3177.x,(l9_3177.y*0.5)+(0.5-(float(l9_3179)*0.5)),0.0);
}
else
{
l9_3180=float3(l9_3177,float(l9_3179));
}
}
float3 l9_3181=l9_3180;
float3 l9_3182=l9_3181;
float4 l9_3183=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_3182.xy,level(l9_3176));
float4 l9_3184=l9_3183;
if (l9_3114)
{
l9_3184=mix(l9_3115,l9_3184,float4(l9_3118));
}
float4 l9_3185=l9_3184;
l9_3095=l9_3185.x;
float l9_3186=l9_3095;
float l9_3187=l9_3186;
float l9_3188=(float(l9_2717)*l9_2710)+N319_res;
float l9_3189=0.0;
float l9_3190=(*sc_set0.UserUniforms).Tweak_N297_curveData.x;
float l9_3191=(*sc_set0.UserUniforms).Tweak_N297_curveData.y;
float l9_3192=(*sc_set0.UserUniforms).Tweak_N297_curveData.z;
float l9_3193=(l9_3188-l9_3191)/(l9_3192-l9_3191);
float2 l9_3194=float2(l9_3193,l9_3190);
l9_3194=fast::clamp(l9_3194,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_3195=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3195=0;
}
else
{
l9_3195=in.varStereoViewID;
}
int l9_3196=l9_3195;
l9_2716=1-l9_3196;
}
else
{
int l9_3197=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3197=0;
}
else
{
l9_3197=in.varStereoViewID;
}
int l9_3198=l9_3197;
l9_2716=l9_3198;
}
int l9_3199=l9_2716;
int l9_3200=sc_CurveAtlasLayout_tmp;
int l9_3201=l9_3199;
float2 l9_3202=l9_3194;
bool l9_3203=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_3204=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_3205=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_3206=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_3207=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_3208=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_3209=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_3210=0.0;
bool l9_3211=l9_3208&&(!l9_3206);
float l9_3212=1.0;
float l9_3213=l9_3202.x;
int l9_3214=l9_3205.x;
if (l9_3214==1)
{
l9_3213=fract(l9_3213);
}
else
{
if (l9_3214==2)
{
float l9_3215=fract(l9_3213);
float l9_3216=l9_3213-l9_3215;
float l9_3217=step(0.25,fract(l9_3216*0.5));
l9_3213=mix(l9_3215,1.0-l9_3215,fast::clamp(l9_3217,0.0,1.0));
}
}
l9_3202.x=l9_3213;
float l9_3218=l9_3202.y;
int l9_3219=l9_3205.y;
if (l9_3219==1)
{
l9_3218=fract(l9_3218);
}
else
{
if (l9_3219==2)
{
float l9_3220=fract(l9_3218);
float l9_3221=l9_3218-l9_3220;
float l9_3222=step(0.25,fract(l9_3221*0.5));
l9_3218=mix(l9_3220,1.0-l9_3220,fast::clamp(l9_3222,0.0,1.0));
}
}
l9_3202.y=l9_3218;
if (l9_3206)
{
bool l9_3223=l9_3208;
bool l9_3224;
if (l9_3223)
{
l9_3224=l9_3205.x==3;
}
else
{
l9_3224=l9_3223;
}
float l9_3225=l9_3202.x;
float l9_3226=l9_3207.x;
float l9_3227=l9_3207.z;
bool l9_3228=l9_3224;
float l9_3229=l9_3212;
float l9_3230=fast::clamp(l9_3225,l9_3226,l9_3227);
float l9_3231=step(abs(l9_3225-l9_3230),9.9999997e-06);
l9_3229*=(l9_3231+((1.0-float(l9_3228))*(1.0-l9_3231)));
l9_3225=l9_3230;
l9_3202.x=l9_3225;
l9_3212=l9_3229;
bool l9_3232=l9_3208;
bool l9_3233;
if (l9_3232)
{
l9_3233=l9_3205.y==3;
}
else
{
l9_3233=l9_3232;
}
float l9_3234=l9_3202.y;
float l9_3235=l9_3207.y;
float l9_3236=l9_3207.w;
bool l9_3237=l9_3233;
float l9_3238=l9_3212;
float l9_3239=fast::clamp(l9_3234,l9_3235,l9_3236);
float l9_3240=step(abs(l9_3234-l9_3239),9.9999997e-06);
l9_3238*=(l9_3240+((1.0-float(l9_3237))*(1.0-l9_3240)));
l9_3234=l9_3239;
l9_3202.y=l9_3234;
l9_3212=l9_3238;
}
float2 l9_3241=l9_3202;
bool l9_3242=l9_3203;
float3x3 l9_3243=l9_3204;
if (l9_3242)
{
l9_3241=float2((l9_3243*float3(l9_3241,1.0)).xy);
}
float2 l9_3244=l9_3241;
l9_3202=l9_3244;
float l9_3245=l9_3202.x;
int l9_3246=l9_3205.x;
bool l9_3247=l9_3211;
float l9_3248=l9_3212;
if ((l9_3246==0)||(l9_3246==3))
{
float l9_3249=l9_3245;
float l9_3250=0.0;
float l9_3251=1.0;
bool l9_3252=l9_3247;
float l9_3253=l9_3248;
float l9_3254=fast::clamp(l9_3249,l9_3250,l9_3251);
float l9_3255=step(abs(l9_3249-l9_3254),9.9999997e-06);
l9_3253*=(l9_3255+((1.0-float(l9_3252))*(1.0-l9_3255)));
l9_3249=l9_3254;
l9_3245=l9_3249;
l9_3248=l9_3253;
}
l9_3202.x=l9_3245;
l9_3212=l9_3248;
float l9_3256=l9_3202.y;
int l9_3257=l9_3205.y;
bool l9_3258=l9_3211;
float l9_3259=l9_3212;
if ((l9_3257==0)||(l9_3257==3))
{
float l9_3260=l9_3256;
float l9_3261=0.0;
float l9_3262=1.0;
bool l9_3263=l9_3258;
float l9_3264=l9_3259;
float l9_3265=fast::clamp(l9_3260,l9_3261,l9_3262);
float l9_3266=step(abs(l9_3260-l9_3265),9.9999997e-06);
l9_3264*=(l9_3266+((1.0-float(l9_3263))*(1.0-l9_3266)));
l9_3260=l9_3265;
l9_3256=l9_3260;
l9_3259=l9_3264;
}
l9_3202.y=l9_3256;
l9_3212=l9_3259;
float2 l9_3267=l9_3202;
int l9_3268=l9_3200;
int l9_3269=l9_3201;
float l9_3270=l9_3210;
float2 l9_3271=l9_3267;
int l9_3272=l9_3268;
int l9_3273=l9_3269;
float3 l9_3274=float3(0.0);
if (l9_3272==0)
{
l9_3274=float3(l9_3271,0.0);
}
else
{
if (l9_3272==1)
{
l9_3274=float3(l9_3271.x,(l9_3271.y*0.5)+(0.5-(float(l9_3273)*0.5)),0.0);
}
else
{
l9_3274=float3(l9_3271,float(l9_3273));
}
}
float3 l9_3275=l9_3274;
float3 l9_3276=l9_3275;
float4 l9_3277=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_3276.xy,level(l9_3270));
float4 l9_3278=l9_3277;
if (l9_3208)
{
l9_3278=mix(l9_3209,l9_3278,float4(l9_3212));
}
float4 l9_3279=l9_3278;
l9_3189=l9_3279.x;
float l9_3280=l9_3189;
float3 l9_3281=float3(l9_3093,l9_3187,l9_3280);
l9_2705+=normalize(l9_3281-l9_2999);
l9_2717++;
continue;
}
else
{
break;
}
}
l9_2705=normalize(l9_2705);
l9_2706=normalize(cross(l9_2705,float3(0.0099990005,0.99990004,0.0099990005)));
l9_2707=normalize(cross(l9_2705,l9_2706));
float l9_3282=l9_2704;
float l9_3283=0.0;
float l9_3284=(*sc_set0.UserUniforms).Tweak_N293_curveData.x;
float l9_3285=(*sc_set0.UserUniforms).Tweak_N293_curveData.y;
float l9_3286=(*sc_set0.UserUniforms).Tweak_N293_curveData.z;
float l9_3287=(l9_3282-l9_3285)/(l9_3286-l9_3285);
float2 l9_3288=float2(l9_3287,l9_3284);
l9_3288=fast::clamp(l9_3288,float2(0.0),float2(1.0));
int l9_3289;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_3290=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3290=0;
}
else
{
l9_3290=in.varStereoViewID;
}
int l9_3291=l9_3290;
l9_3289=1-l9_3291;
}
else
{
int l9_3292=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3292=0;
}
else
{
l9_3292=in.varStereoViewID;
}
int l9_3293=l9_3292;
l9_3289=l9_3293;
}
int l9_3294=l9_3289;
int l9_3295=sc_CurveAtlasLayout_tmp;
int l9_3296=l9_3294;
float2 l9_3297=l9_3288;
bool l9_3298=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_3299=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_3300=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_3301=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_3302=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_3303=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_3304=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_3305=0.0;
bool l9_3306=l9_3303&&(!l9_3301);
float l9_3307=1.0;
float l9_3308=l9_3297.x;
int l9_3309=l9_3300.x;
if (l9_3309==1)
{
l9_3308=fract(l9_3308);
}
else
{
if (l9_3309==2)
{
float l9_3310=fract(l9_3308);
float l9_3311=l9_3308-l9_3310;
float l9_3312=step(0.25,fract(l9_3311*0.5));
l9_3308=mix(l9_3310,1.0-l9_3310,fast::clamp(l9_3312,0.0,1.0));
}
}
l9_3297.x=l9_3308;
float l9_3313=l9_3297.y;
int l9_3314=l9_3300.y;
if (l9_3314==1)
{
l9_3313=fract(l9_3313);
}
else
{
if (l9_3314==2)
{
float l9_3315=fract(l9_3313);
float l9_3316=l9_3313-l9_3315;
float l9_3317=step(0.25,fract(l9_3316*0.5));
l9_3313=mix(l9_3315,1.0-l9_3315,fast::clamp(l9_3317,0.0,1.0));
}
}
l9_3297.y=l9_3313;
if (l9_3301)
{
bool l9_3318=l9_3303;
bool l9_3319;
if (l9_3318)
{
l9_3319=l9_3300.x==3;
}
else
{
l9_3319=l9_3318;
}
float l9_3320=l9_3297.x;
float l9_3321=l9_3302.x;
float l9_3322=l9_3302.z;
bool l9_3323=l9_3319;
float l9_3324=l9_3307;
float l9_3325=fast::clamp(l9_3320,l9_3321,l9_3322);
float l9_3326=step(abs(l9_3320-l9_3325),9.9999997e-06);
l9_3324*=(l9_3326+((1.0-float(l9_3323))*(1.0-l9_3326)));
l9_3320=l9_3325;
l9_3297.x=l9_3320;
l9_3307=l9_3324;
bool l9_3327=l9_3303;
bool l9_3328;
if (l9_3327)
{
l9_3328=l9_3300.y==3;
}
else
{
l9_3328=l9_3327;
}
float l9_3329=l9_3297.y;
float l9_3330=l9_3302.y;
float l9_3331=l9_3302.w;
bool l9_3332=l9_3328;
float l9_3333=l9_3307;
float l9_3334=fast::clamp(l9_3329,l9_3330,l9_3331);
float l9_3335=step(abs(l9_3329-l9_3334),9.9999997e-06);
l9_3333*=(l9_3335+((1.0-float(l9_3332))*(1.0-l9_3335)));
l9_3329=l9_3334;
l9_3297.y=l9_3329;
l9_3307=l9_3333;
}
float2 l9_3336=l9_3297;
bool l9_3337=l9_3298;
float3x3 l9_3338=l9_3299;
if (l9_3337)
{
l9_3336=float2((l9_3338*float3(l9_3336,1.0)).xy);
}
float2 l9_3339=l9_3336;
l9_3297=l9_3339;
float l9_3340=l9_3297.x;
int l9_3341=l9_3300.x;
bool l9_3342=l9_3306;
float l9_3343=l9_3307;
if ((l9_3341==0)||(l9_3341==3))
{
float l9_3344=l9_3340;
float l9_3345=0.0;
float l9_3346=1.0;
bool l9_3347=l9_3342;
float l9_3348=l9_3343;
float l9_3349=fast::clamp(l9_3344,l9_3345,l9_3346);
float l9_3350=step(abs(l9_3344-l9_3349),9.9999997e-06);
l9_3348*=(l9_3350+((1.0-float(l9_3347))*(1.0-l9_3350)));
l9_3344=l9_3349;
l9_3340=l9_3344;
l9_3343=l9_3348;
}
l9_3297.x=l9_3340;
l9_3307=l9_3343;
float l9_3351=l9_3297.y;
int l9_3352=l9_3300.y;
bool l9_3353=l9_3306;
float l9_3354=l9_3307;
if ((l9_3352==0)||(l9_3352==3))
{
float l9_3355=l9_3351;
float l9_3356=0.0;
float l9_3357=1.0;
bool l9_3358=l9_3353;
float l9_3359=l9_3354;
float l9_3360=fast::clamp(l9_3355,l9_3356,l9_3357);
float l9_3361=step(abs(l9_3355-l9_3360),9.9999997e-06);
l9_3359*=(l9_3361+((1.0-float(l9_3358))*(1.0-l9_3361)));
l9_3355=l9_3360;
l9_3351=l9_3355;
l9_3354=l9_3359;
}
l9_3297.y=l9_3351;
l9_3307=l9_3354;
float2 l9_3362=l9_3297;
int l9_3363=l9_3295;
int l9_3364=l9_3296;
float l9_3365=l9_3305;
float2 l9_3366=l9_3362;
int l9_3367=l9_3363;
int l9_3368=l9_3364;
float3 l9_3369=float3(0.0);
if (l9_3367==0)
{
l9_3369=float3(l9_3366,0.0);
}
else
{
if (l9_3367==1)
{
l9_3369=float3(l9_3366.x,(l9_3366.y*0.5)+(0.5-(float(l9_3368)*0.5)),0.0);
}
else
{
l9_3369=float3(l9_3366,float(l9_3368));
}
}
float3 l9_3370=l9_3369;
float3 l9_3371=l9_3370;
float4 l9_3372=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_3371.xy,level(l9_3365));
float4 l9_3373=l9_3372;
if (l9_3303)
{
l9_3373=mix(l9_3304,l9_3373,float4(l9_3307));
}
float4 l9_3374=l9_3373;
l9_3283=l9_3374.x;
float l9_3375=l9_3283;
float l9_3376=l9_3375;
float l9_3377=l9_2704;
float l9_3378=0.0;
float l9_3379=(*sc_set0.UserUniforms).Tweak_N305_curveData.x;
float l9_3380=(*sc_set0.UserUniforms).Tweak_N305_curveData.y;
float l9_3381=(*sc_set0.UserUniforms).Tweak_N305_curveData.z;
float l9_3382=(l9_3377-l9_3380)/(l9_3381-l9_3380);
float2 l9_3383=float2(l9_3382,l9_3379);
l9_3383=fast::clamp(l9_3383,float2(0.0),float2(1.0));
int l9_3384;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_3385=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3385=0;
}
else
{
l9_3385=in.varStereoViewID;
}
int l9_3386=l9_3385;
l9_3384=1-l9_3386;
}
else
{
int l9_3387=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3387=0;
}
else
{
l9_3387=in.varStereoViewID;
}
int l9_3388=l9_3387;
l9_3384=l9_3388;
}
int l9_3389=l9_3384;
int l9_3390=sc_CurveAtlasLayout_tmp;
int l9_3391=l9_3389;
float2 l9_3392=l9_3383;
bool l9_3393=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_3394=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_3395=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_3396=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_3397=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_3398=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_3399=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_3400=0.0;
bool l9_3401=l9_3398&&(!l9_3396);
float l9_3402=1.0;
float l9_3403=l9_3392.x;
int l9_3404=l9_3395.x;
if (l9_3404==1)
{
l9_3403=fract(l9_3403);
}
else
{
if (l9_3404==2)
{
float l9_3405=fract(l9_3403);
float l9_3406=l9_3403-l9_3405;
float l9_3407=step(0.25,fract(l9_3406*0.5));
l9_3403=mix(l9_3405,1.0-l9_3405,fast::clamp(l9_3407,0.0,1.0));
}
}
l9_3392.x=l9_3403;
float l9_3408=l9_3392.y;
int l9_3409=l9_3395.y;
if (l9_3409==1)
{
l9_3408=fract(l9_3408);
}
else
{
if (l9_3409==2)
{
float l9_3410=fract(l9_3408);
float l9_3411=l9_3408-l9_3410;
float l9_3412=step(0.25,fract(l9_3411*0.5));
l9_3408=mix(l9_3410,1.0-l9_3410,fast::clamp(l9_3412,0.0,1.0));
}
}
l9_3392.y=l9_3408;
if (l9_3396)
{
bool l9_3413=l9_3398;
bool l9_3414;
if (l9_3413)
{
l9_3414=l9_3395.x==3;
}
else
{
l9_3414=l9_3413;
}
float l9_3415=l9_3392.x;
float l9_3416=l9_3397.x;
float l9_3417=l9_3397.z;
bool l9_3418=l9_3414;
float l9_3419=l9_3402;
float l9_3420=fast::clamp(l9_3415,l9_3416,l9_3417);
float l9_3421=step(abs(l9_3415-l9_3420),9.9999997e-06);
l9_3419*=(l9_3421+((1.0-float(l9_3418))*(1.0-l9_3421)));
l9_3415=l9_3420;
l9_3392.x=l9_3415;
l9_3402=l9_3419;
bool l9_3422=l9_3398;
bool l9_3423;
if (l9_3422)
{
l9_3423=l9_3395.y==3;
}
else
{
l9_3423=l9_3422;
}
float l9_3424=l9_3392.y;
float l9_3425=l9_3397.y;
float l9_3426=l9_3397.w;
bool l9_3427=l9_3423;
float l9_3428=l9_3402;
float l9_3429=fast::clamp(l9_3424,l9_3425,l9_3426);
float l9_3430=step(abs(l9_3424-l9_3429),9.9999997e-06);
l9_3428*=(l9_3430+((1.0-float(l9_3427))*(1.0-l9_3430)));
l9_3424=l9_3429;
l9_3392.y=l9_3424;
l9_3402=l9_3428;
}
float2 l9_3431=l9_3392;
bool l9_3432=l9_3393;
float3x3 l9_3433=l9_3394;
if (l9_3432)
{
l9_3431=float2((l9_3433*float3(l9_3431,1.0)).xy);
}
float2 l9_3434=l9_3431;
l9_3392=l9_3434;
float l9_3435=l9_3392.x;
int l9_3436=l9_3395.x;
bool l9_3437=l9_3401;
float l9_3438=l9_3402;
if ((l9_3436==0)||(l9_3436==3))
{
float l9_3439=l9_3435;
float l9_3440=0.0;
float l9_3441=1.0;
bool l9_3442=l9_3437;
float l9_3443=l9_3438;
float l9_3444=fast::clamp(l9_3439,l9_3440,l9_3441);
float l9_3445=step(abs(l9_3439-l9_3444),9.9999997e-06);
l9_3443*=(l9_3445+((1.0-float(l9_3442))*(1.0-l9_3445)));
l9_3439=l9_3444;
l9_3435=l9_3439;
l9_3438=l9_3443;
}
l9_3392.x=l9_3435;
l9_3402=l9_3438;
float l9_3446=l9_3392.y;
int l9_3447=l9_3395.y;
bool l9_3448=l9_3401;
float l9_3449=l9_3402;
if ((l9_3447==0)||(l9_3447==3))
{
float l9_3450=l9_3446;
float l9_3451=0.0;
float l9_3452=1.0;
bool l9_3453=l9_3448;
float l9_3454=l9_3449;
float l9_3455=fast::clamp(l9_3450,l9_3451,l9_3452);
float l9_3456=step(abs(l9_3450-l9_3455),9.9999997e-06);
l9_3454*=(l9_3456+((1.0-float(l9_3453))*(1.0-l9_3456)));
l9_3450=l9_3455;
l9_3446=l9_3450;
l9_3449=l9_3454;
}
l9_3392.y=l9_3446;
l9_3402=l9_3449;
float2 l9_3457=l9_3392;
int l9_3458=l9_3390;
int l9_3459=l9_3391;
float l9_3460=l9_3400;
float2 l9_3461=l9_3457;
int l9_3462=l9_3458;
int l9_3463=l9_3459;
float3 l9_3464=float3(0.0);
if (l9_3462==0)
{
l9_3464=float3(l9_3461,0.0);
}
else
{
if (l9_3462==1)
{
l9_3464=float3(l9_3461.x,(l9_3461.y*0.5)+(0.5-(float(l9_3463)*0.5)),0.0);
}
else
{
l9_3464=float3(l9_3461,float(l9_3463));
}
}
float3 l9_3465=l9_3464;
float3 l9_3466=l9_3465;
float4 l9_3467=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_3466.xy,level(l9_3460));
float4 l9_3468=l9_3467;
if (l9_3398)
{
l9_3468=mix(l9_3399,l9_3468,float4(l9_3402));
}
float4 l9_3469=l9_3468;
l9_3378=l9_3469.x;
float l9_3470=l9_3378;
float l9_3471=l9_3470;
float l9_3472=l9_2704;
float l9_3473=0.0;
float l9_3474=(*sc_set0.UserUniforms).Tweak_N297_curveData.x;
float l9_3475=(*sc_set0.UserUniforms).Tweak_N297_curveData.y;
float l9_3476=(*sc_set0.UserUniforms).Tweak_N297_curveData.z;
float l9_3477=(l9_3472-l9_3475)/(l9_3476-l9_3475);
float2 l9_3478=float2(l9_3477,l9_3474);
l9_3478=fast::clamp(l9_3478,float2(0.0),float2(1.0));
int l9_3479;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_3480=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3480=0;
}
else
{
l9_3480=in.varStereoViewID;
}
int l9_3481=l9_3480;
l9_3479=1-l9_3481;
}
else
{
int l9_3482=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3482=0;
}
else
{
l9_3482=in.varStereoViewID;
}
int l9_3483=l9_3482;
l9_3479=l9_3483;
}
int l9_3484=l9_3479;
int l9_3485=sc_CurveAtlasLayout_tmp;
int l9_3486=l9_3484;
float2 l9_3487=l9_3478;
bool l9_3488=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_3489=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_3490=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_3491=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_3492=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_3493=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_3494=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_3495=0.0;
bool l9_3496=l9_3493&&(!l9_3491);
float l9_3497=1.0;
float l9_3498=l9_3487.x;
int l9_3499=l9_3490.x;
if (l9_3499==1)
{
l9_3498=fract(l9_3498);
}
else
{
if (l9_3499==2)
{
float l9_3500=fract(l9_3498);
float l9_3501=l9_3498-l9_3500;
float l9_3502=step(0.25,fract(l9_3501*0.5));
l9_3498=mix(l9_3500,1.0-l9_3500,fast::clamp(l9_3502,0.0,1.0));
}
}
l9_3487.x=l9_3498;
float l9_3503=l9_3487.y;
int l9_3504=l9_3490.y;
if (l9_3504==1)
{
l9_3503=fract(l9_3503);
}
else
{
if (l9_3504==2)
{
float l9_3505=fract(l9_3503);
float l9_3506=l9_3503-l9_3505;
float l9_3507=step(0.25,fract(l9_3506*0.5));
l9_3503=mix(l9_3505,1.0-l9_3505,fast::clamp(l9_3507,0.0,1.0));
}
}
l9_3487.y=l9_3503;
if (l9_3491)
{
bool l9_3508=l9_3493;
bool l9_3509;
if (l9_3508)
{
l9_3509=l9_3490.x==3;
}
else
{
l9_3509=l9_3508;
}
float l9_3510=l9_3487.x;
float l9_3511=l9_3492.x;
float l9_3512=l9_3492.z;
bool l9_3513=l9_3509;
float l9_3514=l9_3497;
float l9_3515=fast::clamp(l9_3510,l9_3511,l9_3512);
float l9_3516=step(abs(l9_3510-l9_3515),9.9999997e-06);
l9_3514*=(l9_3516+((1.0-float(l9_3513))*(1.0-l9_3516)));
l9_3510=l9_3515;
l9_3487.x=l9_3510;
l9_3497=l9_3514;
bool l9_3517=l9_3493;
bool l9_3518;
if (l9_3517)
{
l9_3518=l9_3490.y==3;
}
else
{
l9_3518=l9_3517;
}
float l9_3519=l9_3487.y;
float l9_3520=l9_3492.y;
float l9_3521=l9_3492.w;
bool l9_3522=l9_3518;
float l9_3523=l9_3497;
float l9_3524=fast::clamp(l9_3519,l9_3520,l9_3521);
float l9_3525=step(abs(l9_3519-l9_3524),9.9999997e-06);
l9_3523*=(l9_3525+((1.0-float(l9_3522))*(1.0-l9_3525)));
l9_3519=l9_3524;
l9_3487.y=l9_3519;
l9_3497=l9_3523;
}
float2 l9_3526=l9_3487;
bool l9_3527=l9_3488;
float3x3 l9_3528=l9_3489;
if (l9_3527)
{
l9_3526=float2((l9_3528*float3(l9_3526,1.0)).xy);
}
float2 l9_3529=l9_3526;
l9_3487=l9_3529;
float l9_3530=l9_3487.x;
int l9_3531=l9_3490.x;
bool l9_3532=l9_3496;
float l9_3533=l9_3497;
if ((l9_3531==0)||(l9_3531==3))
{
float l9_3534=l9_3530;
float l9_3535=0.0;
float l9_3536=1.0;
bool l9_3537=l9_3532;
float l9_3538=l9_3533;
float l9_3539=fast::clamp(l9_3534,l9_3535,l9_3536);
float l9_3540=step(abs(l9_3534-l9_3539),9.9999997e-06);
l9_3538*=(l9_3540+((1.0-float(l9_3537))*(1.0-l9_3540)));
l9_3534=l9_3539;
l9_3530=l9_3534;
l9_3533=l9_3538;
}
l9_3487.x=l9_3530;
l9_3497=l9_3533;
float l9_3541=l9_3487.y;
int l9_3542=l9_3490.y;
bool l9_3543=l9_3496;
float l9_3544=l9_3497;
if ((l9_3542==0)||(l9_3542==3))
{
float l9_3545=l9_3541;
float l9_3546=0.0;
float l9_3547=1.0;
bool l9_3548=l9_3543;
float l9_3549=l9_3544;
float l9_3550=fast::clamp(l9_3545,l9_3546,l9_3547);
float l9_3551=step(abs(l9_3545-l9_3550),9.9999997e-06);
l9_3549*=(l9_3551+((1.0-float(l9_3548))*(1.0-l9_3551)));
l9_3545=l9_3550;
l9_3541=l9_3545;
l9_3544=l9_3549;
}
l9_3487.y=l9_3541;
l9_3497=l9_3544;
float2 l9_3552=l9_3487;
int l9_3553=l9_3485;
int l9_3554=l9_3486;
float l9_3555=l9_3495;
float2 l9_3556=l9_3552;
int l9_3557=l9_3553;
int l9_3558=l9_3554;
float3 l9_3559=float3(0.0);
if (l9_3557==0)
{
l9_3559=float3(l9_3556,0.0);
}
else
{
if (l9_3557==1)
{
l9_3559=float3(l9_3556.x,(l9_3556.y*0.5)+(0.5-(float(l9_3558)*0.5)),0.0);
}
else
{
l9_3559=float3(l9_3556,float(l9_3558));
}
}
float3 l9_3560=l9_3559;
float3 l9_3561=l9_3560;
float4 l9_3562=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_3561.xy,level(l9_3555));
float4 l9_3563=l9_3562;
if (l9_3493)
{
l9_3563=mix(l9_3494,l9_3563,float4(l9_3497));
}
float4 l9_3564=l9_3563;
l9_3473=l9_3564.x;
float l9_3565=l9_3473;
float3 l9_3566=float3(l9_3376,l9_3471,l9_3565);
float l9_3567=l9_2704+N319_res;
float l9_3568=0.0;
float l9_3569=(*sc_set0.UserUniforms).Tweak_N293_curveData.x;
float l9_3570=(*sc_set0.UserUniforms).Tweak_N293_curveData.y;
float l9_3571=(*sc_set0.UserUniforms).Tweak_N293_curveData.z;
float l9_3572=(l9_3567-l9_3570)/(l9_3571-l9_3570);
float2 l9_3573=float2(l9_3572,l9_3569);
l9_3573=fast::clamp(l9_3573,float2(0.0),float2(1.0));
int l9_3574;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_3575=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3575=0;
}
else
{
l9_3575=in.varStereoViewID;
}
int l9_3576=l9_3575;
l9_3574=1-l9_3576;
}
else
{
int l9_3577=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3577=0;
}
else
{
l9_3577=in.varStereoViewID;
}
int l9_3578=l9_3577;
l9_3574=l9_3578;
}
int l9_3579=l9_3574;
int l9_3580=sc_CurveAtlasLayout_tmp;
int l9_3581=l9_3579;
float2 l9_3582=l9_3573;
bool l9_3583=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_3584=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_3585=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_3586=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_3587=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_3588=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_3589=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_3590=0.0;
bool l9_3591=l9_3588&&(!l9_3586);
float l9_3592=1.0;
float l9_3593=l9_3582.x;
int l9_3594=l9_3585.x;
if (l9_3594==1)
{
l9_3593=fract(l9_3593);
}
else
{
if (l9_3594==2)
{
float l9_3595=fract(l9_3593);
float l9_3596=l9_3593-l9_3595;
float l9_3597=step(0.25,fract(l9_3596*0.5));
l9_3593=mix(l9_3595,1.0-l9_3595,fast::clamp(l9_3597,0.0,1.0));
}
}
l9_3582.x=l9_3593;
float l9_3598=l9_3582.y;
int l9_3599=l9_3585.y;
if (l9_3599==1)
{
l9_3598=fract(l9_3598);
}
else
{
if (l9_3599==2)
{
float l9_3600=fract(l9_3598);
float l9_3601=l9_3598-l9_3600;
float l9_3602=step(0.25,fract(l9_3601*0.5));
l9_3598=mix(l9_3600,1.0-l9_3600,fast::clamp(l9_3602,0.0,1.0));
}
}
l9_3582.y=l9_3598;
if (l9_3586)
{
bool l9_3603=l9_3588;
bool l9_3604;
if (l9_3603)
{
l9_3604=l9_3585.x==3;
}
else
{
l9_3604=l9_3603;
}
float l9_3605=l9_3582.x;
float l9_3606=l9_3587.x;
float l9_3607=l9_3587.z;
bool l9_3608=l9_3604;
float l9_3609=l9_3592;
float l9_3610=fast::clamp(l9_3605,l9_3606,l9_3607);
float l9_3611=step(abs(l9_3605-l9_3610),9.9999997e-06);
l9_3609*=(l9_3611+((1.0-float(l9_3608))*(1.0-l9_3611)));
l9_3605=l9_3610;
l9_3582.x=l9_3605;
l9_3592=l9_3609;
bool l9_3612=l9_3588;
bool l9_3613;
if (l9_3612)
{
l9_3613=l9_3585.y==3;
}
else
{
l9_3613=l9_3612;
}
float l9_3614=l9_3582.y;
float l9_3615=l9_3587.y;
float l9_3616=l9_3587.w;
bool l9_3617=l9_3613;
float l9_3618=l9_3592;
float l9_3619=fast::clamp(l9_3614,l9_3615,l9_3616);
float l9_3620=step(abs(l9_3614-l9_3619),9.9999997e-06);
l9_3618*=(l9_3620+((1.0-float(l9_3617))*(1.0-l9_3620)));
l9_3614=l9_3619;
l9_3582.y=l9_3614;
l9_3592=l9_3618;
}
float2 l9_3621=l9_3582;
bool l9_3622=l9_3583;
float3x3 l9_3623=l9_3584;
if (l9_3622)
{
l9_3621=float2((l9_3623*float3(l9_3621,1.0)).xy);
}
float2 l9_3624=l9_3621;
l9_3582=l9_3624;
float l9_3625=l9_3582.x;
int l9_3626=l9_3585.x;
bool l9_3627=l9_3591;
float l9_3628=l9_3592;
if ((l9_3626==0)||(l9_3626==3))
{
float l9_3629=l9_3625;
float l9_3630=0.0;
float l9_3631=1.0;
bool l9_3632=l9_3627;
float l9_3633=l9_3628;
float l9_3634=fast::clamp(l9_3629,l9_3630,l9_3631);
float l9_3635=step(abs(l9_3629-l9_3634),9.9999997e-06);
l9_3633*=(l9_3635+((1.0-float(l9_3632))*(1.0-l9_3635)));
l9_3629=l9_3634;
l9_3625=l9_3629;
l9_3628=l9_3633;
}
l9_3582.x=l9_3625;
l9_3592=l9_3628;
float l9_3636=l9_3582.y;
int l9_3637=l9_3585.y;
bool l9_3638=l9_3591;
float l9_3639=l9_3592;
if ((l9_3637==0)||(l9_3637==3))
{
float l9_3640=l9_3636;
float l9_3641=0.0;
float l9_3642=1.0;
bool l9_3643=l9_3638;
float l9_3644=l9_3639;
float l9_3645=fast::clamp(l9_3640,l9_3641,l9_3642);
float l9_3646=step(abs(l9_3640-l9_3645),9.9999997e-06);
l9_3644*=(l9_3646+((1.0-float(l9_3643))*(1.0-l9_3646)));
l9_3640=l9_3645;
l9_3636=l9_3640;
l9_3639=l9_3644;
}
l9_3582.y=l9_3636;
l9_3592=l9_3639;
float2 l9_3647=l9_3582;
int l9_3648=l9_3580;
int l9_3649=l9_3581;
float l9_3650=l9_3590;
float2 l9_3651=l9_3647;
int l9_3652=l9_3648;
int l9_3653=l9_3649;
float3 l9_3654=float3(0.0);
if (l9_3652==0)
{
l9_3654=float3(l9_3651,0.0);
}
else
{
if (l9_3652==1)
{
l9_3654=float3(l9_3651.x,(l9_3651.y*0.5)+(0.5-(float(l9_3653)*0.5)),0.0);
}
else
{
l9_3654=float3(l9_3651,float(l9_3653));
}
}
float3 l9_3655=l9_3654;
float3 l9_3656=l9_3655;
float4 l9_3657=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_3656.xy,level(l9_3650));
float4 l9_3658=l9_3657;
if (l9_3588)
{
l9_3658=mix(l9_3589,l9_3658,float4(l9_3592));
}
float4 l9_3659=l9_3658;
l9_3568=l9_3659.x;
float l9_3660=l9_3568;
float l9_3661=l9_3660;
float l9_3662=l9_2704+N319_res;
float l9_3663=0.0;
float l9_3664=(*sc_set0.UserUniforms).Tweak_N305_curveData.x;
float l9_3665=(*sc_set0.UserUniforms).Tweak_N305_curveData.y;
float l9_3666=(*sc_set0.UserUniforms).Tweak_N305_curveData.z;
float l9_3667=(l9_3662-l9_3665)/(l9_3666-l9_3665);
float2 l9_3668=float2(l9_3667,l9_3664);
l9_3668=fast::clamp(l9_3668,float2(0.0),float2(1.0));
int l9_3669;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_3670=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3670=0;
}
else
{
l9_3670=in.varStereoViewID;
}
int l9_3671=l9_3670;
l9_3669=1-l9_3671;
}
else
{
int l9_3672=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3672=0;
}
else
{
l9_3672=in.varStereoViewID;
}
int l9_3673=l9_3672;
l9_3669=l9_3673;
}
int l9_3674=l9_3669;
int l9_3675=sc_CurveAtlasLayout_tmp;
int l9_3676=l9_3674;
float2 l9_3677=l9_3668;
bool l9_3678=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_3679=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_3680=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_3681=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_3682=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_3683=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_3684=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_3685=0.0;
bool l9_3686=l9_3683&&(!l9_3681);
float l9_3687=1.0;
float l9_3688=l9_3677.x;
int l9_3689=l9_3680.x;
if (l9_3689==1)
{
l9_3688=fract(l9_3688);
}
else
{
if (l9_3689==2)
{
float l9_3690=fract(l9_3688);
float l9_3691=l9_3688-l9_3690;
float l9_3692=step(0.25,fract(l9_3691*0.5));
l9_3688=mix(l9_3690,1.0-l9_3690,fast::clamp(l9_3692,0.0,1.0));
}
}
l9_3677.x=l9_3688;
float l9_3693=l9_3677.y;
int l9_3694=l9_3680.y;
if (l9_3694==1)
{
l9_3693=fract(l9_3693);
}
else
{
if (l9_3694==2)
{
float l9_3695=fract(l9_3693);
float l9_3696=l9_3693-l9_3695;
float l9_3697=step(0.25,fract(l9_3696*0.5));
l9_3693=mix(l9_3695,1.0-l9_3695,fast::clamp(l9_3697,0.0,1.0));
}
}
l9_3677.y=l9_3693;
if (l9_3681)
{
bool l9_3698=l9_3683;
bool l9_3699;
if (l9_3698)
{
l9_3699=l9_3680.x==3;
}
else
{
l9_3699=l9_3698;
}
float l9_3700=l9_3677.x;
float l9_3701=l9_3682.x;
float l9_3702=l9_3682.z;
bool l9_3703=l9_3699;
float l9_3704=l9_3687;
float l9_3705=fast::clamp(l9_3700,l9_3701,l9_3702);
float l9_3706=step(abs(l9_3700-l9_3705),9.9999997e-06);
l9_3704*=(l9_3706+((1.0-float(l9_3703))*(1.0-l9_3706)));
l9_3700=l9_3705;
l9_3677.x=l9_3700;
l9_3687=l9_3704;
bool l9_3707=l9_3683;
bool l9_3708;
if (l9_3707)
{
l9_3708=l9_3680.y==3;
}
else
{
l9_3708=l9_3707;
}
float l9_3709=l9_3677.y;
float l9_3710=l9_3682.y;
float l9_3711=l9_3682.w;
bool l9_3712=l9_3708;
float l9_3713=l9_3687;
float l9_3714=fast::clamp(l9_3709,l9_3710,l9_3711);
float l9_3715=step(abs(l9_3709-l9_3714),9.9999997e-06);
l9_3713*=(l9_3715+((1.0-float(l9_3712))*(1.0-l9_3715)));
l9_3709=l9_3714;
l9_3677.y=l9_3709;
l9_3687=l9_3713;
}
float2 l9_3716=l9_3677;
bool l9_3717=l9_3678;
float3x3 l9_3718=l9_3679;
if (l9_3717)
{
l9_3716=float2((l9_3718*float3(l9_3716,1.0)).xy);
}
float2 l9_3719=l9_3716;
l9_3677=l9_3719;
float l9_3720=l9_3677.x;
int l9_3721=l9_3680.x;
bool l9_3722=l9_3686;
float l9_3723=l9_3687;
if ((l9_3721==0)||(l9_3721==3))
{
float l9_3724=l9_3720;
float l9_3725=0.0;
float l9_3726=1.0;
bool l9_3727=l9_3722;
float l9_3728=l9_3723;
float l9_3729=fast::clamp(l9_3724,l9_3725,l9_3726);
float l9_3730=step(abs(l9_3724-l9_3729),9.9999997e-06);
l9_3728*=(l9_3730+((1.0-float(l9_3727))*(1.0-l9_3730)));
l9_3724=l9_3729;
l9_3720=l9_3724;
l9_3723=l9_3728;
}
l9_3677.x=l9_3720;
l9_3687=l9_3723;
float l9_3731=l9_3677.y;
int l9_3732=l9_3680.y;
bool l9_3733=l9_3686;
float l9_3734=l9_3687;
if ((l9_3732==0)||(l9_3732==3))
{
float l9_3735=l9_3731;
float l9_3736=0.0;
float l9_3737=1.0;
bool l9_3738=l9_3733;
float l9_3739=l9_3734;
float l9_3740=fast::clamp(l9_3735,l9_3736,l9_3737);
float l9_3741=step(abs(l9_3735-l9_3740),9.9999997e-06);
l9_3739*=(l9_3741+((1.0-float(l9_3738))*(1.0-l9_3741)));
l9_3735=l9_3740;
l9_3731=l9_3735;
l9_3734=l9_3739;
}
l9_3677.y=l9_3731;
l9_3687=l9_3734;
float2 l9_3742=l9_3677;
int l9_3743=l9_3675;
int l9_3744=l9_3676;
float l9_3745=l9_3685;
float2 l9_3746=l9_3742;
int l9_3747=l9_3743;
int l9_3748=l9_3744;
float3 l9_3749=float3(0.0);
if (l9_3747==0)
{
l9_3749=float3(l9_3746,0.0);
}
else
{
if (l9_3747==1)
{
l9_3749=float3(l9_3746.x,(l9_3746.y*0.5)+(0.5-(float(l9_3748)*0.5)),0.0);
}
else
{
l9_3749=float3(l9_3746,float(l9_3748));
}
}
float3 l9_3750=l9_3749;
float3 l9_3751=l9_3750;
float4 l9_3752=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_3751.xy,level(l9_3745));
float4 l9_3753=l9_3752;
if (l9_3683)
{
l9_3753=mix(l9_3684,l9_3753,float4(l9_3687));
}
float4 l9_3754=l9_3753;
l9_3663=l9_3754.x;
float l9_3755=l9_3663;
float l9_3756=l9_3755;
float l9_3757=l9_2704+N319_res;
float l9_3758=0.0;
float l9_3759=(*sc_set0.UserUniforms).Tweak_N297_curveData.x;
float l9_3760=(*sc_set0.UserUniforms).Tweak_N297_curveData.y;
float l9_3761=(*sc_set0.UserUniforms).Tweak_N297_curveData.z;
float l9_3762=(l9_3757-l9_3760)/(l9_3761-l9_3760);
float2 l9_3763=float2(l9_3762,l9_3759);
l9_3763=fast::clamp(l9_3763,float2(0.0),float2(1.0));
int l9_3764;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_3765=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3765=0;
}
else
{
l9_3765=in.varStereoViewID;
}
int l9_3766=l9_3765;
l9_3764=1-l9_3766;
}
else
{
int l9_3767=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3767=0;
}
else
{
l9_3767=in.varStereoViewID;
}
int l9_3768=l9_3767;
l9_3764=l9_3768;
}
int l9_3769=l9_3764;
int l9_3770=sc_CurveAtlasLayout_tmp;
int l9_3771=l9_3769;
float2 l9_3772=l9_3763;
bool l9_3773=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_3774=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_3775=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_3776=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_3777=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_3778=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_3779=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_3780=0.0;
bool l9_3781=l9_3778&&(!l9_3776);
float l9_3782=1.0;
float l9_3783=l9_3772.x;
int l9_3784=l9_3775.x;
if (l9_3784==1)
{
l9_3783=fract(l9_3783);
}
else
{
if (l9_3784==2)
{
float l9_3785=fract(l9_3783);
float l9_3786=l9_3783-l9_3785;
float l9_3787=step(0.25,fract(l9_3786*0.5));
l9_3783=mix(l9_3785,1.0-l9_3785,fast::clamp(l9_3787,0.0,1.0));
}
}
l9_3772.x=l9_3783;
float l9_3788=l9_3772.y;
int l9_3789=l9_3775.y;
if (l9_3789==1)
{
l9_3788=fract(l9_3788);
}
else
{
if (l9_3789==2)
{
float l9_3790=fract(l9_3788);
float l9_3791=l9_3788-l9_3790;
float l9_3792=step(0.25,fract(l9_3791*0.5));
l9_3788=mix(l9_3790,1.0-l9_3790,fast::clamp(l9_3792,0.0,1.0));
}
}
l9_3772.y=l9_3788;
if (l9_3776)
{
bool l9_3793=l9_3778;
bool l9_3794;
if (l9_3793)
{
l9_3794=l9_3775.x==3;
}
else
{
l9_3794=l9_3793;
}
float l9_3795=l9_3772.x;
float l9_3796=l9_3777.x;
float l9_3797=l9_3777.z;
bool l9_3798=l9_3794;
float l9_3799=l9_3782;
float l9_3800=fast::clamp(l9_3795,l9_3796,l9_3797);
float l9_3801=step(abs(l9_3795-l9_3800),9.9999997e-06);
l9_3799*=(l9_3801+((1.0-float(l9_3798))*(1.0-l9_3801)));
l9_3795=l9_3800;
l9_3772.x=l9_3795;
l9_3782=l9_3799;
bool l9_3802=l9_3778;
bool l9_3803;
if (l9_3802)
{
l9_3803=l9_3775.y==3;
}
else
{
l9_3803=l9_3802;
}
float l9_3804=l9_3772.y;
float l9_3805=l9_3777.y;
float l9_3806=l9_3777.w;
bool l9_3807=l9_3803;
float l9_3808=l9_3782;
float l9_3809=fast::clamp(l9_3804,l9_3805,l9_3806);
float l9_3810=step(abs(l9_3804-l9_3809),9.9999997e-06);
l9_3808*=(l9_3810+((1.0-float(l9_3807))*(1.0-l9_3810)));
l9_3804=l9_3809;
l9_3772.y=l9_3804;
l9_3782=l9_3808;
}
float2 l9_3811=l9_3772;
bool l9_3812=l9_3773;
float3x3 l9_3813=l9_3774;
if (l9_3812)
{
l9_3811=float2((l9_3813*float3(l9_3811,1.0)).xy);
}
float2 l9_3814=l9_3811;
l9_3772=l9_3814;
float l9_3815=l9_3772.x;
int l9_3816=l9_3775.x;
bool l9_3817=l9_3781;
float l9_3818=l9_3782;
if ((l9_3816==0)||(l9_3816==3))
{
float l9_3819=l9_3815;
float l9_3820=0.0;
float l9_3821=1.0;
bool l9_3822=l9_3817;
float l9_3823=l9_3818;
float l9_3824=fast::clamp(l9_3819,l9_3820,l9_3821);
float l9_3825=step(abs(l9_3819-l9_3824),9.9999997e-06);
l9_3823*=(l9_3825+((1.0-float(l9_3822))*(1.0-l9_3825)));
l9_3819=l9_3824;
l9_3815=l9_3819;
l9_3818=l9_3823;
}
l9_3772.x=l9_3815;
l9_3782=l9_3818;
float l9_3826=l9_3772.y;
int l9_3827=l9_3775.y;
bool l9_3828=l9_3781;
float l9_3829=l9_3782;
if ((l9_3827==0)||(l9_3827==3))
{
float l9_3830=l9_3826;
float l9_3831=0.0;
float l9_3832=1.0;
bool l9_3833=l9_3828;
float l9_3834=l9_3829;
float l9_3835=fast::clamp(l9_3830,l9_3831,l9_3832);
float l9_3836=step(abs(l9_3830-l9_3835),9.9999997e-06);
l9_3834*=(l9_3836+((1.0-float(l9_3833))*(1.0-l9_3836)));
l9_3830=l9_3835;
l9_3826=l9_3830;
l9_3829=l9_3834;
}
l9_3772.y=l9_3826;
l9_3782=l9_3829;
float2 l9_3837=l9_3772;
int l9_3838=l9_3770;
int l9_3839=l9_3771;
float l9_3840=l9_3780;
float2 l9_3841=l9_3837;
int l9_3842=l9_3838;
int l9_3843=l9_3839;
float3 l9_3844=float3(0.0);
if (l9_3842==0)
{
l9_3844=float3(l9_3841,0.0);
}
else
{
if (l9_3842==1)
{
l9_3844=float3(l9_3841.x,(l9_3841.y*0.5)+(0.5-(float(l9_3843)*0.5)),0.0);
}
else
{
l9_3844=float3(l9_3841,float(l9_3843));
}
}
float3 l9_3845=l9_3844;
float3 l9_3846=l9_3845;
float4 l9_3847=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_3846.xy,level(l9_3840));
float4 l9_3848=l9_3847;
if (l9_3778)
{
l9_3848=mix(l9_3779,l9_3848,float4(l9_3782));
}
float4 l9_3849=l9_3848;
l9_3758=l9_3849.x;
float l9_3850=l9_3758;
float3 l9_3851=float3(l9_3661,l9_3756,l9_3850);
l9_2708=normalize(l9_3851-l9_3566);
l9_2682=l9_2705;
l9_2683=l9_2706;
l9_2684=l9_2707;
l9_2685=l9_2708;
float l9_3852=l9_2689;
float l9_3853=0.0;
float l9_3854=(*sc_set0.UserUniforms).Tweak_N299_curveData.x;
float l9_3855=(*sc_set0.UserUniforms).Tweak_N299_curveData.y;
float l9_3856=(*sc_set0.UserUniforms).Tweak_N299_curveData.z;
float l9_3857=(l9_3852-l9_3855)/(l9_3856-l9_3855);
float2 l9_3858=float2(l9_3857,l9_3854);
l9_3858=fast::clamp(l9_3858,float2(0.0),float2(1.0));
int l9_3859;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_3860=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3860=0;
}
else
{
l9_3860=in.varStereoViewID;
}
int l9_3861=l9_3860;
l9_3859=1-l9_3861;
}
else
{
int l9_3862=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3862=0;
}
else
{
l9_3862=in.varStereoViewID;
}
int l9_3863=l9_3862;
l9_3859=l9_3863;
}
int l9_3864=l9_3859;
int l9_3865=sc_CurveAtlasLayout_tmp;
int l9_3866=l9_3864;
float2 l9_3867=l9_3858;
bool l9_3868=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_3869=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_3870=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_3871=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_3872=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_3873=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_3874=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_3875=0.0;
bool l9_3876=l9_3873&&(!l9_3871);
float l9_3877=1.0;
float l9_3878=l9_3867.x;
int l9_3879=l9_3870.x;
if (l9_3879==1)
{
l9_3878=fract(l9_3878);
}
else
{
if (l9_3879==2)
{
float l9_3880=fract(l9_3878);
float l9_3881=l9_3878-l9_3880;
float l9_3882=step(0.25,fract(l9_3881*0.5));
l9_3878=mix(l9_3880,1.0-l9_3880,fast::clamp(l9_3882,0.0,1.0));
}
}
l9_3867.x=l9_3878;
float l9_3883=l9_3867.y;
int l9_3884=l9_3870.y;
if (l9_3884==1)
{
l9_3883=fract(l9_3883);
}
else
{
if (l9_3884==2)
{
float l9_3885=fract(l9_3883);
float l9_3886=l9_3883-l9_3885;
float l9_3887=step(0.25,fract(l9_3886*0.5));
l9_3883=mix(l9_3885,1.0-l9_3885,fast::clamp(l9_3887,0.0,1.0));
}
}
l9_3867.y=l9_3883;
if (l9_3871)
{
bool l9_3888=l9_3873;
bool l9_3889;
if (l9_3888)
{
l9_3889=l9_3870.x==3;
}
else
{
l9_3889=l9_3888;
}
float l9_3890=l9_3867.x;
float l9_3891=l9_3872.x;
float l9_3892=l9_3872.z;
bool l9_3893=l9_3889;
float l9_3894=l9_3877;
float l9_3895=fast::clamp(l9_3890,l9_3891,l9_3892);
float l9_3896=step(abs(l9_3890-l9_3895),9.9999997e-06);
l9_3894*=(l9_3896+((1.0-float(l9_3893))*(1.0-l9_3896)));
l9_3890=l9_3895;
l9_3867.x=l9_3890;
l9_3877=l9_3894;
bool l9_3897=l9_3873;
bool l9_3898;
if (l9_3897)
{
l9_3898=l9_3870.y==3;
}
else
{
l9_3898=l9_3897;
}
float l9_3899=l9_3867.y;
float l9_3900=l9_3872.y;
float l9_3901=l9_3872.w;
bool l9_3902=l9_3898;
float l9_3903=l9_3877;
float l9_3904=fast::clamp(l9_3899,l9_3900,l9_3901);
float l9_3905=step(abs(l9_3899-l9_3904),9.9999997e-06);
l9_3903*=(l9_3905+((1.0-float(l9_3902))*(1.0-l9_3905)));
l9_3899=l9_3904;
l9_3867.y=l9_3899;
l9_3877=l9_3903;
}
float2 l9_3906=l9_3867;
bool l9_3907=l9_3868;
float3x3 l9_3908=l9_3869;
if (l9_3907)
{
l9_3906=float2((l9_3908*float3(l9_3906,1.0)).xy);
}
float2 l9_3909=l9_3906;
l9_3867=l9_3909;
float l9_3910=l9_3867.x;
int l9_3911=l9_3870.x;
bool l9_3912=l9_3876;
float l9_3913=l9_3877;
if ((l9_3911==0)||(l9_3911==3))
{
float l9_3914=l9_3910;
float l9_3915=0.0;
float l9_3916=1.0;
bool l9_3917=l9_3912;
float l9_3918=l9_3913;
float l9_3919=fast::clamp(l9_3914,l9_3915,l9_3916);
float l9_3920=step(abs(l9_3914-l9_3919),9.9999997e-06);
l9_3918*=(l9_3920+((1.0-float(l9_3917))*(1.0-l9_3920)));
l9_3914=l9_3919;
l9_3910=l9_3914;
l9_3913=l9_3918;
}
l9_3867.x=l9_3910;
l9_3877=l9_3913;
float l9_3921=l9_3867.y;
int l9_3922=l9_3870.y;
bool l9_3923=l9_3876;
float l9_3924=l9_3877;
if ((l9_3922==0)||(l9_3922==3))
{
float l9_3925=l9_3921;
float l9_3926=0.0;
float l9_3927=1.0;
bool l9_3928=l9_3923;
float l9_3929=l9_3924;
float l9_3930=fast::clamp(l9_3925,l9_3926,l9_3927);
float l9_3931=step(abs(l9_3925-l9_3930),9.9999997e-06);
l9_3929*=(l9_3931+((1.0-float(l9_3928))*(1.0-l9_3931)));
l9_3925=l9_3930;
l9_3921=l9_3925;
l9_3924=l9_3929;
}
l9_3867.y=l9_3921;
l9_3877=l9_3924;
float2 l9_3932=l9_3867;
int l9_3933=l9_3865;
int l9_3934=l9_3866;
float l9_3935=l9_3875;
float2 l9_3936=l9_3932;
int l9_3937=l9_3933;
int l9_3938=l9_3934;
float3 l9_3939=float3(0.0);
if (l9_3937==0)
{
l9_3939=float3(l9_3936,0.0);
}
else
{
if (l9_3937==1)
{
l9_3939=float3(l9_3936.x,(l9_3936.y*0.5)+(0.5-(float(l9_3938)*0.5)),0.0);
}
else
{
l9_3939=float3(l9_3936,float(l9_3938));
}
}
float3 l9_3940=l9_3939;
float3 l9_3941=l9_3940;
float4 l9_3942=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_3941.xy,level(l9_3935));
float4 l9_3943=l9_3942;
if (l9_3873)
{
l9_3943=mix(l9_3874,l9_3943,float4(l9_3877));
}
float4 l9_3944=l9_3943;
l9_3853=l9_3944.x;
float l9_3945=l9_3853;
float l9_3946=l9_3945;
float l9_3947;
if (N319_curvThickEnable)
{
l9_3947=N319_thicknessRad*l9_3946;
}
else
{
l9_3947=N319_thicknessRad;
}
float l9_3948=l9_3947;
float l9_3949=l9_2689;
float l9_3950=0.0;
float l9_3951=(*sc_set0.UserUniforms).Tweak_N293_curveData.x;
float l9_3952=(*sc_set0.UserUniforms).Tweak_N293_curveData.y;
float l9_3953=(*sc_set0.UserUniforms).Tweak_N293_curveData.z;
float l9_3954=(l9_3949-l9_3952)/(l9_3953-l9_3952);
float2 l9_3955=float2(l9_3954,l9_3951);
l9_3955=fast::clamp(l9_3955,float2(0.0),float2(1.0));
int l9_3956;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_3957=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3957=0;
}
else
{
l9_3957=in.varStereoViewID;
}
int l9_3958=l9_3957;
l9_3956=1-l9_3958;
}
else
{
int l9_3959=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3959=0;
}
else
{
l9_3959=in.varStereoViewID;
}
int l9_3960=l9_3959;
l9_3956=l9_3960;
}
int l9_3961=l9_3956;
int l9_3962=sc_CurveAtlasLayout_tmp;
int l9_3963=l9_3961;
float2 l9_3964=l9_3955;
bool l9_3965=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_3966=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_3967=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_3968=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_3969=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_3970=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_3971=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_3972=0.0;
bool l9_3973=l9_3970&&(!l9_3968);
float l9_3974=1.0;
float l9_3975=l9_3964.x;
int l9_3976=l9_3967.x;
if (l9_3976==1)
{
l9_3975=fract(l9_3975);
}
else
{
if (l9_3976==2)
{
float l9_3977=fract(l9_3975);
float l9_3978=l9_3975-l9_3977;
float l9_3979=step(0.25,fract(l9_3978*0.5));
l9_3975=mix(l9_3977,1.0-l9_3977,fast::clamp(l9_3979,0.0,1.0));
}
}
l9_3964.x=l9_3975;
float l9_3980=l9_3964.y;
int l9_3981=l9_3967.y;
if (l9_3981==1)
{
l9_3980=fract(l9_3980);
}
else
{
if (l9_3981==2)
{
float l9_3982=fract(l9_3980);
float l9_3983=l9_3980-l9_3982;
float l9_3984=step(0.25,fract(l9_3983*0.5));
l9_3980=mix(l9_3982,1.0-l9_3982,fast::clamp(l9_3984,0.0,1.0));
}
}
l9_3964.y=l9_3980;
if (l9_3968)
{
bool l9_3985=l9_3970;
bool l9_3986;
if (l9_3985)
{
l9_3986=l9_3967.x==3;
}
else
{
l9_3986=l9_3985;
}
float l9_3987=l9_3964.x;
float l9_3988=l9_3969.x;
float l9_3989=l9_3969.z;
bool l9_3990=l9_3986;
float l9_3991=l9_3974;
float l9_3992=fast::clamp(l9_3987,l9_3988,l9_3989);
float l9_3993=step(abs(l9_3987-l9_3992),9.9999997e-06);
l9_3991*=(l9_3993+((1.0-float(l9_3990))*(1.0-l9_3993)));
l9_3987=l9_3992;
l9_3964.x=l9_3987;
l9_3974=l9_3991;
bool l9_3994=l9_3970;
bool l9_3995;
if (l9_3994)
{
l9_3995=l9_3967.y==3;
}
else
{
l9_3995=l9_3994;
}
float l9_3996=l9_3964.y;
float l9_3997=l9_3969.y;
float l9_3998=l9_3969.w;
bool l9_3999=l9_3995;
float l9_4000=l9_3974;
float l9_4001=fast::clamp(l9_3996,l9_3997,l9_3998);
float l9_4002=step(abs(l9_3996-l9_4001),9.9999997e-06);
l9_4000*=(l9_4002+((1.0-float(l9_3999))*(1.0-l9_4002)));
l9_3996=l9_4001;
l9_3964.y=l9_3996;
l9_3974=l9_4000;
}
float2 l9_4003=l9_3964;
bool l9_4004=l9_3965;
float3x3 l9_4005=l9_3966;
if (l9_4004)
{
l9_4003=float2((l9_4005*float3(l9_4003,1.0)).xy);
}
float2 l9_4006=l9_4003;
l9_3964=l9_4006;
float l9_4007=l9_3964.x;
int l9_4008=l9_3967.x;
bool l9_4009=l9_3973;
float l9_4010=l9_3974;
if ((l9_4008==0)||(l9_4008==3))
{
float l9_4011=l9_4007;
float l9_4012=0.0;
float l9_4013=1.0;
bool l9_4014=l9_4009;
float l9_4015=l9_4010;
float l9_4016=fast::clamp(l9_4011,l9_4012,l9_4013);
float l9_4017=step(abs(l9_4011-l9_4016),9.9999997e-06);
l9_4015*=(l9_4017+((1.0-float(l9_4014))*(1.0-l9_4017)));
l9_4011=l9_4016;
l9_4007=l9_4011;
l9_4010=l9_4015;
}
l9_3964.x=l9_4007;
l9_3974=l9_4010;
float l9_4018=l9_3964.y;
int l9_4019=l9_3967.y;
bool l9_4020=l9_3973;
float l9_4021=l9_3974;
if ((l9_4019==0)||(l9_4019==3))
{
float l9_4022=l9_4018;
float l9_4023=0.0;
float l9_4024=1.0;
bool l9_4025=l9_4020;
float l9_4026=l9_4021;
float l9_4027=fast::clamp(l9_4022,l9_4023,l9_4024);
float l9_4028=step(abs(l9_4022-l9_4027),9.9999997e-06);
l9_4026*=(l9_4028+((1.0-float(l9_4025))*(1.0-l9_4028)));
l9_4022=l9_4027;
l9_4018=l9_4022;
l9_4021=l9_4026;
}
l9_3964.y=l9_4018;
l9_3974=l9_4021;
float2 l9_4029=l9_3964;
int l9_4030=l9_3962;
int l9_4031=l9_3963;
float l9_4032=l9_3972;
float2 l9_4033=l9_4029;
int l9_4034=l9_4030;
int l9_4035=l9_4031;
float3 l9_4036=float3(0.0);
if (l9_4034==0)
{
l9_4036=float3(l9_4033,0.0);
}
else
{
if (l9_4034==1)
{
l9_4036=float3(l9_4033.x,(l9_4033.y*0.5)+(0.5-(float(l9_4035)*0.5)),0.0);
}
else
{
l9_4036=float3(l9_4033,float(l9_4035));
}
}
float3 l9_4037=l9_4036;
float3 l9_4038=l9_4037;
float4 l9_4039=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_4038.xy,level(l9_4032));
float4 l9_4040=l9_4039;
if (l9_3970)
{
l9_4040=mix(l9_3971,l9_4040,float4(l9_3974));
}
float4 l9_4041=l9_4040;
l9_3950=l9_4041.x;
float l9_4042=l9_3950;
float l9_4043=l9_4042;
float l9_4044=l9_2689;
float l9_4045=0.0;
float l9_4046=(*sc_set0.UserUniforms).Tweak_N305_curveData.x;
float l9_4047=(*sc_set0.UserUniforms).Tweak_N305_curveData.y;
float l9_4048=(*sc_set0.UserUniforms).Tweak_N305_curveData.z;
float l9_4049=(l9_4044-l9_4047)/(l9_4048-l9_4047);
float2 l9_4050=float2(l9_4049,l9_4046);
l9_4050=fast::clamp(l9_4050,float2(0.0),float2(1.0));
int l9_4051;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_4052=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_4052=0;
}
else
{
l9_4052=in.varStereoViewID;
}
int l9_4053=l9_4052;
l9_4051=1-l9_4053;
}
else
{
int l9_4054=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_4054=0;
}
else
{
l9_4054=in.varStereoViewID;
}
int l9_4055=l9_4054;
l9_4051=l9_4055;
}
int l9_4056=l9_4051;
int l9_4057=sc_CurveAtlasLayout_tmp;
int l9_4058=l9_4056;
float2 l9_4059=l9_4050;
bool l9_4060=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_4061=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_4062=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_4063=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_4064=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_4065=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_4066=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_4067=0.0;
bool l9_4068=l9_4065&&(!l9_4063);
float l9_4069=1.0;
float l9_4070=l9_4059.x;
int l9_4071=l9_4062.x;
if (l9_4071==1)
{
l9_4070=fract(l9_4070);
}
else
{
if (l9_4071==2)
{
float l9_4072=fract(l9_4070);
float l9_4073=l9_4070-l9_4072;
float l9_4074=step(0.25,fract(l9_4073*0.5));
l9_4070=mix(l9_4072,1.0-l9_4072,fast::clamp(l9_4074,0.0,1.0));
}
}
l9_4059.x=l9_4070;
float l9_4075=l9_4059.y;
int l9_4076=l9_4062.y;
if (l9_4076==1)
{
l9_4075=fract(l9_4075);
}
else
{
if (l9_4076==2)
{
float l9_4077=fract(l9_4075);
float l9_4078=l9_4075-l9_4077;
float l9_4079=step(0.25,fract(l9_4078*0.5));
l9_4075=mix(l9_4077,1.0-l9_4077,fast::clamp(l9_4079,0.0,1.0));
}
}
l9_4059.y=l9_4075;
if (l9_4063)
{
bool l9_4080=l9_4065;
bool l9_4081;
if (l9_4080)
{
l9_4081=l9_4062.x==3;
}
else
{
l9_4081=l9_4080;
}
float l9_4082=l9_4059.x;
float l9_4083=l9_4064.x;
float l9_4084=l9_4064.z;
bool l9_4085=l9_4081;
float l9_4086=l9_4069;
float l9_4087=fast::clamp(l9_4082,l9_4083,l9_4084);
float l9_4088=step(abs(l9_4082-l9_4087),9.9999997e-06);
l9_4086*=(l9_4088+((1.0-float(l9_4085))*(1.0-l9_4088)));
l9_4082=l9_4087;
l9_4059.x=l9_4082;
l9_4069=l9_4086;
bool l9_4089=l9_4065;
bool l9_4090;
if (l9_4089)
{
l9_4090=l9_4062.y==3;
}
else
{
l9_4090=l9_4089;
}
float l9_4091=l9_4059.y;
float l9_4092=l9_4064.y;
float l9_4093=l9_4064.w;
bool l9_4094=l9_4090;
float l9_4095=l9_4069;
float l9_4096=fast::clamp(l9_4091,l9_4092,l9_4093);
float l9_4097=step(abs(l9_4091-l9_4096),9.9999997e-06);
l9_4095*=(l9_4097+((1.0-float(l9_4094))*(1.0-l9_4097)));
l9_4091=l9_4096;
l9_4059.y=l9_4091;
l9_4069=l9_4095;
}
float2 l9_4098=l9_4059;
bool l9_4099=l9_4060;
float3x3 l9_4100=l9_4061;
if (l9_4099)
{
l9_4098=float2((l9_4100*float3(l9_4098,1.0)).xy);
}
float2 l9_4101=l9_4098;
l9_4059=l9_4101;
float l9_4102=l9_4059.x;
int l9_4103=l9_4062.x;
bool l9_4104=l9_4068;
float l9_4105=l9_4069;
if ((l9_4103==0)||(l9_4103==3))
{
float l9_4106=l9_4102;
float l9_4107=0.0;
float l9_4108=1.0;
bool l9_4109=l9_4104;
float l9_4110=l9_4105;
float l9_4111=fast::clamp(l9_4106,l9_4107,l9_4108);
float l9_4112=step(abs(l9_4106-l9_4111),9.9999997e-06);
l9_4110*=(l9_4112+((1.0-float(l9_4109))*(1.0-l9_4112)));
l9_4106=l9_4111;
l9_4102=l9_4106;
l9_4105=l9_4110;
}
l9_4059.x=l9_4102;
l9_4069=l9_4105;
float l9_4113=l9_4059.y;
int l9_4114=l9_4062.y;
bool l9_4115=l9_4068;
float l9_4116=l9_4069;
if ((l9_4114==0)||(l9_4114==3))
{
float l9_4117=l9_4113;
float l9_4118=0.0;
float l9_4119=1.0;
bool l9_4120=l9_4115;
float l9_4121=l9_4116;
float l9_4122=fast::clamp(l9_4117,l9_4118,l9_4119);
float l9_4123=step(abs(l9_4117-l9_4122),9.9999997e-06);
l9_4121*=(l9_4123+((1.0-float(l9_4120))*(1.0-l9_4123)));
l9_4117=l9_4122;
l9_4113=l9_4117;
l9_4116=l9_4121;
}
l9_4059.y=l9_4113;
l9_4069=l9_4116;
float2 l9_4124=l9_4059;
int l9_4125=l9_4057;
int l9_4126=l9_4058;
float l9_4127=l9_4067;
float2 l9_4128=l9_4124;
int l9_4129=l9_4125;
int l9_4130=l9_4126;
float3 l9_4131=float3(0.0);
if (l9_4129==0)
{
l9_4131=float3(l9_4128,0.0);
}
else
{
if (l9_4129==1)
{
l9_4131=float3(l9_4128.x,(l9_4128.y*0.5)+(0.5-(float(l9_4130)*0.5)),0.0);
}
else
{
l9_4131=float3(l9_4128,float(l9_4130));
}
}
float3 l9_4132=l9_4131;
float3 l9_4133=l9_4132;
float4 l9_4134=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_4133.xy,level(l9_4127));
float4 l9_4135=l9_4134;
if (l9_4065)
{
l9_4135=mix(l9_4066,l9_4135,float4(l9_4069));
}
float4 l9_4136=l9_4135;
l9_4045=l9_4136.x;
float l9_4137=l9_4045;
float l9_4138=l9_4137;
float l9_4139=l9_2689;
float l9_4140=0.0;
float l9_4141=(*sc_set0.UserUniforms).Tweak_N297_curveData.x;
float l9_4142=(*sc_set0.UserUniforms).Tweak_N297_curveData.y;
float l9_4143=(*sc_set0.UserUniforms).Tweak_N297_curveData.z;
float l9_4144=(l9_4139-l9_4142)/(l9_4143-l9_4142);
float2 l9_4145=float2(l9_4144,l9_4141);
l9_4145=fast::clamp(l9_4145,float2(0.0),float2(1.0));
int l9_4146;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_4147=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_4147=0;
}
else
{
l9_4147=in.varStereoViewID;
}
int l9_4148=l9_4147;
l9_4146=1-l9_4148;
}
else
{
int l9_4149=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_4149=0;
}
else
{
l9_4149=in.varStereoViewID;
}
int l9_4150=l9_4149;
l9_4146=l9_4150;
}
int l9_4151=l9_4146;
int l9_4152=sc_CurveAtlasLayout_tmp;
int l9_4153=l9_4151;
float2 l9_4154=l9_4145;
bool l9_4155=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_4156=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_4157=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_4158=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_4159=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_4160=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_4161=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_4162=0.0;
bool l9_4163=l9_4160&&(!l9_4158);
float l9_4164=1.0;
float l9_4165=l9_4154.x;
int l9_4166=l9_4157.x;
if (l9_4166==1)
{
l9_4165=fract(l9_4165);
}
else
{
if (l9_4166==2)
{
float l9_4167=fract(l9_4165);
float l9_4168=l9_4165-l9_4167;
float l9_4169=step(0.25,fract(l9_4168*0.5));
l9_4165=mix(l9_4167,1.0-l9_4167,fast::clamp(l9_4169,0.0,1.0));
}
}
l9_4154.x=l9_4165;
float l9_4170=l9_4154.y;
int l9_4171=l9_4157.y;
if (l9_4171==1)
{
l9_4170=fract(l9_4170);
}
else
{
if (l9_4171==2)
{
float l9_4172=fract(l9_4170);
float l9_4173=l9_4170-l9_4172;
float l9_4174=step(0.25,fract(l9_4173*0.5));
l9_4170=mix(l9_4172,1.0-l9_4172,fast::clamp(l9_4174,0.0,1.0));
}
}
l9_4154.y=l9_4170;
if (l9_4158)
{
bool l9_4175=l9_4160;
bool l9_4176;
if (l9_4175)
{
l9_4176=l9_4157.x==3;
}
else
{
l9_4176=l9_4175;
}
float l9_4177=l9_4154.x;
float l9_4178=l9_4159.x;
float l9_4179=l9_4159.z;
bool l9_4180=l9_4176;
float l9_4181=l9_4164;
float l9_4182=fast::clamp(l9_4177,l9_4178,l9_4179);
float l9_4183=step(abs(l9_4177-l9_4182),9.9999997e-06);
l9_4181*=(l9_4183+((1.0-float(l9_4180))*(1.0-l9_4183)));
l9_4177=l9_4182;
l9_4154.x=l9_4177;
l9_4164=l9_4181;
bool l9_4184=l9_4160;
bool l9_4185;
if (l9_4184)
{
l9_4185=l9_4157.y==3;
}
else
{
l9_4185=l9_4184;
}
float l9_4186=l9_4154.y;
float l9_4187=l9_4159.y;
float l9_4188=l9_4159.w;
bool l9_4189=l9_4185;
float l9_4190=l9_4164;
float l9_4191=fast::clamp(l9_4186,l9_4187,l9_4188);
float l9_4192=step(abs(l9_4186-l9_4191),9.9999997e-06);
l9_4190*=(l9_4192+((1.0-float(l9_4189))*(1.0-l9_4192)));
l9_4186=l9_4191;
l9_4154.y=l9_4186;
l9_4164=l9_4190;
}
float2 l9_4193=l9_4154;
bool l9_4194=l9_4155;
float3x3 l9_4195=l9_4156;
if (l9_4194)
{
l9_4193=float2((l9_4195*float3(l9_4193,1.0)).xy);
}
float2 l9_4196=l9_4193;
l9_4154=l9_4196;
float l9_4197=l9_4154.x;
int l9_4198=l9_4157.x;
bool l9_4199=l9_4163;
float l9_4200=l9_4164;
if ((l9_4198==0)||(l9_4198==3))
{
float l9_4201=l9_4197;
float l9_4202=0.0;
float l9_4203=1.0;
bool l9_4204=l9_4199;
float l9_4205=l9_4200;
float l9_4206=fast::clamp(l9_4201,l9_4202,l9_4203);
float l9_4207=step(abs(l9_4201-l9_4206),9.9999997e-06);
l9_4205*=(l9_4207+((1.0-float(l9_4204))*(1.0-l9_4207)));
l9_4201=l9_4206;
l9_4197=l9_4201;
l9_4200=l9_4205;
}
l9_4154.x=l9_4197;
l9_4164=l9_4200;
float l9_4208=l9_4154.y;
int l9_4209=l9_4157.y;
bool l9_4210=l9_4163;
float l9_4211=l9_4164;
if ((l9_4209==0)||(l9_4209==3))
{
float l9_4212=l9_4208;
float l9_4213=0.0;
float l9_4214=1.0;
bool l9_4215=l9_4210;
float l9_4216=l9_4211;
float l9_4217=fast::clamp(l9_4212,l9_4213,l9_4214);
float l9_4218=step(abs(l9_4212-l9_4217),9.9999997e-06);
l9_4216*=(l9_4218+((1.0-float(l9_4215))*(1.0-l9_4218)));
l9_4212=l9_4217;
l9_4208=l9_4212;
l9_4211=l9_4216;
}
l9_4154.y=l9_4208;
l9_4164=l9_4211;
float2 l9_4219=l9_4154;
int l9_4220=l9_4152;
int l9_4221=l9_4153;
float l9_4222=l9_4162;
float2 l9_4223=l9_4219;
int l9_4224=l9_4220;
int l9_4225=l9_4221;
float3 l9_4226=float3(0.0);
if (l9_4224==0)
{
l9_4226=float3(l9_4223,0.0);
}
else
{
if (l9_4224==1)
{
l9_4226=float3(l9_4223.x,(l9_4223.y*0.5)+(0.5-(float(l9_4225)*0.5)),0.0);
}
else
{
l9_4226=float3(l9_4223,float(l9_4225));
}
}
float3 l9_4227=l9_4226;
float3 l9_4228=l9_4227;
float4 l9_4229=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_4228.xy,level(l9_4222));
float4 l9_4230=l9_4229;
if (l9_4160)
{
l9_4230=mix(l9_4161,l9_4230,float4(l9_4164));
}
float4 l9_4231=l9_4230;
l9_4140=l9_4231.x;
float l9_4232=l9_4140;
float3 l9_4233=float3(l9_4043,l9_4138,l9_4232)*N319_scaleXYZ;
float3 l9_4234=mix(l9_4233+(((l9_2683*cos(l9_2692))+(l9_2684*sin(l9_2692)))*l9_3948),l9_4233,float3(l9_2703*N319_VolumeFill));
float3 l9_4235;
if (l9_2689>1.0)
{
l9_4235=l9_4234/float3(0.0);
}
else
{
l9_4235=l9_4234;
}
l9_4234=l9_4235;
tempGlobals.N319_curveDirection=l9_2685;
N319_Result=l9_4234*N319_Scale;
l9_2681=N319_Result;
l9_2668=l9_2681;
l9_2030=l9_2668;
l9_2034=l9_2030;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==7)
{
float l9_4236=0.0;
float l9_4237=float((*sc_set0.UserUniforms).Tweak_N271);
l9_4236=l9_4237;
float l9_4238=0.0;
float l9_4239=(*sc_set0.UserUniforms).Tweak_N273;
l9_4238=l9_4239;
float2 l9_4240=float2(0.0);
float2 l9_4241=(*sc_set0.UserUniforms).Tweak_N270;
l9_4240=l9_4241;
float2 l9_4242=float2(0.0);
float2 l9_4243=(*sc_set0.UserUniforms).Tweak_N272;
l9_4242=l9_4243;
float l9_4244=0.0;
float l9_4245=(*sc_set0.UserUniforms).Tweak_N269;
l9_4244=l9_4245;
float l9_4246=0.0;
float l9_4247=(*sc_set0.UserUniforms).Tweak_N275;
l9_4246=l9_4247;
float l9_4248=0.0;
float l9_4249=float((*sc_set0.UserUniforms).Tweak_N161);
l9_4248=l9_4249;
float3 l9_4250=float3(0.0);
float l9_4251=l9_4236;
float l9_4252=l9_4238;
float2 l9_4253=l9_4240;
float2 l9_4254=l9_4242;
float l9_4255=l9_4244;
float l9_4256=l9_4246;
float l9_4257=l9_4248;
ssGlobals l9_4258=l9_2033;
tempGlobals=l9_4258;
float3 l9_4259=float3(0.0);
N267_Seed=int(l9_4251);
N267_Depth=l9_4252;
N267_Expand=l9_4253;
N267_Offset=l9_4254;
N267_Thickness=l9_4255;
N267_Push=l9_4256;
N267_pushMetod=int(l9_4257);
int l9_4260=0;
l9_4260=int(tempGlobals.gInstanceID+0.5);
int l9_4261=l9_4260;
float l9_4262=float(l9_4261+N267_Seed);
int l9_4263=int(l9_4262);
int l9_4264=l9_4263^(l9_4263*15299);
int l9_4265=l9_4264;
int l9_4266=l9_4265;
int l9_4267=((l9_4266*((l9_4266*1471343)+101146501))+1559861749)&2147483647;
int l9_4268=l9_4267;
int l9_4269=l9_4265*1399;
int l9_4270=((l9_4269*((l9_4269*1471343)+101146501))+1559861749)&2147483647;
int l9_4271=l9_4270;
int l9_4272=l9_4268;
float l9_4273=float(l9_4272)*4.6566129e-10;
int l9_4274=l9_4271;
float l9_4275=float(l9_4274)*4.6566129e-10;
float2 l9_4276=float2(l9_4273,l9_4275);
float2 l9_4277=l9_4276;
float2 l9_4278=l9_4277;
int l9_4279=0;
l9_4279=int(tempGlobals.gInstanceID+0.5);
int l9_4280=l9_4279;
float l9_4281=float(l9_4280);
int l9_4282=int(l9_4281);
int l9_4283=l9_4282^(l9_4282*15299);
int l9_4284=l9_4283;
int l9_4285=l9_4284;
int l9_4286=((l9_4285*((l9_4285*1471343)+101146501))+1559861749)&2147483647;
int l9_4287=l9_4286;
float l9_4288=float(l9_4287)*4.6566129e-10;
float l9_4289=l9_4288;
float l9_4290=l9_4289;
float l9_4291=l9_4290;
float2 l9_4292=(float2(0.5)-l9_4278)+N267_Offset;
float2 l9_4293=fast::clamp(normalize(l9_4292),float2(-0.5),float2(0.5));
float l9_4294=distance(l9_4292,float2(0.0));
float l9_4295=0.0+(((l9_4294-(N267_Push-0.1))*1.0)/((N267_Push-(N267_Push-0.1))+1e-06));
if (N267_pushMetod==1)
{
l9_4292=mix(l9_4293,l9_4292,float2(fast::clamp(l9_4295,0.0,1.0)));
}
else
{
if (N267_pushMetod==2)
{
l9_4292=mix(l9_4292,l9_4293,float2(N267_Push));
}
}
float l9_4296=(*sc_set0.UserUniforms).sc_Camera.aspect;
l9_4292.x*=l9_4296;
float l9_4297=tempGlobals.CameraFOV;
l9_4292*=(tan(radians(l9_4297)*0.5)*2.0);
float l9_4298=(N267_Depth*((l9_4291-0.5)*2.0))*N267_Thickness;
l9_4292*=(N267_Depth+l9_4298);
float3 l9_4299=float3(l9_4292*N267_Expand,(N267_Depth+l9_4298)*(-1.0));
N267_Result=l9_4299;
l9_4259=N267_Result;
l9_4250=l9_4259;
l9_2031=l9_4250;
l9_2034=l9_2031;
}
else
{
l9_2034=l9_2032;
}
}
}
}
}
}
}
}
l9_2023=l9_2034;
l9_2022=l9_2023;
float3 l9_4300=l9_2022;
N111_spawnLocation=l9_4300;
float3 l9_4301=float3(0.0);
float3 l9_4302=float3(0.0);
float3 l9_4303=(*sc_set0.UserUniforms).spawnBox;
l9_4302=l9_4303;
l9_4301=l9_4302;
float3 l9_4304=l9_4301;
N111_spawnBox=l9_4304;
float3 l9_4305=float3(0.0);
float3 l9_4306=float3(0.0);
float3 l9_4307=(*sc_set0.UserUniforms).spawnSphere;
l9_4306=l9_4307;
l9_4305=l9_4306;
float3 l9_4308=l9_4305;
N111_spawnSphere=l9_4308;
float3 l9_4309=float3(0.0);
float3 l9_4310=float3(0.0);
float3 l9_4311=(*sc_set0.UserUniforms).noiseMult;
l9_4310=l9_4311;
l9_4309=l9_4310;
float3 l9_4312=l9_4309;
N111_noiseMult=l9_4312;
float3 l9_4313=float3(0.0);
float3 l9_4314=float3(0.0);
float3 l9_4315=(*sc_set0.UserUniforms).noiseFrequency;
l9_4314=l9_4315;
l9_4313=l9_4314;
float3 l9_4316=l9_4313;
N111_noiseFrequency=l9_4316;
float3 l9_4317=float3(0.0);
float3 l9_4318=float3(0.0);
float3 l9_4319=(*sc_set0.UserUniforms).sNoiseMult;
l9_4318=l9_4319;
l9_4317=l9_4318;
float3 l9_4320=l9_4317;
N111_sNoiseMult=l9_4320;
float3 l9_4321=float3(0.0);
float3 l9_4322=float3(0.0);
float3 l9_4323=(*sc_set0.UserUniforms).sNoiseFrequency;
l9_4322=l9_4323;
l9_4321=l9_4322;
float3 l9_4324=l9_4321;
N111_sNoiseFrequency=l9_4324;
float3 l9_4325=float3(0.0);
float3 l9_4326=float3(0.0);
float3 l9_4327=(*sc_set0.UserUniforms).velocityMin;
l9_4326=l9_4327;
l9_4325=l9_4326;
float3 l9_4328=l9_4325;
N111_velocityMin=l9_4328;
float3 l9_4329=float3(0.0);
float3 l9_4330=float3(0.0);
float3 l9_4331=(*sc_set0.UserUniforms).velocityMax;
l9_4330=l9_4331;
l9_4329=l9_4330;
float3 l9_4332=l9_4329;
N111_velocityMax=l9_4332;
float3 l9_4333=float3(0.0);
float3 l9_4334=float3(0.0);
float3 l9_4335=(*sc_set0.UserUniforms).velocityDrag;
l9_4334=l9_4335;
l9_4333=l9_4334;
float3 l9_4336=l9_4333;
N111_velocityDrag=l9_4336;
float2 l9_4337=float2(0.0);
float2 l9_4338=float2(0.0);
float2 l9_4339=(*sc_set0.UserUniforms).sizeStart;
l9_4338=l9_4339;
l9_4337=l9_4338;
float2 l9_4340=l9_4337;
N111_sizeStart=l9_4340;
float2 l9_4341=float2(0.0);
float2 l9_4342=float2(0.0);
float2 l9_4343=(*sc_set0.UserUniforms).sizeEnd;
l9_4342=l9_4343;
l9_4341=l9_4342;
float2 l9_4344=l9_4341;
N111_sizeEnd=l9_4344;
float2 l9_4345=float2(0.0);
float2 l9_4346=float2(0.0);
float2 l9_4347=(*sc_set0.UserUniforms).sizeStartMax;
l9_4346=l9_4347;
l9_4345=l9_4346;
float2 l9_4348=l9_4345;
N111_sizeStartMax=l9_4348;
float2 l9_4349=float2(0.0);
float2 l9_4350=float2(0.0);
float2 l9_4351=(*sc_set0.UserUniforms).sizeEndMax;
l9_4350=l9_4351;
l9_4349=l9_4350;
float2 l9_4352=l9_4349;
N111_sizeEndMax=l9_4352;
float3 l9_4353=float3(0.0);
float3 l9_4354=float3(0.0);
float3 l9_4355=(*sc_set0.UserUniforms).sizeStart3D;
l9_4354=l9_4355;
l9_4353=l9_4354;
float3 l9_4356=l9_4353;
N111_sizeStart3D=l9_4356;
float3 l9_4357=float3(0.0);
float3 l9_4358=float3(0.0);
float3 l9_4359=(*sc_set0.UserUniforms).sizeEnd3D;
l9_4358=l9_4359;
l9_4357=l9_4358;
float3 l9_4360=l9_4357;
N111_sizeEnd3D=l9_4360;
float3 l9_4361=float3(0.0);
float3 l9_4362=float3(0.0);
float3 l9_4363=(*sc_set0.UserUniforms).sizeStartMax3D;
l9_4362=l9_4363;
l9_4361=l9_4362;
float3 l9_4364=l9_4361;
N111_sizeStartMax3D=l9_4364;
float3 l9_4365=float3(0.0);
float3 l9_4366=float3(0.0);
float3 l9_4367=(*sc_set0.UserUniforms).sizeEndMax3D;
l9_4366=l9_4367;
l9_4365=l9_4366;
float3 l9_4368=l9_4365;
N111_sizeEndMax3D=l9_4368;
float l9_4369=0.0;
float l9_4370=0.0;
float l9_4371=(*sc_set0.UserUniforms).sizeSpeed;
l9_4370=l9_4371;
l9_4369=l9_4370;
float l9_4372=l9_4369;
N111_sizeSpeed=l9_4372;
float l9_4373=0.0;
float l9_4374=0.0;
float l9_4375=(*sc_set0.UserUniforms).gravity;
l9_4374=l9_4375;
l9_4373=l9_4374;
float l9_4376=l9_4373;
N111_gravity=l9_4376;
float3 l9_4377=float3(0.0);
float3 l9_4378=float3(0.0);
float3 l9_4379=(*sc_set0.UserUniforms).localForce;
l9_4378=l9_4379;
l9_4377=l9_4378;
float3 l9_4380=l9_4377;
N111_localForce=l9_4380;
float3 l9_4381=float3(0.0);
l9_4381=tempGlobals.N111_ParticleSpawnPosition;
float l9_4382=0.0;
float l9_4383=(*sc_set0.UserUniforms).timeGlobal;
l9_4382=l9_4383;
float l9_4384=0.0;
float l9_4385=(*sc_set0.UserUniforms).externalTimeInput;
l9_4384=l9_4385;
float l9_4386=0.0;
float l9_4387=(*sc_set0.UserUniforms).externalSeed;
l9_4386=l9_4387;
float l9_4388=0.0;
float l9_4389=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_4388=l9_4389;
float2 l9_4390=float2(0.0);
float2 l9_4391=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_4390=l9_4391;
float l9_4392=0.0;
float l9_4393;
if ((int(TRAILS_tmp)!=0))
{
l9_4393=1.001;
}
else
{
l9_4393=0.001;
}
l9_4393-=0.001;
l9_4392=l9_4393;
float l9_4394=0.0;
float l9_4395=(*sc_set0.UserUniforms).trailLength;
l9_4394=l9_4395;
float4 l9_4396=float4(0.0);
l9_4396=tempGlobals.VertexColor;
float l9_4397=0.0;
l9_4397=l9_4396.x;
float l9_4398=0.0;
float l9_4399=l9_4392;
bool l9_4400=(l9_4399*1.0)!=0.0;
bool l9_4401;
if (l9_4400)
{
l9_4401=(l9_4397*1.0)!=0.0;
}
else
{
l9_4401=l9_4400;
}
l9_4398=float(l9_4401);
float3 l9_4402=float3(0.0);
float l9_4403=0.0;
float l9_4404=l9_4382;
float l9_4405=l9_4384;
float l9_4406=l9_4386;
float l9_4407=l9_4388;
float2 l9_4408=l9_4390;
float l9_4409=l9_4394;
float l9_4410=l9_4398;
ssGlobals l9_4411=tempGlobals;
tempGlobals=l9_4411;
float3 l9_4412=float3(0.0);
float l9_4413=0.0;
N181_timeGlobal=l9_4404;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_4405;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_4406;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_4407;
N181_lifeTimeMinMax=l9_4408;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_4409;
N181_isTrailCondition=l9_4410!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_4414=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_4415=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_4414=length(float4(1.0)*l9_4415);
}
N181_globalSeed=N181_externalSeed+l9_4414;
int l9_4416=0;
l9_4416=int(tempGlobals.gInstanceID+0.5);
int l9_4417=l9_4416;
float l9_4418=float(l9_4417);
int l9_4419=int(l9_4418);
int l9_4420=l9_4419^(l9_4419*15299);
int l9_4421=l9_4420;
int l9_4422=l9_4421;
int l9_4423=((l9_4422*((l9_4422*1471343)+101146501))+1559861749)&2147483647;
int l9_4424=l9_4423;
int l9_4425=l9_4421*1399;
int l9_4426=((l9_4425*((l9_4425*1471343)+101146501))+1559861749)&2147483647;
int l9_4427=l9_4426;
int l9_4428=l9_4421*7177;
int l9_4429=((l9_4428*((l9_4428*1471343)+101146501))+1559861749)&2147483647;
int l9_4430=l9_4429;
int l9_4431=l9_4424;
float l9_4432=float(l9_4431)*4.6566129e-10;
int l9_4433=l9_4427;
float l9_4434=float(l9_4433)*4.6566129e-10;
int l9_4435=l9_4430;
float l9_4436=float(l9_4435)*4.6566129e-10;
float3 l9_4437=float3(l9_4432,l9_4434,l9_4436);
float3 l9_4438=l9_4437;
N181_particleSeed=l9_4438;
float l9_4439=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_4440;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_4440=N181_lifeTimeMinMax;
}
else
{
l9_4440=float2(N181_lifeTimeConstant);
}
float2 l9_4441=l9_4440;
float l9_4442=fast::max(l9_4441.x,0.0099999998);
float l9_4443=fast::max(l9_4441.y,0.0099999998);
float l9_4444=tempGlobals.gTimeElapsed;
float l9_4445=l9_4444;
if (N181_ENABLE_EXTERNALTIME)
{
l9_4445=N181_externalTime;
}
float l9_4446=l9_4445;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_4446=N181_timeGlobal*l9_4445;
}
else
{
float l9_4447=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_4447=N181_trailLength;
}
}
float l9_4448=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_4449=0.0;
l9_4449=tempGlobals.gInstanceRatio;
float l9_4450=l9_4449;
int l9_4451=0;
l9_4451=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_4452=l9_4451;
l9_4448=fast::max(l9_4450*(1.0-(1.0/float(l9_4452))),0.0);
}
else
{
l9_4448=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_4453=fract(((l9_4445*N181_timeGlobal)*(1.0/(l9_4441.y+l9_4447)))+l9_4448);
l9_4446=l9_4453*(l9_4441.y+l9_4447);
}
float l9_4454=mix(l9_4446/l9_4442,l9_4446/l9_4443,l9_4439);
float l9_4455=fast::clamp(l9_4454,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_4446,l9_4455);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_4456=tempGlobals.Surface_UVCoord0;
l9_4446-=(l9_4456.y*N181_trailLength);
l9_4454=mix(l9_4446/l9_4442,l9_4446/l9_4443,l9_4439);
l9_4455=fast::clamp(l9_4454,0.0,1.0);
}
}
N181_timeValues=float4(l9_4441,l9_4446,l9_4455);
l9_4412=N181_particleSeed;
l9_4413=N181_isTrail;
l9_4402=l9_4412;
l9_4403=l9_4413;
float l9_4457=0.0;
float l9_4458=(*sc_set0.UserUniforms).attractRepelForceStrength;
l9_4457=l9_4458;
float3 l9_4459=float3(0.0);
float3 l9_4460=(*sc_set0.UserUniforms).customForceOrigin;
l9_4459=l9_4460;
float3 l9_4461=l9_4381;
float3 l9_4462=l9_4402;
float l9_4463=l9_4457;
float3 l9_4464=l9_4459;
ssGlobals l9_4465=tempGlobals;
tempGlobals=l9_4465;
N223_OnOff=(int(Tweak_N131_tmp)!=0);
N223_ParticleSpawnPosition=l9_4461;
N223_ParticleSeed=l9_4462;
N223_Strength=l9_4463;
N223_ForceOrigin=l9_4464;
N223_CustomForce=float3(0.0);
float4x4 l9_4466=(*sc_set0.UserUniforms).sc_ModelMatrix;
float4 l9_4467=l9_4466*float4(N223_ParticleSpawnPosition,1.0);
if (N223_OnOff)
{
float3 l9_4468=N223_ForceOrigin;
float3 l9_4469=l9_4467.xyz;
float l9_4470=N223_Strength;
float3 l9_4471=float3(0.0);
if (all(l9_4468==l9_4469))
{
int l9_4472=0;
l9_4472=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_4473=l9_4472;
float3 l9_4474=N223_ParticleSeed*float(l9_4473);
int l9_4475=int(l9_4474.x);
int l9_4476=int(l9_4474.y);
int l9_4477=int(l9_4474.z);
int l9_4478=((l9_4475*15299)^(l9_4476*30133))^(l9_4477*17539);
int l9_4479=l9_4478;
int l9_4480=l9_4479;
int l9_4481=((l9_4480*((l9_4480*1471343)+101146501))+1559861749)&2147483647;
int l9_4482=l9_4481;
int l9_4483=l9_4479*1399;
int l9_4484=((l9_4483*((l9_4483*1471343)+101146501))+1559861749)&2147483647;
int l9_4485=l9_4484;
int l9_4486=l9_4479*7177;
int l9_4487=((l9_4486*((l9_4486*1471343)+101146501))+1559861749)&2147483647;
int l9_4488=l9_4487;
int l9_4489=l9_4482;
float l9_4490=float(l9_4489)*4.6566129e-10;
int l9_4491=l9_4485;
float l9_4492=float(l9_4491)*4.6566129e-10;
int l9_4493=l9_4488;
float l9_4494=float(l9_4493)*4.6566129e-10;
float3 l9_4495=float3(l9_4490,l9_4492,l9_4494);
float3 l9_4496=l9_4495;
l9_4471=normalize((l9_4496-float3(0.5))*2.0);
}
else
{
l9_4471=normalize(l9_4468-l9_4469);
}
float3 l9_4497=l9_4471*l9_4470;
N223_CustomForce+=l9_4497;
}
float3 l9_4498=float3(0.0);
l9_4498=tempGlobals.N111_ParticleSpawnPosition;
float3 l9_4499=float3(0.0);
float3 l9_4500=(*sc_set0.UserUniforms).Tex3dScale;
l9_4499=l9_4500;
float3 l9_4501=float3(0.0);
float3 l9_4502=(*sc_set0.UserUniforms).Tex3dScrollSpeed;
l9_4501=l9_4502;
float3 l9_4503=float3(0.0);
float3 l9_4504=(*sc_set0.UserUniforms).Tex3dForceStrength;
l9_4503=l9_4504;
float3 l9_4505=l9_4498;
float3 l9_4506=l9_4499;
float3 l9_4507=l9_4501;
float3 l9_4508=l9_4503;
ssGlobals l9_4509=tempGlobals;
tempGlobals=l9_4509;
N202_OnOff=(int(Tweak_N133_tmp)!=0);
N202_ParticleSpawnPosition=l9_4505;
N202_ScaleTexture=l9_4506;
N202_ScrollSpeed=l9_4507;
N202_Strength=l9_4508;
N202_CustomForce=float3(0.0);
if (N202_OnOff)
{
float3 l9_4510=N202_ParticleSpawnPosition;
float3 l9_4511=N202_Strength;
float3 l9_4512=l9_4510;
float l9_4513=tempGlobals.gTimeElapsed;
float3 l9_4514=float3(l9_4513)*(N202_ScrollSpeed*0.1);
l9_4512/=(N202_ScaleTexture*2.0);
l9_4512+=l9_4514;
float3 l9_4515=l9_4512;
float4 l9_4516=float4(0.0);
float3 l9_4517=l9_4515;
bool l9_4518=false;
float l9_4519=0.0;
float4 l9_4520;
if (l9_4518)
{
l9_4520=sc_set0.Tex3d.sample(sc_set0.Tex3dSmpSC,l9_4517,level(l9_4519));
}
else
{
l9_4520=sc_set0.Tex3d.sample(sc_set0.Tex3dSmpSC,l9_4517,bias(l9_4519));
}
float4 l9_4521=l9_4520;
l9_4516=l9_4521;
float4 l9_4522=l9_4516;
float3 l9_4523=l9_4522.xyz;
float3 l9_4524=(l9_4523*2.0)-float3(1.0);
l9_4524*=l9_4511;
float3 l9_4525=l9_4524;
N202_CustomForce+=l9_4525;
}
float3 l9_4526=float3(0.0);
l9_4526=tempGlobals.N155_helixDirection;
float3 l9_4527=float3(0.0);
l9_4527=tempGlobals.N319_curveDirection;
float3 l9_4528=float3(0.0);
float3 l9_4529=(*sc_set0.UserUniforms).Tweak_N314;
l9_4528=l9_4529;
float l9_4530=l9_4403;
float3 l9_4531=l9_4526;
float3 l9_4532=l9_4527;
float3 l9_4533=l9_4528;
ssGlobals l9_4534=tempGlobals;
tempGlobals=l9_4534;
N277_OnOff=(int(Tweak_N313_tmp)!=0);
N277_isTrail=l9_4530!=0.0;
N277_helixDir=l9_4531;
N277_curveDir=l9_4532;
N277_Strength=l9_4533;
N277_Path=NODE_248_DROPLIST_ITEM_tmp;
N277_DirectionForce=float3(0.0);
if (N277_OnOff||N277_isTrail)
{
float3 l9_4535;
if (N277_Path==5)
{
l9_4535=N277_helixDir;
}
else
{
bool3 l9_4536=bool3(N277_Path==6);
l9_4535=float3(l9_4536.x ? N277_curveDir.x : float3(0.0).x,l9_4536.y ? N277_curveDir.y : float3(0.0).y,l9_4536.z ? N277_curveDir.z : float3(0.0).z);
}
float3 l9_4537=l9_4535;
float3 l9_4538=l9_4537;
float3 l9_4539=l9_4538;
if (N277_OnOff)
{
N277_DirectionForce+=(l9_4539*N277_Strength);
}
}
float3 l9_4540=float3(0.0);
float3 l9_4541=float3(0.0);
float3 l9_4542=(*sc_set0.UserUniforms).displaceScale;
l9_4541=l9_4542;
l9_4540=l9_4541;
float3 l9_4543=l9_4540;
N111_ScaleDisplace=l9_4543;
float3 l9_4544=float3(0.0);
float3 l9_4545=float3(0.0);
float3 l9_4546=(*sc_set0.UserUniforms).displaceSpeed;
l9_4545=l9_4546;
l9_4544=l9_4545;
float3 l9_4547=l9_4544;
N111_ScrollSpeedDisplace=l9_4547;
float3 l9_4548=float3(0.0);
float3 l9_4549=float3(0.0);
float3 l9_4550=(*sc_set0.UserUniforms).displaceStrength;
l9_4549=l9_4550;
l9_4548=l9_4549;
float3 l9_4551=l9_4548;
N111_DisplaceStrength=l9_4551;
float3 l9_4552=float3(0.0);
float3 l9_4553=float3(0.0);
float3 l9_4554=(*sc_set0.UserUniforms).orbitAxis;
l9_4553=l9_4554;
l9_4552=l9_4553;
float3 l9_4555=l9_4552;
N111_AxisOrbit=l9_4555;
float3 l9_4556=float3(0.0);
float3 l9_4557=float3(0.0);
float3 l9_4558=(*sc_set0.UserUniforms).orbitCenter;
l9_4557=l9_4558;
l9_4556=l9_4557;
float3 l9_4559=l9_4556;
N111_CenterOrbit=l9_4559;
float2 l9_4560=float2(0.0);
float2 l9_4561=float2(0.0);
float2 l9_4562=(*sc_set0.UserUniforms).orbitMinMaxAngle;
l9_4561=l9_4562;
l9_4560=l9_4561;
float2 l9_4563=l9_4560;
N111_MinMaxOrbitAngle=l9_4563;
float2 l9_4564=float2(0.0);
float2 l9_4565=float2(0.0);
float2 l9_4566=(*sc_set0.UserUniforms).orbitMinMaxSpeed;
l9_4565=l9_4566;
l9_4564=l9_4565;
float2 l9_4567=l9_4564;
N111_MinMaxOrbitSpeed=l9_4567;
float l9_4568=0.0;
float l9_4569=(*sc_set0.UserUniforms).timeGlobal;
l9_4568=l9_4569;
float l9_4570=0.0;
float l9_4571=(*sc_set0.UserUniforms).externalTimeInput;
l9_4570=l9_4571;
float l9_4572=0.0;
float l9_4573=(*sc_set0.UserUniforms).externalSeed;
l9_4572=l9_4573;
float l9_4574=0.0;
float l9_4575=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_4574=l9_4575;
float2 l9_4576=float2(0.0);
float2 l9_4577=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_4576=l9_4577;
float l9_4578=0.0;
float l9_4579;
if ((int(TRAILS_tmp)!=0))
{
l9_4579=1.001;
}
else
{
l9_4579=0.001;
}
l9_4579-=0.001;
l9_4578=l9_4579;
float l9_4580=0.0;
float l9_4581=(*sc_set0.UserUniforms).trailLength;
l9_4580=l9_4581;
float4 l9_4582=float4(0.0);
l9_4582=tempGlobals.VertexColor;
float l9_4583=0.0;
l9_4583=l9_4582.x;
float l9_4584=0.0;
float l9_4585=l9_4578;
bool l9_4586=(l9_4585*1.0)!=0.0;
bool l9_4587;
if (l9_4586)
{
l9_4587=(l9_4583*1.0)!=0.0;
}
else
{
l9_4587=l9_4586;
}
l9_4584=float(l9_4587);
float l9_4588=0.0;
float l9_4589=l9_4568;
float l9_4590=l9_4570;
float l9_4591=l9_4572;
float l9_4592=l9_4574;
float2 l9_4593=l9_4576;
float l9_4594=l9_4580;
float l9_4595=l9_4584;
ssGlobals l9_4596=tempGlobals;
tempGlobals=l9_4596;
float l9_4597=0.0;
N181_timeGlobal=l9_4589;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_4590;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_4591;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_4592;
N181_lifeTimeMinMax=l9_4593;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_4594;
N181_isTrailCondition=l9_4595!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_4598=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_4599=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_4598=length(float4(1.0)*l9_4599);
}
N181_globalSeed=N181_externalSeed+l9_4598;
int l9_4600=0;
l9_4600=int(tempGlobals.gInstanceID+0.5);
int l9_4601=l9_4600;
float l9_4602=float(l9_4601);
int l9_4603=int(l9_4602);
int l9_4604=l9_4603^(l9_4603*15299);
int l9_4605=l9_4604;
int l9_4606=l9_4605;
int l9_4607=((l9_4606*((l9_4606*1471343)+101146501))+1559861749)&2147483647;
int l9_4608=l9_4607;
int l9_4609=l9_4605*1399;
int l9_4610=((l9_4609*((l9_4609*1471343)+101146501))+1559861749)&2147483647;
int l9_4611=l9_4610;
int l9_4612=l9_4605*7177;
int l9_4613=((l9_4612*((l9_4612*1471343)+101146501))+1559861749)&2147483647;
int l9_4614=l9_4613;
int l9_4615=l9_4608;
float l9_4616=float(l9_4615)*4.6566129e-10;
int l9_4617=l9_4611;
float l9_4618=float(l9_4617)*4.6566129e-10;
int l9_4619=l9_4614;
float l9_4620=float(l9_4619)*4.6566129e-10;
float3 l9_4621=float3(l9_4616,l9_4618,l9_4620);
float3 l9_4622=l9_4621;
N181_particleSeed=l9_4622;
float l9_4623=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_4624;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_4624=N181_lifeTimeMinMax;
}
else
{
l9_4624=float2(N181_lifeTimeConstant);
}
float2 l9_4625=l9_4624;
float l9_4626=fast::max(l9_4625.x,0.0099999998);
float l9_4627=fast::max(l9_4625.y,0.0099999998);
float l9_4628=tempGlobals.gTimeElapsed;
float l9_4629=l9_4628;
if (N181_ENABLE_EXTERNALTIME)
{
l9_4629=N181_externalTime;
}
float l9_4630=l9_4629;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_4630=N181_timeGlobal*l9_4629;
}
else
{
float l9_4631=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_4631=N181_trailLength;
}
}
float l9_4632=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_4633=0.0;
l9_4633=tempGlobals.gInstanceRatio;
float l9_4634=l9_4633;
int l9_4635=0;
l9_4635=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_4636=l9_4635;
l9_4632=fast::max(l9_4634*(1.0-(1.0/float(l9_4636))),0.0);
}
else
{
l9_4632=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_4637=fract(((l9_4629*N181_timeGlobal)*(1.0/(l9_4625.y+l9_4631)))+l9_4632);
l9_4630=l9_4637*(l9_4625.y+l9_4631);
}
float l9_4638=mix(l9_4630/l9_4626,l9_4630/l9_4627,l9_4623);
float l9_4639=fast::clamp(l9_4638,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_4630,l9_4639);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_4640=tempGlobals.Surface_UVCoord0;
l9_4630-=(l9_4640.y*N181_trailLength);
l9_4638=mix(l9_4630/l9_4626,l9_4630/l9_4627,l9_4623);
l9_4639=fast::clamp(l9_4638,0.0,1.0);
}
}
N181_timeValues=float4(l9_4625,l9_4630,l9_4639);
l9_4597=N181_isTrail;
l9_4588=l9_4597;
float3 l9_4641=float3(0.0);
l9_4641=tempGlobals.N155_helixDirection;
float3 l9_4642=float3(0.0);
l9_4642=tempGlobals.N319_curveDirection;
float3 l9_4643=float3(0.0);
float3 l9_4644=(*sc_set0.UserUniforms).Tweak_N314;
l9_4643=l9_4644;
float l9_4645=l9_4588;
float3 l9_4646=l9_4641;
float3 l9_4647=l9_4642;
float3 l9_4648=l9_4643;
ssGlobals l9_4649=tempGlobals;
tempGlobals=l9_4649;
N277_OnOff=(int(Tweak_N313_tmp)!=0);
N277_isTrail=l9_4645!=0.0;
N277_helixDir=l9_4646;
N277_curveDir=l9_4647;
N277_Strength=l9_4648;
N277_Path=NODE_248_DROPLIST_ITEM_tmp;
N277_DirectionForce=float3(0.0);
if (N277_OnOff||N277_isTrail)
{
float3 l9_4650;
if (N277_Path==5)
{
l9_4650=N277_helixDir;
}
else
{
bool3 l9_4651=bool3(N277_Path==6);
l9_4650=float3(l9_4651.x ? N277_curveDir.x : float3(0.0).x,l9_4651.y ? N277_curveDir.y : float3(0.0).y,l9_4651.z ? N277_curveDir.z : float3(0.0).z);
}
float3 l9_4652=l9_4650;
float3 l9_4653=l9_4652;
float3 l9_4654=l9_4653;
if (N277_OnOff)
{
N277_DirectionForce+=(l9_4654*N277_Strength);
}
}
float3 l9_4655=float3(0.0);
N111_particleSeed=N111_particleSeedIn;
N111_globalSeed=N111_globalSeedIn;
float l9_4656=N111_particleSeed.x;
float l9_4657=N111_particleSeed.y;
float l9_4658=N111_particleSeed.z;
float3 l9_4659=fract((float3(l9_4656,l9_4657,l9_4658)*3048.28)+float3(N111_globalSeed))-float3(0.5);
float3 l9_4660=fract((N111_particleSeed*374.57129)+float3(N111_globalSeed))-float3(0.5);
float3 l9_4661=normalize(l9_4660+float3(1e-06));
float l9_4662=fract(N111_particleSeed.x+N111_globalSeed);
float l9_4663=l9_4662;
float l9_4664=0.33333334;
float l9_4665;
if (l9_4663<=0.0)
{
l9_4665=0.0;
}
else
{
l9_4665=pow(l9_4663,l9_4664);
}
float l9_4666=l9_4665;
float l9_4667=l9_4666;
l9_4661*=l9_4667;
l9_4661/=float3(2.0);
float l9_4668=fract((N111_particleSeed.x*334.59122)+N111_globalSeed);
float l9_4669=fract((N111_particleSeed.y*41.231232)+N111_globalSeed);
float l9_4670=fract((N111_particleSeed.z*18.984529)+N111_globalSeed);
float l9_4671=fract((N111_particleSeed.x*654.15588)+N111_globalSeed);
float l9_4672=fract((N111_particleSeed.y*45.722408)+N111_globalSeed);
float3 l9_4673=(float3(l9_4671,l9_4672,l9_4670)-float3(0.5))*2.0;
float3 l9_4674=float3(l9_4671,l9_4672,l9_4670);
float2 l9_4675=fract((N111_particleSeed.xz*582.65741)+float2(N111_globalSeed));
float l9_4676=N111_timeValuesIn.z;
float l9_4677=N111_timeValuesIn.w;
float3 l9_4678=l9_4655;
float3 l9_4679=l9_4655;
float3 l9_4680=l9_4655;
if ((int(INILOCATION_tmp)!=0))
{
l9_4680=N111_spawnLocation;
}
if ((int(BOXSPAWN_tmp)!=0))
{
l9_4678=N111_spawnBox*l9_4659;
}
if ((int(SPHERESPAWN_tmp)!=0))
{
l9_4679=N111_spawnSphere*l9_4661;
}
float3 l9_4681=(l9_4680+l9_4679)+l9_4678;
float3 l9_4682=l9_4655;
if ((int(NOISE_tmp)!=0))
{
float3 l9_4683=N111_noiseFrequency;
float3 l9_4684=N111_noiseMult;
float3 l9_4685=l9_4673;
float l9_4686=l9_4677;
float l9_4687=sin(l9_4686*l9_4683.x);
float l9_4688=sin(l9_4686*l9_4683.y);
float l9_4689=sin(l9_4686*l9_4683.z);
float3 l9_4690=(float3(l9_4687,l9_4688,l9_4689)*l9_4684)*l9_4685;
float3 l9_4691=l9_4690;
l9_4682+=l9_4691;
}
if ((int(SNOISE_tmp)!=0))
{
float l9_4692=l9_4670;
float l9_4693=l9_4671;
float l9_4694=l9_4672;
float3 l9_4695=N111_sNoiseFrequency;
float3 l9_4696=N111_sNoiseMult;
float3 l9_4697=l9_4673;
float l9_4698=l9_4676;
float2 l9_4699=float2(l9_4692*l9_4698,l9_4695.x);
float2 l9_4700=floor(l9_4699+float2(dot(l9_4699,float2(0.36602542))));
float2 l9_4701=(l9_4699-l9_4700)+float2(dot(l9_4700,float2(0.21132487)));
float2 l9_4702=float2(0.0);
bool2 l9_4703=bool2(l9_4701.x>l9_4701.y);
l9_4702=float2(l9_4703.x ? float2(1.0,0.0).x : float2(0.0,1.0).x,l9_4703.y ? float2(1.0,0.0).y : float2(0.0,1.0).y);
float4 l9_4704=l9_4701.xyxy+float4(0.21132487,0.21132487,-0.57735026,-0.57735026);
float2 l9_4705=l9_4704.xy-l9_4702;
l9_4704=float4(l9_4705.x,l9_4705.y,l9_4704.z,l9_4704.w);
l9_4700=mod(l9_4700,float2(289.0));
float3 l9_4706=float3(l9_4700.y)+float3(0.0,l9_4702.y,1.0);
float3 l9_4707=mod(((l9_4706*34.0)+float3(1.0))*l9_4706,float3(289.0));
float3 l9_4708=(l9_4707+float3(l9_4700.x))+float3(0.0,l9_4702.x,1.0);
float3 l9_4709=mod(((l9_4708*34.0)+float3(1.0))*l9_4708,float3(289.0));
float3 l9_4710=l9_4709;
float3 l9_4711=fast::max(float3(0.5)-float3(dot(l9_4701,l9_4701),dot(l9_4704.xy,l9_4704.xy),dot(l9_4704.zw,l9_4704.zw)),float3(0.0));
l9_4711*=l9_4711;
l9_4711*=l9_4711;
float3 l9_4712=(fract(l9_4710*float3(0.024390243))*2.0)-float3(1.0);
float3 l9_4713=abs(l9_4712)-float3(0.5);
float3 l9_4714=floor(l9_4712+float3(0.5));
float3 l9_4715=l9_4712-l9_4714;
l9_4711*=(float3(1.7928429)-(((l9_4715*l9_4715)+(l9_4713*l9_4713))*0.85373473));
float3 l9_4716=float3(0.0);
l9_4716.x=(l9_4715.x*l9_4701.x)+(l9_4713.x*l9_4701.y);
float2 l9_4717=(l9_4715.yz*l9_4704.xz)+(l9_4713.yz*l9_4704.yw);
l9_4716=float3(l9_4716.x,l9_4717.x,l9_4717.y);
float l9_4718=130.0*dot(l9_4711,l9_4716);
float l9_4719=l9_4718;
float2 l9_4720=float2(l9_4693*l9_4698,l9_4695.y);
float2 l9_4721=floor(l9_4720+float2(dot(l9_4720,float2(0.36602542))));
float2 l9_4722=(l9_4720-l9_4721)+float2(dot(l9_4721,float2(0.21132487)));
float2 l9_4723=float2(0.0);
bool2 l9_4724=bool2(l9_4722.x>l9_4722.y);
l9_4723=float2(l9_4724.x ? float2(1.0,0.0).x : float2(0.0,1.0).x,l9_4724.y ? float2(1.0,0.0).y : float2(0.0,1.0).y);
float4 l9_4725=l9_4722.xyxy+float4(0.21132487,0.21132487,-0.57735026,-0.57735026);
float2 l9_4726=l9_4725.xy-l9_4723;
l9_4725=float4(l9_4726.x,l9_4726.y,l9_4725.z,l9_4725.w);
l9_4721=mod(l9_4721,float2(289.0));
float3 l9_4727=float3(l9_4721.y)+float3(0.0,l9_4723.y,1.0);
float3 l9_4728=mod(((l9_4727*34.0)+float3(1.0))*l9_4727,float3(289.0));
float3 l9_4729=(l9_4728+float3(l9_4721.x))+float3(0.0,l9_4723.x,1.0);
float3 l9_4730=mod(((l9_4729*34.0)+float3(1.0))*l9_4729,float3(289.0));
float3 l9_4731=l9_4730;
float3 l9_4732=fast::max(float3(0.5)-float3(dot(l9_4722,l9_4722),dot(l9_4725.xy,l9_4725.xy),dot(l9_4725.zw,l9_4725.zw)),float3(0.0));
l9_4732*=l9_4732;
l9_4732*=l9_4732;
float3 l9_4733=(fract(l9_4731*float3(0.024390243))*2.0)-float3(1.0);
float3 l9_4734=abs(l9_4733)-float3(0.5);
float3 l9_4735=floor(l9_4733+float3(0.5));
float3 l9_4736=l9_4733-l9_4735;
l9_4732*=(float3(1.7928429)-(((l9_4736*l9_4736)+(l9_4734*l9_4734))*0.85373473));
float3 l9_4737=float3(0.0);
l9_4737.x=(l9_4736.x*l9_4722.x)+(l9_4734.x*l9_4722.y);
float2 l9_4738=(l9_4736.yz*l9_4725.xz)+(l9_4734.yz*l9_4725.yw);
l9_4737=float3(l9_4737.x,l9_4738.x,l9_4738.y);
float l9_4739=130.0*dot(l9_4732,l9_4737);
float l9_4740=l9_4739;
float2 l9_4741=float2(l9_4694*l9_4698,l9_4695.z);
float2 l9_4742=floor(l9_4741+float2(dot(l9_4741,float2(0.36602542))));
float2 l9_4743=(l9_4741-l9_4742)+float2(dot(l9_4742,float2(0.21132487)));
float2 l9_4744=float2(0.0);
bool2 l9_4745=bool2(l9_4743.x>l9_4743.y);
l9_4744=float2(l9_4745.x ? float2(1.0,0.0).x : float2(0.0,1.0).x,l9_4745.y ? float2(1.0,0.0).y : float2(0.0,1.0).y);
float4 l9_4746=l9_4743.xyxy+float4(0.21132487,0.21132487,-0.57735026,-0.57735026);
float2 l9_4747=l9_4746.xy-l9_4744;
l9_4746=float4(l9_4747.x,l9_4747.y,l9_4746.z,l9_4746.w);
l9_4742=mod(l9_4742,float2(289.0));
float3 l9_4748=float3(l9_4742.y)+float3(0.0,l9_4744.y,1.0);
float3 l9_4749=mod(((l9_4748*34.0)+float3(1.0))*l9_4748,float3(289.0));
float3 l9_4750=(l9_4749+float3(l9_4742.x))+float3(0.0,l9_4744.x,1.0);
float3 l9_4751=mod(((l9_4750*34.0)+float3(1.0))*l9_4750,float3(289.0));
float3 l9_4752=l9_4751;
float3 l9_4753=fast::max(float3(0.5)-float3(dot(l9_4743,l9_4743),dot(l9_4746.xy,l9_4746.xy),dot(l9_4746.zw,l9_4746.zw)),float3(0.0));
l9_4753*=l9_4753;
l9_4753*=l9_4753;
float3 l9_4754=(fract(l9_4752*float3(0.024390243))*2.0)-float3(1.0);
float3 l9_4755=abs(l9_4754)-float3(0.5);
float3 l9_4756=floor(l9_4754+float3(0.5));
float3 l9_4757=l9_4754-l9_4756;
l9_4753*=(float3(1.7928429)-(((l9_4757*l9_4757)+(l9_4755*l9_4755))*0.85373473));
float3 l9_4758=float3(0.0);
l9_4758.x=(l9_4757.x*l9_4743.x)+(l9_4755.x*l9_4743.y);
float2 l9_4759=(l9_4757.yz*l9_4746.xz)+(l9_4755.yz*l9_4746.yw);
l9_4758=float3(l9_4758.x,l9_4759.x,l9_4759.y);
float l9_4760=130.0*dot(l9_4753,l9_4758);
float l9_4761=l9_4760;
float3 l9_4762=(float3(l9_4719,l9_4740,l9_4761)*l9_4696)*l9_4697;
l9_4682+=l9_4762;
}
float3 l9_4763=float3(0.0,((N111_gravity/2.0)*l9_4676)*l9_4676,0.0);
float3 l9_4764=l9_4655;
if ((int(FORCE_tmp)!=0))
{
l9_4764=((N111_localForce/float3(2.0))*l9_4676)*l9_4676;
}
float3 l9_4765=l9_4655;
if ((int(CUSTOMFORCE_tmp)!=0))
{
tempGlobals.N111_ParticleSpawnPosition=l9_4681;
float3 l9_4766=float3(0.0);
float3 l9_4767=float3(0.0);
l9_4767=tempGlobals.N111_ParticleSpawnPosition;
float l9_4768=0.0;
float l9_4769=(*sc_set0.UserUniforms).timeGlobal;
l9_4768=l9_4769;
float l9_4770=0.0;
float l9_4771=(*sc_set0.UserUniforms).externalTimeInput;
l9_4770=l9_4771;
float l9_4772=0.0;
float l9_4773=(*sc_set0.UserUniforms).externalSeed;
l9_4772=l9_4773;
float l9_4774=0.0;
float l9_4775=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_4774=l9_4775;
float2 l9_4776=float2(0.0);
float2 l9_4777=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_4776=l9_4777;
float l9_4778=0.0;
float l9_4779;
if ((int(TRAILS_tmp)!=0))
{
l9_4779=1.001;
}
else
{
l9_4779=0.001;
}
l9_4779-=0.001;
l9_4778=l9_4779;
float l9_4780=0.0;
float l9_4781=(*sc_set0.UserUniforms).trailLength;
l9_4780=l9_4781;
float4 l9_4782=float4(0.0);
l9_4782=tempGlobals.VertexColor;
float l9_4783=0.0;
l9_4783=l9_4782.x;
float l9_4784=0.0;
float l9_4785=l9_4778;
bool l9_4786=(l9_4785*1.0)!=0.0;
bool l9_4787;
if (l9_4786)
{
l9_4787=(l9_4783*1.0)!=0.0;
}
else
{
l9_4787=l9_4786;
}
l9_4784=float(l9_4787);
float3 l9_4788=float3(0.0);
float l9_4789=0.0;
float l9_4790=l9_4768;
float l9_4791=l9_4770;
float l9_4792=l9_4772;
float l9_4793=l9_4774;
float2 l9_4794=l9_4776;
float l9_4795=l9_4780;
float l9_4796=l9_4784;
ssGlobals l9_4797=tempGlobals;
tempGlobals=l9_4797;
float3 l9_4798=float3(0.0);
float l9_4799=0.0;
N181_timeGlobal=l9_4790;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_4791;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_4792;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_4793;
N181_lifeTimeMinMax=l9_4794;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_4795;
N181_isTrailCondition=l9_4796!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_4800=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_4801=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_4800=length(float4(1.0)*l9_4801);
}
N181_globalSeed=N181_externalSeed+l9_4800;
int l9_4802=0;
l9_4802=int(tempGlobals.gInstanceID+0.5);
int l9_4803=l9_4802;
float l9_4804=float(l9_4803);
int l9_4805=int(l9_4804);
int l9_4806=l9_4805^(l9_4805*15299);
int l9_4807=l9_4806;
int l9_4808=l9_4807;
int l9_4809=((l9_4808*((l9_4808*1471343)+101146501))+1559861749)&2147483647;
int l9_4810=l9_4809;
int l9_4811=l9_4807*1399;
int l9_4812=((l9_4811*((l9_4811*1471343)+101146501))+1559861749)&2147483647;
int l9_4813=l9_4812;
int l9_4814=l9_4807*7177;
int l9_4815=((l9_4814*((l9_4814*1471343)+101146501))+1559861749)&2147483647;
int l9_4816=l9_4815;
int l9_4817=l9_4810;
float l9_4818=float(l9_4817)*4.6566129e-10;
int l9_4819=l9_4813;
float l9_4820=float(l9_4819)*4.6566129e-10;
int l9_4821=l9_4816;
float l9_4822=float(l9_4821)*4.6566129e-10;
float3 l9_4823=float3(l9_4818,l9_4820,l9_4822);
float3 l9_4824=l9_4823;
N181_particleSeed=l9_4824;
float l9_4825=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_4826;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_4826=N181_lifeTimeMinMax;
}
else
{
l9_4826=float2(N181_lifeTimeConstant);
}
float2 l9_4827=l9_4826;
float l9_4828=fast::max(l9_4827.x,0.0099999998);
float l9_4829=fast::max(l9_4827.y,0.0099999998);
float l9_4830=tempGlobals.gTimeElapsed;
float l9_4831=l9_4830;
if (N181_ENABLE_EXTERNALTIME)
{
l9_4831=N181_externalTime;
}
float l9_4832=l9_4831;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_4832=N181_timeGlobal*l9_4831;
}
else
{
float l9_4833=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_4833=N181_trailLength;
}
}
float l9_4834=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_4835=0.0;
l9_4835=tempGlobals.gInstanceRatio;
float l9_4836=l9_4835;
int l9_4837=0;
l9_4837=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_4838=l9_4837;
l9_4834=fast::max(l9_4836*(1.0-(1.0/float(l9_4838))),0.0);
}
else
{
l9_4834=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_4839=fract(((l9_4831*N181_timeGlobal)*(1.0/(l9_4827.y+l9_4833)))+l9_4834);
l9_4832=l9_4839*(l9_4827.y+l9_4833);
}
float l9_4840=mix(l9_4832/l9_4828,l9_4832/l9_4829,l9_4825);
float l9_4841=fast::clamp(l9_4840,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_4832,l9_4841);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_4842=tempGlobals.Surface_UVCoord0;
l9_4832-=(l9_4842.y*N181_trailLength);
l9_4840=mix(l9_4832/l9_4828,l9_4832/l9_4829,l9_4825);
l9_4841=fast::clamp(l9_4840,0.0,1.0);
}
}
N181_timeValues=float4(l9_4827,l9_4832,l9_4841);
l9_4798=N181_particleSeed;
l9_4799=N181_isTrail;
l9_4788=l9_4798;
l9_4789=l9_4799;
float l9_4843=0.0;
float l9_4844=(*sc_set0.UserUniforms).attractRepelForceStrength;
l9_4843=l9_4844;
float3 l9_4845=float3(0.0);
float3 l9_4846=(*sc_set0.UserUniforms).customForceOrigin;
l9_4845=l9_4846;
float3 l9_4847=float3(0.0);
float3 l9_4848=l9_4767;
float3 l9_4849=l9_4788;
float l9_4850=l9_4843;
float3 l9_4851=l9_4845;
ssGlobals l9_4852=tempGlobals;
tempGlobals=l9_4852;
float3 l9_4853=float3(0.0);
N223_OnOff=(int(Tweak_N131_tmp)!=0);
N223_ParticleSpawnPosition=l9_4848;
N223_ParticleSeed=l9_4849;
N223_Strength=l9_4850;
N223_ForceOrigin=l9_4851;
N223_CustomForce=float3(0.0);
float4x4 l9_4854=(*sc_set0.UserUniforms).sc_ModelMatrix;
float4 l9_4855=l9_4854*float4(N223_ParticleSpawnPosition,1.0);
if (N223_OnOff)
{
float3 l9_4856=N223_ForceOrigin;
float3 l9_4857=l9_4855.xyz;
float l9_4858=N223_Strength;
float3 l9_4859=float3(0.0);
if (all(l9_4856==l9_4857))
{
int l9_4860=0;
l9_4860=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_4861=l9_4860;
float3 l9_4862=N223_ParticleSeed*float(l9_4861);
int l9_4863=int(l9_4862.x);
int l9_4864=int(l9_4862.y);
int l9_4865=int(l9_4862.z);
int l9_4866=((l9_4863*15299)^(l9_4864*30133))^(l9_4865*17539);
int l9_4867=l9_4866;
int l9_4868=l9_4867;
int l9_4869=((l9_4868*((l9_4868*1471343)+101146501))+1559861749)&2147483647;
int l9_4870=l9_4869;
int l9_4871=l9_4867*1399;
int l9_4872=((l9_4871*((l9_4871*1471343)+101146501))+1559861749)&2147483647;
int l9_4873=l9_4872;
int l9_4874=l9_4867*7177;
int l9_4875=((l9_4874*((l9_4874*1471343)+101146501))+1559861749)&2147483647;
int l9_4876=l9_4875;
int l9_4877=l9_4870;
float l9_4878=float(l9_4877)*4.6566129e-10;
int l9_4879=l9_4873;
float l9_4880=float(l9_4879)*4.6566129e-10;
int l9_4881=l9_4876;
float l9_4882=float(l9_4881)*4.6566129e-10;
float3 l9_4883=float3(l9_4878,l9_4880,l9_4882);
float3 l9_4884=l9_4883;
l9_4859=normalize((l9_4884-float3(0.5))*2.0);
}
else
{
l9_4859=normalize(l9_4856-l9_4857);
}
float3 l9_4885=l9_4859*l9_4858;
N223_CustomForce+=l9_4885;
}
l9_4853=N223_CustomForce;
l9_4847=l9_4853;
float3 l9_4886=float3(0.0);
l9_4886=tempGlobals.N111_ParticleSpawnPosition;
float3 l9_4887=float3(0.0);
float3 l9_4888=(*sc_set0.UserUniforms).Tex3dScale;
l9_4887=l9_4888;
float3 l9_4889=float3(0.0);
float3 l9_4890=(*sc_set0.UserUniforms).Tex3dScrollSpeed;
l9_4889=l9_4890;
float3 l9_4891=float3(0.0);
float3 l9_4892=(*sc_set0.UserUniforms).Tex3dForceStrength;
l9_4891=l9_4892;
float3 l9_4893=float3(0.0);
float3 l9_4894=l9_4886;
float3 l9_4895=l9_4887;
float3 l9_4896=l9_4889;
float3 l9_4897=l9_4891;
ssGlobals l9_4898=tempGlobals;
tempGlobals=l9_4898;
float3 l9_4899=float3(0.0);
N202_OnOff=(int(Tweak_N133_tmp)!=0);
N202_ParticleSpawnPosition=l9_4894;
N202_ScaleTexture=l9_4895;
N202_ScrollSpeed=l9_4896;
N202_Strength=l9_4897;
N202_CustomForce=float3(0.0);
if (N202_OnOff)
{
float3 l9_4900=N202_ParticleSpawnPosition;
float3 l9_4901=N202_Strength;
float3 l9_4902=l9_4900;
float l9_4903=tempGlobals.gTimeElapsed;
float3 l9_4904=float3(l9_4903)*(N202_ScrollSpeed*0.1);
l9_4902/=(N202_ScaleTexture*2.0);
l9_4902+=l9_4904;
float3 l9_4905=l9_4902;
float4 l9_4906=float4(0.0);
float3 l9_4907=l9_4905;
bool l9_4908=false;
float l9_4909=0.0;
float4 l9_4910;
if (l9_4908)
{
l9_4910=sc_set0.Tex3d.sample(sc_set0.Tex3dSmpSC,l9_4907,level(l9_4909));
}
else
{
l9_4910=sc_set0.Tex3d.sample(sc_set0.Tex3dSmpSC,l9_4907,bias(l9_4909));
}
float4 l9_4911=l9_4910;
l9_4906=l9_4911;
float4 l9_4912=l9_4906;
float3 l9_4913=l9_4912.xyz;
float3 l9_4914=(l9_4913*2.0)-float3(1.0);
l9_4914*=l9_4901;
float3 l9_4915=l9_4914;
N202_CustomForce+=l9_4915;
}
l9_4899=N202_CustomForce;
l9_4893=l9_4899;
float3 l9_4916=float3(0.0);
l9_4916=tempGlobals.N155_helixDirection;
float3 l9_4917=float3(0.0);
l9_4917=tempGlobals.N319_curveDirection;
float3 l9_4918=float3(0.0);
float3 l9_4919=(*sc_set0.UserUniforms).Tweak_N314;
l9_4918=l9_4919;
float3 l9_4920=float3(0.0);
float l9_4921=l9_4789;
float3 l9_4922=l9_4916;
float3 l9_4923=l9_4917;
float3 l9_4924=l9_4918;
ssGlobals l9_4925=tempGlobals;
tempGlobals=l9_4925;
float3 l9_4926=float3(0.0);
N277_OnOff=(int(Tweak_N313_tmp)!=0);
N277_isTrail=l9_4921!=0.0;
N277_helixDir=l9_4922;
N277_curveDir=l9_4923;
N277_Strength=l9_4924;
N277_Path=NODE_248_DROPLIST_ITEM_tmp;
N277_DirectionForce=float3(0.0);
if (N277_OnOff||N277_isTrail)
{
float3 l9_4927;
if (N277_Path==5)
{
l9_4927=N277_helixDir;
}
else
{
bool3 l9_4928=bool3(N277_Path==6);
l9_4927=float3(l9_4928.x ? N277_curveDir.x : float3(0.0).x,l9_4928.y ? N277_curveDir.y : float3(0.0).y,l9_4928.z ? N277_curveDir.z : float3(0.0).z);
}
float3 l9_4929=l9_4927;
float3 l9_4930=l9_4929;
float3 l9_4931=l9_4930;
if (N277_OnOff)
{
N277_DirectionForce+=(l9_4931*N277_Strength);
}
}
l9_4926=N277_DirectionForce;
l9_4920=l9_4926;
float3 l9_4932=float3(0.0);
l9_4932=(l9_4847+l9_4893)+l9_4920;
l9_4766=l9_4932;
float3 l9_4933=l9_4766;
l9_4765=((l9_4933/float3(2.0))*l9_4676)*l9_4676;
}
float3 l9_4934=l9_4655;
float3 l9_4935=N111_velocityMin+(((l9_4673+float3(1.0))/float3(2.0))*(N111_velocityMax-N111_velocityMin));
if ((int(VELRAMP_tmp)!=0))
{
l9_4935=mix(N111_velocityMin,N111_velocityMax,l9_4674);
}
float3 l9_4936=l9_4935;
float l9_4937=l9_4676;
float3 l9_4938=N111_velocityDrag;
float3 l9_4939=l9_4682;
float l9_4940=l9_4677;
float3 l9_4941=float3(l9_4937,l9_4937,l9_4937);
float3 l9_4942=l9_4938;
float l9_4943;
if (l9_4941.x<=0.0)
{
l9_4943=0.0;
}
else
{
l9_4943=pow(l9_4941.x,l9_4942.x);
}
float l9_4944=l9_4943;
float l9_4945;
if (l9_4941.y<=0.0)
{
l9_4945=0.0;
}
else
{
l9_4945=pow(l9_4941.y,l9_4942.y);
}
float l9_4946=l9_4945;
float l9_4947;
if (l9_4941.z<=0.0)
{
l9_4947=0.0;
}
else
{
l9_4947=pow(l9_4941.z,l9_4942.z);
}
float3 l9_4948=float3(l9_4944,l9_4946,l9_4947);
float3 l9_4949=l9_4948;
float3 l9_4950=(l9_4936+l9_4939)*l9_4949;
if ((int(VELRAMP_tmp)!=0))
{
float l9_4951=floor(l9_4940*10000.0)/10000.0;
float2 l9_4952=tempGlobals.Surface_UVCoord0;
float2 l9_4953=(l9_4952/float2(10000.0,1.0))+float2(l9_4951,0.0);
float2 l9_4954=l9_4953;
float4 l9_4955=float4(0.0);
int l9_4956;
if ((int(velRampTextureHasSwappedViews_tmp)!=0))
{
int l9_4957=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_4957=0;
}
else
{
l9_4957=in.varStereoViewID;
}
int l9_4958=l9_4957;
l9_4956=1-l9_4958;
}
else
{
int l9_4959=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_4959=0;
}
else
{
l9_4959=in.varStereoViewID;
}
int l9_4960=l9_4959;
l9_4956=l9_4960;
}
int l9_4961=l9_4956;
int l9_4962=velRampTextureLayout_tmp;
int l9_4963=l9_4961;
float2 l9_4964=l9_4954;
bool l9_4965=(int(SC_USE_UV_TRANSFORM_velRampTexture_tmp)!=0);
float3x3 l9_4966=(*sc_set0.UserUniforms).velRampTextureTransform;
int2 l9_4967=int2(SC_SOFTWARE_WRAP_MODE_U_velRampTexture_tmp,SC_SOFTWARE_WRAP_MODE_V_velRampTexture_tmp);
bool l9_4968=(int(SC_USE_UV_MIN_MAX_velRampTexture_tmp)!=0);
float4 l9_4969=(*sc_set0.UserUniforms).velRampTextureUvMinMax;
bool l9_4970=(int(SC_USE_CLAMP_TO_BORDER_velRampTexture_tmp)!=0);
float4 l9_4971=(*sc_set0.UserUniforms).velRampTextureBorderColor;
float l9_4972=0.0;
bool l9_4973=l9_4970&&(!l9_4968);
float l9_4974=1.0;
float l9_4975=l9_4964.x;
int l9_4976=l9_4967.x;
if (l9_4976==1)
{
l9_4975=fract(l9_4975);
}
else
{
if (l9_4976==2)
{
float l9_4977=fract(l9_4975);
float l9_4978=l9_4975-l9_4977;
float l9_4979=step(0.25,fract(l9_4978*0.5));
l9_4975=mix(l9_4977,1.0-l9_4977,fast::clamp(l9_4979,0.0,1.0));
}
}
l9_4964.x=l9_4975;
float l9_4980=l9_4964.y;
int l9_4981=l9_4967.y;
if (l9_4981==1)
{
l9_4980=fract(l9_4980);
}
else
{
if (l9_4981==2)
{
float l9_4982=fract(l9_4980);
float l9_4983=l9_4980-l9_4982;
float l9_4984=step(0.25,fract(l9_4983*0.5));
l9_4980=mix(l9_4982,1.0-l9_4982,fast::clamp(l9_4984,0.0,1.0));
}
}
l9_4964.y=l9_4980;
if (l9_4968)
{
bool l9_4985=l9_4970;
bool l9_4986;
if (l9_4985)
{
l9_4986=l9_4967.x==3;
}
else
{
l9_4986=l9_4985;
}
float l9_4987=l9_4964.x;
float l9_4988=l9_4969.x;
float l9_4989=l9_4969.z;
bool l9_4990=l9_4986;
float l9_4991=l9_4974;
float l9_4992=fast::clamp(l9_4987,l9_4988,l9_4989);
float l9_4993=step(abs(l9_4987-l9_4992),9.9999997e-06);
l9_4991*=(l9_4993+((1.0-float(l9_4990))*(1.0-l9_4993)));
l9_4987=l9_4992;
l9_4964.x=l9_4987;
l9_4974=l9_4991;
bool l9_4994=l9_4970;
bool l9_4995;
if (l9_4994)
{
l9_4995=l9_4967.y==3;
}
else
{
l9_4995=l9_4994;
}
float l9_4996=l9_4964.y;
float l9_4997=l9_4969.y;
float l9_4998=l9_4969.w;
bool l9_4999=l9_4995;
float l9_5000=l9_4974;
float l9_5001=fast::clamp(l9_4996,l9_4997,l9_4998);
float l9_5002=step(abs(l9_4996-l9_5001),9.9999997e-06);
l9_5000*=(l9_5002+((1.0-float(l9_4999))*(1.0-l9_5002)));
l9_4996=l9_5001;
l9_4964.y=l9_4996;
l9_4974=l9_5000;
}
float2 l9_5003=l9_4964;
bool l9_5004=l9_4965;
float3x3 l9_5005=l9_4966;
if (l9_5004)
{
l9_5003=float2((l9_5005*float3(l9_5003,1.0)).xy);
}
float2 l9_5006=l9_5003;
l9_4964=l9_5006;
float l9_5007=l9_4964.x;
int l9_5008=l9_4967.x;
bool l9_5009=l9_4973;
float l9_5010=l9_4974;
if ((l9_5008==0)||(l9_5008==3))
{
float l9_5011=l9_5007;
float l9_5012=0.0;
float l9_5013=1.0;
bool l9_5014=l9_5009;
float l9_5015=l9_5010;
float l9_5016=fast::clamp(l9_5011,l9_5012,l9_5013);
float l9_5017=step(abs(l9_5011-l9_5016),9.9999997e-06);
l9_5015*=(l9_5017+((1.0-float(l9_5014))*(1.0-l9_5017)));
l9_5011=l9_5016;
l9_5007=l9_5011;
l9_5010=l9_5015;
}
l9_4964.x=l9_5007;
l9_4974=l9_5010;
float l9_5018=l9_4964.y;
int l9_5019=l9_4967.y;
bool l9_5020=l9_4973;
float l9_5021=l9_4974;
if ((l9_5019==0)||(l9_5019==3))
{
float l9_5022=l9_5018;
float l9_5023=0.0;
float l9_5024=1.0;
bool l9_5025=l9_5020;
float l9_5026=l9_5021;
float l9_5027=fast::clamp(l9_5022,l9_5023,l9_5024);
float l9_5028=step(abs(l9_5022-l9_5027),9.9999997e-06);
l9_5026*=(l9_5028+((1.0-float(l9_5025))*(1.0-l9_5028)));
l9_5022=l9_5027;
l9_5018=l9_5022;
l9_5021=l9_5026;
}
l9_4964.y=l9_5018;
l9_4974=l9_5021;
float2 l9_5029=l9_4964;
int l9_5030=l9_4962;
int l9_5031=l9_4963;
float l9_5032=l9_4972;
float2 l9_5033=l9_5029;
int l9_5034=l9_5030;
int l9_5035=l9_5031;
float3 l9_5036=float3(0.0);
if (l9_5034==0)
{
l9_5036=float3(l9_5033,0.0);
}
else
{
if (l9_5034==1)
{
l9_5036=float3(l9_5033.x,(l9_5033.y*0.5)+(0.5-(float(l9_5035)*0.5)),0.0);
}
else
{
l9_5036=float3(l9_5033,float(l9_5035));
}
}
float3 l9_5037=l9_5036;
float3 l9_5038=l9_5037;
float4 l9_5039=sc_set0.velRampTexture.sample(sc_set0.velRampTextureSmpSC,l9_5038.xy,bias(l9_5032));
float4 l9_5040=l9_5039;
if (l9_4970)
{
l9_5040=mix(l9_4971,l9_5040,float4(l9_4974));
}
float4 l9_5041=l9_5040;
l9_4955=l9_5041;
float4 l9_5042=l9_4955;
float3 l9_5043=l9_5042.xyz;
l9_4950=(l9_4936+l9_4939)*l9_5043;
if (!(SC_DEVICE_CLASS_tmp>=2))
{
l9_4950=l9_4936*l9_4949;
}
}
float3 l9_5044=l9_4950;
l9_4934=l9_5044;
float4x4 l9_5045=(*sc_set0.UserUniforms).sc_ModelMatrix;
float l9_5046=length(l9_5045[0].xyz);
float4x4 l9_5047=(*sc_set0.UserUniforms).sc_ModelMatrix;
float l9_5048=length(l9_5047[1].xyz);
float4x4 l9_5049=(*sc_set0.UserUniforms).sc_ModelMatrix;
float l9_5050=length(l9_5049[2].xyz);
float3 l9_5051=float3(l9_5046,l9_5048,l9_5050);
float4x4 l9_5052=(*sc_set0.UserUniforms).sc_ModelMatrix;
float4x4 l9_5053=l9_5052;
float4 l9_5054=l9_5053[0];
float4 l9_5055=l9_5053[1];
float4 l9_5056=l9_5053[2];
float3x3 l9_5057=float3x3(float3(float3(l9_5054.x,l9_5055.x,l9_5056.x)),float3(float3(l9_5054.y,l9_5055.y,l9_5056.y)),float3(float3(l9_5054.z,l9_5055.z,l9_5056.z)));
float3x3 l9_5058=l9_5057;
float3x3 l9_5059=l9_5058;
float3 l9_5060=float3(0.0);
if (rotationSpace_tmp==2)
{
l9_5060=(((l9_4934*l9_5059)+l9_4763)+l9_4764)+l9_4765;
}
else
{
if (rotationSpace_tmp==1)
{
l9_5060=(((l9_4934*l9_5051)+l9_4763)+l9_4764)+l9_4765;
}
else
{
l9_5060=(((l9_4934+l9_4763)+l9_4764)+l9_4765)*l9_5059;
}
}
float4x4 l9_5061=(*sc_set0.UserUniforms).sc_ModelMatrix;
float3 l9_5062=(l9_5061*float4(l9_4681,1.0)).xyz+l9_5060;
if ((int(Tweak_N282_tmp)!=0))
{
float3 l9_5063=l9_4681;
float3 l9_5064=N111_DisplaceStrength;
float3 l9_5065=N111_ScrollSpeedDisplace;
float3 l9_5066=N111_ScaleDisplace;
float3 l9_5067=l9_5063;
float l9_5068=tempGlobals.gTimeElapsed;
float3 l9_5069=float3(l9_5068)*(l9_5065*0.1);
l9_5067/=(l9_5066*2.0);
l9_5067+=l9_5069;
float3 l9_5070=l9_5067;
float4 l9_5071=float4(0.0);
float3 l9_5072=l9_5070;
bool l9_5073=false;
float l9_5074=0.0;
float4 l9_5075;
if (l9_5073)
{
l9_5075=sc_set0.displace3dTex.sample(sc_set0.displace3dTexSmpSC,l9_5072,level(l9_5074));
}
else
{
l9_5075=sc_set0.displace3dTex.sample(sc_set0.displace3dTexSmpSC,l9_5072,bias(l9_5074));
}
float4 l9_5076=l9_5075;
l9_5071=l9_5076;
float4 l9_5077=l9_5071;
float3 l9_5078=l9_5077.xyz;
float3 l9_5079=(l9_5078*2.0)-float3(1.0);
l9_5079*=l9_5064;
float3 l9_5080=l9_5079;
float3 l9_5081=l9_5080;
if ((int(Tweak_N331_tmp)!=0))
{
float4x4 l9_5082=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_5081=float3x3(l9_5082[0].xyz,l9_5082[1].xyz,l9_5082[2].xyz)*l9_5081;
}
l9_5062+=l9_5081;
}
if ((int(Tweak_N228_tmp)!=0))
{
float3 l9_5083=N111_AxisOrbit;
float3 l9_5084=N111_CenterOrbit;
if ((int(Tweak_N332_tmp)!=0))
{
float4x4 l9_5085=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_5083=float3x3(l9_5085[0].xyz,l9_5085[1].xyz,l9_5085[2].xyz)*N111_AxisOrbit;
float4x4 l9_5086=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_5084=N111_CenterOrbit+l9_5086[3].xyz;
}
float3 l9_5087=l9_5062;
float3 l9_5088=l9_5083;
float2 l9_5089=N111_MinMaxOrbitAngle;
float2 l9_5090=N111_MinMaxOrbitSpeed;
float3 l9_5091=l9_5084;
float2 l9_5092=l9_4675;
float l9_5093=mix(l9_5089.x,l9_5089.y,l9_5092.x);
float l9_5094=tempGlobals.gTimeElapsed;
float l9_5095=l9_5094*mix(l9_5090.x,l9_5090.y,l9_5092.y);
l9_5093+=l9_5095;
float3 l9_5096=l9_5088;
float l9_5097=l9_5093;
float3 l9_5098=l9_5096;
float l9_5099=l9_5097;
float3 l9_5100=normalize(l9_5098);
float l9_5101=sin(radians(l9_5099));
float l9_5102=cos(radians(l9_5099));
float l9_5103=1.0-l9_5102;
float3x3 l9_5104=float3x3(float3(((l9_5103*l9_5100.x)*l9_5100.x)+l9_5102,((l9_5103*l9_5100.x)*l9_5100.y)-(l9_5100.z*l9_5101),((l9_5103*l9_5100.z)*l9_5100.x)+(l9_5100.y*l9_5101)),float3(((l9_5103*l9_5100.x)*l9_5100.y)+(l9_5100.z*l9_5101),((l9_5103*l9_5100.y)*l9_5100.y)+l9_5102,((l9_5103*l9_5100.y)*l9_5100.z)-(l9_5100.x*l9_5101)),float3(((l9_5103*l9_5100.z)*l9_5100.x)-(l9_5100.y*l9_5101),((l9_5103*l9_5100.y)*l9_5100.z)+(l9_5100.x*l9_5101),((l9_5103*l9_5100.z)*l9_5100.z)+l9_5102));
float3x3 l9_5105=l9_5104;
float3x3 l9_5106=l9_5105;
float3 l9_5107=l9_5106*(l9_5087-l9_5091);
float3 l9_5108=l9_5107+l9_5091;
l9_5062=l9_5108;
}
N111_particlePositionO=l9_5062;
if ((MESHTYPE_tmp==0)||(int(TRAILS_tmp)!=0))
{
if ((MESHTYPE_tmp==0)||N111_isTrail)
{
float l9_5109=l9_4668;
float l9_5110=l9_4669;
float l9_5111=l9_4677;
float l9_5112=N111_sizeSpeed;
}
}
if (!(MESHTYPE_tmp==0))
{
if (!N111_isTrail)
{
float l9_5113=l9_4668;
float l9_5114=l9_4669;
float l9_5115=l9_4677;
float l9_5116=N111_sizeSpeed;
if ((int(ALIGNPARTICLES_tmp)!=0))
{
if (ALIGN_PARTICLES_TO_OPTION_tmp==3)
{
}
else
{
if (ALIGN_PARTICLES_TO_OPTION_tmp==0)
{
float l9_5117=0.001;
float l9_5118=((N111_gravity/2.0)*(l9_4676-l9_5117))*(l9_4676-l9_5117);
l9_4763.y-=l9_5118;
if ((int(FORCE_tmp)!=0))
{
float3 l9_5119=float3(((N111_localForce/float3(2.0))*(l9_4676-l9_5117))*(l9_4676-l9_5117));
l9_4764-=l9_5119;
}
if ((int(CUSTOMFORCE_tmp)!=0))
{
tempGlobals.N111_ParticleSpawnPosition=l9_4681;
float3 l9_5120=float3(0.0);
float3 l9_5121=float3(0.0);
l9_5121=tempGlobals.N111_ParticleSpawnPosition;
float l9_5122=0.0;
float l9_5123=(*sc_set0.UserUniforms).timeGlobal;
l9_5122=l9_5123;
float l9_5124=0.0;
float l9_5125=(*sc_set0.UserUniforms).externalTimeInput;
l9_5124=l9_5125;
float l9_5126=0.0;
float l9_5127=(*sc_set0.UserUniforms).externalSeed;
l9_5126=l9_5127;
float l9_5128=0.0;
float l9_5129=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_5128=l9_5129;
float2 l9_5130=float2(0.0);
float2 l9_5131=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_5130=l9_5131;
float l9_5132=0.0;
float l9_5133;
if ((int(TRAILS_tmp)!=0))
{
l9_5133=1.001;
}
else
{
l9_5133=0.001;
}
l9_5133-=0.001;
l9_5132=l9_5133;
float l9_5134=0.0;
float l9_5135=(*sc_set0.UserUniforms).trailLength;
l9_5134=l9_5135;
float4 l9_5136=float4(0.0);
l9_5136=tempGlobals.VertexColor;
float l9_5137=0.0;
l9_5137=l9_5136.x;
float l9_5138=0.0;
float l9_5139=l9_5132;
bool l9_5140=(l9_5139*1.0)!=0.0;
bool l9_5141;
if (l9_5140)
{
l9_5141=(l9_5137*1.0)!=0.0;
}
else
{
l9_5141=l9_5140;
}
l9_5138=float(l9_5141);
float3 l9_5142=float3(0.0);
float l9_5143=0.0;
float l9_5144=l9_5122;
float l9_5145=l9_5124;
float l9_5146=l9_5126;
float l9_5147=l9_5128;
float2 l9_5148=l9_5130;
float l9_5149=l9_5134;
float l9_5150=l9_5138;
ssGlobals l9_5151=tempGlobals;
tempGlobals=l9_5151;
float3 l9_5152=float3(0.0);
float l9_5153=0.0;
N181_timeGlobal=l9_5144;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_5145;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_5146;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_5147;
N181_lifeTimeMinMax=l9_5148;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_5149;
N181_isTrailCondition=l9_5150!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_5154=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_5155=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_5154=length(float4(1.0)*l9_5155);
}
N181_globalSeed=N181_externalSeed+l9_5154;
int l9_5156=0;
l9_5156=int(tempGlobals.gInstanceID+0.5);
int l9_5157=l9_5156;
float l9_5158=float(l9_5157);
int l9_5159=int(l9_5158);
int l9_5160=l9_5159^(l9_5159*15299);
int l9_5161=l9_5160;
int l9_5162=l9_5161;
int l9_5163=((l9_5162*((l9_5162*1471343)+101146501))+1559861749)&2147483647;
int l9_5164=l9_5163;
int l9_5165=l9_5161*1399;
int l9_5166=((l9_5165*((l9_5165*1471343)+101146501))+1559861749)&2147483647;
int l9_5167=l9_5166;
int l9_5168=l9_5161*7177;
int l9_5169=((l9_5168*((l9_5168*1471343)+101146501))+1559861749)&2147483647;
int l9_5170=l9_5169;
int l9_5171=l9_5164;
float l9_5172=float(l9_5171)*4.6566129e-10;
int l9_5173=l9_5167;
float l9_5174=float(l9_5173)*4.6566129e-10;
int l9_5175=l9_5170;
float l9_5176=float(l9_5175)*4.6566129e-10;
float3 l9_5177=float3(l9_5172,l9_5174,l9_5176);
float3 l9_5178=l9_5177;
N181_particleSeed=l9_5178;
float l9_5179=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_5180;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_5180=N181_lifeTimeMinMax;
}
else
{
l9_5180=float2(N181_lifeTimeConstant);
}
float2 l9_5181=l9_5180;
float l9_5182=fast::max(l9_5181.x,0.0099999998);
float l9_5183=fast::max(l9_5181.y,0.0099999998);
float l9_5184=tempGlobals.gTimeElapsed;
float l9_5185=l9_5184;
if (N181_ENABLE_EXTERNALTIME)
{
l9_5185=N181_externalTime;
}
float l9_5186=l9_5185;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_5186=N181_timeGlobal*l9_5185;
}
else
{
float l9_5187=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_5187=N181_trailLength;
}
}
float l9_5188=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_5189=0.0;
l9_5189=tempGlobals.gInstanceRatio;
float l9_5190=l9_5189;
int l9_5191=0;
l9_5191=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_5192=l9_5191;
l9_5188=fast::max(l9_5190*(1.0-(1.0/float(l9_5192))),0.0);
}
else
{
l9_5188=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_5193=fract(((l9_5185*N181_timeGlobal)*(1.0/(l9_5181.y+l9_5187)))+l9_5188);
l9_5186=l9_5193*(l9_5181.y+l9_5187);
}
float l9_5194=mix(l9_5186/l9_5182,l9_5186/l9_5183,l9_5179);
float l9_5195=fast::clamp(l9_5194,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_5186,l9_5195);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_5196=tempGlobals.Surface_UVCoord0;
l9_5186-=(l9_5196.y*N181_trailLength);
l9_5194=mix(l9_5186/l9_5182,l9_5186/l9_5183,l9_5179);
l9_5195=fast::clamp(l9_5194,0.0,1.0);
}
}
N181_timeValues=float4(l9_5181,l9_5186,l9_5195);
l9_5152=N181_particleSeed;
l9_5153=N181_isTrail;
l9_5142=l9_5152;
l9_5143=l9_5153;
float l9_5197=0.0;
float l9_5198=(*sc_set0.UserUniforms).attractRepelForceStrength;
l9_5197=l9_5198;
float3 l9_5199=float3(0.0);
float3 l9_5200=(*sc_set0.UserUniforms).customForceOrigin;
l9_5199=l9_5200;
float3 l9_5201=float3(0.0);
float3 l9_5202=l9_5121;
float3 l9_5203=l9_5142;
float l9_5204=l9_5197;
float3 l9_5205=l9_5199;
ssGlobals l9_5206=tempGlobals;
tempGlobals=l9_5206;
float3 l9_5207=float3(0.0);
N223_OnOff=(int(Tweak_N131_tmp)!=0);
N223_ParticleSpawnPosition=l9_5202;
N223_ParticleSeed=l9_5203;
N223_Strength=l9_5204;
N223_ForceOrigin=l9_5205;
N223_CustomForce=float3(0.0);
float4x4 l9_5208=(*sc_set0.UserUniforms).sc_ModelMatrix;
float4 l9_5209=l9_5208*float4(N223_ParticleSpawnPosition,1.0);
if (N223_OnOff)
{
float3 l9_5210=N223_ForceOrigin;
float3 l9_5211=l9_5209.xyz;
float l9_5212=N223_Strength;
float3 l9_5213=float3(0.0);
if (all(l9_5210==l9_5211))
{
int l9_5214=0;
l9_5214=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_5215=l9_5214;
float3 l9_5216=N223_ParticleSeed*float(l9_5215);
int l9_5217=int(l9_5216.x);
int l9_5218=int(l9_5216.y);
int l9_5219=int(l9_5216.z);
int l9_5220=((l9_5217*15299)^(l9_5218*30133))^(l9_5219*17539);
int l9_5221=l9_5220;
int l9_5222=l9_5221;
int l9_5223=((l9_5222*((l9_5222*1471343)+101146501))+1559861749)&2147483647;
int l9_5224=l9_5223;
int l9_5225=l9_5221*1399;
int l9_5226=((l9_5225*((l9_5225*1471343)+101146501))+1559861749)&2147483647;
int l9_5227=l9_5226;
int l9_5228=l9_5221*7177;
int l9_5229=((l9_5228*((l9_5228*1471343)+101146501))+1559861749)&2147483647;
int l9_5230=l9_5229;
int l9_5231=l9_5224;
float l9_5232=float(l9_5231)*4.6566129e-10;
int l9_5233=l9_5227;
float l9_5234=float(l9_5233)*4.6566129e-10;
int l9_5235=l9_5230;
float l9_5236=float(l9_5235)*4.6566129e-10;
float3 l9_5237=float3(l9_5232,l9_5234,l9_5236);
float3 l9_5238=l9_5237;
l9_5213=normalize((l9_5238-float3(0.5))*2.0);
}
else
{
l9_5213=normalize(l9_5210-l9_5211);
}
float3 l9_5239=l9_5213*l9_5212;
N223_CustomForce+=l9_5239;
}
l9_5207=N223_CustomForce;
l9_5201=l9_5207;
float3 l9_5240=float3(0.0);
l9_5240=tempGlobals.N111_ParticleSpawnPosition;
float3 l9_5241=float3(0.0);
float3 l9_5242=(*sc_set0.UserUniforms).Tex3dScale;
l9_5241=l9_5242;
float3 l9_5243=float3(0.0);
float3 l9_5244=(*sc_set0.UserUniforms).Tex3dScrollSpeed;
l9_5243=l9_5244;
float3 l9_5245=float3(0.0);
float3 l9_5246=(*sc_set0.UserUniforms).Tex3dForceStrength;
l9_5245=l9_5246;
float3 l9_5247=float3(0.0);
float3 l9_5248=l9_5240;
float3 l9_5249=l9_5241;
float3 l9_5250=l9_5243;
float3 l9_5251=l9_5245;
ssGlobals l9_5252=tempGlobals;
tempGlobals=l9_5252;
float3 l9_5253=float3(0.0);
N202_OnOff=(int(Tweak_N133_tmp)!=0);
N202_ParticleSpawnPosition=l9_5248;
N202_ScaleTexture=l9_5249;
N202_ScrollSpeed=l9_5250;
N202_Strength=l9_5251;
N202_CustomForce=float3(0.0);
if (N202_OnOff)
{
float3 l9_5254=N202_ParticleSpawnPosition;
float3 l9_5255=N202_Strength;
float3 l9_5256=l9_5254;
float l9_5257=tempGlobals.gTimeElapsed;
float3 l9_5258=float3(l9_5257)*(N202_ScrollSpeed*0.1);
l9_5256/=(N202_ScaleTexture*2.0);
l9_5256+=l9_5258;
float3 l9_5259=l9_5256;
float4 l9_5260=float4(0.0);
float3 l9_5261=l9_5259;
bool l9_5262=false;
float l9_5263=0.0;
float4 l9_5264;
if (l9_5262)
{
l9_5264=sc_set0.Tex3d.sample(sc_set0.Tex3dSmpSC,l9_5261,level(l9_5263));
}
else
{
l9_5264=sc_set0.Tex3d.sample(sc_set0.Tex3dSmpSC,l9_5261,bias(l9_5263));
}
float4 l9_5265=l9_5264;
l9_5260=l9_5265;
float4 l9_5266=l9_5260;
float3 l9_5267=l9_5266.xyz;
float3 l9_5268=(l9_5267*2.0)-float3(1.0);
l9_5268*=l9_5255;
float3 l9_5269=l9_5268;
N202_CustomForce+=l9_5269;
}
l9_5253=N202_CustomForce;
l9_5247=l9_5253;
float3 l9_5270=float3(0.0);
l9_5270=tempGlobals.N155_helixDirection;
float3 l9_5271=float3(0.0);
l9_5271=tempGlobals.N319_curveDirection;
float3 l9_5272=float3(0.0);
float3 l9_5273=(*sc_set0.UserUniforms).Tweak_N314;
l9_5272=l9_5273;
float3 l9_5274=float3(0.0);
float l9_5275=l9_5143;
float3 l9_5276=l9_5270;
float3 l9_5277=l9_5271;
float3 l9_5278=l9_5272;
ssGlobals l9_5279=tempGlobals;
tempGlobals=l9_5279;
float3 l9_5280=float3(0.0);
N277_OnOff=(int(Tweak_N313_tmp)!=0);
N277_isTrail=l9_5275!=0.0;
N277_helixDir=l9_5276;
N277_curveDir=l9_5277;
N277_Strength=l9_5278;
N277_Path=NODE_248_DROPLIST_ITEM_tmp;
N277_DirectionForce=float3(0.0);
if (N277_OnOff||N277_isTrail)
{
float3 l9_5281;
if (N277_Path==5)
{
l9_5281=N277_helixDir;
}
else
{
bool3 l9_5282=bool3(N277_Path==6);
l9_5281=float3(l9_5282.x ? N277_curveDir.x : float3(0.0).x,l9_5282.y ? N277_curveDir.y : float3(0.0).y,l9_5282.z ? N277_curveDir.z : float3(0.0).z);
}
float3 l9_5283=l9_5281;
float3 l9_5284=l9_5283;
float3 l9_5285=l9_5284;
if (N277_OnOff)
{
N277_DirectionForce+=(l9_5285*N277_Strength);
}
}
l9_5280=N277_DirectionForce;
l9_5274=l9_5280;
float3 l9_5286=float3(0.0);
l9_5286=(l9_5201+l9_5247)+l9_5274;
l9_5120=l9_5286;
float3 l9_5287=l9_5120;
float3 l9_5288=((l9_5287/float3(2.0))*(l9_4676-l9_5117))*(l9_4676-l9_5117);
l9_4765-=l9_5288;
}
}
}
}
else
{
}
}
}
param_117=N111_particlePositionO;
particlePositionO_N111=param_117;
float2 ScreenUV_N340=float2(0.0);
float3 param_119=particlePositionO_N111;
ssGlobals param_121=Globals;
tempGlobals=param_121;
float2 param_120=float2(0.0);
N340_particlePosition=param_119;
int l9_5289=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_5289=0;
}
else
{
l9_5289=in.varStereoViewID;
}
int l9_5290=l9_5289;
float4x4 l9_5291=(*sc_set0.UserUniforms).sc_ViewProjectionMatrixArray[l9_5290];
float4 l9_5292=l9_5291*float4(N340_particlePosition,1.0);
float2 l9_5293=((l9_5292.xy/float2(l9_5292.w))*0.5)+float2(0.5);
N340_ScreenUV=l9_5293;
param_120=N340_ScreenUV;
ScreenUV_N340=param_120;
float4 ColorOut_N338=float4(0.0);
float4 param_122=ColorOut_N322;
float param_123=Output_N151;
float param_124=Output_N337;
float2 param_125=ScreenUV_N340;
ssGlobals param_127=Globals;
tempGlobals=param_127;
float4 param_126=float4(0.0);
N338_ColorIn=param_122;
N338_texMask=param_123!=0.0;
N338_texMaskInvert=param_124!=0.0;
N338_screenUV=param_125;
float4 l9_5294=N338_ColorIn;
float l9_5295=1.0;
if (N338_texMask)
{
float2 l9_5296=N338_screenUV;
float2 l9_5297=l9_5296;
float4 l9_5298=float4(0.0);
int l9_5299;
if ((int(segTexHasSwappedViews_tmp)!=0))
{
int l9_5300=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_5300=0;
}
else
{
l9_5300=in.varStereoViewID;
}
int l9_5301=l9_5300;
l9_5299=1-l9_5301;
}
else
{
int l9_5302=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_5302=0;
}
else
{
l9_5302=in.varStereoViewID;
}
int l9_5303=l9_5302;
l9_5299=l9_5303;
}
int l9_5304=l9_5299;
int l9_5305=segTexLayout_tmp;
int l9_5306=l9_5304;
float2 l9_5307=l9_5297;
bool l9_5308=(int(SC_USE_UV_TRANSFORM_segTex_tmp)!=0);
float3x3 l9_5309=(*sc_set0.UserUniforms).segTexTransform;
int2 l9_5310=int2(SC_SOFTWARE_WRAP_MODE_U_segTex_tmp,SC_SOFTWARE_WRAP_MODE_V_segTex_tmp);
bool l9_5311=(int(SC_USE_UV_MIN_MAX_segTex_tmp)!=0);
float4 l9_5312=(*sc_set0.UserUniforms).segTexUvMinMax;
bool l9_5313=(int(SC_USE_CLAMP_TO_BORDER_segTex_tmp)!=0);
float4 l9_5314=(*sc_set0.UserUniforms).segTexBorderColor;
float l9_5315=0.0;
bool l9_5316=l9_5313&&(!l9_5311);
float l9_5317=1.0;
float l9_5318=l9_5307.x;
int l9_5319=l9_5310.x;
if (l9_5319==1)
{
l9_5318=fract(l9_5318);
}
else
{
if (l9_5319==2)
{
float l9_5320=fract(l9_5318);
float l9_5321=l9_5318-l9_5320;
float l9_5322=step(0.25,fract(l9_5321*0.5));
l9_5318=mix(l9_5320,1.0-l9_5320,fast::clamp(l9_5322,0.0,1.0));
}
}
l9_5307.x=l9_5318;
float l9_5323=l9_5307.y;
int l9_5324=l9_5310.y;
if (l9_5324==1)
{
l9_5323=fract(l9_5323);
}
else
{
if (l9_5324==2)
{
float l9_5325=fract(l9_5323);
float l9_5326=l9_5323-l9_5325;
float l9_5327=step(0.25,fract(l9_5326*0.5));
l9_5323=mix(l9_5325,1.0-l9_5325,fast::clamp(l9_5327,0.0,1.0));
}
}
l9_5307.y=l9_5323;
if (l9_5311)
{
bool l9_5328=l9_5313;
bool l9_5329;
if (l9_5328)
{
l9_5329=l9_5310.x==3;
}
else
{
l9_5329=l9_5328;
}
float l9_5330=l9_5307.x;
float l9_5331=l9_5312.x;
float l9_5332=l9_5312.z;
bool l9_5333=l9_5329;
float l9_5334=l9_5317;
float l9_5335=fast::clamp(l9_5330,l9_5331,l9_5332);
float l9_5336=step(abs(l9_5330-l9_5335),9.9999997e-06);
l9_5334*=(l9_5336+((1.0-float(l9_5333))*(1.0-l9_5336)));
l9_5330=l9_5335;
l9_5307.x=l9_5330;
l9_5317=l9_5334;
bool l9_5337=l9_5313;
bool l9_5338;
if (l9_5337)
{
l9_5338=l9_5310.y==3;
}
else
{
l9_5338=l9_5337;
}
float l9_5339=l9_5307.y;
float l9_5340=l9_5312.y;
float l9_5341=l9_5312.w;
bool l9_5342=l9_5338;
float l9_5343=l9_5317;
float l9_5344=fast::clamp(l9_5339,l9_5340,l9_5341);
float l9_5345=step(abs(l9_5339-l9_5344),9.9999997e-06);
l9_5343*=(l9_5345+((1.0-float(l9_5342))*(1.0-l9_5345)));
l9_5339=l9_5344;
l9_5307.y=l9_5339;
l9_5317=l9_5343;
}
float2 l9_5346=l9_5307;
bool l9_5347=l9_5308;
float3x3 l9_5348=l9_5309;
if (l9_5347)
{
l9_5346=float2((l9_5348*float3(l9_5346,1.0)).xy);
}
float2 l9_5349=l9_5346;
l9_5307=l9_5349;
float l9_5350=l9_5307.x;
int l9_5351=l9_5310.x;
bool l9_5352=l9_5316;
float l9_5353=l9_5317;
if ((l9_5351==0)||(l9_5351==3))
{
float l9_5354=l9_5350;
float l9_5355=0.0;
float l9_5356=1.0;
bool l9_5357=l9_5352;
float l9_5358=l9_5353;
float l9_5359=fast::clamp(l9_5354,l9_5355,l9_5356);
float l9_5360=step(abs(l9_5354-l9_5359),9.9999997e-06);
l9_5358*=(l9_5360+((1.0-float(l9_5357))*(1.0-l9_5360)));
l9_5354=l9_5359;
l9_5350=l9_5354;
l9_5353=l9_5358;
}
l9_5307.x=l9_5350;
l9_5317=l9_5353;
float l9_5361=l9_5307.y;
int l9_5362=l9_5310.y;
bool l9_5363=l9_5316;
float l9_5364=l9_5317;
if ((l9_5362==0)||(l9_5362==3))
{
float l9_5365=l9_5361;
float l9_5366=0.0;
float l9_5367=1.0;
bool l9_5368=l9_5363;
float l9_5369=l9_5364;
float l9_5370=fast::clamp(l9_5365,l9_5366,l9_5367);
float l9_5371=step(abs(l9_5365-l9_5370),9.9999997e-06);
l9_5369*=(l9_5371+((1.0-float(l9_5368))*(1.0-l9_5371)));
l9_5365=l9_5370;
l9_5361=l9_5365;
l9_5364=l9_5369;
}
l9_5307.y=l9_5361;
l9_5317=l9_5364;
float2 l9_5372=l9_5307;
int l9_5373=l9_5305;
int l9_5374=l9_5306;
float l9_5375=l9_5315;
float2 l9_5376=l9_5372;
int l9_5377=l9_5373;
int l9_5378=l9_5374;
float3 l9_5379=float3(0.0);
if (l9_5377==0)
{
l9_5379=float3(l9_5376,0.0);
}
else
{
if (l9_5377==1)
{
l9_5379=float3(l9_5376.x,(l9_5376.y*0.5)+(0.5-(float(l9_5378)*0.5)),0.0);
}
else
{
l9_5379=float3(l9_5376,float(l9_5378));
}
}
float3 l9_5380=l9_5379;
float3 l9_5381=l9_5380;
float4 l9_5382=sc_set0.segTex.sample(sc_set0.segTexSmpSC,l9_5381.xy,bias(l9_5375));
float4 l9_5383=l9_5382;
if (l9_5313)
{
l9_5383=mix(l9_5314,l9_5383,float4(l9_5317));
}
float4 l9_5384=l9_5383;
l9_5298=l9_5384;
float4 l9_5385=l9_5298;
float l9_5386=l9_5385.x;
if (N338_texMaskInvert)
{
l9_5386=1.0-l9_5386;
}
float l9_5387=l9_5386;
l9_5295=l9_5387;
}
l9_5294.w*=l9_5295;
N338_ColorOut=l9_5294;
param_126=N338_ColorOut;
ColorOut_N338=param_126;
FinalColor=ColorOut_N338;
float4 param_128=FinalColor;
if ((int(sc_ProjectiveShadowsCaster_tmp)!=0))
{
float4 l9_5388=param_128;
float4 l9_5389=l9_5388;
float l9_5390=1.0;
if ((((int(sc_BlendMode_Normal_tmp)!=0)||(int(sc_BlendMode_AlphaToCoverage_tmp)!=0))||(int(sc_BlendMode_PremultipliedAlphaHardware_tmp)!=0))||(int(sc_BlendMode_PremultipliedAlphaAuto_tmp)!=0))
{
l9_5390=l9_5389.w;
}
else
{
if ((int(sc_BlendMode_PremultipliedAlpha_tmp)!=0))
{
l9_5390=fast::clamp(l9_5389.w*2.0,0.0,1.0);
}
else
{
if ((int(sc_BlendMode_AddWithAlphaFactor_tmp)!=0))
{
l9_5390=fast::clamp(dot(l9_5389.xyz,float3(l9_5389.w)),0.0,1.0);
}
else
{
if ((int(sc_BlendMode_AlphaTest_tmp)!=0))
{
l9_5390=1.0;
}
else
{
if ((int(sc_BlendMode_Multiply_tmp)!=0))
{
l9_5390=(1.0-dot(l9_5389.xyz,float3(0.33333001)))*l9_5389.w;
}
else
{
if ((int(sc_BlendMode_MultiplyOriginal_tmp)!=0))
{
l9_5390=(1.0-fast::clamp(dot(l9_5389.xyz,float3(1.0)),0.0,1.0))*l9_5389.w;
}
else
{
if ((int(sc_BlendMode_ColoredGlass_tmp)!=0))
{
l9_5390=fast::clamp(dot(l9_5389.xyz,float3(1.0)),0.0,1.0)*l9_5389.w;
}
else
{
if ((int(sc_BlendMode_Add_tmp)!=0))
{
l9_5390=fast::clamp(dot(l9_5389.xyz,float3(1.0)),0.0,1.0);
}
else
{
if ((int(sc_BlendMode_AddWithAlphaFactor_tmp)!=0))
{
l9_5390=fast::clamp(dot(l9_5389.xyz,float3(1.0)),0.0,1.0)*l9_5389.w;
}
else
{
if ((int(sc_BlendMode_Screen_tmp)!=0))
{
l9_5390=dot(l9_5389.xyz,float3(0.33333001))*l9_5389.w;
}
else
{
if ((int(sc_BlendMode_Min_tmp)!=0))
{
l9_5390=1.0-fast::clamp(dot(l9_5389.xyz,float3(1.0)),0.0,1.0);
}
else
{
if ((int(sc_BlendMode_Max_tmp)!=0))
{
l9_5390=fast::clamp(dot(l9_5389.xyz,float3(1.0)),0.0,1.0);
}
}
}
}
}
}
}
}
}
}
}
}
float l9_5391=l9_5390;
float l9_5392=l9_5391;
float l9_5393=(*sc_set0.UserUniforms).sc_ShadowDensity*l9_5392;
float3 l9_5394=mix((*sc_set0.UserUniforms).sc_ShadowColor.xyz,(*sc_set0.UserUniforms).sc_ShadowColor.xyz*l9_5388.xyz,float3((*sc_set0.UserUniforms).sc_ShadowColor.w));
float4 l9_5395=float4(l9_5394.x,l9_5394.y,l9_5394.z,l9_5393);
param_128=l9_5395;
}
else
{
if ((int(sc_RenderAlphaToColor_tmp)!=0))
{
param_128=float4(param_128.w);
}
else
{
if ((int(sc_BlendMode_Custom_tmp)!=0))
{
float4 l9_5396=param_128;
float4 l9_5397=float4(0.0);
float4 l9_5398=float4(0.0);
if ((int(sc_FramebufferFetch_tmp)!=0))
{
float4 l9_5399=out.sc_FragData0;
l9_5398=l9_5399;
}
else
{
float4 l9_5400=gl_FragCoord;
float2 l9_5401=l9_5400.xy*(*sc_set0.UserUniforms).sc_CurrentRenderTargetDims.zw;
float2 l9_5402=l9_5401;
float2 l9_5403=float2(0.0);
if (sc_StereoRenderingMode_tmp==1)
{
int l9_5404=1;
int l9_5405=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_5405=0;
}
else
{
l9_5405=in.varStereoViewID;
}
int l9_5406=l9_5405;
int l9_5407=l9_5406;
float3 l9_5408=float3(l9_5402,0.0);
int l9_5409=l9_5404;
int l9_5410=l9_5407;
if (l9_5409==1)
{
l9_5408.y=((2.0*l9_5408.y)+float(l9_5410))-1.0;
}
float2 l9_5411=l9_5408.xy;
l9_5403=l9_5411;
}
else
{
l9_5403=l9_5402;
}
float2 l9_5412=l9_5403;
float2 l9_5413=l9_5412;
float2 l9_5414=l9_5413;
float2 l9_5415=l9_5414;
float l9_5416=0.0;
int l9_5417;
if ((int(sc_ScreenTextureHasSwappedViews_tmp)!=0))
{
int l9_5418=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_5418=0;
}
else
{
l9_5418=in.varStereoViewID;
}
int l9_5419=l9_5418;
l9_5417=1-l9_5419;
}
else
{
int l9_5420=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_5420=0;
}
else
{
l9_5420=in.varStereoViewID;
}
int l9_5421=l9_5420;
l9_5417=l9_5421;
}
int l9_5422=l9_5417;
float2 l9_5423=l9_5415;
int l9_5424=sc_ScreenTextureLayout_tmp;
int l9_5425=l9_5422;
float l9_5426=l9_5416;
float2 l9_5427=l9_5423;
int l9_5428=l9_5424;
int l9_5429=l9_5425;
float3 l9_5430=float3(0.0);
if (l9_5428==0)
{
l9_5430=float3(l9_5427,0.0);
}
else
{
if (l9_5428==1)
{
l9_5430=float3(l9_5427.x,(l9_5427.y*0.5)+(0.5-(float(l9_5429)*0.5)),0.0);
}
else
{
l9_5430=float3(l9_5427,float(l9_5429));
}
}
float3 l9_5431=l9_5430;
float3 l9_5432=l9_5431;
float4 l9_5433=sc_set0.sc_ScreenTexture.sample(sc_set0.sc_ScreenTextureSmpSC,l9_5432.xy,bias(l9_5426));
float4 l9_5434=l9_5433;
float4 l9_5435=l9_5434;
l9_5398=l9_5435;
}
float4 l9_5436=l9_5398;
float3 l9_5437=l9_5436.xyz;
float3 l9_5438=l9_5437;
float3 l9_5439=l9_5396.xyz;
float3 l9_5440=definedBlend(l9_5438,l9_5439,in.varStereoViewID,(*sc_set0.UserUniforms),sc_set0.intensityTexture,sc_set0.intensityTextureSmpSC);
l9_5397=float4(l9_5440.x,l9_5440.y,l9_5440.z,l9_5397.w);
float3 l9_5441=mix(l9_5437,l9_5397.xyz,float3(l9_5396.w));
l9_5397=float4(l9_5441.x,l9_5441.y,l9_5441.z,l9_5397.w);
l9_5397.w=1.0;
float4 l9_5442=l9_5397;
param_128=l9_5442;
}
else
{
if ((int(sc_Voxelization_tmp)!=0))
{
float4 l9_5443=float4(in.varScreenPos.xyz,1.0);
param_128=l9_5443;
}
else
{
if ((int(sc_OutputBounds_tmp)!=0))
{
float4 l9_5444=gl_FragCoord;
float l9_5445=fast::clamp(abs(l9_5444.z),0.0,1.0);
float4 l9_5446=float4(l9_5445,1.0-l9_5445,1.0,1.0);
param_128=l9_5446;
}
else
{
float4 l9_5447=param_128;
float4 l9_5448=float4(0.0);
if ((int(sc_BlendMode_MultiplyOriginal_tmp)!=0))
{
l9_5448=float4(mix(float3(1.0),l9_5447.xyz,float3(l9_5447.w)),l9_5447.w);
}
else
{
if ((int(sc_BlendMode_Screen_tmp)!=0)||(int(sc_BlendMode_PremultipliedAlphaAuto_tmp)!=0))
{
float l9_5449=l9_5447.w;
if ((int(sc_BlendMode_PremultipliedAlphaAuto_tmp)!=0))
{
l9_5449=fast::clamp(l9_5449,0.0,1.0);
}
l9_5448=float4(l9_5447.xyz*l9_5449,l9_5449);
}
else
{
l9_5448=l9_5447;
}
}
float4 l9_5450=l9_5448;
param_128=l9_5450;
}
}
}
}
}
float4 l9_5451=param_128;
FinalColor=l9_5451;
if ((*sc_set0.UserUniforms).PreviewEnabled==1)
{
if (PreviewInfo.Saved)
{
FinalColor=float4(PreviewInfo.Color);
}
else
{
FinalColor=float4(0.0);
}
}
float4 l9_5452=float4(0.0);
l9_5452=float4(0.0);
float4 l9_5453=l9_5452;
float4 Cost=l9_5453;
if (Cost.w>0.0)
{
FinalColor=Cost;
}
FinalColor=fast::max(FinalColor,float4(0.0));
float4 param_129=FinalColor;
FinalColor=sc_OutputMotionVectorIfNeeded(param_129,in.varPosAndMotion,in.varNormalAndMotion);
float4 param_130=FinalColor;
float4 l9_5454=param_130;
if (sc_ShaderCacheConstant_tmp!=0)
{
l9_5454.x+=((*sc_set0.UserUniforms).sc_UniformConstants.x*float(sc_ShaderCacheConstant_tmp));
}
out.sc_FragData0=l9_5454;
return out;
}
} // FRAGMENT SHADER

namespace SNAP_RECV {
struct ssGlobals
{
float gTimeElapsed;
float gTimeDelta;
float gTimeElapsedShifted;
float3 N155_helixDirection;
float3 N319_curveDirection;
float3 N111_ParticleSpawnPosition;
float3 SurfacePosition_WorldSpace;
float CameraFOV;
float2 Surface_UVCoord0;
float4 VertexColor;
float gInstanceID;
float3 BumpedNormal;
float3 ViewDirWS;
float3 PositionWS;
float3 VertexTangent_WorldSpace;
float3 VertexNormal_WorldSpace;
float3 VertexBinormal_WorldSpace;
float2 gScreenCoord;
float gInstanceRatio;
float3 SurfacePosition_ObjectSpace;
float3 VertexNormal_ObjectSpace;
};
struct sc_PointLight_t
{
int falloffEnabled;
float falloffEndDistance;
float negRcpFalloffEndDistance4;
float angleScale;
float angleOffset;
float3 direction;
float3 position;
float4 color;
};
struct sc_DirectionalLight_t
{
float3 direction;
float4 color;
};
struct sc_AmbientLight_t
{
float3 color;
float intensity;
};
struct sc_SphericalGaussianLight_t
{
float3 color;
float sharpness;
float3 axis;
};
struct sc_LightEstimationData_t
{
sc_SphericalGaussianLight_t sg[12];
float3 ambientLight;
};
struct sc_Camera_t
{
float3 position;
float aspect;
float2 clipPlanes;
};
struct userUniformsObj
{
sc_PointLight_t sc_PointLights[3];
sc_DirectionalLight_t sc_DirectionalLights[5];
sc_AmbientLight_t sc_AmbientLights[3];
sc_LightEstimationData_t sc_LightEstimationData;
float4 sc_EnvmapDiffuseSize;
float4 sc_EnvmapDiffuseDims;
float4 sc_EnvmapDiffuseView;
float4 sc_EnvmapSpecularSize;
float4 sc_EnvmapSpecularDims;
float4 sc_EnvmapSpecularView;
float3 sc_EnvmapRotation;
float sc_EnvmapExposure;
float3 sc_Sh[9];
float sc_ShIntensity;
float4 sc_Time;
float4 sc_UniformConstants;
float4 sc_GeometryInfo;
float4x4 sc_ModelViewProjectionMatrixArray[2];
float4x4 sc_ModelViewProjectionMatrixInverseArray[2];
float4x4 sc_ViewProjectionMatrixArray[2];
float4x4 sc_ViewProjectionMatrixInverseArray[2];
float4x4 sc_ModelViewMatrixArray[2];
float4x4 sc_ModelViewMatrixInverseArray[2];
float3x3 sc_ViewNormalMatrixArray[2];
float3x3 sc_ViewNormalMatrixInverseArray[2];
float4x4 sc_ProjectionMatrixArray[2];
float4x4 sc_ProjectionMatrixInverseArray[2];
float4x4 sc_ViewMatrixArray[2];
float4x4 sc_ViewMatrixInverseArray[2];
float4x4 sc_PrevFrameViewProjectionMatrixArray[2];
float4x4 sc_ModelMatrix;
float4x4 sc_ModelMatrixInverse;
float3x3 sc_NormalMatrix;
float3x3 sc_NormalMatrixInverse;
float4x4 sc_PrevFrameModelMatrix;
float4x4 sc_PrevFrameModelMatrixInverse;
float3 sc_LocalAabbMin;
float3 sc_LocalAabbMax;
float3 sc_WorldAabbMin;
float3 sc_WorldAabbMax;
float4 sc_WindowToViewportTransform;
float4 sc_CurrentRenderTargetDims;
sc_Camera_t sc_Camera;
float sc_ShadowDensity;
float4 sc_ShadowColor;
float4x4 sc_ProjectorMatrix;
float shaderComplexityValue;
float4 weights0;
float4 weights1;
float4 weights2;
float4 sc_StereoClipPlanes[2];
int sc_FallbackInstanceID;
float2 sc_TAAJitterOffset;
float strandWidth;
float strandTaper;
float4 sc_StrandDataMapTextureSize;
float clumpInstanceCount;
float clumpRadius;
float clumpTipScale;
float hairstyleInstanceCount;
float hairstyleNoise;
float4 sc_ScreenTextureSize;
float4 sc_ScreenTextureDims;
float4 sc_ScreenTextureView;
int sc_RayTracingReceiverEffectsMask;
float4 sc_RayTracingReflectionsSize;
float4 sc_RayTracingReflectionsDims;
float4 sc_RayTracingReflectionsView;
float4 sc_RayTracingGlobalIlluminationSize;
float4 sc_RayTracingGlobalIlluminationDims;
float4 sc_RayTracingGlobalIlluminationView;
float4 sc_RayTracingShadowsSize;
float4 sc_RayTracingShadowsDims;
float4 sc_RayTracingShadowsView;
float3 sc_RayTracingOriginScale;
uint sc_RayTracingReceiverMask;
float3 sc_RayTracingOriginScaleInv;
float3 sc_RayTracingOriginOffset;
uint sc_RayTracingReceiverId;
float4 voxelization_params_0;
float4 voxelization_params_frustum_lrbt;
float4 voxelization_params_frustum_nf;
float3 voxelization_params_camera_pos;
float4x4 sc_ModelMatrixVoxelization;
float correctedIntensity;
float4 intensityTextureSize;
float4 intensityTextureDims;
float4 intensityTextureView;
float3x3 intensityTextureTransform;
float4 intensityTextureUvMinMax;
float4 intensityTextureBorderColor;
float reflBlurWidth;
float reflBlurMinRough;
float reflBlurMaxRough;
int overrideTimeEnabled;
float overrideTimeElapsed[32];
float overrideTimeDelta;
int PreviewEnabled;
int PreviewNodeID;
float alphaTestThreshold;
float timeGlobal;
float externalTimeInput;
float externalSeed;
float lifeTimeConstant;
float2 lifeTimeMinMax;
float spawnDuration;
float trailLength;
float2 trailTaper;
float trailWidth;
float4 trailSizeRampTexSize;
float4 trailSizeRampTexDims;
float4 trailSizeRampTexView;
float3x3 trailSizeRampTexTransform;
float4 trailSizeRampTexUvMinMax;
float4 trailSizeRampTexBorderColor;
float Tweak_N255;
float Tweak_N254;
float3 Tweak_N252;
float3 Tweak_N253;
float Tweak_N224;
float3 Tweak_N250;
float3 Tweak_N251;
float volumeFill;
float Tweak_N238;
float Tweak_N16;
float Tweak_N234;
float Tweak_N239;
float2 Tweak_N240;
float3 Tweak_N241;
float3 Tweak_N242;
float Tweak_N226;
float Tweak_N243;
float Tweak_N257;
float Tweak_N258;
float2 Tweak_N259;
float3 Tweak_N260;
float3 Tweak_N261;
float Tweak_N262;
float Tweak_N263;
float3 Tweak_N236;
float3 Tweak_N237;
float3 Tweak_N264;
float Tweak_N232;
float Tweak_N233;
float Tweak_N231;
float Tweak_N304;
float Tweak_N229;
int Tweak_N280;
float3 Tweak_N157_curveData;
float4 sc_CurveAtlasSize;
float4 sc_CurveAtlasDims;
float4 sc_CurveAtlasView;
float3x3 sc_CurveAtlasTransform;
float4 sc_CurveAtlasUvMinMax;
float4 sc_CurveAtlasBorderColor;
float Tweak_N285;
float Tweak_N245;
float Tweak_N230;
int animated;
float Tweak_N279;
int Tweak_N303;
float2 Tweak_N336;
float3 Tweak_N293_curveData;
float3 Tweak_N305_curveData;
float3 Tweak_N297_curveData;
float Tweak_N298;
float3 Tweak_N330;
int Tweak_N308;
float Tweak_N294;
int Tweak_N339;
float2 Tweak_N342;
float Tweak_N301;
int Tweak_N274;
float3 Tweak_N299_curveData;
float Tweak_N302;
float Tweak_N318;
int Tweak_N271;
float Tweak_N273;
float2 Tweak_N270;
float2 Tweak_N272;
float Tweak_N269;
float Tweak_N275;
int Tweak_N161;
float3 spawnBox;
float3 spawnSphere;
float3 noiseMult;
float3 noiseFrequency;
float3 sNoiseMult;
float3 sNoiseFrequency;
float3 velocityMin;
float3 velocityMax;
float3 velocityDrag;
float4 velRampTextureSize;
float4 velRampTextureDims;
float4 velRampTextureView;
float3x3 velRampTextureTransform;
float4 velRampTextureUvMinMax;
float4 velRampTextureBorderColor;
float2 sizeStart;
float2 sizeEnd;
float2 sizeStartMax;
float2 sizeEndMax;
float3 sizeStart3D;
float3 sizeEnd3D;
float3 sizeStartMax3D;
float3 sizeEndMax3D;
float sizeSpeed;
float4 sizeRampTextureSize;
float4 sizeRampTextureDims;
float4 sizeRampTextureView;
float3x3 sizeRampTextureTransform;
float4 sizeRampTextureUvMinMax;
float4 sizeRampTextureBorderColor;
float gravity;
float3 localForce;
float attractRepelForceStrength;
float3 customForceOrigin;
float4 Tex3dSize;
float2 Tex3dDepth;
float3 Tex3dScale;
float3 Tex3dScrollSpeed;
float3 Tex3dForceStrength;
float3 Tweak_N314;
float sizeVelScale;
int IGNOREVEL;
int NORMALIZESCALETOTRANSFORM;
float2 velScaleMinMax;
float2 rotationRandom;
float2 rotationRate;
float2 rotationRandomX;
float2 rotationRateX;
float2 randomRotationY;
float2 rotationRateY;
float2 randomRotationZ;
float2 rotationRateZ;
float rotationDrag;
int CENTER_BBOX;
float4 displace3dTexSize;
float2 displace3dTexDepth;
float3 displaceScale;
float3 displaceSpeed;
float3 displaceStrength;
float3 orbitAxis;
float3 orbitCenter;
float2 orbitMinMaxAngle;
float2 orbitMinMaxSpeed;
float fadeDistanceVisible;
float fadeDistanceInvisible;
int circularMask;
int squareMask;
float maskTreshold;
float maskFeather;
float4 trailTexSize;
float4 trailTexDims;
float4 trailTexView;
float3x3 trailTexTransform;
float4 trailTexUvMinMax;
float4 trailTexBorderColor;
float4 trailColorRampTexSize;
float4 trailColorRampTexDims;
float4 trailColorRampTexView;
float3x3 trailColorRampTexTransform;
float4 trailColorRampTexUvMinMax;
float4 trailColorRampTexBorderColor;
float2 trailFadeStartEnd;
float2 trailFadeInOut;
float3 colorStart;
float3 colorEnd;
float3 colorMinStart;
float3 colorMinEnd;
float3 colorMaxStart;
float3 colorMaxEnd;
float alphaStart;
float alphaEnd;
float alphaMinStart;
float alphaMinEnd;
float alphaMaxStart;
float alphaMaxEnd;
float alphaDissolveMult;
float numValidFrames;
float2 gridSize;
float flipBookSpeedMult;
float flipBookRandomStart;
float4 colorRampTextureSize;
float4 colorRampTextureDims;
float4 colorRampTextureView;
float3x3 colorRampTextureTransform;
float4 colorRampTextureUvMinMax;
float4 colorRampTextureBorderColor;
float4 colorRampMult;
float4 mainTextureSize;
float4 mainTextureDims;
float4 mainTextureView;
float3x3 mainTextureTransform;
float4 mainTextureUvMinMax;
float4 mainTextureBorderColor;
float4 normalTexPBRSize;
float4 normalTexPBRDims;
float4 normalTexPBRView;
float3x3 normalTexPBRTransform;
float4 normalTexPBRUvMinMax;
float4 normalTexPBRBorderColor;
float metallic;
float roughness;
float intensityMatcap;
float4 matcapTexSize;
float4 matcapTexDims;
float4 matcapTexView;
float3x3 matcapTexTransform;
float4 matcapTexUvMinMax;
float4 matcapTexBorderColor;
float4 normalTexMatcapSize;
float4 normalTexMatcapDims;
float4 normalTexMatcapView;
float3x3 normalTexMatcapTransform;
float4 normalTexMatcapUvMinMax;
float4 normalTexMatcapBorderColor;
float4 depthMapSize;
float4 depthMapDims;
float4 depthMapView;
float3x3 depthMapTransform;
float4 depthMapUvMinMax;
float4 depthMapBorderColor;
float4 depthMapProjectionMatrixTerms;
float startFade;
float endFade;
float exponentFade;
int texMask;
int texMaskInvert;
float4 segTexSize;
float4 segTexDims;
float4 segTexView;
float3x3 segTexTransform;
float4 segTexUvMinMax;
float4 segTexBorderColor;
float Port_Input1_N119;
float3 Port_Default_N247;
float Port_Input1_N069;
float Port_Input1_N068;
float Port_Input1_N216;
float3 Port_Emissive_N014;
float3 Port_AO_N014;
float3 Port_SpecularAO_N014;
float Port_Import_N283;
float3 Port_Import_N286;
};
struct sc_Bone_t
{
float4 boneMatrix[3];
float4 normalMatrix[3];
};
struct sc_Bones_obj
{
sc_Bone_t sc_Bones[1];
};
struct sc_Set0
{
constant sc_Bones_obj* sc_BonesUBO [[id(0)]];
texture3d<float> Tex3d [[id(1)]];
texture2d<float> colorRampTexture [[id(2)]];
texture2d<float> depthMap [[id(3)]];
texture3d<float> displace3dTex [[id(4)]];
texture2d<float> intensityTexture [[id(5)]];
texture2d<float> mainTexture [[id(6)]];
texture2d<float> matcapTex [[id(7)]];
texture2d<float> normalTexMatcap [[id(8)]];
texture2d<float> normalTexPBR [[id(9)]];
texture2d<float> sc_CurveAtlas [[id(10)]];
texture2d<float> sc_EnvmapDiffuse [[id(11)]];
texture2d<float> sc_EnvmapSpecular [[id(12)]];
texture2d<float> sc_RayTracingGlobalIllumination [[id(21)]];
texture2d<float> sc_RayTracingReflections [[id(22)]];
texture2d<float> sc_RayTracingShadows [[id(23)]];
texture2d<float> sc_SSAOTexture [[id(24)]];
texture2d<float> sc_ScreenTexture [[id(25)]];
texture2d<float> sc_ShadowTexture [[id(26)]];
texture2d<float> segTex [[id(28)]];
texture2d<float> sizeRampTexture [[id(29)]];
texture2d<float> trailColorRampTex [[id(30)]];
texture2d<float> trailSizeRampTex [[id(31)]];
texture2d<float> trailTex [[id(32)]];
texture2d<float> velRampTexture [[id(33)]];
sampler Tex3dSmpSC [[id(34)]];
sampler colorRampTextureSmpSC [[id(35)]];
sampler depthMapSmpSC [[id(36)]];
sampler displace3dTexSmpSC [[id(37)]];
sampler intensityTextureSmpSC [[id(38)]];
sampler mainTextureSmpSC [[id(39)]];
sampler matcapTexSmpSC [[id(40)]];
sampler normalTexMatcapSmpSC [[id(41)]];
sampler normalTexPBRSmpSC [[id(42)]];
sampler sc_CurveAtlasSmpSC [[id(43)]];
sampler sc_EnvmapDiffuseSmpSC [[id(44)]];
sampler sc_EnvmapSpecularSmpSC [[id(45)]];
sampler sc_RayTracingGlobalIlluminationSmpSC [[id(47)]];
sampler sc_RayTracingReflectionsSmpSC [[id(48)]];
sampler sc_RayTracingShadowsSmpSC [[id(49)]];
sampler sc_SSAOTextureSmpSC [[id(50)]];
sampler sc_ScreenTextureSmpSC [[id(51)]];
sampler sc_ShadowTextureSmpSC [[id(52)]];
sampler segTexSmpSC [[id(54)]];
sampler sizeRampTextureSmpSC [[id(55)]];
sampler trailColorRampTexSmpSC [[id(56)]];
sampler trailSizeRampTexSmpSC [[id(57)]];
sampler trailTexSmpSC [[id(58)]];
sampler velRampTextureSmpSC [[id(59)]];
constant userUniformsObj* UserUniforms [[id(60)]];
};
struct main_recv_out
{
uint4 sc_RayTracingPositionAndMask [[color(0)]];
uint4 sc_RayTracingNormalAndMore [[color(1)]];
};
struct main_recv_in
{
float4 varPosAndMotion [[user(locn0)]];
float4 varNormalAndMotion [[user(locn1)]];
float4 varTangent [[user(locn2)]];
float4 varTex01 [[user(locn3)]];
float4 varScreenPos [[user(locn4)]];
float2 varScreenTexturePos [[user(locn5)]];
float varViewSpaceDepth [[user(locn6)]];
float2 varShadowTex [[user(locn7)]];
int varStereoViewID [[user(locn8)]];
float varClipDistance [[user(locn9)]];
float4 varColor [[user(locn10)]];
float4 PreviewVertexColor [[user(locn11)]];
float PreviewVertexSaved [[user(locn12)]];
float Interpolator_gInstanceID [[user(locn13)]];
float4 Interpolator0 [[user(locn14)]];
float4 Interpolator1 [[user(locn15)]];
float Interpolator_gInstanceRatio [[user(locn16)]];
};
// Implementation of the GLSL mod() function,which is slightly different than Metal fmod()
template<typename Tx,typename Ty>
Tx mod(Tx x,Ty y)
{
return x-y*floor(x/y);
}
// Implementation of the GLSL radians() function
template<typename T>
T radians(T d)
{
return d*T(0.01745329251);
}
float2 N111_pSize(thread const float& random1,thread const float& random2,thread const float& timeIn,thread const float& N111_sizeSpeed,thread bool& N111_isTrail,thread float2& N111_trailHeadTime,thread float& N111_trailSizeMult,thread float2& N111_sizeStart,thread float2& N111_sizeEnd,thread float2& N111_sizeStartMax,thread float2& N111_sizeEndMax,thread float3& N111_sizeStart3D,thread float3& N111_sizeEnd3D,thread float3& N111_sizeStartMax3D,thread float3& N111_sizeEndMax3D,thread int& varStereoViewID,constant userUniformsObj& UserUniforms,thread ssGlobals& tempGlobals,thread texture2d<float> trailSizeRampTex,thread sampler trailSizeRampTexSmpSC,thread texture2d<float> sizeRampTexture,thread sampler sizeRampTextureSmpSC)
{
float2 psizeStart=float2(0.0);
float2 psizeEnd=float2(0.0);
float normTime=timeIn;
if ((int(TRAILS_tmp)!=0))
{
if (!(TRAILBEHAVIOR_tmp!=0))
{
normTime=N111_trailHeadTime.y;
}
}
float param=normTime;
float param_1=N111_sizeSpeed;
float l9_0;
if (param<=0.0)
{
l9_0=0.0;
}
else
{
l9_0=pow(param,param_1);
}
float l9_1=l9_0;
float sizePow=l9_1;
if ((int(SIZEMINMAX_tmp)!=0))
{
if (MESHTYPE_tmp==0)
{
psizeStart=mix(N111_sizeStart,N111_sizeStartMax,float2(random1));
}
else
{
psizeStart=mix(N111_sizeStart3D.xy,N111_sizeStartMax3D.xy,float2(random1));
}
if ((int(SIZERAMP_tmp)!=0))
{
if ((int(ENABLE_SIZERAMPSTARTENDASBOUNDS_tmp)!=0))
{
if (MESHTYPE_tmp==0)
{
psizeEnd=mix(N111_sizeEnd,N111_sizeEndMax,float2(random2));
}
else
{
psizeEnd=mix(N111_sizeEnd3D.xy,N111_sizeEndMax3D.xy,float2(random1));
}
}
}
else
{
if (MESHTYPE_tmp==0)
{
psizeEnd=mix(N111_sizeEnd,N111_sizeEndMax,float2(random2));
}
else
{
psizeEnd=mix(N111_sizeEnd3D.xy,N111_sizeEndMax3D.xy,float2(random1));
}
}
}
else
{
if (MESHTYPE_tmp==0)
{
psizeStart=N111_sizeStart;
}
else
{
psizeStart=N111_sizeStart3D.xy;
}
if ((int(SIZERAMP_tmp)!=0))
{
if ((int(ENABLE_SIZERAMPSTARTENDASBOUNDS_tmp)!=0))
{
if (MESHTYPE_tmp==0)
{
psizeEnd=N111_sizeEnd;
}
else
{
psizeEnd=N111_sizeEnd3D.xy;
}
}
}
else
{
if (MESHTYPE_tmp==0)
{
psizeEnd=N111_sizeEnd;
}
else
{
psizeEnd=N111_sizeEnd3D.xy;
}
}
}
float2 sizeLife=mix(psizeStart,psizeEnd,float2(sizePow));
if (!(SC_DEVICE_CLASS_tmp>=2))
{
return sizeLife;
}
if ((int(SIZERAMP_tmp)!=0))
{
float sizeRampPanning=ceil(normTime*10000.0)/10000.0;
float2 l9_2=tempGlobals.Surface_UVCoord0;
float2 sizeRampUV=(l9_2/float2(10000.0,1.0))+float2(sizeRampPanning,0.0);
float2 param_2=sizeRampUV;
float4 l9_3=float4(0.0);
int l9_4;
if ((int(sizeRampTextureHasSwappedViews_tmp)!=0))
{
int l9_5=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_5=0;
}
else
{
l9_5=varStereoViewID;
}
int l9_6=l9_5;
l9_4=1-l9_6;
}
else
{
int l9_7=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_7=0;
}
else
{
l9_7=varStereoViewID;
}
int l9_8=l9_7;
l9_4=l9_8;
}
int l9_9=l9_4;
int l9_10=sizeRampTextureLayout_tmp;
int l9_11=l9_9;
float2 l9_12=param_2;
bool l9_13=(int(SC_USE_UV_TRANSFORM_sizeRampTexture_tmp)!=0);
float3x3 l9_14=UserUniforms.sizeRampTextureTransform;
int2 l9_15=int2(SC_SOFTWARE_WRAP_MODE_U_sizeRampTexture_tmp,SC_SOFTWARE_WRAP_MODE_V_sizeRampTexture_tmp);
bool l9_16=(int(SC_USE_UV_MIN_MAX_sizeRampTexture_tmp)!=0);
float4 l9_17=UserUniforms.sizeRampTextureUvMinMax;
bool l9_18=(int(SC_USE_CLAMP_TO_BORDER_sizeRampTexture_tmp)!=0);
float4 l9_19=UserUniforms.sizeRampTextureBorderColor;
float l9_20=0.0;
bool l9_21=l9_18&&(!l9_16);
float l9_22=1.0;
float l9_23=l9_12.x;
int l9_24=l9_15.x;
if (l9_24==1)
{
l9_23=fract(l9_23);
}
else
{
if (l9_24==2)
{
float l9_25=fract(l9_23);
float l9_26=l9_23-l9_25;
float l9_27=step(0.25,fract(l9_26*0.5));
l9_23=mix(l9_25,1.0-l9_25,fast::clamp(l9_27,0.0,1.0));
}
}
l9_12.x=l9_23;
float l9_28=l9_12.y;
int l9_29=l9_15.y;
if (l9_29==1)
{
l9_28=fract(l9_28);
}
else
{
if (l9_29==2)
{
float l9_30=fract(l9_28);
float l9_31=l9_28-l9_30;
float l9_32=step(0.25,fract(l9_31*0.5));
l9_28=mix(l9_30,1.0-l9_30,fast::clamp(l9_32,0.0,1.0));
}
}
l9_12.y=l9_28;
if (l9_16)
{
bool l9_33=l9_18;
bool l9_34;
if (l9_33)
{
l9_34=l9_15.x==3;
}
else
{
l9_34=l9_33;
}
float l9_35=l9_12.x;
float l9_36=l9_17.x;
float l9_37=l9_17.z;
bool l9_38=l9_34;
float l9_39=l9_22;
float l9_40=fast::clamp(l9_35,l9_36,l9_37);
float l9_41=step(abs(l9_35-l9_40),9.9999997e-06);
l9_39*=(l9_41+((1.0-float(l9_38))*(1.0-l9_41)));
l9_35=l9_40;
l9_12.x=l9_35;
l9_22=l9_39;
bool l9_42=l9_18;
bool l9_43;
if (l9_42)
{
l9_43=l9_15.y==3;
}
else
{
l9_43=l9_42;
}
float l9_44=l9_12.y;
float l9_45=l9_17.y;
float l9_46=l9_17.w;
bool l9_47=l9_43;
float l9_48=l9_22;
float l9_49=fast::clamp(l9_44,l9_45,l9_46);
float l9_50=step(abs(l9_44-l9_49),9.9999997e-06);
l9_48*=(l9_50+((1.0-float(l9_47))*(1.0-l9_50)));
l9_44=l9_49;
l9_12.y=l9_44;
l9_22=l9_48;
}
float2 l9_51=l9_12;
bool l9_52=l9_13;
float3x3 l9_53=l9_14;
if (l9_52)
{
l9_51=float2((l9_53*float3(l9_51,1.0)).xy);
}
float2 l9_54=l9_51;
l9_12=l9_54;
float l9_55=l9_12.x;
int l9_56=l9_15.x;
bool l9_57=l9_21;
float l9_58=l9_22;
if ((l9_56==0)||(l9_56==3))
{
float l9_59=l9_55;
float l9_60=0.0;
float l9_61=1.0;
bool l9_62=l9_57;
float l9_63=l9_58;
float l9_64=fast::clamp(l9_59,l9_60,l9_61);
float l9_65=step(abs(l9_59-l9_64),9.9999997e-06);
l9_63*=(l9_65+((1.0-float(l9_62))*(1.0-l9_65)));
l9_59=l9_64;
l9_55=l9_59;
l9_58=l9_63;
}
l9_12.x=l9_55;
l9_22=l9_58;
float l9_66=l9_12.y;
int l9_67=l9_15.y;
bool l9_68=l9_21;
float l9_69=l9_22;
if ((l9_67==0)||(l9_67==3))
{
float l9_70=l9_66;
float l9_71=0.0;
float l9_72=1.0;
bool l9_73=l9_68;
float l9_74=l9_69;
float l9_75=fast::clamp(l9_70,l9_71,l9_72);
float l9_76=step(abs(l9_70-l9_75),9.9999997e-06);
l9_74*=(l9_76+((1.0-float(l9_73))*(1.0-l9_76)));
l9_70=l9_75;
l9_66=l9_70;
l9_69=l9_74;
}
l9_12.y=l9_66;
l9_22=l9_69;
float2 l9_77=l9_12;
int l9_78=l9_10;
int l9_79=l9_11;
float l9_80=l9_20;
float2 l9_81=l9_77;
int l9_82=l9_78;
int l9_83=l9_79;
float3 l9_84=float3(0.0);
if (l9_82==0)
{
l9_84=float3(l9_81,0.0);
}
else
{
if (l9_82==1)
{
l9_84=float3(l9_81.x,(l9_81.y*0.5)+(0.5-(float(l9_83)*0.5)),0.0);
}
else
{
l9_84=float3(l9_81,float(l9_83));
}
}
float3 l9_85=l9_84;
float3 l9_86=l9_85;
float4 l9_87=sizeRampTexture.sample(sizeRampTextureSmpSC,l9_86.xy,bias(l9_80));
float4 l9_88=l9_87;
if (l9_18)
{
l9_88=mix(l9_19,l9_88,float4(l9_22));
}
float4 l9_89=l9_88;
l9_3=l9_89;
float4 l9_90=l9_3;
float2 sizeRampTex=l9_90.xy;
sizeLife=sizeRampTex*psizeStart;
if ((int(ENABLE_SIZERAMPSTARTENDASBOUNDS_tmp)!=0))
{
sizeLife=mix(psizeEnd,psizeStart,sizeRampTex);
}
}
if ((int(TRAILS_tmp)!=0))
{
if (N111_isTrail)
{
if ((int(TRAILSIZERAMP_tmp)!=0))
{
normTime=timeIn;
float sizeRampPanning_1=ceil(normTime*10000.0)/10000.0;
float2 l9_91=tempGlobals.Surface_UVCoord0;
float2 sizeRampUV_1=(l9_91/float2(10000.0,1.0))+float2(sizeRampPanning_1,0.0);
float2 param_3=sizeRampUV_1;
float4 l9_92=float4(0.0);
int l9_93;
if ((int(trailSizeRampTexHasSwappedViews_tmp)!=0))
{
int l9_94=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_94=0;
}
else
{
l9_94=varStereoViewID;
}
int l9_95=l9_94;
l9_93=1-l9_95;
}
else
{
int l9_96=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_96=0;
}
else
{
l9_96=varStereoViewID;
}
int l9_97=l9_96;
l9_93=l9_97;
}
int l9_98=l9_93;
int l9_99=trailSizeRampTexLayout_tmp;
int l9_100=l9_98;
float2 l9_101=param_3;
bool l9_102=(int(SC_USE_UV_TRANSFORM_trailSizeRampTex_tmp)!=0);
float3x3 l9_103=UserUniforms.trailSizeRampTexTransform;
int2 l9_104=int2(SC_SOFTWARE_WRAP_MODE_U_trailSizeRampTex_tmp,SC_SOFTWARE_WRAP_MODE_V_trailSizeRampTex_tmp);
bool l9_105=(int(SC_USE_UV_MIN_MAX_trailSizeRampTex_tmp)!=0);
float4 l9_106=UserUniforms.trailSizeRampTexUvMinMax;
bool l9_107=(int(SC_USE_CLAMP_TO_BORDER_trailSizeRampTex_tmp)!=0);
float4 l9_108=UserUniforms.trailSizeRampTexBorderColor;
float l9_109=0.0;
bool l9_110=l9_107&&(!l9_105);
float l9_111=1.0;
float l9_112=l9_101.x;
int l9_113=l9_104.x;
if (l9_113==1)
{
l9_112=fract(l9_112);
}
else
{
if (l9_113==2)
{
float l9_114=fract(l9_112);
float l9_115=l9_112-l9_114;
float l9_116=step(0.25,fract(l9_115*0.5));
l9_112=mix(l9_114,1.0-l9_114,fast::clamp(l9_116,0.0,1.0));
}
}
l9_101.x=l9_112;
float l9_117=l9_101.y;
int l9_118=l9_104.y;
if (l9_118==1)
{
l9_117=fract(l9_117);
}
else
{
if (l9_118==2)
{
float l9_119=fract(l9_117);
float l9_120=l9_117-l9_119;
float l9_121=step(0.25,fract(l9_120*0.5));
l9_117=mix(l9_119,1.0-l9_119,fast::clamp(l9_121,0.0,1.0));
}
}
l9_101.y=l9_117;
if (l9_105)
{
bool l9_122=l9_107;
bool l9_123;
if (l9_122)
{
l9_123=l9_104.x==3;
}
else
{
l9_123=l9_122;
}
float l9_124=l9_101.x;
float l9_125=l9_106.x;
float l9_126=l9_106.z;
bool l9_127=l9_123;
float l9_128=l9_111;
float l9_129=fast::clamp(l9_124,l9_125,l9_126);
float l9_130=step(abs(l9_124-l9_129),9.9999997e-06);
l9_128*=(l9_130+((1.0-float(l9_127))*(1.0-l9_130)));
l9_124=l9_129;
l9_101.x=l9_124;
l9_111=l9_128;
bool l9_131=l9_107;
bool l9_132;
if (l9_131)
{
l9_132=l9_104.y==3;
}
else
{
l9_132=l9_131;
}
float l9_133=l9_101.y;
float l9_134=l9_106.y;
float l9_135=l9_106.w;
bool l9_136=l9_132;
float l9_137=l9_111;
float l9_138=fast::clamp(l9_133,l9_134,l9_135);
float l9_139=step(abs(l9_133-l9_138),9.9999997e-06);
l9_137*=(l9_139+((1.0-float(l9_136))*(1.0-l9_139)));
l9_133=l9_138;
l9_101.y=l9_133;
l9_111=l9_137;
}
float2 l9_140=l9_101;
bool l9_141=l9_102;
float3x3 l9_142=l9_103;
if (l9_141)
{
l9_140=float2((l9_142*float3(l9_140,1.0)).xy);
}
float2 l9_143=l9_140;
l9_101=l9_143;
float l9_144=l9_101.x;
int l9_145=l9_104.x;
bool l9_146=l9_110;
float l9_147=l9_111;
if ((l9_145==0)||(l9_145==3))
{
float l9_148=l9_144;
float l9_149=0.0;
float l9_150=1.0;
bool l9_151=l9_146;
float l9_152=l9_147;
float l9_153=fast::clamp(l9_148,l9_149,l9_150);
float l9_154=step(abs(l9_148-l9_153),9.9999997e-06);
l9_152*=(l9_154+((1.0-float(l9_151))*(1.0-l9_154)));
l9_148=l9_153;
l9_144=l9_148;
l9_147=l9_152;
}
l9_101.x=l9_144;
l9_111=l9_147;
float l9_155=l9_101.y;
int l9_156=l9_104.y;
bool l9_157=l9_110;
float l9_158=l9_111;
if ((l9_156==0)||(l9_156==3))
{
float l9_159=l9_155;
float l9_160=0.0;
float l9_161=1.0;
bool l9_162=l9_157;
float l9_163=l9_158;
float l9_164=fast::clamp(l9_159,l9_160,l9_161);
float l9_165=step(abs(l9_159-l9_164),9.9999997e-06);
l9_163*=(l9_165+((1.0-float(l9_162))*(1.0-l9_165)));
l9_159=l9_164;
l9_155=l9_159;
l9_158=l9_163;
}
l9_101.y=l9_155;
l9_111=l9_158;
float2 l9_166=l9_101;
int l9_167=l9_99;
int l9_168=l9_100;
float l9_169=l9_109;
float2 l9_170=l9_166;
int l9_171=l9_167;
int l9_172=l9_168;
float3 l9_173=float3(0.0);
if (l9_171==0)
{
l9_173=float3(l9_170,0.0);
}
else
{
if (l9_171==1)
{
l9_173=float3(l9_170.x,(l9_170.y*0.5)+(0.5-(float(l9_172)*0.5)),0.0);
}
else
{
l9_173=float3(l9_170,float(l9_172));
}
}
float3 l9_174=l9_173;
float3 l9_175=l9_174;
float4 l9_176=trailSizeRampTex.sample(trailSizeRampTexSmpSC,l9_175.xy,bias(l9_169));
float4 l9_177=l9_176;
if (l9_107)
{
l9_177=mix(l9_108,l9_177,float4(l9_111));
}
float4 l9_178=l9_177;
l9_92=l9_178;
float4 l9_179=l9_92;
float sizeRampTex_1=l9_179.x;
sizeLife.x=sizeRampTex_1*psizeStart.x;
if ((int(TRAILSIZERAMPSTARTENDASBOUNDS_tmp)!=0))
{
sizeLife.x=mix(psizeEnd.x,psizeStart.x,sizeRampTex_1);
}
}
sizeLife.x*=N111_trailSizeMult;
sizeLife.y=0.0;
}
}
return sizeLife;
}
float3 N111_pSize3D(thread const float& random1,thread const float& random2,thread const float& normTime,thread const float& N111_sizeSpeed,thread float3& N111_sizeStart3D,thread float3& N111_sizeEnd3D,thread float3& N111_sizeStartMax3D,thread float3& N111_sizeEndMax3D,thread int& varStereoViewID,constant userUniformsObj& UserUniforms,thread ssGlobals& tempGlobals,thread texture2d<float> sizeRampTexture,thread sampler sizeRampTextureSmpSC)
{
float3 psizeStart=float3(0.0);
float3 psizeEnd=float3(0.0);
float param=normTime;
float param_1=N111_sizeSpeed;
float l9_0;
if (param<=0.0)
{
l9_0=0.0;
}
else
{
l9_0=pow(param,param_1);
}
float l9_1=l9_0;
float sizePow=l9_1;
if ((int(SIZEMINMAX_tmp)!=0))
{
psizeStart=mix(N111_sizeStart3D,N111_sizeStartMax3D,float3(random1));
if ((int(SIZERAMP_tmp)!=0))
{
if ((int(ENABLE_SIZERAMPSTARTENDASBOUNDS_tmp)!=0))
{
psizeEnd=mix(N111_sizeEnd3D,N111_sizeEndMax3D,float3(random2));
}
}
else
{
psizeEnd=mix(N111_sizeEnd3D,N111_sizeEndMax3D,float3(random2));
}
}
else
{
psizeStart=N111_sizeStart3D;
if ((int(SIZERAMP_tmp)!=0))
{
if ((int(ENABLE_SIZERAMPSTARTENDASBOUNDS_tmp)!=0))
{
psizeEnd=N111_sizeEnd3D;
}
}
else
{
psizeEnd=N111_sizeEnd3D;
}
}
float3 sizeLife=mix(psizeStart,psizeEnd,float3(sizePow));
if (!(SC_DEVICE_CLASS_tmp>=2))
{
return sizeLife;
}
if ((int(SIZERAMP_tmp)!=0))
{
float sizeRampPanning=ceil(normTime*10000.0)/10000.0;
float2 l9_2=tempGlobals.Surface_UVCoord0;
float2 sizeRampUV=(l9_2/float2(10000.0,1.0))+float2(sizeRampPanning,0.0);
float2 param_2=sizeRampUV;
float4 l9_3=float4(0.0);
int l9_4;
if ((int(sizeRampTextureHasSwappedViews_tmp)!=0))
{
int l9_5=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_5=0;
}
else
{
l9_5=varStereoViewID;
}
int l9_6=l9_5;
l9_4=1-l9_6;
}
else
{
int l9_7=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_7=0;
}
else
{
l9_7=varStereoViewID;
}
int l9_8=l9_7;
l9_4=l9_8;
}
int l9_9=l9_4;
int l9_10=sizeRampTextureLayout_tmp;
int l9_11=l9_9;
float2 l9_12=param_2;
bool l9_13=(int(SC_USE_UV_TRANSFORM_sizeRampTexture_tmp)!=0);
float3x3 l9_14=UserUniforms.sizeRampTextureTransform;
int2 l9_15=int2(SC_SOFTWARE_WRAP_MODE_U_sizeRampTexture_tmp,SC_SOFTWARE_WRAP_MODE_V_sizeRampTexture_tmp);
bool l9_16=(int(SC_USE_UV_MIN_MAX_sizeRampTexture_tmp)!=0);
float4 l9_17=UserUniforms.sizeRampTextureUvMinMax;
bool l9_18=(int(SC_USE_CLAMP_TO_BORDER_sizeRampTexture_tmp)!=0);
float4 l9_19=UserUniforms.sizeRampTextureBorderColor;
float l9_20=0.0;
bool l9_21=l9_18&&(!l9_16);
float l9_22=1.0;
float l9_23=l9_12.x;
int l9_24=l9_15.x;
if (l9_24==1)
{
l9_23=fract(l9_23);
}
else
{
if (l9_24==2)
{
float l9_25=fract(l9_23);
float l9_26=l9_23-l9_25;
float l9_27=step(0.25,fract(l9_26*0.5));
l9_23=mix(l9_25,1.0-l9_25,fast::clamp(l9_27,0.0,1.0));
}
}
l9_12.x=l9_23;
float l9_28=l9_12.y;
int l9_29=l9_15.y;
if (l9_29==1)
{
l9_28=fract(l9_28);
}
else
{
if (l9_29==2)
{
float l9_30=fract(l9_28);
float l9_31=l9_28-l9_30;
float l9_32=step(0.25,fract(l9_31*0.5));
l9_28=mix(l9_30,1.0-l9_30,fast::clamp(l9_32,0.0,1.0));
}
}
l9_12.y=l9_28;
if (l9_16)
{
bool l9_33=l9_18;
bool l9_34;
if (l9_33)
{
l9_34=l9_15.x==3;
}
else
{
l9_34=l9_33;
}
float l9_35=l9_12.x;
float l9_36=l9_17.x;
float l9_37=l9_17.z;
bool l9_38=l9_34;
float l9_39=l9_22;
float l9_40=fast::clamp(l9_35,l9_36,l9_37);
float l9_41=step(abs(l9_35-l9_40),9.9999997e-06);
l9_39*=(l9_41+((1.0-float(l9_38))*(1.0-l9_41)));
l9_35=l9_40;
l9_12.x=l9_35;
l9_22=l9_39;
bool l9_42=l9_18;
bool l9_43;
if (l9_42)
{
l9_43=l9_15.y==3;
}
else
{
l9_43=l9_42;
}
float l9_44=l9_12.y;
float l9_45=l9_17.y;
float l9_46=l9_17.w;
bool l9_47=l9_43;
float l9_48=l9_22;
float l9_49=fast::clamp(l9_44,l9_45,l9_46);
float l9_50=step(abs(l9_44-l9_49),9.9999997e-06);
l9_48*=(l9_50+((1.0-float(l9_47))*(1.0-l9_50)));
l9_44=l9_49;
l9_12.y=l9_44;
l9_22=l9_48;
}
float2 l9_51=l9_12;
bool l9_52=l9_13;
float3x3 l9_53=l9_14;
if (l9_52)
{
l9_51=float2((l9_53*float3(l9_51,1.0)).xy);
}
float2 l9_54=l9_51;
l9_12=l9_54;
float l9_55=l9_12.x;
int l9_56=l9_15.x;
bool l9_57=l9_21;
float l9_58=l9_22;
if ((l9_56==0)||(l9_56==3))
{
float l9_59=l9_55;
float l9_60=0.0;
float l9_61=1.0;
bool l9_62=l9_57;
float l9_63=l9_58;
float l9_64=fast::clamp(l9_59,l9_60,l9_61);
float l9_65=step(abs(l9_59-l9_64),9.9999997e-06);
l9_63*=(l9_65+((1.0-float(l9_62))*(1.0-l9_65)));
l9_59=l9_64;
l9_55=l9_59;
l9_58=l9_63;
}
l9_12.x=l9_55;
l9_22=l9_58;
float l9_66=l9_12.y;
int l9_67=l9_15.y;
bool l9_68=l9_21;
float l9_69=l9_22;
if ((l9_67==0)||(l9_67==3))
{
float l9_70=l9_66;
float l9_71=0.0;
float l9_72=1.0;
bool l9_73=l9_68;
float l9_74=l9_69;
float l9_75=fast::clamp(l9_70,l9_71,l9_72);
float l9_76=step(abs(l9_70-l9_75),9.9999997e-06);
l9_74*=(l9_76+((1.0-float(l9_73))*(1.0-l9_76)));
l9_70=l9_75;
l9_66=l9_70;
l9_69=l9_74;
}
l9_12.y=l9_66;
l9_22=l9_69;
float2 l9_77=l9_12;
int l9_78=l9_10;
int l9_79=l9_11;
float l9_80=l9_20;
float2 l9_81=l9_77;
int l9_82=l9_78;
int l9_83=l9_79;
float3 l9_84=float3(0.0);
if (l9_82==0)
{
l9_84=float3(l9_81,0.0);
}
else
{
if (l9_82==1)
{
l9_84=float3(l9_81.x,(l9_81.y*0.5)+(0.5-(float(l9_83)*0.5)),0.0);
}
else
{
l9_84=float3(l9_81,float(l9_83));
}
}
float3 l9_85=l9_84;
float3 l9_86=l9_85;
float4 l9_87=sizeRampTexture.sample(sizeRampTextureSmpSC,l9_86.xy,bias(l9_80));
float4 l9_88=l9_87;
if (l9_18)
{
l9_88=mix(l9_19,l9_88,float4(l9_22));
}
float4 l9_89=l9_88;
l9_3=l9_89;
float4 l9_90=l9_3;
float3 sizeRampTex=l9_90.xyz;
sizeLife=sizeRampTex*psizeStart;
if ((int(ENABLE_SIZERAMPSTARTENDASBOUNDS_tmp)!=0))
{
sizeLife=mix(psizeEnd,psizeStart,sizeRampTex);
}
}
return sizeLife;
}
fragment main_recv_out main_recv(main_recv_in in [[stage_in]],constant sc_Set0& sc_set0 [[buffer(0)]],float4 gl_FragCoord [[position]])
{
main_recv_out out={};
bool N2_isTrailCondition=false;
bool N2_ENABLE_TRAILS=false;
bool N2_ENABLE_INDEPENDENTTRAIL=false;
bool N2_ENABLE_TRAILTEXTURE=false;
bool N2_ENABLE_TRAILCOLORRAMP=false;
float4 N2_fadeInOut=float4(0.0);
float3 N2_colorStart=float3(0.0);
float3 N2_colorEnd=float3(0.0);
bool N2_ENABLE_COLORMINMAX=false;
float3 N2_colorMinStart=float3(0.0);
float3 N2_colorMinEnd=float3(0.0);
float3 N2_colorMaxStart=float3(0.0);
float3 N2_colorMaxEnd=float3(0.0);
bool N2_ENABLE_COLORMONOMIN=false;
float N2_alphaStart=0.0;
float N2_alphaEnd=0.0;
bool N2_ENABLE_ALPHAMINMAX=false;
float N2_alphaMinStart=0.0;
float N2_alphaMinEnd=0.0;
float N2_alphaMaxStart=0.0;
float N2_alphaMaxEnd=0.0;
bool N2_ENABLE_ALPHADISSOLVE=false;
float N2_alphaDissolveMult=0.0;
bool N2_ENABLE_PREMULTIPLIEDCOLOR=false;
bool N2_ENABLE_BLACKASALPHA=false;
bool N2_ENABLE_SCREENFADE=false;
bool N2_ENABLE_FLIPBOOK=false;
float N2_numValidFrames=0.0;
float2 N2_gridSize=float2(0.0);
float N2_flipBookSpeedMult=0.0;
float N2_flipBookRandomStart=0.0;
bool N2_ENABLE_FLIPBOOKBLEND=false;
bool N2_ENABLE_FLIPBOOKBYLIFE=false;
bool N2_ENABLE_COLORRAMP=false;
float2 N2_texSize=float2(0.0);
float4 N2_colorRampMult=float4(0.0);
bool N2_ENABLE_NORANDOFFSET=false;
bool N2_QUANTIZE=false;
bool N2_ENABLE_BASETEXTURE=false;
bool N2_ENABLE_WORLDPOSSEED=false;
float N2_externalSeed=0.0;
float4 N2_timeValuesIn=float4(0.0);
float4 N2_cameraFade_trailHeadTime_taper=float4(0.0);
float3 N2_particleSeed=float3(0.0);
float N2_globalSeed=0.0;
float4 N2_result=float4(0.0);
float2 N2_uv=float2(0.0);
float N2_isTrail=0.0;
float2 N2_trailHeadTime=float2(0.0);
int N113_MESHTYPE=0;
bool N113_USENORMALMAP=false;
float3 N113_NormalFromTex=float3(0.0);
float3 N113_Normal_TangentSpace=float3(0.0);
bool N181_isTrailCondition=false;
float N181_timeGlobal=0.0;
bool N181_ENABLE_EXTERNALTIME=false;
float N181_externalTime=0.0;
bool N181_ENABLE_WORLDPOSSEED=false;
float N181_externalSeed=0.0;
bool N181_ENABLE_LIFETIMEMINMAX=false;
float N181_lifeTimeConstant=0.0;
float2 N181_lifeTimeMinMax=float2(0.0);
bool N181_ENABLE_INSTANTSPAWN=false;
bool N181_ENABLE_CONSTANTSPAWN=false;
bool N181_ENABLE_TRAILS=false;
float N181_trailLength=0.0;
bool N181_ENABLE_INDEPENDENTTRAIL=false;
float3 N181_particleSeed=float3(0.0);
float N181_globalSeed=0.0;
float4 N181_timeValues=float4(0.0);
float N181_isTrail=0.0;
float2 N181_trailHeadTime=float2(0.0);
int N128_SphereType=0;
float N128_Radius=0.0;
float3 N128_Scale=float3(0.0);
float3 N128_Center=float3(0.0);
float N128_VolumeFill=0.0;
float3 N128_Result=float3(0.0);
float3 N137_Scale=float3(0.0);
float3 N137_Center=float3(0.0);
float N137_VolumeFill=0.0;
float3 N137_Result=float3(0.0);
int N144_OrientationAxis=0;
float N144_Radius=0.0;
float N144_startRad=0.0;
float N144_endRad=0.0;
float N144_Height=0.0;
float2 N144_ArcAngles=float2(0.0);
float3 N144_Scale=float3(0.0);
float3 N144_Center=float3(0.0);
float N144_VolumeFill=0.0;
float3 N144_Result=float3(0.0);
int N149_Axis=0;
float N149_InnerRadius=0.0;
float N149_OuterRadius=0.0;
float2 N149_ArcAngles=float2(0.0);
float3 N149_Scale=float3(0.0);
float3 N149_Center=float3(0.0);
float N149_VolumeFill=0.0;
float3 N149_Result=float3(0.0);
float3 N235_gridSize=float3(0.0);
float3 N235_gridDim=float3(0.0);
float3 N235_Offset=float3(0.0);
float3 N235_Result=float3(0.0);
int N155_alignHeight=0;
bool N155_curvThickEnable=false;
int N155_OrientationAxis=0;
bool N155_animPath=false;
bool N155_randSpeed=false;
float N155_startRad=0.0;
float N155_endRad=0.0;
float N155_heightPerTurn=0.0;
float N155_thicknessRad=0.0;
float N155_VolumeFill=0.0;
float N155_nTurns=0.0;
float N155_Speed=0.0;
float2 N155_SpeedMinMax=float2(0.0);
float4 N155_timeValuesIn=float4(0.0);
float3 N155_Result=float3(0.0);
bool N319_animPath=false;
bool N319_randSpeed=false;
bool N319_curvThickEnable=false;
float N319_Scale=0.0;
float3 N319_scaleXYZ=float3(0.0);
float4 N319_timeValuesIn=float4(0.0);
float N319_Speed=0.0;
float2 N319_SpeedMinMax=float2(0.0);
float N319_thicknessRad=0.0;
float N319_VolumeFill=0.0;
float N319_res=0.0;
float3 N319_Result=float3(0.0);
int N267_Seed=0;
int N267_pushMetod=0;
float N267_Depth=0.0;
float2 N267_Expand=float2(0.0);
float2 N267_Offset=float2(0.0);
float N267_Thickness=0.0;
float N267_Push=0.0;
float3 N267_Result=float3(0.0);
bool N111_isTrail=false;
float3 N111_particleSeedIn=float3(0.0);
float N111_globalSeedIn=0.0;
float4 N111_timeValuesIn=float4(0.0);
float2 N111_trailHeadTime=float2(0.0);
float N111_trailSizeMult=0.0;
float3 N111_spawnLocation=float3(0.0);
float3 N111_spawnBox=float3(0.0);
float3 N111_spawnSphere=float3(0.0);
float2 N111_sizeStart=float2(0.0);
float2 N111_sizeEnd=float2(0.0);
float2 N111_sizeStartMax=float2(0.0);
float2 N111_sizeEndMax=float2(0.0);
float3 N111_sizeStart3D=float3(0.0);
float3 N111_sizeEnd3D=float3(0.0);
float3 N111_sizeStartMax3D=float3(0.0);
float3 N111_sizeEndMax3D=float3(0.0);
float N111_sizeSpeed=0.0;
float3 N111_particleSeed=float3(0.0);
float N111_globalSeed=0.0;
ssGlobals tempGlobals;
if ((int(sc_DepthOnly_tmp)!=0))
{
return out;
}
ssGlobals Globals;
Globals.gTimeElapsed=(*sc_set0.UserUniforms).sc_Time.x;
Globals.gTimeDelta=(*sc_set0.UserUniforms).sc_Time.y;
Globals.SurfacePosition_WorldSpace=in.varPosAndMotion.xyz;
int l9_0=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_0=0;
}
else
{
l9_0=in.varStereoViewID;
}
int l9_1=l9_0;
Globals.CameraFOV=(atan(1.0/(*sc_set0.UserUniforms).sc_ProjectionMatrixArray[l9_1][1].y)*2.0)*57.29578;
Globals.Surface_UVCoord0=in.varTex01.xy;
Globals.VertexColor=in.varColor;
Globals.gInstanceID=in.Interpolator_gInstanceID;
Globals.BumpedNormal=float3(0.0);
Globals.ViewDirWS=normalize((*sc_set0.UserUniforms).sc_Camera.position-in.varPosAndMotion.xyz);
Globals.PositionWS=in.varPosAndMotion.xyz;
Globals.VertexTangent_WorldSpace=normalize(in.varTangent.xyz);
Globals.VertexNormal_WorldSpace=normalize(in.varNormalAndMotion.xyz);
Globals.VertexBinormal_WorldSpace=cross(Globals.VertexNormal_WorldSpace,Globals.VertexTangent_WorldSpace)*in.varTangent.w;
Globals.ViewDirWS=normalize((*sc_set0.UserUniforms).sc_Camera.position-Globals.SurfacePosition_WorldSpace);
float4 l9_2=gl_FragCoord;
float2 l9_3=l9_2.xy*(*sc_set0.UserUniforms).sc_CurrentRenderTargetDims.zw;
float2 l9_4=l9_3;
float2 l9_5=float2(0.0);
if (sc_StereoRenderingMode_tmp==1)
{
int l9_6=1;
int l9_7=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_7=0;
}
else
{
l9_7=in.varStereoViewID;
}
int l9_8=l9_7;
int l9_9=l9_8;
float3 l9_10=float3(l9_4,0.0);
int l9_11=l9_6;
int l9_12=l9_9;
if (l9_11==1)
{
l9_10.y=((2.0*l9_10.y)+float(l9_12))-1.0;
}
float2 l9_13=l9_10.xy;
l9_5=l9_13;
}
else
{
l9_5=l9_4;
}
float2 l9_14=l9_5;
float2 l9_15=l9_14;
Globals.gScreenCoord=l9_15;
Globals.gInstanceRatio=in.Interpolator_gInstanceRatio;
Globals.SurfacePosition_ObjectSpace=((*sc_set0.UserUniforms).sc_ModelMatrixInverse*float4(in.varPosAndMotion.xyz,1.0)).xyz;
Globals.VertexNormal_ObjectSpace=normalize(((*sc_set0.UserUniforms).sc_ModelMatrixInverse*float4(Globals.VertexNormal_WorldSpace,0.0)).xyz);
float Output_N13=0.0;
Output_N13=float(MESHTYPE_tmp);
float Output_N192=0.0;
float param;
if ((int(TRAILS_tmp)!=0))
{
param=1.001;
}
else
{
param=0.001;
}
param-=0.001;
Output_N192=param;
float4 Color_N168=float4(0.0);
Color_N168=Globals.VertexColor;
float Output_N217=0.0;
Output_N217=Color_N168.x;
float Result_N218=0.0;
float l9_16=Output_N192;
bool l9_17=(l9_16*1.0)!=0.0;
bool l9_18;
if (l9_17)
{
l9_18=(Output_N217*1.0)!=0.0;
}
else
{
l9_18=l9_17;
}
Result_N218=float(l9_18);
float2 Output_N203=float2(0.0);
float2 param_1=(*sc_set0.UserUniforms).trailFadeStartEnd;
Output_N203=param_1;
float2 Output_N216=float2(0.0);
float param_2=(*sc_set0.UserUniforms).Port_Input1_N216;
float2 param_3=float2(0.0);
float2 param_4;
if (TRAILBEHAVIOR_tmp!=0)
{
param_4=float2(param_2);
}
else
{
float2 l9_19=float2(0.0);
float2 l9_20=(*sc_set0.UserUniforms).trailFadeInOut;
l9_19=l9_20;
param_3=l9_19;
param_4=param_3;
}
Output_N216=param_4;
float4 Value_N194=float4(0.0);
Value_N194=float4(Output_N203.x,Output_N203.y,Value_N194.z,Value_N194.w);
Value_N194=float4(Value_N194.x,Value_N194.y,Output_N216.x,Output_N216.y);
float3 Output_N82=float3(0.0);
float3 param_5=(*sc_set0.UserUniforms).colorStart;
Output_N82=param_5;
float3 Output_N83=float3(0.0);
float3 param_6=(*sc_set0.UserUniforms).colorEnd;
Output_N83=param_6;
float3 Output_N78=float3(0.0);
float3 param_7=(*sc_set0.UserUniforms).colorMinStart;
Output_N78=param_7;
float3 Output_N80=float3(0.0);
float3 param_8=(*sc_set0.UserUniforms).colorMinEnd;
Output_N80=param_8;
float3 Output_N79=float3(0.0);
float3 param_9=(*sc_set0.UserUniforms).colorMaxStart;
Output_N79=param_9;
float3 Output_N81=float3(0.0);
float3 param_10=(*sc_set0.UserUniforms).colorMaxEnd;
Output_N81=param_10;
float Output_N89=0.0;
float param_11=(*sc_set0.UserUniforms).alphaStart;
Output_N89=param_11;
float Output_N90=0.0;
float param_12=(*sc_set0.UserUniforms).alphaEnd;
Output_N90=param_12;
float Output_N85=0.0;
float param_13=(*sc_set0.UserUniforms).alphaMinStart;
Output_N85=param_13;
float Output_N86=0.0;
float param_14=(*sc_set0.UserUniforms).alphaMinEnd;
Output_N86=param_14;
float Output_N87=0.0;
float param_15=(*sc_set0.UserUniforms).alphaMaxStart;
Output_N87=param_15;
float Output_N88=0.0;
float param_16=(*sc_set0.UserUniforms).alphaMaxEnd;
Output_N88=param_16;
float Output_N73=0.0;
float param_17=(*sc_set0.UserUniforms).alphaDissolveMult;
Output_N73=param_17;
float Output_N63=0.0;
float param_18=(*sc_set0.UserUniforms).numValidFrames;
Output_N63=param_18;
float2 Output_N64=float2(0.0);
float2 param_19=(*sc_set0.UserUniforms).gridSize;
Output_N64=param_19;
float Output_N65=0.0;
float param_20=(*sc_set0.UserUniforms).flipBookSpeedMult;
Output_N65=param_20;
float Output_N66=0.0;
float param_21=(*sc_set0.UserUniforms).flipBookRandomStart;
Output_N66=param_21;
float2 TextureSize_N21=float2(0.0);
float2 param_22=(*sc_set0.UserUniforms).colorRampTextureSize.xy;
TextureSize_N21=param_22;
float4 Output_N30=float4(0.0);
float4 param_23=(*sc_set0.UserUniforms).colorRampMult;
Output_N30=param_23;
float Output_N333=0.0;
float param_24;
if ((int(QUANTIZE_tmp)!=0))
{
param_24=1.001;
}
else
{
param_24=0.001;
}
param_24-=0.001;
Output_N333=param_24;
float Output_N7=0.0;
float param_25=(*sc_set0.UserUniforms).externalSeed;
Output_N7=param_25;
float4 Output_N169=float4(0.0);
float4 param_26;
param_26.x=in.Interpolator0.x;
param_26.y=in.Interpolator0.y;
param_26.z=in.Interpolator0.z;
param_26.w=in.Interpolator0.w;
Output_N169=param_26;
float4 Output_N179=float4(0.0);
float4 param_27;
param_27.x=in.Interpolator1.x;
param_27.y=in.Interpolator1.y;
param_27.z=in.Interpolator1.z;
param_27.w=in.Interpolator1.w;
Output_N179=param_27;
float4 result_N2=float4(0.0);
float2 uv_N2=float2(0.0);
float param_28=Result_N218;
float4 param_29=Value_N194;
float3 param_30=Output_N82;
float3 param_31=Output_N83;
float3 param_32=Output_N78;
float3 param_33=Output_N80;
float3 param_34=Output_N79;
float3 param_35=Output_N81;
float param_36=Output_N89;
float param_37=Output_N90;
float param_38=Output_N85;
float param_39=Output_N86;
float param_40=Output_N87;
float param_41=Output_N88;
float param_42=Output_N73;
float param_43=Output_N63;
float2 param_44=Output_N64;
float param_45=Output_N65;
float param_46=Output_N66;
float2 param_47=TextureSize_N21;
float4 param_48=Output_N30;
float param_49=Output_N333;
float param_50=Output_N7;
float4 param_51=Output_N169;
float4 param_52=Output_N179;
ssGlobals param_55=Globals;
tempGlobals=param_55;
float4 param_53=float4(0.0);
float2 param_54=float2(0.0);
N2_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N2_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
N2_isTrailCondition=param_28!=0.0;
N2_ENABLE_TRAILTEXTURE=(int(TRAILTEXTURE_tmp)!=0);
N2_ENABLE_TRAILCOLORRAMP=(int(TRAILCOLORRAMP_tmp)!=0);
N2_fadeInOut=param_29;
N2_colorStart=param_30;
N2_colorEnd=param_31;
N2_ENABLE_COLORMINMAX=(int(COLORMINMAX_tmp)!=0);
N2_colorMinStart=param_32;
N2_colorMinEnd=param_33;
N2_colorMaxStart=param_34;
N2_colorMaxEnd=param_35;
N2_ENABLE_COLORMONOMIN=(int(COLORMONOMIN_tmp)!=0);
N2_alphaStart=param_36;
N2_alphaEnd=param_37;
N2_ENABLE_ALPHAMINMAX=(int(ALPHAMINMAX_tmp)!=0);
N2_alphaMinStart=param_38;
N2_alphaMinEnd=param_39;
N2_alphaMaxStart=param_40;
N2_alphaMaxEnd=param_41;
N2_ENABLE_ALPHADISSOLVE=(int(ALPHADISSOLVE_tmp)!=0);
N2_alphaDissolveMult=param_42;
N2_ENABLE_PREMULTIPLIEDCOLOR=(int(PREMULTIPLIEDCOLOR_tmp)!=0);
N2_ENABLE_BLACKASALPHA=(int(BLACKASALPHA_tmp)!=0);
N2_ENABLE_SCREENFADE=(int(SCREENFADE_tmp)!=0);
N2_ENABLE_FLIPBOOK=(int(FLIPBOOK_tmp)!=0);
N2_numValidFrames=param_43;
N2_gridSize=param_44;
N2_flipBookSpeedMult=param_45;
N2_flipBookRandomStart=param_46;
N2_ENABLE_FLIPBOOKBLEND=(int(FLIPBOOKBLEND_tmp)!=0);
N2_ENABLE_FLIPBOOKBYLIFE=(int(FLIPBOOKBYLIFE_tmp)!=0);
N2_ENABLE_COLORRAMP=(int(COLORRAMP_tmp)!=0);
N2_texSize=param_47;
N2_colorRampMult=param_48;
N2_ENABLE_NORANDOFFSET=(int(NORANDOFFSET_tmp)!=0);
N2_QUANTIZE=param_49!=0.0;
N2_ENABLE_BASETEXTURE=(int(BASETEXTURE_tmp)!=0);
N2_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N2_externalSeed=param_50;
N2_timeValuesIn=param_51;
N2_cameraFade_trailHeadTime_taper=param_52;
float l9_21=0.0;
if (N2_ENABLE_WORLDPOSSEED)
{
float4x4 l9_22=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_21=length(float4(1.0)*l9_22);
}
N2_globalSeed=N2_externalSeed+l9_21;
int l9_23=0;
l9_23=int(tempGlobals.gInstanceID+0.5);
int l9_24=l9_23;
float l9_25=float(l9_24);
int l9_26=int(l9_25);
int l9_27=l9_26^(l9_26*15299);
int l9_28=l9_27;
int l9_29=l9_28;
int l9_30=((l9_29*((l9_29*1471343)+101146501))+1559861749)&2147483647;
int l9_31=l9_30;
int l9_32=l9_28*1399;
int l9_33=((l9_32*((l9_32*1471343)+101146501))+1559861749)&2147483647;
int l9_34=l9_33;
int l9_35=l9_28*7177;
int l9_36=((l9_35*((l9_35*1471343)+101146501))+1559861749)&2147483647;
int l9_37=l9_36;
int l9_38=l9_31;
float l9_39=float(l9_38)*4.6566129e-10;
int l9_40=l9_34;
float l9_41=float(l9_40)*4.6566129e-10;
int l9_42=l9_37;
float l9_43=float(l9_42)*4.6566129e-10;
float3 l9_44=float3(l9_39,l9_41,l9_43);
float3 l9_45=l9_44;
N2_particleSeed=l9_45;
float l9_46=N2_timeValuesIn.w;
float l9_47=N2_particleSeed.x;
float l9_48=N2_particleSeed.y;
float l9_49=N2_particleSeed.z;
float3 l9_50=fract((float3(l9_47,l9_48,l9_49)*27.21883)+float3(N2_globalSeed));
if (N2_ENABLE_COLORMONOMIN)
{
l9_50=fract((float3(l9_47,l9_47,l9_47)*27.21883)+float3(N2_globalSeed));
}
float l9_51=fract((N2_particleSeed.x*3121.3333)+N2_globalSeed);
float l9_52=fract((N2_particleSeed.y*13.2234)+N2_globalSeed);
float l9_53=fract((N2_particleSeed.z*3.5358)+N2_globalSeed);
N2_isTrail=0.0;
float l9_54=1.0;
N2_trailHeadTime=N2_cameraFade_trailHeadTime_taper.yz;
float4 l9_55=float4(1.0);
float2 l9_56=tempGlobals.Surface_UVCoord0;
N2_uv=l9_56;
if (N2_ENABLE_TRAILS)
{
if (N2_isTrailCondition)
{
N2_isTrail=1.0;
float l9_57=N2_cameraFade_trailHeadTime_taper.w;
float2 l9_58=float2(0.5-(l9_57/2.0),0.5+(l9_57/2.0));
float l9_59=N2_uv.x;
float l9_60=l9_58.x;
bool l9_61=l9_59<l9_60;
bool l9_62;
if (!l9_61)
{
l9_62=N2_uv.x>l9_58.y;
}
else
{
l9_62=l9_61;
}
if (l9_62)
{
discard_fragment();
}
N2_uv=float2(0.0+(((N2_uv.x-l9_58.x)*1.0)/((l9_58.y-l9_58.x)+1e-06)),N2_uv.y);
if (N2_ENABLE_TRAILTEXTURE)
{
float2 l9_63=float2(N2_uv.x,1.0-N2_uv.y);
float4 l9_64=float4(0.0);
int l9_65;
if ((int(trailTexHasSwappedViews_tmp)!=0))
{
int l9_66=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_66=0;
}
else
{
l9_66=in.varStereoViewID;
}
int l9_67=l9_66;
l9_65=1-l9_67;
}
else
{
int l9_68=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_68=0;
}
else
{
l9_68=in.varStereoViewID;
}
int l9_69=l9_68;
l9_65=l9_69;
}
int l9_70=l9_65;
int l9_71=trailTexLayout_tmp;
int l9_72=l9_70;
float2 l9_73=l9_63;
bool l9_74=(int(SC_USE_UV_TRANSFORM_trailTex_tmp)!=0);
float3x3 l9_75=(*sc_set0.UserUniforms).trailTexTransform;
int2 l9_76=int2(SC_SOFTWARE_WRAP_MODE_U_trailTex_tmp,SC_SOFTWARE_WRAP_MODE_V_trailTex_tmp);
bool l9_77=(int(SC_USE_UV_MIN_MAX_trailTex_tmp)!=0);
float4 l9_78=(*sc_set0.UserUniforms).trailTexUvMinMax;
bool l9_79=(int(SC_USE_CLAMP_TO_BORDER_trailTex_tmp)!=0);
float4 l9_80=(*sc_set0.UserUniforms).trailTexBorderColor;
float l9_81=0.0;
bool l9_82=l9_79&&(!l9_77);
float l9_83=1.0;
float l9_84=l9_73.x;
int l9_85=l9_76.x;
if (l9_85==1)
{
l9_84=fract(l9_84);
}
else
{
if (l9_85==2)
{
float l9_86=fract(l9_84);
float l9_87=l9_84-l9_86;
float l9_88=step(0.25,fract(l9_87*0.5));
l9_84=mix(l9_86,1.0-l9_86,fast::clamp(l9_88,0.0,1.0));
}
}
l9_73.x=l9_84;
float l9_89=l9_73.y;
int l9_90=l9_76.y;
if (l9_90==1)
{
l9_89=fract(l9_89);
}
else
{
if (l9_90==2)
{
float l9_91=fract(l9_89);
float l9_92=l9_89-l9_91;
float l9_93=step(0.25,fract(l9_92*0.5));
l9_89=mix(l9_91,1.0-l9_91,fast::clamp(l9_93,0.0,1.0));
}
}
l9_73.y=l9_89;
if (l9_77)
{
bool l9_94=l9_79;
bool l9_95;
if (l9_94)
{
l9_95=l9_76.x==3;
}
else
{
l9_95=l9_94;
}
float l9_96=l9_73.x;
float l9_97=l9_78.x;
float l9_98=l9_78.z;
bool l9_99=l9_95;
float l9_100=l9_83;
float l9_101=fast::clamp(l9_96,l9_97,l9_98);
float l9_102=step(abs(l9_96-l9_101),9.9999997e-06);
l9_100*=(l9_102+((1.0-float(l9_99))*(1.0-l9_102)));
l9_96=l9_101;
l9_73.x=l9_96;
l9_83=l9_100;
bool l9_103=l9_79;
bool l9_104;
if (l9_103)
{
l9_104=l9_76.y==3;
}
else
{
l9_104=l9_103;
}
float l9_105=l9_73.y;
float l9_106=l9_78.y;
float l9_107=l9_78.w;
bool l9_108=l9_104;
float l9_109=l9_83;
float l9_110=fast::clamp(l9_105,l9_106,l9_107);
float l9_111=step(abs(l9_105-l9_110),9.9999997e-06);
l9_109*=(l9_111+((1.0-float(l9_108))*(1.0-l9_111)));
l9_105=l9_110;
l9_73.y=l9_105;
l9_83=l9_109;
}
float2 l9_112=l9_73;
bool l9_113=l9_74;
float3x3 l9_114=l9_75;
if (l9_113)
{
l9_112=float2((l9_114*float3(l9_112,1.0)).xy);
}
float2 l9_115=l9_112;
l9_73=l9_115;
float l9_116=l9_73.x;
int l9_117=l9_76.x;
bool l9_118=l9_82;
float l9_119=l9_83;
if ((l9_117==0)||(l9_117==3))
{
float l9_120=l9_116;
float l9_121=0.0;
float l9_122=1.0;
bool l9_123=l9_118;
float l9_124=l9_119;
float l9_125=fast::clamp(l9_120,l9_121,l9_122);
float l9_126=step(abs(l9_120-l9_125),9.9999997e-06);
l9_124*=(l9_126+((1.0-float(l9_123))*(1.0-l9_126)));
l9_120=l9_125;
l9_116=l9_120;
l9_119=l9_124;
}
l9_73.x=l9_116;
l9_83=l9_119;
float l9_127=l9_73.y;
int l9_128=l9_76.y;
bool l9_129=l9_82;
float l9_130=l9_83;
if ((l9_128==0)||(l9_128==3))
{
float l9_131=l9_127;
float l9_132=0.0;
float l9_133=1.0;
bool l9_134=l9_129;
float l9_135=l9_130;
float l9_136=fast::clamp(l9_131,l9_132,l9_133);
float l9_137=step(abs(l9_131-l9_136),9.9999997e-06);
l9_135*=(l9_137+((1.0-float(l9_134))*(1.0-l9_137)));
l9_131=l9_136;
l9_127=l9_131;
l9_130=l9_135;
}
l9_73.y=l9_127;
l9_83=l9_130;
float2 l9_138=l9_73;
int l9_139=l9_71;
int l9_140=l9_72;
float l9_141=l9_81;
float2 l9_142=l9_138;
int l9_143=l9_139;
int l9_144=l9_140;
float3 l9_145=float3(0.0);
if (l9_143==0)
{
l9_145=float3(l9_142,0.0);
}
else
{
if (l9_143==1)
{
l9_145=float3(l9_142.x,(l9_142.y*0.5)+(0.5-(float(l9_144)*0.5)),0.0);
}
else
{
l9_145=float3(l9_142,float(l9_144));
}
}
float3 l9_146=l9_145;
float3 l9_147=l9_146;
float4 l9_148=sc_set0.trailTex.sample(sc_set0.trailTexSmpSC,l9_147.xy,bias(l9_141));
float4 l9_149=l9_148;
if (l9_79)
{
l9_149=mix(l9_80,l9_149,float4(l9_83));
}
float4 l9_150=l9_149;
l9_64=l9_150;
float4 l9_151=l9_64;
l9_55=l9_151;
}
float l9_152=fast::max(1e-06,N2_fadeInOut.x);
float l9_153=N2_timeValuesIn.w;
l9_54*=mix(0.0,1.0,fast::clamp(l9_153,0.0,l9_152)/l9_152);
l9_152=fast::max(1e-06,N2_fadeInOut.y);
l9_54*=mix(0.0,1.0,fast::clamp(1.0-l9_153,0.0,l9_152)/l9_152);
if (!N2_ENABLE_INDEPENDENTTRAIL)
{
l9_46=N2_trailHeadTime.y;
l9_152=fast::max(1e-06,N2_fadeInOut.z);
l9_54*=mix(0.0,1.0,fast::clamp(l9_46,0.0,l9_152)/l9_152);
l9_152=fast::max(1e-06,N2_fadeInOut.w);
l9_54*=mix(0.0,1.0,fast::clamp(1.0-l9_46,0.0,l9_152)/l9_152);
}
if (N2_ENABLE_TRAILCOLORRAMP)
{
float2 l9_154=float2(0.0);
l9_154=(*sc_set0.UserUniforms).trailColorRampTexSize.xy;
float2 l9_155=l9_154;
float2 l9_156=float2(0.0);
l9_156=(*sc_set0.UserUniforms).trailColorRampTexSize.xy;
float2 l9_157=l9_156;
float l9_158=ceil(l9_46*l9_155.x)/l9_157.x;
float2 l9_159=float2(l9_158,0.5);
float4 l9_160=float4(0.0);
int l9_161;
if ((int(trailColorRampTexHasSwappedViews_tmp)!=0))
{
int l9_162=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_162=0;
}
else
{
l9_162=in.varStereoViewID;
}
int l9_163=l9_162;
l9_161=1-l9_163;
}
else
{
int l9_164=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_164=0;
}
else
{
l9_164=in.varStereoViewID;
}
int l9_165=l9_164;
l9_161=l9_165;
}
int l9_166=l9_161;
int l9_167=trailColorRampTexLayout_tmp;
int l9_168=l9_166;
float2 l9_169=l9_159;
bool l9_170=(int(SC_USE_UV_TRANSFORM_trailColorRampTex_tmp)!=0);
float3x3 l9_171=(*sc_set0.UserUniforms).trailColorRampTexTransform;
int2 l9_172=int2(SC_SOFTWARE_WRAP_MODE_U_trailColorRampTex_tmp,SC_SOFTWARE_WRAP_MODE_V_trailColorRampTex_tmp);
bool l9_173=(int(SC_USE_UV_MIN_MAX_trailColorRampTex_tmp)!=0);
float4 l9_174=(*sc_set0.UserUniforms).trailColorRampTexUvMinMax;
bool l9_175=(int(SC_USE_CLAMP_TO_BORDER_trailColorRampTex_tmp)!=0);
float4 l9_176=(*sc_set0.UserUniforms).trailColorRampTexBorderColor;
float l9_177=0.0;
bool l9_178=l9_175&&(!l9_173);
float l9_179=1.0;
float l9_180=l9_169.x;
int l9_181=l9_172.x;
if (l9_181==1)
{
l9_180=fract(l9_180);
}
else
{
if (l9_181==2)
{
float l9_182=fract(l9_180);
float l9_183=l9_180-l9_182;
float l9_184=step(0.25,fract(l9_183*0.5));
l9_180=mix(l9_182,1.0-l9_182,fast::clamp(l9_184,0.0,1.0));
}
}
l9_169.x=l9_180;
float l9_185=l9_169.y;
int l9_186=l9_172.y;
if (l9_186==1)
{
l9_185=fract(l9_185);
}
else
{
if (l9_186==2)
{
float l9_187=fract(l9_185);
float l9_188=l9_185-l9_187;
float l9_189=step(0.25,fract(l9_188*0.5));
l9_185=mix(l9_187,1.0-l9_187,fast::clamp(l9_189,0.0,1.0));
}
}
l9_169.y=l9_185;
if (l9_173)
{
bool l9_190=l9_175;
bool l9_191;
if (l9_190)
{
l9_191=l9_172.x==3;
}
else
{
l9_191=l9_190;
}
float l9_192=l9_169.x;
float l9_193=l9_174.x;
float l9_194=l9_174.z;
bool l9_195=l9_191;
float l9_196=l9_179;
float l9_197=fast::clamp(l9_192,l9_193,l9_194);
float l9_198=step(abs(l9_192-l9_197),9.9999997e-06);
l9_196*=(l9_198+((1.0-float(l9_195))*(1.0-l9_198)));
l9_192=l9_197;
l9_169.x=l9_192;
l9_179=l9_196;
bool l9_199=l9_175;
bool l9_200;
if (l9_199)
{
l9_200=l9_172.y==3;
}
else
{
l9_200=l9_199;
}
float l9_201=l9_169.y;
float l9_202=l9_174.y;
float l9_203=l9_174.w;
bool l9_204=l9_200;
float l9_205=l9_179;
float l9_206=fast::clamp(l9_201,l9_202,l9_203);
float l9_207=step(abs(l9_201-l9_206),9.9999997e-06);
l9_205*=(l9_207+((1.0-float(l9_204))*(1.0-l9_207)));
l9_201=l9_206;
l9_169.y=l9_201;
l9_179=l9_205;
}
float2 l9_208=l9_169;
bool l9_209=l9_170;
float3x3 l9_210=l9_171;
if (l9_209)
{
l9_208=float2((l9_210*float3(l9_208,1.0)).xy);
}
float2 l9_211=l9_208;
l9_169=l9_211;
float l9_212=l9_169.x;
int l9_213=l9_172.x;
bool l9_214=l9_178;
float l9_215=l9_179;
if ((l9_213==0)||(l9_213==3))
{
float l9_216=l9_212;
float l9_217=0.0;
float l9_218=1.0;
bool l9_219=l9_214;
float l9_220=l9_215;
float l9_221=fast::clamp(l9_216,l9_217,l9_218);
float l9_222=step(abs(l9_216-l9_221),9.9999997e-06);
l9_220*=(l9_222+((1.0-float(l9_219))*(1.0-l9_222)));
l9_216=l9_221;
l9_212=l9_216;
l9_215=l9_220;
}
l9_169.x=l9_212;
l9_179=l9_215;
float l9_223=l9_169.y;
int l9_224=l9_172.y;
bool l9_225=l9_178;
float l9_226=l9_179;
if ((l9_224==0)||(l9_224==3))
{
float l9_227=l9_223;
float l9_228=0.0;
float l9_229=1.0;
bool l9_230=l9_225;
float l9_231=l9_226;
float l9_232=fast::clamp(l9_227,l9_228,l9_229);
float l9_233=step(abs(l9_227-l9_232),9.9999997e-06);
l9_231*=(l9_233+((1.0-float(l9_230))*(1.0-l9_233)));
l9_227=l9_232;
l9_223=l9_227;
l9_226=l9_231;
}
l9_169.y=l9_223;
l9_179=l9_226;
float2 l9_234=l9_169;
int l9_235=l9_167;
int l9_236=l9_168;
float l9_237=l9_177;
float2 l9_238=l9_234;
int l9_239=l9_235;
int l9_240=l9_236;
float3 l9_241=float3(0.0);
if (l9_239==0)
{
l9_241=float3(l9_238,0.0);
}
else
{
if (l9_239==1)
{
l9_241=float3(l9_238.x,(l9_238.y*0.5)+(0.5-(float(l9_240)*0.5)),0.0);
}
else
{
l9_241=float3(l9_238,float(l9_240));
}
}
float3 l9_242=l9_241;
float3 l9_243=l9_242;
float4 l9_244=sc_set0.trailColorRampTex.sample(sc_set0.trailColorRampTexSmpSC,l9_243.xy,bias(l9_237));
float4 l9_245=l9_244;
if (l9_175)
{
l9_245=mix(l9_176,l9_245,float4(l9_179));
}
float4 l9_246=l9_245;
l9_160=l9_246;
float4 l9_247=l9_160;
l9_55*=l9_247;
}
}
}
float4 l9_248=float4(0.0);
float3 l9_249=float3(0.0);
float3 l9_250=float3(0.0);
float l9_251=0.0;
float l9_252=0.0;
if (N2_ENABLE_COLORMINMAX)
{
l9_249=mix(N2_colorMinStart,N2_colorMaxStart,l9_50);
l9_250=mix(N2_colorMinEnd,N2_colorMaxEnd,l9_50);
}
else
{
l9_249=N2_colorStart;
l9_250=N2_colorEnd;
}
if (N2_ENABLE_ALPHAMINMAX)
{
l9_251=mix(N2_alphaMinStart,N2_alphaMaxStart,l9_51);
l9_252=mix(N2_alphaMinEnd,N2_alphaMaxEnd,l9_51);
}
else
{
l9_251=N2_alphaStart;
l9_252=N2_alphaEnd;
}
l9_249=mix(l9_249,l9_250,float3(l9_46));
l9_251=mix(l9_251,l9_252,l9_46);
l9_248=float4(l9_249,l9_251);
float4 l9_253=float4(0.0);
float2 l9_254=float2(0.0);
if (N2_ENABLE_BASETEXTURE)
{
if (N2_ENABLE_FLIPBOOK)
{
float2 l9_255=tempGlobals.Surface_UVCoord0;
l9_254=l9_255;
float2 l9_256=l9_254;
float l9_257=fast::max(N2_timeValuesIn.x,1e-06);
float l9_258=fast::max(N2_timeValuesIn.y,1e-06);
float l9_259=N2_timeValuesIn.z;
if (N2_ENABLE_FLIPBOOKBYLIFE)
{
float l9_260=mix(l9_257,l9_258,l9_53);
l9_259/=l9_260;
}
float l9_261=floor((N2_flipBookRandomStart+1.0)*l9_52);
float2 l9_262=l9_254;
float2 l9_263=N2_gridSize;
float l9_264=N2_numValidFrames;
float l9_265=l9_261;
float l9_266=N2_flipBookSpeedMult;
float l9_267=l9_259;
float l9_268=floor(l9_263.x);
float l9_269=floor(l9_263.y);
float l9_270=1.0/l9_268;
float l9_271=1.0/l9_269;
float l9_272=fast::min(l9_268*l9_269,floor(l9_264));
float l9_273=floor(mod((l9_267*l9_266)+floor(l9_265),l9_272));
float l9_274=floor(l9_273/l9_268);
float l9_275=mod(l9_273,l9_268);
float2 l9_276=float2((l9_270*l9_262.x)+(l9_275*l9_270),((1.0-l9_271)-(l9_274*l9_271))+(l9_271*l9_262.y));
l9_254=l9_276;
float2 l9_277=l9_254;
float4 l9_278=float4(0.0);
int l9_279;
if ((int(mainTextureHasSwappedViews_tmp)!=0))
{
int l9_280=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_280=0;
}
else
{
l9_280=in.varStereoViewID;
}
int l9_281=l9_280;
l9_279=1-l9_281;
}
else
{
int l9_282=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_282=0;
}
else
{
l9_282=in.varStereoViewID;
}
int l9_283=l9_282;
l9_279=l9_283;
}
int l9_284=l9_279;
int l9_285=mainTextureLayout_tmp;
int l9_286=l9_284;
float2 l9_287=l9_277;
bool l9_288=(int(SC_USE_UV_TRANSFORM_mainTexture_tmp)!=0);
float3x3 l9_289=(*sc_set0.UserUniforms).mainTextureTransform;
int2 l9_290=int2(SC_SOFTWARE_WRAP_MODE_U_mainTexture_tmp,SC_SOFTWARE_WRAP_MODE_V_mainTexture_tmp);
bool l9_291=(int(SC_USE_UV_MIN_MAX_mainTexture_tmp)!=0);
float4 l9_292=(*sc_set0.UserUniforms).mainTextureUvMinMax;
bool l9_293=(int(SC_USE_CLAMP_TO_BORDER_mainTexture_tmp)!=0);
float4 l9_294=(*sc_set0.UserUniforms).mainTextureBorderColor;
float l9_295=0.0;
bool l9_296=l9_293&&(!l9_291);
float l9_297=1.0;
float l9_298=l9_287.x;
int l9_299=l9_290.x;
if (l9_299==1)
{
l9_298=fract(l9_298);
}
else
{
if (l9_299==2)
{
float l9_300=fract(l9_298);
float l9_301=l9_298-l9_300;
float l9_302=step(0.25,fract(l9_301*0.5));
l9_298=mix(l9_300,1.0-l9_300,fast::clamp(l9_302,0.0,1.0));
}
}
l9_287.x=l9_298;
float l9_303=l9_287.y;
int l9_304=l9_290.y;
if (l9_304==1)
{
l9_303=fract(l9_303);
}
else
{
if (l9_304==2)
{
float l9_305=fract(l9_303);
float l9_306=l9_303-l9_305;
float l9_307=step(0.25,fract(l9_306*0.5));
l9_303=mix(l9_305,1.0-l9_305,fast::clamp(l9_307,0.0,1.0));
}
}
l9_287.y=l9_303;
if (l9_291)
{
bool l9_308=l9_293;
bool l9_309;
if (l9_308)
{
l9_309=l9_290.x==3;
}
else
{
l9_309=l9_308;
}
float l9_310=l9_287.x;
float l9_311=l9_292.x;
float l9_312=l9_292.z;
bool l9_313=l9_309;
float l9_314=l9_297;
float l9_315=fast::clamp(l9_310,l9_311,l9_312);
float l9_316=step(abs(l9_310-l9_315),9.9999997e-06);
l9_314*=(l9_316+((1.0-float(l9_313))*(1.0-l9_316)));
l9_310=l9_315;
l9_287.x=l9_310;
l9_297=l9_314;
bool l9_317=l9_293;
bool l9_318;
if (l9_317)
{
l9_318=l9_290.y==3;
}
else
{
l9_318=l9_317;
}
float l9_319=l9_287.y;
float l9_320=l9_292.y;
float l9_321=l9_292.w;
bool l9_322=l9_318;
float l9_323=l9_297;
float l9_324=fast::clamp(l9_319,l9_320,l9_321);
float l9_325=step(abs(l9_319-l9_324),9.9999997e-06);
l9_323*=(l9_325+((1.0-float(l9_322))*(1.0-l9_325)));
l9_319=l9_324;
l9_287.y=l9_319;
l9_297=l9_323;
}
float2 l9_326=l9_287;
bool l9_327=l9_288;
float3x3 l9_328=l9_289;
if (l9_327)
{
l9_326=float2((l9_328*float3(l9_326,1.0)).xy);
}
float2 l9_329=l9_326;
l9_287=l9_329;
float l9_330=l9_287.x;
int l9_331=l9_290.x;
bool l9_332=l9_296;
float l9_333=l9_297;
if ((l9_331==0)||(l9_331==3))
{
float l9_334=l9_330;
float l9_335=0.0;
float l9_336=1.0;
bool l9_337=l9_332;
float l9_338=l9_333;
float l9_339=fast::clamp(l9_334,l9_335,l9_336);
float l9_340=step(abs(l9_334-l9_339),9.9999997e-06);
l9_338*=(l9_340+((1.0-float(l9_337))*(1.0-l9_340)));
l9_334=l9_339;
l9_330=l9_334;
l9_333=l9_338;
}
l9_287.x=l9_330;
l9_297=l9_333;
float l9_341=l9_287.y;
int l9_342=l9_290.y;
bool l9_343=l9_296;
float l9_344=l9_297;
if ((l9_342==0)||(l9_342==3))
{
float l9_345=l9_341;
float l9_346=0.0;
float l9_347=1.0;
bool l9_348=l9_343;
float l9_349=l9_344;
float l9_350=fast::clamp(l9_345,l9_346,l9_347);
float l9_351=step(abs(l9_345-l9_350),9.9999997e-06);
l9_349*=(l9_351+((1.0-float(l9_348))*(1.0-l9_351)));
l9_345=l9_350;
l9_341=l9_345;
l9_344=l9_349;
}
l9_287.y=l9_341;
l9_297=l9_344;
float2 l9_352=l9_287;
int l9_353=l9_285;
int l9_354=l9_286;
float l9_355=l9_295;
float2 l9_356=l9_352;
int l9_357=l9_353;
int l9_358=l9_354;
float3 l9_359=float3(0.0);
if (l9_357==0)
{
l9_359=float3(l9_356,0.0);
}
else
{
if (l9_357==1)
{
l9_359=float3(l9_356.x,(l9_356.y*0.5)+(0.5-(float(l9_358)*0.5)),0.0);
}
else
{
l9_359=float3(l9_356,float(l9_358));
}
}
float3 l9_360=l9_359;
float3 l9_361=l9_360;
float4 l9_362=sc_set0.mainTexture.sample(sc_set0.mainTextureSmpSC,l9_361.xy,bias(l9_355));
float4 l9_363=l9_362;
if (l9_293)
{
l9_363=mix(l9_294,l9_363,float4(l9_297));
}
float4 l9_364=l9_363;
l9_278=l9_364;
float4 l9_365=l9_278;
l9_253=l9_365;
if (N2_ENABLE_FLIPBOOKBLEND)
{
float2 l9_366=l9_256;
float2 l9_367=N2_gridSize;
float l9_368=N2_numValidFrames;
float l9_369=floor(mod(l9_261+1.0,N2_numValidFrames));
float l9_370=N2_flipBookSpeedMult;
float l9_371=l9_259;
float l9_372=floor(l9_367.x);
float l9_373=floor(l9_367.y);
float l9_374=1.0/l9_372;
float l9_375=1.0/l9_373;
float l9_376=fast::min(l9_372*l9_373,floor(l9_368));
float l9_377=floor(mod((l9_371*l9_370)+floor(l9_369),l9_376));
float l9_378=floor(l9_377/l9_372);
float l9_379=mod(l9_377,l9_372);
float2 l9_380=float2((l9_374*l9_366.x)+(l9_379*l9_374),((1.0-l9_375)-(l9_378*l9_375))+(l9_375*l9_366.y));
l9_256=l9_380;
float4 l9_381=l9_253;
float2 l9_382=l9_256;
float4 l9_383=float4(0.0);
int l9_384;
if ((int(mainTextureHasSwappedViews_tmp)!=0))
{
int l9_385=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_385=0;
}
else
{
l9_385=in.varStereoViewID;
}
int l9_386=l9_385;
l9_384=1-l9_386;
}
else
{
int l9_387=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_387=0;
}
else
{
l9_387=in.varStereoViewID;
}
int l9_388=l9_387;
l9_384=l9_388;
}
int l9_389=l9_384;
int l9_390=mainTextureLayout_tmp;
int l9_391=l9_389;
float2 l9_392=l9_382;
bool l9_393=(int(SC_USE_UV_TRANSFORM_mainTexture_tmp)!=0);
float3x3 l9_394=(*sc_set0.UserUniforms).mainTextureTransform;
int2 l9_395=int2(SC_SOFTWARE_WRAP_MODE_U_mainTexture_tmp,SC_SOFTWARE_WRAP_MODE_V_mainTexture_tmp);
bool l9_396=(int(SC_USE_UV_MIN_MAX_mainTexture_tmp)!=0);
float4 l9_397=(*sc_set0.UserUniforms).mainTextureUvMinMax;
bool l9_398=(int(SC_USE_CLAMP_TO_BORDER_mainTexture_tmp)!=0);
float4 l9_399=(*sc_set0.UserUniforms).mainTextureBorderColor;
float l9_400=0.0;
bool l9_401=l9_398&&(!l9_396);
float l9_402=1.0;
float l9_403=l9_392.x;
int l9_404=l9_395.x;
if (l9_404==1)
{
l9_403=fract(l9_403);
}
else
{
if (l9_404==2)
{
float l9_405=fract(l9_403);
float l9_406=l9_403-l9_405;
float l9_407=step(0.25,fract(l9_406*0.5));
l9_403=mix(l9_405,1.0-l9_405,fast::clamp(l9_407,0.0,1.0));
}
}
l9_392.x=l9_403;
float l9_408=l9_392.y;
int l9_409=l9_395.y;
if (l9_409==1)
{
l9_408=fract(l9_408);
}
else
{
if (l9_409==2)
{
float l9_410=fract(l9_408);
float l9_411=l9_408-l9_410;
float l9_412=step(0.25,fract(l9_411*0.5));
l9_408=mix(l9_410,1.0-l9_410,fast::clamp(l9_412,0.0,1.0));
}
}
l9_392.y=l9_408;
if (l9_396)
{
bool l9_413=l9_398;
bool l9_414;
if (l9_413)
{
l9_414=l9_395.x==3;
}
else
{
l9_414=l9_413;
}
float l9_415=l9_392.x;
float l9_416=l9_397.x;
float l9_417=l9_397.z;
bool l9_418=l9_414;
float l9_419=l9_402;
float l9_420=fast::clamp(l9_415,l9_416,l9_417);
float l9_421=step(abs(l9_415-l9_420),9.9999997e-06);
l9_419*=(l9_421+((1.0-float(l9_418))*(1.0-l9_421)));
l9_415=l9_420;
l9_392.x=l9_415;
l9_402=l9_419;
bool l9_422=l9_398;
bool l9_423;
if (l9_422)
{
l9_423=l9_395.y==3;
}
else
{
l9_423=l9_422;
}
float l9_424=l9_392.y;
float l9_425=l9_397.y;
float l9_426=l9_397.w;
bool l9_427=l9_423;
float l9_428=l9_402;
float l9_429=fast::clamp(l9_424,l9_425,l9_426);
float l9_430=step(abs(l9_424-l9_429),9.9999997e-06);
l9_428*=(l9_430+((1.0-float(l9_427))*(1.0-l9_430)));
l9_424=l9_429;
l9_392.y=l9_424;
l9_402=l9_428;
}
float2 l9_431=l9_392;
bool l9_432=l9_393;
float3x3 l9_433=l9_394;
if (l9_432)
{
l9_431=float2((l9_433*float3(l9_431,1.0)).xy);
}
float2 l9_434=l9_431;
l9_392=l9_434;
float l9_435=l9_392.x;
int l9_436=l9_395.x;
bool l9_437=l9_401;
float l9_438=l9_402;
if ((l9_436==0)||(l9_436==3))
{
float l9_439=l9_435;
float l9_440=0.0;
float l9_441=1.0;
bool l9_442=l9_437;
float l9_443=l9_438;
float l9_444=fast::clamp(l9_439,l9_440,l9_441);
float l9_445=step(abs(l9_439-l9_444),9.9999997e-06);
l9_443*=(l9_445+((1.0-float(l9_442))*(1.0-l9_445)));
l9_439=l9_444;
l9_435=l9_439;
l9_438=l9_443;
}
l9_392.x=l9_435;
l9_402=l9_438;
float l9_446=l9_392.y;
int l9_447=l9_395.y;
bool l9_448=l9_401;
float l9_449=l9_402;
if ((l9_447==0)||(l9_447==3))
{
float l9_450=l9_446;
float l9_451=0.0;
float l9_452=1.0;
bool l9_453=l9_448;
float l9_454=l9_449;
float l9_455=fast::clamp(l9_450,l9_451,l9_452);
float l9_456=step(abs(l9_450-l9_455),9.9999997e-06);
l9_454*=(l9_456+((1.0-float(l9_453))*(1.0-l9_456)));
l9_450=l9_455;
l9_446=l9_450;
l9_449=l9_454;
}
l9_392.y=l9_446;
l9_402=l9_449;
float2 l9_457=l9_392;
int l9_458=l9_390;
int l9_459=l9_391;
float l9_460=l9_400;
float2 l9_461=l9_457;
int l9_462=l9_458;
int l9_463=l9_459;
float3 l9_464=float3(0.0);
if (l9_462==0)
{
l9_464=float3(l9_461,0.0);
}
else
{
if (l9_462==1)
{
l9_464=float3(l9_461.x,(l9_461.y*0.5)+(0.5-(float(l9_463)*0.5)),0.0);
}
else
{
l9_464=float3(l9_461,float(l9_463));
}
}
float3 l9_465=l9_464;
float3 l9_466=l9_465;
float4 l9_467=sc_set0.mainTexture.sample(sc_set0.mainTextureSmpSC,l9_466.xy,bias(l9_460));
float4 l9_468=l9_467;
if (l9_398)
{
l9_468=mix(l9_399,l9_468,float4(l9_402));
}
float4 l9_469=l9_468;
l9_383=l9_469;
float4 l9_470=l9_383;
l9_253=mix(l9_381,l9_470,float4(fract((l9_259*N2_flipBookSpeedMult)+l9_261)));
}
}
}
float4 l9_471=float4(1.0);
if (N2_ENABLE_COLORRAMP)
{
float l9_472=0.0;
if (N2_QUANTIZE)
{
l9_472=ceil(l9_46*N2_texSize.x)/N2_texSize.x;
}
else
{
l9_472=l9_46;
}
float l9_473=l9_472;
if (N2_ENABLE_NORANDOFFSET)
{
float2 l9_474=tempGlobals.Surface_UVCoord0;
l9_473+=(l9_474.x/N2_texSize.x);
}
float2 l9_475=float2(l9_473,0.5);
float4 l9_476=float4(0.0);
int l9_477;
if ((int(colorRampTextureHasSwappedViews_tmp)!=0))
{
int l9_478=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_478=0;
}
else
{
l9_478=in.varStereoViewID;
}
int l9_479=l9_478;
l9_477=1-l9_479;
}
else
{
int l9_480=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_480=0;
}
else
{
l9_480=in.varStereoViewID;
}
int l9_481=l9_480;
l9_477=l9_481;
}
int l9_482=l9_477;
int l9_483=colorRampTextureLayout_tmp;
int l9_484=l9_482;
float2 l9_485=l9_475;
bool l9_486=(int(SC_USE_UV_TRANSFORM_colorRampTexture_tmp)!=0);
float3x3 l9_487=(*sc_set0.UserUniforms).colorRampTextureTransform;
int2 l9_488=int2(SC_SOFTWARE_WRAP_MODE_U_colorRampTexture_tmp,SC_SOFTWARE_WRAP_MODE_V_colorRampTexture_tmp);
bool l9_489=(int(SC_USE_UV_MIN_MAX_colorRampTexture_tmp)!=0);
float4 l9_490=(*sc_set0.UserUniforms).colorRampTextureUvMinMax;
bool l9_491=(int(SC_USE_CLAMP_TO_BORDER_colorRampTexture_tmp)!=0);
float4 l9_492=(*sc_set0.UserUniforms).colorRampTextureBorderColor;
float l9_493=0.0;
bool l9_494=l9_491&&(!l9_489);
float l9_495=1.0;
float l9_496=l9_485.x;
int l9_497=l9_488.x;
if (l9_497==1)
{
l9_496=fract(l9_496);
}
else
{
if (l9_497==2)
{
float l9_498=fract(l9_496);
float l9_499=l9_496-l9_498;
float l9_500=step(0.25,fract(l9_499*0.5));
l9_496=mix(l9_498,1.0-l9_498,fast::clamp(l9_500,0.0,1.0));
}
}
l9_485.x=l9_496;
float l9_501=l9_485.y;
int l9_502=l9_488.y;
if (l9_502==1)
{
l9_501=fract(l9_501);
}
else
{
if (l9_502==2)
{
float l9_503=fract(l9_501);
float l9_504=l9_501-l9_503;
float l9_505=step(0.25,fract(l9_504*0.5));
l9_501=mix(l9_503,1.0-l9_503,fast::clamp(l9_505,0.0,1.0));
}
}
l9_485.y=l9_501;
if (l9_489)
{
bool l9_506=l9_491;
bool l9_507;
if (l9_506)
{
l9_507=l9_488.x==3;
}
else
{
l9_507=l9_506;
}
float l9_508=l9_485.x;
float l9_509=l9_490.x;
float l9_510=l9_490.z;
bool l9_511=l9_507;
float l9_512=l9_495;
float l9_513=fast::clamp(l9_508,l9_509,l9_510);
float l9_514=step(abs(l9_508-l9_513),9.9999997e-06);
l9_512*=(l9_514+((1.0-float(l9_511))*(1.0-l9_514)));
l9_508=l9_513;
l9_485.x=l9_508;
l9_495=l9_512;
bool l9_515=l9_491;
bool l9_516;
if (l9_515)
{
l9_516=l9_488.y==3;
}
else
{
l9_516=l9_515;
}
float l9_517=l9_485.y;
float l9_518=l9_490.y;
float l9_519=l9_490.w;
bool l9_520=l9_516;
float l9_521=l9_495;
float l9_522=fast::clamp(l9_517,l9_518,l9_519);
float l9_523=step(abs(l9_517-l9_522),9.9999997e-06);
l9_521*=(l9_523+((1.0-float(l9_520))*(1.0-l9_523)));
l9_517=l9_522;
l9_485.y=l9_517;
l9_495=l9_521;
}
float2 l9_524=l9_485;
bool l9_525=l9_486;
float3x3 l9_526=l9_487;
if (l9_525)
{
l9_524=float2((l9_526*float3(l9_524,1.0)).xy);
}
float2 l9_527=l9_524;
l9_485=l9_527;
float l9_528=l9_485.x;
int l9_529=l9_488.x;
bool l9_530=l9_494;
float l9_531=l9_495;
if ((l9_529==0)||(l9_529==3))
{
float l9_532=l9_528;
float l9_533=0.0;
float l9_534=1.0;
bool l9_535=l9_530;
float l9_536=l9_531;
float l9_537=fast::clamp(l9_532,l9_533,l9_534);
float l9_538=step(abs(l9_532-l9_537),9.9999997e-06);
l9_536*=(l9_538+((1.0-float(l9_535))*(1.0-l9_538)));
l9_532=l9_537;
l9_528=l9_532;
l9_531=l9_536;
}
l9_485.x=l9_528;
l9_495=l9_531;
float l9_539=l9_485.y;
int l9_540=l9_488.y;
bool l9_541=l9_494;
float l9_542=l9_495;
if ((l9_540==0)||(l9_540==3))
{
float l9_543=l9_539;
float l9_544=0.0;
float l9_545=1.0;
bool l9_546=l9_541;
float l9_547=l9_542;
float l9_548=fast::clamp(l9_543,l9_544,l9_545);
float l9_549=step(abs(l9_543-l9_548),9.9999997e-06);
l9_547*=(l9_549+((1.0-float(l9_546))*(1.0-l9_549)));
l9_543=l9_548;
l9_539=l9_543;
l9_542=l9_547;
}
l9_485.y=l9_539;
l9_495=l9_542;
float2 l9_550=l9_485;
int l9_551=l9_483;
int l9_552=l9_484;
float l9_553=l9_493;
float2 l9_554=l9_550;
int l9_555=l9_551;
int l9_556=l9_552;
float3 l9_557=float3(0.0);
if (l9_555==0)
{
l9_557=float3(l9_554,0.0);
}
else
{
if (l9_555==1)
{
l9_557=float3(l9_554.x,(l9_554.y*0.5)+(0.5-(float(l9_556)*0.5)),0.0);
}
else
{
l9_557=float3(l9_554,float(l9_556));
}
}
float3 l9_558=l9_557;
float3 l9_559=l9_558;
float4 l9_560=sc_set0.colorRampTexture.sample(sc_set0.colorRampTextureSmpSC,l9_559.xy,bias(l9_553));
float4 l9_561=l9_560;
if (l9_491)
{
l9_561=mix(l9_492,l9_561,float4(l9_495));
}
float4 l9_562=l9_561;
l9_476=l9_562;
float4 l9_563=l9_476;
l9_471=l9_563*N2_colorRampMult;
}
float4 l9_564=float4(1.0);
float4 l9_565=float4(1.0);
if (N2_ENABLE_BASETEXTURE)
{
if (N2_ENABLE_FLIPBOOK)
{
N2_uv=l9_254;
l9_564=l9_253;
}
else
{
float2 l9_566=N2_uv;
float4 l9_567=float4(0.0);
int l9_568;
if ((int(mainTextureHasSwappedViews_tmp)!=0))
{
int l9_569=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_569=0;
}
else
{
l9_569=in.varStereoViewID;
}
int l9_570=l9_569;
l9_568=1-l9_570;
}
else
{
int l9_571=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_571=0;
}
else
{
l9_571=in.varStereoViewID;
}
int l9_572=l9_571;
l9_568=l9_572;
}
int l9_573=l9_568;
int l9_574=mainTextureLayout_tmp;
int l9_575=l9_573;
float2 l9_576=l9_566;
bool l9_577=(int(SC_USE_UV_TRANSFORM_mainTexture_tmp)!=0);
float3x3 l9_578=(*sc_set0.UserUniforms).mainTextureTransform;
int2 l9_579=int2(SC_SOFTWARE_WRAP_MODE_U_mainTexture_tmp,SC_SOFTWARE_WRAP_MODE_V_mainTexture_tmp);
bool l9_580=(int(SC_USE_UV_MIN_MAX_mainTexture_tmp)!=0);
float4 l9_581=(*sc_set0.UserUniforms).mainTextureUvMinMax;
bool l9_582=(int(SC_USE_CLAMP_TO_BORDER_mainTexture_tmp)!=0);
float4 l9_583=(*sc_set0.UserUniforms).mainTextureBorderColor;
float l9_584=0.0;
bool l9_585=l9_582&&(!l9_580);
float l9_586=1.0;
float l9_587=l9_576.x;
int l9_588=l9_579.x;
if (l9_588==1)
{
l9_587=fract(l9_587);
}
else
{
if (l9_588==2)
{
float l9_589=fract(l9_587);
float l9_590=l9_587-l9_589;
float l9_591=step(0.25,fract(l9_590*0.5));
l9_587=mix(l9_589,1.0-l9_589,fast::clamp(l9_591,0.0,1.0));
}
}
l9_576.x=l9_587;
float l9_592=l9_576.y;
int l9_593=l9_579.y;
if (l9_593==1)
{
l9_592=fract(l9_592);
}
else
{
if (l9_593==2)
{
float l9_594=fract(l9_592);
float l9_595=l9_592-l9_594;
float l9_596=step(0.25,fract(l9_595*0.5));
l9_592=mix(l9_594,1.0-l9_594,fast::clamp(l9_596,0.0,1.0));
}
}
l9_576.y=l9_592;
if (l9_580)
{
bool l9_597=l9_582;
bool l9_598;
if (l9_597)
{
l9_598=l9_579.x==3;
}
else
{
l9_598=l9_597;
}
float l9_599=l9_576.x;
float l9_600=l9_581.x;
float l9_601=l9_581.z;
bool l9_602=l9_598;
float l9_603=l9_586;
float l9_604=fast::clamp(l9_599,l9_600,l9_601);
float l9_605=step(abs(l9_599-l9_604),9.9999997e-06);
l9_603*=(l9_605+((1.0-float(l9_602))*(1.0-l9_605)));
l9_599=l9_604;
l9_576.x=l9_599;
l9_586=l9_603;
bool l9_606=l9_582;
bool l9_607;
if (l9_606)
{
l9_607=l9_579.y==3;
}
else
{
l9_607=l9_606;
}
float l9_608=l9_576.y;
float l9_609=l9_581.y;
float l9_610=l9_581.w;
bool l9_611=l9_607;
float l9_612=l9_586;
float l9_613=fast::clamp(l9_608,l9_609,l9_610);
float l9_614=step(abs(l9_608-l9_613),9.9999997e-06);
l9_612*=(l9_614+((1.0-float(l9_611))*(1.0-l9_614)));
l9_608=l9_613;
l9_576.y=l9_608;
l9_586=l9_612;
}
float2 l9_615=l9_576;
bool l9_616=l9_577;
float3x3 l9_617=l9_578;
if (l9_616)
{
l9_615=float2((l9_617*float3(l9_615,1.0)).xy);
}
float2 l9_618=l9_615;
l9_576=l9_618;
float l9_619=l9_576.x;
int l9_620=l9_579.x;
bool l9_621=l9_585;
float l9_622=l9_586;
if ((l9_620==0)||(l9_620==3))
{
float l9_623=l9_619;
float l9_624=0.0;
float l9_625=1.0;
bool l9_626=l9_621;
float l9_627=l9_622;
float l9_628=fast::clamp(l9_623,l9_624,l9_625);
float l9_629=step(abs(l9_623-l9_628),9.9999997e-06);
l9_627*=(l9_629+((1.0-float(l9_626))*(1.0-l9_629)));
l9_623=l9_628;
l9_619=l9_623;
l9_622=l9_627;
}
l9_576.x=l9_619;
l9_586=l9_622;
float l9_630=l9_576.y;
int l9_631=l9_579.y;
bool l9_632=l9_585;
float l9_633=l9_586;
if ((l9_631==0)||(l9_631==3))
{
float l9_634=l9_630;
float l9_635=0.0;
float l9_636=1.0;
bool l9_637=l9_632;
float l9_638=l9_633;
float l9_639=fast::clamp(l9_634,l9_635,l9_636);
float l9_640=step(abs(l9_634-l9_639),9.9999997e-06);
l9_638*=(l9_640+((1.0-float(l9_637))*(1.0-l9_640)));
l9_634=l9_639;
l9_630=l9_634;
l9_633=l9_638;
}
l9_576.y=l9_630;
l9_586=l9_633;
float2 l9_641=l9_576;
int l9_642=l9_574;
int l9_643=l9_575;
float l9_644=l9_584;
float2 l9_645=l9_641;
int l9_646=l9_642;
int l9_647=l9_643;
float3 l9_648=float3(0.0);
if (l9_646==0)
{
l9_648=float3(l9_645,0.0);
}
else
{
if (l9_646==1)
{
l9_648=float3(l9_645.x,(l9_645.y*0.5)+(0.5-(float(l9_647)*0.5)),0.0);
}
else
{
l9_648=float3(l9_645,float(l9_647));
}
}
float3 l9_649=l9_648;
float3 l9_650=l9_649;
float4 l9_651=sc_set0.mainTexture.sample(sc_set0.mainTextureSmpSC,l9_650.xy,bias(l9_644));
float4 l9_652=l9_651;
if (l9_582)
{
l9_652=mix(l9_583,l9_652,float4(l9_586));
}
float4 l9_653=l9_652;
l9_567=l9_653;
float4 l9_654=l9_567;
l9_564=l9_654;
}
}
if (N2_ENABLE_COLORRAMP)
{
if (!(!(SC_DEVICE_CLASS_tmp>=2)))
{
l9_565=l9_471;
}
}
N2_result=(l9_564*l9_248)*l9_565;
if (N2_ENABLE_TRAILS)
{
if (N2_isTrail>0.0)
{
N2_result=(l9_55*l9_248)*l9_565;
N2_result.w*=l9_54;
}
}
if (N2_ENABLE_SCREENFADE)
{
N2_result.w*=N2_cameraFade_trailHeadTime_taper.x;
}
if (N2_ENABLE_ALPHADISSOLVE)
{
float l9_655=l9_46*N2_alphaDissolveMult;
N2_result.w=fast::clamp(N2_result.w-l9_655,0.0,1.0);
}
if (N2_ENABLE_BLACKASALPHA)
{
float l9_656=length(N2_result.xyz);
N2_result.w=l9_656;
if (N2_ENABLE_TRAILS)
{
N2_result.w*=l9_54;
}
}
if (N2_ENABLE_PREMULTIPLIEDCOLOR)
{
float3 l9_657=N2_result.xyz*N2_result.w;
N2_result=float4(l9_657.x,l9_657.y,l9_657.z,N2_result.w);
}
param_53=N2_result;
param_54=N2_uv;
result_N2=param_53;
uv_N2=param_54;
float Value2_N221=0.0;
float4 param_56=result_N2;
float param_57=param_56.w;
Value2_N221=param_57;
float4 Output_N166=float4(0.0);
float2 param_58=uv_N2;
int l9_658;
if ((int(normalTexPBRHasSwappedViews_tmp)!=0))
{
int l9_659=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_659=0;
}
else
{
l9_659=in.varStereoViewID;
}
int l9_660=l9_659;
l9_658=1-l9_660;
}
else
{
int l9_661=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_661=0;
}
else
{
l9_661=in.varStereoViewID;
}
int l9_662=l9_661;
l9_658=l9_662;
}
int l9_663=l9_658;
int l9_664=normalTexPBRLayout_tmp;
int l9_665=l9_663;
float2 l9_666=param_58;
bool l9_667=(int(SC_USE_UV_TRANSFORM_normalTexPBR_tmp)!=0);
float3x3 l9_668=(*sc_set0.UserUniforms).normalTexPBRTransform;
int2 l9_669=int2(SC_SOFTWARE_WRAP_MODE_U_normalTexPBR_tmp,SC_SOFTWARE_WRAP_MODE_V_normalTexPBR_tmp);
bool l9_670=(int(SC_USE_UV_MIN_MAX_normalTexPBR_tmp)!=0);
float4 l9_671=(*sc_set0.UserUniforms).normalTexPBRUvMinMax;
bool l9_672=(int(SC_USE_CLAMP_TO_BORDER_normalTexPBR_tmp)!=0);
float4 l9_673=(*sc_set0.UserUniforms).normalTexPBRBorderColor;
float l9_674=0.0;
bool l9_675=l9_672&&(!l9_670);
float l9_676=1.0;
float l9_677=l9_666.x;
int l9_678=l9_669.x;
if (l9_678==1)
{
l9_677=fract(l9_677);
}
else
{
if (l9_678==2)
{
float l9_679=fract(l9_677);
float l9_680=l9_677-l9_679;
float l9_681=step(0.25,fract(l9_680*0.5));
l9_677=mix(l9_679,1.0-l9_679,fast::clamp(l9_681,0.0,1.0));
}
}
l9_666.x=l9_677;
float l9_682=l9_666.y;
int l9_683=l9_669.y;
if (l9_683==1)
{
l9_682=fract(l9_682);
}
else
{
if (l9_683==2)
{
float l9_684=fract(l9_682);
float l9_685=l9_682-l9_684;
float l9_686=step(0.25,fract(l9_685*0.5));
l9_682=mix(l9_684,1.0-l9_684,fast::clamp(l9_686,0.0,1.0));
}
}
l9_666.y=l9_682;
if (l9_670)
{
bool l9_687=l9_672;
bool l9_688;
if (l9_687)
{
l9_688=l9_669.x==3;
}
else
{
l9_688=l9_687;
}
float l9_689=l9_666.x;
float l9_690=l9_671.x;
float l9_691=l9_671.z;
bool l9_692=l9_688;
float l9_693=l9_676;
float l9_694=fast::clamp(l9_689,l9_690,l9_691);
float l9_695=step(abs(l9_689-l9_694),9.9999997e-06);
l9_693*=(l9_695+((1.0-float(l9_692))*(1.0-l9_695)));
l9_689=l9_694;
l9_666.x=l9_689;
l9_676=l9_693;
bool l9_696=l9_672;
bool l9_697;
if (l9_696)
{
l9_697=l9_669.y==3;
}
else
{
l9_697=l9_696;
}
float l9_698=l9_666.y;
float l9_699=l9_671.y;
float l9_700=l9_671.w;
bool l9_701=l9_697;
float l9_702=l9_676;
float l9_703=fast::clamp(l9_698,l9_699,l9_700);
float l9_704=step(abs(l9_698-l9_703),9.9999997e-06);
l9_702*=(l9_704+((1.0-float(l9_701))*(1.0-l9_704)));
l9_698=l9_703;
l9_666.y=l9_698;
l9_676=l9_702;
}
float2 l9_705=l9_666;
bool l9_706=l9_667;
float3x3 l9_707=l9_668;
if (l9_706)
{
l9_705=float2((l9_707*float3(l9_705,1.0)).xy);
}
float2 l9_708=l9_705;
l9_666=l9_708;
float l9_709=l9_666.x;
int l9_710=l9_669.x;
bool l9_711=l9_675;
float l9_712=l9_676;
if ((l9_710==0)||(l9_710==3))
{
float l9_713=l9_709;
float l9_714=0.0;
float l9_715=1.0;
bool l9_716=l9_711;
float l9_717=l9_712;
float l9_718=fast::clamp(l9_713,l9_714,l9_715);
float l9_719=step(abs(l9_713-l9_718),9.9999997e-06);
l9_717*=(l9_719+((1.0-float(l9_716))*(1.0-l9_719)));
l9_713=l9_718;
l9_709=l9_713;
l9_712=l9_717;
}
l9_666.x=l9_709;
l9_676=l9_712;
float l9_720=l9_666.y;
int l9_721=l9_669.y;
bool l9_722=l9_675;
float l9_723=l9_676;
if ((l9_721==0)||(l9_721==3))
{
float l9_724=l9_720;
float l9_725=0.0;
float l9_726=1.0;
bool l9_727=l9_722;
float l9_728=l9_723;
float l9_729=fast::clamp(l9_724,l9_725,l9_726);
float l9_730=step(abs(l9_724-l9_729),9.9999997e-06);
l9_728*=(l9_730+((1.0-float(l9_727))*(1.0-l9_730)));
l9_724=l9_729;
l9_720=l9_724;
l9_723=l9_728;
}
l9_666.y=l9_720;
l9_676=l9_723;
float2 l9_731=l9_666;
int l9_732=l9_664;
int l9_733=l9_665;
float l9_734=l9_674;
float2 l9_735=l9_731;
int l9_736=l9_732;
int l9_737=l9_733;
float3 l9_738=float3(0.0);
if (l9_736==0)
{
l9_738=float3(l9_735,0.0);
}
else
{
if (l9_736==1)
{
l9_738=float3(l9_735.x,(l9_735.y*0.5)+(0.5-(float(l9_737)*0.5)),0.0);
}
else
{
l9_738=float3(l9_735,float(l9_737));
}
}
float3 l9_739=l9_738;
float3 l9_740=l9_739;
float4 l9_741=sc_set0.normalTexPBR.sample(sc_set0.normalTexPBRSmpSC,l9_740.xy,bias(l9_734));
float4 l9_742=l9_741;
if (l9_672)
{
l9_742=mix(l9_673,l9_742,float4(l9_676));
}
float4 l9_743=l9_742;
float4 param_59=l9_743;
float3 l9_744=(param_59.xyz*1.9921875)-float3(1.0);
param_59=float4(l9_744.x,l9_744.y,l9_744.z,param_59.w);
Output_N166=param_59;
float3 Normal_TangentSpace_N113=float3(0.0);
float param_60=Output_N13;
float3 param_61=Output_N166.xyz;
ssGlobals param_63=Globals;
tempGlobals=param_63;
float3 param_62=float3(0.0);
N113_MESHTYPE=int(param_60);
N113_USENORMALMAP=(int(PBRNORMALTEX_tmp)!=0);
N113_NormalFromTex=param_61;
N113_Normal_TangentSpace=float3(0.0,0.0,1.0);
if (N113_MESHTYPE==1)
{
if (N113_USENORMALMAP)
{
N113_Normal_TangentSpace=N113_NormalFromTex;
}
}
param_62=N113_Normal_TangentSpace;
Normal_TangentSpace_N113=param_62;
float Output_N164=0.0;
float param_64=(*sc_set0.UserUniforms).roughness;
Output_N164=param_64;
float param_65=Value2_N221;
float3 param_66=Normal_TangentSpace_N113;
float param_67=Output_N164;
ssGlobals param_68=Globals;
if (!(int(sc_ProjectiveShadowsCaster_tmp)!=0))
{
param_68.BumpedNormal=float3x3(float3(param_68.VertexTangent_WorldSpace),float3(param_68.VertexBinormal_WorldSpace),float3(param_68.VertexNormal_WorldSpace))*param_66;
}
param_65=fast::clamp(param_65,0.0,1.0);
float l9_745=param_65;
if ((int(sc_BlendMode_AlphaTest_tmp)!=0))
{
if (l9_745<(*sc_set0.UserUniforms).alphaTestThreshold)
{
discard_fragment();
}
}
if ((int(ENABLE_STIPPLE_PATTERN_TEST_tmp)!=0))
{
float4 l9_746=gl_FragCoord;
float2 l9_747=floor(mod(l9_746.xy,float2(4.0)));
float l9_748=(mod(dot(l9_747,float2(4.0,1.0))*9.0,16.0)+1.0)/17.0;
if (l9_745<l9_748)
{
discard_fragment();
}
}
float3 l9_749=param_68.PositionWS;
float3 l9_750=param_68.BumpedNormal;
float l9_751=param_67;
float3 l9_752=l9_749;
float3 l9_753=l9_750;
float l9_754=l9_751;
uint l9_755=0u;
uint3 l9_756=uint3(round((l9_752-(*sc_set0.UserUniforms).sc_RayTracingOriginOffset)*(*sc_set0.UserUniforms).sc_RayTracingOriginScale));
out.sc_RayTracingPositionAndMask=uint4(l9_756.x,l9_756.y,l9_756.z,out.sc_RayTracingPositionAndMask.w);
out.sc_RayTracingPositionAndMask.w=(*sc_set0.UserUniforms).sc_RayTracingReceiverMask;
float3 l9_757=l9_753;
float l9_758=dot(abs(l9_757),float3(1.0));
l9_757/=float3(l9_758);
float2 l9_759=float2(fast::clamp(-l9_757.z,0.0,1.0));
float2 l9_760=l9_757.xy+mix(-l9_759,l9_759,step(float2(0.0),l9_757.xy));
uint l9_761=as_type<uint>(half2(l9_760));
uint2 l9_762=uint2(l9_761&65535u,l9_761>>16u);
out.sc_RayTracingNormalAndMore=uint4(l9_762.x,l9_762.y,out.sc_RayTracingNormalAndMore.z,out.sc_RayTracingNormalAndMore.w);
out.sc_RayTracingNormalAndMore.z=l9_755;
uint l9_763=uint(fast::clamp(l9_754,0.0,1.0)*1000.0);
l9_763 |= (((*sc_set0.UserUniforms).sc_RayTracingReceiverId%32u)<<10u);
out.sc_RayTracingNormalAndMore.w=l9_763;
ssGlobals param_69=Globals;
tempGlobals=param_69;
ssGlobals param_70=Globals;
tempGlobals=param_70;
ssGlobals param_71=Globals;
tempGlobals=param_71;
ssGlobals param_72=Globals;
tempGlobals=param_72;
ssGlobals param_73=Globals;
tempGlobals=param_73;
float3 l9_764=float3(0.0);
float l9_765=0.0;
float l9_766=(*sc_set0.UserUniforms).timeGlobal;
l9_765=l9_766;
float l9_767=0.0;
float l9_768=(*sc_set0.UserUniforms).externalTimeInput;
l9_767=l9_768;
float l9_769=0.0;
float l9_770=(*sc_set0.UserUniforms).externalSeed;
l9_769=l9_770;
float l9_771=0.0;
float l9_772=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_771=l9_772;
float2 l9_773=float2(0.0);
float2 l9_774=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_773=l9_774;
float l9_775=0.0;
float l9_776;
if ((int(TRAILS_tmp)!=0))
{
l9_776=1.001;
}
else
{
l9_776=0.001;
}
l9_776-=0.001;
l9_775=l9_776;
float l9_777=0.0;
float l9_778=(*sc_set0.UserUniforms).trailLength;
l9_777=l9_778;
float4 l9_779=float4(0.0);
l9_779=tempGlobals.VertexColor;
float l9_780=0.0;
l9_780=l9_779.x;
float l9_781=0.0;
float l9_782=l9_775;
bool l9_783=(l9_782*1.0)!=0.0;
bool l9_784;
if (l9_783)
{
l9_784=(l9_780*1.0)!=0.0;
}
else
{
l9_784=l9_783;
}
l9_781=float(l9_784);
float3 l9_785=float3(0.0);
float l9_786=l9_765;
float l9_787=l9_767;
float l9_788=l9_769;
float l9_789=l9_771;
float2 l9_790=l9_773;
float l9_791=l9_777;
float l9_792=l9_781;
ssGlobals l9_793=tempGlobals;
tempGlobals=l9_793;
float3 l9_794=float3(0.0);
N181_timeGlobal=l9_786;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_787;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_788;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_789;
N181_lifeTimeMinMax=l9_790;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_791;
N181_isTrailCondition=l9_792!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_795=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_796=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_795=length(float4(1.0)*l9_796);
}
N181_globalSeed=N181_externalSeed+l9_795;
int l9_797=0;
l9_797=int(tempGlobals.gInstanceID+0.5);
int l9_798=l9_797;
float l9_799=float(l9_798);
int l9_800=int(l9_799);
int l9_801=l9_800^(l9_800*15299);
int l9_802=l9_801;
int l9_803=l9_802;
int l9_804=((l9_803*((l9_803*1471343)+101146501))+1559861749)&2147483647;
int l9_805=l9_804;
int l9_806=l9_802*1399;
int l9_807=((l9_806*((l9_806*1471343)+101146501))+1559861749)&2147483647;
int l9_808=l9_807;
int l9_809=l9_802*7177;
int l9_810=((l9_809*((l9_809*1471343)+101146501))+1559861749)&2147483647;
int l9_811=l9_810;
int l9_812=l9_805;
float l9_813=float(l9_812)*4.6566129e-10;
int l9_814=l9_808;
float l9_815=float(l9_814)*4.6566129e-10;
int l9_816=l9_811;
float l9_817=float(l9_816)*4.6566129e-10;
float3 l9_818=float3(l9_813,l9_815,l9_817);
float3 l9_819=l9_818;
N181_particleSeed=l9_819;
float l9_820=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_821;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_821=N181_lifeTimeMinMax;
}
else
{
l9_821=float2(N181_lifeTimeConstant);
}
float2 l9_822=l9_821;
float l9_823=fast::max(l9_822.x,0.0099999998);
float l9_824=fast::max(l9_822.y,0.0099999998);
float l9_825=tempGlobals.gTimeElapsed;
float l9_826=l9_825;
if (N181_ENABLE_EXTERNALTIME)
{
l9_826=N181_externalTime;
}
float l9_827=l9_826;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_827=N181_timeGlobal*l9_826;
}
else
{
float l9_828=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_828=N181_trailLength;
}
}
float l9_829=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_830=0.0;
l9_830=tempGlobals.gInstanceRatio;
float l9_831=l9_830;
int l9_832=0;
l9_832=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_833=l9_832;
l9_829=fast::max(l9_831*(1.0-(1.0/float(l9_833))),0.0);
}
else
{
l9_829=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_834=fract(((l9_826*N181_timeGlobal)*(1.0/(l9_822.y+l9_828)))+l9_829);
l9_827=l9_834*(l9_822.y+l9_828);
}
float l9_835=mix(l9_827/l9_823,l9_827/l9_824,l9_820);
float l9_836=fast::clamp(l9_835,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_827,l9_836);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_837=tempGlobals.Surface_UVCoord0;
l9_827-=(l9_837.y*N181_trailLength);
l9_835=mix(l9_827/l9_823,l9_827/l9_824,l9_820);
l9_836=fast::clamp(l9_835,0.0,1.0);
}
}
N181_timeValues=float4(l9_822,l9_827,l9_836);
l9_794=N181_particleSeed;
l9_785=l9_794;
l9_764=l9_785;
float3 l9_838=l9_764;
N111_particleSeedIn=l9_838;
float l9_839=0.0;
float l9_840=0.0;
float l9_841=(*sc_set0.UserUniforms).timeGlobal;
l9_840=l9_841;
float l9_842=0.0;
float l9_843=(*sc_set0.UserUniforms).externalTimeInput;
l9_842=l9_843;
float l9_844=0.0;
float l9_845=(*sc_set0.UserUniforms).externalSeed;
l9_844=l9_845;
float l9_846=0.0;
float l9_847=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_846=l9_847;
float2 l9_848=float2(0.0);
float2 l9_849=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_848=l9_849;
float l9_850=0.0;
float l9_851;
if ((int(TRAILS_tmp)!=0))
{
l9_851=1.001;
}
else
{
l9_851=0.001;
}
l9_851-=0.001;
l9_850=l9_851;
float l9_852=0.0;
float l9_853=(*sc_set0.UserUniforms).trailLength;
l9_852=l9_853;
float4 l9_854=float4(0.0);
l9_854=tempGlobals.VertexColor;
float l9_855=0.0;
l9_855=l9_854.x;
float l9_856=0.0;
float l9_857=l9_850;
bool l9_858=(l9_857*1.0)!=0.0;
bool l9_859;
if (l9_858)
{
l9_859=(l9_855*1.0)!=0.0;
}
else
{
l9_859=l9_858;
}
l9_856=float(l9_859);
float l9_860=0.0;
float l9_861=l9_840;
float l9_862=l9_842;
float l9_863=l9_844;
float l9_864=l9_846;
float2 l9_865=l9_848;
float l9_866=l9_852;
float l9_867=l9_856;
ssGlobals l9_868=tempGlobals;
tempGlobals=l9_868;
float l9_869=0.0;
N181_timeGlobal=l9_861;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_862;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_863;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_864;
N181_lifeTimeMinMax=l9_865;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_866;
N181_isTrailCondition=l9_867!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_870=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_871=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_870=length(float4(1.0)*l9_871);
}
N181_globalSeed=N181_externalSeed+l9_870;
int l9_872=0;
l9_872=int(tempGlobals.gInstanceID+0.5);
int l9_873=l9_872;
float l9_874=float(l9_873);
int l9_875=int(l9_874);
int l9_876=l9_875^(l9_875*15299);
int l9_877=l9_876;
int l9_878=l9_877;
int l9_879=((l9_878*((l9_878*1471343)+101146501))+1559861749)&2147483647;
int l9_880=l9_879;
int l9_881=l9_877*1399;
int l9_882=((l9_881*((l9_881*1471343)+101146501))+1559861749)&2147483647;
int l9_883=l9_882;
int l9_884=l9_877*7177;
int l9_885=((l9_884*((l9_884*1471343)+101146501))+1559861749)&2147483647;
int l9_886=l9_885;
int l9_887=l9_880;
float l9_888=float(l9_887)*4.6566129e-10;
int l9_889=l9_883;
float l9_890=float(l9_889)*4.6566129e-10;
int l9_891=l9_886;
float l9_892=float(l9_891)*4.6566129e-10;
float3 l9_893=float3(l9_888,l9_890,l9_892);
float3 l9_894=l9_893;
N181_particleSeed=l9_894;
float l9_895=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_896;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_896=N181_lifeTimeMinMax;
}
else
{
l9_896=float2(N181_lifeTimeConstant);
}
float2 l9_897=l9_896;
float l9_898=fast::max(l9_897.x,0.0099999998);
float l9_899=fast::max(l9_897.y,0.0099999998);
float l9_900=tempGlobals.gTimeElapsed;
float l9_901=l9_900;
if (N181_ENABLE_EXTERNALTIME)
{
l9_901=N181_externalTime;
}
float l9_902=l9_901;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_902=N181_timeGlobal*l9_901;
}
else
{
float l9_903=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_903=N181_trailLength;
}
}
float l9_904=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_905=0.0;
l9_905=tempGlobals.gInstanceRatio;
float l9_906=l9_905;
int l9_907=0;
l9_907=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_908=l9_907;
l9_904=fast::max(l9_906*(1.0-(1.0/float(l9_908))),0.0);
}
else
{
l9_904=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_909=fract(((l9_901*N181_timeGlobal)*(1.0/(l9_897.y+l9_903)))+l9_904);
l9_902=l9_909*(l9_897.y+l9_903);
}
float l9_910=mix(l9_902/l9_898,l9_902/l9_899,l9_895);
float l9_911=fast::clamp(l9_910,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_902,l9_911);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_912=tempGlobals.Surface_UVCoord0;
l9_902-=(l9_912.y*N181_trailLength);
l9_910=mix(l9_902/l9_898,l9_902/l9_899,l9_895);
l9_911=fast::clamp(l9_910,0.0,1.0);
}
}
N181_timeValues=float4(l9_897,l9_902,l9_911);
l9_869=N181_globalSeed;
l9_860=l9_869;
l9_839=l9_860;
float l9_913=l9_839;
N111_globalSeedIn=l9_913;
float l9_914=0.0;
float l9_915=(*sc_set0.UserUniforms).timeGlobal;
l9_914=l9_915;
float l9_916=0.0;
float l9_917=(*sc_set0.UserUniforms).externalTimeInput;
l9_916=l9_917;
float l9_918=0.0;
float l9_919=(*sc_set0.UserUniforms).externalSeed;
l9_918=l9_919;
float l9_920=0.0;
float l9_921=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_920=l9_921;
float2 l9_922=float2(0.0);
float2 l9_923=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_922=l9_923;
float l9_924=0.0;
float l9_925;
if ((int(TRAILS_tmp)!=0))
{
l9_925=1.001;
}
else
{
l9_925=0.001;
}
l9_925-=0.001;
l9_924=l9_925;
float l9_926=0.0;
float l9_927=(*sc_set0.UserUniforms).trailLength;
l9_926=l9_927;
float4 l9_928=float4(0.0);
l9_928=tempGlobals.VertexColor;
float l9_929=0.0;
l9_929=l9_928.x;
float l9_930=0.0;
float l9_931=l9_924;
bool l9_932=(l9_931*1.0)!=0.0;
bool l9_933;
if (l9_932)
{
l9_933=(l9_929*1.0)!=0.0;
}
else
{
l9_933=l9_932;
}
l9_930=float(l9_933);
float l9_934=l9_914;
float l9_935=l9_916;
float l9_936=l9_918;
float l9_937=l9_920;
float2 l9_938=l9_922;
float l9_939=l9_926;
float l9_940=l9_930;
ssGlobals l9_941=tempGlobals;
tempGlobals=l9_941;
N181_timeGlobal=l9_934;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_935;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_936;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_937;
N181_lifeTimeMinMax=l9_938;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_939;
N181_isTrailCondition=l9_940!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_942=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_943=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_942=length(float4(1.0)*l9_943);
}
N181_globalSeed=N181_externalSeed+l9_942;
int l9_944=0;
l9_944=int(tempGlobals.gInstanceID+0.5);
int l9_945=l9_944;
float l9_946=float(l9_945);
int l9_947=int(l9_946);
int l9_948=l9_947^(l9_947*15299);
int l9_949=l9_948;
int l9_950=l9_949;
int l9_951=((l9_950*((l9_950*1471343)+101146501))+1559861749)&2147483647;
int l9_952=l9_951;
int l9_953=l9_949*1399;
int l9_954=((l9_953*((l9_953*1471343)+101146501))+1559861749)&2147483647;
int l9_955=l9_954;
int l9_956=l9_949*7177;
int l9_957=((l9_956*((l9_956*1471343)+101146501))+1559861749)&2147483647;
int l9_958=l9_957;
int l9_959=l9_952;
float l9_960=float(l9_959)*4.6566129e-10;
int l9_961=l9_955;
float l9_962=float(l9_961)*4.6566129e-10;
int l9_963=l9_958;
float l9_964=float(l9_963)*4.6566129e-10;
float3 l9_965=float3(l9_960,l9_962,l9_964);
float3 l9_966=l9_965;
N181_particleSeed=l9_966;
float l9_967=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_968;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_968=N181_lifeTimeMinMax;
}
else
{
l9_968=float2(N181_lifeTimeConstant);
}
float2 l9_969=l9_968;
float l9_970=fast::max(l9_969.x,0.0099999998);
float l9_971=fast::max(l9_969.y,0.0099999998);
float l9_972=tempGlobals.gTimeElapsed;
float l9_973=l9_972;
if (N181_ENABLE_EXTERNALTIME)
{
l9_973=N181_externalTime;
}
float l9_974=l9_973;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_974=N181_timeGlobal*l9_973;
}
else
{
float l9_975=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_975=N181_trailLength;
}
}
float l9_976=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_977=0.0;
l9_977=tempGlobals.gInstanceRatio;
float l9_978=l9_977;
int l9_979=0;
l9_979=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_980=l9_979;
l9_976=fast::max(l9_978*(1.0-(1.0/float(l9_980))),0.0);
}
else
{
l9_976=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_981=fract(((l9_973*N181_timeGlobal)*(1.0/(l9_969.y+l9_975)))+l9_976);
l9_974=l9_981*(l9_969.y+l9_975);
}
float l9_982=mix(l9_974/l9_970,l9_974/l9_971,l9_967);
float l9_983=fast::clamp(l9_982,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_974,l9_983);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_984=tempGlobals.Surface_UVCoord0;
l9_974-=(l9_984.y*N181_trailLength);
l9_982=mix(l9_974/l9_970,l9_974/l9_971,l9_967);
l9_983=fast::clamp(l9_982,0.0,1.0);
}
}
N181_timeValues=float4(l9_969,l9_974,l9_983);
float4 l9_985=float4(0.0);
float l9_986=0.0;
float l9_987=(*sc_set0.UserUniforms).timeGlobal;
l9_986=l9_987;
float l9_988=0.0;
float l9_989=(*sc_set0.UserUniforms).externalTimeInput;
l9_988=l9_989;
float l9_990=0.0;
float l9_991=(*sc_set0.UserUniforms).externalSeed;
l9_990=l9_991;
float l9_992=0.0;
float l9_993=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_992=l9_993;
float2 l9_994=float2(0.0);
float2 l9_995=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_994=l9_995;
float l9_996=0.0;
float l9_997;
if ((int(TRAILS_tmp)!=0))
{
l9_997=1.001;
}
else
{
l9_997=0.001;
}
l9_997-=0.001;
l9_996=l9_997;
float l9_998=0.0;
float l9_999=(*sc_set0.UserUniforms).trailLength;
l9_998=l9_999;
float4 l9_1000=float4(0.0);
l9_1000=tempGlobals.VertexColor;
float l9_1001=0.0;
l9_1001=l9_1000.x;
float l9_1002=0.0;
float l9_1003=l9_996;
bool l9_1004=(l9_1003*1.0)!=0.0;
bool l9_1005;
if (l9_1004)
{
l9_1005=(l9_1001*1.0)!=0.0;
}
else
{
l9_1005=l9_1004;
}
l9_1002=float(l9_1005);
float4 l9_1006=float4(0.0);
float l9_1007=l9_986;
float l9_1008=l9_988;
float l9_1009=l9_990;
float l9_1010=l9_992;
float2 l9_1011=l9_994;
float l9_1012=l9_998;
float l9_1013=l9_1002;
ssGlobals l9_1014=tempGlobals;
tempGlobals=l9_1014;
float4 l9_1015=float4(0.0);
N181_timeGlobal=l9_1007;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_1008;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_1009;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_1010;
N181_lifeTimeMinMax=l9_1011;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_1012;
N181_isTrailCondition=l9_1013!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_1016=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_1017=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_1016=length(float4(1.0)*l9_1017);
}
N181_globalSeed=N181_externalSeed+l9_1016;
int l9_1018=0;
l9_1018=int(tempGlobals.gInstanceID+0.5);
int l9_1019=l9_1018;
float l9_1020=float(l9_1019);
int l9_1021=int(l9_1020);
int l9_1022=l9_1021^(l9_1021*15299);
int l9_1023=l9_1022;
int l9_1024=l9_1023;
int l9_1025=((l9_1024*((l9_1024*1471343)+101146501))+1559861749)&2147483647;
int l9_1026=l9_1025;
int l9_1027=l9_1023*1399;
int l9_1028=((l9_1027*((l9_1027*1471343)+101146501))+1559861749)&2147483647;
int l9_1029=l9_1028;
int l9_1030=l9_1023*7177;
int l9_1031=((l9_1030*((l9_1030*1471343)+101146501))+1559861749)&2147483647;
int l9_1032=l9_1031;
int l9_1033=l9_1026;
float l9_1034=float(l9_1033)*4.6566129e-10;
int l9_1035=l9_1029;
float l9_1036=float(l9_1035)*4.6566129e-10;
int l9_1037=l9_1032;
float l9_1038=float(l9_1037)*4.6566129e-10;
float3 l9_1039=float3(l9_1034,l9_1036,l9_1038);
float3 l9_1040=l9_1039;
N181_particleSeed=l9_1040;
float l9_1041=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_1042;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_1042=N181_lifeTimeMinMax;
}
else
{
l9_1042=float2(N181_lifeTimeConstant);
}
float2 l9_1043=l9_1042;
float l9_1044=fast::max(l9_1043.x,0.0099999998);
float l9_1045=fast::max(l9_1043.y,0.0099999998);
float l9_1046=tempGlobals.gTimeElapsed;
float l9_1047=l9_1046;
if (N181_ENABLE_EXTERNALTIME)
{
l9_1047=N181_externalTime;
}
float l9_1048=l9_1047;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_1048=N181_timeGlobal*l9_1047;
}
else
{
float l9_1049=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_1049=N181_trailLength;
}
}
float l9_1050=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_1051=0.0;
l9_1051=tempGlobals.gInstanceRatio;
float l9_1052=l9_1051;
int l9_1053=0;
l9_1053=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_1054=l9_1053;
l9_1050=fast::max(l9_1052*(1.0-(1.0/float(l9_1054))),0.0);
}
else
{
l9_1050=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_1055=fract(((l9_1047*N181_timeGlobal)*(1.0/(l9_1043.y+l9_1049)))+l9_1050);
l9_1048=l9_1055*(l9_1043.y+l9_1049);
}
float l9_1056=mix(l9_1048/l9_1044,l9_1048/l9_1045,l9_1041);
float l9_1057=fast::clamp(l9_1056,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_1048,l9_1057);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_1058=tempGlobals.Surface_UVCoord0;
l9_1048-=(l9_1058.y*N181_trailLength);
l9_1056=mix(l9_1048/l9_1044,l9_1048/l9_1045,l9_1041);
l9_1057=fast::clamp(l9_1056,0.0,1.0);
}
}
N181_timeValues=float4(l9_1043,l9_1048,l9_1057);
l9_1015=N181_timeValues;
l9_1006=l9_1015;
l9_985=l9_1006;
float4 l9_1059=l9_985;
N111_timeValuesIn=l9_1059;
float l9_1060=0.0;
float l9_1061=0.0;
float l9_1062=(*sc_set0.UserUniforms).timeGlobal;
l9_1061=l9_1062;
float l9_1063=0.0;
float l9_1064=(*sc_set0.UserUniforms).externalTimeInput;
l9_1063=l9_1064;
float l9_1065=0.0;
float l9_1066=(*sc_set0.UserUniforms).externalSeed;
l9_1065=l9_1066;
float l9_1067=0.0;
float l9_1068=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_1067=l9_1068;
float2 l9_1069=float2(0.0);
float2 l9_1070=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_1069=l9_1070;
float l9_1071=0.0;
float l9_1072;
if ((int(TRAILS_tmp)!=0))
{
l9_1072=1.001;
}
else
{
l9_1072=0.001;
}
l9_1072-=0.001;
l9_1071=l9_1072;
float l9_1073=0.0;
float l9_1074=(*sc_set0.UserUniforms).trailLength;
l9_1073=l9_1074;
float4 l9_1075=float4(0.0);
l9_1075=tempGlobals.VertexColor;
float l9_1076=0.0;
l9_1076=l9_1075.x;
float l9_1077=0.0;
float l9_1078=l9_1071;
bool l9_1079=(l9_1078*1.0)!=0.0;
bool l9_1080;
if (l9_1079)
{
l9_1080=(l9_1076*1.0)!=0.0;
}
else
{
l9_1080=l9_1079;
}
l9_1077=float(l9_1080);
float l9_1081=0.0;
float l9_1082=l9_1061;
float l9_1083=l9_1063;
float l9_1084=l9_1065;
float l9_1085=l9_1067;
float2 l9_1086=l9_1069;
float l9_1087=l9_1073;
float l9_1088=l9_1077;
ssGlobals l9_1089=tempGlobals;
tempGlobals=l9_1089;
float l9_1090=0.0;
N181_timeGlobal=l9_1082;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_1083;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_1084;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_1085;
N181_lifeTimeMinMax=l9_1086;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_1087;
N181_isTrailCondition=l9_1088!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_1091=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_1092=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_1091=length(float4(1.0)*l9_1092);
}
N181_globalSeed=N181_externalSeed+l9_1091;
int l9_1093=0;
l9_1093=int(tempGlobals.gInstanceID+0.5);
int l9_1094=l9_1093;
float l9_1095=float(l9_1094);
int l9_1096=int(l9_1095);
int l9_1097=l9_1096^(l9_1096*15299);
int l9_1098=l9_1097;
int l9_1099=l9_1098;
int l9_1100=((l9_1099*((l9_1099*1471343)+101146501))+1559861749)&2147483647;
int l9_1101=l9_1100;
int l9_1102=l9_1098*1399;
int l9_1103=((l9_1102*((l9_1102*1471343)+101146501))+1559861749)&2147483647;
int l9_1104=l9_1103;
int l9_1105=l9_1098*7177;
int l9_1106=((l9_1105*((l9_1105*1471343)+101146501))+1559861749)&2147483647;
int l9_1107=l9_1106;
int l9_1108=l9_1101;
float l9_1109=float(l9_1108)*4.6566129e-10;
int l9_1110=l9_1104;
float l9_1111=float(l9_1110)*4.6566129e-10;
int l9_1112=l9_1107;
float l9_1113=float(l9_1112)*4.6566129e-10;
float3 l9_1114=float3(l9_1109,l9_1111,l9_1113);
float3 l9_1115=l9_1114;
N181_particleSeed=l9_1115;
float l9_1116=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_1117;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_1117=N181_lifeTimeMinMax;
}
else
{
l9_1117=float2(N181_lifeTimeConstant);
}
float2 l9_1118=l9_1117;
float l9_1119=fast::max(l9_1118.x,0.0099999998);
float l9_1120=fast::max(l9_1118.y,0.0099999998);
float l9_1121=tempGlobals.gTimeElapsed;
float l9_1122=l9_1121;
if (N181_ENABLE_EXTERNALTIME)
{
l9_1122=N181_externalTime;
}
float l9_1123=l9_1122;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_1123=N181_timeGlobal*l9_1122;
}
else
{
float l9_1124=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_1124=N181_trailLength;
}
}
float l9_1125=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_1126=0.0;
l9_1126=tempGlobals.gInstanceRatio;
float l9_1127=l9_1126;
int l9_1128=0;
l9_1128=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_1129=l9_1128;
l9_1125=fast::max(l9_1127*(1.0-(1.0/float(l9_1129))),0.0);
}
else
{
l9_1125=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_1130=fract(((l9_1122*N181_timeGlobal)*(1.0/(l9_1118.y+l9_1124)))+l9_1125);
l9_1123=l9_1130*(l9_1118.y+l9_1124);
}
float l9_1131=mix(l9_1123/l9_1119,l9_1123/l9_1120,l9_1116);
float l9_1132=fast::clamp(l9_1131,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_1123,l9_1132);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_1133=tempGlobals.Surface_UVCoord0;
l9_1123-=(l9_1133.y*N181_trailLength);
l9_1131=mix(l9_1123/l9_1119,l9_1123/l9_1120,l9_1116);
l9_1132=fast::clamp(l9_1131,0.0,1.0);
}
}
N181_timeValues=float4(l9_1118,l9_1123,l9_1132);
l9_1090=N181_isTrail;
l9_1081=l9_1090;
l9_1060=l9_1081;
bool l9_1134=l9_1060!=0.0;
N111_isTrail=l9_1134;
float2 l9_1135=float2(0.0);
float l9_1136=0.0;
float l9_1137=(*sc_set0.UserUniforms).timeGlobal;
l9_1136=l9_1137;
float l9_1138=0.0;
float l9_1139=(*sc_set0.UserUniforms).externalTimeInput;
l9_1138=l9_1139;
float l9_1140=0.0;
float l9_1141=(*sc_set0.UserUniforms).externalSeed;
l9_1140=l9_1141;
float l9_1142=0.0;
float l9_1143=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_1142=l9_1143;
float2 l9_1144=float2(0.0);
float2 l9_1145=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_1144=l9_1145;
float l9_1146=0.0;
float l9_1147;
if ((int(TRAILS_tmp)!=0))
{
l9_1147=1.001;
}
else
{
l9_1147=0.001;
}
l9_1147-=0.001;
l9_1146=l9_1147;
float l9_1148=0.0;
float l9_1149=(*sc_set0.UserUniforms).trailLength;
l9_1148=l9_1149;
float4 l9_1150=float4(0.0);
l9_1150=tempGlobals.VertexColor;
float l9_1151=0.0;
l9_1151=l9_1150.x;
float l9_1152=0.0;
float l9_1153=l9_1146;
bool l9_1154=(l9_1153*1.0)!=0.0;
bool l9_1155;
if (l9_1154)
{
l9_1155=(l9_1151*1.0)!=0.0;
}
else
{
l9_1155=l9_1154;
}
l9_1152=float(l9_1155);
float2 l9_1156=float2(0.0);
float l9_1157=l9_1136;
float l9_1158=l9_1138;
float l9_1159=l9_1140;
float l9_1160=l9_1142;
float2 l9_1161=l9_1144;
float l9_1162=l9_1148;
float l9_1163=l9_1152;
ssGlobals l9_1164=tempGlobals;
tempGlobals=l9_1164;
float2 l9_1165=float2(0.0);
N181_timeGlobal=l9_1157;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_1158;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_1159;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_1160;
N181_lifeTimeMinMax=l9_1161;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_1162;
N181_isTrailCondition=l9_1163!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_1166=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_1167=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_1166=length(float4(1.0)*l9_1167);
}
N181_globalSeed=N181_externalSeed+l9_1166;
int l9_1168=0;
l9_1168=int(tempGlobals.gInstanceID+0.5);
int l9_1169=l9_1168;
float l9_1170=float(l9_1169);
int l9_1171=int(l9_1170);
int l9_1172=l9_1171^(l9_1171*15299);
int l9_1173=l9_1172;
int l9_1174=l9_1173;
int l9_1175=((l9_1174*((l9_1174*1471343)+101146501))+1559861749)&2147483647;
int l9_1176=l9_1175;
int l9_1177=l9_1173*1399;
int l9_1178=((l9_1177*((l9_1177*1471343)+101146501))+1559861749)&2147483647;
int l9_1179=l9_1178;
int l9_1180=l9_1173*7177;
int l9_1181=((l9_1180*((l9_1180*1471343)+101146501))+1559861749)&2147483647;
int l9_1182=l9_1181;
int l9_1183=l9_1176;
float l9_1184=float(l9_1183)*4.6566129e-10;
int l9_1185=l9_1179;
float l9_1186=float(l9_1185)*4.6566129e-10;
int l9_1187=l9_1182;
float l9_1188=float(l9_1187)*4.6566129e-10;
float3 l9_1189=float3(l9_1184,l9_1186,l9_1188);
float3 l9_1190=l9_1189;
N181_particleSeed=l9_1190;
float l9_1191=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_1192;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_1192=N181_lifeTimeMinMax;
}
else
{
l9_1192=float2(N181_lifeTimeConstant);
}
float2 l9_1193=l9_1192;
float l9_1194=fast::max(l9_1193.x,0.0099999998);
float l9_1195=fast::max(l9_1193.y,0.0099999998);
float l9_1196=tempGlobals.gTimeElapsed;
float l9_1197=l9_1196;
if (N181_ENABLE_EXTERNALTIME)
{
l9_1197=N181_externalTime;
}
float l9_1198=l9_1197;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_1198=N181_timeGlobal*l9_1197;
}
else
{
float l9_1199=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_1199=N181_trailLength;
}
}
float l9_1200=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_1201=0.0;
l9_1201=tempGlobals.gInstanceRatio;
float l9_1202=l9_1201;
int l9_1203=0;
l9_1203=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_1204=l9_1203;
l9_1200=fast::max(l9_1202*(1.0-(1.0/float(l9_1204))),0.0);
}
else
{
l9_1200=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_1205=fract(((l9_1197*N181_timeGlobal)*(1.0/(l9_1193.y+l9_1199)))+l9_1200);
l9_1198=l9_1205*(l9_1193.y+l9_1199);
}
float l9_1206=mix(l9_1198/l9_1194,l9_1198/l9_1195,l9_1191);
float l9_1207=fast::clamp(l9_1206,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_1198,l9_1207);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_1208=tempGlobals.Surface_UVCoord0;
l9_1198-=(l9_1208.y*N181_trailLength);
l9_1206=mix(l9_1198/l9_1194,l9_1198/l9_1195,l9_1191);
l9_1207=fast::clamp(l9_1206,0.0,1.0);
}
}
N181_timeValues=float4(l9_1193,l9_1198,l9_1207);
l9_1165=N181_trailHeadTime;
l9_1156=l9_1165;
l9_1135=l9_1156;
float2 l9_1209=l9_1135;
N111_trailHeadTime=l9_1209;
float l9_1210=0.0;
float l9_1211=0.0;
float l9_1212=(*sc_set0.UserUniforms).trailWidth;
l9_1211=l9_1212;
l9_1210=l9_1211;
float l9_1213=l9_1210;
N111_trailSizeMult=l9_1213;
float3 l9_1214=float3(0.0);
float3 l9_1215=float3(0.0);
float3 l9_1216=float3(0.0);
float3 l9_1217=float3(0.0);
float3 l9_1218=float3(0.0);
float3 l9_1219=float3(0.0);
float3 l9_1220=float3(0.0);
float3 l9_1221=float3(0.0);
float3 l9_1222=float3(0.0);
float3 l9_1223=float3(0.0);
float3 l9_1224=(*sc_set0.UserUniforms).Port_Default_N247;
ssGlobals l9_1225=tempGlobals;
float3 l9_1226;
if (NODE_248_DROPLIST_ITEM_tmp==0)
{
float l9_1227=0.0;
float l9_1228=(*sc_set0.UserUniforms).Tweak_N255;
l9_1227=l9_1228;
float l9_1229=0.0;
float l9_1230=(*sc_set0.UserUniforms).Tweak_N254;
l9_1229=l9_1230;
float3 l9_1231=float3(0.0);
float3 l9_1232=(*sc_set0.UserUniforms).Tweak_N252;
l9_1231=l9_1232;
float3 l9_1233=float3(0.0);
float3 l9_1234=(*sc_set0.UserUniforms).Tweak_N253;
l9_1233=l9_1234;
float l9_1235=0.0;
float l9_1236=(*sc_set0.UserUniforms).Tweak_N224;
l9_1235=l9_1236;
float3 l9_1237=float3(0.0);
float l9_1238=l9_1227;
float l9_1239=l9_1229;
float3 l9_1240=l9_1231;
float3 l9_1241=l9_1233;
float l9_1242=l9_1235;
ssGlobals l9_1243=l9_1225;
tempGlobals=l9_1243;
float3 l9_1244=float3(0.0);
N128_SphereType=int(l9_1238);
N128_Radius=l9_1239;
N128_Scale=l9_1240;
N128_Center=l9_1241;
N128_VolumeFill=l9_1242;
int l9_1245=0;
l9_1245=int(tempGlobals.gInstanceID+0.5);
int l9_1246=l9_1245;
float l9_1247=float(l9_1246);
int l9_1248=int(l9_1247);
int l9_1249=l9_1248^(l9_1248*15299);
int l9_1250=l9_1249;
int l9_1251=l9_1250;
int l9_1252=((l9_1251*((l9_1251*1471343)+101146501))+1559861749)&2147483647;
int l9_1253=l9_1252;
int l9_1254=l9_1250*1399;
int l9_1255=((l9_1254*((l9_1254*1471343)+101146501))+1559861749)&2147483647;
int l9_1256=l9_1255;
int l9_1257=l9_1250*7177;
int l9_1258=((l9_1257*((l9_1257*1471343)+101146501))+1559861749)&2147483647;
int l9_1259=l9_1258;
int l9_1260=l9_1253;
float l9_1261=float(l9_1260)*4.6566129e-10;
int l9_1262=l9_1256;
float l9_1263=float(l9_1262)*4.6566129e-10;
int l9_1264=l9_1259;
float l9_1265=float(l9_1264)*4.6566129e-10;
float3 l9_1266=float3(l9_1261,l9_1263,l9_1265);
float3 l9_1267=l9_1266;
float3 l9_1268=l9_1267;
int l9_1269=0;
l9_1269=int(tempGlobals.gInstanceID+0.5);
int l9_1270=l9_1269;
float l9_1271=float(l9_1270+1);
int l9_1272=int(l9_1271);
int l9_1273=l9_1272^(l9_1272*15299);
int l9_1274=l9_1273;
int l9_1275=l9_1274;
int l9_1276=((l9_1275*((l9_1275*1471343)+101146501))+1559861749)&2147483647;
int l9_1277=l9_1276;
int l9_1278=l9_1274*1399;
int l9_1279=((l9_1278*((l9_1278*1471343)+101146501))+1559861749)&2147483647;
int l9_1280=l9_1279;
int l9_1281=l9_1274*7177;
int l9_1282=((l9_1281*((l9_1281*1471343)+101146501))+1559861749)&2147483647;
int l9_1283=l9_1282;
int l9_1284=l9_1277;
float l9_1285=float(l9_1284)*4.6566129e-10;
int l9_1286=l9_1280;
float l9_1287=float(l9_1286)*4.6566129e-10;
int l9_1288=l9_1283;
float l9_1289=float(l9_1288)*4.6566129e-10;
float3 l9_1290=float3(l9_1285,l9_1287,l9_1289);
float3 l9_1291=l9_1290;
float3 l9_1292=l9_1291;
float l9_1293=1.0-N128_VolumeFill;
float l9_1294=3.0;
float l9_1295;
if (l9_1293<=0.0)
{
l9_1295=0.0;
}
else
{
l9_1295=pow(l9_1293,l9_1294);
}
float l9_1296=l9_1295;
float l9_1297=l9_1296;
l9_1268=mix(float3(l9_1297),float3(1.0),l9_1268);
float3 l9_1298=l9_1268;
float l9_1299;
if (l9_1298.x<=0.0)
{
l9_1299=0.0;
}
else
{
l9_1299=sqrt(l9_1298.x);
}
float l9_1300=l9_1299;
float l9_1301;
if (l9_1298.y<=0.0)
{
l9_1301=0.0;
}
else
{
l9_1301=sqrt(l9_1298.y);
}
float l9_1302=l9_1301;
float l9_1303;
if (l9_1298.z<=0.0)
{
l9_1303=0.0;
}
else
{
l9_1303=sqrt(l9_1298.z);
}
float3 l9_1304=float3(l9_1300,l9_1302,l9_1303);
l9_1268=l9_1304;
l9_1292=mix(float3(-1.0),float3(1.0),l9_1292);
l9_1292/=float3(length(l9_1292+float3(9.9999997e-05)));
float3 l9_1305=((l9_1268*l9_1292)*N128_Scale)*(N128_Radius*0.5);
if (N128_SphereType==1)
{
l9_1305.x=abs(l9_1305.x);
}
else
{
if (N128_SphereType==2)
{
l9_1305.y=abs(l9_1305.y);
}
else
{
if (N128_SphereType==3)
{
l9_1305.z=abs(l9_1305.z);
}
}
}
l9_1305+=N128_Center;
N128_Result=l9_1305;
l9_1244=N128_Result;
l9_1237=l9_1244;
l9_1216=l9_1237;
l9_1226=l9_1216;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==1)
{
float3 l9_1306=float3(0.0);
float3 l9_1307=(*sc_set0.UserUniforms).Tweak_N250;
l9_1306=l9_1307;
float3 l9_1308=float3(0.0);
float3 l9_1309=(*sc_set0.UserUniforms).Tweak_N251;
l9_1308=l9_1309;
float l9_1310=0.0;
float l9_1311=(*sc_set0.UserUniforms).volumeFill;
l9_1310=l9_1311;
float3 l9_1312=float3(0.0);
float3 l9_1313=l9_1306;
float3 l9_1314=l9_1308;
float l9_1315=l9_1310;
ssGlobals l9_1316=l9_1225;
tempGlobals=l9_1316;
float3 l9_1317=float3(0.0);
N137_Scale=l9_1313;
N137_Center=l9_1314;
N137_VolumeFill=l9_1315;
int l9_1318=0;
l9_1318=int(tempGlobals.gInstanceID+0.5);
int l9_1319=l9_1318;
float l9_1320=float(l9_1319);
float l9_1321=mod(l9_1320,8.0);
float l9_1322=mod(l9_1320,3.0);
float l9_1323=l9_1320;
int l9_1324=int(l9_1323);
int l9_1325=l9_1324^(l9_1324*15299);
int l9_1326=l9_1325;
int l9_1327=l9_1326;
int l9_1328=((l9_1327*((l9_1327*1471343)+101146501))+1559861749)&2147483647;
int l9_1329=l9_1328;
int l9_1330=l9_1326*1399;
int l9_1331=((l9_1330*((l9_1330*1471343)+101146501))+1559861749)&2147483647;
int l9_1332=l9_1331;
int l9_1333=l9_1326*7177;
int l9_1334=((l9_1333*((l9_1333*1471343)+101146501))+1559861749)&2147483647;
int l9_1335=l9_1334;
int l9_1336=l9_1329;
float l9_1337=float(l9_1336)*4.6566129e-10;
int l9_1338=l9_1332;
float l9_1339=float(l9_1338)*4.6566129e-10;
int l9_1340=l9_1335;
float l9_1341=float(l9_1340)*4.6566129e-10;
float3 l9_1342=float3(l9_1337,l9_1339,l9_1341);
float3 l9_1343=l9_1342;
float3 l9_1344=l9_1343;
float l9_1345=1.0-N137_VolumeFill;
float l9_1346=3.0;
float l9_1347;
if (l9_1345<=0.0)
{
l9_1347=0.0;
}
else
{
l9_1347=pow(l9_1345,l9_1346);
}
float l9_1348=l9_1347;
float l9_1349=l9_1348;
float3 l9_1350;
if (l9_1322==0.0)
{
l9_1350=float3(l9_1349,0.0,0.0);
}
else
{
float3 l9_1351;
if (l9_1322==1.0)
{
l9_1351=float3(0.0,l9_1349,0.0);
}
else
{
l9_1351=float3(0.0,0.0,l9_1349);
}
l9_1350=l9_1351;
}
float3 l9_1352=l9_1350;
float3 l9_1353=mix(l9_1352,float3(1.0),l9_1344);
float3 l9_1354;
if (l9_1321==0.0)
{
l9_1354=l9_1353*float3(1.0);
}
else
{
float3 l9_1355;
if (l9_1321==1.0)
{
l9_1355=l9_1353*float3(-1.0,1.0,1.0);
}
else
{
float3 l9_1356;
if (l9_1321==2.0)
{
l9_1356=l9_1353*float3(-1.0,-1.0,1.0);
}
else
{
float3 l9_1357;
if (l9_1321==3.0)
{
l9_1357=l9_1353*float3(-1.0);
}
else
{
float3 l9_1358;
if (l9_1321==4.0)
{
l9_1358=l9_1353*float3(1.0,-1.0,-1.0);
}
else
{
float3 l9_1359;
if (l9_1321==5.0)
{
l9_1359=l9_1353*float3(1.0,1.0,-1.0);
}
else
{
float3 l9_1360;
if (l9_1321==6.0)
{
l9_1360=l9_1353*float3(-1.0,1.0,-1.0);
}
else
{
l9_1360=l9_1353*float3(1.0,-1.0,1.0);
}
l9_1359=l9_1360;
}
l9_1358=l9_1359;
}
l9_1357=l9_1358;
}
l9_1356=l9_1357;
}
l9_1355=l9_1356;
}
l9_1354=l9_1355;
}
float3 l9_1361=l9_1354;
float3 l9_1362=l9_1361;
float3 l9_1363=l9_1362*(N137_Scale*0.5);
l9_1363+=N137_Center;
N137_Result=l9_1363;
l9_1317=N137_Result;
l9_1312=l9_1317;
l9_1217=l9_1312;
l9_1226=l9_1217;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==2)
{
float l9_1364=0.0;
float l9_1365=(*sc_set0.UserUniforms).Tweak_N238;
l9_1364=l9_1365;
float l9_1366=0.0;
float l9_1367=(*sc_set0.UserUniforms).Tweak_N16;
l9_1366=l9_1367;
float l9_1368=0.0;
float l9_1369=(*sc_set0.UserUniforms).Tweak_N234;
l9_1368=l9_1369;
float l9_1370=0.0;
float l9_1371=(*sc_set0.UserUniforms).Tweak_N239;
l9_1370=l9_1371;
float2 l9_1372=float2(0.0);
float2 l9_1373=(*sc_set0.UserUniforms).Tweak_N240;
l9_1372=l9_1373;
float3 l9_1374=float3(0.0);
float3 l9_1375=(*sc_set0.UserUniforms).Tweak_N241;
l9_1374=l9_1375;
float3 l9_1376=float3(0.0);
float3 l9_1377=(*sc_set0.UserUniforms).Tweak_N242;
l9_1376=l9_1377;
float l9_1378=0.0;
float l9_1379=(*sc_set0.UserUniforms).Tweak_N226;
l9_1378=l9_1379;
float l9_1380=0.0;
float l9_1381=(*sc_set0.UserUniforms).Tweak_N243;
l9_1380=l9_1381;
float3 l9_1382=float3(0.0);
float l9_1383=l9_1364;
float l9_1384=l9_1366;
float l9_1385=l9_1368;
float l9_1386=l9_1370;
float2 l9_1387=l9_1372;
float3 l9_1388=l9_1374;
float3 l9_1389=l9_1376;
float l9_1390=l9_1378;
float l9_1391=l9_1380;
ssGlobals l9_1392=l9_1225;
tempGlobals=l9_1392;
float3 l9_1393=float3(0.0);
N144_Radius=l9_1383;
N144_startRad=l9_1384;
N144_endRad=l9_1385;
N144_Height=l9_1386;
N144_ArcAngles=l9_1387;
N144_Scale=l9_1388;
N144_Center=l9_1389;
N144_VolumeFill=l9_1390;
N144_OrientationAxis=int(l9_1391);
int l9_1394=0;
l9_1394=int(tempGlobals.gInstanceID+0.5);
int l9_1395=l9_1394;
float l9_1396=float(l9_1395);
int l9_1397=int(l9_1396);
int l9_1398=l9_1397^(l9_1397*15299);
int l9_1399=l9_1398;
int l9_1400=l9_1399;
int l9_1401=((l9_1400*((l9_1400*1471343)+101146501))+1559861749)&2147483647;
int l9_1402=l9_1401;
int l9_1403=l9_1399*1399;
int l9_1404=((l9_1403*((l9_1403*1471343)+101146501))+1559861749)&2147483647;
int l9_1405=l9_1404;
int l9_1406=l9_1399*7177;
int l9_1407=((l9_1406*((l9_1406*1471343)+101146501))+1559861749)&2147483647;
int l9_1408=l9_1407;
int l9_1409=l9_1402;
float l9_1410=float(l9_1409)*4.6566129e-10;
int l9_1411=l9_1405;
float l9_1412=float(l9_1411)*4.6566129e-10;
int l9_1413=l9_1408;
float l9_1414=float(l9_1413)*4.6566129e-10;
float3 l9_1415=float3(l9_1410,l9_1412,l9_1414);
float3 l9_1416=l9_1415;
float3 l9_1417=l9_1416;
float2 l9_1418=radians(N144_ArcAngles);
float l9_1419=1.0-N144_VolumeFill;
l9_1419*=l9_1419;
float l9_1420=mix(l9_1418.x,l9_1418.y,l9_1417.x);
float l9_1421=mix(-1.0,1.0,l9_1417.y);
float l9_1422=mix(l9_1419,1.0,l9_1417.z);
float l9_1423=l9_1422;
float l9_1424;
if (l9_1423<=0.0)
{
l9_1424=0.0;
}
else
{
l9_1424=sqrt(l9_1423);
}
float l9_1425=l9_1424;
l9_1422=l9_1425;
float3 l9_1426=float3(sin(l9_1420),cos(l9_1420),l9_1421);
float l9_1427=(N144_Radius*0.5)*mix(N144_startRad,N144_endRad,l9_1417.y);
l9_1426*=((N144_Scale*float3(l9_1427,l9_1427,N144_Height*0.5))*float3(l9_1422,l9_1422,1.0));
if (N144_OrientationAxis==0)
{
l9_1426=l9_1426.zxy;
}
else
{
if (N144_OrientationAxis==1)
{
l9_1426=l9_1426.xzy;
}
}
l9_1426+=N144_Center;
N144_Result=l9_1426;
l9_1393=N144_Result;
l9_1382=l9_1393;
l9_1218=l9_1382;
l9_1226=l9_1218;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==3)
{
float l9_1428=0.0;
float l9_1429=(*sc_set0.UserUniforms).Tweak_N257;
l9_1428=l9_1429;
float l9_1430=0.0;
float l9_1431=(*sc_set0.UserUniforms).Tweak_N258;
l9_1430=l9_1431;
float2 l9_1432=float2(0.0);
float2 l9_1433=(*sc_set0.UserUniforms).Tweak_N259;
l9_1432=l9_1433;
float3 l9_1434=float3(0.0);
float3 l9_1435=(*sc_set0.UserUniforms).Tweak_N260;
l9_1434=l9_1435;
float3 l9_1436=float3(0.0);
float3 l9_1437=(*sc_set0.UserUniforms).Tweak_N261;
l9_1436=l9_1437;
float l9_1438=0.0;
float l9_1439=(*sc_set0.UserUniforms).Tweak_N262;
l9_1438=l9_1439;
float l9_1440=0.0;
float l9_1441=(*sc_set0.UserUniforms).Tweak_N263;
l9_1440=l9_1441;
float3 l9_1442=float3(0.0);
float l9_1443=l9_1428;
float l9_1444=l9_1430;
float2 l9_1445=l9_1432;
float3 l9_1446=l9_1434;
float3 l9_1447=l9_1436;
float l9_1448=l9_1438;
float l9_1449=l9_1440;
ssGlobals l9_1450=l9_1225;
tempGlobals=l9_1450;
float3 l9_1451=float3(0.0);
N149_InnerRadius=l9_1443;
N149_OuterRadius=l9_1444;
N149_ArcAngles=l9_1445;
N149_Scale=l9_1446;
N149_Center=l9_1447;
N149_VolumeFill=l9_1448;
N149_Axis=int(l9_1449);
int l9_1452=0;
l9_1452=int(tempGlobals.gInstanceID+0.5);
int l9_1453=l9_1452;
float l9_1454=float(l9_1453);
int l9_1455=int(l9_1454);
int l9_1456=l9_1455^(l9_1455*15299);
int l9_1457=l9_1456;
int l9_1458=l9_1457;
int l9_1459=((l9_1458*((l9_1458*1471343)+101146501))+1559861749)&2147483647;
int l9_1460=l9_1459;
int l9_1461=l9_1457*1399;
int l9_1462=((l9_1461*((l9_1461*1471343)+101146501))+1559861749)&2147483647;
int l9_1463=l9_1462;
int l9_1464=l9_1457*7177;
int l9_1465=((l9_1464*((l9_1464*1471343)+101146501))+1559861749)&2147483647;
int l9_1466=l9_1465;
int l9_1467=l9_1460;
float l9_1468=float(l9_1467)*4.6566129e-10;
int l9_1469=l9_1463;
float l9_1470=float(l9_1469)*4.6566129e-10;
int l9_1471=l9_1466;
float l9_1472=float(l9_1471)*4.6566129e-10;
float3 l9_1473=float3(l9_1468,l9_1470,l9_1472);
float3 l9_1474=l9_1473;
float3 l9_1475=l9_1474;
float2 l9_1476=radians(N149_ArcAngles);
float l9_1477=mix(l9_1476.x,l9_1476.y,l9_1475.z);
float l9_1478=3.1415927;
float l9_1479=mix(0.0,l9_1478*2.0,l9_1475.y);
float l9_1480=mix(1.0-(N149_VolumeFill*N149_VolumeFill),1.0,l9_1475.x);
float l9_1481=l9_1480;
float l9_1482;
if (l9_1481<=0.0)
{
l9_1482=0.0;
}
else
{
l9_1482=sqrt(l9_1481);
}
float l9_1483=l9_1482;
l9_1480=l9_1483*(N149_InnerRadius*0.5);
float l9_1484=(cos(l9_1479)*l9_1480)+(N149_OuterRadius*0.5);
float3 l9_1485=float3(cos(l9_1477)*l9_1484,sin(l9_1477)*l9_1484,sin(l9_1479)*l9_1480);
if (N149_Axis==1)
{
l9_1485=l9_1485.yzx;
}
else
{
if (N149_Axis==2)
{
l9_1485=l9_1485.zyx;
}
}
l9_1485*=N149_Scale;
l9_1485+=N149_Center;
N149_Result=l9_1485;
l9_1451=N149_Result;
l9_1442=l9_1451;
l9_1219=l9_1442;
l9_1226=l9_1219;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==4)
{
float3 l9_1486=float3(0.0);
float3 l9_1487=(*sc_set0.UserUniforms).Tweak_N236;
l9_1486=l9_1487;
float3 l9_1488=float3(0.0);
float3 l9_1489=(*sc_set0.UserUniforms).Tweak_N237;
l9_1488=l9_1489;
float3 l9_1490=float3(0.0);
float3 l9_1491=(*sc_set0.UserUniforms).Tweak_N264;
l9_1490=l9_1491;
float3 l9_1492=float3(0.0);
float3 l9_1493=l9_1486;
float3 l9_1494=l9_1488;
float3 l9_1495=l9_1490;
ssGlobals l9_1496=l9_1225;
tempGlobals=l9_1496;
float3 l9_1497=float3(0.0);
N235_gridSize=l9_1493;
N235_gridDim=l9_1494;
N235_Offset=l9_1495;
int l9_1498=int((N235_gridDim.x*N235_gridDim.y)*N235_gridDim.z);
int l9_1499=0;
l9_1499=int(tempGlobals.gInstanceID+0.5);
int l9_1500=l9_1499;
int l9_1501=l9_1500;
int l9_1502=l9_1501%l9_1498;
int l9_1503=l9_1502;
float3 l9_1504=N235_gridDim;
float3 l9_1505=N235_gridSize;
int3 l9_1506=int3(l9_1504);
int l9_1507=l9_1506.x*l9_1506.y;
int l9_1508=l9_1503/l9_1507;
int l9_1509=l9_1503%l9_1507;
int l9_1510=l9_1509/l9_1506.x;
int l9_1511=l9_1509%l9_1506.x;
float l9_1512;
if (l9_1506.x>1)
{
l9_1512=l9_1505.x/(l9_1504.x-1.0);
}
else
{
l9_1512=0.0;
}
float l9_1513=l9_1512;
float l9_1514;
if (l9_1506.y>1)
{
l9_1514=l9_1505.y/(l9_1504.y-1.0);
}
else
{
l9_1514=0.0;
}
float l9_1515=l9_1514;
float l9_1516;
if (l9_1506.z>1)
{
l9_1516=l9_1505.z/(l9_1504.z-1.0);
}
else
{
l9_1516=0.0;
}
float3 l9_1517=float3(l9_1513,l9_1515,l9_1516);
float3 l9_1518=(l9_1504-float3(1.0))*l9_1517;
float3 l9_1519=(-l9_1518)*0.5;
float3 l9_1520=(float3(float(l9_1511),float(l9_1510),float(l9_1508))*l9_1517)+l9_1519;
N235_Result=l9_1520+N235_Offset;
l9_1497=N235_Result;
l9_1492=l9_1497;
l9_1220=l9_1492;
l9_1226=l9_1220;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==5)
{
float l9_1521=0.0;
float l9_1522=(*sc_set0.UserUniforms).Tweak_N232;
l9_1521=l9_1522;
float l9_1523=0.0;
float l9_1524=(*sc_set0.UserUniforms).Tweak_N233;
l9_1523=l9_1524;
float l9_1525=0.0;
float l9_1526=(*sc_set0.UserUniforms).Tweak_N231;
l9_1525=l9_1526;
float l9_1527=0.0;
float l9_1528=(*sc_set0.UserUniforms).Tweak_N304;
l9_1527=l9_1528;
float l9_1529=0.0;
float l9_1530=(*sc_set0.UserUniforms).Tweak_N229;
l9_1529=l9_1530;
float l9_1531=0.0;
float l9_1532=float((*sc_set0.UserUniforms).Tweak_N280!=0);
l9_1531=l9_1532;
float l9_1533=0.0;
float l9_1534=(*sc_set0.UserUniforms).Tweak_N285;
l9_1533=l9_1534;
float l9_1535=0.0;
float l9_1536=(*sc_set0.UserUniforms).Tweak_N245;
l9_1535=l9_1536;
float l9_1537=0.0;
float l9_1538=(*sc_set0.UserUniforms).Tweak_N230;
l9_1537=l9_1538;
float l9_1539=0.0;
float l9_1540=float((*sc_set0.UserUniforms).animated!=0);
l9_1539=l9_1540;
float l9_1541=0.0;
float l9_1542=(*sc_set0.UserUniforms).Tweak_N279;
l9_1541=l9_1542;
float l9_1543=0.0;
float l9_1544=float((*sc_set0.UserUniforms).Tweak_N303!=0);
l9_1543=l9_1544;
float2 l9_1545=float2(0.0);
float2 l9_1546=(*sc_set0.UserUniforms).Tweak_N336;
l9_1545=l9_1546;
float l9_1547=0.0;
float l9_1548=(*sc_set0.UserUniforms).timeGlobal;
l9_1547=l9_1548;
float l9_1549=0.0;
float l9_1550=(*sc_set0.UserUniforms).externalTimeInput;
l9_1549=l9_1550;
float l9_1551=0.0;
float l9_1552=(*sc_set0.UserUniforms).externalSeed;
l9_1551=l9_1552;
float l9_1553=0.0;
float l9_1554=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_1553=l9_1554;
float2 l9_1555=float2(0.0);
float2 l9_1556=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_1555=l9_1556;
float l9_1557=0.0;
float l9_1558;
if ((int(TRAILS_tmp)!=0))
{
l9_1558=1.001;
}
else
{
l9_1558=0.001;
}
l9_1558-=0.001;
l9_1557=l9_1558;
float l9_1559=0.0;
float l9_1560=(*sc_set0.UserUniforms).trailLength;
l9_1559=l9_1560;
float4 l9_1561=float4(0.0);
l9_1561=l9_1225.VertexColor;
float l9_1562=0.0;
l9_1562=l9_1561.x;
float l9_1563=0.0;
float l9_1564=l9_1557;
bool l9_1565=(l9_1564*1.0)!=0.0;
bool l9_1566;
if (l9_1565)
{
l9_1566=(l9_1562*1.0)!=0.0;
}
else
{
l9_1566=l9_1565;
}
l9_1563=float(l9_1566);
float4 l9_1567=float4(0.0);
float l9_1568=l9_1547;
float l9_1569=l9_1549;
float l9_1570=l9_1551;
float l9_1571=l9_1553;
float2 l9_1572=l9_1555;
float l9_1573=l9_1559;
float l9_1574=l9_1563;
ssGlobals l9_1575=l9_1225;
tempGlobals=l9_1575;
float4 l9_1576=float4(0.0);
N181_timeGlobal=l9_1568;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_1569;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_1570;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_1571;
N181_lifeTimeMinMax=l9_1572;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_1573;
N181_isTrailCondition=l9_1574!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_1577=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_1578=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_1577=length(float4(1.0)*l9_1578);
}
N181_globalSeed=N181_externalSeed+l9_1577;
int l9_1579=0;
l9_1579=int(tempGlobals.gInstanceID+0.5);
int l9_1580=l9_1579;
float l9_1581=float(l9_1580);
int l9_1582=int(l9_1581);
int l9_1583=l9_1582^(l9_1582*15299);
int l9_1584=l9_1583;
int l9_1585=l9_1584;
int l9_1586=((l9_1585*((l9_1585*1471343)+101146501))+1559861749)&2147483647;
int l9_1587=l9_1586;
int l9_1588=l9_1584*1399;
int l9_1589=((l9_1588*((l9_1588*1471343)+101146501))+1559861749)&2147483647;
int l9_1590=l9_1589;
int l9_1591=l9_1584*7177;
int l9_1592=((l9_1591*((l9_1591*1471343)+101146501))+1559861749)&2147483647;
int l9_1593=l9_1592;
int l9_1594=l9_1587;
float l9_1595=float(l9_1594)*4.6566129e-10;
int l9_1596=l9_1590;
float l9_1597=float(l9_1596)*4.6566129e-10;
int l9_1598=l9_1593;
float l9_1599=float(l9_1598)*4.6566129e-10;
float3 l9_1600=float3(l9_1595,l9_1597,l9_1599);
float3 l9_1601=l9_1600;
N181_particleSeed=l9_1601;
float l9_1602=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_1603;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_1603=N181_lifeTimeMinMax;
}
else
{
l9_1603=float2(N181_lifeTimeConstant);
}
float2 l9_1604=l9_1603;
float l9_1605=fast::max(l9_1604.x,0.0099999998);
float l9_1606=fast::max(l9_1604.y,0.0099999998);
float l9_1607=tempGlobals.gTimeElapsed;
float l9_1608=l9_1607;
if (N181_ENABLE_EXTERNALTIME)
{
l9_1608=N181_externalTime;
}
float l9_1609=l9_1608;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_1609=N181_timeGlobal*l9_1608;
}
else
{
float l9_1610=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_1610=N181_trailLength;
}
}
float l9_1611=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_1612=0.0;
l9_1612=tempGlobals.gInstanceRatio;
float l9_1613=l9_1612;
int l9_1614=0;
l9_1614=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_1615=l9_1614;
l9_1611=fast::max(l9_1613*(1.0-(1.0/float(l9_1615))),0.0);
}
else
{
l9_1611=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_1616=fract(((l9_1608*N181_timeGlobal)*(1.0/(l9_1604.y+l9_1610)))+l9_1611);
l9_1609=l9_1616*(l9_1604.y+l9_1610);
}
float l9_1617=mix(l9_1609/l9_1605,l9_1609/l9_1606,l9_1602);
float l9_1618=fast::clamp(l9_1617,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_1609,l9_1618);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_1619=tempGlobals.Surface_UVCoord0;
l9_1609-=(l9_1619.y*N181_trailLength);
l9_1617=mix(l9_1609/l9_1605,l9_1609/l9_1606,l9_1602);
l9_1618=fast::clamp(l9_1617,0.0,1.0);
}
}
N181_timeValues=float4(l9_1604,l9_1609,l9_1618);
l9_1576=N181_timeValues;
l9_1567=l9_1576;
float3 l9_1620=float3(0.0);
float l9_1621=l9_1521;
float l9_1622=l9_1523;
float l9_1623=l9_1525;
float l9_1624=l9_1527;
float l9_1625=l9_1529;
float l9_1626=l9_1531;
float l9_1627=l9_1533;
float l9_1628=l9_1535;
float l9_1629=l9_1537;
float l9_1630=l9_1539;
float l9_1631=l9_1541;
float l9_1632=l9_1543;
float2 l9_1633=l9_1545;
float4 l9_1634=l9_1567;
ssGlobals l9_1635=l9_1225;
tempGlobals=l9_1635;
float3 l9_1636=float3(0.0);
N155_startRad=l9_1621;
N155_endRad=l9_1622;
N155_heightPerTurn=l9_1623;
N155_alignHeight=int(l9_1624);
N155_thicknessRad=l9_1625;
N155_curvThickEnable=l9_1626!=0.0;
N155_VolumeFill=l9_1627;
N155_OrientationAxis=int(l9_1628);
N155_nTurns=l9_1629;
N155_animPath=l9_1630!=0.0;
N155_Speed=l9_1631;
N155_randSpeed=l9_1632!=0.0;
N155_SpeedMinMax=l9_1633;
N155_timeValuesIn=l9_1634;
float l9_1637=3.1415927;
float l9_1638=l9_1637*2.0;
float l9_1639=(N155_heightPerTurn/N155_nTurns)/l9_1638;
float l9_1640=N155_startRad*0.5;
float l9_1641=N155_endRad*0.5;
float l9_1642=N155_thicknessRad*0.5;
float l9_1643=0.0;
l9_1643=tempGlobals.gInstanceRatio;
float l9_1644=l9_1643;
float l9_1645=l9_1644;
int l9_1646=0;
l9_1646=int(tempGlobals.gInstanceID+0.5);
int l9_1647=l9_1646;
float l9_1648=float(l9_1647);
float l9_1649=l9_1648;
int l9_1650=int(l9_1649);
int l9_1651=l9_1650^(l9_1650*15299);
int l9_1652=l9_1651;
int l9_1653=l9_1652;
int l9_1654=((l9_1653*((l9_1653*1471343)+101146501))+1559861749)&2147483647;
int l9_1655=l9_1654;
float l9_1656=float(l9_1655)*4.6566129e-10;
float l9_1657=l9_1656;
float l9_1658=l9_1657;
float l9_1659=l9_1658;
if (N155_animPath)
{
if (N155_randSpeed)
{
l9_1645=mod(l9_1645+(N155_timeValuesIn.z*mix(N155_SpeedMinMax.x,N155_SpeedMinMax.y,l9_1659)),1.1);
}
else
{
l9_1645=mod(l9_1645+(N155_timeValuesIn.z*N155_Speed),1.1);
}
}
float l9_1660=(l9_1638*N155_nTurns)*l9_1645;
float l9_1661=mix(l9_1640,l9_1641,l9_1645);
float l9_1662=l9_1661*cos(l9_1660);
float l9_1663=l9_1661*sin(l9_1660);
float l9_1664=l9_1639*l9_1660;
if (N155_alignHeight==1)
{
l9_1664-=(((l9_1639*N155_nTurns)*l9_1638)*0.5);
}
else
{
if (N155_alignHeight==2)
{
l9_1664-=((l9_1639*N155_nTurns)*l9_1638);
}
}
float3 l9_1665=normalize(float3(-sin(l9_1660),cos(l9_1660),l9_1639/l9_1638));
float3 l9_1666=normalize(cross(l9_1665,float3(0.0,0.0,1.0)));
float3 l9_1667=cross(l9_1665,l9_1666);
float l9_1668=l9_1645;
float l9_1669=0.0;
float l9_1670=(*sc_set0.UserUniforms).Tweak_N157_curveData.x;
float l9_1671=(*sc_set0.UserUniforms).Tweak_N157_curveData.y;
float l9_1672=(*sc_set0.UserUniforms).Tweak_N157_curveData.z;
float l9_1673=(l9_1668-l9_1671)/(l9_1672-l9_1671);
float2 l9_1674=float2(l9_1673,l9_1670);
l9_1674=fast::clamp(l9_1674,float2(0.0),float2(1.0));
int l9_1675;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_1676=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1676=0;
}
else
{
l9_1676=in.varStereoViewID;
}
int l9_1677=l9_1676;
l9_1675=1-l9_1677;
}
else
{
int l9_1678=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1678=0;
}
else
{
l9_1678=in.varStereoViewID;
}
int l9_1679=l9_1678;
l9_1675=l9_1679;
}
int l9_1680=l9_1675;
int l9_1681=sc_CurveAtlasLayout_tmp;
int l9_1682=l9_1680;
float2 l9_1683=l9_1674;
bool l9_1684=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_1685=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_1686=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_1687=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_1688=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_1689=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_1690=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_1691=0.0;
bool l9_1692=l9_1689&&(!l9_1687);
float l9_1693=1.0;
float l9_1694=l9_1683.x;
int l9_1695=l9_1686.x;
if (l9_1695==1)
{
l9_1694=fract(l9_1694);
}
else
{
if (l9_1695==2)
{
float l9_1696=fract(l9_1694);
float l9_1697=l9_1694-l9_1696;
float l9_1698=step(0.25,fract(l9_1697*0.5));
l9_1694=mix(l9_1696,1.0-l9_1696,fast::clamp(l9_1698,0.0,1.0));
}
}
l9_1683.x=l9_1694;
float l9_1699=l9_1683.y;
int l9_1700=l9_1686.y;
if (l9_1700==1)
{
l9_1699=fract(l9_1699);
}
else
{
if (l9_1700==2)
{
float l9_1701=fract(l9_1699);
float l9_1702=l9_1699-l9_1701;
float l9_1703=step(0.25,fract(l9_1702*0.5));
l9_1699=mix(l9_1701,1.0-l9_1701,fast::clamp(l9_1703,0.0,1.0));
}
}
l9_1683.y=l9_1699;
if (l9_1687)
{
bool l9_1704=l9_1689;
bool l9_1705;
if (l9_1704)
{
l9_1705=l9_1686.x==3;
}
else
{
l9_1705=l9_1704;
}
float l9_1706=l9_1683.x;
float l9_1707=l9_1688.x;
float l9_1708=l9_1688.z;
bool l9_1709=l9_1705;
float l9_1710=l9_1693;
float l9_1711=fast::clamp(l9_1706,l9_1707,l9_1708);
float l9_1712=step(abs(l9_1706-l9_1711),9.9999997e-06);
l9_1710*=(l9_1712+((1.0-float(l9_1709))*(1.0-l9_1712)));
l9_1706=l9_1711;
l9_1683.x=l9_1706;
l9_1693=l9_1710;
bool l9_1713=l9_1689;
bool l9_1714;
if (l9_1713)
{
l9_1714=l9_1686.y==3;
}
else
{
l9_1714=l9_1713;
}
float l9_1715=l9_1683.y;
float l9_1716=l9_1688.y;
float l9_1717=l9_1688.w;
bool l9_1718=l9_1714;
float l9_1719=l9_1693;
float l9_1720=fast::clamp(l9_1715,l9_1716,l9_1717);
float l9_1721=step(abs(l9_1715-l9_1720),9.9999997e-06);
l9_1719*=(l9_1721+((1.0-float(l9_1718))*(1.0-l9_1721)));
l9_1715=l9_1720;
l9_1683.y=l9_1715;
l9_1693=l9_1719;
}
float2 l9_1722=l9_1683;
bool l9_1723=l9_1684;
float3x3 l9_1724=l9_1685;
if (l9_1723)
{
l9_1722=float2((l9_1724*float3(l9_1722,1.0)).xy);
}
float2 l9_1725=l9_1722;
l9_1683=l9_1725;
float l9_1726=l9_1683.x;
int l9_1727=l9_1686.x;
bool l9_1728=l9_1692;
float l9_1729=l9_1693;
if ((l9_1727==0)||(l9_1727==3))
{
float l9_1730=l9_1726;
float l9_1731=0.0;
float l9_1732=1.0;
bool l9_1733=l9_1728;
float l9_1734=l9_1729;
float l9_1735=fast::clamp(l9_1730,l9_1731,l9_1732);
float l9_1736=step(abs(l9_1730-l9_1735),9.9999997e-06);
l9_1734*=(l9_1736+((1.0-float(l9_1733))*(1.0-l9_1736)));
l9_1730=l9_1735;
l9_1726=l9_1730;
l9_1729=l9_1734;
}
l9_1683.x=l9_1726;
l9_1693=l9_1729;
float l9_1737=l9_1683.y;
int l9_1738=l9_1686.y;
bool l9_1739=l9_1692;
float l9_1740=l9_1693;
if ((l9_1738==0)||(l9_1738==3))
{
float l9_1741=l9_1737;
float l9_1742=0.0;
float l9_1743=1.0;
bool l9_1744=l9_1739;
float l9_1745=l9_1740;
float l9_1746=fast::clamp(l9_1741,l9_1742,l9_1743);
float l9_1747=step(abs(l9_1741-l9_1746),9.9999997e-06);
l9_1745*=(l9_1747+((1.0-float(l9_1744))*(1.0-l9_1747)));
l9_1741=l9_1746;
l9_1737=l9_1741;
l9_1740=l9_1745;
}
l9_1683.y=l9_1737;
l9_1693=l9_1740;
float2 l9_1748=l9_1683;
int l9_1749=l9_1681;
int l9_1750=l9_1682;
float l9_1751=l9_1691;
float2 l9_1752=l9_1748;
int l9_1753=l9_1749;
int l9_1754=l9_1750;
float3 l9_1755=float3(0.0);
if (l9_1753==0)
{
l9_1755=float3(l9_1752,0.0);
}
else
{
if (l9_1753==1)
{
l9_1755=float3(l9_1752.x,(l9_1752.y*0.5)+(0.5-(float(l9_1754)*0.5)),0.0);
}
else
{
l9_1755=float3(l9_1752,float(l9_1754));
}
}
float3 l9_1756=l9_1755;
float3 l9_1757=l9_1756;
float4 l9_1758=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_1757.xy,level(l9_1751));
float4 l9_1759=l9_1758;
if (l9_1689)
{
l9_1759=mix(l9_1690,l9_1759,float4(l9_1693));
}
float4 l9_1760=l9_1759;
l9_1669=l9_1760.x;
float l9_1761=l9_1669;
float l9_1762=l9_1761;
float l9_1763;
if (N155_curvThickEnable)
{
l9_1763=l9_1642*l9_1762;
}
else
{
l9_1763=l9_1642;
}
float l9_1764=l9_1763;
float3 l9_1765=mix(float3(l9_1662,l9_1663,l9_1664)+(((l9_1666*cos(l9_1648))+(l9_1667*sin(l9_1648)))*l9_1764),float3(l9_1662,l9_1663,l9_1664),float3(l9_1659*N155_VolumeFill));
float3 l9_1766;
if (l9_1645>1.0)
{
l9_1766=l9_1765/float3(0.0);
}
else
{
l9_1766=l9_1765;
}
l9_1765=l9_1766;
if (N155_OrientationAxis==0)
{
l9_1765=l9_1765.zxy;
l9_1665=l9_1665.zxy;
l9_1666=l9_1666.zxy;
l9_1667=l9_1667.zxy;
}
else
{
if (N155_OrientationAxis==1)
{
l9_1765=l9_1765.xzy;
l9_1665=l9_1665.xzy;
l9_1666=l9_1666.xzy;
l9_1667=l9_1667.xzy;
}
}
tempGlobals.N155_helixDirection=l9_1665;
N155_Result=l9_1765;
l9_1636=N155_Result;
l9_1620=l9_1636;
l9_1221=l9_1620;
l9_1226=l9_1221;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==6)
{
float l9_1767=0.0;
float l9_1768=(*sc_set0.UserUniforms).Tweak_N298;
l9_1767=l9_1768;
float3 l9_1769=float3(0.0);
float3 l9_1770=(*sc_set0.UserUniforms).Tweak_N330;
l9_1769=l9_1770;
float l9_1771=0.0;
float l9_1772=float((*sc_set0.UserUniforms).Tweak_N308!=0);
l9_1771=l9_1772;
float l9_1773=0.0;
float l9_1774=(*sc_set0.UserUniforms).timeGlobal;
l9_1773=l9_1774;
float l9_1775=0.0;
float l9_1776=(*sc_set0.UserUniforms).externalTimeInput;
l9_1775=l9_1776;
float l9_1777=0.0;
float l9_1778=(*sc_set0.UserUniforms).externalSeed;
l9_1777=l9_1778;
float l9_1779=0.0;
float l9_1780=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_1779=l9_1780;
float2 l9_1781=float2(0.0);
float2 l9_1782=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_1781=l9_1782;
float l9_1783=0.0;
float l9_1784;
if ((int(TRAILS_tmp)!=0))
{
l9_1784=1.001;
}
else
{
l9_1784=0.001;
}
l9_1784-=0.001;
l9_1783=l9_1784;
float l9_1785=0.0;
float l9_1786=(*sc_set0.UserUniforms).trailLength;
l9_1785=l9_1786;
float4 l9_1787=float4(0.0);
l9_1787=l9_1225.VertexColor;
float l9_1788=0.0;
l9_1788=l9_1787.x;
float l9_1789=0.0;
float l9_1790=l9_1783;
bool l9_1791=(l9_1790*1.0)!=0.0;
bool l9_1792;
if (l9_1791)
{
l9_1792=(l9_1788*1.0)!=0.0;
}
else
{
l9_1792=l9_1791;
}
l9_1789=float(l9_1792);
float4 l9_1793=float4(0.0);
float l9_1794=l9_1773;
float l9_1795=l9_1775;
float l9_1796=l9_1777;
float l9_1797=l9_1779;
float2 l9_1798=l9_1781;
float l9_1799=l9_1785;
float l9_1800=l9_1789;
ssGlobals l9_1801=l9_1225;
tempGlobals=l9_1801;
float4 l9_1802=float4(0.0);
N181_timeGlobal=l9_1794;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_1795;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_1796;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_1797;
N181_lifeTimeMinMax=l9_1798;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_1799;
N181_isTrailCondition=l9_1800!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_1803=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_1804=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_1803=length(float4(1.0)*l9_1804);
}
N181_globalSeed=N181_externalSeed+l9_1803;
int l9_1805=0;
l9_1805=int(tempGlobals.gInstanceID+0.5);
int l9_1806=l9_1805;
float l9_1807=float(l9_1806);
int l9_1808=int(l9_1807);
int l9_1809=l9_1808^(l9_1808*15299);
int l9_1810=l9_1809;
int l9_1811=l9_1810;
int l9_1812=((l9_1811*((l9_1811*1471343)+101146501))+1559861749)&2147483647;
int l9_1813=l9_1812;
int l9_1814=l9_1810*1399;
int l9_1815=((l9_1814*((l9_1814*1471343)+101146501))+1559861749)&2147483647;
int l9_1816=l9_1815;
int l9_1817=l9_1810*7177;
int l9_1818=((l9_1817*((l9_1817*1471343)+101146501))+1559861749)&2147483647;
int l9_1819=l9_1818;
int l9_1820=l9_1813;
float l9_1821=float(l9_1820)*4.6566129e-10;
int l9_1822=l9_1816;
float l9_1823=float(l9_1822)*4.6566129e-10;
int l9_1824=l9_1819;
float l9_1825=float(l9_1824)*4.6566129e-10;
float3 l9_1826=float3(l9_1821,l9_1823,l9_1825);
float3 l9_1827=l9_1826;
N181_particleSeed=l9_1827;
float l9_1828=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_1829;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_1829=N181_lifeTimeMinMax;
}
else
{
l9_1829=float2(N181_lifeTimeConstant);
}
float2 l9_1830=l9_1829;
float l9_1831=fast::max(l9_1830.x,0.0099999998);
float l9_1832=fast::max(l9_1830.y,0.0099999998);
float l9_1833=tempGlobals.gTimeElapsed;
float l9_1834=l9_1833;
if (N181_ENABLE_EXTERNALTIME)
{
l9_1834=N181_externalTime;
}
float l9_1835=l9_1834;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_1835=N181_timeGlobal*l9_1834;
}
else
{
float l9_1836=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_1836=N181_trailLength;
}
}
float l9_1837=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_1838=0.0;
l9_1838=tempGlobals.gInstanceRatio;
float l9_1839=l9_1838;
int l9_1840=0;
l9_1840=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_1841=l9_1840;
l9_1837=fast::max(l9_1839*(1.0-(1.0/float(l9_1841))),0.0);
}
else
{
l9_1837=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_1842=fract(((l9_1834*N181_timeGlobal)*(1.0/(l9_1830.y+l9_1836)))+l9_1837);
l9_1835=l9_1842*(l9_1830.y+l9_1836);
}
float l9_1843=mix(l9_1835/l9_1831,l9_1835/l9_1832,l9_1828);
float l9_1844=fast::clamp(l9_1843,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_1835,l9_1844);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_1845=tempGlobals.Surface_UVCoord0;
l9_1835-=(l9_1845.y*N181_trailLength);
l9_1843=mix(l9_1835/l9_1831,l9_1835/l9_1832,l9_1828);
l9_1844=fast::clamp(l9_1843,0.0,1.0);
}
}
N181_timeValues=float4(l9_1830,l9_1835,l9_1844);
l9_1802=N181_timeValues;
l9_1793=l9_1802;
float l9_1846=0.0;
float l9_1847=(*sc_set0.UserUniforms).Tweak_N294;
l9_1846=l9_1847;
float l9_1848=0.0;
float l9_1849=float((*sc_set0.UserUniforms).Tweak_N339!=0);
l9_1848=l9_1849;
float2 l9_1850=float2(0.0);
float2 l9_1851=(*sc_set0.UserUniforms).Tweak_N342;
l9_1850=l9_1851;
float l9_1852=0.0;
float l9_1853=(*sc_set0.UserUniforms).Tweak_N301;
l9_1852=l9_1853;
float l9_1854=0.0;
float l9_1855=float((*sc_set0.UserUniforms).Tweak_N274!=0);
l9_1854=l9_1855;
float l9_1856=0.0;
float l9_1857=(*sc_set0.UserUniforms).Tweak_N302;
l9_1856=l9_1857;
float l9_1858=0.0;
float l9_1859=(*sc_set0.UserUniforms).Tweak_N318;
l9_1858=l9_1859;
float3 l9_1860=float3(0.0);
float l9_1861=l9_1767;
float3 l9_1862=l9_1769;
float l9_1863=l9_1771;
float4 l9_1864=l9_1793;
float l9_1865=l9_1846;
float l9_1866=l9_1848;
float2 l9_1867=l9_1850;
float l9_1868=l9_1852;
float l9_1869=l9_1854;
float l9_1870=l9_1856;
float l9_1871=l9_1858;
ssGlobals l9_1872=l9_1225;
tempGlobals=l9_1872;
float3 l9_1873=float3(0.0);
N319_Scale=l9_1861;
N319_scaleXYZ=l9_1862;
N319_animPath=l9_1863!=0.0;
N319_timeValuesIn=l9_1864;
N319_Speed=l9_1865;
N319_randSpeed=l9_1866!=0.0;
N319_SpeedMinMax=l9_1867;
N319_thicknessRad=l9_1868;
N319_curvThickEnable=l9_1869!=0.0;
N319_VolumeFill=l9_1870;
N319_res=l9_1871;
float3 l9_1874=float3(0.0);
float3 l9_1875=float3(0.0);
float3 l9_1876=float3(0.0);
float3 l9_1877=float3(0.0);
float l9_1878=0.0;
l9_1878=tempGlobals.gInstanceRatio;
float l9_1879=l9_1878;
float l9_1880=l9_1879;
float l9_1881=l9_1880;
int l9_1882=0;
l9_1882=int(tempGlobals.gInstanceID+0.5);
int l9_1883=l9_1882;
float l9_1884=float(l9_1883);
float l9_1885=l9_1884;
int l9_1886=int(l9_1885);
int l9_1887=l9_1886^(l9_1886*15299);
int l9_1888=l9_1887;
int l9_1889=l9_1888;
int l9_1890=((l9_1889*((l9_1889*1471343)+101146501))+1559861749)&2147483647;
int l9_1891=l9_1890;
float l9_1892=float(l9_1891)*4.6566129e-10;
float l9_1893=l9_1892;
float l9_1894=l9_1893;
float l9_1895=l9_1894;
if (N319_animPath)
{
if (N319_randSpeed)
{
l9_1881=mod(l9_1880+(N319_timeValuesIn.z*mix(N319_SpeedMinMax.x,N319_SpeedMinMax.y,l9_1895)),1.1);
}
else
{
l9_1881=mod(l9_1880+(N319_timeValuesIn.z*N319_Speed),1.1);
}
}
float l9_1896=l9_1881;
float3 l9_1897=l9_1874;
float3 l9_1898=l9_1875;
float3 l9_1899=l9_1876;
float3 l9_1900=l9_1877;
int l9_1901=5;
float l9_1902=1.0/float(l9_1901);
int l9_1903;
int l9_1904;
int l9_1905;
int l9_1906;
int l9_1907;
int l9_1908;
int l9_1909=0;
for (int snapLoopIndex=0; snapLoopIndex==0; snapLoopIndex+=0)
{
if (l9_1909<l9_1901)
{
float l9_1910=float(l9_1909)*l9_1902;
float l9_1911=0.0;
float l9_1912=(*sc_set0.UserUniforms).Tweak_N293_curveData.x;
float l9_1913=(*sc_set0.UserUniforms).Tweak_N293_curveData.y;
float l9_1914=(*sc_set0.UserUniforms).Tweak_N293_curveData.z;
float l9_1915=(l9_1910-l9_1913)/(l9_1914-l9_1913);
float2 l9_1916=float2(l9_1915,l9_1912);
l9_1916=fast::clamp(l9_1916,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_1917=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1917=0;
}
else
{
l9_1917=in.varStereoViewID;
}
int l9_1918=l9_1917;
l9_1903=1-l9_1918;
}
else
{
int l9_1919=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_1919=0;
}
else
{
l9_1919=in.varStereoViewID;
}
int l9_1920=l9_1919;
l9_1903=l9_1920;
}
int l9_1921=l9_1903;
int l9_1922=sc_CurveAtlasLayout_tmp;
int l9_1923=l9_1921;
float2 l9_1924=l9_1916;
bool l9_1925=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_1926=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_1927=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_1928=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_1929=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_1930=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_1931=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_1932=0.0;
bool l9_1933=l9_1930&&(!l9_1928);
float l9_1934=1.0;
float l9_1935=l9_1924.x;
int l9_1936=l9_1927.x;
if (l9_1936==1)
{
l9_1935=fract(l9_1935);
}
else
{
if (l9_1936==2)
{
float l9_1937=fract(l9_1935);
float l9_1938=l9_1935-l9_1937;
float l9_1939=step(0.25,fract(l9_1938*0.5));
l9_1935=mix(l9_1937,1.0-l9_1937,fast::clamp(l9_1939,0.0,1.0));
}
}
l9_1924.x=l9_1935;
float l9_1940=l9_1924.y;
int l9_1941=l9_1927.y;
if (l9_1941==1)
{
l9_1940=fract(l9_1940);
}
else
{
if (l9_1941==2)
{
float l9_1942=fract(l9_1940);
float l9_1943=l9_1940-l9_1942;
float l9_1944=step(0.25,fract(l9_1943*0.5));
l9_1940=mix(l9_1942,1.0-l9_1942,fast::clamp(l9_1944,0.0,1.0));
}
}
l9_1924.y=l9_1940;
if (l9_1928)
{
bool l9_1945=l9_1930;
bool l9_1946;
if (l9_1945)
{
l9_1946=l9_1927.x==3;
}
else
{
l9_1946=l9_1945;
}
float l9_1947=l9_1924.x;
float l9_1948=l9_1929.x;
float l9_1949=l9_1929.z;
bool l9_1950=l9_1946;
float l9_1951=l9_1934;
float l9_1952=fast::clamp(l9_1947,l9_1948,l9_1949);
float l9_1953=step(abs(l9_1947-l9_1952),9.9999997e-06);
l9_1951*=(l9_1953+((1.0-float(l9_1950))*(1.0-l9_1953)));
l9_1947=l9_1952;
l9_1924.x=l9_1947;
l9_1934=l9_1951;
bool l9_1954=l9_1930;
bool l9_1955;
if (l9_1954)
{
l9_1955=l9_1927.y==3;
}
else
{
l9_1955=l9_1954;
}
float l9_1956=l9_1924.y;
float l9_1957=l9_1929.y;
float l9_1958=l9_1929.w;
bool l9_1959=l9_1955;
float l9_1960=l9_1934;
float l9_1961=fast::clamp(l9_1956,l9_1957,l9_1958);
float l9_1962=step(abs(l9_1956-l9_1961),9.9999997e-06);
l9_1960*=(l9_1962+((1.0-float(l9_1959))*(1.0-l9_1962)));
l9_1956=l9_1961;
l9_1924.y=l9_1956;
l9_1934=l9_1960;
}
float2 l9_1963=l9_1924;
bool l9_1964=l9_1925;
float3x3 l9_1965=l9_1926;
if (l9_1964)
{
l9_1963=float2((l9_1965*float3(l9_1963,1.0)).xy);
}
float2 l9_1966=l9_1963;
l9_1924=l9_1966;
float l9_1967=l9_1924.x;
int l9_1968=l9_1927.x;
bool l9_1969=l9_1933;
float l9_1970=l9_1934;
if ((l9_1968==0)||(l9_1968==3))
{
float l9_1971=l9_1967;
float l9_1972=0.0;
float l9_1973=1.0;
bool l9_1974=l9_1969;
float l9_1975=l9_1970;
float l9_1976=fast::clamp(l9_1971,l9_1972,l9_1973);
float l9_1977=step(abs(l9_1971-l9_1976),9.9999997e-06);
l9_1975*=(l9_1977+((1.0-float(l9_1974))*(1.0-l9_1977)));
l9_1971=l9_1976;
l9_1967=l9_1971;
l9_1970=l9_1975;
}
l9_1924.x=l9_1967;
l9_1934=l9_1970;
float l9_1978=l9_1924.y;
int l9_1979=l9_1927.y;
bool l9_1980=l9_1933;
float l9_1981=l9_1934;
if ((l9_1979==0)||(l9_1979==3))
{
float l9_1982=l9_1978;
float l9_1983=0.0;
float l9_1984=1.0;
bool l9_1985=l9_1980;
float l9_1986=l9_1981;
float l9_1987=fast::clamp(l9_1982,l9_1983,l9_1984);
float l9_1988=step(abs(l9_1982-l9_1987),9.9999997e-06);
l9_1986*=(l9_1988+((1.0-float(l9_1985))*(1.0-l9_1988)));
l9_1982=l9_1987;
l9_1978=l9_1982;
l9_1981=l9_1986;
}
l9_1924.y=l9_1978;
l9_1934=l9_1981;
float2 l9_1989=l9_1924;
int l9_1990=l9_1922;
int l9_1991=l9_1923;
float l9_1992=l9_1932;
float2 l9_1993=l9_1989;
int l9_1994=l9_1990;
int l9_1995=l9_1991;
float3 l9_1996=float3(0.0);
if (l9_1994==0)
{
l9_1996=float3(l9_1993,0.0);
}
else
{
if (l9_1994==1)
{
l9_1996=float3(l9_1993.x,(l9_1993.y*0.5)+(0.5-(float(l9_1995)*0.5)),0.0);
}
else
{
l9_1996=float3(l9_1993,float(l9_1995));
}
}
float3 l9_1997=l9_1996;
float3 l9_1998=l9_1997;
float4 l9_1999=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_1998.xy,level(l9_1992));
float4 l9_2000=l9_1999;
if (l9_1930)
{
l9_2000=mix(l9_1931,l9_2000,float4(l9_1934));
}
float4 l9_2001=l9_2000;
l9_1911=l9_2001.x;
float l9_2002=l9_1911;
float l9_2003=l9_2002;
float l9_2004=float(l9_1909)*l9_1902;
float l9_2005=0.0;
float l9_2006=(*sc_set0.UserUniforms).Tweak_N305_curveData.x;
float l9_2007=(*sc_set0.UserUniforms).Tweak_N305_curveData.y;
float l9_2008=(*sc_set0.UserUniforms).Tweak_N305_curveData.z;
float l9_2009=(l9_2004-l9_2007)/(l9_2008-l9_2007);
float2 l9_2010=float2(l9_2009,l9_2006);
l9_2010=fast::clamp(l9_2010,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_2011=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2011=0;
}
else
{
l9_2011=in.varStereoViewID;
}
int l9_2012=l9_2011;
l9_1904=1-l9_2012;
}
else
{
int l9_2013=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2013=0;
}
else
{
l9_2013=in.varStereoViewID;
}
int l9_2014=l9_2013;
l9_1904=l9_2014;
}
int l9_2015=l9_1904;
int l9_2016=sc_CurveAtlasLayout_tmp;
int l9_2017=l9_2015;
float2 l9_2018=l9_2010;
bool l9_2019=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_2020=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_2021=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_2022=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_2023=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_2024=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_2025=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_2026=0.0;
bool l9_2027=l9_2024&&(!l9_2022);
float l9_2028=1.0;
float l9_2029=l9_2018.x;
int l9_2030=l9_2021.x;
if (l9_2030==1)
{
l9_2029=fract(l9_2029);
}
else
{
if (l9_2030==2)
{
float l9_2031=fract(l9_2029);
float l9_2032=l9_2029-l9_2031;
float l9_2033=step(0.25,fract(l9_2032*0.5));
l9_2029=mix(l9_2031,1.0-l9_2031,fast::clamp(l9_2033,0.0,1.0));
}
}
l9_2018.x=l9_2029;
float l9_2034=l9_2018.y;
int l9_2035=l9_2021.y;
if (l9_2035==1)
{
l9_2034=fract(l9_2034);
}
else
{
if (l9_2035==2)
{
float l9_2036=fract(l9_2034);
float l9_2037=l9_2034-l9_2036;
float l9_2038=step(0.25,fract(l9_2037*0.5));
l9_2034=mix(l9_2036,1.0-l9_2036,fast::clamp(l9_2038,0.0,1.0));
}
}
l9_2018.y=l9_2034;
if (l9_2022)
{
bool l9_2039=l9_2024;
bool l9_2040;
if (l9_2039)
{
l9_2040=l9_2021.x==3;
}
else
{
l9_2040=l9_2039;
}
float l9_2041=l9_2018.x;
float l9_2042=l9_2023.x;
float l9_2043=l9_2023.z;
bool l9_2044=l9_2040;
float l9_2045=l9_2028;
float l9_2046=fast::clamp(l9_2041,l9_2042,l9_2043);
float l9_2047=step(abs(l9_2041-l9_2046),9.9999997e-06);
l9_2045*=(l9_2047+((1.0-float(l9_2044))*(1.0-l9_2047)));
l9_2041=l9_2046;
l9_2018.x=l9_2041;
l9_2028=l9_2045;
bool l9_2048=l9_2024;
bool l9_2049;
if (l9_2048)
{
l9_2049=l9_2021.y==3;
}
else
{
l9_2049=l9_2048;
}
float l9_2050=l9_2018.y;
float l9_2051=l9_2023.y;
float l9_2052=l9_2023.w;
bool l9_2053=l9_2049;
float l9_2054=l9_2028;
float l9_2055=fast::clamp(l9_2050,l9_2051,l9_2052);
float l9_2056=step(abs(l9_2050-l9_2055),9.9999997e-06);
l9_2054*=(l9_2056+((1.0-float(l9_2053))*(1.0-l9_2056)));
l9_2050=l9_2055;
l9_2018.y=l9_2050;
l9_2028=l9_2054;
}
float2 l9_2057=l9_2018;
bool l9_2058=l9_2019;
float3x3 l9_2059=l9_2020;
if (l9_2058)
{
l9_2057=float2((l9_2059*float3(l9_2057,1.0)).xy);
}
float2 l9_2060=l9_2057;
l9_2018=l9_2060;
float l9_2061=l9_2018.x;
int l9_2062=l9_2021.x;
bool l9_2063=l9_2027;
float l9_2064=l9_2028;
if ((l9_2062==0)||(l9_2062==3))
{
float l9_2065=l9_2061;
float l9_2066=0.0;
float l9_2067=1.0;
bool l9_2068=l9_2063;
float l9_2069=l9_2064;
float l9_2070=fast::clamp(l9_2065,l9_2066,l9_2067);
float l9_2071=step(abs(l9_2065-l9_2070),9.9999997e-06);
l9_2069*=(l9_2071+((1.0-float(l9_2068))*(1.0-l9_2071)));
l9_2065=l9_2070;
l9_2061=l9_2065;
l9_2064=l9_2069;
}
l9_2018.x=l9_2061;
l9_2028=l9_2064;
float l9_2072=l9_2018.y;
int l9_2073=l9_2021.y;
bool l9_2074=l9_2027;
float l9_2075=l9_2028;
if ((l9_2073==0)||(l9_2073==3))
{
float l9_2076=l9_2072;
float l9_2077=0.0;
float l9_2078=1.0;
bool l9_2079=l9_2074;
float l9_2080=l9_2075;
float l9_2081=fast::clamp(l9_2076,l9_2077,l9_2078);
float l9_2082=step(abs(l9_2076-l9_2081),9.9999997e-06);
l9_2080*=(l9_2082+((1.0-float(l9_2079))*(1.0-l9_2082)));
l9_2076=l9_2081;
l9_2072=l9_2076;
l9_2075=l9_2080;
}
l9_2018.y=l9_2072;
l9_2028=l9_2075;
float2 l9_2083=l9_2018;
int l9_2084=l9_2016;
int l9_2085=l9_2017;
float l9_2086=l9_2026;
float2 l9_2087=l9_2083;
int l9_2088=l9_2084;
int l9_2089=l9_2085;
float3 l9_2090=float3(0.0);
if (l9_2088==0)
{
l9_2090=float3(l9_2087,0.0);
}
else
{
if (l9_2088==1)
{
l9_2090=float3(l9_2087.x,(l9_2087.y*0.5)+(0.5-(float(l9_2089)*0.5)),0.0);
}
else
{
l9_2090=float3(l9_2087,float(l9_2089));
}
}
float3 l9_2091=l9_2090;
float3 l9_2092=l9_2091;
float4 l9_2093=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_2092.xy,level(l9_2086));
float4 l9_2094=l9_2093;
if (l9_2024)
{
l9_2094=mix(l9_2025,l9_2094,float4(l9_2028));
}
float4 l9_2095=l9_2094;
l9_2005=l9_2095.x;
float l9_2096=l9_2005;
float l9_2097=l9_2096;
float l9_2098=float(l9_1909)*l9_1902;
float l9_2099=0.0;
float l9_2100=(*sc_set0.UserUniforms).Tweak_N297_curveData.x;
float l9_2101=(*sc_set0.UserUniforms).Tweak_N297_curveData.y;
float l9_2102=(*sc_set0.UserUniforms).Tweak_N297_curveData.z;
float l9_2103=(l9_2098-l9_2101)/(l9_2102-l9_2101);
float2 l9_2104=float2(l9_2103,l9_2100);
l9_2104=fast::clamp(l9_2104,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_2105=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2105=0;
}
else
{
l9_2105=in.varStereoViewID;
}
int l9_2106=l9_2105;
l9_1905=1-l9_2106;
}
else
{
int l9_2107=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2107=0;
}
else
{
l9_2107=in.varStereoViewID;
}
int l9_2108=l9_2107;
l9_1905=l9_2108;
}
int l9_2109=l9_1905;
int l9_2110=sc_CurveAtlasLayout_tmp;
int l9_2111=l9_2109;
float2 l9_2112=l9_2104;
bool l9_2113=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_2114=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_2115=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_2116=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_2117=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_2118=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_2119=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_2120=0.0;
bool l9_2121=l9_2118&&(!l9_2116);
float l9_2122=1.0;
float l9_2123=l9_2112.x;
int l9_2124=l9_2115.x;
if (l9_2124==1)
{
l9_2123=fract(l9_2123);
}
else
{
if (l9_2124==2)
{
float l9_2125=fract(l9_2123);
float l9_2126=l9_2123-l9_2125;
float l9_2127=step(0.25,fract(l9_2126*0.5));
l9_2123=mix(l9_2125,1.0-l9_2125,fast::clamp(l9_2127,0.0,1.0));
}
}
l9_2112.x=l9_2123;
float l9_2128=l9_2112.y;
int l9_2129=l9_2115.y;
if (l9_2129==1)
{
l9_2128=fract(l9_2128);
}
else
{
if (l9_2129==2)
{
float l9_2130=fract(l9_2128);
float l9_2131=l9_2128-l9_2130;
float l9_2132=step(0.25,fract(l9_2131*0.5));
l9_2128=mix(l9_2130,1.0-l9_2130,fast::clamp(l9_2132,0.0,1.0));
}
}
l9_2112.y=l9_2128;
if (l9_2116)
{
bool l9_2133=l9_2118;
bool l9_2134;
if (l9_2133)
{
l9_2134=l9_2115.x==3;
}
else
{
l9_2134=l9_2133;
}
float l9_2135=l9_2112.x;
float l9_2136=l9_2117.x;
float l9_2137=l9_2117.z;
bool l9_2138=l9_2134;
float l9_2139=l9_2122;
float l9_2140=fast::clamp(l9_2135,l9_2136,l9_2137);
float l9_2141=step(abs(l9_2135-l9_2140),9.9999997e-06);
l9_2139*=(l9_2141+((1.0-float(l9_2138))*(1.0-l9_2141)));
l9_2135=l9_2140;
l9_2112.x=l9_2135;
l9_2122=l9_2139;
bool l9_2142=l9_2118;
bool l9_2143;
if (l9_2142)
{
l9_2143=l9_2115.y==3;
}
else
{
l9_2143=l9_2142;
}
float l9_2144=l9_2112.y;
float l9_2145=l9_2117.y;
float l9_2146=l9_2117.w;
bool l9_2147=l9_2143;
float l9_2148=l9_2122;
float l9_2149=fast::clamp(l9_2144,l9_2145,l9_2146);
float l9_2150=step(abs(l9_2144-l9_2149),9.9999997e-06);
l9_2148*=(l9_2150+((1.0-float(l9_2147))*(1.0-l9_2150)));
l9_2144=l9_2149;
l9_2112.y=l9_2144;
l9_2122=l9_2148;
}
float2 l9_2151=l9_2112;
bool l9_2152=l9_2113;
float3x3 l9_2153=l9_2114;
if (l9_2152)
{
l9_2151=float2((l9_2153*float3(l9_2151,1.0)).xy);
}
float2 l9_2154=l9_2151;
l9_2112=l9_2154;
float l9_2155=l9_2112.x;
int l9_2156=l9_2115.x;
bool l9_2157=l9_2121;
float l9_2158=l9_2122;
if ((l9_2156==0)||(l9_2156==3))
{
float l9_2159=l9_2155;
float l9_2160=0.0;
float l9_2161=1.0;
bool l9_2162=l9_2157;
float l9_2163=l9_2158;
float l9_2164=fast::clamp(l9_2159,l9_2160,l9_2161);
float l9_2165=step(abs(l9_2159-l9_2164),9.9999997e-06);
l9_2163*=(l9_2165+((1.0-float(l9_2162))*(1.0-l9_2165)));
l9_2159=l9_2164;
l9_2155=l9_2159;
l9_2158=l9_2163;
}
l9_2112.x=l9_2155;
l9_2122=l9_2158;
float l9_2166=l9_2112.y;
int l9_2167=l9_2115.y;
bool l9_2168=l9_2121;
float l9_2169=l9_2122;
if ((l9_2167==0)||(l9_2167==3))
{
float l9_2170=l9_2166;
float l9_2171=0.0;
float l9_2172=1.0;
bool l9_2173=l9_2168;
float l9_2174=l9_2169;
float l9_2175=fast::clamp(l9_2170,l9_2171,l9_2172);
float l9_2176=step(abs(l9_2170-l9_2175),9.9999997e-06);
l9_2174*=(l9_2176+((1.0-float(l9_2173))*(1.0-l9_2176)));
l9_2170=l9_2175;
l9_2166=l9_2170;
l9_2169=l9_2174;
}
l9_2112.y=l9_2166;
l9_2122=l9_2169;
float2 l9_2177=l9_2112;
int l9_2178=l9_2110;
int l9_2179=l9_2111;
float l9_2180=l9_2120;
float2 l9_2181=l9_2177;
int l9_2182=l9_2178;
int l9_2183=l9_2179;
float3 l9_2184=float3(0.0);
if (l9_2182==0)
{
l9_2184=float3(l9_2181,0.0);
}
else
{
if (l9_2182==1)
{
l9_2184=float3(l9_2181.x,(l9_2181.y*0.5)+(0.5-(float(l9_2183)*0.5)),0.0);
}
else
{
l9_2184=float3(l9_2181,float(l9_2183));
}
}
float3 l9_2185=l9_2184;
float3 l9_2186=l9_2185;
float4 l9_2187=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_2186.xy,level(l9_2180));
float4 l9_2188=l9_2187;
if (l9_2118)
{
l9_2188=mix(l9_2119,l9_2188,float4(l9_2122));
}
float4 l9_2189=l9_2188;
l9_2099=l9_2189.x;
float l9_2190=l9_2099;
float3 l9_2191=float3(l9_2003,l9_2097,l9_2190);
float l9_2192=(float(l9_1909)*l9_1902)+N319_res;
float l9_2193=0.0;
float l9_2194=(*sc_set0.UserUniforms).Tweak_N293_curveData.x;
float l9_2195=(*sc_set0.UserUniforms).Tweak_N293_curveData.y;
float l9_2196=(*sc_set0.UserUniforms).Tweak_N293_curveData.z;
float l9_2197=(l9_2192-l9_2195)/(l9_2196-l9_2195);
float2 l9_2198=float2(l9_2197,l9_2194);
l9_2198=fast::clamp(l9_2198,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_2199=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2199=0;
}
else
{
l9_2199=in.varStereoViewID;
}
int l9_2200=l9_2199;
l9_1906=1-l9_2200;
}
else
{
int l9_2201=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2201=0;
}
else
{
l9_2201=in.varStereoViewID;
}
int l9_2202=l9_2201;
l9_1906=l9_2202;
}
int l9_2203=l9_1906;
int l9_2204=sc_CurveAtlasLayout_tmp;
int l9_2205=l9_2203;
float2 l9_2206=l9_2198;
bool l9_2207=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_2208=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_2209=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_2210=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_2211=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_2212=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_2213=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_2214=0.0;
bool l9_2215=l9_2212&&(!l9_2210);
float l9_2216=1.0;
float l9_2217=l9_2206.x;
int l9_2218=l9_2209.x;
if (l9_2218==1)
{
l9_2217=fract(l9_2217);
}
else
{
if (l9_2218==2)
{
float l9_2219=fract(l9_2217);
float l9_2220=l9_2217-l9_2219;
float l9_2221=step(0.25,fract(l9_2220*0.5));
l9_2217=mix(l9_2219,1.0-l9_2219,fast::clamp(l9_2221,0.0,1.0));
}
}
l9_2206.x=l9_2217;
float l9_2222=l9_2206.y;
int l9_2223=l9_2209.y;
if (l9_2223==1)
{
l9_2222=fract(l9_2222);
}
else
{
if (l9_2223==2)
{
float l9_2224=fract(l9_2222);
float l9_2225=l9_2222-l9_2224;
float l9_2226=step(0.25,fract(l9_2225*0.5));
l9_2222=mix(l9_2224,1.0-l9_2224,fast::clamp(l9_2226,0.0,1.0));
}
}
l9_2206.y=l9_2222;
if (l9_2210)
{
bool l9_2227=l9_2212;
bool l9_2228;
if (l9_2227)
{
l9_2228=l9_2209.x==3;
}
else
{
l9_2228=l9_2227;
}
float l9_2229=l9_2206.x;
float l9_2230=l9_2211.x;
float l9_2231=l9_2211.z;
bool l9_2232=l9_2228;
float l9_2233=l9_2216;
float l9_2234=fast::clamp(l9_2229,l9_2230,l9_2231);
float l9_2235=step(abs(l9_2229-l9_2234),9.9999997e-06);
l9_2233*=(l9_2235+((1.0-float(l9_2232))*(1.0-l9_2235)));
l9_2229=l9_2234;
l9_2206.x=l9_2229;
l9_2216=l9_2233;
bool l9_2236=l9_2212;
bool l9_2237;
if (l9_2236)
{
l9_2237=l9_2209.y==3;
}
else
{
l9_2237=l9_2236;
}
float l9_2238=l9_2206.y;
float l9_2239=l9_2211.y;
float l9_2240=l9_2211.w;
bool l9_2241=l9_2237;
float l9_2242=l9_2216;
float l9_2243=fast::clamp(l9_2238,l9_2239,l9_2240);
float l9_2244=step(abs(l9_2238-l9_2243),9.9999997e-06);
l9_2242*=(l9_2244+((1.0-float(l9_2241))*(1.0-l9_2244)));
l9_2238=l9_2243;
l9_2206.y=l9_2238;
l9_2216=l9_2242;
}
float2 l9_2245=l9_2206;
bool l9_2246=l9_2207;
float3x3 l9_2247=l9_2208;
if (l9_2246)
{
l9_2245=float2((l9_2247*float3(l9_2245,1.0)).xy);
}
float2 l9_2248=l9_2245;
l9_2206=l9_2248;
float l9_2249=l9_2206.x;
int l9_2250=l9_2209.x;
bool l9_2251=l9_2215;
float l9_2252=l9_2216;
if ((l9_2250==0)||(l9_2250==3))
{
float l9_2253=l9_2249;
float l9_2254=0.0;
float l9_2255=1.0;
bool l9_2256=l9_2251;
float l9_2257=l9_2252;
float l9_2258=fast::clamp(l9_2253,l9_2254,l9_2255);
float l9_2259=step(abs(l9_2253-l9_2258),9.9999997e-06);
l9_2257*=(l9_2259+((1.0-float(l9_2256))*(1.0-l9_2259)));
l9_2253=l9_2258;
l9_2249=l9_2253;
l9_2252=l9_2257;
}
l9_2206.x=l9_2249;
l9_2216=l9_2252;
float l9_2260=l9_2206.y;
int l9_2261=l9_2209.y;
bool l9_2262=l9_2215;
float l9_2263=l9_2216;
if ((l9_2261==0)||(l9_2261==3))
{
float l9_2264=l9_2260;
float l9_2265=0.0;
float l9_2266=1.0;
bool l9_2267=l9_2262;
float l9_2268=l9_2263;
float l9_2269=fast::clamp(l9_2264,l9_2265,l9_2266);
float l9_2270=step(abs(l9_2264-l9_2269),9.9999997e-06);
l9_2268*=(l9_2270+((1.0-float(l9_2267))*(1.0-l9_2270)));
l9_2264=l9_2269;
l9_2260=l9_2264;
l9_2263=l9_2268;
}
l9_2206.y=l9_2260;
l9_2216=l9_2263;
float2 l9_2271=l9_2206;
int l9_2272=l9_2204;
int l9_2273=l9_2205;
float l9_2274=l9_2214;
float2 l9_2275=l9_2271;
int l9_2276=l9_2272;
int l9_2277=l9_2273;
float3 l9_2278=float3(0.0);
if (l9_2276==0)
{
l9_2278=float3(l9_2275,0.0);
}
else
{
if (l9_2276==1)
{
l9_2278=float3(l9_2275.x,(l9_2275.y*0.5)+(0.5-(float(l9_2277)*0.5)),0.0);
}
else
{
l9_2278=float3(l9_2275,float(l9_2277));
}
}
float3 l9_2279=l9_2278;
float3 l9_2280=l9_2279;
float4 l9_2281=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_2280.xy,level(l9_2274));
float4 l9_2282=l9_2281;
if (l9_2212)
{
l9_2282=mix(l9_2213,l9_2282,float4(l9_2216));
}
float4 l9_2283=l9_2282;
l9_2193=l9_2283.x;
float l9_2284=l9_2193;
float l9_2285=l9_2284;
float l9_2286=(float(l9_1909)*l9_1902)+N319_res;
float l9_2287=0.0;
float l9_2288=(*sc_set0.UserUniforms).Tweak_N305_curveData.x;
float l9_2289=(*sc_set0.UserUniforms).Tweak_N305_curveData.y;
float l9_2290=(*sc_set0.UserUniforms).Tweak_N305_curveData.z;
float l9_2291=(l9_2286-l9_2289)/(l9_2290-l9_2289);
float2 l9_2292=float2(l9_2291,l9_2288);
l9_2292=fast::clamp(l9_2292,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_2293=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2293=0;
}
else
{
l9_2293=in.varStereoViewID;
}
int l9_2294=l9_2293;
l9_1907=1-l9_2294;
}
else
{
int l9_2295=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2295=0;
}
else
{
l9_2295=in.varStereoViewID;
}
int l9_2296=l9_2295;
l9_1907=l9_2296;
}
int l9_2297=l9_1907;
int l9_2298=sc_CurveAtlasLayout_tmp;
int l9_2299=l9_2297;
float2 l9_2300=l9_2292;
bool l9_2301=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_2302=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_2303=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_2304=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_2305=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_2306=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_2307=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_2308=0.0;
bool l9_2309=l9_2306&&(!l9_2304);
float l9_2310=1.0;
float l9_2311=l9_2300.x;
int l9_2312=l9_2303.x;
if (l9_2312==1)
{
l9_2311=fract(l9_2311);
}
else
{
if (l9_2312==2)
{
float l9_2313=fract(l9_2311);
float l9_2314=l9_2311-l9_2313;
float l9_2315=step(0.25,fract(l9_2314*0.5));
l9_2311=mix(l9_2313,1.0-l9_2313,fast::clamp(l9_2315,0.0,1.0));
}
}
l9_2300.x=l9_2311;
float l9_2316=l9_2300.y;
int l9_2317=l9_2303.y;
if (l9_2317==1)
{
l9_2316=fract(l9_2316);
}
else
{
if (l9_2317==2)
{
float l9_2318=fract(l9_2316);
float l9_2319=l9_2316-l9_2318;
float l9_2320=step(0.25,fract(l9_2319*0.5));
l9_2316=mix(l9_2318,1.0-l9_2318,fast::clamp(l9_2320,0.0,1.0));
}
}
l9_2300.y=l9_2316;
if (l9_2304)
{
bool l9_2321=l9_2306;
bool l9_2322;
if (l9_2321)
{
l9_2322=l9_2303.x==3;
}
else
{
l9_2322=l9_2321;
}
float l9_2323=l9_2300.x;
float l9_2324=l9_2305.x;
float l9_2325=l9_2305.z;
bool l9_2326=l9_2322;
float l9_2327=l9_2310;
float l9_2328=fast::clamp(l9_2323,l9_2324,l9_2325);
float l9_2329=step(abs(l9_2323-l9_2328),9.9999997e-06);
l9_2327*=(l9_2329+((1.0-float(l9_2326))*(1.0-l9_2329)));
l9_2323=l9_2328;
l9_2300.x=l9_2323;
l9_2310=l9_2327;
bool l9_2330=l9_2306;
bool l9_2331;
if (l9_2330)
{
l9_2331=l9_2303.y==3;
}
else
{
l9_2331=l9_2330;
}
float l9_2332=l9_2300.y;
float l9_2333=l9_2305.y;
float l9_2334=l9_2305.w;
bool l9_2335=l9_2331;
float l9_2336=l9_2310;
float l9_2337=fast::clamp(l9_2332,l9_2333,l9_2334);
float l9_2338=step(abs(l9_2332-l9_2337),9.9999997e-06);
l9_2336*=(l9_2338+((1.0-float(l9_2335))*(1.0-l9_2338)));
l9_2332=l9_2337;
l9_2300.y=l9_2332;
l9_2310=l9_2336;
}
float2 l9_2339=l9_2300;
bool l9_2340=l9_2301;
float3x3 l9_2341=l9_2302;
if (l9_2340)
{
l9_2339=float2((l9_2341*float3(l9_2339,1.0)).xy);
}
float2 l9_2342=l9_2339;
l9_2300=l9_2342;
float l9_2343=l9_2300.x;
int l9_2344=l9_2303.x;
bool l9_2345=l9_2309;
float l9_2346=l9_2310;
if ((l9_2344==0)||(l9_2344==3))
{
float l9_2347=l9_2343;
float l9_2348=0.0;
float l9_2349=1.0;
bool l9_2350=l9_2345;
float l9_2351=l9_2346;
float l9_2352=fast::clamp(l9_2347,l9_2348,l9_2349);
float l9_2353=step(abs(l9_2347-l9_2352),9.9999997e-06);
l9_2351*=(l9_2353+((1.0-float(l9_2350))*(1.0-l9_2353)));
l9_2347=l9_2352;
l9_2343=l9_2347;
l9_2346=l9_2351;
}
l9_2300.x=l9_2343;
l9_2310=l9_2346;
float l9_2354=l9_2300.y;
int l9_2355=l9_2303.y;
bool l9_2356=l9_2309;
float l9_2357=l9_2310;
if ((l9_2355==0)||(l9_2355==3))
{
float l9_2358=l9_2354;
float l9_2359=0.0;
float l9_2360=1.0;
bool l9_2361=l9_2356;
float l9_2362=l9_2357;
float l9_2363=fast::clamp(l9_2358,l9_2359,l9_2360);
float l9_2364=step(abs(l9_2358-l9_2363),9.9999997e-06);
l9_2362*=(l9_2364+((1.0-float(l9_2361))*(1.0-l9_2364)));
l9_2358=l9_2363;
l9_2354=l9_2358;
l9_2357=l9_2362;
}
l9_2300.y=l9_2354;
l9_2310=l9_2357;
float2 l9_2365=l9_2300;
int l9_2366=l9_2298;
int l9_2367=l9_2299;
float l9_2368=l9_2308;
float2 l9_2369=l9_2365;
int l9_2370=l9_2366;
int l9_2371=l9_2367;
float3 l9_2372=float3(0.0);
if (l9_2370==0)
{
l9_2372=float3(l9_2369,0.0);
}
else
{
if (l9_2370==1)
{
l9_2372=float3(l9_2369.x,(l9_2369.y*0.5)+(0.5-(float(l9_2371)*0.5)),0.0);
}
else
{
l9_2372=float3(l9_2369,float(l9_2371));
}
}
float3 l9_2373=l9_2372;
float3 l9_2374=l9_2373;
float4 l9_2375=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_2374.xy,level(l9_2368));
float4 l9_2376=l9_2375;
if (l9_2306)
{
l9_2376=mix(l9_2307,l9_2376,float4(l9_2310));
}
float4 l9_2377=l9_2376;
l9_2287=l9_2377.x;
float l9_2378=l9_2287;
float l9_2379=l9_2378;
float l9_2380=(float(l9_1909)*l9_1902)+N319_res;
float l9_2381=0.0;
float l9_2382=(*sc_set0.UserUniforms).Tweak_N297_curveData.x;
float l9_2383=(*sc_set0.UserUniforms).Tweak_N297_curveData.y;
float l9_2384=(*sc_set0.UserUniforms).Tweak_N297_curveData.z;
float l9_2385=(l9_2380-l9_2383)/(l9_2384-l9_2383);
float2 l9_2386=float2(l9_2385,l9_2382);
l9_2386=fast::clamp(l9_2386,float2(0.0),float2(1.0));
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_2387=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2387=0;
}
else
{
l9_2387=in.varStereoViewID;
}
int l9_2388=l9_2387;
l9_1908=1-l9_2388;
}
else
{
int l9_2389=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2389=0;
}
else
{
l9_2389=in.varStereoViewID;
}
int l9_2390=l9_2389;
l9_1908=l9_2390;
}
int l9_2391=l9_1908;
int l9_2392=sc_CurveAtlasLayout_tmp;
int l9_2393=l9_2391;
float2 l9_2394=l9_2386;
bool l9_2395=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_2396=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_2397=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_2398=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_2399=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_2400=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_2401=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_2402=0.0;
bool l9_2403=l9_2400&&(!l9_2398);
float l9_2404=1.0;
float l9_2405=l9_2394.x;
int l9_2406=l9_2397.x;
if (l9_2406==1)
{
l9_2405=fract(l9_2405);
}
else
{
if (l9_2406==2)
{
float l9_2407=fract(l9_2405);
float l9_2408=l9_2405-l9_2407;
float l9_2409=step(0.25,fract(l9_2408*0.5));
l9_2405=mix(l9_2407,1.0-l9_2407,fast::clamp(l9_2409,0.0,1.0));
}
}
l9_2394.x=l9_2405;
float l9_2410=l9_2394.y;
int l9_2411=l9_2397.y;
if (l9_2411==1)
{
l9_2410=fract(l9_2410);
}
else
{
if (l9_2411==2)
{
float l9_2412=fract(l9_2410);
float l9_2413=l9_2410-l9_2412;
float l9_2414=step(0.25,fract(l9_2413*0.5));
l9_2410=mix(l9_2412,1.0-l9_2412,fast::clamp(l9_2414,0.0,1.0));
}
}
l9_2394.y=l9_2410;
if (l9_2398)
{
bool l9_2415=l9_2400;
bool l9_2416;
if (l9_2415)
{
l9_2416=l9_2397.x==3;
}
else
{
l9_2416=l9_2415;
}
float l9_2417=l9_2394.x;
float l9_2418=l9_2399.x;
float l9_2419=l9_2399.z;
bool l9_2420=l9_2416;
float l9_2421=l9_2404;
float l9_2422=fast::clamp(l9_2417,l9_2418,l9_2419);
float l9_2423=step(abs(l9_2417-l9_2422),9.9999997e-06);
l9_2421*=(l9_2423+((1.0-float(l9_2420))*(1.0-l9_2423)));
l9_2417=l9_2422;
l9_2394.x=l9_2417;
l9_2404=l9_2421;
bool l9_2424=l9_2400;
bool l9_2425;
if (l9_2424)
{
l9_2425=l9_2397.y==3;
}
else
{
l9_2425=l9_2424;
}
float l9_2426=l9_2394.y;
float l9_2427=l9_2399.y;
float l9_2428=l9_2399.w;
bool l9_2429=l9_2425;
float l9_2430=l9_2404;
float l9_2431=fast::clamp(l9_2426,l9_2427,l9_2428);
float l9_2432=step(abs(l9_2426-l9_2431),9.9999997e-06);
l9_2430*=(l9_2432+((1.0-float(l9_2429))*(1.0-l9_2432)));
l9_2426=l9_2431;
l9_2394.y=l9_2426;
l9_2404=l9_2430;
}
float2 l9_2433=l9_2394;
bool l9_2434=l9_2395;
float3x3 l9_2435=l9_2396;
if (l9_2434)
{
l9_2433=float2((l9_2435*float3(l9_2433,1.0)).xy);
}
float2 l9_2436=l9_2433;
l9_2394=l9_2436;
float l9_2437=l9_2394.x;
int l9_2438=l9_2397.x;
bool l9_2439=l9_2403;
float l9_2440=l9_2404;
if ((l9_2438==0)||(l9_2438==3))
{
float l9_2441=l9_2437;
float l9_2442=0.0;
float l9_2443=1.0;
bool l9_2444=l9_2439;
float l9_2445=l9_2440;
float l9_2446=fast::clamp(l9_2441,l9_2442,l9_2443);
float l9_2447=step(abs(l9_2441-l9_2446),9.9999997e-06);
l9_2445*=(l9_2447+((1.0-float(l9_2444))*(1.0-l9_2447)));
l9_2441=l9_2446;
l9_2437=l9_2441;
l9_2440=l9_2445;
}
l9_2394.x=l9_2437;
l9_2404=l9_2440;
float l9_2448=l9_2394.y;
int l9_2449=l9_2397.y;
bool l9_2450=l9_2403;
float l9_2451=l9_2404;
if ((l9_2449==0)||(l9_2449==3))
{
float l9_2452=l9_2448;
float l9_2453=0.0;
float l9_2454=1.0;
bool l9_2455=l9_2450;
float l9_2456=l9_2451;
float l9_2457=fast::clamp(l9_2452,l9_2453,l9_2454);
float l9_2458=step(abs(l9_2452-l9_2457),9.9999997e-06);
l9_2456*=(l9_2458+((1.0-float(l9_2455))*(1.0-l9_2458)));
l9_2452=l9_2457;
l9_2448=l9_2452;
l9_2451=l9_2456;
}
l9_2394.y=l9_2448;
l9_2404=l9_2451;
float2 l9_2459=l9_2394;
int l9_2460=l9_2392;
int l9_2461=l9_2393;
float l9_2462=l9_2402;
float2 l9_2463=l9_2459;
int l9_2464=l9_2460;
int l9_2465=l9_2461;
float3 l9_2466=float3(0.0);
if (l9_2464==0)
{
l9_2466=float3(l9_2463,0.0);
}
else
{
if (l9_2464==1)
{
l9_2466=float3(l9_2463.x,(l9_2463.y*0.5)+(0.5-(float(l9_2465)*0.5)),0.0);
}
else
{
l9_2466=float3(l9_2463,float(l9_2465));
}
}
float3 l9_2467=l9_2466;
float3 l9_2468=l9_2467;
float4 l9_2469=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_2468.xy,level(l9_2462));
float4 l9_2470=l9_2469;
if (l9_2400)
{
l9_2470=mix(l9_2401,l9_2470,float4(l9_2404));
}
float4 l9_2471=l9_2470;
l9_2381=l9_2471.x;
float l9_2472=l9_2381;
float3 l9_2473=float3(l9_2285,l9_2379,l9_2472);
l9_1897+=normalize(l9_2473-l9_2191);
l9_1909++;
continue;
}
else
{
break;
}
}
l9_1897=normalize(l9_1897);
l9_1898=normalize(cross(l9_1897,float3(0.0099990005,0.99990004,0.0099990005)));
l9_1899=normalize(cross(l9_1897,l9_1898));
float l9_2474=l9_1896;
float l9_2475=0.0;
float l9_2476=(*sc_set0.UserUniforms).Tweak_N293_curveData.x;
float l9_2477=(*sc_set0.UserUniforms).Tweak_N293_curveData.y;
float l9_2478=(*sc_set0.UserUniforms).Tweak_N293_curveData.z;
float l9_2479=(l9_2474-l9_2477)/(l9_2478-l9_2477);
float2 l9_2480=float2(l9_2479,l9_2476);
l9_2480=fast::clamp(l9_2480,float2(0.0),float2(1.0));
int l9_2481;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_2482=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2482=0;
}
else
{
l9_2482=in.varStereoViewID;
}
int l9_2483=l9_2482;
l9_2481=1-l9_2483;
}
else
{
int l9_2484=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2484=0;
}
else
{
l9_2484=in.varStereoViewID;
}
int l9_2485=l9_2484;
l9_2481=l9_2485;
}
int l9_2486=l9_2481;
int l9_2487=sc_CurveAtlasLayout_tmp;
int l9_2488=l9_2486;
float2 l9_2489=l9_2480;
bool l9_2490=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_2491=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_2492=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_2493=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_2494=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_2495=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_2496=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_2497=0.0;
bool l9_2498=l9_2495&&(!l9_2493);
float l9_2499=1.0;
float l9_2500=l9_2489.x;
int l9_2501=l9_2492.x;
if (l9_2501==1)
{
l9_2500=fract(l9_2500);
}
else
{
if (l9_2501==2)
{
float l9_2502=fract(l9_2500);
float l9_2503=l9_2500-l9_2502;
float l9_2504=step(0.25,fract(l9_2503*0.5));
l9_2500=mix(l9_2502,1.0-l9_2502,fast::clamp(l9_2504,0.0,1.0));
}
}
l9_2489.x=l9_2500;
float l9_2505=l9_2489.y;
int l9_2506=l9_2492.y;
if (l9_2506==1)
{
l9_2505=fract(l9_2505);
}
else
{
if (l9_2506==2)
{
float l9_2507=fract(l9_2505);
float l9_2508=l9_2505-l9_2507;
float l9_2509=step(0.25,fract(l9_2508*0.5));
l9_2505=mix(l9_2507,1.0-l9_2507,fast::clamp(l9_2509,0.0,1.0));
}
}
l9_2489.y=l9_2505;
if (l9_2493)
{
bool l9_2510=l9_2495;
bool l9_2511;
if (l9_2510)
{
l9_2511=l9_2492.x==3;
}
else
{
l9_2511=l9_2510;
}
float l9_2512=l9_2489.x;
float l9_2513=l9_2494.x;
float l9_2514=l9_2494.z;
bool l9_2515=l9_2511;
float l9_2516=l9_2499;
float l9_2517=fast::clamp(l9_2512,l9_2513,l9_2514);
float l9_2518=step(abs(l9_2512-l9_2517),9.9999997e-06);
l9_2516*=(l9_2518+((1.0-float(l9_2515))*(1.0-l9_2518)));
l9_2512=l9_2517;
l9_2489.x=l9_2512;
l9_2499=l9_2516;
bool l9_2519=l9_2495;
bool l9_2520;
if (l9_2519)
{
l9_2520=l9_2492.y==3;
}
else
{
l9_2520=l9_2519;
}
float l9_2521=l9_2489.y;
float l9_2522=l9_2494.y;
float l9_2523=l9_2494.w;
bool l9_2524=l9_2520;
float l9_2525=l9_2499;
float l9_2526=fast::clamp(l9_2521,l9_2522,l9_2523);
float l9_2527=step(abs(l9_2521-l9_2526),9.9999997e-06);
l9_2525*=(l9_2527+((1.0-float(l9_2524))*(1.0-l9_2527)));
l9_2521=l9_2526;
l9_2489.y=l9_2521;
l9_2499=l9_2525;
}
float2 l9_2528=l9_2489;
bool l9_2529=l9_2490;
float3x3 l9_2530=l9_2491;
if (l9_2529)
{
l9_2528=float2((l9_2530*float3(l9_2528,1.0)).xy);
}
float2 l9_2531=l9_2528;
l9_2489=l9_2531;
float l9_2532=l9_2489.x;
int l9_2533=l9_2492.x;
bool l9_2534=l9_2498;
float l9_2535=l9_2499;
if ((l9_2533==0)||(l9_2533==3))
{
float l9_2536=l9_2532;
float l9_2537=0.0;
float l9_2538=1.0;
bool l9_2539=l9_2534;
float l9_2540=l9_2535;
float l9_2541=fast::clamp(l9_2536,l9_2537,l9_2538);
float l9_2542=step(abs(l9_2536-l9_2541),9.9999997e-06);
l9_2540*=(l9_2542+((1.0-float(l9_2539))*(1.0-l9_2542)));
l9_2536=l9_2541;
l9_2532=l9_2536;
l9_2535=l9_2540;
}
l9_2489.x=l9_2532;
l9_2499=l9_2535;
float l9_2543=l9_2489.y;
int l9_2544=l9_2492.y;
bool l9_2545=l9_2498;
float l9_2546=l9_2499;
if ((l9_2544==0)||(l9_2544==3))
{
float l9_2547=l9_2543;
float l9_2548=0.0;
float l9_2549=1.0;
bool l9_2550=l9_2545;
float l9_2551=l9_2546;
float l9_2552=fast::clamp(l9_2547,l9_2548,l9_2549);
float l9_2553=step(abs(l9_2547-l9_2552),9.9999997e-06);
l9_2551*=(l9_2553+((1.0-float(l9_2550))*(1.0-l9_2553)));
l9_2547=l9_2552;
l9_2543=l9_2547;
l9_2546=l9_2551;
}
l9_2489.y=l9_2543;
l9_2499=l9_2546;
float2 l9_2554=l9_2489;
int l9_2555=l9_2487;
int l9_2556=l9_2488;
float l9_2557=l9_2497;
float2 l9_2558=l9_2554;
int l9_2559=l9_2555;
int l9_2560=l9_2556;
float3 l9_2561=float3(0.0);
if (l9_2559==0)
{
l9_2561=float3(l9_2558,0.0);
}
else
{
if (l9_2559==1)
{
l9_2561=float3(l9_2558.x,(l9_2558.y*0.5)+(0.5-(float(l9_2560)*0.5)),0.0);
}
else
{
l9_2561=float3(l9_2558,float(l9_2560));
}
}
float3 l9_2562=l9_2561;
float3 l9_2563=l9_2562;
float4 l9_2564=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_2563.xy,level(l9_2557));
float4 l9_2565=l9_2564;
if (l9_2495)
{
l9_2565=mix(l9_2496,l9_2565,float4(l9_2499));
}
float4 l9_2566=l9_2565;
l9_2475=l9_2566.x;
float l9_2567=l9_2475;
float l9_2568=l9_2567;
float l9_2569=l9_1896;
float l9_2570=0.0;
float l9_2571=(*sc_set0.UserUniforms).Tweak_N305_curveData.x;
float l9_2572=(*sc_set0.UserUniforms).Tweak_N305_curveData.y;
float l9_2573=(*sc_set0.UserUniforms).Tweak_N305_curveData.z;
float l9_2574=(l9_2569-l9_2572)/(l9_2573-l9_2572);
float2 l9_2575=float2(l9_2574,l9_2571);
l9_2575=fast::clamp(l9_2575,float2(0.0),float2(1.0));
int l9_2576;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_2577=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2577=0;
}
else
{
l9_2577=in.varStereoViewID;
}
int l9_2578=l9_2577;
l9_2576=1-l9_2578;
}
else
{
int l9_2579=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2579=0;
}
else
{
l9_2579=in.varStereoViewID;
}
int l9_2580=l9_2579;
l9_2576=l9_2580;
}
int l9_2581=l9_2576;
int l9_2582=sc_CurveAtlasLayout_tmp;
int l9_2583=l9_2581;
float2 l9_2584=l9_2575;
bool l9_2585=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_2586=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_2587=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_2588=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_2589=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_2590=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_2591=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_2592=0.0;
bool l9_2593=l9_2590&&(!l9_2588);
float l9_2594=1.0;
float l9_2595=l9_2584.x;
int l9_2596=l9_2587.x;
if (l9_2596==1)
{
l9_2595=fract(l9_2595);
}
else
{
if (l9_2596==2)
{
float l9_2597=fract(l9_2595);
float l9_2598=l9_2595-l9_2597;
float l9_2599=step(0.25,fract(l9_2598*0.5));
l9_2595=mix(l9_2597,1.0-l9_2597,fast::clamp(l9_2599,0.0,1.0));
}
}
l9_2584.x=l9_2595;
float l9_2600=l9_2584.y;
int l9_2601=l9_2587.y;
if (l9_2601==1)
{
l9_2600=fract(l9_2600);
}
else
{
if (l9_2601==2)
{
float l9_2602=fract(l9_2600);
float l9_2603=l9_2600-l9_2602;
float l9_2604=step(0.25,fract(l9_2603*0.5));
l9_2600=mix(l9_2602,1.0-l9_2602,fast::clamp(l9_2604,0.0,1.0));
}
}
l9_2584.y=l9_2600;
if (l9_2588)
{
bool l9_2605=l9_2590;
bool l9_2606;
if (l9_2605)
{
l9_2606=l9_2587.x==3;
}
else
{
l9_2606=l9_2605;
}
float l9_2607=l9_2584.x;
float l9_2608=l9_2589.x;
float l9_2609=l9_2589.z;
bool l9_2610=l9_2606;
float l9_2611=l9_2594;
float l9_2612=fast::clamp(l9_2607,l9_2608,l9_2609);
float l9_2613=step(abs(l9_2607-l9_2612),9.9999997e-06);
l9_2611*=(l9_2613+((1.0-float(l9_2610))*(1.0-l9_2613)));
l9_2607=l9_2612;
l9_2584.x=l9_2607;
l9_2594=l9_2611;
bool l9_2614=l9_2590;
bool l9_2615;
if (l9_2614)
{
l9_2615=l9_2587.y==3;
}
else
{
l9_2615=l9_2614;
}
float l9_2616=l9_2584.y;
float l9_2617=l9_2589.y;
float l9_2618=l9_2589.w;
bool l9_2619=l9_2615;
float l9_2620=l9_2594;
float l9_2621=fast::clamp(l9_2616,l9_2617,l9_2618);
float l9_2622=step(abs(l9_2616-l9_2621),9.9999997e-06);
l9_2620*=(l9_2622+((1.0-float(l9_2619))*(1.0-l9_2622)));
l9_2616=l9_2621;
l9_2584.y=l9_2616;
l9_2594=l9_2620;
}
float2 l9_2623=l9_2584;
bool l9_2624=l9_2585;
float3x3 l9_2625=l9_2586;
if (l9_2624)
{
l9_2623=float2((l9_2625*float3(l9_2623,1.0)).xy);
}
float2 l9_2626=l9_2623;
l9_2584=l9_2626;
float l9_2627=l9_2584.x;
int l9_2628=l9_2587.x;
bool l9_2629=l9_2593;
float l9_2630=l9_2594;
if ((l9_2628==0)||(l9_2628==3))
{
float l9_2631=l9_2627;
float l9_2632=0.0;
float l9_2633=1.0;
bool l9_2634=l9_2629;
float l9_2635=l9_2630;
float l9_2636=fast::clamp(l9_2631,l9_2632,l9_2633);
float l9_2637=step(abs(l9_2631-l9_2636),9.9999997e-06);
l9_2635*=(l9_2637+((1.0-float(l9_2634))*(1.0-l9_2637)));
l9_2631=l9_2636;
l9_2627=l9_2631;
l9_2630=l9_2635;
}
l9_2584.x=l9_2627;
l9_2594=l9_2630;
float l9_2638=l9_2584.y;
int l9_2639=l9_2587.y;
bool l9_2640=l9_2593;
float l9_2641=l9_2594;
if ((l9_2639==0)||(l9_2639==3))
{
float l9_2642=l9_2638;
float l9_2643=0.0;
float l9_2644=1.0;
bool l9_2645=l9_2640;
float l9_2646=l9_2641;
float l9_2647=fast::clamp(l9_2642,l9_2643,l9_2644);
float l9_2648=step(abs(l9_2642-l9_2647),9.9999997e-06);
l9_2646*=(l9_2648+((1.0-float(l9_2645))*(1.0-l9_2648)));
l9_2642=l9_2647;
l9_2638=l9_2642;
l9_2641=l9_2646;
}
l9_2584.y=l9_2638;
l9_2594=l9_2641;
float2 l9_2649=l9_2584;
int l9_2650=l9_2582;
int l9_2651=l9_2583;
float l9_2652=l9_2592;
float2 l9_2653=l9_2649;
int l9_2654=l9_2650;
int l9_2655=l9_2651;
float3 l9_2656=float3(0.0);
if (l9_2654==0)
{
l9_2656=float3(l9_2653,0.0);
}
else
{
if (l9_2654==1)
{
l9_2656=float3(l9_2653.x,(l9_2653.y*0.5)+(0.5-(float(l9_2655)*0.5)),0.0);
}
else
{
l9_2656=float3(l9_2653,float(l9_2655));
}
}
float3 l9_2657=l9_2656;
float3 l9_2658=l9_2657;
float4 l9_2659=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_2658.xy,level(l9_2652));
float4 l9_2660=l9_2659;
if (l9_2590)
{
l9_2660=mix(l9_2591,l9_2660,float4(l9_2594));
}
float4 l9_2661=l9_2660;
l9_2570=l9_2661.x;
float l9_2662=l9_2570;
float l9_2663=l9_2662;
float l9_2664=l9_1896;
float l9_2665=0.0;
float l9_2666=(*sc_set0.UserUniforms).Tweak_N297_curveData.x;
float l9_2667=(*sc_set0.UserUniforms).Tweak_N297_curveData.y;
float l9_2668=(*sc_set0.UserUniforms).Tweak_N297_curveData.z;
float l9_2669=(l9_2664-l9_2667)/(l9_2668-l9_2667);
float2 l9_2670=float2(l9_2669,l9_2666);
l9_2670=fast::clamp(l9_2670,float2(0.0),float2(1.0));
int l9_2671;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_2672=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2672=0;
}
else
{
l9_2672=in.varStereoViewID;
}
int l9_2673=l9_2672;
l9_2671=1-l9_2673;
}
else
{
int l9_2674=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2674=0;
}
else
{
l9_2674=in.varStereoViewID;
}
int l9_2675=l9_2674;
l9_2671=l9_2675;
}
int l9_2676=l9_2671;
int l9_2677=sc_CurveAtlasLayout_tmp;
int l9_2678=l9_2676;
float2 l9_2679=l9_2670;
bool l9_2680=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_2681=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_2682=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_2683=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_2684=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_2685=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_2686=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_2687=0.0;
bool l9_2688=l9_2685&&(!l9_2683);
float l9_2689=1.0;
float l9_2690=l9_2679.x;
int l9_2691=l9_2682.x;
if (l9_2691==1)
{
l9_2690=fract(l9_2690);
}
else
{
if (l9_2691==2)
{
float l9_2692=fract(l9_2690);
float l9_2693=l9_2690-l9_2692;
float l9_2694=step(0.25,fract(l9_2693*0.5));
l9_2690=mix(l9_2692,1.0-l9_2692,fast::clamp(l9_2694,0.0,1.0));
}
}
l9_2679.x=l9_2690;
float l9_2695=l9_2679.y;
int l9_2696=l9_2682.y;
if (l9_2696==1)
{
l9_2695=fract(l9_2695);
}
else
{
if (l9_2696==2)
{
float l9_2697=fract(l9_2695);
float l9_2698=l9_2695-l9_2697;
float l9_2699=step(0.25,fract(l9_2698*0.5));
l9_2695=mix(l9_2697,1.0-l9_2697,fast::clamp(l9_2699,0.0,1.0));
}
}
l9_2679.y=l9_2695;
if (l9_2683)
{
bool l9_2700=l9_2685;
bool l9_2701;
if (l9_2700)
{
l9_2701=l9_2682.x==3;
}
else
{
l9_2701=l9_2700;
}
float l9_2702=l9_2679.x;
float l9_2703=l9_2684.x;
float l9_2704=l9_2684.z;
bool l9_2705=l9_2701;
float l9_2706=l9_2689;
float l9_2707=fast::clamp(l9_2702,l9_2703,l9_2704);
float l9_2708=step(abs(l9_2702-l9_2707),9.9999997e-06);
l9_2706*=(l9_2708+((1.0-float(l9_2705))*(1.0-l9_2708)));
l9_2702=l9_2707;
l9_2679.x=l9_2702;
l9_2689=l9_2706;
bool l9_2709=l9_2685;
bool l9_2710;
if (l9_2709)
{
l9_2710=l9_2682.y==3;
}
else
{
l9_2710=l9_2709;
}
float l9_2711=l9_2679.y;
float l9_2712=l9_2684.y;
float l9_2713=l9_2684.w;
bool l9_2714=l9_2710;
float l9_2715=l9_2689;
float l9_2716=fast::clamp(l9_2711,l9_2712,l9_2713);
float l9_2717=step(abs(l9_2711-l9_2716),9.9999997e-06);
l9_2715*=(l9_2717+((1.0-float(l9_2714))*(1.0-l9_2717)));
l9_2711=l9_2716;
l9_2679.y=l9_2711;
l9_2689=l9_2715;
}
float2 l9_2718=l9_2679;
bool l9_2719=l9_2680;
float3x3 l9_2720=l9_2681;
if (l9_2719)
{
l9_2718=float2((l9_2720*float3(l9_2718,1.0)).xy);
}
float2 l9_2721=l9_2718;
l9_2679=l9_2721;
float l9_2722=l9_2679.x;
int l9_2723=l9_2682.x;
bool l9_2724=l9_2688;
float l9_2725=l9_2689;
if ((l9_2723==0)||(l9_2723==3))
{
float l9_2726=l9_2722;
float l9_2727=0.0;
float l9_2728=1.0;
bool l9_2729=l9_2724;
float l9_2730=l9_2725;
float l9_2731=fast::clamp(l9_2726,l9_2727,l9_2728);
float l9_2732=step(abs(l9_2726-l9_2731),9.9999997e-06);
l9_2730*=(l9_2732+((1.0-float(l9_2729))*(1.0-l9_2732)));
l9_2726=l9_2731;
l9_2722=l9_2726;
l9_2725=l9_2730;
}
l9_2679.x=l9_2722;
l9_2689=l9_2725;
float l9_2733=l9_2679.y;
int l9_2734=l9_2682.y;
bool l9_2735=l9_2688;
float l9_2736=l9_2689;
if ((l9_2734==0)||(l9_2734==3))
{
float l9_2737=l9_2733;
float l9_2738=0.0;
float l9_2739=1.0;
bool l9_2740=l9_2735;
float l9_2741=l9_2736;
float l9_2742=fast::clamp(l9_2737,l9_2738,l9_2739);
float l9_2743=step(abs(l9_2737-l9_2742),9.9999997e-06);
l9_2741*=(l9_2743+((1.0-float(l9_2740))*(1.0-l9_2743)));
l9_2737=l9_2742;
l9_2733=l9_2737;
l9_2736=l9_2741;
}
l9_2679.y=l9_2733;
l9_2689=l9_2736;
float2 l9_2744=l9_2679;
int l9_2745=l9_2677;
int l9_2746=l9_2678;
float l9_2747=l9_2687;
float2 l9_2748=l9_2744;
int l9_2749=l9_2745;
int l9_2750=l9_2746;
float3 l9_2751=float3(0.0);
if (l9_2749==0)
{
l9_2751=float3(l9_2748,0.0);
}
else
{
if (l9_2749==1)
{
l9_2751=float3(l9_2748.x,(l9_2748.y*0.5)+(0.5-(float(l9_2750)*0.5)),0.0);
}
else
{
l9_2751=float3(l9_2748,float(l9_2750));
}
}
float3 l9_2752=l9_2751;
float3 l9_2753=l9_2752;
float4 l9_2754=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_2753.xy,level(l9_2747));
float4 l9_2755=l9_2754;
if (l9_2685)
{
l9_2755=mix(l9_2686,l9_2755,float4(l9_2689));
}
float4 l9_2756=l9_2755;
l9_2665=l9_2756.x;
float l9_2757=l9_2665;
float3 l9_2758=float3(l9_2568,l9_2663,l9_2757);
float l9_2759=l9_1896+N319_res;
float l9_2760=0.0;
float l9_2761=(*sc_set0.UserUniforms).Tweak_N293_curveData.x;
float l9_2762=(*sc_set0.UserUniforms).Tweak_N293_curveData.y;
float l9_2763=(*sc_set0.UserUniforms).Tweak_N293_curveData.z;
float l9_2764=(l9_2759-l9_2762)/(l9_2763-l9_2762);
float2 l9_2765=float2(l9_2764,l9_2761);
l9_2765=fast::clamp(l9_2765,float2(0.0),float2(1.0));
int l9_2766;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_2767=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2767=0;
}
else
{
l9_2767=in.varStereoViewID;
}
int l9_2768=l9_2767;
l9_2766=1-l9_2768;
}
else
{
int l9_2769=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2769=0;
}
else
{
l9_2769=in.varStereoViewID;
}
int l9_2770=l9_2769;
l9_2766=l9_2770;
}
int l9_2771=l9_2766;
int l9_2772=sc_CurveAtlasLayout_tmp;
int l9_2773=l9_2771;
float2 l9_2774=l9_2765;
bool l9_2775=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_2776=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_2777=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_2778=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_2779=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_2780=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_2781=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_2782=0.0;
bool l9_2783=l9_2780&&(!l9_2778);
float l9_2784=1.0;
float l9_2785=l9_2774.x;
int l9_2786=l9_2777.x;
if (l9_2786==1)
{
l9_2785=fract(l9_2785);
}
else
{
if (l9_2786==2)
{
float l9_2787=fract(l9_2785);
float l9_2788=l9_2785-l9_2787;
float l9_2789=step(0.25,fract(l9_2788*0.5));
l9_2785=mix(l9_2787,1.0-l9_2787,fast::clamp(l9_2789,0.0,1.0));
}
}
l9_2774.x=l9_2785;
float l9_2790=l9_2774.y;
int l9_2791=l9_2777.y;
if (l9_2791==1)
{
l9_2790=fract(l9_2790);
}
else
{
if (l9_2791==2)
{
float l9_2792=fract(l9_2790);
float l9_2793=l9_2790-l9_2792;
float l9_2794=step(0.25,fract(l9_2793*0.5));
l9_2790=mix(l9_2792,1.0-l9_2792,fast::clamp(l9_2794,0.0,1.0));
}
}
l9_2774.y=l9_2790;
if (l9_2778)
{
bool l9_2795=l9_2780;
bool l9_2796;
if (l9_2795)
{
l9_2796=l9_2777.x==3;
}
else
{
l9_2796=l9_2795;
}
float l9_2797=l9_2774.x;
float l9_2798=l9_2779.x;
float l9_2799=l9_2779.z;
bool l9_2800=l9_2796;
float l9_2801=l9_2784;
float l9_2802=fast::clamp(l9_2797,l9_2798,l9_2799);
float l9_2803=step(abs(l9_2797-l9_2802),9.9999997e-06);
l9_2801*=(l9_2803+((1.0-float(l9_2800))*(1.0-l9_2803)));
l9_2797=l9_2802;
l9_2774.x=l9_2797;
l9_2784=l9_2801;
bool l9_2804=l9_2780;
bool l9_2805;
if (l9_2804)
{
l9_2805=l9_2777.y==3;
}
else
{
l9_2805=l9_2804;
}
float l9_2806=l9_2774.y;
float l9_2807=l9_2779.y;
float l9_2808=l9_2779.w;
bool l9_2809=l9_2805;
float l9_2810=l9_2784;
float l9_2811=fast::clamp(l9_2806,l9_2807,l9_2808);
float l9_2812=step(abs(l9_2806-l9_2811),9.9999997e-06);
l9_2810*=(l9_2812+((1.0-float(l9_2809))*(1.0-l9_2812)));
l9_2806=l9_2811;
l9_2774.y=l9_2806;
l9_2784=l9_2810;
}
float2 l9_2813=l9_2774;
bool l9_2814=l9_2775;
float3x3 l9_2815=l9_2776;
if (l9_2814)
{
l9_2813=float2((l9_2815*float3(l9_2813,1.0)).xy);
}
float2 l9_2816=l9_2813;
l9_2774=l9_2816;
float l9_2817=l9_2774.x;
int l9_2818=l9_2777.x;
bool l9_2819=l9_2783;
float l9_2820=l9_2784;
if ((l9_2818==0)||(l9_2818==3))
{
float l9_2821=l9_2817;
float l9_2822=0.0;
float l9_2823=1.0;
bool l9_2824=l9_2819;
float l9_2825=l9_2820;
float l9_2826=fast::clamp(l9_2821,l9_2822,l9_2823);
float l9_2827=step(abs(l9_2821-l9_2826),9.9999997e-06);
l9_2825*=(l9_2827+((1.0-float(l9_2824))*(1.0-l9_2827)));
l9_2821=l9_2826;
l9_2817=l9_2821;
l9_2820=l9_2825;
}
l9_2774.x=l9_2817;
l9_2784=l9_2820;
float l9_2828=l9_2774.y;
int l9_2829=l9_2777.y;
bool l9_2830=l9_2783;
float l9_2831=l9_2784;
if ((l9_2829==0)||(l9_2829==3))
{
float l9_2832=l9_2828;
float l9_2833=0.0;
float l9_2834=1.0;
bool l9_2835=l9_2830;
float l9_2836=l9_2831;
float l9_2837=fast::clamp(l9_2832,l9_2833,l9_2834);
float l9_2838=step(abs(l9_2832-l9_2837),9.9999997e-06);
l9_2836*=(l9_2838+((1.0-float(l9_2835))*(1.0-l9_2838)));
l9_2832=l9_2837;
l9_2828=l9_2832;
l9_2831=l9_2836;
}
l9_2774.y=l9_2828;
l9_2784=l9_2831;
float2 l9_2839=l9_2774;
int l9_2840=l9_2772;
int l9_2841=l9_2773;
float l9_2842=l9_2782;
float2 l9_2843=l9_2839;
int l9_2844=l9_2840;
int l9_2845=l9_2841;
float3 l9_2846=float3(0.0);
if (l9_2844==0)
{
l9_2846=float3(l9_2843,0.0);
}
else
{
if (l9_2844==1)
{
l9_2846=float3(l9_2843.x,(l9_2843.y*0.5)+(0.5-(float(l9_2845)*0.5)),0.0);
}
else
{
l9_2846=float3(l9_2843,float(l9_2845));
}
}
float3 l9_2847=l9_2846;
float3 l9_2848=l9_2847;
float4 l9_2849=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_2848.xy,level(l9_2842));
float4 l9_2850=l9_2849;
if (l9_2780)
{
l9_2850=mix(l9_2781,l9_2850,float4(l9_2784));
}
float4 l9_2851=l9_2850;
l9_2760=l9_2851.x;
float l9_2852=l9_2760;
float l9_2853=l9_2852;
float l9_2854=l9_1896+N319_res;
float l9_2855=0.0;
float l9_2856=(*sc_set0.UserUniforms).Tweak_N305_curveData.x;
float l9_2857=(*sc_set0.UserUniforms).Tweak_N305_curveData.y;
float l9_2858=(*sc_set0.UserUniforms).Tweak_N305_curveData.z;
float l9_2859=(l9_2854-l9_2857)/(l9_2858-l9_2857);
float2 l9_2860=float2(l9_2859,l9_2856);
l9_2860=fast::clamp(l9_2860,float2(0.0),float2(1.0));
int l9_2861;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_2862=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2862=0;
}
else
{
l9_2862=in.varStereoViewID;
}
int l9_2863=l9_2862;
l9_2861=1-l9_2863;
}
else
{
int l9_2864=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2864=0;
}
else
{
l9_2864=in.varStereoViewID;
}
int l9_2865=l9_2864;
l9_2861=l9_2865;
}
int l9_2866=l9_2861;
int l9_2867=sc_CurveAtlasLayout_tmp;
int l9_2868=l9_2866;
float2 l9_2869=l9_2860;
bool l9_2870=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_2871=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_2872=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_2873=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_2874=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_2875=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_2876=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_2877=0.0;
bool l9_2878=l9_2875&&(!l9_2873);
float l9_2879=1.0;
float l9_2880=l9_2869.x;
int l9_2881=l9_2872.x;
if (l9_2881==1)
{
l9_2880=fract(l9_2880);
}
else
{
if (l9_2881==2)
{
float l9_2882=fract(l9_2880);
float l9_2883=l9_2880-l9_2882;
float l9_2884=step(0.25,fract(l9_2883*0.5));
l9_2880=mix(l9_2882,1.0-l9_2882,fast::clamp(l9_2884,0.0,1.0));
}
}
l9_2869.x=l9_2880;
float l9_2885=l9_2869.y;
int l9_2886=l9_2872.y;
if (l9_2886==1)
{
l9_2885=fract(l9_2885);
}
else
{
if (l9_2886==2)
{
float l9_2887=fract(l9_2885);
float l9_2888=l9_2885-l9_2887;
float l9_2889=step(0.25,fract(l9_2888*0.5));
l9_2885=mix(l9_2887,1.0-l9_2887,fast::clamp(l9_2889,0.0,1.0));
}
}
l9_2869.y=l9_2885;
if (l9_2873)
{
bool l9_2890=l9_2875;
bool l9_2891;
if (l9_2890)
{
l9_2891=l9_2872.x==3;
}
else
{
l9_2891=l9_2890;
}
float l9_2892=l9_2869.x;
float l9_2893=l9_2874.x;
float l9_2894=l9_2874.z;
bool l9_2895=l9_2891;
float l9_2896=l9_2879;
float l9_2897=fast::clamp(l9_2892,l9_2893,l9_2894);
float l9_2898=step(abs(l9_2892-l9_2897),9.9999997e-06);
l9_2896*=(l9_2898+((1.0-float(l9_2895))*(1.0-l9_2898)));
l9_2892=l9_2897;
l9_2869.x=l9_2892;
l9_2879=l9_2896;
bool l9_2899=l9_2875;
bool l9_2900;
if (l9_2899)
{
l9_2900=l9_2872.y==3;
}
else
{
l9_2900=l9_2899;
}
float l9_2901=l9_2869.y;
float l9_2902=l9_2874.y;
float l9_2903=l9_2874.w;
bool l9_2904=l9_2900;
float l9_2905=l9_2879;
float l9_2906=fast::clamp(l9_2901,l9_2902,l9_2903);
float l9_2907=step(abs(l9_2901-l9_2906),9.9999997e-06);
l9_2905*=(l9_2907+((1.0-float(l9_2904))*(1.0-l9_2907)));
l9_2901=l9_2906;
l9_2869.y=l9_2901;
l9_2879=l9_2905;
}
float2 l9_2908=l9_2869;
bool l9_2909=l9_2870;
float3x3 l9_2910=l9_2871;
if (l9_2909)
{
l9_2908=float2((l9_2910*float3(l9_2908,1.0)).xy);
}
float2 l9_2911=l9_2908;
l9_2869=l9_2911;
float l9_2912=l9_2869.x;
int l9_2913=l9_2872.x;
bool l9_2914=l9_2878;
float l9_2915=l9_2879;
if ((l9_2913==0)||(l9_2913==3))
{
float l9_2916=l9_2912;
float l9_2917=0.0;
float l9_2918=1.0;
bool l9_2919=l9_2914;
float l9_2920=l9_2915;
float l9_2921=fast::clamp(l9_2916,l9_2917,l9_2918);
float l9_2922=step(abs(l9_2916-l9_2921),9.9999997e-06);
l9_2920*=(l9_2922+((1.0-float(l9_2919))*(1.0-l9_2922)));
l9_2916=l9_2921;
l9_2912=l9_2916;
l9_2915=l9_2920;
}
l9_2869.x=l9_2912;
l9_2879=l9_2915;
float l9_2923=l9_2869.y;
int l9_2924=l9_2872.y;
bool l9_2925=l9_2878;
float l9_2926=l9_2879;
if ((l9_2924==0)||(l9_2924==3))
{
float l9_2927=l9_2923;
float l9_2928=0.0;
float l9_2929=1.0;
bool l9_2930=l9_2925;
float l9_2931=l9_2926;
float l9_2932=fast::clamp(l9_2927,l9_2928,l9_2929);
float l9_2933=step(abs(l9_2927-l9_2932),9.9999997e-06);
l9_2931*=(l9_2933+((1.0-float(l9_2930))*(1.0-l9_2933)));
l9_2927=l9_2932;
l9_2923=l9_2927;
l9_2926=l9_2931;
}
l9_2869.y=l9_2923;
l9_2879=l9_2926;
float2 l9_2934=l9_2869;
int l9_2935=l9_2867;
int l9_2936=l9_2868;
float l9_2937=l9_2877;
float2 l9_2938=l9_2934;
int l9_2939=l9_2935;
int l9_2940=l9_2936;
float3 l9_2941=float3(0.0);
if (l9_2939==0)
{
l9_2941=float3(l9_2938,0.0);
}
else
{
if (l9_2939==1)
{
l9_2941=float3(l9_2938.x,(l9_2938.y*0.5)+(0.5-(float(l9_2940)*0.5)),0.0);
}
else
{
l9_2941=float3(l9_2938,float(l9_2940));
}
}
float3 l9_2942=l9_2941;
float3 l9_2943=l9_2942;
float4 l9_2944=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_2943.xy,level(l9_2937));
float4 l9_2945=l9_2944;
if (l9_2875)
{
l9_2945=mix(l9_2876,l9_2945,float4(l9_2879));
}
float4 l9_2946=l9_2945;
l9_2855=l9_2946.x;
float l9_2947=l9_2855;
float l9_2948=l9_2947;
float l9_2949=l9_1896+N319_res;
float l9_2950=0.0;
float l9_2951=(*sc_set0.UserUniforms).Tweak_N297_curveData.x;
float l9_2952=(*sc_set0.UserUniforms).Tweak_N297_curveData.y;
float l9_2953=(*sc_set0.UserUniforms).Tweak_N297_curveData.z;
float l9_2954=(l9_2949-l9_2952)/(l9_2953-l9_2952);
float2 l9_2955=float2(l9_2954,l9_2951);
l9_2955=fast::clamp(l9_2955,float2(0.0),float2(1.0));
int l9_2956;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_2957=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2957=0;
}
else
{
l9_2957=in.varStereoViewID;
}
int l9_2958=l9_2957;
l9_2956=1-l9_2958;
}
else
{
int l9_2959=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_2959=0;
}
else
{
l9_2959=in.varStereoViewID;
}
int l9_2960=l9_2959;
l9_2956=l9_2960;
}
int l9_2961=l9_2956;
int l9_2962=sc_CurveAtlasLayout_tmp;
int l9_2963=l9_2961;
float2 l9_2964=l9_2955;
bool l9_2965=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_2966=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_2967=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_2968=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_2969=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_2970=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_2971=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_2972=0.0;
bool l9_2973=l9_2970&&(!l9_2968);
float l9_2974=1.0;
float l9_2975=l9_2964.x;
int l9_2976=l9_2967.x;
if (l9_2976==1)
{
l9_2975=fract(l9_2975);
}
else
{
if (l9_2976==2)
{
float l9_2977=fract(l9_2975);
float l9_2978=l9_2975-l9_2977;
float l9_2979=step(0.25,fract(l9_2978*0.5));
l9_2975=mix(l9_2977,1.0-l9_2977,fast::clamp(l9_2979,0.0,1.0));
}
}
l9_2964.x=l9_2975;
float l9_2980=l9_2964.y;
int l9_2981=l9_2967.y;
if (l9_2981==1)
{
l9_2980=fract(l9_2980);
}
else
{
if (l9_2981==2)
{
float l9_2982=fract(l9_2980);
float l9_2983=l9_2980-l9_2982;
float l9_2984=step(0.25,fract(l9_2983*0.5));
l9_2980=mix(l9_2982,1.0-l9_2982,fast::clamp(l9_2984,0.0,1.0));
}
}
l9_2964.y=l9_2980;
if (l9_2968)
{
bool l9_2985=l9_2970;
bool l9_2986;
if (l9_2985)
{
l9_2986=l9_2967.x==3;
}
else
{
l9_2986=l9_2985;
}
float l9_2987=l9_2964.x;
float l9_2988=l9_2969.x;
float l9_2989=l9_2969.z;
bool l9_2990=l9_2986;
float l9_2991=l9_2974;
float l9_2992=fast::clamp(l9_2987,l9_2988,l9_2989);
float l9_2993=step(abs(l9_2987-l9_2992),9.9999997e-06);
l9_2991*=(l9_2993+((1.0-float(l9_2990))*(1.0-l9_2993)));
l9_2987=l9_2992;
l9_2964.x=l9_2987;
l9_2974=l9_2991;
bool l9_2994=l9_2970;
bool l9_2995;
if (l9_2994)
{
l9_2995=l9_2967.y==3;
}
else
{
l9_2995=l9_2994;
}
float l9_2996=l9_2964.y;
float l9_2997=l9_2969.y;
float l9_2998=l9_2969.w;
bool l9_2999=l9_2995;
float l9_3000=l9_2974;
float l9_3001=fast::clamp(l9_2996,l9_2997,l9_2998);
float l9_3002=step(abs(l9_2996-l9_3001),9.9999997e-06);
l9_3000*=(l9_3002+((1.0-float(l9_2999))*(1.0-l9_3002)));
l9_2996=l9_3001;
l9_2964.y=l9_2996;
l9_2974=l9_3000;
}
float2 l9_3003=l9_2964;
bool l9_3004=l9_2965;
float3x3 l9_3005=l9_2966;
if (l9_3004)
{
l9_3003=float2((l9_3005*float3(l9_3003,1.0)).xy);
}
float2 l9_3006=l9_3003;
l9_2964=l9_3006;
float l9_3007=l9_2964.x;
int l9_3008=l9_2967.x;
bool l9_3009=l9_2973;
float l9_3010=l9_2974;
if ((l9_3008==0)||(l9_3008==3))
{
float l9_3011=l9_3007;
float l9_3012=0.0;
float l9_3013=1.0;
bool l9_3014=l9_3009;
float l9_3015=l9_3010;
float l9_3016=fast::clamp(l9_3011,l9_3012,l9_3013);
float l9_3017=step(abs(l9_3011-l9_3016),9.9999997e-06);
l9_3015*=(l9_3017+((1.0-float(l9_3014))*(1.0-l9_3017)));
l9_3011=l9_3016;
l9_3007=l9_3011;
l9_3010=l9_3015;
}
l9_2964.x=l9_3007;
l9_2974=l9_3010;
float l9_3018=l9_2964.y;
int l9_3019=l9_2967.y;
bool l9_3020=l9_2973;
float l9_3021=l9_2974;
if ((l9_3019==0)||(l9_3019==3))
{
float l9_3022=l9_3018;
float l9_3023=0.0;
float l9_3024=1.0;
bool l9_3025=l9_3020;
float l9_3026=l9_3021;
float l9_3027=fast::clamp(l9_3022,l9_3023,l9_3024);
float l9_3028=step(abs(l9_3022-l9_3027),9.9999997e-06);
l9_3026*=(l9_3028+((1.0-float(l9_3025))*(1.0-l9_3028)));
l9_3022=l9_3027;
l9_3018=l9_3022;
l9_3021=l9_3026;
}
l9_2964.y=l9_3018;
l9_2974=l9_3021;
float2 l9_3029=l9_2964;
int l9_3030=l9_2962;
int l9_3031=l9_2963;
float l9_3032=l9_2972;
float2 l9_3033=l9_3029;
int l9_3034=l9_3030;
int l9_3035=l9_3031;
float3 l9_3036=float3(0.0);
if (l9_3034==0)
{
l9_3036=float3(l9_3033,0.0);
}
else
{
if (l9_3034==1)
{
l9_3036=float3(l9_3033.x,(l9_3033.y*0.5)+(0.5-(float(l9_3035)*0.5)),0.0);
}
else
{
l9_3036=float3(l9_3033,float(l9_3035));
}
}
float3 l9_3037=l9_3036;
float3 l9_3038=l9_3037;
float4 l9_3039=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_3038.xy,level(l9_3032));
float4 l9_3040=l9_3039;
if (l9_2970)
{
l9_3040=mix(l9_2971,l9_3040,float4(l9_2974));
}
float4 l9_3041=l9_3040;
l9_2950=l9_3041.x;
float l9_3042=l9_2950;
float3 l9_3043=float3(l9_2853,l9_2948,l9_3042);
l9_1900=normalize(l9_3043-l9_2758);
l9_1874=l9_1897;
l9_1875=l9_1898;
l9_1876=l9_1899;
l9_1877=l9_1900;
float l9_3044=l9_1881;
float l9_3045=0.0;
float l9_3046=(*sc_set0.UserUniforms).Tweak_N299_curveData.x;
float l9_3047=(*sc_set0.UserUniforms).Tweak_N299_curveData.y;
float l9_3048=(*sc_set0.UserUniforms).Tweak_N299_curveData.z;
float l9_3049=(l9_3044-l9_3047)/(l9_3048-l9_3047);
float2 l9_3050=float2(l9_3049,l9_3046);
l9_3050=fast::clamp(l9_3050,float2(0.0),float2(1.0));
int l9_3051;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_3052=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3052=0;
}
else
{
l9_3052=in.varStereoViewID;
}
int l9_3053=l9_3052;
l9_3051=1-l9_3053;
}
else
{
int l9_3054=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3054=0;
}
else
{
l9_3054=in.varStereoViewID;
}
int l9_3055=l9_3054;
l9_3051=l9_3055;
}
int l9_3056=l9_3051;
int l9_3057=sc_CurveAtlasLayout_tmp;
int l9_3058=l9_3056;
float2 l9_3059=l9_3050;
bool l9_3060=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_3061=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_3062=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_3063=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_3064=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_3065=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_3066=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_3067=0.0;
bool l9_3068=l9_3065&&(!l9_3063);
float l9_3069=1.0;
float l9_3070=l9_3059.x;
int l9_3071=l9_3062.x;
if (l9_3071==1)
{
l9_3070=fract(l9_3070);
}
else
{
if (l9_3071==2)
{
float l9_3072=fract(l9_3070);
float l9_3073=l9_3070-l9_3072;
float l9_3074=step(0.25,fract(l9_3073*0.5));
l9_3070=mix(l9_3072,1.0-l9_3072,fast::clamp(l9_3074,0.0,1.0));
}
}
l9_3059.x=l9_3070;
float l9_3075=l9_3059.y;
int l9_3076=l9_3062.y;
if (l9_3076==1)
{
l9_3075=fract(l9_3075);
}
else
{
if (l9_3076==2)
{
float l9_3077=fract(l9_3075);
float l9_3078=l9_3075-l9_3077;
float l9_3079=step(0.25,fract(l9_3078*0.5));
l9_3075=mix(l9_3077,1.0-l9_3077,fast::clamp(l9_3079,0.0,1.0));
}
}
l9_3059.y=l9_3075;
if (l9_3063)
{
bool l9_3080=l9_3065;
bool l9_3081;
if (l9_3080)
{
l9_3081=l9_3062.x==3;
}
else
{
l9_3081=l9_3080;
}
float l9_3082=l9_3059.x;
float l9_3083=l9_3064.x;
float l9_3084=l9_3064.z;
bool l9_3085=l9_3081;
float l9_3086=l9_3069;
float l9_3087=fast::clamp(l9_3082,l9_3083,l9_3084);
float l9_3088=step(abs(l9_3082-l9_3087),9.9999997e-06);
l9_3086*=(l9_3088+((1.0-float(l9_3085))*(1.0-l9_3088)));
l9_3082=l9_3087;
l9_3059.x=l9_3082;
l9_3069=l9_3086;
bool l9_3089=l9_3065;
bool l9_3090;
if (l9_3089)
{
l9_3090=l9_3062.y==3;
}
else
{
l9_3090=l9_3089;
}
float l9_3091=l9_3059.y;
float l9_3092=l9_3064.y;
float l9_3093=l9_3064.w;
bool l9_3094=l9_3090;
float l9_3095=l9_3069;
float l9_3096=fast::clamp(l9_3091,l9_3092,l9_3093);
float l9_3097=step(abs(l9_3091-l9_3096),9.9999997e-06);
l9_3095*=(l9_3097+((1.0-float(l9_3094))*(1.0-l9_3097)));
l9_3091=l9_3096;
l9_3059.y=l9_3091;
l9_3069=l9_3095;
}
float2 l9_3098=l9_3059;
bool l9_3099=l9_3060;
float3x3 l9_3100=l9_3061;
if (l9_3099)
{
l9_3098=float2((l9_3100*float3(l9_3098,1.0)).xy);
}
float2 l9_3101=l9_3098;
l9_3059=l9_3101;
float l9_3102=l9_3059.x;
int l9_3103=l9_3062.x;
bool l9_3104=l9_3068;
float l9_3105=l9_3069;
if ((l9_3103==0)||(l9_3103==3))
{
float l9_3106=l9_3102;
float l9_3107=0.0;
float l9_3108=1.0;
bool l9_3109=l9_3104;
float l9_3110=l9_3105;
float l9_3111=fast::clamp(l9_3106,l9_3107,l9_3108);
float l9_3112=step(abs(l9_3106-l9_3111),9.9999997e-06);
l9_3110*=(l9_3112+((1.0-float(l9_3109))*(1.0-l9_3112)));
l9_3106=l9_3111;
l9_3102=l9_3106;
l9_3105=l9_3110;
}
l9_3059.x=l9_3102;
l9_3069=l9_3105;
float l9_3113=l9_3059.y;
int l9_3114=l9_3062.y;
bool l9_3115=l9_3068;
float l9_3116=l9_3069;
if ((l9_3114==0)||(l9_3114==3))
{
float l9_3117=l9_3113;
float l9_3118=0.0;
float l9_3119=1.0;
bool l9_3120=l9_3115;
float l9_3121=l9_3116;
float l9_3122=fast::clamp(l9_3117,l9_3118,l9_3119);
float l9_3123=step(abs(l9_3117-l9_3122),9.9999997e-06);
l9_3121*=(l9_3123+((1.0-float(l9_3120))*(1.0-l9_3123)));
l9_3117=l9_3122;
l9_3113=l9_3117;
l9_3116=l9_3121;
}
l9_3059.y=l9_3113;
l9_3069=l9_3116;
float2 l9_3124=l9_3059;
int l9_3125=l9_3057;
int l9_3126=l9_3058;
float l9_3127=l9_3067;
float2 l9_3128=l9_3124;
int l9_3129=l9_3125;
int l9_3130=l9_3126;
float3 l9_3131=float3(0.0);
if (l9_3129==0)
{
l9_3131=float3(l9_3128,0.0);
}
else
{
if (l9_3129==1)
{
l9_3131=float3(l9_3128.x,(l9_3128.y*0.5)+(0.5-(float(l9_3130)*0.5)),0.0);
}
else
{
l9_3131=float3(l9_3128,float(l9_3130));
}
}
float3 l9_3132=l9_3131;
float3 l9_3133=l9_3132;
float4 l9_3134=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_3133.xy,level(l9_3127));
float4 l9_3135=l9_3134;
if (l9_3065)
{
l9_3135=mix(l9_3066,l9_3135,float4(l9_3069));
}
float4 l9_3136=l9_3135;
l9_3045=l9_3136.x;
float l9_3137=l9_3045;
float l9_3138=l9_3137;
float l9_3139;
if (N319_curvThickEnable)
{
l9_3139=N319_thicknessRad*l9_3138;
}
else
{
l9_3139=N319_thicknessRad;
}
float l9_3140=l9_3139;
float l9_3141=l9_1881;
float l9_3142=0.0;
float l9_3143=(*sc_set0.UserUniforms).Tweak_N293_curveData.x;
float l9_3144=(*sc_set0.UserUniforms).Tweak_N293_curveData.y;
float l9_3145=(*sc_set0.UserUniforms).Tweak_N293_curveData.z;
float l9_3146=(l9_3141-l9_3144)/(l9_3145-l9_3144);
float2 l9_3147=float2(l9_3146,l9_3143);
l9_3147=fast::clamp(l9_3147,float2(0.0),float2(1.0));
int l9_3148;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_3149=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3149=0;
}
else
{
l9_3149=in.varStereoViewID;
}
int l9_3150=l9_3149;
l9_3148=1-l9_3150;
}
else
{
int l9_3151=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3151=0;
}
else
{
l9_3151=in.varStereoViewID;
}
int l9_3152=l9_3151;
l9_3148=l9_3152;
}
int l9_3153=l9_3148;
int l9_3154=sc_CurveAtlasLayout_tmp;
int l9_3155=l9_3153;
float2 l9_3156=l9_3147;
bool l9_3157=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_3158=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_3159=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_3160=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_3161=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_3162=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_3163=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_3164=0.0;
bool l9_3165=l9_3162&&(!l9_3160);
float l9_3166=1.0;
float l9_3167=l9_3156.x;
int l9_3168=l9_3159.x;
if (l9_3168==1)
{
l9_3167=fract(l9_3167);
}
else
{
if (l9_3168==2)
{
float l9_3169=fract(l9_3167);
float l9_3170=l9_3167-l9_3169;
float l9_3171=step(0.25,fract(l9_3170*0.5));
l9_3167=mix(l9_3169,1.0-l9_3169,fast::clamp(l9_3171,0.0,1.0));
}
}
l9_3156.x=l9_3167;
float l9_3172=l9_3156.y;
int l9_3173=l9_3159.y;
if (l9_3173==1)
{
l9_3172=fract(l9_3172);
}
else
{
if (l9_3173==2)
{
float l9_3174=fract(l9_3172);
float l9_3175=l9_3172-l9_3174;
float l9_3176=step(0.25,fract(l9_3175*0.5));
l9_3172=mix(l9_3174,1.0-l9_3174,fast::clamp(l9_3176,0.0,1.0));
}
}
l9_3156.y=l9_3172;
if (l9_3160)
{
bool l9_3177=l9_3162;
bool l9_3178;
if (l9_3177)
{
l9_3178=l9_3159.x==3;
}
else
{
l9_3178=l9_3177;
}
float l9_3179=l9_3156.x;
float l9_3180=l9_3161.x;
float l9_3181=l9_3161.z;
bool l9_3182=l9_3178;
float l9_3183=l9_3166;
float l9_3184=fast::clamp(l9_3179,l9_3180,l9_3181);
float l9_3185=step(abs(l9_3179-l9_3184),9.9999997e-06);
l9_3183*=(l9_3185+((1.0-float(l9_3182))*(1.0-l9_3185)));
l9_3179=l9_3184;
l9_3156.x=l9_3179;
l9_3166=l9_3183;
bool l9_3186=l9_3162;
bool l9_3187;
if (l9_3186)
{
l9_3187=l9_3159.y==3;
}
else
{
l9_3187=l9_3186;
}
float l9_3188=l9_3156.y;
float l9_3189=l9_3161.y;
float l9_3190=l9_3161.w;
bool l9_3191=l9_3187;
float l9_3192=l9_3166;
float l9_3193=fast::clamp(l9_3188,l9_3189,l9_3190);
float l9_3194=step(abs(l9_3188-l9_3193),9.9999997e-06);
l9_3192*=(l9_3194+((1.0-float(l9_3191))*(1.0-l9_3194)));
l9_3188=l9_3193;
l9_3156.y=l9_3188;
l9_3166=l9_3192;
}
float2 l9_3195=l9_3156;
bool l9_3196=l9_3157;
float3x3 l9_3197=l9_3158;
if (l9_3196)
{
l9_3195=float2((l9_3197*float3(l9_3195,1.0)).xy);
}
float2 l9_3198=l9_3195;
l9_3156=l9_3198;
float l9_3199=l9_3156.x;
int l9_3200=l9_3159.x;
bool l9_3201=l9_3165;
float l9_3202=l9_3166;
if ((l9_3200==0)||(l9_3200==3))
{
float l9_3203=l9_3199;
float l9_3204=0.0;
float l9_3205=1.0;
bool l9_3206=l9_3201;
float l9_3207=l9_3202;
float l9_3208=fast::clamp(l9_3203,l9_3204,l9_3205);
float l9_3209=step(abs(l9_3203-l9_3208),9.9999997e-06);
l9_3207*=(l9_3209+((1.0-float(l9_3206))*(1.0-l9_3209)));
l9_3203=l9_3208;
l9_3199=l9_3203;
l9_3202=l9_3207;
}
l9_3156.x=l9_3199;
l9_3166=l9_3202;
float l9_3210=l9_3156.y;
int l9_3211=l9_3159.y;
bool l9_3212=l9_3165;
float l9_3213=l9_3166;
if ((l9_3211==0)||(l9_3211==3))
{
float l9_3214=l9_3210;
float l9_3215=0.0;
float l9_3216=1.0;
bool l9_3217=l9_3212;
float l9_3218=l9_3213;
float l9_3219=fast::clamp(l9_3214,l9_3215,l9_3216);
float l9_3220=step(abs(l9_3214-l9_3219),9.9999997e-06);
l9_3218*=(l9_3220+((1.0-float(l9_3217))*(1.0-l9_3220)));
l9_3214=l9_3219;
l9_3210=l9_3214;
l9_3213=l9_3218;
}
l9_3156.y=l9_3210;
l9_3166=l9_3213;
float2 l9_3221=l9_3156;
int l9_3222=l9_3154;
int l9_3223=l9_3155;
float l9_3224=l9_3164;
float2 l9_3225=l9_3221;
int l9_3226=l9_3222;
int l9_3227=l9_3223;
float3 l9_3228=float3(0.0);
if (l9_3226==0)
{
l9_3228=float3(l9_3225,0.0);
}
else
{
if (l9_3226==1)
{
l9_3228=float3(l9_3225.x,(l9_3225.y*0.5)+(0.5-(float(l9_3227)*0.5)),0.0);
}
else
{
l9_3228=float3(l9_3225,float(l9_3227));
}
}
float3 l9_3229=l9_3228;
float3 l9_3230=l9_3229;
float4 l9_3231=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_3230.xy,level(l9_3224));
float4 l9_3232=l9_3231;
if (l9_3162)
{
l9_3232=mix(l9_3163,l9_3232,float4(l9_3166));
}
float4 l9_3233=l9_3232;
l9_3142=l9_3233.x;
float l9_3234=l9_3142;
float l9_3235=l9_3234;
float l9_3236=l9_1881;
float l9_3237=0.0;
float l9_3238=(*sc_set0.UserUniforms).Tweak_N305_curveData.x;
float l9_3239=(*sc_set0.UserUniforms).Tweak_N305_curveData.y;
float l9_3240=(*sc_set0.UserUniforms).Tweak_N305_curveData.z;
float l9_3241=(l9_3236-l9_3239)/(l9_3240-l9_3239);
float2 l9_3242=float2(l9_3241,l9_3238);
l9_3242=fast::clamp(l9_3242,float2(0.0),float2(1.0));
int l9_3243;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_3244=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3244=0;
}
else
{
l9_3244=in.varStereoViewID;
}
int l9_3245=l9_3244;
l9_3243=1-l9_3245;
}
else
{
int l9_3246=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3246=0;
}
else
{
l9_3246=in.varStereoViewID;
}
int l9_3247=l9_3246;
l9_3243=l9_3247;
}
int l9_3248=l9_3243;
int l9_3249=sc_CurveAtlasLayout_tmp;
int l9_3250=l9_3248;
float2 l9_3251=l9_3242;
bool l9_3252=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_3253=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_3254=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_3255=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_3256=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_3257=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_3258=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_3259=0.0;
bool l9_3260=l9_3257&&(!l9_3255);
float l9_3261=1.0;
float l9_3262=l9_3251.x;
int l9_3263=l9_3254.x;
if (l9_3263==1)
{
l9_3262=fract(l9_3262);
}
else
{
if (l9_3263==2)
{
float l9_3264=fract(l9_3262);
float l9_3265=l9_3262-l9_3264;
float l9_3266=step(0.25,fract(l9_3265*0.5));
l9_3262=mix(l9_3264,1.0-l9_3264,fast::clamp(l9_3266,0.0,1.0));
}
}
l9_3251.x=l9_3262;
float l9_3267=l9_3251.y;
int l9_3268=l9_3254.y;
if (l9_3268==1)
{
l9_3267=fract(l9_3267);
}
else
{
if (l9_3268==2)
{
float l9_3269=fract(l9_3267);
float l9_3270=l9_3267-l9_3269;
float l9_3271=step(0.25,fract(l9_3270*0.5));
l9_3267=mix(l9_3269,1.0-l9_3269,fast::clamp(l9_3271,0.0,1.0));
}
}
l9_3251.y=l9_3267;
if (l9_3255)
{
bool l9_3272=l9_3257;
bool l9_3273;
if (l9_3272)
{
l9_3273=l9_3254.x==3;
}
else
{
l9_3273=l9_3272;
}
float l9_3274=l9_3251.x;
float l9_3275=l9_3256.x;
float l9_3276=l9_3256.z;
bool l9_3277=l9_3273;
float l9_3278=l9_3261;
float l9_3279=fast::clamp(l9_3274,l9_3275,l9_3276);
float l9_3280=step(abs(l9_3274-l9_3279),9.9999997e-06);
l9_3278*=(l9_3280+((1.0-float(l9_3277))*(1.0-l9_3280)));
l9_3274=l9_3279;
l9_3251.x=l9_3274;
l9_3261=l9_3278;
bool l9_3281=l9_3257;
bool l9_3282;
if (l9_3281)
{
l9_3282=l9_3254.y==3;
}
else
{
l9_3282=l9_3281;
}
float l9_3283=l9_3251.y;
float l9_3284=l9_3256.y;
float l9_3285=l9_3256.w;
bool l9_3286=l9_3282;
float l9_3287=l9_3261;
float l9_3288=fast::clamp(l9_3283,l9_3284,l9_3285);
float l9_3289=step(abs(l9_3283-l9_3288),9.9999997e-06);
l9_3287*=(l9_3289+((1.0-float(l9_3286))*(1.0-l9_3289)));
l9_3283=l9_3288;
l9_3251.y=l9_3283;
l9_3261=l9_3287;
}
float2 l9_3290=l9_3251;
bool l9_3291=l9_3252;
float3x3 l9_3292=l9_3253;
if (l9_3291)
{
l9_3290=float2((l9_3292*float3(l9_3290,1.0)).xy);
}
float2 l9_3293=l9_3290;
l9_3251=l9_3293;
float l9_3294=l9_3251.x;
int l9_3295=l9_3254.x;
bool l9_3296=l9_3260;
float l9_3297=l9_3261;
if ((l9_3295==0)||(l9_3295==3))
{
float l9_3298=l9_3294;
float l9_3299=0.0;
float l9_3300=1.0;
bool l9_3301=l9_3296;
float l9_3302=l9_3297;
float l9_3303=fast::clamp(l9_3298,l9_3299,l9_3300);
float l9_3304=step(abs(l9_3298-l9_3303),9.9999997e-06);
l9_3302*=(l9_3304+((1.0-float(l9_3301))*(1.0-l9_3304)));
l9_3298=l9_3303;
l9_3294=l9_3298;
l9_3297=l9_3302;
}
l9_3251.x=l9_3294;
l9_3261=l9_3297;
float l9_3305=l9_3251.y;
int l9_3306=l9_3254.y;
bool l9_3307=l9_3260;
float l9_3308=l9_3261;
if ((l9_3306==0)||(l9_3306==3))
{
float l9_3309=l9_3305;
float l9_3310=0.0;
float l9_3311=1.0;
bool l9_3312=l9_3307;
float l9_3313=l9_3308;
float l9_3314=fast::clamp(l9_3309,l9_3310,l9_3311);
float l9_3315=step(abs(l9_3309-l9_3314),9.9999997e-06);
l9_3313*=(l9_3315+((1.0-float(l9_3312))*(1.0-l9_3315)));
l9_3309=l9_3314;
l9_3305=l9_3309;
l9_3308=l9_3313;
}
l9_3251.y=l9_3305;
l9_3261=l9_3308;
float2 l9_3316=l9_3251;
int l9_3317=l9_3249;
int l9_3318=l9_3250;
float l9_3319=l9_3259;
float2 l9_3320=l9_3316;
int l9_3321=l9_3317;
int l9_3322=l9_3318;
float3 l9_3323=float3(0.0);
if (l9_3321==0)
{
l9_3323=float3(l9_3320,0.0);
}
else
{
if (l9_3321==1)
{
l9_3323=float3(l9_3320.x,(l9_3320.y*0.5)+(0.5-(float(l9_3322)*0.5)),0.0);
}
else
{
l9_3323=float3(l9_3320,float(l9_3322));
}
}
float3 l9_3324=l9_3323;
float3 l9_3325=l9_3324;
float4 l9_3326=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_3325.xy,level(l9_3319));
float4 l9_3327=l9_3326;
if (l9_3257)
{
l9_3327=mix(l9_3258,l9_3327,float4(l9_3261));
}
float4 l9_3328=l9_3327;
l9_3237=l9_3328.x;
float l9_3329=l9_3237;
float l9_3330=l9_3329;
float l9_3331=l9_1881;
float l9_3332=0.0;
float l9_3333=(*sc_set0.UserUniforms).Tweak_N297_curveData.x;
float l9_3334=(*sc_set0.UserUniforms).Tweak_N297_curveData.y;
float l9_3335=(*sc_set0.UserUniforms).Tweak_N297_curveData.z;
float l9_3336=(l9_3331-l9_3334)/(l9_3335-l9_3334);
float2 l9_3337=float2(l9_3336,l9_3333);
l9_3337=fast::clamp(l9_3337,float2(0.0),float2(1.0));
int l9_3338;
if ((int(sc_CurveAtlasHasSwappedViews_tmp)!=0))
{
int l9_3339=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3339=0;
}
else
{
l9_3339=in.varStereoViewID;
}
int l9_3340=l9_3339;
l9_3338=1-l9_3340;
}
else
{
int l9_3341=0;
if (sc_StereoRenderingMode_tmp==0)
{
l9_3341=0;
}
else
{
l9_3341=in.varStereoViewID;
}
int l9_3342=l9_3341;
l9_3338=l9_3342;
}
int l9_3343=l9_3338;
int l9_3344=sc_CurveAtlasLayout_tmp;
int l9_3345=l9_3343;
float2 l9_3346=l9_3337;
bool l9_3347=(int(SC_USE_UV_TRANSFORM_sc_CurveAtlas_tmp)!=0);
float3x3 l9_3348=(*sc_set0.UserUniforms).sc_CurveAtlasTransform;
int2 l9_3349=int2(SC_SOFTWARE_WRAP_MODE_U_sc_CurveAtlas_tmp,SC_SOFTWARE_WRAP_MODE_V_sc_CurveAtlas_tmp);
bool l9_3350=(int(SC_USE_UV_MIN_MAX_sc_CurveAtlas_tmp)!=0);
float4 l9_3351=(*sc_set0.UserUniforms).sc_CurveAtlasUvMinMax;
bool l9_3352=(int(SC_USE_CLAMP_TO_BORDER_sc_CurveAtlas_tmp)!=0);
float4 l9_3353=(*sc_set0.UserUniforms).sc_CurveAtlasBorderColor;
float l9_3354=0.0;
bool l9_3355=l9_3352&&(!l9_3350);
float l9_3356=1.0;
float l9_3357=l9_3346.x;
int l9_3358=l9_3349.x;
if (l9_3358==1)
{
l9_3357=fract(l9_3357);
}
else
{
if (l9_3358==2)
{
float l9_3359=fract(l9_3357);
float l9_3360=l9_3357-l9_3359;
float l9_3361=step(0.25,fract(l9_3360*0.5));
l9_3357=mix(l9_3359,1.0-l9_3359,fast::clamp(l9_3361,0.0,1.0));
}
}
l9_3346.x=l9_3357;
float l9_3362=l9_3346.y;
int l9_3363=l9_3349.y;
if (l9_3363==1)
{
l9_3362=fract(l9_3362);
}
else
{
if (l9_3363==2)
{
float l9_3364=fract(l9_3362);
float l9_3365=l9_3362-l9_3364;
float l9_3366=step(0.25,fract(l9_3365*0.5));
l9_3362=mix(l9_3364,1.0-l9_3364,fast::clamp(l9_3366,0.0,1.0));
}
}
l9_3346.y=l9_3362;
if (l9_3350)
{
bool l9_3367=l9_3352;
bool l9_3368;
if (l9_3367)
{
l9_3368=l9_3349.x==3;
}
else
{
l9_3368=l9_3367;
}
float l9_3369=l9_3346.x;
float l9_3370=l9_3351.x;
float l9_3371=l9_3351.z;
bool l9_3372=l9_3368;
float l9_3373=l9_3356;
float l9_3374=fast::clamp(l9_3369,l9_3370,l9_3371);
float l9_3375=step(abs(l9_3369-l9_3374),9.9999997e-06);
l9_3373*=(l9_3375+((1.0-float(l9_3372))*(1.0-l9_3375)));
l9_3369=l9_3374;
l9_3346.x=l9_3369;
l9_3356=l9_3373;
bool l9_3376=l9_3352;
bool l9_3377;
if (l9_3376)
{
l9_3377=l9_3349.y==3;
}
else
{
l9_3377=l9_3376;
}
float l9_3378=l9_3346.y;
float l9_3379=l9_3351.y;
float l9_3380=l9_3351.w;
bool l9_3381=l9_3377;
float l9_3382=l9_3356;
float l9_3383=fast::clamp(l9_3378,l9_3379,l9_3380);
float l9_3384=step(abs(l9_3378-l9_3383),9.9999997e-06);
l9_3382*=(l9_3384+((1.0-float(l9_3381))*(1.0-l9_3384)));
l9_3378=l9_3383;
l9_3346.y=l9_3378;
l9_3356=l9_3382;
}
float2 l9_3385=l9_3346;
bool l9_3386=l9_3347;
float3x3 l9_3387=l9_3348;
if (l9_3386)
{
l9_3385=float2((l9_3387*float3(l9_3385,1.0)).xy);
}
float2 l9_3388=l9_3385;
l9_3346=l9_3388;
float l9_3389=l9_3346.x;
int l9_3390=l9_3349.x;
bool l9_3391=l9_3355;
float l9_3392=l9_3356;
if ((l9_3390==0)||(l9_3390==3))
{
float l9_3393=l9_3389;
float l9_3394=0.0;
float l9_3395=1.0;
bool l9_3396=l9_3391;
float l9_3397=l9_3392;
float l9_3398=fast::clamp(l9_3393,l9_3394,l9_3395);
float l9_3399=step(abs(l9_3393-l9_3398),9.9999997e-06);
l9_3397*=(l9_3399+((1.0-float(l9_3396))*(1.0-l9_3399)));
l9_3393=l9_3398;
l9_3389=l9_3393;
l9_3392=l9_3397;
}
l9_3346.x=l9_3389;
l9_3356=l9_3392;
float l9_3400=l9_3346.y;
int l9_3401=l9_3349.y;
bool l9_3402=l9_3355;
float l9_3403=l9_3356;
if ((l9_3401==0)||(l9_3401==3))
{
float l9_3404=l9_3400;
float l9_3405=0.0;
float l9_3406=1.0;
bool l9_3407=l9_3402;
float l9_3408=l9_3403;
float l9_3409=fast::clamp(l9_3404,l9_3405,l9_3406);
float l9_3410=step(abs(l9_3404-l9_3409),9.9999997e-06);
l9_3408*=(l9_3410+((1.0-float(l9_3407))*(1.0-l9_3410)));
l9_3404=l9_3409;
l9_3400=l9_3404;
l9_3403=l9_3408;
}
l9_3346.y=l9_3400;
l9_3356=l9_3403;
float2 l9_3411=l9_3346;
int l9_3412=l9_3344;
int l9_3413=l9_3345;
float l9_3414=l9_3354;
float2 l9_3415=l9_3411;
int l9_3416=l9_3412;
int l9_3417=l9_3413;
float3 l9_3418=float3(0.0);
if (l9_3416==0)
{
l9_3418=float3(l9_3415,0.0);
}
else
{
if (l9_3416==1)
{
l9_3418=float3(l9_3415.x,(l9_3415.y*0.5)+(0.5-(float(l9_3417)*0.5)),0.0);
}
else
{
l9_3418=float3(l9_3415,float(l9_3417));
}
}
float3 l9_3419=l9_3418;
float3 l9_3420=l9_3419;
float4 l9_3421=sc_set0.sc_CurveAtlas.sample(sc_set0.sc_CurveAtlasSmpSC,l9_3420.xy,level(l9_3414));
float4 l9_3422=l9_3421;
if (l9_3352)
{
l9_3422=mix(l9_3353,l9_3422,float4(l9_3356));
}
float4 l9_3423=l9_3422;
l9_3332=l9_3423.x;
float l9_3424=l9_3332;
float3 l9_3425=float3(l9_3235,l9_3330,l9_3424)*N319_scaleXYZ;
float3 l9_3426=mix(l9_3425+(((l9_1875*cos(l9_1884))+(l9_1876*sin(l9_1884)))*l9_3140),l9_3425,float3(l9_1895*N319_VolumeFill));
float3 l9_3427;
if (l9_1881>1.0)
{
l9_3427=l9_3426/float3(0.0);
}
else
{
l9_3427=l9_3426;
}
l9_3426=l9_3427;
tempGlobals.N319_curveDirection=l9_1877;
N319_Result=l9_3426*N319_Scale;
l9_1873=N319_Result;
l9_1860=l9_1873;
l9_1222=l9_1860;
l9_1226=l9_1222;
}
else
{
if (NODE_248_DROPLIST_ITEM_tmp==7)
{
float l9_3428=0.0;
float l9_3429=float((*sc_set0.UserUniforms).Tweak_N271);
l9_3428=l9_3429;
float l9_3430=0.0;
float l9_3431=(*sc_set0.UserUniforms).Tweak_N273;
l9_3430=l9_3431;
float2 l9_3432=float2(0.0);
float2 l9_3433=(*sc_set0.UserUniforms).Tweak_N270;
l9_3432=l9_3433;
float2 l9_3434=float2(0.0);
float2 l9_3435=(*sc_set0.UserUniforms).Tweak_N272;
l9_3434=l9_3435;
float l9_3436=0.0;
float l9_3437=(*sc_set0.UserUniforms).Tweak_N269;
l9_3436=l9_3437;
float l9_3438=0.0;
float l9_3439=(*sc_set0.UserUniforms).Tweak_N275;
l9_3438=l9_3439;
float l9_3440=0.0;
float l9_3441=float((*sc_set0.UserUniforms).Tweak_N161);
l9_3440=l9_3441;
float3 l9_3442=float3(0.0);
float l9_3443=l9_3428;
float l9_3444=l9_3430;
float2 l9_3445=l9_3432;
float2 l9_3446=l9_3434;
float l9_3447=l9_3436;
float l9_3448=l9_3438;
float l9_3449=l9_3440;
ssGlobals l9_3450=l9_1225;
tempGlobals=l9_3450;
float3 l9_3451=float3(0.0);
N267_Seed=int(l9_3443);
N267_Depth=l9_3444;
N267_Expand=l9_3445;
N267_Offset=l9_3446;
N267_Thickness=l9_3447;
N267_Push=l9_3448;
N267_pushMetod=int(l9_3449);
int l9_3452=0;
l9_3452=int(tempGlobals.gInstanceID+0.5);
int l9_3453=l9_3452;
float l9_3454=float(l9_3453+N267_Seed);
int l9_3455=int(l9_3454);
int l9_3456=l9_3455^(l9_3455*15299);
int l9_3457=l9_3456;
int l9_3458=l9_3457;
int l9_3459=((l9_3458*((l9_3458*1471343)+101146501))+1559861749)&2147483647;
int l9_3460=l9_3459;
int l9_3461=l9_3457*1399;
int l9_3462=((l9_3461*((l9_3461*1471343)+101146501))+1559861749)&2147483647;
int l9_3463=l9_3462;
int l9_3464=l9_3460;
float l9_3465=float(l9_3464)*4.6566129e-10;
int l9_3466=l9_3463;
float l9_3467=float(l9_3466)*4.6566129e-10;
float2 l9_3468=float2(l9_3465,l9_3467);
float2 l9_3469=l9_3468;
float2 l9_3470=l9_3469;
int l9_3471=0;
l9_3471=int(tempGlobals.gInstanceID+0.5);
int l9_3472=l9_3471;
float l9_3473=float(l9_3472);
int l9_3474=int(l9_3473);
int l9_3475=l9_3474^(l9_3474*15299);
int l9_3476=l9_3475;
int l9_3477=l9_3476;
int l9_3478=((l9_3477*((l9_3477*1471343)+101146501))+1559861749)&2147483647;
int l9_3479=l9_3478;
float l9_3480=float(l9_3479)*4.6566129e-10;
float l9_3481=l9_3480;
float l9_3482=l9_3481;
float l9_3483=l9_3482;
float2 l9_3484=(float2(0.5)-l9_3470)+N267_Offset;
float2 l9_3485=fast::clamp(normalize(l9_3484),float2(-0.5),float2(0.5));
float l9_3486=distance(l9_3484,float2(0.0));
float l9_3487=0.0+(((l9_3486-(N267_Push-0.1))*1.0)/((N267_Push-(N267_Push-0.1))+1e-06));
if (N267_pushMetod==1)
{
l9_3484=mix(l9_3485,l9_3484,float2(fast::clamp(l9_3487,0.0,1.0)));
}
else
{
if (N267_pushMetod==2)
{
l9_3484=mix(l9_3484,l9_3485,float2(N267_Push));
}
}
float l9_3488=(*sc_set0.UserUniforms).sc_Camera.aspect;
l9_3484.x*=l9_3488;
float l9_3489=tempGlobals.CameraFOV;
l9_3484*=(tan(radians(l9_3489)*0.5)*2.0);
float l9_3490=(N267_Depth*((l9_3483-0.5)*2.0))*N267_Thickness;
l9_3484*=(N267_Depth+l9_3490);
float3 l9_3491=float3(l9_3484*N267_Expand,(N267_Depth+l9_3490)*(-1.0));
N267_Result=l9_3491;
l9_3451=N267_Result;
l9_3442=l9_3451;
l9_1223=l9_3442;
l9_1226=l9_1223;
}
else
{
l9_1226=l9_1224;
}
}
}
}
}
}
}
}
l9_1215=l9_1226;
l9_1214=l9_1215;
float3 l9_3492=l9_1214;
N111_spawnLocation=l9_3492;
float3 l9_3493=float3(0.0);
float3 l9_3494=float3(0.0);
float3 l9_3495=(*sc_set0.UserUniforms).spawnBox;
l9_3494=l9_3495;
l9_3493=l9_3494;
float3 l9_3496=l9_3493;
N111_spawnBox=l9_3496;
float3 l9_3497=float3(0.0);
float3 l9_3498=float3(0.0);
float3 l9_3499=(*sc_set0.UserUniforms).spawnSphere;
l9_3498=l9_3499;
l9_3497=l9_3498;
float3 l9_3500=l9_3497;
N111_spawnSphere=l9_3500;
float2 l9_3501=float2(0.0);
float2 l9_3502=float2(0.0);
float2 l9_3503=(*sc_set0.UserUniforms).sizeStart;
l9_3502=l9_3503;
l9_3501=l9_3502;
float2 l9_3504=l9_3501;
N111_sizeStart=l9_3504;
float2 l9_3505=float2(0.0);
float2 l9_3506=float2(0.0);
float2 l9_3507=(*sc_set0.UserUniforms).sizeEnd;
l9_3506=l9_3507;
l9_3505=l9_3506;
float2 l9_3508=l9_3505;
N111_sizeEnd=l9_3508;
float2 l9_3509=float2(0.0);
float2 l9_3510=float2(0.0);
float2 l9_3511=(*sc_set0.UserUniforms).sizeStartMax;
l9_3510=l9_3511;
l9_3509=l9_3510;
float2 l9_3512=l9_3509;
N111_sizeStartMax=l9_3512;
float2 l9_3513=float2(0.0);
float2 l9_3514=float2(0.0);
float2 l9_3515=(*sc_set0.UserUniforms).sizeEndMax;
l9_3514=l9_3515;
l9_3513=l9_3514;
float2 l9_3516=l9_3513;
N111_sizeEndMax=l9_3516;
float3 l9_3517=float3(0.0);
float3 l9_3518=float3(0.0);
float3 l9_3519=(*sc_set0.UserUniforms).sizeStart3D;
l9_3518=l9_3519;
l9_3517=l9_3518;
float3 l9_3520=l9_3517;
N111_sizeStart3D=l9_3520;
float3 l9_3521=float3(0.0);
float3 l9_3522=float3(0.0);
float3 l9_3523=(*sc_set0.UserUniforms).sizeEnd3D;
l9_3522=l9_3523;
l9_3521=l9_3522;
float3 l9_3524=l9_3521;
N111_sizeEnd3D=l9_3524;
float3 l9_3525=float3(0.0);
float3 l9_3526=float3(0.0);
float3 l9_3527=(*sc_set0.UserUniforms).sizeStartMax3D;
l9_3526=l9_3527;
l9_3525=l9_3526;
float3 l9_3528=l9_3525;
N111_sizeStartMax3D=l9_3528;
float3 l9_3529=float3(0.0);
float3 l9_3530=float3(0.0);
float3 l9_3531=(*sc_set0.UserUniforms).sizeEndMax3D;
l9_3530=l9_3531;
l9_3529=l9_3530;
float3 l9_3532=l9_3529;
N111_sizeEndMax3D=l9_3532;
float l9_3533=0.0;
float l9_3534=0.0;
float l9_3535=(*sc_set0.UserUniforms).sizeSpeed;
l9_3534=l9_3535;
l9_3533=l9_3534;
float l9_3536=l9_3533;
N111_sizeSpeed=l9_3536;
float l9_3537=0.0;
float l9_3538=(*sc_set0.UserUniforms).timeGlobal;
l9_3537=l9_3538;
float l9_3539=0.0;
float l9_3540=(*sc_set0.UserUniforms).externalTimeInput;
l9_3539=l9_3540;
float l9_3541=0.0;
float l9_3542=(*sc_set0.UserUniforms).externalSeed;
l9_3541=l9_3542;
float l9_3543=0.0;
float l9_3544=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_3543=l9_3544;
float2 l9_3545=float2(0.0);
float2 l9_3546=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_3545=l9_3546;
float l9_3547=0.0;
float l9_3548;
if ((int(TRAILS_tmp)!=0))
{
l9_3548=1.001;
}
else
{
l9_3548=0.001;
}
l9_3548-=0.001;
l9_3547=l9_3548;
float l9_3549=0.0;
float l9_3550=(*sc_set0.UserUniforms).trailLength;
l9_3549=l9_3550;
float4 l9_3551=float4(0.0);
l9_3551=tempGlobals.VertexColor;
float l9_3552=0.0;
l9_3552=l9_3551.x;
float l9_3553=0.0;
float l9_3554=l9_3547;
bool l9_3555=(l9_3554*1.0)!=0.0;
bool l9_3556;
if (l9_3555)
{
l9_3556=(l9_3552*1.0)!=0.0;
}
else
{
l9_3556=l9_3555;
}
l9_3553=float(l9_3556);
float l9_3557=l9_3537;
float l9_3558=l9_3539;
float l9_3559=l9_3541;
float l9_3560=l9_3543;
float2 l9_3561=l9_3545;
float l9_3562=l9_3549;
float l9_3563=l9_3553;
ssGlobals l9_3564=tempGlobals;
tempGlobals=l9_3564;
N181_timeGlobal=l9_3557;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_3558;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_3559;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_3560;
N181_lifeTimeMinMax=l9_3561;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_3562;
N181_isTrailCondition=l9_3563!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_3565=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_3566=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_3565=length(float4(1.0)*l9_3566);
}
N181_globalSeed=N181_externalSeed+l9_3565;
int l9_3567=0;
l9_3567=int(tempGlobals.gInstanceID+0.5);
int l9_3568=l9_3567;
float l9_3569=float(l9_3568);
int l9_3570=int(l9_3569);
int l9_3571=l9_3570^(l9_3570*15299);
int l9_3572=l9_3571;
int l9_3573=l9_3572;
int l9_3574=((l9_3573*((l9_3573*1471343)+101146501))+1559861749)&2147483647;
int l9_3575=l9_3574;
int l9_3576=l9_3572*1399;
int l9_3577=((l9_3576*((l9_3576*1471343)+101146501))+1559861749)&2147483647;
int l9_3578=l9_3577;
int l9_3579=l9_3572*7177;
int l9_3580=((l9_3579*((l9_3579*1471343)+101146501))+1559861749)&2147483647;
int l9_3581=l9_3580;
int l9_3582=l9_3575;
float l9_3583=float(l9_3582)*4.6566129e-10;
int l9_3584=l9_3578;
float l9_3585=float(l9_3584)*4.6566129e-10;
int l9_3586=l9_3581;
float l9_3587=float(l9_3586)*4.6566129e-10;
float3 l9_3588=float3(l9_3583,l9_3585,l9_3587);
float3 l9_3589=l9_3588;
N181_particleSeed=l9_3589;
float l9_3590=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_3591;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_3591=N181_lifeTimeMinMax;
}
else
{
l9_3591=float2(N181_lifeTimeConstant);
}
float2 l9_3592=l9_3591;
float l9_3593=fast::max(l9_3592.x,0.0099999998);
float l9_3594=fast::max(l9_3592.y,0.0099999998);
float l9_3595=tempGlobals.gTimeElapsed;
float l9_3596=l9_3595;
if (N181_ENABLE_EXTERNALTIME)
{
l9_3596=N181_externalTime;
}
float l9_3597=l9_3596;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_3597=N181_timeGlobal*l9_3596;
}
else
{
float l9_3598=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_3598=N181_trailLength;
}
}
float l9_3599=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_3600=0.0;
l9_3600=tempGlobals.gInstanceRatio;
float l9_3601=l9_3600;
int l9_3602=0;
l9_3602=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_3603=l9_3602;
l9_3599=fast::max(l9_3601*(1.0-(1.0/float(l9_3603))),0.0);
}
else
{
l9_3599=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_3604=fract(((l9_3596*N181_timeGlobal)*(1.0/(l9_3592.y+l9_3598)))+l9_3599);
l9_3597=l9_3604*(l9_3592.y+l9_3598);
}
float l9_3605=mix(l9_3597/l9_3593,l9_3597/l9_3594,l9_3590);
float l9_3606=fast::clamp(l9_3605,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_3597,l9_3606);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_3607=tempGlobals.Surface_UVCoord0;
l9_3597-=(l9_3607.y*N181_trailLength);
l9_3605=mix(l9_3597/l9_3593,l9_3597/l9_3594,l9_3590);
l9_3606=fast::clamp(l9_3605,0.0,1.0);
}
}
N181_timeValues=float4(l9_3592,l9_3597,l9_3606);
ssGlobals l9_3608=tempGlobals;
tempGlobals=l9_3608;
ssGlobals l9_3609=tempGlobals;
tempGlobals=l9_3609;
ssGlobals l9_3610=tempGlobals;
tempGlobals=l9_3610;
float l9_3611=0.0;
float l9_3612=(*sc_set0.UserUniforms).timeGlobal;
l9_3611=l9_3612;
float l9_3613=0.0;
float l9_3614=(*sc_set0.UserUniforms).externalTimeInput;
l9_3613=l9_3614;
float l9_3615=0.0;
float l9_3616=(*sc_set0.UserUniforms).externalSeed;
l9_3615=l9_3616;
float l9_3617=0.0;
float l9_3618=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_3617=l9_3618;
float2 l9_3619=float2(0.0);
float2 l9_3620=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_3619=l9_3620;
float l9_3621=0.0;
float l9_3622;
if ((int(TRAILS_tmp)!=0))
{
l9_3622=1.001;
}
else
{
l9_3622=0.001;
}
l9_3622-=0.001;
l9_3621=l9_3622;
float l9_3623=0.0;
float l9_3624=(*sc_set0.UserUniforms).trailLength;
l9_3623=l9_3624;
float4 l9_3625=float4(0.0);
l9_3625=tempGlobals.VertexColor;
float l9_3626=0.0;
l9_3626=l9_3625.x;
float l9_3627=0.0;
float l9_3628=l9_3621;
bool l9_3629=(l9_3628*1.0)!=0.0;
bool l9_3630;
if (l9_3629)
{
l9_3630=(l9_3626*1.0)!=0.0;
}
else
{
l9_3630=l9_3629;
}
l9_3627=float(l9_3630);
float l9_3631=l9_3611;
float l9_3632=l9_3613;
float l9_3633=l9_3615;
float l9_3634=l9_3617;
float2 l9_3635=l9_3619;
float l9_3636=l9_3623;
float l9_3637=l9_3627;
ssGlobals l9_3638=tempGlobals;
tempGlobals=l9_3638;
N181_timeGlobal=l9_3631;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_3632;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_3633;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_3634;
N181_lifeTimeMinMax=l9_3635;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_3636;
N181_isTrailCondition=l9_3637!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_3639=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_3640=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_3639=length(float4(1.0)*l9_3640);
}
N181_globalSeed=N181_externalSeed+l9_3639;
int l9_3641=0;
l9_3641=int(tempGlobals.gInstanceID+0.5);
int l9_3642=l9_3641;
float l9_3643=float(l9_3642);
int l9_3644=int(l9_3643);
int l9_3645=l9_3644^(l9_3644*15299);
int l9_3646=l9_3645;
int l9_3647=l9_3646;
int l9_3648=((l9_3647*((l9_3647*1471343)+101146501))+1559861749)&2147483647;
int l9_3649=l9_3648;
int l9_3650=l9_3646*1399;
int l9_3651=((l9_3650*((l9_3650*1471343)+101146501))+1559861749)&2147483647;
int l9_3652=l9_3651;
int l9_3653=l9_3646*7177;
int l9_3654=((l9_3653*((l9_3653*1471343)+101146501))+1559861749)&2147483647;
int l9_3655=l9_3654;
int l9_3656=l9_3649;
float l9_3657=float(l9_3656)*4.6566129e-10;
int l9_3658=l9_3652;
float l9_3659=float(l9_3658)*4.6566129e-10;
int l9_3660=l9_3655;
float l9_3661=float(l9_3660)*4.6566129e-10;
float3 l9_3662=float3(l9_3657,l9_3659,l9_3661);
float3 l9_3663=l9_3662;
N181_particleSeed=l9_3663;
float l9_3664=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_3665;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_3665=N181_lifeTimeMinMax;
}
else
{
l9_3665=float2(N181_lifeTimeConstant);
}
float2 l9_3666=l9_3665;
float l9_3667=fast::max(l9_3666.x,0.0099999998);
float l9_3668=fast::max(l9_3666.y,0.0099999998);
float l9_3669=tempGlobals.gTimeElapsed;
float l9_3670=l9_3669;
if (N181_ENABLE_EXTERNALTIME)
{
l9_3670=N181_externalTime;
}
float l9_3671=l9_3670;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_3671=N181_timeGlobal*l9_3670;
}
else
{
float l9_3672=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_3672=N181_trailLength;
}
}
float l9_3673=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_3674=0.0;
l9_3674=tempGlobals.gInstanceRatio;
float l9_3675=l9_3674;
int l9_3676=0;
l9_3676=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_3677=l9_3676;
l9_3673=fast::max(l9_3675*(1.0-(1.0/float(l9_3677))),0.0);
}
else
{
l9_3673=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_3678=fract(((l9_3670*N181_timeGlobal)*(1.0/(l9_3666.y+l9_3672)))+l9_3673);
l9_3671=l9_3678*(l9_3666.y+l9_3672);
}
float l9_3679=mix(l9_3671/l9_3667,l9_3671/l9_3668,l9_3664);
float l9_3680=fast::clamp(l9_3679,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_3671,l9_3680);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_3681=tempGlobals.Surface_UVCoord0;
l9_3671-=(l9_3681.y*N181_trailLength);
l9_3679=mix(l9_3671/l9_3667,l9_3671/l9_3668,l9_3664);
l9_3680=fast::clamp(l9_3679,0.0,1.0);
}
}
N181_timeValues=float4(l9_3666,l9_3671,l9_3680);
ssGlobals l9_3682=tempGlobals;
tempGlobals=l9_3682;
float3 l9_3683=float3(0.0);
N111_particleSeed=N111_particleSeedIn;
N111_globalSeed=N111_globalSeedIn;
float l9_3684=N111_particleSeed.x;
float l9_3685=N111_particleSeed.y;
float l9_3686=N111_particleSeed.z;
float3 l9_3687=fract((float3(l9_3684,l9_3685,l9_3686)*3048.28)+float3(N111_globalSeed))-float3(0.5);
float3 l9_3688=fract((N111_particleSeed*374.57129)+float3(N111_globalSeed))-float3(0.5);
float3 l9_3689=normalize(l9_3688+float3(1e-06));
float l9_3690=fract(N111_particleSeed.x+N111_globalSeed);
float l9_3691=l9_3690;
float l9_3692=0.33333334;
float l9_3693;
if (l9_3691<=0.0)
{
l9_3693=0.0;
}
else
{
l9_3693=pow(l9_3691,l9_3692);
}
float l9_3694=l9_3693;
float l9_3695=l9_3694;
l9_3689*=l9_3695;
l9_3689/=float3(2.0);
float l9_3696=fract((N111_particleSeed.x*334.59122)+N111_globalSeed);
float l9_3697=fract((N111_particleSeed.y*41.231232)+N111_globalSeed);
float l9_3698=N111_timeValuesIn.w;
float3 l9_3699=l9_3683;
float3 l9_3700=l9_3683;
float3 l9_3701=l9_3683;
if ((int(INILOCATION_tmp)!=0))
{
l9_3701=N111_spawnLocation;
}
if ((int(BOXSPAWN_tmp)!=0))
{
l9_3699=N111_spawnBox*l9_3687;
}
if ((int(SPHERESPAWN_tmp)!=0))
{
l9_3700=N111_spawnSphere*l9_3689;
}
float3 l9_3702=(l9_3701+l9_3700)+l9_3699;
if ((int(CUSTOMFORCE_tmp)!=0))
{
tempGlobals.N111_ParticleSpawnPosition=l9_3702;
float l9_3703=0.0;
float l9_3704=(*sc_set0.UserUniforms).timeGlobal;
l9_3703=l9_3704;
float l9_3705=0.0;
float l9_3706=(*sc_set0.UserUniforms).externalTimeInput;
l9_3705=l9_3706;
float l9_3707=0.0;
float l9_3708=(*sc_set0.UserUniforms).externalSeed;
l9_3707=l9_3708;
float l9_3709=0.0;
float l9_3710=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_3709=l9_3710;
float2 l9_3711=float2(0.0);
float2 l9_3712=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_3711=l9_3712;
float l9_3713=0.0;
float l9_3714;
if ((int(TRAILS_tmp)!=0))
{
l9_3714=1.001;
}
else
{
l9_3714=0.001;
}
l9_3714-=0.001;
l9_3713=l9_3714;
float l9_3715=0.0;
float l9_3716=(*sc_set0.UserUniforms).trailLength;
l9_3715=l9_3716;
float4 l9_3717=float4(0.0);
l9_3717=tempGlobals.VertexColor;
float l9_3718=0.0;
l9_3718=l9_3717.x;
float l9_3719=0.0;
float l9_3720=l9_3713;
bool l9_3721=(l9_3720*1.0)!=0.0;
bool l9_3722;
if (l9_3721)
{
l9_3722=(l9_3718*1.0)!=0.0;
}
else
{
l9_3722=l9_3721;
}
l9_3719=float(l9_3722);
float l9_3723=l9_3703;
float l9_3724=l9_3705;
float l9_3725=l9_3707;
float l9_3726=l9_3709;
float2 l9_3727=l9_3711;
float l9_3728=l9_3715;
float l9_3729=l9_3719;
ssGlobals l9_3730=tempGlobals;
tempGlobals=l9_3730;
N181_timeGlobal=l9_3723;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_3724;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_3725;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_3726;
N181_lifeTimeMinMax=l9_3727;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_3728;
N181_isTrailCondition=l9_3729!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_3731=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_3732=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_3731=length(float4(1.0)*l9_3732);
}
N181_globalSeed=N181_externalSeed+l9_3731;
int l9_3733=0;
l9_3733=int(tempGlobals.gInstanceID+0.5);
int l9_3734=l9_3733;
float l9_3735=float(l9_3734);
int l9_3736=int(l9_3735);
int l9_3737=l9_3736^(l9_3736*15299);
int l9_3738=l9_3737;
int l9_3739=l9_3738;
int l9_3740=((l9_3739*((l9_3739*1471343)+101146501))+1559861749)&2147483647;
int l9_3741=l9_3740;
int l9_3742=l9_3738*1399;
int l9_3743=((l9_3742*((l9_3742*1471343)+101146501))+1559861749)&2147483647;
int l9_3744=l9_3743;
int l9_3745=l9_3738*7177;
int l9_3746=((l9_3745*((l9_3745*1471343)+101146501))+1559861749)&2147483647;
int l9_3747=l9_3746;
int l9_3748=l9_3741;
float l9_3749=float(l9_3748)*4.6566129e-10;
int l9_3750=l9_3744;
float l9_3751=float(l9_3750)*4.6566129e-10;
int l9_3752=l9_3747;
float l9_3753=float(l9_3752)*4.6566129e-10;
float3 l9_3754=float3(l9_3749,l9_3751,l9_3753);
float3 l9_3755=l9_3754;
N181_particleSeed=l9_3755;
float l9_3756=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_3757;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_3757=N181_lifeTimeMinMax;
}
else
{
l9_3757=float2(N181_lifeTimeConstant);
}
float2 l9_3758=l9_3757;
float l9_3759=fast::max(l9_3758.x,0.0099999998);
float l9_3760=fast::max(l9_3758.y,0.0099999998);
float l9_3761=tempGlobals.gTimeElapsed;
float l9_3762=l9_3761;
if (N181_ENABLE_EXTERNALTIME)
{
l9_3762=N181_externalTime;
}
float l9_3763=l9_3762;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_3763=N181_timeGlobal*l9_3762;
}
else
{
float l9_3764=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_3764=N181_trailLength;
}
}
float l9_3765=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_3766=0.0;
l9_3766=tempGlobals.gInstanceRatio;
float l9_3767=l9_3766;
int l9_3768=0;
l9_3768=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_3769=l9_3768;
l9_3765=fast::max(l9_3767*(1.0-(1.0/float(l9_3769))),0.0);
}
else
{
l9_3765=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_3770=fract(((l9_3762*N181_timeGlobal)*(1.0/(l9_3758.y+l9_3764)))+l9_3765);
l9_3763=l9_3770*(l9_3758.y+l9_3764);
}
float l9_3771=mix(l9_3763/l9_3759,l9_3763/l9_3760,l9_3756);
float l9_3772=fast::clamp(l9_3771,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_3763,l9_3772);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_3773=tempGlobals.Surface_UVCoord0;
l9_3763-=(l9_3773.y*N181_trailLength);
l9_3771=mix(l9_3763/l9_3759,l9_3763/l9_3760,l9_3756);
l9_3772=fast::clamp(l9_3771,0.0,1.0);
}
}
N181_timeValues=float4(l9_3758,l9_3763,l9_3772);
ssGlobals l9_3774=tempGlobals;
tempGlobals=l9_3774;
ssGlobals l9_3775=tempGlobals;
tempGlobals=l9_3775;
ssGlobals l9_3776=tempGlobals;
tempGlobals=l9_3776;
}
if ((MESHTYPE_tmp==0)||(int(TRAILS_tmp)!=0))
{
if ((MESHTYPE_tmp==0)||N111_isTrail)
{
float l9_3777=l9_3696;
float l9_3778=l9_3697;
float l9_3779=l9_3698;
float l9_3780=N111_sizeSpeed;
}
}
if (!(MESHTYPE_tmp==0))
{
if (!N111_isTrail)
{
float l9_3781=l9_3696;
float l9_3782=l9_3697;
float l9_3783=l9_3698;
float l9_3784=N111_sizeSpeed;
if ((int(ALIGNPARTICLES_tmp)!=0))
{
if (ALIGN_PARTICLES_TO_OPTION_tmp==3)
{
}
else
{
if (ALIGN_PARTICLES_TO_OPTION_tmp==0)
{
if ((int(CUSTOMFORCE_tmp)!=0))
{
tempGlobals.N111_ParticleSpawnPosition=l9_3702;
float l9_3785=0.0;
float l9_3786=(*sc_set0.UserUniforms).timeGlobal;
l9_3785=l9_3786;
float l9_3787=0.0;
float l9_3788=(*sc_set0.UserUniforms).externalTimeInput;
l9_3787=l9_3788;
float l9_3789=0.0;
float l9_3790=(*sc_set0.UserUniforms).externalSeed;
l9_3789=l9_3790;
float l9_3791=0.0;
float l9_3792=(*sc_set0.UserUniforms).lifeTimeConstant;
l9_3791=l9_3792;
float2 l9_3793=float2(0.0);
float2 l9_3794=(*sc_set0.UserUniforms).lifeTimeMinMax;
l9_3793=l9_3794;
float l9_3795=0.0;
float l9_3796;
if ((int(TRAILS_tmp)!=0))
{
l9_3796=1.001;
}
else
{
l9_3796=0.001;
}
l9_3796-=0.001;
l9_3795=l9_3796;
float l9_3797=0.0;
float l9_3798=(*sc_set0.UserUniforms).trailLength;
l9_3797=l9_3798;
float4 l9_3799=float4(0.0);
l9_3799=tempGlobals.VertexColor;
float l9_3800=0.0;
l9_3800=l9_3799.x;
float l9_3801=0.0;
float l9_3802=l9_3795;
bool l9_3803=(l9_3802*1.0)!=0.0;
bool l9_3804;
if (l9_3803)
{
l9_3804=(l9_3800*1.0)!=0.0;
}
else
{
l9_3804=l9_3803;
}
l9_3801=float(l9_3804);
float l9_3805=l9_3785;
float l9_3806=l9_3787;
float l9_3807=l9_3789;
float l9_3808=l9_3791;
float2 l9_3809=l9_3793;
float l9_3810=l9_3797;
float l9_3811=l9_3801;
ssGlobals l9_3812=tempGlobals;
tempGlobals=l9_3812;
N181_timeGlobal=l9_3805;
N181_ENABLE_EXTERNALTIME=(int(EXTERNALTIME_tmp)!=0);
N181_externalTime=l9_3806;
N181_ENABLE_WORLDPOSSEED=(int(WORLDPOSSEED_tmp)!=0);
N181_externalSeed=l9_3807;
N181_ENABLE_LIFETIMEMINMAX=(int(LIFETIMEMINMAX_tmp)!=0);
N181_lifeTimeConstant=l9_3808;
N181_lifeTimeMinMax=l9_3809;
N181_ENABLE_INSTANTSPAWN=(int(INSTANTSPAWN_tmp)!=0);
N181_ENABLE_CONSTANTSPAWN=(int(CONSTANTSPAWN_tmp)!=0);
N181_ENABLE_TRAILS=(int(TRAILS_tmp)!=0);
N181_trailLength=l9_3810;
N181_isTrailCondition=l9_3811!=0.0;
N181_ENABLE_INDEPENDENTTRAIL=TRAILBEHAVIOR_tmp!=0;
float l9_3813=0.0;
if (N181_ENABLE_WORLDPOSSEED)
{
float4x4 l9_3814=(*sc_set0.UserUniforms).sc_ModelMatrix;
l9_3813=length(float4(1.0)*l9_3814);
}
N181_globalSeed=N181_externalSeed+l9_3813;
int l9_3815=0;
l9_3815=int(tempGlobals.gInstanceID+0.5);
int l9_3816=l9_3815;
float l9_3817=float(l9_3816);
int l9_3818=int(l9_3817);
int l9_3819=l9_3818^(l9_3818*15299);
int l9_3820=l9_3819;
int l9_3821=l9_3820;
int l9_3822=((l9_3821*((l9_3821*1471343)+101146501))+1559861749)&2147483647;
int l9_3823=l9_3822;
int l9_3824=l9_3820*1399;
int l9_3825=((l9_3824*((l9_3824*1471343)+101146501))+1559861749)&2147483647;
int l9_3826=l9_3825;
int l9_3827=l9_3820*7177;
int l9_3828=((l9_3827*((l9_3827*1471343)+101146501))+1559861749)&2147483647;
int l9_3829=l9_3828;
int l9_3830=l9_3823;
float l9_3831=float(l9_3830)*4.6566129e-10;
int l9_3832=l9_3826;
float l9_3833=float(l9_3832)*4.6566129e-10;
int l9_3834=l9_3829;
float l9_3835=float(l9_3834)*4.6566129e-10;
float3 l9_3836=float3(l9_3831,l9_3833,l9_3835);
float3 l9_3837=l9_3836;
N181_particleSeed=l9_3837;
float l9_3838=fract((N181_particleSeed.z*3.5358)+N181_globalSeed);
float2 l9_3839;
if (N181_ENABLE_LIFETIMEMINMAX)
{
l9_3839=N181_lifeTimeMinMax;
}
else
{
l9_3839=float2(N181_lifeTimeConstant);
}
float2 l9_3840=l9_3839;
float l9_3841=fast::max(l9_3840.x,0.0099999998);
float l9_3842=fast::max(l9_3840.y,0.0099999998);
float l9_3843=tempGlobals.gTimeElapsed;
float l9_3844=l9_3843;
if (N181_ENABLE_EXTERNALTIME)
{
l9_3844=N181_externalTime;
}
float l9_3845=l9_3844;
if (N181_ENABLE_INSTANTSPAWN)
{
l9_3845=N181_timeGlobal*l9_3844;
}
else
{
float l9_3846=0.0;
if (N181_ENABLE_TRAILS)
{
if (N181_ENABLE_INDEPENDENTTRAIL)
{
l9_3846=N181_trailLength;
}
}
float l9_3847=0.0;
if (N181_ENABLE_CONSTANTSPAWN)
{
float l9_3848=0.0;
l9_3848=tempGlobals.gInstanceRatio;
float l9_3849=l9_3848;
int l9_3850=0;
l9_3850=int((*sc_set0.UserUniforms).sc_GeometryInfo.y+0.5);
int l9_3851=l9_3850;
l9_3847=fast::max(l9_3849*(1.0-(1.0/float(l9_3851))),0.0);
}
else
{
l9_3847=fract((N181_particleSeed.y*12.12358)+N181_globalSeed);
}
float l9_3852=fract(((l9_3844*N181_timeGlobal)*(1.0/(l9_3840.y+l9_3846)))+l9_3847);
l9_3845=l9_3852*(l9_3840.y+l9_3846);
}
float l9_3853=mix(l9_3845/l9_3841,l9_3845/l9_3842,l9_3838);
float l9_3854=fast::clamp(l9_3853,0.0,1.0);
N181_isTrail=0.0;
N181_trailHeadTime=float2(l9_3845,l9_3854);
if (N181_ENABLE_TRAILS)
{
if (N181_isTrailCondition)
{
N181_isTrail=1.0;
float2 l9_3855=tempGlobals.Surface_UVCoord0;
l9_3845-=(l9_3855.y*N181_trailLength);
l9_3853=mix(l9_3845/l9_3841,l9_3845/l9_3842,l9_3838);
l9_3854=fast::clamp(l9_3853,0.0,1.0);
}
}
N181_timeValues=float4(l9_3840,l9_3845,l9_3854);
ssGlobals l9_3856=tempGlobals;
tempGlobals=l9_3856;
ssGlobals l9_3857=tempGlobals;
tempGlobals=l9_3857;
ssGlobals l9_3858=tempGlobals;
tempGlobals=l9_3858;
}
}
}
}
else
{
}
}
}
ssGlobals param_74=Globals;
tempGlobals=param_74;
ssGlobals param_75=Globals;
tempGlobals=param_75;
return out;
}
} // RECEIVER MODE SHADER
